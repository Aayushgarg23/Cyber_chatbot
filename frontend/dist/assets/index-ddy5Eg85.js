const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/loadCognitoIdentity-CdrHEUQN.js","assets/index-uUD7H2O_.js","assets/loadSts-C1MYEZk_.js","assets/index-Bw1GdsWC.js"])))=>i.map(i=>d[i]);
var GOe=Object.defineProperty;var HOe=(e,t,r)=>t in e?GOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ey=(e,t,r)=>HOe(e,typeof t!="symbol"?t+"":t,r);function $Oe(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in e)){const a=Object.getOwnPropertyDescriptor(i,n);a&&Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var T_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function d8(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vb(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),r}var p3={exports:{}},yx={},m3={exports:{}},Br={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D$;function XOe(){if(D$)return Br;D$=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function h(L){return L===null||typeof L!="object"?null:(L=d&&L[d]||L["@@iterator"],typeof L=="function"?L:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,p={};function m(L,Y,ae){this.props=L,this.context=Y,this.refs=p,this.updater=ae||f}m.prototype.isReactComponent={},m.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},m.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function y(){}y.prototype=m.prototype;function b(L,Y,ae){this.props=L,this.context=Y,this.refs=p,this.updater=ae||f}var w=b.prototype=new y;w.constructor=b,g(w,m.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function M(L,Y,ae){var re,H={},se=null,le=null;if(Y!=null)for(re in Y.ref!==void 0&&(le=Y.ref),Y.key!==void 0&&(se=""+Y.key),Y)S.call(Y,re)&&!T.hasOwnProperty(re)&&(H[re]=Y[re]);var ee=arguments.length-2;if(ee===1)H.children=ae;else if(1<ee){for(var J=Array(ee),oe=0;oe<ee;oe++)J[oe]=arguments[oe+2];H.children=J}if(L&&L.defaultProps)for(re in ee=L.defaultProps,ee)H[re]===void 0&&(H[re]=ee[re]);return{$$typeof:e,type:L,key:se,ref:le,props:H,_owner:C.current}}function A(L,Y){return{$$typeof:e,type:L.type,key:Y,ref:L.ref,props:L.props,_owner:L._owner}}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function O(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ae){return Y[ae]})}var j=/\/+/g;function D(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):Y.toString(36)}function I(L,Y,ae,re,H){var se=typeof L;(se==="undefined"||se==="boolean")&&(L=null);var le=!1;if(L===null)le=!0;else switch(se){case"string":case"number":le=!0;break;case"object":switch(L.$$typeof){case e:case t:le=!0}}if(le)return le=L,H=H(le),L=re===""?"."+D(le,0):re,x(H)?(ae="",L!=null&&(ae=L.replace(j,"$&/")+"/"),I(H,Y,ae,"",function(oe){return oe})):H!=null&&(P(H)&&(H=A(H,ae+(!H.key||le&&le.key===H.key?"":(""+H.key).replace(j,"$&/")+"/")+L)),Y.push(H)),1;if(le=0,re=re===""?".":re+":",x(L))for(var ee=0;ee<L.length;ee++){se=L[ee];var J=re+D(se,ee);le+=I(se,Y,ae,J,H)}else if(J=h(L),typeof J=="function")for(L=J.call(L),ee=0;!(se=L.next()).done;)se=se.value,J=re+D(se,ee++),le+=I(se,Y,ae,J,H);else if(se==="object")throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return le}function q(L,Y,ae){if(L==null)return L;var re=[],H=0;return I(L,re,"","",function(se){return Y.call(ae,se,H++)}),re}function $(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(ae){(L._status===0||L._status===-1)&&(L._status=1,L._result=ae)},function(ae){(L._status===0||L._status===-1)&&(L._status=2,L._result=ae)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var X={current:null},N={transition:null},Q={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:N,ReactCurrentOwner:C};function F(){throw Error("act(...) is not supported in production builds of React.")}return Br.Children={map:q,forEach:function(L,Y,ae){q(L,function(){Y.apply(this,arguments)},ae)},count:function(L){var Y=0;return q(L,function(){Y++}),Y},toArray:function(L){return q(L,function(Y){return Y})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Br.Component=m,Br.Fragment=r,Br.Profiler=n,Br.PureComponent=b,Br.StrictMode=i,Br.Suspense=l,Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Br.act=F,Br.cloneElement=function(L,Y,ae){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var re=g({},L.props),H=L.key,se=L.ref,le=L._owner;if(Y!=null){if(Y.ref!==void 0&&(se=Y.ref,le=C.current),Y.key!==void 0&&(H=""+Y.key),L.type&&L.type.defaultProps)var ee=L.type.defaultProps;for(J in Y)S.call(Y,J)&&!T.hasOwnProperty(J)&&(re[J]=Y[J]===void 0&&ee!==void 0?ee[J]:Y[J])}var J=arguments.length-2;if(J===1)re.children=ae;else if(1<J){ee=Array(J);for(var oe=0;oe<J;oe++)ee[oe]=arguments[oe+2];re.children=ee}return{$$typeof:e,type:L.type,key:H,ref:se,props:re,_owner:le}},Br.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},Br.createElement=M,Br.createFactory=function(L){var Y=M.bind(null,L);return Y.type=L,Y},Br.createRef=function(){return{current:null}},Br.forwardRef=function(L){return{$$typeof:s,render:L}},Br.isValidElement=P,Br.lazy=function(L){return{$$typeof:c,_payload:{_status:-1,_result:L},_init:$}},Br.memo=function(L,Y){return{$$typeof:u,type:L,compare:Y===void 0?null:Y}},Br.startTransition=function(L){var Y=N.transition;N.transition={};try{L()}finally{N.transition=Y}},Br.unstable_act=F,Br.useCallback=function(L,Y){return X.current.useCallback(L,Y)},Br.useContext=function(L){return X.current.useContext(L)},Br.useDebugValue=function(){},Br.useDeferredValue=function(L){return X.current.useDeferredValue(L)},Br.useEffect=function(L,Y){return X.current.useEffect(L,Y)},Br.useId=function(){return X.current.useId()},Br.useImperativeHandle=function(L,Y,ae){return X.current.useImperativeHandle(L,Y,ae)},Br.useInsertionEffect=function(L,Y){return X.current.useInsertionEffect(L,Y)},Br.useLayoutEffect=function(L,Y){return X.current.useLayoutEffect(L,Y)},Br.useMemo=function(L,Y){return X.current.useMemo(L,Y)},Br.useReducer=function(L,Y,ae){return X.current.useReducer(L,Y,ae)},Br.useRef=function(L){return X.current.useRef(L)},Br.useState=function(L){return X.current.useState(L)},Br.useSyncExternalStore=function(L,Y,ae){return X.current.useSyncExternalStore(L,Y,ae)},Br.useTransition=function(){return X.current.useTransition()},Br.version="18.3.1",Br}var I$;function u2(){return I$||(I$=1,m3.exports=XOe()),m3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j$;function YOe(){if(j$)return yx;j$=1;var e=u2(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(s,l,u){var c,d={},h=null,f=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(f=l.ref);for(c in l)i.call(l,c)&&!a.hasOwnProperty(c)&&(d[c]=l[c]);if(s&&s.defaultProps)for(c in l=s.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:s,key:h,ref:f,props:d,_owner:n.current}}return yx.Fragment=r,yx.jsx=o,yx.jsxs=o,yx}var z$;function KOe(){return z$||(z$=1,p3.exports=YOe()),p3.exports}var V=KOe(),G=u2();const yf=d8(G),TR=$Oe({__proto__:null,default:yf},[G]);var LT={},g3={exports:{}},_o={},v3={exports:{}},y3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B$;function QOe(){return B$||(B$=1,function(e){function t(N,Q){var F=N.length;N.push(Q);e:for(;0<F;){var L=F-1>>>1,Y=N[L];if(0<n(Y,Q))N[L]=Q,N[F]=Y,F=L;else break e}}function r(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var Q=N[0],F=N.pop();if(F!==Q){N[0]=F;e:for(var L=0,Y=N.length,ae=Y>>>1;L<ae;){var re=2*(L+1)-1,H=N[re],se=re+1,le=N[se];if(0>n(H,F))se<Y&&0>n(le,H)?(N[L]=le,N[se]=F,L=se):(N[L]=H,N[re]=F,L=re);else if(se<Y&&0>n(le,F))N[L]=le,N[se]=F,L=se;else break e}}return Q}function n(N,Q){var F=N.sortIndex-Q.sortIndex;return F!==0?F:N.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,d=null,h=3,f=!1,g=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var Q=r(u);Q!==null;){if(Q.callback===null)i(u);else if(Q.startTime<=N)i(u),Q.sortIndex=Q.expirationTime,t(l,Q);else break;Q=r(u)}}function x(N){if(p=!1,w(N),!g)if(r(l)!==null)g=!0,$(S);else{var Q=r(u);Q!==null&&X(x,Q.startTime-N)}}function S(N,Q){g=!1,p&&(p=!1,y(M),M=-1),f=!0;var F=h;try{for(w(Q),d=r(l);d!==null&&(!(d.expirationTime>Q)||N&&!O());){var L=d.callback;if(typeof L=="function"){d.callback=null,h=d.priorityLevel;var Y=L(d.expirationTime<=Q);Q=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===r(l)&&i(l),w(Q)}else i(l);d=r(l)}if(d!==null)var ae=!0;else{var re=r(u);re!==null&&X(x,re.startTime-Q),ae=!1}return ae}finally{d=null,h=F,f=!1}}var C=!1,T=null,M=-1,A=5,P=-1;function O(){return!(e.unstable_now()-P<A)}function j(){if(T!==null){var N=e.unstable_now();P=N;var Q=!0;try{Q=T(!0,N)}finally{Q?D():(C=!1,T=null)}}else C=!1}var D;if(typeof b=="function")D=function(){b(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,q=I.port2;I.port1.onmessage=j,D=function(){q.postMessage(null)}}else D=function(){m(j,0)};function $(N){T=N,C||(C=!0,D())}function X(N,Q){M=m(function(){N(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,$(S))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(N){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var F=h;h=Q;try{return N()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,Q){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var F=h;h=N;try{return Q()}finally{h=F}},e.unstable_scheduleCallback=function(N,Q,F){var L=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?L+F:L):F=L,N){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=F+Y,N={id:c++,callback:Q,priorityLevel:N,startTime:F,expirationTime:Y,sortIndex:-1},F>L?(N.sortIndex=F,t(u,N),r(l)===null&&N===r(u)&&(p?(y(M),M=-1):p=!0,X(x,F-L))):(N.sortIndex=Y,t(l,N),g||f||(g=!0,$(S))),N},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(N){var Q=h;return function(){var F=h;h=Q;try{return N.apply(this,arguments)}finally{h=F}}}}(y3)),y3}var L$;function JOe(){return L$||(L$=1,v3.exports=QOe()),v3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F$;function ZOe(){if(F$)return _o;F$=1;var e=u2(),t=JOe();function r(v){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+v,E=1;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,n={};function a(v,_){o(v,_),o(v+"Capture",_)}function o(v,_){for(n[v]=_,v=0;v<_.length;v++)i.add(_[v])}var s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function h(v){return l.call(d,v)?!0:l.call(c,v)?!1:u.test(v)?d[v]=!0:(c[v]=!0,!1)}function f(v,_,E,R){if(E!==null&&E.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return R?!1:E!==null?!E.acceptsBooleans:(v=v.toLowerCase().slice(0,5),v!=="data-"&&v!=="aria-");default:return!1}}function g(v,_,E,R){if(_===null||typeof _>"u"||f(v,_,E,R))return!0;if(R)return!1;if(E!==null)switch(E.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function p(v,_,E,R,z,W,fe){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=R,this.attributeNamespace=z,this.mustUseProperty=E,this.propertyName=v,this.type=_,this.sanitizeURL=W,this.removeEmptyString=fe}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(v){m[v]=new p(v,0,!1,v,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(v){var _=v[0];m[_]=new p(_,1,!1,v[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(v){m[v]=new p(v,2,!1,v.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(v){m[v]=new p(v,2,!1,v,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(v){m[v]=new p(v,3,!1,v.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(v){m[v]=new p(v,3,!0,v,null,!1,!1)}),["capture","download"].forEach(function(v){m[v]=new p(v,4,!1,v,null,!1,!1)}),["cols","rows","size","span"].forEach(function(v){m[v]=new p(v,6,!1,v,null,!1,!1)}),["rowSpan","start"].forEach(function(v){m[v]=new p(v,5,!1,v.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(v){return v[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(v){var _=v.replace(y,b);m[_]=new p(_,1,!1,v,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(v){var _=v.replace(y,b);m[_]=new p(_,1,!1,v,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(v){var _=v.replace(y,b);m[_]=new p(_,1,!1,v,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(v){m[v]=new p(v,1,!1,v.toLowerCase(),null,!1,!1)}),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(v){m[v]=new p(v,1,!1,v.toLowerCase(),null,!0,!0)});function w(v,_,E,R){var z=m.hasOwnProperty(_)?m[_]:null;(z!==null?z.type!==0:R||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(g(_,E,z,R)&&(E=null),R||z===null?h(_)&&(E===null?v.removeAttribute(_):v.setAttribute(_,""+E)):z.mustUseProperty?v[z.propertyName]=E===null?z.type===3?!1:"":E:(_=z.attributeName,R=z.attributeNamespace,E===null?v.removeAttribute(_):(z=z.type,E=z===3||z===4&&E===!0?"":""+E,R?v.setAttributeNS(R,_,E):v.setAttribute(_,E))))}var x=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),C=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),O=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),N=Symbol.iterator;function Q(v){return v===null||typeof v!="object"?null:(v=N&&v[N]||v["@@iterator"],typeof v=="function"?v:null)}var F=Object.assign,L;function Y(v){if(L===void 0)try{throw Error()}catch(E){var _=E.stack.trim().match(/\n( *(at )?)/);L=_&&_[1]||""}return`
`+L+v}var ae=!1;function re(v,_){if(!v||ae)return"";ae=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(rt){var R=rt}Reflect.construct(v,[],_)}else{try{_.call()}catch(rt){R=rt}v.call(_.prototype)}else{try{throw Error()}catch(rt){R=rt}v()}}catch(rt){if(rt&&R&&typeof rt.stack=="string"){for(var z=rt.stack.split(`
`),W=R.stack.split(`
`),fe=z.length-1,je=W.length-1;1<=fe&&0<=je&&z[fe]!==W[je];)je--;for(;1<=fe&&0<=je;fe--,je--)if(z[fe]!==W[je]){if(fe!==1||je!==1)do if(fe--,je--,0>je||z[fe]!==W[je]){var Ne=`
`+z[fe].replace(" at new "," at ");return v.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",v.displayName)),Ne}while(1<=fe&&0<=je);break}}}finally{ae=!1,Error.prepareStackTrace=E}return(v=v?v.displayName||v.name:"")?Y(v):""}function H(v){switch(v.tag){case 5:return Y(v.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return v=re(v.type,!1),v;case 11:return v=re(v.type.render,!1),v;case 1:return v=re(v.type,!0),v;default:return""}}function se(v){if(v==null)return null;if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case T:return"Fragment";case C:return"Portal";case A:return"Profiler";case M:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList"}if(typeof v=="object")switch(v.$$typeof){case O:return(v.displayName||"Context")+".Consumer";case P:return(v._context.displayName||"Context")+".Provider";case j:var _=v.render;return v=v.displayName,v||(v=_.displayName||_.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case q:return _=v.displayName||null,_!==null?_:se(v.type)||"Memo";case $:_=v._payload,v=v._init;try{return se(v(_))}catch{}}return null}function le(v){var _=v.type;switch(v.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return v=_.render,v=v.displayName||v.name||"",_.displayName||(v!==""?"ForwardRef("+v+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(_);case 8:return _===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function ee(v){switch(typeof v){case"boolean":case"number":case"string":case"undefined":return v;case"object":return v;default:return""}}function J(v){var _=v.type;return(v=v.nodeName)&&v.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function oe(v){var _=J(v)?"checked":"value",E=Object.getOwnPropertyDescriptor(v.constructor.prototype,_),R=""+v[_];if(!v.hasOwnProperty(_)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var z=E.get,W=E.set;return Object.defineProperty(v,_,{configurable:!0,get:function(){return z.call(this)},set:function(fe){R=""+fe,W.call(this,fe)}}),Object.defineProperty(v,_,{enumerable:E.enumerable}),{getValue:function(){return R},setValue:function(fe){R=""+fe},stopTracking:function(){v._valueTracker=null,delete v[_]}}}}function me(v){v._valueTracker||(v._valueTracker=oe(v))}function be(v){if(!v)return!1;var _=v._valueTracker;if(!_)return!0;var E=_.getValue(),R="";return v&&(R=J(v)?v.checked?"true":"false":v.value),v=R,v!==E?(_.setValue(v),!0):!1}function de(v){if(v=v||(typeof document<"u"?document:void 0),typeof v>"u")return null;try{return v.activeElement||v.body}catch{return v.body}}function ge(v,_){var E=_.checked;return F({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:E??v._wrapperState.initialChecked})}function ce(v,_){var E=_.defaultValue==null?"":_.defaultValue,R=_.checked!=null?_.checked:_.defaultChecked;E=ee(_.value!=null?_.value:E),v._wrapperState={initialChecked:R,initialValue:E,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function Ce(v,_){_=_.checked,_!=null&&w(v,"checked",_,!1)}function Ee(v,_){Ce(v,_);var E=ee(_.value),R=_.type;if(E!=null)R==="number"?(E===0&&v.value===""||v.value!=E)&&(v.value=""+E):v.value!==""+E&&(v.value=""+E);else if(R==="submit"||R==="reset"){v.removeAttribute("value");return}_.hasOwnProperty("value")?he(v,_.type,E):_.hasOwnProperty("defaultValue")&&he(v,_.type,ee(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(v.defaultChecked=!!_.defaultChecked)}function Me(v,_,E){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var R=_.type;if(!(R!=="submit"&&R!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+v._wrapperState.initialValue,E||_===v.value||(v.value=_),v.defaultValue=_}E=v.name,E!==""&&(v.name=""),v.defaultChecked=!!v._wrapperState.initialChecked,E!==""&&(v.name=E)}function he(v,_,E){(_!=="number"||de(v.ownerDocument)!==v)&&(E==null?v.defaultValue=""+v._wrapperState.initialValue:v.defaultValue!==""+E&&(v.defaultValue=""+E))}var Ae=Array.isArray;function De(v,_,E,R){if(v=v.options,_){_={};for(var z=0;z<E.length;z++)_["$"+E[z]]=!0;for(E=0;E<v.length;E++)z=_.hasOwnProperty("$"+v[E].value),v[E].selected!==z&&(v[E].selected=z),z&&R&&(v[E].defaultSelected=!0)}else{for(E=""+ee(E),_=null,z=0;z<v.length;z++){if(v[z].value===E){v[z].selected=!0,R&&(v[z].defaultSelected=!0);return}_!==null||v[z].disabled||(_=v[z])}_!==null&&(_.selected=!0)}}function Z(v,_){if(_.dangerouslySetInnerHTML!=null)throw Error(r(91));return F({},_,{value:void 0,defaultValue:void 0,children:""+v._wrapperState.initialValue})}function ie(v,_){var E=_.value;if(E==null){if(E=_.children,_=_.defaultValue,E!=null){if(_!=null)throw Error(r(92));if(Ae(E)){if(1<E.length)throw Error(r(93));E=E[0]}_=E}_==null&&(_=""),E=_}v._wrapperState={initialValue:ee(E)}}function Te(v,_){var E=ee(_.value),R=ee(_.defaultValue);E!=null&&(E=""+E,E!==v.value&&(v.value=E),_.defaultValue==null&&v.defaultValue!==E&&(v.defaultValue=E)),R!=null&&(v.defaultValue=""+R)}function Ue(v){var _=v.textContent;_===v._wrapperState.initialValue&&_!==""&&_!==null&&(v.value=_)}function ne(v){switch(v){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K(v,_){return v==null||v==="http://www.w3.org/1999/xhtml"?ne(_):v==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":v}var B,U=function(v){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,E,R,z){MSApp.execUnsafeLocalFunction(function(){return v(_,E,R,z)})}:v}(function(v,_){if(v.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in v)v.innerHTML=_;else{for(B=B||document.createElement("div"),B.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=B.firstChild;v.firstChild;)v.removeChild(v.firstChild);for(;_.firstChild;)v.appendChild(_.firstChild)}});function te(v,_){if(_){var E=v.firstChild;if(E&&E===v.lastChild&&E.nodeType===3){E.nodeValue=_;return}}v.textContent=_}var ve={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Re=["Webkit","ms","Moz","O"];Object.keys(ve).forEach(function(v){Re.forEach(function(_){_=_+v.charAt(0).toUpperCase()+v.substring(1),ve[_]=ve[v]})});function Fe(v,_,E){return _==null||typeof _=="boolean"||_===""?"":E||typeof _!="number"||_===0||ve.hasOwnProperty(v)&&ve[v]?(""+_).trim():_+"px"}function et(v,_){v=v.style;for(var E in _)if(_.hasOwnProperty(E)){var R=E.indexOf("--")===0,z=Fe(E,_[E],R);E==="float"&&(E="cssFloat"),R?v.setProperty(E,z):v[E]=z}}var Ze=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pe(v,_){if(_){if(Ze[v]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(r(137,v));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(r(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(r(61))}if(_.style!=null&&typeof _.style!="object")throw Error(r(62))}}function Le(v,_){if(v.indexOf("-")===-1)return typeof _.is=="string";switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ht=null;function Be(v){return v=v.target||v.srcElement||window,v.correspondingUseElement&&(v=v.correspondingUseElement),v.nodeType===3?v.parentNode:v}var Ye=null,$e=null,mt=null;function It(v){if(v=ix(v)){if(typeof Ye!="function")throw Error(r(280));var _=v.stateNode;_&&(_=JP(_),Ye(v.stateNode,v.type,_))}}function qt(v){$e?mt?mt.push(v):mt=[v]:$e=v}function mr(){if($e){var v=$e,_=mt;if(mt=$e=null,It(v),_)for(v=0;v<_.length;v++)It(_[v])}}function Rr(v,_){return v(_)}function ye(){}var xe=!1;function He(v,_,E){if(xe)return v(_,E);xe=!0;try{return Rr(v,_,E)}finally{xe=!1,($e!==null||mt!==null)&&(ye(),mr())}}function Xe(v,_){var E=v.stateNode;if(E===null)return null;var R=JP(E);if(R===null)return null;E=R[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(v=v.type,R=!(v==="button"||v==="input"||v==="select"||v==="textarea")),v=!R;break e;default:v=!1}if(v)return null;if(E&&typeof E!="function")throw Error(r(231,_,typeof E));return E}var pt=!1;if(s)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){pt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{pt=!1}function nr(v,_,E,R,z,W,fe,je,Ne){var rt=Array.prototype.slice.call(arguments,3);try{_.apply(E,rt)}catch(yt){this.onError(yt)}}var Xr=!1,we=null,We=!1,tt=null,qe={onError:function(v){Xr=!0,we=v}};function nt(v,_,E,R,z,W,fe,je,Ne){Xr=!1,we=null,nr.apply(qe,arguments)}function Tt(v,_,E,R,z,W,fe,je,Ne){if(nt.apply(this,arguments),Xr){if(Xr){var rt=we;Xr=!1,we=null}else throw Error(r(198));We||(We=!0,tt=rt)}}function Ft(v){var _=v,E=v;if(v.alternate)for(;_.return;)_=_.return;else{v=_;do _=v,(_.flags&4098)!==0&&(E=_.return),v=_.return;while(v)}return _.tag===3?E:null}function $t(v){if(v.tag===13){var _=v.memoizedState;if(_===null&&(v=v.alternate,v!==null&&(_=v.memoizedState)),_!==null)return _.dehydrated}return null}function zt(v){if(Ft(v)!==v)throw Error(r(188))}function gr(v){var _=v.alternate;if(!_){if(_=Ft(v),_===null)throw Error(r(188));return _!==v?null:v}for(var E=v,R=_;;){var z=E.return;if(z===null)break;var W=z.alternate;if(W===null){if(R=z.return,R!==null){E=R;continue}break}if(z.child===W.child){for(W=z.child;W;){if(W===E)return zt(z),v;if(W===R)return zt(z),_;W=W.sibling}throw Error(r(188))}if(E.return!==R.return)E=z,R=W;else{for(var fe=!1,je=z.child;je;){if(je===E){fe=!0,E=z,R=W;break}if(je===R){fe=!0,R=z,E=W;break}je=je.sibling}if(!fe){for(je=W.child;je;){if(je===E){fe=!0,E=W,R=z;break}if(je===R){fe=!0,R=W,E=z;break}je=je.sibling}if(!fe)throw Error(r(189))}}if(E.alternate!==R)throw Error(r(190))}if(E.tag!==3)throw Error(r(188));return E.stateNode.current===E?v:_}function Vt(v){return v=gr(v),v!==null?dr(v):null}function dr(v){if(v.tag===5||v.tag===6)return v;for(v=v.child;v!==null;){var _=dr(v);if(_!==null)return _;v=v.sibling}return null}var Se=t.unstable_scheduleCallback,Ge=t.unstable_cancelCallback,ut=t.unstable_shouldYield,vt=t.unstable_requestPaint,_t=t.unstable_now,St=t.unstable_getCurrentPriorityLevel,Kt=t.unstable_ImmediatePriority,Nt=t.unstable_UserBlockingPriority,Ir=t.unstable_NormalPriority,zr=t.unstable_LowPriority,Pr=t.unstable_IdlePriority,pi=null,ue=null;function pe(v){if(ue&&typeof ue.onCommitFiberRoot=="function")try{ue.onCommitFiberRoot(pi,v,void 0,(v.current.flags&128)===128)}catch{}}var Oe=Math.clz32?Math.clz32:ft,_e=Math.log,Ve=Math.LN2;function ft(v){return v>>>=0,v===0?32:31-(_e(v)/Ve|0)|0}var oa=64,il=4194304;function fs(v){switch(v&-v){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return v&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return v}}function zf(v,_){var E=v.pendingLanes;if(E===0)return 0;var R=0,z=v.suspendedLanes,W=v.pingedLanes,fe=E&268435455;if(fe!==0){var je=fe&~z;je!==0?R=fs(je):(W&=fe,W!==0&&(R=fs(W)))}else fe=E&~z,fe!==0?R=fs(fe):W!==0&&(R=fs(W));if(R===0)return 0;if(_!==0&&_!==R&&(_&z)===0&&(z=R&-R,W=_&-_,z>=W||z===16&&(W&4194240)!==0))return _;if((R&4)!==0&&(R|=E&16),_=v.entangledLanes,_!==0)for(v=v.entanglements,_&=R;0<_;)E=31-Oe(_),z=1<<E,R|=v[E],_&=~z;return R}function Yr(v,_){switch(v){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(v,_){for(var E=v.suspendedLanes,R=v.pingedLanes,z=v.expirationTimes,W=v.pendingLanes;0<W;){var fe=31-Oe(W),je=1<<fe,Ne=z[fe];Ne===-1?((je&E)===0||(je&R)!==0)&&(z[fe]=Yr(je,_)):Ne<=_&&(v.expiredLanes|=je),W&=~je}}function Nv(v){return v=v.pendingLanes&-1073741825,v!==0?v:v&1073741824?1073741824:0}function Bf(){var v=oa;return oa<<=1,(oa&4194240)===0&&(oa=64),v}function ig(v){for(var _=[],E=0;31>E;E++)_.push(v);return _}function Pn(v,_,E){v.pendingLanes|=_,_!==536870912&&(v.suspendedLanes=0,v.pingedLanes=0),v=v.eventTimes,_=31-Oe(_),v[_]=E}function nl(v,_){var E=v.pendingLanes&~_;v.pendingLanes=_,v.suspendedLanes=0,v.pingedLanes=0,v.expiredLanes&=_,v.mutableReadLanes&=_,v.entangledLanes&=_,_=v.entanglements;var R=v.eventTimes;for(v=v.expirationTimes;0<E;){var z=31-Oe(E),W=1<<z;_[z]=0,R[z]=-1,v[z]=-1,E&=~W}}function ps(v,_){var E=v.entangledLanes|=_;for(v=v.entanglements;E;){var R=31-Oe(E),z=1<<R;z&_|v[R]&_&&(v[R]|=_),E&=~z}}var Gr=0;function Uv(v){return v&=-v,1<v?4<v?(v&268435455)!==0?16:536870912:4:1}var kp,ms,Uw,Vv,Ab,ng=!1,qp=[],al=null,Vo=null,ko=null,Vw=new Map,kw=new Map,ag=[],fAe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mH(v,_){switch(v){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":Vo=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Vw.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":kw.delete(_.pointerId)}}function qw(v,_,E,R,z,W){return v===null||v.nativeEvent!==W?(v={blockedOn:_,domEventName:E,eventSystemFlags:R,nativeEvent:W,targetContainers:[z]},_!==null&&(_=ix(_),_!==null&&ms(_)),v):(v.eventSystemFlags|=R,_=v.targetContainers,z!==null&&_.indexOf(z)===-1&&_.push(z),v)}function pAe(v,_,E,R,z){switch(_){case"focusin":return al=qw(al,v,_,E,R,z),!0;case"dragenter":return Vo=qw(Vo,v,_,E,R,z),!0;case"mouseover":return ko=qw(ko,v,_,E,R,z),!0;case"pointerover":var W=z.pointerId;return Vw.set(W,qw(Vw.get(W)||null,v,_,E,R,z)),!0;case"gotpointercapture":return W=z.pointerId,kw.set(W,qw(kw.get(W)||null,v,_,E,R,z)),!0}return!1}function gH(v){var _=kv(v.target);if(_!==null){var E=Ft(_);if(E!==null){if(_=E.tag,_===13){if(_=$t(E),_!==null){v.blockedOn=_,Ab(v.priority,function(){Uw(E)});return}}else if(_===3&&E.stateNode.current.memoizedState.isDehydrated){v.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}v.blockedOn=null}function FP(v){if(v.blockedOn!==null)return!1;for(var _=v.targetContainers;0<_.length;){var E=VI(v.domEventName,v.eventSystemFlags,_[0],v.nativeEvent);if(E===null){E=v.nativeEvent;var R=new E.constructor(E.type,E);ht=R,E.target.dispatchEvent(R),ht=null}else return _=ix(E),_!==null&&ms(_),v.blockedOn=E,!1;_.shift()}return!0}function vH(v,_,E){FP(v)&&E.delete(_)}function mAe(){ng=!1,al!==null&&FP(al)&&(al=null),Vo!==null&&FP(Vo)&&(Vo=null),ko!==null&&FP(ko)&&(ko=null),Vw.forEach(vH),kw.forEach(vH)}function Ww(v,_){v.blockedOn===_&&(v.blockedOn=null,ng||(ng=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,mAe)))}function Gw(v){function _(z){return Ww(z,v)}if(0<qp.length){Ww(qp[0],v);for(var E=1;E<qp.length;E++){var R=qp[E];R.blockedOn===v&&(R.blockedOn=null)}}for(al!==null&&Ww(al,v),Vo!==null&&Ww(Vo,v),ko!==null&&Ww(ko,v),Vw.forEach(_),kw.forEach(_),E=0;E<ag.length;E++)R=ag[E],R.blockedOn===v&&(R.blockedOn=null);for(;0<ag.length&&(E=ag[0],E.blockedOn===null);)gH(E),E.blockedOn===null&&ag.shift()}var Ob=x.ReactCurrentBatchConfig,NP=!0;function gAe(v,_,E,R){var z=Gr,W=Ob.transition;Ob.transition=null;try{Gr=1,UI(v,_,E,R)}finally{Gr=z,Ob.transition=W}}function vAe(v,_,E,R){var z=Gr,W=Ob.transition;Ob.transition=null;try{Gr=4,UI(v,_,E,R)}finally{Gr=z,Ob.transition=W}}function UI(v,_,E,R){if(NP){var z=VI(v,_,E,R);if(z===null)nj(v,_,R,UP,E),mH(v,R);else if(pAe(z,v,_,E,R))R.stopPropagation();else if(mH(v,R),_&4&&-1<fAe.indexOf(v)){for(;z!==null;){var W=ix(z);if(W!==null&&kp(W),W=VI(v,_,E,R),W===null&&nj(v,_,R,UP,E),W===z)break;z=W}z!==null&&R.stopPropagation()}else nj(v,_,R,null,E)}}var UP=null;function VI(v,_,E,R){if(UP=null,v=Be(R),v=kv(v),v!==null)if(_=Ft(v),_===null)v=null;else if(E=_.tag,E===13){if(v=$t(_),v!==null)return v;v=null}else if(E===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;v=null}else _!==v&&(v=null);return UP=v,null}function yH(v){switch(v){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(St()){case Kt:return 1;case Nt:return 4;case Ir:case zr:return 16;case Pr:return 536870912;default:return 16}default:return 16}}var og=null,kI=null,VP=null;function bH(){if(VP)return VP;var v,_=kI,E=_.length,R,z="value"in og?og.value:og.textContent,W=z.length;for(v=0;v<E&&_[v]===z[v];v++);var fe=E-v;for(R=1;R<=fe&&_[E-R]===z[W-R];R++);return VP=z.slice(v,1<R?1-R:void 0)}function kP(v){var _=v.keyCode;return"charCode"in v?(v=v.charCode,v===0&&_===13&&(v=13)):v=_,v===10&&(v=13),32<=v||v===13?v:0}function qP(){return!0}function _H(){return!1}function qo(v){function _(E,R,z,W,fe){this._reactName=E,this._targetInst=z,this.type=R,this.nativeEvent=W,this.target=fe,this.currentTarget=null;for(var je in v)v.hasOwnProperty(je)&&(E=v[je],this[je]=E?E(W):W[je]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?qP:_H,this.isPropagationStopped=_H,this}return F(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=qP)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=qP)},persist:function(){},isPersistent:qP}),_}var Rb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(v){return v.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qI=qo(Rb),Hw=F({},Rb,{view:0,detail:0}),yAe=qo(Hw),WI,GI,$w,WP=F({},Hw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$I,button:0,buttons:0,relatedTarget:function(v){return v.relatedTarget===void 0?v.fromElement===v.srcElement?v.toElement:v.fromElement:v.relatedTarget},movementX:function(v){return"movementX"in v?v.movementX:(v!==$w&&($w&&v.type==="mousemove"?(WI=v.screenX-$w.screenX,GI=v.screenY-$w.screenY):GI=WI=0,$w=v),WI)},movementY:function(v){return"movementY"in v?v.movementY:GI}}),wH=qo(WP),bAe=F({},WP,{dataTransfer:0}),_Ae=qo(bAe),wAe=F({},Hw,{relatedTarget:0}),HI=qo(wAe),xAe=F({},Rb,{animationName:0,elapsedTime:0,pseudoElement:0}),SAe=qo(xAe),CAe=F({},Rb,{clipboardData:function(v){return"clipboardData"in v?v.clipboardData:window.clipboardData}}),EAe=qo(CAe),MAe=F({},Rb,{data:0}),xH=qo(MAe),PAe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TAe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AAe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OAe(v){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(v):(v=AAe[v])?!!_[v]:!1}function $I(){return OAe}var RAe=F({},Hw,{key:function(v){if(v.key){var _=PAe[v.key]||v.key;if(_!=="Unidentified")return _}return v.type==="keypress"?(v=kP(v),v===13?"Enter":String.fromCharCode(v)):v.type==="keydown"||v.type==="keyup"?TAe[v.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$I,charCode:function(v){return v.type==="keypress"?kP(v):0},keyCode:function(v){return v.type==="keydown"||v.type==="keyup"?v.keyCode:0},which:function(v){return v.type==="keypress"?kP(v):v.type==="keydown"||v.type==="keyup"?v.keyCode:0}}),DAe=qo(RAe),IAe=F({},WP,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SH=qo(IAe),jAe=F({},Hw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$I}),zAe=qo(jAe),BAe=F({},Rb,{propertyName:0,elapsedTime:0,pseudoElement:0}),LAe=qo(BAe),FAe=F({},WP,{deltaX:function(v){return"deltaX"in v?v.deltaX:"wheelDeltaX"in v?-v.wheelDeltaX:0},deltaY:function(v){return"deltaY"in v?v.deltaY:"wheelDeltaY"in v?-v.wheelDeltaY:"wheelDelta"in v?-v.wheelDelta:0},deltaZ:0,deltaMode:0}),NAe=qo(FAe),UAe=[9,13,27,32],XI=s&&"CompositionEvent"in window,Xw=null;s&&"documentMode"in document&&(Xw=document.documentMode);var VAe=s&&"TextEvent"in window&&!Xw,CH=s&&(!XI||Xw&&8<Xw&&11>=Xw),EH=" ",MH=!1;function PH(v,_){switch(v){case"keyup":return UAe.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TH(v){return v=v.detail,typeof v=="object"&&"data"in v?v.data:null}var Db=!1;function kAe(v,_){switch(v){case"compositionend":return TH(_);case"keypress":return _.which!==32?null:(MH=!0,EH);case"textInput":return v=_.data,v===EH&&MH?null:v;default:return null}}function qAe(v,_){if(Db)return v==="compositionend"||!XI&&PH(v,_)?(v=bH(),VP=kI=og=null,Db=!1,v):null;switch(v){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return CH&&_.locale!=="ko"?null:_.data;default:return null}}var WAe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AH(v){var _=v&&v.nodeName&&v.nodeName.toLowerCase();return _==="input"?!!WAe[v.type]:_==="textarea"}function OH(v,_,E,R){qt(R),_=YP(_,"onChange"),0<_.length&&(E=new qI("onChange","change",null,E,R),v.push({event:E,listeners:_}))}var Yw=null,Kw=null;function GAe(v){XH(v,0)}function GP(v){var _=Lb(v);if(be(_))return v}function HAe(v,_){if(v==="change")return _}var RH=!1;if(s){var YI;if(s){var KI="oninput"in document;if(!KI){var DH=document.createElement("div");DH.setAttribute("oninput","return;"),KI=typeof DH.oninput=="function"}YI=KI}else YI=!1;RH=YI&&(!document.documentMode||9<document.documentMode)}function IH(){Yw&&(Yw.detachEvent("onpropertychange",jH),Kw=Yw=null)}function jH(v){if(v.propertyName==="value"&&GP(Kw)){var _=[];OH(_,Kw,v,Be(v)),He(GAe,_)}}function $Ae(v,_,E){v==="focusin"?(IH(),Yw=_,Kw=E,Yw.attachEvent("onpropertychange",jH)):v==="focusout"&&IH()}function XAe(v){if(v==="selectionchange"||v==="keyup"||v==="keydown")return GP(Kw)}function YAe(v,_){if(v==="click")return GP(_)}function KAe(v,_){if(v==="input"||v==="change")return GP(_)}function QAe(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var ol=typeof Object.is=="function"?Object.is:QAe;function Qw(v,_){if(ol(v,_))return!0;if(typeof v!="object"||v===null||typeof _!="object"||_===null)return!1;var E=Object.keys(v),R=Object.keys(_);if(E.length!==R.length)return!1;for(R=0;R<E.length;R++){var z=E[R];if(!l.call(_,z)||!ol(v[z],_[z]))return!1}return!0}function zH(v){for(;v&&v.firstChild;)v=v.firstChild;return v}function BH(v,_){var E=zH(v);v=0;for(var R;E;){if(E.nodeType===3){if(R=v+E.textContent.length,v<=_&&R>=_)return{node:E,offset:_-v};v=R}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=zH(E)}}function LH(v,_){return v&&_?v===_?!0:v&&v.nodeType===3?!1:_&&_.nodeType===3?LH(v,_.parentNode):"contains"in v?v.contains(_):v.compareDocumentPosition?!!(v.compareDocumentPosition(_)&16):!1:!1}function FH(){for(var v=window,_=de();_ instanceof v.HTMLIFrameElement;){try{var E=typeof _.contentWindow.location.href=="string"}catch{E=!1}if(E)v=_.contentWindow;else break;_=de(v.document)}return _}function QI(v){var _=v&&v.nodeName&&v.nodeName.toLowerCase();return _&&(_==="input"&&(v.type==="text"||v.type==="search"||v.type==="tel"||v.type==="url"||v.type==="password")||_==="textarea"||v.contentEditable==="true")}function JAe(v){var _=FH(),E=v.focusedElem,R=v.selectionRange;if(_!==E&&E&&E.ownerDocument&&LH(E.ownerDocument.documentElement,E)){if(R!==null&&QI(E)){if(_=R.start,v=R.end,v===void 0&&(v=_),"selectionStart"in E)E.selectionStart=_,E.selectionEnd=Math.min(v,E.value.length);else if(v=(_=E.ownerDocument||document)&&_.defaultView||window,v.getSelection){v=v.getSelection();var z=E.textContent.length,W=Math.min(R.start,z);R=R.end===void 0?W:Math.min(R.end,z),!v.extend&&W>R&&(z=R,R=W,W=z),z=BH(E,W);var fe=BH(E,R);z&&fe&&(v.rangeCount!==1||v.anchorNode!==z.node||v.anchorOffset!==z.offset||v.focusNode!==fe.node||v.focusOffset!==fe.offset)&&(_=_.createRange(),_.setStart(z.node,z.offset),v.removeAllRanges(),W>R?(v.addRange(_),v.extend(fe.node,fe.offset)):(_.setEnd(fe.node,fe.offset),v.addRange(_)))}}for(_=[],v=E;v=v.parentNode;)v.nodeType===1&&_.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<_.length;E++)v=_[E],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}var ZAe=s&&"documentMode"in document&&11>=document.documentMode,Ib=null,JI=null,Jw=null,ZI=!1;function NH(v,_,E){var R=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;ZI||Ib==null||Ib!==de(R)||(R=Ib,"selectionStart"in R&&QI(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),Jw&&Qw(Jw,R)||(Jw=R,R=YP(JI,"onSelect"),0<R.length&&(_=new qI("onSelect","select",null,_,E),v.push({event:_,listeners:R}),_.target=Ib)))}function HP(v,_){var E={};return E[v.toLowerCase()]=_.toLowerCase(),E["Webkit"+v]="webkit"+_,E["Moz"+v]="moz"+_,E}var jb={animationend:HP("Animation","AnimationEnd"),animationiteration:HP("Animation","AnimationIteration"),animationstart:HP("Animation","AnimationStart"),transitionend:HP("Transition","TransitionEnd")},ej={},UH={};s&&(UH=document.createElement("div").style,"AnimationEvent"in window||(delete jb.animationend.animation,delete jb.animationiteration.animation,delete jb.animationstart.animation),"TransitionEvent"in window||delete jb.transitionend.transition);function $P(v){if(ej[v])return ej[v];if(!jb[v])return v;var _=jb[v],E;for(E in _)if(_.hasOwnProperty(E)&&E in UH)return ej[v]=_[E];return v}var VH=$P("animationend"),kH=$P("animationiteration"),qH=$P("animationstart"),WH=$P("transitionend"),GH=new Map,HH="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sg(v,_){GH.set(v,_),a(_,[v])}for(var tj=0;tj<HH.length;tj++){var rj=HH[tj],eOe=rj.toLowerCase(),tOe=rj[0].toUpperCase()+rj.slice(1);sg(eOe,"on"+tOe)}sg(VH,"onAnimationEnd"),sg(kH,"onAnimationIteration"),sg(qH,"onAnimationStart"),sg("dblclick","onDoubleClick"),sg("focusin","onFocus"),sg("focusout","onBlur"),sg(WH,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rOe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zw));function $H(v,_,E){var R=v.type||"unknown-event";v.currentTarget=E,Tt(R,_,void 0,v),v.currentTarget=null}function XH(v,_){_=(_&4)!==0;for(var E=0;E<v.length;E++){var R=v[E],z=R.event;R=R.listeners;e:{var W=void 0;if(_)for(var fe=R.length-1;0<=fe;fe--){var je=R[fe],Ne=je.instance,rt=je.currentTarget;if(je=je.listener,Ne!==W&&z.isPropagationStopped())break e;$H(z,je,rt),W=Ne}else for(fe=0;fe<R.length;fe++){if(je=R[fe],Ne=je.instance,rt=je.currentTarget,je=je.listener,Ne!==W&&z.isPropagationStopped())break e;$H(z,je,rt),W=Ne}}}if(We)throw v=tt,We=!1,tt=null,v}function Ai(v,_){var E=_[cj];E===void 0&&(E=_[cj]=new Set);var R=v+"__bubble";E.has(R)||(YH(_,v,2,!1),E.add(R))}function ij(v,_,E){var R=0;_&&(R|=4),YH(E,v,R,_)}var XP="_reactListening"+Math.random().toString(36).slice(2);function ex(v){if(!v[XP]){v[XP]=!0,i.forEach(function(E){E!=="selectionchange"&&(rOe.has(E)||ij(E,!1,v),ij(E,!0,v))});var _=v.nodeType===9?v:v.ownerDocument;_===null||_[XP]||(_[XP]=!0,ij("selectionchange",!1,_))}}function YH(v,_,E,R){switch(yH(_)){case 1:var z=gAe;break;case 4:z=vAe;break;default:z=UI}E=z.bind(null,_,E,v),z=void 0,!pt||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(z=!0),R?z!==void 0?v.addEventListener(_,E,{capture:!0,passive:z}):v.addEventListener(_,E,!0):z!==void 0?v.addEventListener(_,E,{passive:z}):v.addEventListener(_,E,!1)}function nj(v,_,E,R,z){var W=R;if((_&1)===0&&(_&2)===0&&R!==null)e:for(;;){if(R===null)return;var fe=R.tag;if(fe===3||fe===4){var je=R.stateNode.containerInfo;if(je===z||je.nodeType===8&&je.parentNode===z)break;if(fe===4)for(fe=R.return;fe!==null;){var Ne=fe.tag;if((Ne===3||Ne===4)&&(Ne=fe.stateNode.containerInfo,Ne===z||Ne.nodeType===8&&Ne.parentNode===z))return;fe=fe.return}for(;je!==null;){if(fe=kv(je),fe===null)return;if(Ne=fe.tag,Ne===5||Ne===6){R=W=fe;continue e}je=je.parentNode}}R=R.return}He(function(){var rt=W,yt=Be(E),xt=[];e:{var gt=GH.get(v);if(gt!==void 0){var Bt=qI,Gt=v;switch(v){case"keypress":if(kP(E)===0)break e;case"keydown":case"keyup":Bt=DAe;break;case"focusin":Gt="focus",Bt=HI;break;case"focusout":Gt="blur",Bt=HI;break;case"beforeblur":case"afterblur":Bt=HI;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Bt=wH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Bt=_Ae;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Bt=zAe;break;case VH:case kH:case qH:Bt=SAe;break;case WH:Bt=LAe;break;case"scroll":Bt=yAe;break;case"wheel":Bt=NAe;break;case"copy":case"cut":case"paste":Bt=EAe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Bt=SH}var Xt=(_&4)!==0,rn=!Xt&&v==="scroll",Ke=Xt?gt!==null?gt+"Capture":null:gt;Xt=[];for(var ke=rt,Je;ke!==null;){Je=ke;var Ct=Je.stateNode;if(Je.tag===5&&Ct!==null&&(Je=Ct,Ke!==null&&(Ct=Xe(ke,Ke),Ct!=null&&Xt.push(tx(ke,Ct,Je)))),rn)break;ke=ke.return}0<Xt.length&&(gt=new Bt(gt,Gt,null,E,yt),xt.push({event:gt,listeners:Xt}))}}if((_&7)===0){e:{if(gt=v==="mouseover"||v==="pointerover",Bt=v==="mouseout"||v==="pointerout",gt&&E!==ht&&(Gt=E.relatedTarget||E.fromElement)&&(kv(Gt)||Gt[Wp]))break e;if((Bt||gt)&&(gt=yt.window===yt?yt:(gt=yt.ownerDocument)?gt.defaultView||gt.parentWindow:window,Bt?(Gt=E.relatedTarget||E.toElement,Bt=rt,Gt=Gt?kv(Gt):null,Gt!==null&&(rn=Ft(Gt),Gt!==rn||Gt.tag!==5&&Gt.tag!==6)&&(Gt=null)):(Bt=null,Gt=rt),Bt!==Gt)){if(Xt=wH,Ct="onMouseLeave",Ke="onMouseEnter",ke="mouse",(v==="pointerout"||v==="pointerover")&&(Xt=SH,Ct="onPointerLeave",Ke="onPointerEnter",ke="pointer"),rn=Bt==null?gt:Lb(Bt),Je=Gt==null?gt:Lb(Gt),gt=new Xt(Ct,ke+"leave",Bt,E,yt),gt.target=rn,gt.relatedTarget=Je,Ct=null,kv(yt)===rt&&(Xt=new Xt(Ke,ke+"enter",Gt,E,yt),Xt.target=Je,Xt.relatedTarget=rn,Ct=Xt),rn=Ct,Bt&&Gt)t:{for(Xt=Bt,Ke=Gt,ke=0,Je=Xt;Je;Je=zb(Je))ke++;for(Je=0,Ct=Ke;Ct;Ct=zb(Ct))Je++;for(;0<ke-Je;)Xt=zb(Xt),ke--;for(;0<Je-ke;)Ke=zb(Ke),Je--;for(;ke--;){if(Xt===Ke||Ke!==null&&Xt===Ke.alternate)break t;Xt=zb(Xt),Ke=zb(Ke)}Xt=null}else Xt=null;Bt!==null&&KH(xt,gt,Bt,Xt,!1),Gt!==null&&rn!==null&&KH(xt,rn,Gt,Xt,!0)}}e:{if(gt=rt?Lb(rt):window,Bt=gt.nodeName&&gt.nodeName.toLowerCase(),Bt==="select"||Bt==="input"&&gt.type==="file")var Yt=HAe;else if(AH(gt))if(RH)Yt=KAe;else{Yt=XAe;var or=$Ae}else(Bt=gt.nodeName)&&Bt.toLowerCase()==="input"&&(gt.type==="checkbox"||gt.type==="radio")&&(Yt=YAe);if(Yt&&(Yt=Yt(v,rt))){OH(xt,Yt,E,yt);break e}or&&or(v,gt,rt),v==="focusout"&&(or=gt._wrapperState)&&or.controlled&&gt.type==="number"&&he(gt,"number",gt.value)}switch(or=rt?Lb(rt):window,v){case"focusin":(AH(or)||or.contentEditable==="true")&&(Ib=or,JI=rt,Jw=null);break;case"focusout":Jw=JI=Ib=null;break;case"mousedown":ZI=!0;break;case"contextmenu":case"mouseup":case"dragend":ZI=!1,NH(xt,E,yt);break;case"selectionchange":if(ZAe)break;case"keydown":case"keyup":NH(xt,E,yt)}var sr;if(XI)e:{switch(v){case"compositionstart":var wr="onCompositionStart";break e;case"compositionend":wr="onCompositionEnd";break e;case"compositionupdate":wr="onCompositionUpdate";break e}wr=void 0}else Db?PH(v,E)&&(wr="onCompositionEnd"):v==="keydown"&&E.keyCode===229&&(wr="onCompositionStart");wr&&(CH&&E.locale!=="ko"&&(Db||wr!=="onCompositionStart"?wr==="onCompositionEnd"&&Db&&(sr=bH()):(og=yt,kI="value"in og?og.value:og.textContent,Db=!0)),or=YP(rt,wr),0<or.length&&(wr=new xH(wr,v,null,E,yt),xt.push({event:wr,listeners:or}),sr?wr.data=sr:(sr=TH(E),sr!==null&&(wr.data=sr)))),(sr=VAe?kAe(v,E):qAe(v,E))&&(rt=YP(rt,"onBeforeInput"),0<rt.length&&(yt=new xH("onBeforeInput","beforeinput",null,E,yt),xt.push({event:yt,listeners:rt}),yt.data=sr))}XH(xt,_)})}function tx(v,_,E){return{instance:v,listener:_,currentTarget:E}}function YP(v,_){for(var E=_+"Capture",R=[];v!==null;){var z=v,W=z.stateNode;z.tag===5&&W!==null&&(z=W,W=Xe(v,E),W!=null&&R.unshift(tx(v,W,z)),W=Xe(v,_),W!=null&&R.push(tx(v,W,z))),v=v.return}return R}function zb(v){if(v===null)return null;do v=v.return;while(v&&v.tag!==5);return v||null}function KH(v,_,E,R,z){for(var W=_._reactName,fe=[];E!==null&&E!==R;){var je=E,Ne=je.alternate,rt=je.stateNode;if(Ne!==null&&Ne===R)break;je.tag===5&&rt!==null&&(je=rt,z?(Ne=Xe(E,W),Ne!=null&&fe.unshift(tx(E,Ne,je))):z||(Ne=Xe(E,W),Ne!=null&&fe.push(tx(E,Ne,je)))),E=E.return}fe.length!==0&&v.push({event:_,listeners:fe})}var iOe=/\r\n?/g,nOe=/\u0000|\uFFFD/g;function QH(v){return(typeof v=="string"?v:""+v).replace(iOe,`
`).replace(nOe,"")}function KP(v,_,E){if(_=QH(_),QH(v)!==_&&E)throw Error(r(425))}function QP(){}var aj=null,oj=null;function sj(v,_){return v==="textarea"||v==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var lj=typeof setTimeout=="function"?setTimeout:void 0,aOe=typeof clearTimeout=="function"?clearTimeout:void 0,JH=typeof Promise=="function"?Promise:void 0,oOe=typeof queueMicrotask=="function"?queueMicrotask:typeof JH<"u"?function(v){return JH.resolve(null).then(v).catch(sOe)}:lj;function sOe(v){setTimeout(function(){throw v})}function uj(v,_){var E=_,R=0;do{var z=E.nextSibling;if(v.removeChild(E),z&&z.nodeType===8)if(E=z.data,E==="/$"){if(R===0){v.removeChild(z),Gw(_);return}R--}else E!=="$"&&E!=="$?"&&E!=="$!"||R++;E=z}while(E);Gw(_)}function lg(v){for(;v!=null;v=v.nextSibling){var _=v.nodeType;if(_===1||_===3)break;if(_===8){if(_=v.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return v}function ZH(v){v=v.previousSibling;for(var _=0;v;){if(v.nodeType===8){var E=v.data;if(E==="$"||E==="$!"||E==="$?"){if(_===0)return v;_--}else E==="/$"&&_++}v=v.previousSibling}return null}var Bb=Math.random().toString(36).slice(2),Lf="__reactFiber$"+Bb,rx="__reactProps$"+Bb,Wp="__reactContainer$"+Bb,cj="__reactEvents$"+Bb,lOe="__reactListeners$"+Bb,uOe="__reactHandles$"+Bb;function kv(v){var _=v[Lf];if(_)return _;for(var E=v.parentNode;E;){if(_=E[Wp]||E[Lf]){if(E=_.alternate,_.child!==null||E!==null&&E.child!==null)for(v=ZH(v);v!==null;){if(E=v[Lf])return E;v=ZH(v)}return _}v=E,E=v.parentNode}return null}function ix(v){return v=v[Lf]||v[Wp],!v||v.tag!==5&&v.tag!==6&&v.tag!==13&&v.tag!==3?null:v}function Lb(v){if(v.tag===5||v.tag===6)return v.stateNode;throw Error(r(33))}function JP(v){return v[rx]||null}var dj=[],Fb=-1;function ug(v){return{current:v}}function Oi(v){0>Fb||(v.current=dj[Fb],dj[Fb]=null,Fb--)}function Ei(v,_){Fb++,dj[Fb]=v.current,v.current=_}var cg={},Ca=ug(cg),mo=ug(!1),qv=cg;function Nb(v,_){var E=v.type.contextTypes;if(!E)return cg;var R=v.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===_)return R.__reactInternalMemoizedMaskedChildContext;var z={},W;for(W in E)z[W]=_[W];return R&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=_,v.__reactInternalMemoizedMaskedChildContext=z),z}function go(v){return v=v.childContextTypes,v!=null}function ZP(){Oi(mo),Oi(Ca)}function e9(v,_,E){if(Ca.current!==cg)throw Error(r(168));Ei(Ca,_),Ei(mo,E)}function t9(v,_,E){var R=v.stateNode;if(_=_.childContextTypes,typeof R.getChildContext!="function")return E;R=R.getChildContext();for(var z in R)if(!(z in _))throw Error(r(108,le(v)||"Unknown",z));return F({},E,R)}function eT(v){return v=(v=v.stateNode)&&v.__reactInternalMemoizedMergedChildContext||cg,qv=Ca.current,Ei(Ca,v),Ei(mo,mo.current),!0}function r9(v,_,E){var R=v.stateNode;if(!R)throw Error(r(169));E?(v=t9(v,_,qv),R.__reactInternalMemoizedMergedChildContext=v,Oi(mo),Oi(Ca),Ei(Ca,v)):Oi(mo),Ei(mo,E)}var Gp=null,tT=!1,hj=!1;function i9(v){Gp===null?Gp=[v]:Gp.push(v)}function cOe(v){tT=!0,i9(v)}function dg(){if(!hj&&Gp!==null){hj=!0;var v=0,_=Gr;try{var E=Gp;for(Gr=1;v<E.length;v++){var R=E[v];do R=R(!0);while(R!==null)}Gp=null,tT=!1}catch(z){throw Gp!==null&&(Gp=Gp.slice(v+1)),Se(Kt,dg),z}finally{Gr=_,hj=!1}}return null}var Ub=[],Vb=0,rT=null,iT=0,gs=[],vs=0,Wv=null,Hp=1,$p="";function Gv(v,_){Ub[Vb++]=iT,Ub[Vb++]=rT,rT=v,iT=_}function n9(v,_,E){gs[vs++]=Hp,gs[vs++]=$p,gs[vs++]=Wv,Wv=v;var R=Hp;v=$p;var z=32-Oe(R)-1;R&=~(1<<z),E+=1;var W=32-Oe(_)+z;if(30<W){var fe=z-z%5;W=(R&(1<<fe)-1).toString(32),R>>=fe,z-=fe,Hp=1<<32-Oe(_)+z|E<<z|R,$p=W+v}else Hp=1<<W|E<<z|R,$p=v}function fj(v){v.return!==null&&(Gv(v,1),n9(v,1,0))}function pj(v){for(;v===rT;)rT=Ub[--Vb],Ub[Vb]=null,iT=Ub[--Vb],Ub[Vb]=null;for(;v===Wv;)Wv=gs[--vs],gs[vs]=null,$p=gs[--vs],gs[vs]=null,Hp=gs[--vs],gs[vs]=null}var Wo=null,Go=null,Ii=!1,sl=null;function a9(v,_){var E=ws(5,null,null,0);E.elementType="DELETED",E.stateNode=_,E.return=v,_=v.deletions,_===null?(v.deletions=[E],v.flags|=16):_.push(E)}function o9(v,_){switch(v.tag){case 5:var E=v.type;return _=_.nodeType!==1||E.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(v.stateNode=_,Wo=v,Go=lg(_.firstChild),!0):!1;case 6:return _=v.pendingProps===""||_.nodeType!==3?null:_,_!==null?(v.stateNode=_,Wo=v,Go=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(E=Wv!==null?{id:Hp,overflow:$p}:null,v.memoizedState={dehydrated:_,treeContext:E,retryLane:1073741824},E=ws(18,null,null,0),E.stateNode=_,E.return=v,v.child=E,Wo=v,Go=null,!0):!1;default:return!1}}function mj(v){return(v.mode&1)!==0&&(v.flags&128)===0}function gj(v){if(Ii){var _=Go;if(_){var E=_;if(!o9(v,_)){if(mj(v))throw Error(r(418));_=lg(E.nextSibling);var R=Wo;_&&o9(v,_)?a9(R,E):(v.flags=v.flags&-4097|2,Ii=!1,Wo=v)}}else{if(mj(v))throw Error(r(418));v.flags=v.flags&-4097|2,Ii=!1,Wo=v}}}function s9(v){for(v=v.return;v!==null&&v.tag!==5&&v.tag!==3&&v.tag!==13;)v=v.return;Wo=v}function nT(v){if(v!==Wo)return!1;if(!Ii)return s9(v),Ii=!0,!1;var _;if((_=v.tag!==3)&&!(_=v.tag!==5)&&(_=v.type,_=_!=="head"&&_!=="body"&&!sj(v.type,v.memoizedProps)),_&&(_=Go)){if(mj(v))throw l9(),Error(r(418));for(;_;)a9(v,_),_=lg(_.nextSibling)}if(s9(v),v.tag===13){if(v=v.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));e:{for(v=v.nextSibling,_=0;v;){if(v.nodeType===8){var E=v.data;if(E==="/$"){if(_===0){Go=lg(v.nextSibling);break e}_--}else E!=="$"&&E!=="$!"&&E!=="$?"||_++}v=v.nextSibling}Go=null}}else Go=Wo?lg(v.stateNode.nextSibling):null;return!0}function l9(){for(var v=Go;v;)v=lg(v.nextSibling)}function kb(){Go=Wo=null,Ii=!1}function vj(v){sl===null?sl=[v]:sl.push(v)}var dOe=x.ReactCurrentBatchConfig;function nx(v,_,E){if(v=E.ref,v!==null&&typeof v!="function"&&typeof v!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(r(309));var R=E.stateNode}if(!R)throw Error(r(147,v));var z=R,W=""+v;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===W?_.ref:(_=function(fe){var je=z.refs;fe===null?delete je[W]:je[W]=fe},_._stringRef=W,_)}if(typeof v!="string")throw Error(r(284));if(!E._owner)throw Error(r(290,v))}return v}function aT(v,_){throw v=Object.prototype.toString.call(_),Error(r(31,v==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":v))}function u9(v){var _=v._init;return _(v._payload)}function c9(v){function _(Ke,ke){if(v){var Je=Ke.deletions;Je===null?(Ke.deletions=[ke],Ke.flags|=16):Je.push(ke)}}function E(Ke,ke){if(!v)return null;for(;ke!==null;)_(Ke,ke),ke=ke.sibling;return null}function R(Ke,ke){for(Ke=new Map;ke!==null;)ke.key!==null?Ke.set(ke.key,ke):Ke.set(ke.index,ke),ke=ke.sibling;return Ke}function z(Ke,ke){return Ke=bg(Ke,ke),Ke.index=0,Ke.sibling=null,Ke}function W(Ke,ke,Je){return Ke.index=Je,v?(Je=Ke.alternate,Je!==null?(Je=Je.index,Je<ke?(Ke.flags|=2,ke):Je):(Ke.flags|=2,ke)):(Ke.flags|=1048576,ke)}function fe(Ke){return v&&Ke.alternate===null&&(Ke.flags|=2),Ke}function je(Ke,ke,Je,Ct){return ke===null||ke.tag!==6?(ke=l3(Je,Ke.mode,Ct),ke.return=Ke,ke):(ke=z(ke,Je),ke.return=Ke,ke)}function Ne(Ke,ke,Je,Ct){var Yt=Je.type;return Yt===T?yt(Ke,ke,Je.props.children,Ct,Je.key):ke!==null&&(ke.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===$&&u9(Yt)===ke.type)?(Ct=z(ke,Je.props),Ct.ref=nx(Ke,ke,Je),Ct.return=Ke,Ct):(Ct=AT(Je.type,Je.key,Je.props,null,Ke.mode,Ct),Ct.ref=nx(Ke,ke,Je),Ct.return=Ke,Ct)}function rt(Ke,ke,Je,Ct){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Je.containerInfo||ke.stateNode.implementation!==Je.implementation?(ke=u3(Je,Ke.mode,Ct),ke.return=Ke,ke):(ke=z(ke,Je.children||[]),ke.return=Ke,ke)}function yt(Ke,ke,Je,Ct,Yt){return ke===null||ke.tag!==7?(ke=Zv(Je,Ke.mode,Ct,Yt),ke.return=Ke,ke):(ke=z(ke,Je),ke.return=Ke,ke)}function xt(Ke,ke,Je){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=l3(""+ke,Ke.mode,Je),ke.return=Ke,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case S:return Je=AT(ke.type,ke.key,ke.props,null,Ke.mode,Je),Je.ref=nx(Ke,null,ke),Je.return=Ke,Je;case C:return ke=u3(ke,Ke.mode,Je),ke.return=Ke,ke;case $:var Ct=ke._init;return xt(Ke,Ct(ke._payload),Je)}if(Ae(ke)||Q(ke))return ke=Zv(ke,Ke.mode,Je,null),ke.return=Ke,ke;aT(Ke,ke)}return null}function gt(Ke,ke,Je,Ct){var Yt=ke!==null?ke.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number")return Yt!==null?null:je(Ke,ke,""+Je,Ct);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case S:return Je.key===Yt?Ne(Ke,ke,Je,Ct):null;case C:return Je.key===Yt?rt(Ke,ke,Je,Ct):null;case $:return Yt=Je._init,gt(Ke,ke,Yt(Je._payload),Ct)}if(Ae(Je)||Q(Je))return Yt!==null?null:yt(Ke,ke,Je,Ct,null);aT(Ke,Je)}return null}function Bt(Ke,ke,Je,Ct,Yt){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return Ke=Ke.get(Je)||null,je(ke,Ke,""+Ct,Yt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case S:return Ke=Ke.get(Ct.key===null?Je:Ct.key)||null,Ne(ke,Ke,Ct,Yt);case C:return Ke=Ke.get(Ct.key===null?Je:Ct.key)||null,rt(ke,Ke,Ct,Yt);case $:var or=Ct._init;return Bt(Ke,ke,Je,or(Ct._payload),Yt)}if(Ae(Ct)||Q(Ct))return Ke=Ke.get(Je)||null,yt(ke,Ke,Ct,Yt,null);aT(ke,Ct)}return null}function Gt(Ke,ke,Je,Ct){for(var Yt=null,or=null,sr=ke,wr=ke=0,Wn=null;sr!==null&&wr<Je.length;wr++){sr.index>wr?(Wn=sr,sr=null):Wn=sr.sibling;var Zr=gt(Ke,sr,Je[wr],Ct);if(Zr===null){sr===null&&(sr=Wn);break}v&&sr&&Zr.alternate===null&&_(Ke,sr),ke=W(Zr,ke,wr),or===null?Yt=Zr:or.sibling=Zr,or=Zr,sr=Wn}if(wr===Je.length)return E(Ke,sr),Ii&&Gv(Ke,wr),Yt;if(sr===null){for(;wr<Je.length;wr++)sr=xt(Ke,Je[wr],Ct),sr!==null&&(ke=W(sr,ke,wr),or===null?Yt=sr:or.sibling=sr,or=sr);return Ii&&Gv(Ke,wr),Yt}for(sr=R(Ke,sr);wr<Je.length;wr++)Wn=Bt(sr,Ke,wr,Je[wr],Ct),Wn!==null&&(v&&Wn.alternate!==null&&sr.delete(Wn.key===null?wr:Wn.key),ke=W(Wn,ke,wr),or===null?Yt=Wn:or.sibling=Wn,or=Wn);return v&&sr.forEach(function(_g){return _(Ke,_g)}),Ii&&Gv(Ke,wr),Yt}function Xt(Ke,ke,Je,Ct){var Yt=Q(Je);if(typeof Yt!="function")throw Error(r(150));if(Je=Yt.call(Je),Je==null)throw Error(r(151));for(var or=Yt=null,sr=ke,wr=ke=0,Wn=null,Zr=Je.next();sr!==null&&!Zr.done;wr++,Zr=Je.next()){sr.index>wr?(Wn=sr,sr=null):Wn=sr.sibling;var _g=gt(Ke,sr,Zr.value,Ct);if(_g===null){sr===null&&(sr=Wn);break}v&&sr&&_g.alternate===null&&_(Ke,sr),ke=W(_g,ke,wr),or===null?Yt=_g:or.sibling=_g,or=_g,sr=Wn}if(Zr.done)return E(Ke,sr),Ii&&Gv(Ke,wr),Yt;if(sr===null){for(;!Zr.done;wr++,Zr=Je.next())Zr=xt(Ke,Zr.value,Ct),Zr!==null&&(ke=W(Zr,ke,wr),or===null?Yt=Zr:or.sibling=Zr,or=Zr);return Ii&&Gv(Ke,wr),Yt}for(sr=R(Ke,sr);!Zr.done;wr++,Zr=Je.next())Zr=Bt(sr,Ke,wr,Zr.value,Ct),Zr!==null&&(v&&Zr.alternate!==null&&sr.delete(Zr.key===null?wr:Zr.key),ke=W(Zr,ke,wr),or===null?Yt=Zr:or.sibling=Zr,or=Zr);return v&&sr.forEach(function(WOe){return _(Ke,WOe)}),Ii&&Gv(Ke,wr),Yt}function rn(Ke,ke,Je,Ct){if(typeof Je=="object"&&Je!==null&&Je.type===T&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case S:e:{for(var Yt=Je.key,or=ke;or!==null;){if(or.key===Yt){if(Yt=Je.type,Yt===T){if(or.tag===7){E(Ke,or.sibling),ke=z(or,Je.props.children),ke.return=Ke,Ke=ke;break e}}else if(or.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===$&&u9(Yt)===or.type){E(Ke,or.sibling),ke=z(or,Je.props),ke.ref=nx(Ke,or,Je),ke.return=Ke,Ke=ke;break e}E(Ke,or);break}else _(Ke,or);or=or.sibling}Je.type===T?(ke=Zv(Je.props.children,Ke.mode,Ct,Je.key),ke.return=Ke,Ke=ke):(Ct=AT(Je.type,Je.key,Je.props,null,Ke.mode,Ct),Ct.ref=nx(Ke,ke,Je),Ct.return=Ke,Ke=Ct)}return fe(Ke);case C:e:{for(or=Je.key;ke!==null;){if(ke.key===or)if(ke.tag===4&&ke.stateNode.containerInfo===Je.containerInfo&&ke.stateNode.implementation===Je.implementation){E(Ke,ke.sibling),ke=z(ke,Je.children||[]),ke.return=Ke,Ke=ke;break e}else{E(Ke,ke);break}else _(Ke,ke);ke=ke.sibling}ke=u3(Je,Ke.mode,Ct),ke.return=Ke,Ke=ke}return fe(Ke);case $:return or=Je._init,rn(Ke,ke,or(Je._payload),Ct)}if(Ae(Je))return Gt(Ke,ke,Je,Ct);if(Q(Je))return Xt(Ke,ke,Je,Ct);aT(Ke,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"?(Je=""+Je,ke!==null&&ke.tag===6?(E(Ke,ke.sibling),ke=z(ke,Je),ke.return=Ke,Ke=ke):(E(Ke,ke),ke=l3(Je,Ke.mode,Ct),ke.return=Ke,Ke=ke),fe(Ke)):E(Ke,ke)}return rn}var qb=c9(!0),d9=c9(!1),oT=ug(null),sT=null,Wb=null,yj=null;function bj(){yj=Wb=sT=null}function _j(v){var _=oT.current;Oi(oT),v._currentValue=_}function wj(v,_,E){for(;v!==null;){var R=v.alternate;if((v.childLanes&_)!==_?(v.childLanes|=_,R!==null&&(R.childLanes|=_)):R!==null&&(R.childLanes&_)!==_&&(R.childLanes|=_),v===E)break;v=v.return}}function Gb(v,_){sT=v,yj=Wb=null,v=v.dependencies,v!==null&&v.firstContext!==null&&((v.lanes&_)!==0&&(vo=!0),v.firstContext=null)}function ys(v){var _=v._currentValue;if(yj!==v)if(v={context:v,memoizedValue:_,next:null},Wb===null){if(sT===null)throw Error(r(308));Wb=v,sT.dependencies={lanes:0,firstContext:v}}else Wb=Wb.next=v;return _}var Hv=null;function xj(v){Hv===null?Hv=[v]:Hv.push(v)}function h9(v,_,E,R){var z=_.interleaved;return z===null?(E.next=E,xj(_)):(E.next=z.next,z.next=E),_.interleaved=E,Xp(v,R)}function Xp(v,_){v.lanes|=_;var E=v.alternate;for(E!==null&&(E.lanes|=_),E=v,v=v.return;v!==null;)v.childLanes|=_,E=v.alternate,E!==null&&(E.childLanes|=_),E=v,v=v.return;return E.tag===3?E.stateNode:null}var hg=!1;function Sj(v){v.updateQueue={baseState:v.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f9(v,_){v=v.updateQueue,_.updateQueue===v&&(_.updateQueue={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects})}function Yp(v,_){return{eventTime:v,lane:_,tag:0,payload:null,callback:null,next:null}}function fg(v,_,E){var R=v.updateQueue;if(R===null)return null;if(R=R.shared,(Jr&2)!==0){var z=R.pending;return z===null?_.next=_:(_.next=z.next,z.next=_),R.pending=_,Xp(v,E)}return z=R.interleaved,z===null?(_.next=_,xj(R)):(_.next=z.next,z.next=_),R.interleaved=_,Xp(v,E)}function lT(v,_,E){if(_=_.updateQueue,_!==null&&(_=_.shared,(E&4194240)!==0)){var R=_.lanes;R&=v.pendingLanes,E|=R,_.lanes=E,ps(v,E)}}function p9(v,_){var E=v.updateQueue,R=v.alternate;if(R!==null&&(R=R.updateQueue,E===R)){var z=null,W=null;if(E=E.firstBaseUpdate,E!==null){do{var fe={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};W===null?z=W=fe:W=W.next=fe,E=E.next}while(E!==null);W===null?z=W=_:W=W.next=_}else z=W=_;E={baseState:R.baseState,firstBaseUpdate:z,lastBaseUpdate:W,shared:R.shared,effects:R.effects},v.updateQueue=E;return}v=E.lastBaseUpdate,v===null?E.firstBaseUpdate=_:v.next=_,E.lastBaseUpdate=_}function uT(v,_,E,R){var z=v.updateQueue;hg=!1;var W=z.firstBaseUpdate,fe=z.lastBaseUpdate,je=z.shared.pending;if(je!==null){z.shared.pending=null;var Ne=je,rt=Ne.next;Ne.next=null,fe===null?W=rt:fe.next=rt,fe=Ne;var yt=v.alternate;yt!==null&&(yt=yt.updateQueue,je=yt.lastBaseUpdate,je!==fe&&(je===null?yt.firstBaseUpdate=rt:je.next=rt,yt.lastBaseUpdate=Ne))}if(W!==null){var xt=z.baseState;fe=0,yt=rt=Ne=null,je=W;do{var gt=je.lane,Bt=je.eventTime;if((R&gt)===gt){yt!==null&&(yt=yt.next={eventTime:Bt,lane:0,tag:je.tag,payload:je.payload,callback:je.callback,next:null});e:{var Gt=v,Xt=je;switch(gt=_,Bt=E,Xt.tag){case 1:if(Gt=Xt.payload,typeof Gt=="function"){xt=Gt.call(Bt,xt,gt);break e}xt=Gt;break e;case 3:Gt.flags=Gt.flags&-65537|128;case 0:if(Gt=Xt.payload,gt=typeof Gt=="function"?Gt.call(Bt,xt,gt):Gt,gt==null)break e;xt=F({},xt,gt);break e;case 2:hg=!0}}je.callback!==null&&je.lane!==0&&(v.flags|=64,gt=z.effects,gt===null?z.effects=[je]:gt.push(je))}else Bt={eventTime:Bt,lane:gt,tag:je.tag,payload:je.payload,callback:je.callback,next:null},yt===null?(rt=yt=Bt,Ne=xt):yt=yt.next=Bt,fe|=gt;if(je=je.next,je===null){if(je=z.shared.pending,je===null)break;gt=je,je=gt.next,gt.next=null,z.lastBaseUpdate=gt,z.shared.pending=null}}while(!0);if(yt===null&&(Ne=xt),z.baseState=Ne,z.firstBaseUpdate=rt,z.lastBaseUpdate=yt,_=z.shared.interleaved,_!==null){z=_;do fe|=z.lane,z=z.next;while(z!==_)}else W===null&&(z.shared.lanes=0);Yv|=fe,v.lanes=fe,v.memoizedState=xt}}function m9(v,_,E){if(v=_.effects,_.effects=null,v!==null)for(_=0;_<v.length;_++){var R=v[_],z=R.callback;if(z!==null){if(R.callback=null,R=E,typeof z!="function")throw Error(r(191,z));z.call(R)}}}var ax={},Ff=ug(ax),ox=ug(ax),sx=ug(ax);function $v(v){if(v===ax)throw Error(r(174));return v}function Cj(v,_){switch(Ei(sx,_),Ei(ox,v),Ei(Ff,ax),v=_.nodeType,v){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:K(null,"");break;default:v=v===8?_.parentNode:_,_=v.namespaceURI||null,v=v.tagName,_=K(_,v)}Oi(Ff),Ei(Ff,_)}function Hb(){Oi(Ff),Oi(ox),Oi(sx)}function g9(v){$v(sx.current);var _=$v(Ff.current),E=K(_,v.type);_!==E&&(Ei(ox,v),Ei(Ff,E))}function Ej(v){ox.current===v&&(Oi(Ff),Oi(ox))}var Bi=ug(0);function cT(v){for(var _=v;_!==null;){if(_.tag===13){var E=_.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||E.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===v)break;for(;_.sibling===null;){if(_.return===null||_.return===v)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Mj=[];function Pj(){for(var v=0;v<Mj.length;v++)Mj[v]._workInProgressVersionPrimary=null;Mj.length=0}var dT=x.ReactCurrentDispatcher,Tj=x.ReactCurrentBatchConfig,Xv=0,Li=null,Tn=null,kn=null,hT=!1,lx=!1,ux=0,hOe=0;function Ea(){throw Error(r(321))}function Aj(v,_){if(_===null)return!1;for(var E=0;E<_.length&&E<v.length;E++)if(!ol(v[E],_[E]))return!1;return!0}function Oj(v,_,E,R,z,W){if(Xv=W,Li=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,dT.current=v===null||v.memoizedState===null?gOe:vOe,v=E(R,z),lx){W=0;do{if(lx=!1,ux=0,25<=W)throw Error(r(301));W+=1,kn=Tn=null,_.updateQueue=null,dT.current=yOe,v=E(R,z)}while(lx)}if(dT.current=mT,_=Tn!==null&&Tn.next!==null,Xv=0,kn=Tn=Li=null,hT=!1,_)throw Error(r(300));return v}function Rj(){var v=ux!==0;return ux=0,v}function Nf(){var v={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?Li.memoizedState=kn=v:kn=kn.next=v,kn}function bs(){if(Tn===null){var v=Li.alternate;v=v!==null?v.memoizedState:null}else v=Tn.next;var _=kn===null?Li.memoizedState:kn.next;if(_!==null)kn=_,Tn=v;else{if(v===null)throw Error(r(310));Tn=v,v={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},kn===null?Li.memoizedState=kn=v:kn=kn.next=v}return kn}function cx(v,_){return typeof _=="function"?_(v):_}function Dj(v){var _=bs(),E=_.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=v;var R=Tn,z=R.baseQueue,W=E.pending;if(W!==null){if(z!==null){var fe=z.next;z.next=W.next,W.next=fe}R.baseQueue=z=W,E.pending=null}if(z!==null){W=z.next,R=R.baseState;var je=fe=null,Ne=null,rt=W;do{var yt=rt.lane;if((Xv&yt)===yt)Ne!==null&&(Ne=Ne.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),R=rt.hasEagerState?rt.eagerState:v(R,rt.action);else{var xt={lane:yt,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};Ne===null?(je=Ne=xt,fe=R):Ne=Ne.next=xt,Li.lanes|=yt,Yv|=yt}rt=rt.next}while(rt!==null&&rt!==W);Ne===null?fe=R:Ne.next=je,ol(R,_.memoizedState)||(vo=!0),_.memoizedState=R,_.baseState=fe,_.baseQueue=Ne,E.lastRenderedState=R}if(v=E.interleaved,v!==null){z=v;do W=z.lane,Li.lanes|=W,Yv|=W,z=z.next;while(z!==v)}else z===null&&(E.lanes=0);return[_.memoizedState,E.dispatch]}function Ij(v){var _=bs(),E=_.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=v;var R=E.dispatch,z=E.pending,W=_.memoizedState;if(z!==null){E.pending=null;var fe=z=z.next;do W=v(W,fe.action),fe=fe.next;while(fe!==z);ol(W,_.memoizedState)||(vo=!0),_.memoizedState=W,_.baseQueue===null&&(_.baseState=W),E.lastRenderedState=W}return[W,R]}function v9(){}function y9(v,_){var E=Li,R=bs(),z=_(),W=!ol(R.memoizedState,z);if(W&&(R.memoizedState=z,vo=!0),R=R.queue,jj(w9.bind(null,E,R,v),[v]),R.getSnapshot!==_||W||kn!==null&&kn.memoizedState.tag&1){if(E.flags|=2048,dx(9,_9.bind(null,E,R,z,_),void 0,null),qn===null)throw Error(r(349));(Xv&30)!==0||b9(E,_,z)}return z}function b9(v,_,E){v.flags|=16384,v={getSnapshot:_,value:E},_=Li.updateQueue,_===null?(_={lastEffect:null,stores:null},Li.updateQueue=_,_.stores=[v]):(E=_.stores,E===null?_.stores=[v]:E.push(v))}function _9(v,_,E,R){_.value=E,_.getSnapshot=R,x9(_)&&S9(v)}function w9(v,_,E){return E(function(){x9(_)&&S9(v)})}function x9(v){var _=v.getSnapshot;v=v.value;try{var E=_();return!ol(v,E)}catch{return!0}}function S9(v){var _=Xp(v,1);_!==null&&dl(_,v,1,-1)}function C9(v){var _=Nf();return typeof v=="function"&&(v=v()),_.memoizedState=_.baseState=v,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cx,lastRenderedState:v},_.queue=v,v=v.dispatch=mOe.bind(null,Li,v),[_.memoizedState,v]}function dx(v,_,E,R){return v={tag:v,create:_,destroy:E,deps:R,next:null},_=Li.updateQueue,_===null?(_={lastEffect:null,stores:null},Li.updateQueue=_,_.lastEffect=v.next=v):(E=_.lastEffect,E===null?_.lastEffect=v.next=v:(R=E.next,E.next=v,v.next=R,_.lastEffect=v)),v}function E9(){return bs().memoizedState}function fT(v,_,E,R){var z=Nf();Li.flags|=v,z.memoizedState=dx(1|_,E,void 0,R===void 0?null:R)}function pT(v,_,E,R){var z=bs();R=R===void 0?null:R;var W=void 0;if(Tn!==null){var fe=Tn.memoizedState;if(W=fe.destroy,R!==null&&Aj(R,fe.deps)){z.memoizedState=dx(_,E,W,R);return}}Li.flags|=v,z.memoizedState=dx(1|_,E,W,R)}function M9(v,_){return fT(8390656,8,v,_)}function jj(v,_){return pT(2048,8,v,_)}function P9(v,_){return pT(4,2,v,_)}function T9(v,_){return pT(4,4,v,_)}function A9(v,_){if(typeof _=="function")return v=v(),_(v),function(){_(null)};if(_!=null)return v=v(),_.current=v,function(){_.current=null}}function O9(v,_,E){return E=E!=null?E.concat([v]):null,pT(4,4,A9.bind(null,_,v),E)}function zj(){}function R9(v,_){var E=bs();_=_===void 0?null:_;var R=E.memoizedState;return R!==null&&_!==null&&Aj(_,R[1])?R[0]:(E.memoizedState=[v,_],v)}function D9(v,_){var E=bs();_=_===void 0?null:_;var R=E.memoizedState;return R!==null&&_!==null&&Aj(_,R[1])?R[0]:(v=v(),E.memoizedState=[v,_],v)}function I9(v,_,E){return(Xv&21)===0?(v.baseState&&(v.baseState=!1,vo=!0),v.memoizedState=E):(ol(E,_)||(E=Bf(),Li.lanes|=E,Yv|=E,v.baseState=!0),_)}function fOe(v,_){var E=Gr;Gr=E!==0&&4>E?E:4,v(!0);var R=Tj.transition;Tj.transition={};try{v(!1),_()}finally{Gr=E,Tj.transition=R}}function j9(){return bs().memoizedState}function pOe(v,_,E){var R=vg(v);if(E={lane:R,action:E,hasEagerState:!1,eagerState:null,next:null},z9(v))B9(_,E);else if(E=h9(v,_,E,R),E!==null){var z=Wa();dl(E,v,R,z),L9(E,_,R)}}function mOe(v,_,E){var R=vg(v),z={lane:R,action:E,hasEagerState:!1,eagerState:null,next:null};if(z9(v))B9(_,z);else{var W=v.alternate;if(v.lanes===0&&(W===null||W.lanes===0)&&(W=_.lastRenderedReducer,W!==null))try{var fe=_.lastRenderedState,je=W(fe,E);if(z.hasEagerState=!0,z.eagerState=je,ol(je,fe)){var Ne=_.interleaved;Ne===null?(z.next=z,xj(_)):(z.next=Ne.next,Ne.next=z),_.interleaved=z;return}}catch{}finally{}E=h9(v,_,z,R),E!==null&&(z=Wa(),dl(E,v,R,z),L9(E,_,R))}}function z9(v){var _=v.alternate;return v===Li||_!==null&&_===Li}function B9(v,_){lx=hT=!0;var E=v.pending;E===null?_.next=_:(_.next=E.next,E.next=_),v.pending=_}function L9(v,_,E){if((E&4194240)!==0){var R=_.lanes;R&=v.pendingLanes,E|=R,_.lanes=E,ps(v,E)}}var mT={readContext:ys,useCallback:Ea,useContext:Ea,useEffect:Ea,useImperativeHandle:Ea,useInsertionEffect:Ea,useLayoutEffect:Ea,useMemo:Ea,useReducer:Ea,useRef:Ea,useState:Ea,useDebugValue:Ea,useDeferredValue:Ea,useTransition:Ea,useMutableSource:Ea,useSyncExternalStore:Ea,useId:Ea,unstable_isNewReconciler:!1},gOe={readContext:ys,useCallback:function(v,_){return Nf().memoizedState=[v,_===void 0?null:_],v},useContext:ys,useEffect:M9,useImperativeHandle:function(v,_,E){return E=E!=null?E.concat([v]):null,fT(4194308,4,A9.bind(null,_,v),E)},useLayoutEffect:function(v,_){return fT(4194308,4,v,_)},useInsertionEffect:function(v,_){return fT(4,2,v,_)},useMemo:function(v,_){var E=Nf();return _=_===void 0?null:_,v=v(),E.memoizedState=[v,_],v},useReducer:function(v,_,E){var R=Nf();return _=E!==void 0?E(_):_,R.memoizedState=R.baseState=_,v={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v,lastRenderedState:_},R.queue=v,v=v.dispatch=pOe.bind(null,Li,v),[R.memoizedState,v]},useRef:function(v){var _=Nf();return v={current:v},_.memoizedState=v},useState:C9,useDebugValue:zj,useDeferredValue:function(v){return Nf().memoizedState=v},useTransition:function(){var v=C9(!1),_=v[0];return v=fOe.bind(null,v[1]),Nf().memoizedState=v,[_,v]},useMutableSource:function(){},useSyncExternalStore:function(v,_,E){var R=Li,z=Nf();if(Ii){if(E===void 0)throw Error(r(407));E=E()}else{if(E=_(),qn===null)throw Error(r(349));(Xv&30)!==0||b9(R,_,E)}z.memoizedState=E;var W={value:E,getSnapshot:_};return z.queue=W,M9(w9.bind(null,R,W,v),[v]),R.flags|=2048,dx(9,_9.bind(null,R,W,E,_),void 0,null),E},useId:function(){var v=Nf(),_=qn.identifierPrefix;if(Ii){var E=$p,R=Hp;E=(R&~(1<<32-Oe(R)-1)).toString(32)+E,_=":"+_+"R"+E,E=ux++,0<E&&(_+="H"+E.toString(32)),_+=":"}else E=hOe++,_=":"+_+"r"+E.toString(32)+":";return v.memoizedState=_},unstable_isNewReconciler:!1},vOe={readContext:ys,useCallback:R9,useContext:ys,useEffect:jj,useImperativeHandle:O9,useInsertionEffect:P9,useLayoutEffect:T9,useMemo:D9,useReducer:Dj,useRef:E9,useState:function(){return Dj(cx)},useDebugValue:zj,useDeferredValue:function(v){var _=bs();return I9(_,Tn.memoizedState,v)},useTransition:function(){var v=Dj(cx)[0],_=bs().memoizedState;return[v,_]},useMutableSource:v9,useSyncExternalStore:y9,useId:j9,unstable_isNewReconciler:!1},yOe={readContext:ys,useCallback:R9,useContext:ys,useEffect:jj,useImperativeHandle:O9,useInsertionEffect:P9,useLayoutEffect:T9,useMemo:D9,useReducer:Ij,useRef:E9,useState:function(){return Ij(cx)},useDebugValue:zj,useDeferredValue:function(v){var _=bs();return Tn===null?_.memoizedState=v:I9(_,Tn.memoizedState,v)},useTransition:function(){var v=Ij(cx)[0],_=bs().memoizedState;return[v,_]},useMutableSource:v9,useSyncExternalStore:y9,useId:j9,unstable_isNewReconciler:!1};function ll(v,_){if(v&&v.defaultProps){_=F({},_),v=v.defaultProps;for(var E in v)_[E]===void 0&&(_[E]=v[E]);return _}return _}function Bj(v,_,E,R){_=v.memoizedState,E=E(R,_),E=E==null?_:F({},_,E),v.memoizedState=E,v.lanes===0&&(v.updateQueue.baseState=E)}var gT={isMounted:function(v){return(v=v._reactInternals)?Ft(v)===v:!1},enqueueSetState:function(v,_,E){v=v._reactInternals;var R=Wa(),z=vg(v),W=Yp(R,z);W.payload=_,E!=null&&(W.callback=E),_=fg(v,W,z),_!==null&&(dl(_,v,z,R),lT(_,v,z))},enqueueReplaceState:function(v,_,E){v=v._reactInternals;var R=Wa(),z=vg(v),W=Yp(R,z);W.tag=1,W.payload=_,E!=null&&(W.callback=E),_=fg(v,W,z),_!==null&&(dl(_,v,z,R),lT(_,v,z))},enqueueForceUpdate:function(v,_){v=v._reactInternals;var E=Wa(),R=vg(v),z=Yp(E,R);z.tag=2,_!=null&&(z.callback=_),_=fg(v,z,R),_!==null&&(dl(_,v,R,E),lT(_,v,R))}};function F9(v,_,E,R,z,W,fe){return v=v.stateNode,typeof v.shouldComponentUpdate=="function"?v.shouldComponentUpdate(R,W,fe):_.prototype&&_.prototype.isPureReactComponent?!Qw(E,R)||!Qw(z,W):!0}function N9(v,_,E){var R=!1,z=cg,W=_.contextType;return typeof W=="object"&&W!==null?W=ys(W):(z=go(_)?qv:Ca.current,R=_.contextTypes,W=(R=R!=null)?Nb(v,z):cg),_=new _(E,W),v.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=gT,v.stateNode=_,_._reactInternals=v,R&&(v=v.stateNode,v.__reactInternalMemoizedUnmaskedChildContext=z,v.__reactInternalMemoizedMaskedChildContext=W),_}function U9(v,_,E,R){v=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(E,R),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(E,R),_.state!==v&&gT.enqueueReplaceState(_,_.state,null)}function Lj(v,_,E,R){var z=v.stateNode;z.props=E,z.state=v.memoizedState,z.refs={},Sj(v);var W=_.contextType;typeof W=="object"&&W!==null?z.context=ys(W):(W=go(_)?qv:Ca.current,z.context=Nb(v,W)),z.state=v.memoizedState,W=_.getDerivedStateFromProps,typeof W=="function"&&(Bj(v,_,W,E),z.state=v.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(_=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),_!==z.state&&gT.enqueueReplaceState(z,z.state,null),uT(v,E,z,R),z.state=v.memoizedState),typeof z.componentDidMount=="function"&&(v.flags|=4194308)}function $b(v,_){try{var E="",R=_;do E+=H(R),R=R.return;while(R);var z=E}catch(W){z=`
Error generating stack: `+W.message+`
`+W.stack}return{value:v,source:_,stack:z,digest:null}}function Fj(v,_,E){return{value:v,source:null,stack:E??null,digest:_??null}}function Nj(v,_){try{console.error(_.value)}catch(E){setTimeout(function(){throw E})}}var bOe=typeof WeakMap=="function"?WeakMap:Map;function V9(v,_,E){E=Yp(-1,E),E.tag=3,E.payload={element:null};var R=_.value;return E.callback=function(){ST||(ST=!0,e3=R),Nj(v,_)},E}function k9(v,_,E){E=Yp(-1,E),E.tag=3;var R=v.type.getDerivedStateFromError;if(typeof R=="function"){var z=_.value;E.payload=function(){return R(z)},E.callback=function(){Nj(v,_)}}var W=v.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&(E.callback=function(){Nj(v,_),typeof R!="function"&&(mg===null?mg=new Set([this]):mg.add(this));var fe=_.stack;this.componentDidCatch(_.value,{componentStack:fe!==null?fe:""})}),E}function q9(v,_,E){var R=v.pingCache;if(R===null){R=v.pingCache=new bOe;var z=new Set;R.set(_,z)}else z=R.get(_),z===void 0&&(z=new Set,R.set(_,z));z.has(E)||(z.add(E),v=IOe.bind(null,v,_,E),_.then(v,v))}function W9(v){do{var _;if((_=v.tag===13)&&(_=v.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return v;v=v.return}while(v!==null);return null}function G9(v,_,E,R,z){return(v.mode&1)===0?(v===_?v.flags|=65536:(v.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(_=Yp(-1,1),_.tag=2,fg(E,_,1))),E.lanes|=1),v):(v.flags|=65536,v.lanes=z,v)}var _Oe=x.ReactCurrentOwner,vo=!1;function qa(v,_,E,R){_.child=v===null?d9(_,null,E,R):qb(_,v.child,E,R)}function H9(v,_,E,R,z){E=E.render;var W=_.ref;return Gb(_,z),R=Oj(v,_,E,R,W,z),E=Rj(),v!==null&&!vo?(_.updateQueue=v.updateQueue,_.flags&=-2053,v.lanes&=~z,Kp(v,_,z)):(Ii&&E&&fj(_),_.flags|=1,qa(v,_,R,z),_.child)}function $9(v,_,E,R,z){if(v===null){var W=E.type;return typeof W=="function"&&!s3(W)&&W.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(_.tag=15,_.type=W,X9(v,_,W,R,z)):(v=AT(E.type,null,R,_,_.mode,z),v.ref=_.ref,v.return=_,_.child=v)}if(W=v.child,(v.lanes&z)===0){var fe=W.memoizedProps;if(E=E.compare,E=E!==null?E:Qw,E(fe,R)&&v.ref===_.ref)return Kp(v,_,z)}return _.flags|=1,v=bg(W,R),v.ref=_.ref,v.return=_,_.child=v}function X9(v,_,E,R,z){if(v!==null){var W=v.memoizedProps;if(Qw(W,R)&&v.ref===_.ref)if(vo=!1,_.pendingProps=R=W,(v.lanes&z)!==0)(v.flags&131072)!==0&&(vo=!0);else return _.lanes=v.lanes,Kp(v,_,z)}return Uj(v,_,E,R,z)}function Y9(v,_,E){var R=_.pendingProps,z=R.children,W=v!==null?v.memoizedState:null;if(R.mode==="hidden")if((_.mode&1)===0)_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Yb,Ho),Ho|=E;else{if((E&1073741824)===0)return v=W!==null?W.baseLanes|E:E,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:v,cachePool:null,transitions:null},_.updateQueue=null,Ei(Yb,Ho),Ho|=v,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=W!==null?W.baseLanes:E,Ei(Yb,Ho),Ho|=R}else W!==null?(R=W.baseLanes|E,_.memoizedState=null):R=E,Ei(Yb,Ho),Ho|=R;return qa(v,_,z,E),_.child}function K9(v,_){var E=_.ref;(v===null&&E!==null||v!==null&&v.ref!==E)&&(_.flags|=512,_.flags|=2097152)}function Uj(v,_,E,R,z){var W=go(E)?qv:Ca.current;return W=Nb(_,W),Gb(_,z),E=Oj(v,_,E,R,W,z),R=Rj(),v!==null&&!vo?(_.updateQueue=v.updateQueue,_.flags&=-2053,v.lanes&=~z,Kp(v,_,z)):(Ii&&R&&fj(_),_.flags|=1,qa(v,_,E,z),_.child)}function Q9(v,_,E,R,z){if(go(E)){var W=!0;eT(_)}else W=!1;if(Gb(_,z),_.stateNode===null)yT(v,_),N9(_,E,R),Lj(_,E,R,z),R=!0;else if(v===null){var fe=_.stateNode,je=_.memoizedProps;fe.props=je;var Ne=fe.context,rt=E.contextType;typeof rt=="object"&&rt!==null?rt=ys(rt):(rt=go(E)?qv:Ca.current,rt=Nb(_,rt));var yt=E.getDerivedStateFromProps,xt=typeof yt=="function"||typeof fe.getSnapshotBeforeUpdate=="function";xt||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(je!==R||Ne!==rt)&&U9(_,fe,R,rt),hg=!1;var gt=_.memoizedState;fe.state=gt,uT(_,R,fe,z),Ne=_.memoizedState,je!==R||gt!==Ne||mo.current||hg?(typeof yt=="function"&&(Bj(_,E,yt,R),Ne=_.memoizedState),(je=hg||F9(_,E,je,R,gt,Ne,rt))?(xt||typeof fe.UNSAFE_componentWillMount!="function"&&typeof fe.componentWillMount!="function"||(typeof fe.componentWillMount=="function"&&fe.componentWillMount(),typeof fe.UNSAFE_componentWillMount=="function"&&fe.UNSAFE_componentWillMount()),typeof fe.componentDidMount=="function"&&(_.flags|=4194308)):(typeof fe.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=R,_.memoizedState=Ne),fe.props=R,fe.state=Ne,fe.context=rt,R=je):(typeof fe.componentDidMount=="function"&&(_.flags|=4194308),R=!1)}else{fe=_.stateNode,f9(v,_),je=_.memoizedProps,rt=_.type===_.elementType?je:ll(_.type,je),fe.props=rt,xt=_.pendingProps,gt=fe.context,Ne=E.contextType,typeof Ne=="object"&&Ne!==null?Ne=ys(Ne):(Ne=go(E)?qv:Ca.current,Ne=Nb(_,Ne));var Bt=E.getDerivedStateFromProps;(yt=typeof Bt=="function"||typeof fe.getSnapshotBeforeUpdate=="function")||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(je!==xt||gt!==Ne)&&U9(_,fe,R,Ne),hg=!1,gt=_.memoizedState,fe.state=gt,uT(_,R,fe,z);var Gt=_.memoizedState;je!==xt||gt!==Gt||mo.current||hg?(typeof Bt=="function"&&(Bj(_,E,Bt,R),Gt=_.memoizedState),(rt=hg||F9(_,E,rt,R,gt,Gt,Ne)||!1)?(yt||typeof fe.UNSAFE_componentWillUpdate!="function"&&typeof fe.componentWillUpdate!="function"||(typeof fe.componentWillUpdate=="function"&&fe.componentWillUpdate(R,Gt,Ne),typeof fe.UNSAFE_componentWillUpdate=="function"&&fe.UNSAFE_componentWillUpdate(R,Gt,Ne)),typeof fe.componentDidUpdate=="function"&&(_.flags|=4),typeof fe.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof fe.componentDidUpdate!="function"||je===v.memoizedProps&&gt===v.memoizedState||(_.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||je===v.memoizedProps&&gt===v.memoizedState||(_.flags|=1024),_.memoizedProps=R,_.memoizedState=Gt),fe.props=R,fe.state=Gt,fe.context=Ne,R=rt):(typeof fe.componentDidUpdate!="function"||je===v.memoizedProps&&gt===v.memoizedState||(_.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||je===v.memoizedProps&&gt===v.memoizedState||(_.flags|=1024),R=!1)}return Vj(v,_,E,R,W,z)}function Vj(v,_,E,R,z,W){K9(v,_);var fe=(_.flags&128)!==0;if(!R&&!fe)return z&&r9(_,E,!1),Kp(v,_,W);R=_.stateNode,_Oe.current=_;var je=fe&&typeof E.getDerivedStateFromError!="function"?null:R.render();return _.flags|=1,v!==null&&fe?(_.child=qb(_,v.child,null,W),_.child=qb(_,null,je,W)):qa(v,_,je,W),_.memoizedState=R.state,z&&r9(_,E,!0),_.child}function J9(v){var _=v.stateNode;_.pendingContext?e9(v,_.pendingContext,_.pendingContext!==_.context):_.context&&e9(v,_.context,!1),Cj(v,_.containerInfo)}function Z9(v,_,E,R,z){return kb(),vj(z),_.flags|=256,qa(v,_,E,R),_.child}var kj={dehydrated:null,treeContext:null,retryLane:0};function qj(v){return{baseLanes:v,cachePool:null,transitions:null}}function e$(v,_,E){var R=_.pendingProps,z=Bi.current,W=!1,fe=(_.flags&128)!==0,je;if((je=fe)||(je=v!==null&&v.memoizedState===null?!1:(z&2)!==0),je?(W=!0,_.flags&=-129):(v===null||v.memoizedState!==null)&&(z|=1),Ei(Bi,z&1),v===null)return gj(_),v=_.memoizedState,v!==null&&(v=v.dehydrated,v!==null)?((_.mode&1)===0?_.lanes=1:v.data==="$!"?_.lanes=8:_.lanes=1073741824,null):(fe=R.children,v=R.fallback,W?(R=_.mode,W=_.child,fe={mode:"hidden",children:fe},(R&1)===0&&W!==null?(W.childLanes=0,W.pendingProps=fe):W=OT(fe,R,0,null),v=Zv(v,R,E,null),W.return=_,v.return=_,W.sibling=v,_.child=W,_.child.memoizedState=qj(E),_.memoizedState=kj,v):Wj(_,fe));if(z=v.memoizedState,z!==null&&(je=z.dehydrated,je!==null))return wOe(v,_,fe,R,je,z,E);if(W){W=R.fallback,fe=_.mode,z=v.child,je=z.sibling;var Ne={mode:"hidden",children:R.children};return(fe&1)===0&&_.child!==z?(R=_.child,R.childLanes=0,R.pendingProps=Ne,_.deletions=null):(R=bg(z,Ne),R.subtreeFlags=z.subtreeFlags&14680064),je!==null?W=bg(je,W):(W=Zv(W,fe,E,null),W.flags|=2),W.return=_,R.return=_,R.sibling=W,_.child=R,R=W,W=_.child,fe=v.child.memoizedState,fe=fe===null?qj(E):{baseLanes:fe.baseLanes|E,cachePool:null,transitions:fe.transitions},W.memoizedState=fe,W.childLanes=v.childLanes&~E,_.memoizedState=kj,R}return W=v.child,v=W.sibling,R=bg(W,{mode:"visible",children:R.children}),(_.mode&1)===0&&(R.lanes=E),R.return=_,R.sibling=null,v!==null&&(E=_.deletions,E===null?(_.deletions=[v],_.flags|=16):E.push(v)),_.child=R,_.memoizedState=null,R}function Wj(v,_){return _=OT({mode:"visible",children:_},v.mode,0,null),_.return=v,v.child=_}function vT(v,_,E,R){return R!==null&&vj(R),qb(_,v.child,null,E),v=Wj(_,_.pendingProps.children),v.flags|=2,_.memoizedState=null,v}function wOe(v,_,E,R,z,W,fe){if(E)return _.flags&256?(_.flags&=-257,R=Fj(Error(r(422))),vT(v,_,fe,R)):_.memoizedState!==null?(_.child=v.child,_.flags|=128,null):(W=R.fallback,z=_.mode,R=OT({mode:"visible",children:R.children},z,0,null),W=Zv(W,z,fe,null),W.flags|=2,R.return=_,W.return=_,R.sibling=W,_.child=R,(_.mode&1)!==0&&qb(_,v.child,null,fe),_.child.memoizedState=qj(fe),_.memoizedState=kj,W);if((_.mode&1)===0)return vT(v,_,fe,null);if(z.data==="$!"){if(R=z.nextSibling&&z.nextSibling.dataset,R)var je=R.dgst;return R=je,W=Error(r(419)),R=Fj(W,R,void 0),vT(v,_,fe,R)}if(je=(fe&v.childLanes)!==0,vo||je){if(R=qn,R!==null){switch(fe&-fe){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=(z&(R.suspendedLanes|fe))!==0?0:z,z!==0&&z!==W.retryLane&&(W.retryLane=z,Xp(v,z),dl(R,v,z,-1))}return o3(),R=Fj(Error(r(421))),vT(v,_,fe,R)}return z.data==="$?"?(_.flags|=128,_.child=v.child,_=jOe.bind(null,v),z._reactRetry=_,null):(v=W.treeContext,Go=lg(z.nextSibling),Wo=_,Ii=!0,sl=null,v!==null&&(gs[vs++]=Hp,gs[vs++]=$p,gs[vs++]=Wv,Hp=v.id,$p=v.overflow,Wv=_),_=Wj(_,R.children),_.flags|=4096,_)}function t$(v,_,E){v.lanes|=_;var R=v.alternate;R!==null&&(R.lanes|=_),wj(v.return,_,E)}function Gj(v,_,E,R,z){var W=v.memoizedState;W===null?v.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:R,tail:E,tailMode:z}:(W.isBackwards=_,W.rendering=null,W.renderingStartTime=0,W.last=R,W.tail=E,W.tailMode=z)}function r$(v,_,E){var R=_.pendingProps,z=R.revealOrder,W=R.tail;if(qa(v,_,R.children,E),R=Bi.current,(R&2)!==0)R=R&1|2,_.flags|=128;else{if(v!==null&&(v.flags&128)!==0)e:for(v=_.child;v!==null;){if(v.tag===13)v.memoizedState!==null&&t$(v,E,_);else if(v.tag===19)t$(v,E,_);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===_)break e;for(;v.sibling===null;){if(v.return===null||v.return===_)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}R&=1}if(Ei(Bi,R),(_.mode&1)===0)_.memoizedState=null;else switch(z){case"forwards":for(E=_.child,z=null;E!==null;)v=E.alternate,v!==null&&cT(v)===null&&(z=E),E=E.sibling;E=z,E===null?(z=_.child,_.child=null):(z=E.sibling,E.sibling=null),Gj(_,!1,z,E,W);break;case"backwards":for(E=null,z=_.child,_.child=null;z!==null;){if(v=z.alternate,v!==null&&cT(v)===null){_.child=z;break}v=z.sibling,z.sibling=E,E=z,z=v}Gj(_,!0,E,null,W);break;case"together":Gj(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function yT(v,_){(_.mode&1)===0&&v!==null&&(v.alternate=null,_.alternate=null,_.flags|=2)}function Kp(v,_,E){if(v!==null&&(_.dependencies=v.dependencies),Yv|=_.lanes,(E&_.childLanes)===0)return null;if(v!==null&&_.child!==v.child)throw Error(r(153));if(_.child!==null){for(v=_.child,E=bg(v,v.pendingProps),_.child=E,E.return=_;v.sibling!==null;)v=v.sibling,E=E.sibling=bg(v,v.pendingProps),E.return=_;E.sibling=null}return _.child}function xOe(v,_,E){switch(_.tag){case 3:J9(_),kb();break;case 5:g9(_);break;case 1:go(_.type)&&eT(_);break;case 4:Cj(_,_.stateNode.containerInfo);break;case 10:var R=_.type._context,z=_.memoizedProps.value;Ei(oT,R._currentValue),R._currentValue=z;break;case 13:if(R=_.memoizedState,R!==null)return R.dehydrated!==null?(Ei(Bi,Bi.current&1),_.flags|=128,null):(E&_.child.childLanes)!==0?e$(v,_,E):(Ei(Bi,Bi.current&1),v=Kp(v,_,E),v!==null?v.sibling:null);Ei(Bi,Bi.current&1);break;case 19:if(R=(E&_.childLanes)!==0,(v.flags&128)!==0){if(R)return r$(v,_,E);_.flags|=128}if(z=_.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Ei(Bi,Bi.current),R)break;return null;case 22:case 23:return _.lanes=0,Y9(v,_,E)}return Kp(v,_,E)}var i$,Hj,n$,a$;i$=function(v,_){for(var E=_.child;E!==null;){if(E.tag===5||E.tag===6)v.appendChild(E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===_)break;for(;E.sibling===null;){if(E.return===null||E.return===_)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},Hj=function(){},n$=function(v,_,E,R){var z=v.memoizedProps;if(z!==R){v=_.stateNode,$v(Ff.current);var W=null;switch(E){case"input":z=ge(v,z),R=ge(v,R),W=[];break;case"select":z=F({},z,{value:void 0}),R=F({},R,{value:void 0}),W=[];break;case"textarea":z=Z(v,z),R=Z(v,R),W=[];break;default:typeof z.onClick!="function"&&typeof R.onClick=="function"&&(v.onclick=QP)}Pe(E,R);var fe;E=null;for(rt in z)if(!R.hasOwnProperty(rt)&&z.hasOwnProperty(rt)&&z[rt]!=null)if(rt==="style"){var je=z[rt];for(fe in je)je.hasOwnProperty(fe)&&(E||(E={}),E[fe]="")}else rt!=="dangerouslySetInnerHTML"&&rt!=="children"&&rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(n.hasOwnProperty(rt)?W||(W=[]):(W=W||[]).push(rt,null));for(rt in R){var Ne=R[rt];if(je=z!=null?z[rt]:void 0,R.hasOwnProperty(rt)&&Ne!==je&&(Ne!=null||je!=null))if(rt==="style")if(je){for(fe in je)!je.hasOwnProperty(fe)||Ne&&Ne.hasOwnProperty(fe)||(E||(E={}),E[fe]="");for(fe in Ne)Ne.hasOwnProperty(fe)&&je[fe]!==Ne[fe]&&(E||(E={}),E[fe]=Ne[fe])}else E||(W||(W=[]),W.push(rt,E)),E=Ne;else rt==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,je=je?je.__html:void 0,Ne!=null&&je!==Ne&&(W=W||[]).push(rt,Ne)):rt==="children"?typeof Ne!="string"&&typeof Ne!="number"||(W=W||[]).push(rt,""+Ne):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&(n.hasOwnProperty(rt)?(Ne!=null&&rt==="onScroll"&&Ai("scroll",v),W||je===Ne||(W=[])):(W=W||[]).push(rt,Ne))}E&&(W=W||[]).push("style",E);var rt=W;(_.updateQueue=rt)&&(_.flags|=4)}},a$=function(v,_,E,R){E!==R&&(_.flags|=4)};function hx(v,_){if(!Ii)switch(v.tailMode){case"hidden":_=v.tail;for(var E=null;_!==null;)_.alternate!==null&&(E=_),_=_.sibling;E===null?v.tail=null:E.sibling=null;break;case"collapsed":E=v.tail;for(var R=null;E!==null;)E.alternate!==null&&(R=E),E=E.sibling;R===null?_||v.tail===null?v.tail=null:v.tail.sibling=null:R.sibling=null}}function Ma(v){var _=v.alternate!==null&&v.alternate.child===v.child,E=0,R=0;if(_)for(var z=v.child;z!==null;)E|=z.lanes|z.childLanes,R|=z.subtreeFlags&14680064,R|=z.flags&14680064,z.return=v,z=z.sibling;else for(z=v.child;z!==null;)E|=z.lanes|z.childLanes,R|=z.subtreeFlags,R|=z.flags,z.return=v,z=z.sibling;return v.subtreeFlags|=R,v.childLanes=E,_}function SOe(v,_,E){var R=_.pendingProps;switch(pj(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ma(_),null;case 1:return go(_.type)&&ZP(),Ma(_),null;case 3:return R=_.stateNode,Hb(),Oi(mo),Oi(Ca),Pj(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(v===null||v.child===null)&&(nT(_)?_.flags|=4:v===null||v.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,sl!==null&&(i3(sl),sl=null))),Hj(v,_),Ma(_),null;case 5:Ej(_);var z=$v(sx.current);if(E=_.type,v!==null&&_.stateNode!=null)n$(v,_,E,R,z),v.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!R){if(_.stateNode===null)throw Error(r(166));return Ma(_),null}if(v=$v(Ff.current),nT(_)){R=_.stateNode,E=_.type;var W=_.memoizedProps;switch(R[Lf]=_,R[rx]=W,v=(_.mode&1)!==0,E){case"dialog":Ai("cancel",R),Ai("close",R);break;case"iframe":case"object":case"embed":Ai("load",R);break;case"video":case"audio":for(z=0;z<Zw.length;z++)Ai(Zw[z],R);break;case"source":Ai("error",R);break;case"img":case"image":case"link":Ai("error",R),Ai("load",R);break;case"details":Ai("toggle",R);break;case"input":ce(R,W),Ai("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!W.multiple},Ai("invalid",R);break;case"textarea":ie(R,W),Ai("invalid",R)}Pe(E,W),z=null;for(var fe in W)if(W.hasOwnProperty(fe)){var je=W[fe];fe==="children"?typeof je=="string"?R.textContent!==je&&(W.suppressHydrationWarning!==!0&&KP(R.textContent,je,v),z=["children",je]):typeof je=="number"&&R.textContent!==""+je&&(W.suppressHydrationWarning!==!0&&KP(R.textContent,je,v),z=["children",""+je]):n.hasOwnProperty(fe)&&je!=null&&fe==="onScroll"&&Ai("scroll",R)}switch(E){case"input":me(R),Me(R,W,!0);break;case"textarea":me(R),Ue(R);break;case"select":case"option":break;default:typeof W.onClick=="function"&&(R.onclick=QP)}R=z,_.updateQueue=R,R!==null&&(_.flags|=4)}else{fe=z.nodeType===9?z:z.ownerDocument,v==="http://www.w3.org/1999/xhtml"&&(v=ne(E)),v==="http://www.w3.org/1999/xhtml"?E==="script"?(v=fe.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild)):typeof R.is=="string"?v=fe.createElement(E,{is:R.is}):(v=fe.createElement(E),E==="select"&&(fe=v,R.multiple?fe.multiple=!0:R.size&&(fe.size=R.size))):v=fe.createElementNS(v,E),v[Lf]=_,v[rx]=R,i$(v,_,!1,!1),_.stateNode=v;e:{switch(fe=Le(E,R),E){case"dialog":Ai("cancel",v),Ai("close",v),z=R;break;case"iframe":case"object":case"embed":Ai("load",v),z=R;break;case"video":case"audio":for(z=0;z<Zw.length;z++)Ai(Zw[z],v);z=R;break;case"source":Ai("error",v),z=R;break;case"img":case"image":case"link":Ai("error",v),Ai("load",v),z=R;break;case"details":Ai("toggle",v),z=R;break;case"input":ce(v,R),z=ge(v,R),Ai("invalid",v);break;case"option":z=R;break;case"select":v._wrapperState={wasMultiple:!!R.multiple},z=F({},R,{value:void 0}),Ai("invalid",v);break;case"textarea":ie(v,R),z=Z(v,R),Ai("invalid",v);break;default:z=R}Pe(E,z),je=z;for(W in je)if(je.hasOwnProperty(W)){var Ne=je[W];W==="style"?et(v,Ne):W==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,Ne!=null&&U(v,Ne)):W==="children"?typeof Ne=="string"?(E!=="textarea"||Ne!=="")&&te(v,Ne):typeof Ne=="number"&&te(v,""+Ne):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(n.hasOwnProperty(W)?Ne!=null&&W==="onScroll"&&Ai("scroll",v):Ne!=null&&w(v,W,Ne,fe))}switch(E){case"input":me(v),Me(v,R,!1);break;case"textarea":me(v),Ue(v);break;case"option":R.value!=null&&v.setAttribute("value",""+ee(R.value));break;case"select":v.multiple=!!R.multiple,W=R.value,W!=null?De(v,!!R.multiple,W,!1):R.defaultValue!=null&&De(v,!!R.multiple,R.defaultValue,!0);break;default:typeof z.onClick=="function"&&(v.onclick=QP)}switch(E){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return Ma(_),null;case 6:if(v&&_.stateNode!=null)a$(v,_,v.memoizedProps,R);else{if(typeof R!="string"&&_.stateNode===null)throw Error(r(166));if(E=$v(sx.current),$v(Ff.current),nT(_)){if(R=_.stateNode,E=_.memoizedProps,R[Lf]=_,(W=R.nodeValue!==E)&&(v=Wo,v!==null))switch(v.tag){case 3:KP(R.nodeValue,E,(v.mode&1)!==0);break;case 5:v.memoizedProps.suppressHydrationWarning!==!0&&KP(R.nodeValue,E,(v.mode&1)!==0)}W&&(_.flags|=4)}else R=(E.nodeType===9?E:E.ownerDocument).createTextNode(R),R[Lf]=_,_.stateNode=R}return Ma(_),null;case 13:if(Oi(Bi),R=_.memoizedState,v===null||v.memoizedState!==null&&v.memoizedState.dehydrated!==null){if(Ii&&Go!==null&&(_.mode&1)!==0&&(_.flags&128)===0)l9(),kb(),_.flags|=98560,W=!1;else if(W=nT(_),R!==null&&R.dehydrated!==null){if(v===null){if(!W)throw Error(r(318));if(W=_.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(r(317));W[Lf]=_}else kb(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;Ma(_),W=!1}else sl!==null&&(i3(sl),sl=null),W=!0;if(!W)return _.flags&65536?_:null}return(_.flags&128)!==0?(_.lanes=E,_):(R=R!==null,R!==(v!==null&&v.memoizedState!==null)&&R&&(_.child.flags|=8192,(_.mode&1)!==0&&(v===null||(Bi.current&1)!==0?An===0&&(An=3):o3())),_.updateQueue!==null&&(_.flags|=4),Ma(_),null);case 4:return Hb(),Hj(v,_),v===null&&ex(_.stateNode.containerInfo),Ma(_),null;case 10:return _j(_.type._context),Ma(_),null;case 17:return go(_.type)&&ZP(),Ma(_),null;case 19:if(Oi(Bi),W=_.memoizedState,W===null)return Ma(_),null;if(R=(_.flags&128)!==0,fe=W.rendering,fe===null)if(R)hx(W,!1);else{if(An!==0||v!==null&&(v.flags&128)!==0)for(v=_.child;v!==null;){if(fe=cT(v),fe!==null){for(_.flags|=128,hx(W,!1),R=fe.updateQueue,R!==null&&(_.updateQueue=R,_.flags|=4),_.subtreeFlags=0,R=E,E=_.child;E!==null;)W=E,v=R,W.flags&=14680066,fe=W.alternate,fe===null?(W.childLanes=0,W.lanes=v,W.child=null,W.subtreeFlags=0,W.memoizedProps=null,W.memoizedState=null,W.updateQueue=null,W.dependencies=null,W.stateNode=null):(W.childLanes=fe.childLanes,W.lanes=fe.lanes,W.child=fe.child,W.subtreeFlags=0,W.deletions=null,W.memoizedProps=fe.memoizedProps,W.memoizedState=fe.memoizedState,W.updateQueue=fe.updateQueue,W.type=fe.type,v=fe.dependencies,W.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),E=E.sibling;return Ei(Bi,Bi.current&1|2),_.child}v=v.sibling}W.tail!==null&&_t()>Kb&&(_.flags|=128,R=!0,hx(W,!1),_.lanes=4194304)}else{if(!R)if(v=cT(fe),v!==null){if(_.flags|=128,R=!0,E=v.updateQueue,E!==null&&(_.updateQueue=E,_.flags|=4),hx(W,!0),W.tail===null&&W.tailMode==="hidden"&&!fe.alternate&&!Ii)return Ma(_),null}else 2*_t()-W.renderingStartTime>Kb&&E!==1073741824&&(_.flags|=128,R=!0,hx(W,!1),_.lanes=4194304);W.isBackwards?(fe.sibling=_.child,_.child=fe):(E=W.last,E!==null?E.sibling=fe:_.child=fe,W.last=fe)}return W.tail!==null?(_=W.tail,W.rendering=_,W.tail=_.sibling,W.renderingStartTime=_t(),_.sibling=null,E=Bi.current,Ei(Bi,R?E&1|2:E&1),_):(Ma(_),null);case 22:case 23:return a3(),R=_.memoizedState!==null,v!==null&&v.memoizedState!==null!==R&&(_.flags|=8192),R&&(_.mode&1)!==0?(Ho&1073741824)!==0&&(Ma(_),_.subtreeFlags&6&&(_.flags|=8192)):Ma(_),null;case 24:return null;case 25:return null}throw Error(r(156,_.tag))}function COe(v,_){switch(pj(_),_.tag){case 1:return go(_.type)&&ZP(),v=_.flags,v&65536?(_.flags=v&-65537|128,_):null;case 3:return Hb(),Oi(mo),Oi(Ca),Pj(),v=_.flags,(v&65536)!==0&&(v&128)===0?(_.flags=v&-65537|128,_):null;case 5:return Ej(_),null;case 13:if(Oi(Bi),v=_.memoizedState,v!==null&&v.dehydrated!==null){if(_.alternate===null)throw Error(r(340));kb()}return v=_.flags,v&65536?(_.flags=v&-65537|128,_):null;case 19:return Oi(Bi),null;case 4:return Hb(),null;case 10:return _j(_.type._context),null;case 22:case 23:return a3(),null;case 24:return null;default:return null}}var bT=!1,Pa=!1,EOe=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Xb(v,_){var E=v.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(R){qi(v,_,R)}else E.current=null}function $j(v,_,E){try{E()}catch(R){qi(v,_,R)}}var o$=!1;function MOe(v,_){if(aj=NP,v=FH(),QI(v)){if("selectionStart"in v)var E={start:v.selectionStart,end:v.selectionEnd};else e:{E=(E=v.ownerDocument)&&E.defaultView||window;var R=E.getSelection&&E.getSelection();if(R&&R.rangeCount!==0){E=R.anchorNode;var z=R.anchorOffset,W=R.focusNode;R=R.focusOffset;try{E.nodeType,W.nodeType}catch{E=null;break e}var fe=0,je=-1,Ne=-1,rt=0,yt=0,xt=v,gt=null;t:for(;;){for(var Bt;xt!==E||z!==0&&xt.nodeType!==3||(je=fe+z),xt!==W||R!==0&&xt.nodeType!==3||(Ne=fe+R),xt.nodeType===3&&(fe+=xt.nodeValue.length),(Bt=xt.firstChild)!==null;)gt=xt,xt=Bt;for(;;){if(xt===v)break t;if(gt===E&&++rt===z&&(je=fe),gt===W&&++yt===R&&(Ne=fe),(Bt=xt.nextSibling)!==null)break;xt=gt,gt=xt.parentNode}xt=Bt}E=je===-1||Ne===-1?null:{start:je,end:Ne}}else E=null}E=E||{start:0,end:0}}else E=null;for(oj={focusedElem:v,selectionRange:E},NP=!1,kt=_;kt!==null;)if(_=kt,v=_.child,(_.subtreeFlags&1028)!==0&&v!==null)v.return=_,kt=v;else for(;kt!==null;){_=kt;try{var Gt=_.alternate;if((_.flags&1024)!==0)switch(_.tag){case 0:case 11:case 15:break;case 1:if(Gt!==null){var Xt=Gt.memoizedProps,rn=Gt.memoizedState,Ke=_.stateNode,ke=Ke.getSnapshotBeforeUpdate(_.elementType===_.type?Xt:ll(_.type,Xt),rn);Ke.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var Je=_.stateNode.containerInfo;Je.nodeType===1?Je.textContent="":Je.nodeType===9&&Je.documentElement&&Je.removeChild(Je.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ct){qi(_,_.return,Ct)}if(v=_.sibling,v!==null){v.return=_.return,kt=v;break}kt=_.return}return Gt=o$,o$=!1,Gt}function fx(v,_,E){var R=_.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var z=R=R.next;do{if((z.tag&v)===v){var W=z.destroy;z.destroy=void 0,W!==void 0&&$j(_,E,W)}z=z.next}while(z!==R)}}function _T(v,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var E=_=_.next;do{if((E.tag&v)===v){var R=E.create;E.destroy=R()}E=E.next}while(E!==_)}}function Xj(v){var _=v.ref;if(_!==null){var E=v.stateNode;switch(v.tag){case 5:v=E;break;default:v=E}typeof _=="function"?_(v):_.current=v}}function s$(v){var _=v.alternate;_!==null&&(v.alternate=null,s$(_)),v.child=null,v.deletions=null,v.sibling=null,v.tag===5&&(_=v.stateNode,_!==null&&(delete _[Lf],delete _[rx],delete _[cj],delete _[lOe],delete _[uOe])),v.stateNode=null,v.return=null,v.dependencies=null,v.memoizedProps=null,v.memoizedState=null,v.pendingProps=null,v.stateNode=null,v.updateQueue=null}function l$(v){return v.tag===5||v.tag===3||v.tag===4}function u$(v){e:for(;;){for(;v.sibling===null;){if(v.return===null||l$(v.return))return null;v=v.return}for(v.sibling.return=v.return,v=v.sibling;v.tag!==5&&v.tag!==6&&v.tag!==18;){if(v.flags&2||v.child===null||v.tag===4)continue e;v.child.return=v,v=v.child}if(!(v.flags&2))return v.stateNode}}function Yj(v,_,E){var R=v.tag;if(R===5||R===6)v=v.stateNode,_?E.nodeType===8?E.parentNode.insertBefore(v,_):E.insertBefore(v,_):(E.nodeType===8?(_=E.parentNode,_.insertBefore(v,E)):(_=E,_.appendChild(v)),E=E._reactRootContainer,E!=null||_.onclick!==null||(_.onclick=QP));else if(R!==4&&(v=v.child,v!==null))for(Yj(v,_,E),v=v.sibling;v!==null;)Yj(v,_,E),v=v.sibling}function Kj(v,_,E){var R=v.tag;if(R===5||R===6)v=v.stateNode,_?E.insertBefore(v,_):E.appendChild(v);else if(R!==4&&(v=v.child,v!==null))for(Kj(v,_,E),v=v.sibling;v!==null;)Kj(v,_,E),v=v.sibling}var sa=null,ul=!1;function pg(v,_,E){for(E=E.child;E!==null;)c$(v,_,E),E=E.sibling}function c$(v,_,E){if(ue&&typeof ue.onCommitFiberUnmount=="function")try{ue.onCommitFiberUnmount(pi,E)}catch{}switch(E.tag){case 5:Pa||Xb(E,_);case 6:var R=sa,z=ul;sa=null,pg(v,_,E),sa=R,ul=z,sa!==null&&(ul?(v=sa,E=E.stateNode,v.nodeType===8?v.parentNode.removeChild(E):v.removeChild(E)):sa.removeChild(E.stateNode));break;case 18:sa!==null&&(ul?(v=sa,E=E.stateNode,v.nodeType===8?uj(v.parentNode,E):v.nodeType===1&&uj(v,E),Gw(v)):uj(sa,E.stateNode));break;case 4:R=sa,z=ul,sa=E.stateNode.containerInfo,ul=!0,pg(v,_,E),sa=R,ul=z;break;case 0:case 11:case 14:case 15:if(!Pa&&(R=E.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){z=R=R.next;do{var W=z,fe=W.destroy;W=W.tag,fe!==void 0&&((W&2)!==0||(W&4)!==0)&&$j(E,_,fe),z=z.next}while(z!==R)}pg(v,_,E);break;case 1:if(!Pa&&(Xb(E,_),R=E.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=E.memoizedProps,R.state=E.memoizedState,R.componentWillUnmount()}catch(je){qi(E,_,je)}pg(v,_,E);break;case 21:pg(v,_,E);break;case 22:E.mode&1?(Pa=(R=Pa)||E.memoizedState!==null,pg(v,_,E),Pa=R):pg(v,_,E);break;default:pg(v,_,E)}}function d$(v){var _=v.updateQueue;if(_!==null){v.updateQueue=null;var E=v.stateNode;E===null&&(E=v.stateNode=new EOe),_.forEach(function(R){var z=zOe.bind(null,v,R);E.has(R)||(E.add(R),R.then(z,z))})}}function cl(v,_){var E=_.deletions;if(E!==null)for(var R=0;R<E.length;R++){var z=E[R];try{var W=v,fe=_,je=fe;e:for(;je!==null;){switch(je.tag){case 5:sa=je.stateNode,ul=!1;break e;case 3:sa=je.stateNode.containerInfo,ul=!0;break e;case 4:sa=je.stateNode.containerInfo,ul=!0;break e}je=je.return}if(sa===null)throw Error(r(160));c$(W,fe,z),sa=null,ul=!1;var Ne=z.alternate;Ne!==null&&(Ne.return=null),z.return=null}catch(rt){qi(z,_,rt)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)h$(_,v),_=_.sibling}function h$(v,_){var E=v.alternate,R=v.flags;switch(v.tag){case 0:case 11:case 14:case 15:if(cl(_,v),Uf(v),R&4){try{fx(3,v,v.return),_T(3,v)}catch(Xt){qi(v,v.return,Xt)}try{fx(5,v,v.return)}catch(Xt){qi(v,v.return,Xt)}}break;case 1:cl(_,v),Uf(v),R&512&&E!==null&&Xb(E,E.return);break;case 5:if(cl(_,v),Uf(v),R&512&&E!==null&&Xb(E,E.return),v.flags&32){var z=v.stateNode;try{te(z,"")}catch(Xt){qi(v,v.return,Xt)}}if(R&4&&(z=v.stateNode,z!=null)){var W=v.memoizedProps,fe=E!==null?E.memoizedProps:W,je=v.type,Ne=v.updateQueue;if(v.updateQueue=null,Ne!==null)try{je==="input"&&W.type==="radio"&&W.name!=null&&Ce(z,W),Le(je,fe);var rt=Le(je,W);for(fe=0;fe<Ne.length;fe+=2){var yt=Ne[fe],xt=Ne[fe+1];yt==="style"?et(z,xt):yt==="dangerouslySetInnerHTML"?U(z,xt):yt==="children"?te(z,xt):w(z,yt,xt,rt)}switch(je){case"input":Ee(z,W);break;case"textarea":Te(z,W);break;case"select":var gt=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!W.multiple;var Bt=W.value;Bt!=null?De(z,!!W.multiple,Bt,!1):gt!==!!W.multiple&&(W.defaultValue!=null?De(z,!!W.multiple,W.defaultValue,!0):De(z,!!W.multiple,W.multiple?[]:"",!1))}z[rx]=W}catch(Xt){qi(v,v.return,Xt)}}break;case 6:if(cl(_,v),Uf(v),R&4){if(v.stateNode===null)throw Error(r(162));z=v.stateNode,W=v.memoizedProps;try{z.nodeValue=W}catch(Xt){qi(v,v.return,Xt)}}break;case 3:if(cl(_,v),Uf(v),R&4&&E!==null&&E.memoizedState.isDehydrated)try{Gw(_.containerInfo)}catch(Xt){qi(v,v.return,Xt)}break;case 4:cl(_,v),Uf(v);break;case 13:cl(_,v),Uf(v),z=v.child,z.flags&8192&&(W=z.memoizedState!==null,z.stateNode.isHidden=W,!W||z.alternate!==null&&z.alternate.memoizedState!==null||(Zj=_t())),R&4&&d$(v);break;case 22:if(yt=E!==null&&E.memoizedState!==null,v.mode&1?(Pa=(rt=Pa)||yt,cl(_,v),Pa=rt):cl(_,v),Uf(v),R&8192){if(rt=v.memoizedState!==null,(v.stateNode.isHidden=rt)&&!yt&&(v.mode&1)!==0)for(kt=v,yt=v.child;yt!==null;){for(xt=kt=yt;kt!==null;){switch(gt=kt,Bt=gt.child,gt.tag){case 0:case 11:case 14:case 15:fx(4,gt,gt.return);break;case 1:Xb(gt,gt.return);var Gt=gt.stateNode;if(typeof Gt.componentWillUnmount=="function"){R=gt,E=gt.return;try{_=R,Gt.props=_.memoizedProps,Gt.state=_.memoizedState,Gt.componentWillUnmount()}catch(Xt){qi(R,E,Xt)}}break;case 5:Xb(gt,gt.return);break;case 22:if(gt.memoizedState!==null){m$(xt);continue}}Bt!==null?(Bt.return=gt,kt=Bt):m$(xt)}yt=yt.sibling}e:for(yt=null,xt=v;;){if(xt.tag===5){if(yt===null){yt=xt;try{z=xt.stateNode,rt?(W=z.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none"):(je=xt.stateNode,Ne=xt.memoizedProps.style,fe=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null,je.style.display=Fe("display",fe))}catch(Xt){qi(v,v.return,Xt)}}}else if(xt.tag===6){if(yt===null)try{xt.stateNode.nodeValue=rt?"":xt.memoizedProps}catch(Xt){qi(v,v.return,Xt)}}else if((xt.tag!==22&&xt.tag!==23||xt.memoizedState===null||xt===v)&&xt.child!==null){xt.child.return=xt,xt=xt.child;continue}if(xt===v)break e;for(;xt.sibling===null;){if(xt.return===null||xt.return===v)break e;yt===xt&&(yt=null),xt=xt.return}yt===xt&&(yt=null),xt.sibling.return=xt.return,xt=xt.sibling}}break;case 19:cl(_,v),Uf(v),R&4&&d$(v);break;case 21:break;default:cl(_,v),Uf(v)}}function Uf(v){var _=v.flags;if(_&2){try{e:{for(var E=v.return;E!==null;){if(l$(E)){var R=E;break e}E=E.return}throw Error(r(160))}switch(R.tag){case 5:var z=R.stateNode;R.flags&32&&(te(z,""),R.flags&=-33);var W=u$(v);Kj(v,W,z);break;case 3:case 4:var fe=R.stateNode.containerInfo,je=u$(v);Yj(v,je,fe);break;default:throw Error(r(161))}}catch(Ne){qi(v,v.return,Ne)}v.flags&=-3}_&4096&&(v.flags&=-4097)}function POe(v,_,E){kt=v,f$(v)}function f$(v,_,E){for(var R=(v.mode&1)!==0;kt!==null;){var z=kt,W=z.child;if(z.tag===22&&R){var fe=z.memoizedState!==null||bT;if(!fe){var je=z.alternate,Ne=je!==null&&je.memoizedState!==null||Pa;je=bT;var rt=Pa;if(bT=fe,(Pa=Ne)&&!rt)for(kt=z;kt!==null;)fe=kt,Ne=fe.child,fe.tag===22&&fe.memoizedState!==null?g$(z):Ne!==null?(Ne.return=fe,kt=Ne):g$(z);for(;W!==null;)kt=W,f$(W),W=W.sibling;kt=z,bT=je,Pa=rt}p$(v)}else(z.subtreeFlags&8772)!==0&&W!==null?(W.return=z,kt=W):p$(v)}}function p$(v){for(;kt!==null;){var _=kt;if((_.flags&8772)!==0){var E=_.alternate;try{if((_.flags&8772)!==0)switch(_.tag){case 0:case 11:case 15:Pa||_T(5,_);break;case 1:var R=_.stateNode;if(_.flags&4&&!Pa)if(E===null)R.componentDidMount();else{var z=_.elementType===_.type?E.memoizedProps:ll(_.type,E.memoizedProps);R.componentDidUpdate(z,E.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var W=_.updateQueue;W!==null&&m9(_,W,R);break;case 3:var fe=_.updateQueue;if(fe!==null){if(E=null,_.child!==null)switch(_.child.tag){case 5:E=_.child.stateNode;break;case 1:E=_.child.stateNode}m9(_,fe,E)}break;case 5:var je=_.stateNode;if(E===null&&_.flags&4){E=je;var Ne=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Ne.autoFocus&&E.focus();break;case"img":Ne.src&&(E.src=Ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var rt=_.alternate;if(rt!==null){var yt=rt.memoizedState;if(yt!==null){var xt=yt.dehydrated;xt!==null&&Gw(xt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Pa||_.flags&512&&Xj(_)}catch(gt){qi(_,_.return,gt)}}if(_===v){kt=null;break}if(E=_.sibling,E!==null){E.return=_.return,kt=E;break}kt=_.return}}function m$(v){for(;kt!==null;){var _=kt;if(_===v){kt=null;break}var E=_.sibling;if(E!==null){E.return=_.return,kt=E;break}kt=_.return}}function g$(v){for(;kt!==null;){var _=kt;try{switch(_.tag){case 0:case 11:case 15:var E=_.return;try{_T(4,_)}catch(Ne){qi(_,E,Ne)}break;case 1:var R=_.stateNode;if(typeof R.componentDidMount=="function"){var z=_.return;try{R.componentDidMount()}catch(Ne){qi(_,z,Ne)}}var W=_.return;try{Xj(_)}catch(Ne){qi(_,W,Ne)}break;case 5:var fe=_.return;try{Xj(_)}catch(Ne){qi(_,fe,Ne)}}}catch(Ne){qi(_,_.return,Ne)}if(_===v){kt=null;break}var je=_.sibling;if(je!==null){je.return=_.return,kt=je;break}kt=_.return}}var TOe=Math.ceil,wT=x.ReactCurrentDispatcher,Qj=x.ReactCurrentOwner,_s=x.ReactCurrentBatchConfig,Jr=0,qn=null,mn=null,la=0,Ho=0,Yb=ug(0),An=0,px=null,Yv=0,xT=0,Jj=0,mx=null,yo=null,Zj=0,Kb=1/0,Qp=null,ST=!1,e3=null,mg=null,CT=!1,gg=null,ET=0,gx=0,t3=null,MT=-1,PT=0;function Wa(){return(Jr&6)!==0?_t():MT!==-1?MT:MT=_t()}function vg(v){return(v.mode&1)===0?1:(Jr&2)!==0&&la!==0?la&-la:dOe.transition!==null?(PT===0&&(PT=Bf()),PT):(v=Gr,v!==0||(v=window.event,v=v===void 0?16:yH(v.type)),v)}function dl(v,_,E,R){if(50<gx)throw gx=0,t3=null,Error(r(185));Pn(v,E,R),((Jr&2)===0||v!==qn)&&(v===qn&&((Jr&2)===0&&(xT|=E),An===4&&yg(v,la)),bo(v,R),E===1&&Jr===0&&(_.mode&1)===0&&(Kb=_t()+500,tT&&dg()))}function bo(v,_){var E=v.callbackNode;Wr(v,_);var R=zf(v,v===qn?la:0);if(R===0)E!==null&&Ge(E),v.callbackNode=null,v.callbackPriority=0;else if(_=R&-R,v.callbackPriority!==_){if(E!=null&&Ge(E),_===1)v.tag===0?cOe(y$.bind(null,v)):i9(y$.bind(null,v)),oOe(function(){(Jr&6)===0&&dg()}),E=null;else{switch(Uv(R)){case 1:E=Kt;break;case 4:E=Nt;break;case 16:E=Ir;break;case 536870912:E=Pr;break;default:E=Ir}E=M$(E,v$.bind(null,v))}v.callbackPriority=_,v.callbackNode=E}}function v$(v,_){if(MT=-1,PT=0,(Jr&6)!==0)throw Error(r(327));var E=v.callbackNode;if(Qb()&&v.callbackNode!==E)return null;var R=zf(v,v===qn?la:0);if(R===0)return null;if((R&30)!==0||(R&v.expiredLanes)!==0||_)_=TT(v,R);else{_=R;var z=Jr;Jr|=2;var W=_$();(qn!==v||la!==_)&&(Qp=null,Kb=_t()+500,Qv(v,_));do try{ROe();break}catch(je){b$(v,je)}while(!0);bj(),wT.current=W,Jr=z,mn!==null?_=0:(qn=null,la=0,_=An)}if(_!==0){if(_===2&&(z=Nv(v),z!==0&&(R=z,_=r3(v,z))),_===1)throw E=px,Qv(v,0),yg(v,R),bo(v,_t()),E;if(_===6)yg(v,R);else{if(z=v.current.alternate,(R&30)===0&&!AOe(z)&&(_=TT(v,R),_===2&&(W=Nv(v),W!==0&&(R=W,_=r3(v,W))),_===1))throw E=px,Qv(v,0),yg(v,R),bo(v,_t()),E;switch(v.finishedWork=z,v.finishedLanes=R,_){case 0:case 1:throw Error(r(345));case 2:Jv(v,yo,Qp);break;case 3:if(yg(v,R),(R&130023424)===R&&(_=Zj+500-_t(),10<_)){if(zf(v,0)!==0)break;if(z=v.suspendedLanes,(z&R)!==R){Wa(),v.pingedLanes|=v.suspendedLanes&z;break}v.timeoutHandle=lj(Jv.bind(null,v,yo,Qp),_);break}Jv(v,yo,Qp);break;case 4:if(yg(v,R),(R&4194240)===R)break;for(_=v.eventTimes,z=-1;0<R;){var fe=31-Oe(R);W=1<<fe,fe=_[fe],fe>z&&(z=fe),R&=~W}if(R=z,R=_t()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*TOe(R/1960))-R,10<R){v.timeoutHandle=lj(Jv.bind(null,v,yo,Qp),R);break}Jv(v,yo,Qp);break;case 5:Jv(v,yo,Qp);break;default:throw Error(r(329))}}}return bo(v,_t()),v.callbackNode===E?v$.bind(null,v):null}function r3(v,_){var E=mx;return v.current.memoizedState.isDehydrated&&(Qv(v,_).flags|=256),v=TT(v,_),v!==2&&(_=yo,yo=E,_!==null&&i3(_)),v}function i3(v){yo===null?yo=v:yo.push.apply(yo,v)}function AOe(v){for(var _=v;;){if(_.flags&16384){var E=_.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var R=0;R<E.length;R++){var z=E[R],W=z.getSnapshot;z=z.value;try{if(!ol(W(),z))return!1}catch{return!1}}}if(E=_.child,_.subtreeFlags&16384&&E!==null)E.return=_,_=E;else{if(_===v)break;for(;_.sibling===null;){if(_.return===null||_.return===v)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function yg(v,_){for(_&=~Jj,_&=~xT,v.suspendedLanes|=_,v.pingedLanes&=~_,v=v.expirationTimes;0<_;){var E=31-Oe(_),R=1<<E;v[E]=-1,_&=~R}}function y$(v){if((Jr&6)!==0)throw Error(r(327));Qb();var _=zf(v,0);if((_&1)===0)return bo(v,_t()),null;var E=TT(v,_);if(v.tag!==0&&E===2){var R=Nv(v);R!==0&&(_=R,E=r3(v,R))}if(E===1)throw E=px,Qv(v,0),yg(v,_),bo(v,_t()),E;if(E===6)throw Error(r(345));return v.finishedWork=v.current.alternate,v.finishedLanes=_,Jv(v,yo,Qp),bo(v,_t()),null}function n3(v,_){var E=Jr;Jr|=1;try{return v(_)}finally{Jr=E,Jr===0&&(Kb=_t()+500,tT&&dg())}}function Kv(v){gg!==null&&gg.tag===0&&(Jr&6)===0&&Qb();var _=Jr;Jr|=1;var E=_s.transition,R=Gr;try{if(_s.transition=null,Gr=1,v)return v()}finally{Gr=R,_s.transition=E,Jr=_,(Jr&6)===0&&dg()}}function a3(){Ho=Yb.current,Oi(Yb)}function Qv(v,_){v.finishedWork=null,v.finishedLanes=0;var E=v.timeoutHandle;if(E!==-1&&(v.timeoutHandle=-1,aOe(E)),mn!==null)for(E=mn.return;E!==null;){var R=E;switch(pj(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&ZP();break;case 3:Hb(),Oi(mo),Oi(Ca),Pj();break;case 5:Ej(R);break;case 4:Hb();break;case 13:Oi(Bi);break;case 19:Oi(Bi);break;case 10:_j(R.type._context);break;case 22:case 23:a3()}E=E.return}if(qn=v,mn=v=bg(v.current,null),la=Ho=_,An=0,px=null,Jj=xT=Yv=0,yo=mx=null,Hv!==null){for(_=0;_<Hv.length;_++)if(E=Hv[_],R=E.interleaved,R!==null){E.interleaved=null;var z=R.next,W=E.pending;if(W!==null){var fe=W.next;W.next=z,R.next=fe}E.pending=R}Hv=null}return v}function b$(v,_){do{var E=mn;try{if(bj(),dT.current=mT,hT){for(var R=Li.memoizedState;R!==null;){var z=R.queue;z!==null&&(z.pending=null),R=R.next}hT=!1}if(Xv=0,kn=Tn=Li=null,lx=!1,ux=0,Qj.current=null,E===null||E.return===null){An=1,px=_,mn=null;break}e:{var W=v,fe=E.return,je=E,Ne=_;if(_=la,je.flags|=32768,Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var rt=Ne,yt=je,xt=yt.tag;if((yt.mode&1)===0&&(xt===0||xt===11||xt===15)){var gt=yt.alternate;gt?(yt.updateQueue=gt.updateQueue,yt.memoizedState=gt.memoizedState,yt.lanes=gt.lanes):(yt.updateQueue=null,yt.memoizedState=null)}var Bt=W9(fe);if(Bt!==null){Bt.flags&=-257,G9(Bt,fe,je,W,_),Bt.mode&1&&q9(W,rt,_),_=Bt,Ne=rt;var Gt=_.updateQueue;if(Gt===null){var Xt=new Set;Xt.add(Ne),_.updateQueue=Xt}else Gt.add(Ne);break e}else{if((_&1)===0){q9(W,rt,_),o3();break e}Ne=Error(r(426))}}else if(Ii&&je.mode&1){var rn=W9(fe);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),G9(rn,fe,je,W,_),vj($b(Ne,je));break e}}W=Ne=$b(Ne,je),An!==4&&(An=2),mx===null?mx=[W]:mx.push(W),W=fe;do{switch(W.tag){case 3:W.flags|=65536,_&=-_,W.lanes|=_;var Ke=V9(W,Ne,_);p9(W,Ke);break e;case 1:je=Ne;var ke=W.type,Je=W.stateNode;if((W.flags&128)===0&&(typeof ke.getDerivedStateFromError=="function"||Je!==null&&typeof Je.componentDidCatch=="function"&&(mg===null||!mg.has(Je)))){W.flags|=65536,_&=-_,W.lanes|=_;var Ct=k9(W,je,_);p9(W,Ct);break e}}W=W.return}while(W!==null)}x$(E)}catch(Yt){_=Yt,mn===E&&E!==null&&(mn=E=E.return);continue}break}while(!0)}function _$(){var v=wT.current;return wT.current=mT,v===null?mT:v}function o3(){(An===0||An===3||An===2)&&(An=4),qn===null||(Yv&268435455)===0&&(xT&268435455)===0||yg(qn,la)}function TT(v,_){var E=Jr;Jr|=2;var R=_$();(qn!==v||la!==_)&&(Qp=null,Qv(v,_));do try{OOe();break}catch(z){b$(v,z)}while(!0);if(bj(),Jr=E,wT.current=R,mn!==null)throw Error(r(261));return qn=null,la=0,An}function OOe(){for(;mn!==null;)w$(mn)}function ROe(){for(;mn!==null&&!ut();)w$(mn)}function w$(v){var _=E$(v.alternate,v,Ho);v.memoizedProps=v.pendingProps,_===null?x$(v):mn=_,Qj.current=null}function x$(v){var _=v;do{var E=_.alternate;if(v=_.return,(_.flags&32768)===0){if(E=SOe(E,_,Ho),E!==null){mn=E;return}}else{if(E=COe(E,_),E!==null){E.flags&=32767,mn=E;return}if(v!==null)v.flags|=32768,v.subtreeFlags=0,v.deletions=null;else{An=6,mn=null;return}}if(_=_.sibling,_!==null){mn=_;return}mn=_=v}while(_!==null);An===0&&(An=5)}function Jv(v,_,E){var R=Gr,z=_s.transition;try{_s.transition=null,Gr=1,DOe(v,_,E,R)}finally{_s.transition=z,Gr=R}return null}function DOe(v,_,E,R){do Qb();while(gg!==null);if((Jr&6)!==0)throw Error(r(327));E=v.finishedWork;var z=v.finishedLanes;if(E===null)return null;if(v.finishedWork=null,v.finishedLanes=0,E===v.current)throw Error(r(177));v.callbackNode=null,v.callbackPriority=0;var W=E.lanes|E.childLanes;if(nl(v,W),v===qn&&(mn=qn=null,la=0),(E.subtreeFlags&2064)===0&&(E.flags&2064)===0||CT||(CT=!0,M$(Ir,function(){return Qb(),null})),W=(E.flags&15990)!==0,(E.subtreeFlags&15990)!==0||W){W=_s.transition,_s.transition=null;var fe=Gr;Gr=1;var je=Jr;Jr|=4,Qj.current=null,MOe(v,E),h$(E,v),JAe(oj),NP=!!aj,oj=aj=null,v.current=E,POe(E),vt(),Jr=je,Gr=fe,_s.transition=W}else v.current=E;if(CT&&(CT=!1,gg=v,ET=z),W=v.pendingLanes,W===0&&(mg=null),pe(E.stateNode),bo(v,_t()),_!==null)for(R=v.onRecoverableError,E=0;E<_.length;E++)z=_[E],R(z.value,{componentStack:z.stack,digest:z.digest});if(ST)throw ST=!1,v=e3,e3=null,v;return(ET&1)!==0&&v.tag!==0&&Qb(),W=v.pendingLanes,(W&1)!==0?v===t3?gx++:(gx=0,t3=v):gx=0,dg(),null}function Qb(){if(gg!==null){var v=Uv(ET),_=_s.transition,E=Gr;try{if(_s.transition=null,Gr=16>v?16:v,gg===null)var R=!1;else{if(v=gg,gg=null,ET=0,(Jr&6)!==0)throw Error(r(331));var z=Jr;for(Jr|=4,kt=v.current;kt!==null;){var W=kt,fe=W.child;if((kt.flags&16)!==0){var je=W.deletions;if(je!==null){for(var Ne=0;Ne<je.length;Ne++){var rt=je[Ne];for(kt=rt;kt!==null;){var yt=kt;switch(yt.tag){case 0:case 11:case 15:fx(8,yt,W)}var xt=yt.child;if(xt!==null)xt.return=yt,kt=xt;else for(;kt!==null;){yt=kt;var gt=yt.sibling,Bt=yt.return;if(s$(yt),yt===rt){kt=null;break}if(gt!==null){gt.return=Bt,kt=gt;break}kt=Bt}}}var Gt=W.alternate;if(Gt!==null){var Xt=Gt.child;if(Xt!==null){Gt.child=null;do{var rn=Xt.sibling;Xt.sibling=null,Xt=rn}while(Xt!==null)}}kt=W}}if((W.subtreeFlags&2064)!==0&&fe!==null)fe.return=W,kt=fe;else e:for(;kt!==null;){if(W=kt,(W.flags&2048)!==0)switch(W.tag){case 0:case 11:case 15:fx(9,W,W.return)}var Ke=W.sibling;if(Ke!==null){Ke.return=W.return,kt=Ke;break e}kt=W.return}}var ke=v.current;for(kt=ke;kt!==null;){fe=kt;var Je=fe.child;if((fe.subtreeFlags&2064)!==0&&Je!==null)Je.return=fe,kt=Je;else e:for(fe=ke;kt!==null;){if(je=kt,(je.flags&2048)!==0)try{switch(je.tag){case 0:case 11:case 15:_T(9,je)}}catch(Yt){qi(je,je.return,Yt)}if(je===fe){kt=null;break e}var Ct=je.sibling;if(Ct!==null){Ct.return=je.return,kt=Ct;break e}kt=je.return}}if(Jr=z,dg(),ue&&typeof ue.onPostCommitFiberRoot=="function")try{ue.onPostCommitFiberRoot(pi,v)}catch{}R=!0}return R}finally{Gr=E,_s.transition=_}}return!1}function S$(v,_,E){_=$b(E,_),_=V9(v,_,1),v=fg(v,_,1),_=Wa(),v!==null&&(Pn(v,1,_),bo(v,_))}function qi(v,_,E){if(v.tag===3)S$(v,v,E);else for(;_!==null;){if(_.tag===3){S$(_,v,E);break}else if(_.tag===1){var R=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(mg===null||!mg.has(R))){v=$b(E,v),v=k9(_,v,1),_=fg(_,v,1),v=Wa(),_!==null&&(Pn(_,1,v),bo(_,v));break}}_=_.return}}function IOe(v,_,E){var R=v.pingCache;R!==null&&R.delete(_),_=Wa(),v.pingedLanes|=v.suspendedLanes&E,qn===v&&(la&E)===E&&(An===4||An===3&&(la&130023424)===la&&500>_t()-Zj?Qv(v,0):Jj|=E),bo(v,_)}function C$(v,_){_===0&&((v.mode&1)===0?_=1:(_=il,il<<=1,(il&130023424)===0&&(il=4194304)));var E=Wa();v=Xp(v,_),v!==null&&(Pn(v,_,E),bo(v,E))}function jOe(v){var _=v.memoizedState,E=0;_!==null&&(E=_.retryLane),C$(v,E)}function zOe(v,_){var E=0;switch(v.tag){case 13:var R=v.stateNode,z=v.memoizedState;z!==null&&(E=z.retryLane);break;case 19:R=v.stateNode;break;default:throw Error(r(314))}R!==null&&R.delete(_),C$(v,E)}var E$;E$=function(v,_,E){if(v!==null)if(v.memoizedProps!==_.pendingProps||mo.current)vo=!0;else{if((v.lanes&E)===0&&(_.flags&128)===0)return vo=!1,xOe(v,_,E);vo=(v.flags&131072)!==0}else vo=!1,Ii&&(_.flags&1048576)!==0&&n9(_,iT,_.index);switch(_.lanes=0,_.tag){case 2:var R=_.type;yT(v,_),v=_.pendingProps;var z=Nb(_,Ca.current);Gb(_,E),z=Oj(null,_,R,v,z,E);var W=Rj();return _.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,go(R)?(W=!0,eT(_)):W=!1,_.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,Sj(_),z.updater=gT,_.stateNode=z,z._reactInternals=_,Lj(_,R,v,E),_=Vj(null,_,R,!0,W,E)):(_.tag=0,Ii&&W&&fj(_),qa(null,_,z,E),_=_.child),_;case 16:R=_.elementType;e:{switch(yT(v,_),v=_.pendingProps,z=R._init,R=z(R._payload),_.type=R,z=_.tag=LOe(R),v=ll(R,v),z){case 0:_=Uj(null,_,R,v,E);break e;case 1:_=Q9(null,_,R,v,E);break e;case 11:_=H9(null,_,R,v,E);break e;case 14:_=$9(null,_,R,ll(R.type,v),E);break e}throw Error(r(306,R,""))}return _;case 0:return R=_.type,z=_.pendingProps,z=_.elementType===R?z:ll(R,z),Uj(v,_,R,z,E);case 1:return R=_.type,z=_.pendingProps,z=_.elementType===R?z:ll(R,z),Q9(v,_,R,z,E);case 3:e:{if(J9(_),v===null)throw Error(r(387));R=_.pendingProps,W=_.memoizedState,z=W.element,f9(v,_),uT(_,R,null,E);var fe=_.memoizedState;if(R=fe.element,W.isDehydrated)if(W={element:R,isDehydrated:!1,cache:fe.cache,pendingSuspenseBoundaries:fe.pendingSuspenseBoundaries,transitions:fe.transitions},_.updateQueue.baseState=W,_.memoizedState=W,_.flags&256){z=$b(Error(r(423)),_),_=Z9(v,_,R,E,z);break e}else if(R!==z){z=$b(Error(r(424)),_),_=Z9(v,_,R,E,z);break e}else for(Go=lg(_.stateNode.containerInfo.firstChild),Wo=_,Ii=!0,sl=null,E=d9(_,null,R,E),_.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(kb(),R===z){_=Kp(v,_,E);break e}qa(v,_,R,E)}_=_.child}return _;case 5:return g9(_),v===null&&gj(_),R=_.type,z=_.pendingProps,W=v!==null?v.memoizedProps:null,fe=z.children,sj(R,z)?fe=null:W!==null&&sj(R,W)&&(_.flags|=32),K9(v,_),qa(v,_,fe,E),_.child;case 6:return v===null&&gj(_),null;case 13:return e$(v,_,E);case 4:return Cj(_,_.stateNode.containerInfo),R=_.pendingProps,v===null?_.child=qb(_,null,R,E):qa(v,_,R,E),_.child;case 11:return R=_.type,z=_.pendingProps,z=_.elementType===R?z:ll(R,z),H9(v,_,R,z,E);case 7:return qa(v,_,_.pendingProps,E),_.child;case 8:return qa(v,_,_.pendingProps.children,E),_.child;case 12:return qa(v,_,_.pendingProps.children,E),_.child;case 10:e:{if(R=_.type._context,z=_.pendingProps,W=_.memoizedProps,fe=z.value,Ei(oT,R._currentValue),R._currentValue=fe,W!==null)if(ol(W.value,fe)){if(W.children===z.children&&!mo.current){_=Kp(v,_,E);break e}}else for(W=_.child,W!==null&&(W.return=_);W!==null;){var je=W.dependencies;if(je!==null){fe=W.child;for(var Ne=je.firstContext;Ne!==null;){if(Ne.context===R){if(W.tag===1){Ne=Yp(-1,E&-E),Ne.tag=2;var rt=W.updateQueue;if(rt!==null){rt=rt.shared;var yt=rt.pending;yt===null?Ne.next=Ne:(Ne.next=yt.next,yt.next=Ne),rt.pending=Ne}}W.lanes|=E,Ne=W.alternate,Ne!==null&&(Ne.lanes|=E),wj(W.return,E,_),je.lanes|=E;break}Ne=Ne.next}}else if(W.tag===10)fe=W.type===_.type?null:W.child;else if(W.tag===18){if(fe=W.return,fe===null)throw Error(r(341));fe.lanes|=E,je=fe.alternate,je!==null&&(je.lanes|=E),wj(fe,E,_),fe=W.sibling}else fe=W.child;if(fe!==null)fe.return=W;else for(fe=W;fe!==null;){if(fe===_){fe=null;break}if(W=fe.sibling,W!==null){W.return=fe.return,fe=W;break}fe=fe.return}W=fe}qa(v,_,z.children,E),_=_.child}return _;case 9:return z=_.type,R=_.pendingProps.children,Gb(_,E),z=ys(z),R=R(z),_.flags|=1,qa(v,_,R,E),_.child;case 14:return R=_.type,z=ll(R,_.pendingProps),z=ll(R.type,z),$9(v,_,R,z,E);case 15:return X9(v,_,_.type,_.pendingProps,E);case 17:return R=_.type,z=_.pendingProps,z=_.elementType===R?z:ll(R,z),yT(v,_),_.tag=1,go(R)?(v=!0,eT(_)):v=!1,Gb(_,E),N9(_,R,z),Lj(_,R,z,E),Vj(null,_,R,!0,v,E);case 19:return r$(v,_,E);case 22:return Y9(v,_,E)}throw Error(r(156,_.tag))};function M$(v,_){return Se(v,_)}function BOe(v,_,E,R){this.tag=v,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ws(v,_,E,R){return new BOe(v,_,E,R)}function s3(v){return v=v.prototype,!(!v||!v.isReactComponent)}function LOe(v){if(typeof v=="function")return s3(v)?1:0;if(v!=null){if(v=v.$$typeof,v===j)return 11;if(v===q)return 14}return 2}function bg(v,_){var E=v.alternate;return E===null?(E=ws(v.tag,_,v.key,v.mode),E.elementType=v.elementType,E.type=v.type,E.stateNode=v.stateNode,E.alternate=v,v.alternate=E):(E.pendingProps=_,E.type=v.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=v.flags&14680064,E.childLanes=v.childLanes,E.lanes=v.lanes,E.child=v.child,E.memoizedProps=v.memoizedProps,E.memoizedState=v.memoizedState,E.updateQueue=v.updateQueue,_=v.dependencies,E.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},E.sibling=v.sibling,E.index=v.index,E.ref=v.ref,E}function AT(v,_,E,R,z,W){var fe=2;if(R=v,typeof v=="function")s3(v)&&(fe=1);else if(typeof v=="string")fe=5;else e:switch(v){case T:return Zv(E.children,z,W,_);case M:fe=8,z|=8;break;case A:return v=ws(12,E,_,z|2),v.elementType=A,v.lanes=W,v;case D:return v=ws(13,E,_,z),v.elementType=D,v.lanes=W,v;case I:return v=ws(19,E,_,z),v.elementType=I,v.lanes=W,v;case X:return OT(E,z,W,_);default:if(typeof v=="object"&&v!==null)switch(v.$$typeof){case P:fe=10;break e;case O:fe=9;break e;case j:fe=11;break e;case q:fe=14;break e;case $:fe=16,R=null;break e}throw Error(r(130,v==null?v:typeof v,""))}return _=ws(fe,E,_,z),_.elementType=v,_.type=R,_.lanes=W,_}function Zv(v,_,E,R){return v=ws(7,v,R,_),v.lanes=E,v}function OT(v,_,E,R){return v=ws(22,v,R,_),v.elementType=X,v.lanes=E,v.stateNode={isHidden:!1},v}function l3(v,_,E){return v=ws(6,v,null,_),v.lanes=E,v}function u3(v,_,E){return _=ws(4,v.children!==null?v.children:[],v.key,_),_.lanes=E,_.stateNode={containerInfo:v.containerInfo,pendingChildren:null,implementation:v.implementation},_}function FOe(v,_,E,R,z){this.tag=_,this.containerInfo=v,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ig(0),this.expirationTimes=ig(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ig(0),this.identifierPrefix=R,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function c3(v,_,E,R,z,W,fe,je,Ne){return v=new FOe(v,_,E,je,Ne),_===1?(_=1,W===!0&&(_|=8)):_=0,W=ws(3,null,null,_),v.current=W,W.stateNode=v,W.memoizedState={element:R,isDehydrated:E,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sj(W),v}function NOe(v,_,E){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:R==null?null:""+R,children:v,containerInfo:_,implementation:E}}function P$(v){if(!v)return cg;v=v._reactInternals;e:{if(Ft(v)!==v||v.tag!==1)throw Error(r(170));var _=v;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(go(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(r(171))}if(v.tag===1){var E=v.type;if(go(E))return t9(v,E,_)}return _}function T$(v,_,E,R,z,W,fe,je,Ne){return v=c3(E,R,!0,v,z,W,fe,je,Ne),v.context=P$(null),E=v.current,R=Wa(),z=vg(E),W=Yp(R,z),W.callback=_??null,fg(E,W,z),v.current.lanes=z,Pn(v,z,R),bo(v,R),v}function RT(v,_,E,R){var z=_.current,W=Wa(),fe=vg(z);return E=P$(E),_.context===null?_.context=E:_.pendingContext=E,_=Yp(W,fe),_.payload={element:v},R=R===void 0?null:R,R!==null&&(_.callback=R),v=fg(z,_,fe),v!==null&&(dl(v,z,fe,W),lT(v,z,fe)),fe}function DT(v){if(v=v.current,!v.child)return null;switch(v.child.tag){case 5:return v.child.stateNode;default:return v.child.stateNode}}function A$(v,_){if(v=v.memoizedState,v!==null&&v.dehydrated!==null){var E=v.retryLane;v.retryLane=E!==0&&E<_?E:_}}function d3(v,_){A$(v,_),(v=v.alternate)&&A$(v,_)}function UOe(){return null}var O$=typeof reportError=="function"?reportError:function(v){console.error(v)};function h3(v){this._internalRoot=v}IT.prototype.render=h3.prototype.render=function(v){var _=this._internalRoot;if(_===null)throw Error(r(409));RT(v,_,null,null)},IT.prototype.unmount=h3.prototype.unmount=function(){var v=this._internalRoot;if(v!==null){this._internalRoot=null;var _=v.containerInfo;Kv(function(){RT(null,v,null,null)}),_[Wp]=null}};function IT(v){this._internalRoot=v}IT.prototype.unstable_scheduleHydration=function(v){if(v){var _=Vv();v={blockedOn:null,target:v,priority:_};for(var E=0;E<ag.length&&_!==0&&_<ag[E].priority;E++);ag.splice(E,0,v),E===0&&gH(v)}};function f3(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)}function jT(v){return!(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11&&(v.nodeType!==8||v.nodeValue!==" react-mount-point-unstable "))}function R$(){}function VOe(v,_,E,R,z){if(z){if(typeof R=="function"){var W=R;R=function(){var rt=DT(fe);W.call(rt)}}var fe=T$(_,R,v,0,null,!1,!1,"",R$);return v._reactRootContainer=fe,v[Wp]=fe.current,ex(v.nodeType===8?v.parentNode:v),Kv(),fe}for(;z=v.lastChild;)v.removeChild(z);if(typeof R=="function"){var je=R;R=function(){var rt=DT(Ne);je.call(rt)}}var Ne=c3(v,0,!1,null,null,!1,!1,"",R$);return v._reactRootContainer=Ne,v[Wp]=Ne.current,ex(v.nodeType===8?v.parentNode:v),Kv(function(){RT(_,Ne,E,R)}),Ne}function zT(v,_,E,R,z){var W=E._reactRootContainer;if(W){var fe=W;if(typeof z=="function"){var je=z;z=function(){var Ne=DT(fe);je.call(Ne)}}RT(_,fe,v,z)}else fe=VOe(E,_,v,z,R);return DT(fe)}kp=function(v){switch(v.tag){case 3:var _=v.stateNode;if(_.current.memoizedState.isDehydrated){var E=fs(_.pendingLanes);E!==0&&(ps(_,E|1),bo(_,_t()),(Jr&6)===0&&(Kb=_t()+500,dg()))}break;case 13:Kv(function(){var R=Xp(v,1);if(R!==null){var z=Wa();dl(R,v,1,z)}}),d3(v,1)}},ms=function(v){if(v.tag===13){var _=Xp(v,134217728);if(_!==null){var E=Wa();dl(_,v,134217728,E)}d3(v,134217728)}},Uw=function(v){if(v.tag===13){var _=vg(v),E=Xp(v,_);if(E!==null){var R=Wa();dl(E,v,_,R)}d3(v,_)}},Vv=function(){return Gr},Ab=function(v,_){var E=Gr;try{return Gr=v,_()}finally{Gr=E}},Ye=function(v,_,E){switch(_){case"input":if(Ee(v,E),_=E.name,E.type==="radio"&&_!=null){for(E=v;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<E.length;_++){var R=E[_];if(R!==v&&R.form===v.form){var z=JP(R);if(!z)throw Error(r(90));be(R),Ee(R,z)}}}break;case"textarea":Te(v,E);break;case"select":_=E.value,_!=null&&De(v,!!E.multiple,_,!1)}},Rr=n3,ye=Kv;var kOe={usingClientEntryPoint:!1,Events:[ix,Lb,JP,qt,mr,n3]},vx={findFiberByHostInstance:kv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qOe={bundleType:vx.bundleType,version:vx.version,rendererPackageName:vx.rendererPackageName,rendererConfig:vx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(v){return v=Vt(v),v===null?null:v.stateNode},findFiberByHostInstance:vx.findFiberByHostInstance||UOe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var BT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!BT.isDisabled&&BT.supportsFiber)try{pi=BT.inject(qOe),ue=BT}catch{}}return _o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kOe,_o.createPortal=function(v,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f3(_))throw Error(r(200));return NOe(v,_,null,E)},_o.createRoot=function(v,_){if(!f3(v))throw Error(r(299));var E=!1,R="",z=O$;return _!=null&&(_.unstable_strictMode===!0&&(E=!0),_.identifierPrefix!==void 0&&(R=_.identifierPrefix),_.onRecoverableError!==void 0&&(z=_.onRecoverableError)),_=c3(v,1,!1,null,null,E,!1,R,z),v[Wp]=_.current,ex(v.nodeType===8?v.parentNode:v),new h3(_)},_o.findDOMNode=function(v){if(v==null)return null;if(v.nodeType===1)return v;var _=v._reactInternals;if(_===void 0)throw typeof v.render=="function"?Error(r(188)):(v=Object.keys(v).join(","),Error(r(268,v)));return v=Vt(_),v=v===null?null:v.stateNode,v},_o.flushSync=function(v){return Kv(v)},_o.hydrate=function(v,_,E){if(!jT(_))throw Error(r(200));return zT(null,v,_,!0,E)},_o.hydrateRoot=function(v,_,E){if(!f3(v))throw Error(r(405));var R=E!=null&&E.hydratedSources||null,z=!1,W="",fe=O$;if(E!=null&&(E.unstable_strictMode===!0&&(z=!0),E.identifierPrefix!==void 0&&(W=E.identifierPrefix),E.onRecoverableError!==void 0&&(fe=E.onRecoverableError)),_=T$(_,null,v,1,E??null,z,!1,W,fe),v[Wp]=_.current,ex(v),R)for(v=0;v<R.length;v++)E=R[v],z=E._getVersion,z=z(E._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[E,z]:_.mutableSourceEagerHydrationData.push(E,z);return new IT(_)},_o.render=function(v,_,E){if(!jT(_))throw Error(r(200));return zT(null,v,_,!1,E)},_o.unmountComponentAtNode=function(v){if(!jT(v))throw Error(r(40));return v._reactRootContainer?(Kv(function(){zT(null,null,v,!1,function(){v._reactRootContainer=null,v[Wp]=null})}),!0):!1},_o.unstable_batchedUpdates=n3,_o.unstable_renderSubtreeIntoContainer=function(v,_,E,R){if(!jT(E))throw Error(r(200));if(v==null||v._reactInternals===void 0)throw Error(r(38));return zT(v,_,E,!1,R)},_o.version="18.3.1-next-f1338f8080-20240426",_o}var N$;function Xge(){if(N$)return g3.exports;N$=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),g3.exports=ZOe(),g3.exports}var U$;function eRe(){if(U$)return LT;U$=1;var e=Xge();return LT.createRoot=e.createRoot,LT.hydrateRoot=e.hydrateRoot,LT}var tRe=eRe(),bx={},V$;function rRe(){if(V$)return bx;V$=1,Object.defineProperty(bx,"__esModule",{value:!0}),bx.parse=o,bx.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString,a=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,f){const g=new a,p=h.length;if(p<2)return g;const m=(f==null?void 0:f.decode)||c;let y=0;do{const b=h.indexOf("=",y);if(b===-1)break;const w=h.indexOf(";",y),x=w===-1?p:w;if(b>x){y=h.lastIndexOf(";",b-1)+1;continue}const S=s(h,y,b),C=l(h,b,S),T=h.slice(S,C);if(g[T]===void 0){let M=s(h,b+1,x),A=l(h,x,M);const P=m(h.slice(M,A));g[T]=P}y=x+1}while(y<p);return g}function s(h,f,g){do{const p=h.charCodeAt(f);if(p!==32&&p!==9)return f}while(++f<g);return g}function l(h,f,g){for(;f>g;){const p=h.charCodeAt(--f);if(p!==32&&p!==9)return f+1}return g}function u(h,f,g){const p=(g==null?void 0:g.encode)||encodeURIComponent;if(!e.test(h))throw new TypeError(`argument name is invalid: ${h}`);const m=p(f);if(!t.test(m))throw new TypeError(`argument val is invalid: ${f}`);let y=h+"="+m;if(!g)return y;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);y+="; Max-Age="+g.maxAge}if(g.domain){if(!r.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);y+="; Domain="+g.domain}if(g.path){if(!i.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);y+="; Path="+g.path}if(g.expires){if(!d(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);y+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(y+="; HttpOnly"),g.secure&&(y+="; Secure"),g.partitioned&&(y+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return y}function c(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function d(h){return n.call(h)==="[object Date]"}return bx}rRe();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var k$="popstate";function iRe(e={}){function t(i,n){let{pathname:a,search:o,hash:s}=i.location;return V5("",{pathname:a,search:o,hash:s},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(i,n){return typeof n=="string"?n:GE(n)}return aRe(t,r,null,e)}function Ui(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Tp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nRe(){return Math.random().toString(36).substring(2,10)}function q$(e,t){return{usr:e.state,key:e.key,idx:t}}function V5(e,t,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?nw(t):t,state:r,key:t&&t.key||i||nRe()}}function GE({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nw(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function aRe(e,t,r,i={}){let{window:n=document.defaultView,v5Compat:a=!1}=i,o=n.history,s="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){s="POP";let m=c(),y=m==null?null:m-u;u=m,l&&l({action:s,location:p.location,delta:y})}function h(m,y){s="PUSH";let b=V5(p.location,m,y);u=c()+1;let w=q$(b,u),x=p.createHref(b);try{o.pushState(w,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;n.location.assign(x)}a&&l&&l({action:s,location:p.location,delta:1})}function f(m,y){s="REPLACE";let b=V5(p.location,m,y);u=c();let w=q$(b,u),x=p.createHref(b);o.replaceState(w,"",x),a&&l&&l({action:s,location:p.location,delta:0})}function g(m){let y=n.location.origin!=="null"?n.location.origin:n.location.href,b=typeof m=="string"?m:GE(m);return b=b.replace(/ $/,"%20"),Ui(y,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,y)}let p={get action(){return s},get location(){return e(n,o)},listen(m){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(k$,d),l=m,()=>{n.removeEventListener(k$,d),l=null}},createHref(m){return t(n,m)},createURL:g,encodeLocation(m){let y=g(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(m){return o.go(m)}};return p}function Yge(e,t,r="/"){return oRe(e,t,r,!1)}function oRe(e,t,r,i){let n=typeof t=="string"?nw(t):t,a=Um(n.pathname||"/",r);if(a==null)return null;let o=Kge(e);sRe(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let u=yRe(a);s=gRe(o[l],u,i)}return s}function Kge(e,t=[],r=[],i=""){let n=(a,o,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(Ui(l.relativePath.startsWith(i),`Absolute route path "${l.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(i.length));let u=Bm([i,l.relativePath]),c=r.concat(l);a.children&&a.children.length>0&&(Ui(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Kge(a.children,t,c,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:pRe(u,a.index),routesMeta:c})};return e.forEach((a,o)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))n(a,o);else for(let l of Qge(a.path))n(a,o,l)}),t}function Qge(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return n?[a,""]:[a];let o=Qge(i.join("/")),s=[];return s.push(...o.map(l=>l===""?a:[a,l].join("/"))),n&&s.push(...o),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function sRe(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:mRe(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var lRe=/^:[\w-]+$/,uRe=3,cRe=2,dRe=1,hRe=10,fRe=-2,W$=e=>e==="*";function pRe(e,t){let r=e.split("/"),i=r.length;return r.some(W$)&&(i+=fRe),t&&(i+=cRe),r.filter(n=>!W$(n)).reduce((n,a)=>n+(lRe.test(a)?uRe:a===""?dRe:hRe),i)}function mRe(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function gRe(e,t,r=!1){let{routesMeta:i}=e,n={},a="/",o=[];for(let s=0;s<i.length;++s){let l=i[s],u=s===i.length-1,c=a==="/"?t:t.slice(a.length)||"/",d=AR({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d&&u&&r&&!i[i.length-1].route.index&&(d=AR({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),o.push({params:n,pathname:Bm([a,d.pathname]),pathnameBase:xRe(Bm([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=Bm([a,d.pathnameBase]))}return o}function AR(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=vRe(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let a=n[0],o=a.replace(/(.)\/+$/,"$1"),s=n.slice(1);return{params:i.reduce((u,{paramName:c,isOptional:d},h)=>{if(c==="*"){let g=s[h]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const f=s[h];return d&&!f?u[c]=void 0:u[c]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function vRe(e,t=!1,r=!0){Tp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(i.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function yRe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Tp(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Um(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function bRe(e,t="/"){let{pathname:r,search:i="",hash:n=""}=typeof e=="string"?nw(e):e;return{pathname:r?r.startsWith("/")?r:_Re(r,t):t,search:SRe(i),hash:CRe(n)}}function _Re(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function b3(e,t,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wRe(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Jge(e){let t=wRe(e);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function Zge(e,t,r,i=!1){let n;typeof e=="string"?n=nw(e):(n={...e},Ui(!n.pathname||!n.pathname.includes("?"),b3("?","pathname","search",n)),Ui(!n.pathname||!n.pathname.includes("#"),b3("#","pathname","hash",n)),Ui(!n.search||!n.search.includes("#"),b3("#","search","hash",n)));let a=e===""||n.pathname==="",o=a?"/":n.pathname,s;if(o==null)s=r;else{let d=t.length-1;if(!i&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;n.pathname=h.join("/")}s=d>=0?t[d]:"/"}let l=bRe(n,s),u=o&&o!=="/"&&o.endsWith("/"),c=(a||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Bm=e=>e.join("/").replace(/\/\/+/g,"/"),xRe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),SRe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,CRe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ERe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var eve=["POST","PUT","PATCH","DELETE"];new Set(eve);var MRe=["GET",...eve];new Set(MRe);var aw=G.createContext(null);aw.displayName="DataRouter";var c2=G.createContext(null);c2.displayName="DataRouterState";var tve=G.createContext({isTransitioning:!1});tve.displayName="ViewTransition";var PRe=G.createContext(new Map);PRe.displayName="Fetchers";var TRe=G.createContext(null);TRe.displayName="Await";var zp=G.createContext(null);zp.displayName="Navigation";var VM=G.createContext(null);VM.displayName="Location";var Bp=G.createContext({outlet:null,matches:[],isDataRoute:!1});Bp.displayName="Route";var h8=G.createContext(null);h8.displayName="RouteError";function ARe(e,{relative:t}={}){Ui(kM(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=G.useContext(zp),{hash:n,pathname:a,search:o}=WM(e,{relative:t}),s=a;return r!=="/"&&(s=a==="/"?r:Bm([r,a])),i.createHref({pathname:s,search:o,hash:n})}function kM(){return G.useContext(VM)!=null}function Jm(){return Ui(kM(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(VM).location}var rve="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ive(e){G.useContext(zp).static||G.useLayoutEffect(e)}function qM(){let{isDataRoute:e}=G.useContext(Bp);return e?WRe():ORe()}function ORe(){Ui(kM(),"useNavigate() may be used only in the context of a <Router> component.");let e=G.useContext(aw),{basename:t,navigator:r}=G.useContext(zp),{matches:i}=G.useContext(Bp),{pathname:n}=Jm(),a=JSON.stringify(Jge(i)),o=G.useRef(!1);return ive(()=>{o.current=!0}),G.useCallback((l,u={})=>{if(Tp(o.current,rve),!o.current)return;if(typeof l=="number"){r.go(l);return}let c=Zge(l,JSON.parse(a),n,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Bm([t,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[t,r,a,n,e])}var RRe=G.createContext(null);function DRe(e){let t=G.useContext(Bp).outlet;return t&&G.createElement(RRe.Provider,{value:e},t)}function WM(e,{relative:t}={}){let{matches:r}=G.useContext(Bp),{pathname:i}=Jm(),n=JSON.stringify(Jge(r));return G.useMemo(()=>Zge(e,JSON.parse(n),i,t==="path"),[e,n,i,t])}function IRe(e,t){return nve(e,t)}function nve(e,t,r,i){var b;Ui(kM(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n,static:a}=G.useContext(zp),{matches:o}=G.useContext(Bp),s=o[o.length-1],l=s?s.params:{},u=s?s.pathname:"/",c=s?s.pathnameBase:"/",d=s&&s.route;{let w=d&&d.path||"";ave(u,!d||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let h=Jm(),f;if(t){let w=typeof t=="string"?nw(t):t;Ui(c==="/"||((b=w.pathname)==null?void 0:b.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${w.pathname}" was given in the \`location\` prop.`),f=w}else f=h;let g=f.pathname||"/",p=g;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=!a&&r&&r.matches&&r.matches.length>0?r.matches:Yge(e,{pathname:p});Tp(d||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Tp(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=FRe(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Bm([c,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Bm([c,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,r,i);return t&&y?G.createElement(VM.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},y):y}function jRe(){let e=qRe(),t=ERe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=G.createElement(G.Fragment,null,G.createElement("p",null," Hey developer "),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:a},"ErrorBoundary")," or"," ",G.createElement("code",{style:a},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},t),r?G.createElement("pre",{style:n},r):null,o)}var zRe=G.createElement(jRe,null),BRe=class extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?G.createElement(Bp.Provider,{value:this.props.routeContext},G.createElement(h8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LRe({routeContext:e,match:t,children:r}){let i=G.useContext(aw);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(Bp.Provider,{value:e},r)}function FRe(e,t=[],r=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let n=e,a=r==null?void 0:r.errors;if(a!=null){let l=n.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);Ui(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,l+1))}let o=!1,s=-1;if(r)for(let l=0;l<n.length;l++){let u=n[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(s=l),u.route.id){let{loaderData:c,errors:d}=r,h=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||h){o=!0,s>=0?n=n.slice(0,s+1):n=[n[0]];break}}}return n.reduceRight((l,u,c)=>{let d,h=!1,f=null,g=null;r&&(d=a&&u.route.id?a[u.route.id]:void 0,f=u.route.errorElement||zRe,o&&(s<0&&c===0?(ave("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):s===c&&(h=!0,g=u.route.hydrateFallbackElement||null)));let p=t.concat(n.slice(0,c+1)),m=()=>{let y;return d?y=f:h?y=g:u.route.Component?y=G.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=l,G.createElement(LRe,{match:u,routeContext:{outlet:l,matches:p,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?G.createElement(BRe,{location:r.location,revalidation:r.revalidation,component:f,error:d,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}function f8(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NRe(e){let t=G.useContext(aw);return Ui(t,f8(e)),t}function URe(e){let t=G.useContext(c2);return Ui(t,f8(e)),t}function VRe(e){let t=G.useContext(Bp);return Ui(t,f8(e)),t}function p8(e){let t=VRe(e),r=t.matches[t.matches.length-1];return Ui(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function kRe(){return p8("useRouteId")}function qRe(){var i;let e=G.useContext(h8),t=URe("useRouteError"),r=p8("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[r]}function WRe(){let{router:e}=NRe("useNavigate"),t=p8("useNavigate"),r=G.useRef(!1);return ive(()=>{r.current=!0}),G.useCallback(async(n,a={})=>{Tp(r.current,rve),r.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...a}))},[e,t])}var G$={};function ave(e,t,r){!t&&!G$[e]&&(G$[e]=!0,Tp(!1,r))}G.memo(GRe);function GRe({routes:e,future:t,state:r}){return nve(e,void 0,r,t)}function HRe(e){return DRe(e.context)}function Fg(e){Ui(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $Re({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:n,static:a=!1}){Ui(!kM(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),s=G.useMemo(()=>({basename:o,navigator:n,static:a,future:{}}),[o,n,a]);typeof r=="string"&&(r=nw(r));let{pathname:l="/",search:u="",hash:c="",state:d=null,key:h="default"}=r,f=G.useMemo(()=>{let g=Um(l,o);return g==null?null:{location:{pathname:g,search:u,hash:c,state:d,key:h},navigationType:i}},[o,l,u,c,d,h,i]);return Tp(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:G.createElement(zp.Provider,{value:s},G.createElement(VM.Provider,{children:t,value:f}))}function XRe({children:e,location:t}){return IRe(k5(e),t)}function k5(e,t=[]){let r=[];return G.Children.forEach(e,(i,n)=>{if(!G.isValidElement(i))return;let a=[...t,n];if(i.type===G.Fragment){r.push.apply(r,k5(i.props.children,a));return}Ui(i.type===Fg,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ui(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=k5(i.props.children,a)),r.push(o)}),r}var LO="get",FO="application/x-www-form-urlencoded";function d2(e){return e!=null&&typeof e.tagName=="string"}function YRe(e){return d2(e)&&e.tagName.toLowerCase()==="button"}function KRe(e){return d2(e)&&e.tagName.toLowerCase()==="form"}function QRe(e){return d2(e)&&e.tagName.toLowerCase()==="input"}function JRe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ZRe(e,t){return e.button===0&&(!t||t==="_self")&&!JRe(e)}var FT=null;function eDe(){if(FT===null)try{new FormData(document.createElement("form"),0),FT=!1}catch{FT=!0}return FT}var tDe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _3(e){return e!=null&&!tDe.has(e)?(Tp(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${FO}"`),null):e}function rDe(e,t){let r,i,n,a,o;if(KRe(e)){let s=e.getAttribute("action");i=s?Um(s,t):null,r=e.getAttribute("method")||LO,n=_3(e.getAttribute("enctype"))||FO,a=new FormData(e)}else if(YRe(e)||QRe(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||s.getAttribute("action");if(i=l?Um(l,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||LO,n=_3(e.getAttribute("formenctype"))||_3(s.getAttribute("enctype"))||FO,a=new FormData(s,e),!eDe()){let{name:u,type:c,value:d}=e;if(c==="image"){let h=u?`${u}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else u&&a.append(u,d)}}else{if(d2(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=LO,i=null,n=FO,o=e}return a&&n==="text/plain"&&(o=a,a=void 0),{action:i,method:r.toLowerCase(),encType:n,formData:a,body:o}}function m8(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function iDe(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nDe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function aDe(e,t,r){let i=await Promise.all(e.map(async n=>{let a=t.routes[n.route.id];if(a){let o=await iDe(a,r);return o.links?o.links():[]}return[]}));return uDe(i.flat(1).filter(nDe).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function H$(e,t,r,i,n,a){let o=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,s=(l,u)=>{var c;return r[u].pathname!==l.pathname||((c=r[u].route.path)==null?void 0:c.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return a==="assets"?t.filter((l,u)=>o(l,u)||s(l,u)):a==="data"?t.filter((l,u)=>{var d;let c=i.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||s(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((d=r[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function oDe(e,t,{includeHydrateFallback:r}={}){return sDe(e.map(i=>{let n=t.routes[i.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1))}function sDe(e){return[...new Set(e)]}function lDe(e){let t={},r=Object.keys(e).sort();for(let i of r)t[i]=e[i];return t}function uDe(e,t){let r=new Set;return new Set(t),e.reduce((i,n)=>{let a=JSON.stringify(lDe(n));return r.has(a)||(r.add(a),i.push({key:a,link:n})),i},[])}function cDe(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&Um(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function ove(){let e=G.useContext(aw);return m8(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function dDe(){let e=G.useContext(c2);return m8(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var g8=G.createContext(void 0);g8.displayName="FrameworkContext";function sve(){let e=G.useContext(g8);return m8(e,"You must render this element inside a <HydratedRouter> element"),e}function hDe(e,t){let r=G.useContext(g8),[i,n]=G.useState(!1),[a,o]=G.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=t,h=G.useRef(null);G.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let p=y=>{y.forEach(b=>{o(b.isIntersecting)})},m=new IntersectionObserver(p,{threshold:.5});return h.current&&m.observe(h.current),()=>{m.disconnect()}}},[e]),G.useEffect(()=>{if(i){let p=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(p)}}},[i]);let f=()=>{n(!0)},g=()=>{n(!1),o(!1)};return r?e!=="intent"?[a,h,{}]:[a,h,{onFocus:_x(s,f),onBlur:_x(l,g),onMouseEnter:_x(u,f),onMouseLeave:_x(c,g),onTouchStart:_x(d,f)}]:[!1,h,{}]}function _x(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function fDe({page:e,...t}){let{router:r}=ove(),i=G.useMemo(()=>Yge(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?G.createElement(mDe,{page:e,matches:i,...t}):null}function pDe(e){let{manifest:t,routeModules:r}=sve(),[i,n]=G.useState([]);return G.useEffect(()=>{let a=!1;return aDe(e,t,r).then(o=>{a||n(o)}),()=>{a=!0}},[e,t,r]),i}function mDe({page:e,matches:t,...r}){let i=Jm(),{manifest:n,routeModules:a}=sve(),{basename:o}=ove(),{loaderData:s,matches:l}=dDe(),u=G.useMemo(()=>H$(e,t,l,n,i,"data"),[e,t,l,n,i]),c=G.useMemo(()=>H$(e,t,l,n,i,"assets"),[e,t,l,n,i]),d=G.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let g=new Set,p=!1;if(t.forEach(y=>{var w;let b=n.routes[y.route.id];!b||!b.hasLoader||(!u.some(x=>x.route.id===y.route.id)&&y.route.id in s&&((w=a[y.route.id])!=null&&w.shouldRevalidate)||b.hasClientLoader?p=!0:g.add(y.route.id))}),g.size===0)return[];let m=cDe(e,o);return p&&g.size>0&&m.searchParams.set("_routes",t.filter(y=>g.has(y.route.id)).map(y=>y.route.id).join(",")),[m.pathname+m.search]},[o,s,i,n,u,t,e,a]),h=G.useMemo(()=>oDe(c,n),[c,n]),f=pDe(c);return G.createElement(G.Fragment,null,d.map(g=>G.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),h.map(g=>G.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),f.map(({key:g,link:p})=>G.createElement("link",{key:g,...p})))}function gDe(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var lve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lve&&(window.__reactRouterVersion="7.5.0")}catch{}function vDe({basename:e,children:t,window:r}){let i=G.useRef();i.current==null&&(i.current=iRe({window:r,v5Compat:!0}));let n=i.current,[a,o]=G.useState({action:n.action,location:n.location}),s=G.useCallback(l=>{G.startTransition(()=>o(l))},[o]);return G.useLayoutEffect(()=>n.listen(s),[n,s]),G.createElement($Re,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:n})}var uve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A0=G.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:n,reloadDocument:a,replace:o,state:s,target:l,to:u,preventScrollReset:c,viewTransition:d,...h},f){let{basename:g}=G.useContext(zp),p=typeof u=="string"&&uve.test(u),m,y=!1;if(typeof u=="string"&&p&&(m=u,lve))try{let A=new URL(window.location.href),P=u.startsWith("//")?new URL(A.protocol+u):new URL(u),O=Um(P.pathname,g);P.origin===A.origin&&O!=null?u=O+P.search+P.hash:y=!0}catch{Tp(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=ARe(u,{relative:n}),[w,x,S]=hDe(i,h),C=wDe(u,{replace:o,state:s,target:l,preventScrollReset:c,relative:n,viewTransition:d});function T(A){t&&t(A),A.defaultPrevented||C(A)}let M=G.createElement("a",{...h,...S,href:m||b,onClick:y||a?t:T,ref:gDe(f,x),target:l,"data-discover":!p&&r==="render"?"true":void 0});return w&&!p?G.createElement(G.Fragment,null,M,G.createElement(fDe,{page:b})):M});A0.displayName="Link";var yDe=G.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:n=!1,style:a,to:o,viewTransition:s,children:l,...u},c){let d=WM(o,{relative:u.relative}),h=Jm(),f=G.useContext(c2),{navigator:g,basename:p}=G.useContext(zp),m=f!=null&&MDe(d)&&s===!0,y=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,b=h.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;r||(b=b.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&p&&(w=Um(w,p)||w);const x=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=b===y||!n&&b.startsWith(y)&&b.charAt(x)==="/",C=w!=null&&(w===y||!n&&w.startsWith(y)&&w.charAt(y.length)==="/"),T={isActive:S,isPending:C,isTransitioning:m},M=S?t:void 0,A;typeof i=="function"?A=i(T):A=[i,S?"active":null,C?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(T):a;return G.createElement(A0,{...u,"aria-current":M,className:A,ref:c,style:P,to:o,viewTransition:s},typeof l=="function"?l(T):l)});yDe.displayName="NavLink";var bDe=G.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:n,state:a,method:o=LO,action:s,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...h},f)=>{let g=CDe(),p=EDe(s,{relative:u}),m=o.toLowerCase()==="get"?"get":"post",y=typeof s=="string"&&uve.test(s),b=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let x=w.nativeEvent.submitter,S=(x==null?void 0:x.getAttribute("formmethod"))||o;g(x||w.currentTarget,{fetcherKey:t,method:S,navigate:r,replace:n,state:a,relative:u,preventScrollReset:c,viewTransition:d})};return G.createElement("form",{ref:f,method:m,action:p,onSubmit:i?l:b,...h,"data-discover":!y&&e==="render"?"true":void 0})});bDe.displayName="Form";function _De(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cve(e){let t=G.useContext(aw);return Ui(t,_De(e)),t}function wDe(e,{target:t,replace:r,state:i,preventScrollReset:n,relative:a,viewTransition:o}={}){let s=qM(),l=Jm(),u=WM(e,{relative:a});return G.useCallback(c=>{if(ZRe(c,t)){c.preventDefault();let d=r!==void 0?r:GE(l)===GE(u);s(e,{replace:d,state:i,preventScrollReset:n,relative:a,viewTransition:o})}},[l,s,u,r,i,t,e,n,a,o])}var xDe=0,SDe=()=>`__${String(++xDe)}__`;function CDe(){let{router:e}=cve("useSubmit"),{basename:t}=G.useContext(zp),r=kRe();return G.useCallback(async(i,n={})=>{let{action:a,method:o,encType:s,formData:l,body:u}=rDe(i,t);if(n.navigate===!1){let c=n.fetcherKey||SDe();await e.fetch(c,r,n.action||a,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||o,formEncType:n.encType||s,flushSync:n.flushSync})}else await e.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||o,formEncType:n.encType||s,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,r])}function EDe(e,{relative:t}={}){let{basename:r}=G.useContext(zp),i=G.useContext(Bp);Ui(i,"useFormAction must be used inside a RouteContext");let[n]=i.matches.slice(-1),a={...WM(e||".",{relative:t})},o=Jm();if(e==null){a.search=o.search;let s=new URLSearchParams(a.search),l=s.getAll("index");if(l.some(c=>c==="")){s.delete("index"),l.filter(d=>d).forEach(d=>s.append("index",d));let c=s.toString();a.search=c?`?${c}`:""}}return(!e||e===".")&&n.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Bm([r,a.pathname])),GE(a)}function MDe(e,t={}){let r=G.useContext(tve);Ui(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=cve("useViewTransitionState"),n=WM(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=Um(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=Um(r.nextLocation.pathname,i)||r.nextLocation.pathname;return AR(n.pathname,o)!=null||AR(n.pathname,a)!=null}new TextEncoder;var dve=Xge();const NT=d8(dve),HE={black:"#000",white:"#fff"},Jb={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Zb={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},e1={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},t1={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},r1={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},wx={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},PDe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Vm(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(i=>r.searchParams.append("args[]",i)),`Minified MUI error #${e}; visit ${r} for the full message.`}const Sf="$$material";function OR(){return OR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},OR.apply(null,arguments)}function TDe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function ADe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var ODe=function(){function e(r){var i=this;this._insertTag=function(n){var a;i.tags.length===0?i.insertionPoint?a=i.insertionPoint.nextSibling:i.prepend?a=i.container.firstChild:a=i.before:a=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(n,a),i.tags.push(n)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ADe(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=TDe(n);try{a.insertRule(i,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){var n;return(n=i.parentNode)==null?void 0:n.removeChild(i)}),this.tags=[],this.ctr=0},e}(),Oa="-ms-",RR="-moz-",ii="-webkit-",hve="comm",v8="rule",y8="decl",RDe="@import",fve="@keyframes",DDe="@layer",IDe=Math.abs,h2=String.fromCharCode,jDe=Object.assign;function zDe(e,t){return ma(e,0)^45?(((t<<2^ma(e,0))<<2^ma(e,1))<<2^ma(e,2))<<2^ma(e,3):0}function pve(e){return e.trim()}function BDe(e,t){return(e=t.exec(e))?e[0]:e}function ni(e,t,r){return e.replace(t,r)}function q5(e,t){return e.indexOf(t)}function ma(e,t){return e.charCodeAt(t)|0}function $E(e,t,r){return e.slice(t,r)}function ap(e){return e.length}function b8(e){return e.length}function UT(e,t){return t.push(e),e}function LDe(e,t){return e.map(t).join("")}var f2=1,A_=1,mve=0,zo=0,bn=0,ow="";function p2(e,t,r,i,n,a,o){return{value:e,root:t,parent:r,type:i,props:n,children:a,line:f2,column:A_,length:o,return:""}}function xx(e,t){return jDe(p2("",null,null,"",null,null,0),e,{length:-e.length},t)}function FDe(){return bn}function NDe(){return bn=zo>0?ma(ow,--zo):0,A_--,bn===10&&(A_=1,f2--),bn}function rs(){return bn=zo<mve?ma(ow,zo++):0,A_++,bn===10&&(A_=1,f2++),bn}function vp(){return ma(ow,zo)}function NO(){return zo}function GM(e,t){return $E(ow,e,t)}function XE(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gve(e){return f2=A_=1,mve=ap(ow=e),zo=0,[]}function vve(e){return ow="",e}function UO(e){return pve(GM(zo-1,W5(e===91?e+2:e===40?e+1:e)))}function UDe(e){for(;(bn=vp())&&bn<33;)rs();return XE(e)>2||XE(bn)>3?"":" "}function VDe(e,t){for(;--t&&rs()&&!(bn<48||bn>102||bn>57&&bn<65||bn>70&&bn<97););return GM(e,NO()+(t<6&&vp()==32&&rs()==32))}function W5(e){for(;rs();)switch(bn){case e:return zo;case 34:case 39:e!==34&&e!==39&&W5(bn);break;case 40:e===41&&W5(e);break;case 92:rs();break}return zo}function kDe(e,t){for(;rs()&&e+bn!==57;)if(e+bn===84&&vp()===47)break;return"/*"+GM(t,zo-1)+"*"+h2(e===47?e:rs())}function qDe(e){for(;!XE(vp());)rs();return GM(e,zo)}function WDe(e){return vve(VO("",null,null,null,[""],e=gve(e),0,[0],e))}function VO(e,t,r,i,n,a,o,s,l){for(var u=0,c=0,d=o,h=0,f=0,g=0,p=1,m=1,y=1,b=0,w="",x=n,S=a,C=i,T=w;m;)switch(g=b,b=rs()){case 40:if(g!=108&&ma(T,d-1)==58){q5(T+=ni(UO(b),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:T+=UO(b);break;case 9:case 10:case 13:case 32:T+=UDe(g);break;case 92:T+=VDe(NO()-1,7);continue;case 47:switch(vp()){case 42:case 47:UT(GDe(kDe(rs(),NO()),t,r),l);break;default:T+="/"}break;case 123*p:s[u++]=ap(T)*y;case 125*p:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+c:y==-1&&(T=ni(T,/\f/g,"")),f>0&&ap(T)-d&&UT(f>32?X$(T+";",i,r,d-1):X$(ni(T," ","")+";",i,r,d-2),l);break;case 59:T+=";";default:if(UT(C=$$(T,t,r,u,c,n,s,w,x=[],S=[],d),a),b===123)if(c===0)VO(T,t,C,C,x,a,d,s,S);else switch(h===99&&ma(T,3)===110?100:h){case 100:case 108:case 109:case 115:VO(e,C,C,i&&UT($$(e,C,C,0,0,n,s,w,n,x=[],d),S),n,S,d,s,i?x:S);break;default:VO(T,C,C,C,[""],S,0,s,S)}}u=c=f=0,p=y=1,w=T="",d=o;break;case 58:d=1+ap(T),f=g;default:if(p<1){if(b==123)--p;else if(b==125&&p++==0&&NDe()==125)continue}switch(T+=h2(b),b*p){case 38:y=c>0?1:(T+="\f",-1);break;case 44:s[u++]=(ap(T)-1)*y,y=1;break;case 64:vp()===45&&(T+=UO(rs())),h=vp(),c=d=ap(w=T+=qDe(NO())),b++;break;case 45:g===45&&ap(T)==2&&(p=0)}}return a}function $$(e,t,r,i,n,a,o,s,l,u,c){for(var d=n-1,h=n===0?a:[""],f=b8(h),g=0,p=0,m=0;g<i;++g)for(var y=0,b=$E(e,d+1,d=IDe(p=o[g])),w=e;y<f;++y)(w=pve(p>0?h[y]+" "+b:ni(b,/&\f/g,h[y])))&&(l[m++]=w);return p2(e,t,r,n===0?v8:s,l,u,c)}function GDe(e,t,r){return p2(e,t,r,hve,h2(FDe()),$E(e,2,-2),0)}function X$(e,t,r,i){return p2(e,t,r,y8,$E(e,0,i),$E(e,i+1,-1),i)}function o_(e,t){for(var r="",i=b8(e),n=0;n<i;n++)r+=t(e[n],n,e,t)||"";return r}function HDe(e,t,r,i){switch(e.type){case DDe:if(e.children.length)break;case RDe:case y8:return e.return=e.return||e.value;case hve:return"";case fve:return e.return=e.value+"{"+o_(e.children,i)+"}";case v8:e.value=e.props.join(",")}return ap(r=o_(e.children,i))?e.return=e.value+"{"+r+"}":""}function $De(e){var t=b8(e);return function(r,i,n,a){for(var o="",s=0;s<t;s++)o+=e[s](r,i,n,a)||"";return o}}function XDe(e){return function(t){t.root||(t=t.return)&&e(t)}}function yve(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var YDe=function(t,r,i){for(var n=0,a=0;n=a,a=vp(),n===38&&a===12&&(r[i]=1),!XE(a);)rs();return GM(t,zo)},KDe=function(t,r){var i=-1,n=44;do switch(XE(n)){case 0:n===38&&vp()===12&&(r[i]=1),t[i]+=YDe(zo-1,r,i);break;case 2:t[i]+=UO(n);break;case 4:if(n===44){t[++i]=vp()===58?"&\f":"",r[i]=t[i].length;break}default:t[i]+=h2(n)}while(n=rs());return t},QDe=function(t,r){return vve(KDe(gve(t),r))},Y$=new WeakMap,JDe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,i=t.parent,n=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Y$.get(i))&&!n){Y$.set(t,!0);for(var a=[],o=QDe(r,a),s=i.props,l=0,u=0;l<o.length;l++)for(var c=0;c<s.length;c++,u++)t.props[u]=a[l]?o[l].replace(/&\f/g,s[c]):s[c]+" "+o[l]}}},ZDe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function bve(e,t){switch(zDe(e,t)){case 5103:return ii+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ii+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ii+e+RR+e+Oa+e+e;case 6828:case 4268:return ii+e+Oa+e+e;case 6165:return ii+e+Oa+"flex-"+e+e;case 5187:return ii+e+ni(e,/(\w+).+(:[^]+)/,ii+"box-$1$2"+Oa+"flex-$1$2")+e;case 5443:return ii+e+Oa+"flex-item-"+ni(e,/flex-|-self/,"")+e;case 4675:return ii+e+Oa+"flex-line-pack"+ni(e,/align-content|flex-|-self/,"")+e;case 5548:return ii+e+Oa+ni(e,"shrink","negative")+e;case 5292:return ii+e+Oa+ni(e,"basis","preferred-size")+e;case 6060:return ii+"box-"+ni(e,"-grow","")+ii+e+Oa+ni(e,"grow","positive")+e;case 4554:return ii+ni(e,/([^-])(transform)/g,"$1"+ii+"$2")+e;case 6187:return ni(ni(ni(e,/(zoom-|grab)/,ii+"$1"),/(image-set)/,ii+"$1"),e,"")+e;case 5495:case 3959:return ni(e,/(image-set\([^]*)/,ii+"$1$`$1");case 4968:return ni(ni(e,/(.+:)(flex-)?(.*)/,ii+"box-pack:$3"+Oa+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ii+e+e;case 4095:case 3583:case 4068:case 2532:return ni(e,/(.+)-inline(.+)/,ii+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ap(e)-1-t>6)switch(ma(e,t+1)){case 109:if(ma(e,t+4)!==45)break;case 102:return ni(e,/(.+:)(.+)-([^]+)/,"$1"+ii+"$2-$3$1"+RR+(ma(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~q5(e,"stretch")?bve(ni(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(ma(e,t+1)!==115)break;case 6444:switch(ma(e,ap(e)-3-(~q5(e,"!important")&&10))){case 107:return ni(e,":",":"+ii)+e;case 101:return ni(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ii+(ma(e,14)===45?"inline-":"")+"box$3$1"+ii+"$2$3$1"+Oa+"$2box$3")+e}break;case 5936:switch(ma(e,t+11)){case 114:return ii+e+Oa+ni(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ii+e+Oa+ni(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ii+e+Oa+ni(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ii+e+Oa+e+e}return e}var e2e=function(t,r,i,n){if(t.length>-1&&!t.return)switch(t.type){case y8:t.return=bve(t.value,t.length);break;case fve:return o_([xx(t,{value:ni(t.value,"@","@"+ii)})],n);case v8:if(t.length)return LDe(t.props,function(a){switch(BDe(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return o_([xx(t,{props:[ni(a,/:(read-\w+)/,":"+RR+"$1")]})],n);case"::placeholder":return o_([xx(t,{props:[ni(a,/:(plac\w+)/,":"+ii+"input-$1")]}),xx(t,{props:[ni(a,/:(plac\w+)/,":"+RR+"$1")]}),xx(t,{props:[ni(a,/:(plac\w+)/,Oa+"input-$1")]})],n)}return""})}},t2e=[e2e],r2e=function(t){var r=t.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(p){var m=p.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var n=t.stylisPlugins||t2e,a={},o,s=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(p){for(var m=p.getAttribute("data-emotion").split(" "),y=1;y<m.length;y++)a[m[y]]=!0;s.push(p)});var l,u=[JDe,ZDe];{var c,d=[HDe,XDe(function(p){c.insert(p)})],h=$De(u.concat(n,d)),f=function(m){return o_(WDe(m),h)};l=function(m,y,b,w){c=b,f(m?m+"{"+y.styles+"}":y.styles),w&&(g.inserted[y.name]=!0)}}var g={key:r,sheet:new ODe({key:r,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return g.sheet.hydrate(s),g},w3={exports:{}},oi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K$;function i2e(){if(K$)return oi;K$=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,n=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,f=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,p=e?Symbol.for("react.block"):60121,m=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function w(S){if(typeof S=="object"&&S!==null){var C=S.$$typeof;switch(C){case t:switch(S=S.type,S){case l:case u:case i:case a:case n:case d:return S;default:switch(S=S&&S.$$typeof,S){case s:case c:case g:case f:case o:return S;default:return C}}case r:return C}}}function x(S){return w(S)===u}return oi.AsyncMode=l,oi.ConcurrentMode=u,oi.ContextConsumer=s,oi.ContextProvider=o,oi.Element=t,oi.ForwardRef=c,oi.Fragment=i,oi.Lazy=g,oi.Memo=f,oi.Portal=r,oi.Profiler=a,oi.StrictMode=n,oi.Suspense=d,oi.isAsyncMode=function(S){return x(S)||w(S)===l},oi.isConcurrentMode=x,oi.isContextConsumer=function(S){return w(S)===s},oi.isContextProvider=function(S){return w(S)===o},oi.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},oi.isForwardRef=function(S){return w(S)===c},oi.isFragment=function(S){return w(S)===i},oi.isLazy=function(S){return w(S)===g},oi.isMemo=function(S){return w(S)===f},oi.isPortal=function(S){return w(S)===r},oi.isProfiler=function(S){return w(S)===a},oi.isStrictMode=function(S){return w(S)===n},oi.isSuspense=function(S){return w(S)===d},oi.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===i||S===u||S===a||S===n||S===d||S===h||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===f||S.$$typeof===o||S.$$typeof===s||S.$$typeof===c||S.$$typeof===m||S.$$typeof===y||S.$$typeof===b||S.$$typeof===p)},oi.typeOf=w,oi}var Q$;function n2e(){return Q$||(Q$=1,w3.exports=i2e()),w3.exports}var x3,J$;function a2e(){if(J$)return x3;J$=1;var e=n2e(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[e.ForwardRef]=i,a[e.Memo]=n;function o(g){return e.isMemo(g)?n:a[g.$$typeof]||t}var s=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;function f(g,p,m){if(typeof p!="string"){if(h){var y=d(p);y&&y!==h&&f(g,y,m)}var b=l(p);u&&(b=b.concat(u(p)));for(var w=o(g),x=o(p),S=0;S<b.length;++S){var C=b[S];if(!r[C]&&!(m&&m[C])&&!(x&&x[C])&&!(w&&w[C])){var T=c(p,C);try{s(g,C,T)}catch{}}}}return g}return x3=f,x3}a2e();var o2e=!0;function _ve(e,t,r){var i="";return r.split(" ").forEach(function(n){e[n]!==void 0?t.push(e[n]+";"):n&&(i+=n+" ")}),i}var _8=function(t,r,i){var n=t.key+"-"+r.name;(i===!1||o2e===!1)&&t.registered[n]===void 0&&(t.registered[n]=r.styles)},w8=function(t,r,i){_8(t,r,i);var n=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var a=r;do t.insert(r===a?"."+n:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function s2e(e){for(var t=0,r,i=0,n=e.length;n>=4;++i,n-=4)r=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(n){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var l2e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},u2e=/[A-Z]|^ms/g,c2e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,wve=function(t){return t.charCodeAt(1)===45},Z$=function(t){return t!=null&&typeof t!="boolean"},S3=yve(function(e){return wve(e)?e:e.replace(u2e,"-$&").toLowerCase()}),e7=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(c2e,function(i,n,a){return op={name:n,styles:a,next:op},n})}return l2e[t]!==1&&!wve(t)&&typeof r=="number"&&r!==0?r+"px":r};function YE(e,t,r){if(r==null)return"";var i=r;if(i.__emotion_styles!==void 0)return i;switch(typeof r){case"boolean":return"";case"object":{var n=r;if(n.anim===1)return op={name:n.name,styles:n.styles,next:op},n.name;var a=r;if(a.styles!==void 0){var o=a.next;if(o!==void 0)for(;o!==void 0;)op={name:o.name,styles:o.styles,next:op},o=o.next;var s=a.styles+";";return s}return d2e(e,t,r)}case"function":{if(e!==void 0){var l=op,u=r(e);return op=l,YE(e,t,u)}break}}var c=r;if(t==null)return c;var d=t[c];return d!==void 0?d:c}function d2e(e,t,r){var i="";if(Array.isArray(r))for(var n=0;n<r.length;n++)i+=YE(e,t,r[n])+";";else for(var a in r){var o=r[a];if(typeof o!="object"){var s=o;t!=null&&t[s]!==void 0?i+=a+"{"+t[s]+"}":Z$(s)&&(i+=S3(a)+":"+e7(a,s)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var l=0;l<o.length;l++)Z$(o[l])&&(i+=S3(a)+":"+e7(a,o[l])+";");else{var u=YE(e,t,o);switch(a){case"animation":case"animationName":{i+=S3(a)+":"+u+";";break}default:i+=a+"{"+u+"}"}}}return i}var t7=/label:\s*([^\s;{]+)\s*(;|$)/g,op;function HM(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,n="";op=void 0;var a=e[0];if(a==null||a.raw===void 0)i=!1,n+=YE(r,t,a);else{var o=a;n+=o[0]}for(var s=1;s<e.length;s++)if(n+=YE(r,t,e[s]),i){var l=a;n+=l[s]}t7.lastIndex=0;for(var u="",c;(c=t7.exec(n))!==null;)u+="-"+c[1];var d=s2e(n)+u;return{name:d,styles:n,next:op}}var h2e=function(t){return t()},xve=TR.useInsertionEffect?TR.useInsertionEffect:!1,Sve=xve||h2e,r7=xve||G.useLayoutEffect,Cve=G.createContext(typeof HTMLElement<"u"?r2e({key:"css"}):null);Cve.Provider;var x8=function(t){return G.forwardRef(function(r,i){var n=G.useContext(Cve);return t(r,n,i)})},$M=G.createContext({}),S8={}.hasOwnProperty,G5="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f2e=function(t,r){var i={};for(var n in r)S8.call(r,n)&&(i[n]=r[n]);return i[G5]=t,i},p2e=function(t){var r=t.cache,i=t.serialized,n=t.isStringTag;return _8(r,i,n),Sve(function(){return w8(r,i,n)}),null},m2e=x8(function(e,t,r){var i=e.css;typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var n=e[G5],a=[i],o="";typeof e.className=="string"?o=_ve(t.registered,a,e.className):e.className!=null&&(o=e.className+" ");var s=HM(a,void 0,G.useContext($M));o+=t.key+"-"+s.name;var l={};for(var u in e)S8.call(e,u)&&u!=="css"&&u!==G5&&(l[u]=e[u]);return l.className=o,r&&(l.ref=r),G.createElement(G.Fragment,null,G.createElement(p2e,{cache:t,serialized:s,isStringTag:typeof n=="string"}),G.createElement(n,l))}),g2e=m2e,i7=function(t,r){var i=arguments;if(r==null||!S8.call(r,"css"))return G.createElement.apply(void 0,i);var n=i.length,a=new Array(n);a[0]=g2e,a[1]=f2e(t,r);for(var o=2;o<n;o++)a[o]=i[o];return G.createElement.apply(null,a)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(i7||(i7={}));var v2e=x8(function(e,t){var r=e.styles,i=HM([r],void 0,G.useContext($M)),n=G.useRef();return r7(function(){var a=t.key+"-global",o=new t.sheet.constructor({key:a,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,l=document.querySelector('style[data-emotion="'+a+" "+i.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),l!==null&&(s=!0,l.setAttribute("data-emotion",a),o.hydrate([l])),n.current=[o,s],function(){o.flush()}},[t]),r7(function(){var a=n.current,o=a[0],s=a[1];if(s){a[1]=!1;return}if(i.next!==void 0&&w8(t,i.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}t.insert("",i,o,!1)},[t,i.name]),null});function sw(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return HM(t)}function Cv(){var e=sw.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var y2e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,b2e=yve(function(e){return y2e.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),_2e=b2e,w2e=function(t){return t!=="theme"},n7=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?_2e:w2e},a7=function(t,r,i){var n;if(r){var a=r.shouldForwardProp;n=t.__emotion_forwardProp&&a?function(o){return t.__emotion_forwardProp(o)&&a(o)}:a}return typeof n!="function"&&i&&(n=t.__emotion_forwardProp),n},x2e=function(t){var r=t.cache,i=t.serialized,n=t.isStringTag;return _8(r,i,n),Sve(function(){return w8(r,i,n)}),null},S2e=function e(t,r){var i=t.__emotion_real===t,n=i&&t.__emotion_base||t,a,o;r!==void 0&&(a=r.label,o=r.target);var s=a7(t,r,i),l=s||n7(n),u=!l("as");return function(){var c=arguments,d=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(a!==void 0&&d.push("label:"+a+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{var h=c[0];d.push(h[0]);for(var f=c.length,g=1;g<f;g++)d.push(c[g],h[g])}var p=x8(function(m,y,b){var w=u&&m.as||n,x="",S=[],C=m;if(m.theme==null){C={};for(var T in m)C[T]=m[T];C.theme=G.useContext($M)}typeof m.className=="string"?x=_ve(y.registered,S,m.className):m.className!=null&&(x=m.className+" ");var M=HM(d.concat(S),y.registered,C);x+=y.key+"-"+M.name,o!==void 0&&(x+=" "+o);var A=u&&s===void 0?n7(w):l,P={};for(var O in m)u&&O==="as"||A(O)&&(P[O]=m[O]);return P.className=x,b&&(P.ref=b),G.createElement(G.Fragment,null,G.createElement(x2e,{cache:y,serialized:M,isStringTag:typeof w=="string"}),G.createElement(w,P))});return p.displayName=a!==void 0?a:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=n,p.__emotion_styles=d,p.__emotion_forwardProp=s,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(m,y){var b=e(m,OR({},r,y,{shouldForwardProp:a7(p,y,!0)}));return b.apply(void 0,d)},p}},C2e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],H5=S2e.bind(null);C2e.forEach(function(e){H5[e]=H5(e)});function E2e(e){return e==null||Object.keys(e).length===0}function Eve(e){const{styles:t,defaultTheme:r={}}=e,i=typeof t=="function"?n=>t(E2e(n)?r:n):t;return V.jsx(v2e,{styles:i})}function Mve(e,t){return H5(e,t)}function M2e(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const o7=[];function s7(e){return o7[0]=e,HM(o7)}var C3={exports:{}},mi={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l7;function P2e(){if(l7)return mi;l7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.view_transition"),f=Symbol.for("react.client.reference");function g(p){if(typeof p=="object"&&p!==null){var m=p.$$typeof;switch(m){case e:switch(p=p.type,p){case r:case n:case i:case l:case u:case h:return p;default:switch(p=p&&p.$$typeof,p){case o:case s:case d:case c:return p;case a:return p;default:return m}}case t:return m}}}return mi.ContextConsumer=a,mi.ContextProvider=o,mi.Element=e,mi.ForwardRef=s,mi.Fragment=r,mi.Lazy=d,mi.Memo=c,mi.Portal=t,mi.Profiler=n,mi.StrictMode=i,mi.Suspense=l,mi.SuspenseList=u,mi.isContextConsumer=function(p){return g(p)===a},mi.isContextProvider=function(p){return g(p)===o},mi.isElement=function(p){return typeof p=="object"&&p!==null&&p.$$typeof===e},mi.isForwardRef=function(p){return g(p)===s},mi.isFragment=function(p){return g(p)===r},mi.isLazy=function(p){return g(p)===d},mi.isMemo=function(p){return g(p)===c},mi.isPortal=function(p){return g(p)===t},mi.isProfiler=function(p){return g(p)===n},mi.isStrictMode=function(p){return g(p)===i},mi.isSuspense=function(p){return g(p)===l},mi.isSuspenseList=function(p){return g(p)===u},mi.isValidElementType=function(p){return typeof p=="string"||typeof p=="function"||p===r||p===n||p===i||p===l||p===u||typeof p=="object"&&p!==null&&(p.$$typeof===d||p.$$typeof===c||p.$$typeof===o||p.$$typeof===a||p.$$typeof===s||p.$$typeof===f||p.getModuleId!==void 0)},mi.typeOf=g,mi}var u7;function T2e(){return u7||(u7=1,C3.exports=P2e()),C3.exports}var Pve=T2e();function up(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Tve(e){if(G.isValidElement(e)||Pve.isValidElementType(e)||!up(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Tve(e[r])}),t}function ra(e,t,r={clone:!0}){const i=r.clone?{...e}:e;return up(e)&&up(t)&&Object.keys(t).forEach(n=>{G.isValidElement(t[n])||Pve.isValidElementType(t[n])?i[n]=t[n]:up(t[n])&&Object.prototype.hasOwnProperty.call(e,n)&&up(e[n])?i[n]=ra(e[n],t[n],r):r.clone?i[n]=up(t[n])?Tve(t[n]):t[n]:i[n]=t[n]}),i}const A2e=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,i)=>r.val-i.val),t.reduce((r,i)=>({...r,[i.key]:i.val}),{})};function O2e(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:i=5,...n}=e,a=A2e(t),o=Object.keys(a);function s(h){return`@media (min-width:${typeof t[h]=="number"?t[h]:h}${r})`}function l(h){return`@media (max-width:${(typeof t[h]=="number"?t[h]:h)-i/100}${r})`}function u(h,f){const g=o.indexOf(f);return`@media (min-width:${typeof t[h]=="number"?t[h]:h}${r}) and (max-width:${(g!==-1&&typeof t[o[g]]=="number"?t[o[g]]:f)-i/100}${r})`}function c(h){return o.indexOf(h)+1<o.length?u(h,o[o.indexOf(h)+1]):s(h)}function d(h){const f=o.indexOf(h);return f===0?s(o[1]):f===o.length-1?l(o[f]):u(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:o,values:a,up:s,down:l,between:u,only:c,not:d,unit:r,...n}}function R2e(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(i=>i.startsWith("@container")).sort((i,n)=>{var o,s;const a=/min-width:\s*([0-9.]+)/;return+(((o=i.match(a))==null?void 0:o[1])||0)-+(((s=n.match(a))==null?void 0:s[1])||0)});return r.length?r.reduce((i,n)=>{const a=t[n];return delete i[n],i[n]=a,i},{...t}):t}function D2e(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function I2e(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,i,n]=r,a=Number.isNaN(+i)?i||0:+i;return e.containerQueries(n).up(a)}function j2e(e){const t=(a,o)=>a.replace("@media",o?`@container ${o}`:"@container");function r(a,o){a.up=(...s)=>t(e.breakpoints.up(...s),o),a.down=(...s)=>t(e.breakpoints.down(...s),o),a.between=(...s)=>t(e.breakpoints.between(...s),o),a.only=(...s)=>t(e.breakpoints.only(...s),o),a.not=(...s)=>{const l=t(e.breakpoints.not(...s),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const i={},n=a=>(r(i,a),i);return r(n),{...e,containerQueries:n}}const z2e={borderRadius:4};function lE(e,t){return t?ra(e,t,{clone:!1}):e}const m2={xs:0,sm:600,md:900,lg:1200,xl:1536},c7={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${m2[e]}px)`},B2e={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:m2[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function Ef(e,t,r){const i=e.theme||{};if(Array.isArray(t)){const a=i.breakpoints||c7;return t.reduce((o,s,l)=>(o[a.up(a.keys[l])]=r(t[l]),o),{})}if(typeof t=="object"){const a=i.breakpoints||c7;return Object.keys(t).reduce((o,s)=>{if(D2e(a.keys,s)){const l=I2e(i.containerQueries?i:B2e,s);l&&(o[l]=r(t[s],s))}else if(Object.keys(a.values||m2).includes(s)){const l=a.up(s);o[l]=r(t[s],s)}else{const l=s;o[l]=t[l]}return o},{})}return r(t)}function Ave(e={}){var r;return((r=e.keys)==null?void 0:r.reduce((i,n)=>{const a=e.up(n);return i[a]={},i},{}))||{}}function Ove(e,t){return e.reduce((r,i)=>{const n=r[i];return(!n||Object.keys(n).length===0)&&delete r[i],r},t)}function L2e(e,...t){const r=Ave(e),i=[r,...t].reduce((n,a)=>ra(n,a),{});return Ove(Object.keys(r),i)}function F2e(e,t){if(typeof e!="object")return{};const r={},i=Object.keys(t);return Array.isArray(e)?i.forEach((n,a)=>{a<e.length&&(r[n]=!0)}):i.forEach(n=>{e[n]!=null&&(r[n]=!0)}),r}function E3({values:e,breakpoints:t,base:r}){const i=r||F2e(e,t),n=Object.keys(i);if(n.length===0)return e;let a;return n.reduce((o,s,l)=>(Array.isArray(e)?(o[s]=e[l]!=null?e[l]:e[a],a=l):typeof e=="object"?(o[s]=e[s]!=null?e[s]:e[a],a=s):o[s]=e,o),{})}function bt(e){if(typeof e!="string")throw new Error(Vm(7));return e.charAt(0).toUpperCase()+e.slice(1)}function g2(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const i=`vars.${t}`.split(".").reduce((n,a)=>n&&n[a]?n[a]:null,e);if(i!=null)return i}return t.split(".").reduce((i,n)=>i&&i[n]!=null?i[n]:null,e)}function DR(e,t,r,i=r){let n;return typeof e=="function"?n=e(r):Array.isArray(e)?n=e[r]||i:n=g2(e,r)||i,t&&(n=t(n,i,e)),n}function fn(e){const{prop:t,cssProperty:r=e.prop,themeKey:i,transform:n}=e,a=o=>{if(o[t]==null)return null;const s=o[t],l=o.theme,u=g2(l,i)||{};return Ef(o,s,d=>{let h=DR(u,n,d);return d===h&&typeof d=="string"&&(h=DR(u,n,`${t}${d==="default"?"":bt(d)}`,d)),r===!1?h:{[r]:h}})};return a.propTypes={},a.filterProps=[t],a}function N2e(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const U2e={m:"margin",p:"padding"},V2e={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},d7={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},k2e=N2e(e=>{if(e.length>2)if(d7[e])e=d7[e];else return[e];const[t,r]=e.split(""),i=U2e[t],n=V2e[r]||"";return Array.isArray(n)?n.map(a=>i+a):[i+n]}),C8=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],E8=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...C8,...E8];function XM(e,t,r,i){const n=g2(e,t,!0)??r;return typeof n=="number"||typeof n=="string"?a=>typeof a=="string"?a:typeof n=="string"?n.startsWith("var(")&&a===0?0:n.startsWith("var(")&&a===1?n:`calc(${a} * ${n})`:n*a:Array.isArray(n)?a=>{if(typeof a=="string")return a;const o=Math.abs(a),s=n[o];return a>=0?s:typeof s=="number"?-s:typeof s=="string"&&s.startsWith("var(")?`calc(-1 * ${s})`:`-${s}`}:typeof n=="function"?n:()=>{}}function v2(e){return XM(e,"spacing",8)}function rb(e,t){return typeof t=="string"||t==null?t:e(t)}function q2e(e,t){return r=>e.reduce((i,n)=>(i[n]=rb(t,r),i),{})}function W2e(e,t,r,i){if(!t.includes(r))return null;const n=k2e(r),a=q2e(n,i),o=e[r];return Ef(e,o,a)}function Rve(e,t){const r=v2(e.theme);return Object.keys(e).map(i=>W2e(e,t,i,r)).reduce(lE,{})}function Gi(e){return Rve(e,C8)}Gi.propTypes={};Gi.filterProps=C8;function Hi(e){return Rve(e,E8)}Hi.propTypes={};Hi.filterProps=E8;function Dve(e=8,t=v2({spacing:e})){if(e.mui)return e;const r=(...i)=>(i.length===0?[1]:i).map(a=>{const o=t(a);return typeof o=="number"?`${o}px`:o}).join(" ");return r.mui=!0,r}function y2(...e){const t=e.reduce((i,n)=>(n.filterProps.forEach(a=>{i[a]=n}),i),{}),r=i=>Object.keys(i).reduce((n,a)=>t[a]?lE(n,t[a](i)):n,{});return r.propTypes={},r.filterProps=e.reduce((i,n)=>i.concat(n.filterProps),[]),r}function Ls(e){return typeof e!="number"?e:`${e}px solid`}function Js(e,t){return fn({prop:e,themeKey:"borders",transform:t})}const G2e=Js("border",Ls),H2e=Js("borderTop",Ls),$2e=Js("borderRight",Ls),X2e=Js("borderBottom",Ls),Y2e=Js("borderLeft",Ls),K2e=Js("borderColor"),Q2e=Js("borderTopColor"),J2e=Js("borderRightColor"),Z2e=Js("borderBottomColor"),eIe=Js("borderLeftColor"),tIe=Js("outline",Ls),rIe=Js("outlineColor"),b2=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=XM(e.theme,"shape.borderRadius",4),r=i=>({borderRadius:rb(t,i)});return Ef(e,e.borderRadius,r)}return null};b2.propTypes={};b2.filterProps=["borderRadius"];y2(G2e,H2e,$2e,X2e,Y2e,K2e,Q2e,J2e,Z2e,eIe,b2,tIe,rIe);const _2=e=>{if(e.gap!==void 0&&e.gap!==null){const t=XM(e.theme,"spacing",8),r=i=>({gap:rb(t,i)});return Ef(e,e.gap,r)}return null};_2.propTypes={};_2.filterProps=["gap"];const w2=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=XM(e.theme,"spacing",8),r=i=>({columnGap:rb(t,i)});return Ef(e,e.columnGap,r)}return null};w2.propTypes={};w2.filterProps=["columnGap"];const x2=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=XM(e.theme,"spacing",8),r=i=>({rowGap:rb(t,i)});return Ef(e,e.rowGap,r)}return null};x2.propTypes={};x2.filterProps=["rowGap"];const iIe=fn({prop:"gridColumn"}),nIe=fn({prop:"gridRow"}),aIe=fn({prop:"gridAutoFlow"}),oIe=fn({prop:"gridAutoColumns"}),sIe=fn({prop:"gridAutoRows"}),lIe=fn({prop:"gridTemplateColumns"}),uIe=fn({prop:"gridTemplateRows"}),cIe=fn({prop:"gridTemplateAreas"}),dIe=fn({prop:"gridArea"});y2(_2,w2,x2,iIe,nIe,aIe,oIe,sIe,lIe,uIe,cIe,dIe);function s_(e,t){return t==="grey"?t:e}const hIe=fn({prop:"color",themeKey:"palette",transform:s_}),fIe=fn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:s_}),pIe=fn({prop:"backgroundColor",themeKey:"palette",transform:s_});y2(hIe,fIe,pIe);function Zo(e){return e<=1&&e!==0?`${e*100}%`:e}const mIe=fn({prop:"width",transform:Zo}),M8=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var n,a,o,s,l;const i=((o=(a=(n=e.theme)==null?void 0:n.breakpoints)==null?void 0:a.values)==null?void 0:o[r])||m2[r];return i?((l=(s=e.theme)==null?void 0:s.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Zo(r)}};return Ef(e,e.maxWidth,t)}return null};M8.filterProps=["maxWidth"];const gIe=fn({prop:"minWidth",transform:Zo}),vIe=fn({prop:"height",transform:Zo}),yIe=fn({prop:"maxHeight",transform:Zo}),bIe=fn({prop:"minHeight",transform:Zo});fn({prop:"size",cssProperty:"width",transform:Zo});fn({prop:"size",cssProperty:"height",transform:Zo});const _Ie=fn({prop:"boxSizing"});y2(mIe,M8,gIe,vIe,yIe,bIe,_Ie);const YM={border:{themeKey:"borders",transform:Ls},borderTop:{themeKey:"borders",transform:Ls},borderRight:{themeKey:"borders",transform:Ls},borderBottom:{themeKey:"borders",transform:Ls},borderLeft:{themeKey:"borders",transform:Ls},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ls},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:b2},color:{themeKey:"palette",transform:s_},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:s_},backgroundColor:{themeKey:"palette",transform:s_},p:{style:Hi},pt:{style:Hi},pr:{style:Hi},pb:{style:Hi},pl:{style:Hi},px:{style:Hi},py:{style:Hi},padding:{style:Hi},paddingTop:{style:Hi},paddingRight:{style:Hi},paddingBottom:{style:Hi},paddingLeft:{style:Hi},paddingX:{style:Hi},paddingY:{style:Hi},paddingInline:{style:Hi},paddingInlineStart:{style:Hi},paddingInlineEnd:{style:Hi},paddingBlock:{style:Hi},paddingBlockStart:{style:Hi},paddingBlockEnd:{style:Hi},m:{style:Gi},mt:{style:Gi},mr:{style:Gi},mb:{style:Gi},ml:{style:Gi},mx:{style:Gi},my:{style:Gi},margin:{style:Gi},marginTop:{style:Gi},marginRight:{style:Gi},marginBottom:{style:Gi},marginLeft:{style:Gi},marginX:{style:Gi},marginY:{style:Gi},marginInline:{style:Gi},marginInlineStart:{style:Gi},marginInlineEnd:{style:Gi},marginBlock:{style:Gi},marginBlockStart:{style:Gi},marginBlockEnd:{style:Gi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:_2},rowGap:{style:x2},columnGap:{style:w2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Zo},maxWidth:{style:M8},minWidth:{transform:Zo},height:{transform:Zo},maxHeight:{transform:Zo},minHeight:{transform:Zo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function wIe(...e){const t=e.reduce((i,n)=>i.concat(Object.keys(n)),[]),r=new Set(t);return e.every(i=>r.size===Object.keys(i).length)}function xIe(e,t){return typeof e=="function"?e(t):e}function SIe(){function e(r,i,n,a){const o={[r]:i,theme:n},s=a[r];if(!s)return{[r]:i};const{cssProperty:l=r,themeKey:u,transform:c,style:d}=s;if(i==null)return null;if(u==="typography"&&i==="inherit")return{[r]:i};const h=g2(n,u)||{};return d?d(o):Ef(o,i,g=>{let p=DR(h,c,g);return g===p&&typeof g=="string"&&(p=DR(h,c,`${r}${g==="default"?"":bt(g)}`,g)),l===!1?p:{[l]:p}})}function t(r){const{sx:i,theme:n={}}=r||{};if(!i)return null;const a=n.unstable_sxConfig??YM;function o(s){let l=s;if(typeof s=="function")l=s(n);else if(typeof s!="object")return s;if(!l)return null;const u=Ave(n.breakpoints),c=Object.keys(u);let d=u;return Object.keys(l).forEach(h=>{const f=xIe(l[h],n);if(f!=null)if(typeof f=="object")if(a[h])d=lE(d,e(h,f,n,a));else{const g=Ef({theme:n},f,p=>({[h]:p}));wIe(g,f)?d[h]=t({sx:f,theme:n}):d=lE(d,g)}else d=lE(d,e(h,f,n,a))}),R2e(n,Ove(c,d))}return Array.isArray(i)?i.map(o):o(i)}return t}const mv=SIe();mv.filterProps=["sx"];function CIe(e,t){var i;const r=this;if(r.vars){if(!((i=r.colorSchemes)!=null&&i[e])||typeof r.getColorSchemeSelector!="function")return{};let n=r.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return r.palette.mode===e?t:{}}function lw(e={},...t){const{breakpoints:r={},palette:i={},spacing:n,shape:a={},...o}=e,s=O2e(r),l=Dve(n);let u=ra({breakpoints:s,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:l,shape:{...z2e,...a}},o);return u=j2e(u),u.applyStyles=CIe,u=t.reduce((c,d)=>ra(c,d),u),u.unstable_sxConfig={...YM,...o==null?void 0:o.unstable_sxConfig},u.unstable_sx=function(d){return mv({sx:d,theme:this})},u}function EIe(e){return Object.keys(e).length===0}function P8(e=null){const t=G.useContext($M);return!t||EIe(t)?e:t}const MIe=lw();function KM(e=MIe){return P8(e)}function PIe({styles:e,themeId:t,defaultTheme:r={}}){const i=KM(r),n=typeof e=="function"?e(t&&i[t]||i):e;return V.jsx(Eve,{styles:n})}const TIe=e=>{var i;const t={systemProps:{},otherProps:{}},r=((i=e==null?void 0:e.theme)==null?void 0:i.unstable_sxConfig)??YM;return Object.keys(e).forEach(n=>{r[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function S2(e){const{sx:t,...r}=e,{systemProps:i,otherProps:n}=TIe(r);let a;return Array.isArray(t)?a=[i,...t]:typeof t=="function"?a=(...o)=>{const s=t(...o);return up(s)?{...i,...s}:i}:a={...i,...t},{...n,sx:a}}const h7=e=>e,AIe=()=>{let e=h7;return{configure(t){e=t},generate(t){return e(t)},reset(){e=h7}}},Ive=AIe();function jve(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=jve(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function At(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=jve(e))&&(i&&(i+=" "),i+=t);return i}function OIe(e={}){const{themeId:t,defaultTheme:r,defaultClassName:i="MuiBox-root",generateClassName:n}=e,a=Mve("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(mv);return G.forwardRef(function(l,u){const c=KM(r),{className:d,component:h="div",...f}=S2(l);return V.jsx(a,{as:h,ref:u,className:At(d,n?n(i):i),theme:t&&c[t]||c,...f})})}const RIe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function yr(e,t,r="Mui"){const i=RIe[t];return i?`${r}-${i}`:`${Ive.generate(e)}-${t}`}function Sr(e,t,r="Mui"){const i={};return t.forEach(n=>{i[n]=yr(e,n,r)}),i}function zve(e){const{variants:t,...r}=e,i={variants:t,style:s7(r),isProcessed:!0};return i.style===r||t&&t.forEach(n=>{typeof n.style!="function"&&(n.style=s7(n.style))}),i}const DIe=lw();function M3(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function IIe(e){return e?(t,r)=>r[e]:null}function jIe(e,t,r){e.theme=BIe(e.theme)?r:e.theme[t]||e.theme}function kO(e,t){const r=typeof t=="function"?t(e):t;if(Array.isArray(r))return r.flatMap(i=>kO(e,i));if(Array.isArray(r==null?void 0:r.variants)){let i;if(r.isProcessed)i=r.style;else{const{variants:n,...a}=r;i=a}return Bve(e,r.variants,[i])}return r!=null&&r.isProcessed?r.style:r}function Bve(e,t,r=[]){var n;let i;e:for(let a=0;a<t.length;a+=1){const o=t[a];if(typeof o.props=="function"){if(i??(i={...e,...e.ownerState,ownerState:e.ownerState}),!o.props(i))continue}else for(const s in o.props)if(e[s]!==o.props[s]&&((n=e.ownerState)==null?void 0:n[s])!==o.props[s])continue e;typeof o.style=="function"?(i??(i={...e,...e.ownerState,ownerState:e.ownerState}),r.push(o.style(i))):r.push(o.style)}return r}function Lve(e={}){const{themeId:t,defaultTheme:r=DIe,rootShouldForwardProp:i=M3,slotShouldForwardProp:n=M3}=e;function a(s){jIe(s,t,r)}return(s,l={})=>{M2e(s,S=>S.filter(C=>C!==mv));const{name:u,slot:c,skipVariantsResolver:d,skipSx:h,overridesResolver:f=IIe(FIe(c)),...g}=l,p=d!==void 0?d:c&&c!=="Root"&&c!=="root"||!1,m=h||!1;let y=M3;c==="Root"||c==="root"?y=i:c?y=n:LIe(s)&&(y=void 0);const b=Mve(s,{shouldForwardProp:y,label:zIe(),...g}),w=S=>{if(typeof S=="function"&&S.__emotion_real!==S)return function(T){return kO(T,S)};if(up(S)){const C=zve(S);return C.variants?function(M){return kO(M,C)}:C.style}return S},x=(...S)=>{const C=[],T=S.map(w),M=[];if(C.push(a),u&&f&&M.push(function(j){var $,X;const I=(X=($=j.theme.components)==null?void 0:$[u])==null?void 0:X.styleOverrides;if(!I)return null;const q={};for(const N in I)q[N]=kO(j,I[N]);return f(j,q)}),u&&!p&&M.push(function(j){var q,$;const D=j.theme,I=($=(q=D==null?void 0:D.components)==null?void 0:q[u])==null?void 0:$.variants;return I?Bve(j,I):null}),m||M.push(mv),Array.isArray(T[0])){const O=T.shift(),j=new Array(C.length).fill(""),D=new Array(M.length).fill("");let I;I=[...j,...O,...D],I.raw=[...j,...O.raw,...D],C.unshift(I)}const A=[...C,...T,...M],P=b(...A);return s.muiName&&(P.muiName=s.muiName),P};return b.withConfig&&(x.withConfig=b.withConfig),x}}function zIe(e,t){return void 0}function BIe(e){for(const t in e)return!1;return!0}function LIe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function FIe(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const T8=Lve();function KE(e,t){const r={...t};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const n=i;if(n==="components"||n==="slots")r[n]={...e[n],...r[n]};else if(n==="componentsProps"||n==="slotProps"){const a=e[n],o=t[n];if(!o)r[n]=a||{};else if(!a)r[n]=o;else{r[n]={...o};for(const s in a)if(Object.prototype.hasOwnProperty.call(a,s)){const l=s;r[n][l]=KE(a[l],o[l])}}}else r[n]===void 0&&(r[n]=e[n])}return r}function Fve(e){const{theme:t,name:r,props:i}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?i:KE(t.components[r].defaultProps,i)}function A8({props:e,name:t,defaultTheme:r,themeId:i}){let n=KM(r);return i&&(n=n[i]||n),Fve({theme:n,name:t,props:e})}const os=typeof window<"u"?G.useLayoutEffect:G.useEffect;function NIe(e,t,r,i,n){const[a,o]=G.useState(()=>n&&r?r(e).matches:i?i(e).matches:t);return os(()=>{if(!r)return;const s=r(e),l=()=>{o(s.matches)};return l(),s.addEventListener("change",l),()=>{s.removeEventListener("change",l)}},[e,r]),a}const UIe={...TR},Nve=UIe.useSyncExternalStore;function VIe(e,t,r,i,n){const a=G.useCallback(()=>t,[t]),o=G.useMemo(()=>{if(n&&r)return()=>r(e).matches;if(i!==null){const{matches:c}=i(e);return()=>c}return a},[a,e,i,n,r]),[s,l]=G.useMemo(()=>{if(r===null)return[a,()=>()=>{}];const c=r(e);return[()=>c.matches,d=>(c.addEventListener("change",d),()=>{c.removeEventListener("change",d)})]},[a,r,e]);return Nve(l,s,o)}function Uve(e={}){const{themeId:t}=e;return function(i,n={}){let a=P8();a&&t&&(a=a[t]||a);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:s=!1,matchMedia:l=o?window.matchMedia:null,ssrMatchMedia:u=null,noSsr:c=!1}=Fve({name:"MuiUseMediaQuery",props:n,theme:a});let d=typeof i=="function"?i(a):i;return d=d.replace(/^@media( ?)/m,""),(Nve!==void 0?VIe:NIe)(d,s,l,u,c)}}Uve();function kIe(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function O8(e,t=0,r=1){return kIe(e,t,r)}function qIe(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(i=>i+i)),r?`rgb${r.length===4?"a":""}(${r.map((i,n)=>n<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function gv(e){if(e.type)return e;if(e.charAt(0)==="#")return gv(qIe(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(Vm(9,e));let i=e.substring(t+1,e.length-1),n;if(r==="color"){if(i=i.split(" "),n=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(n))throw new Error(Vm(10,n))}else i=i.split(",");return i=i.map(a=>parseFloat(a)),{type:r,values:i,colorSpace:n}}const WIe=e=>{const t=gv(e);return t.values.slice(0,3).map((r,i)=>t.type.includes("hsl")&&i!==0?`${r}%`:r).join(" ")},qC=(e,t)=>{try{return WIe(e)}catch{return e}};function C2(e){const{type:t,colorSpace:r}=e;let{values:i}=e;return t.includes("rgb")?i=i.map((n,a)=>a<3?parseInt(n,10):n):t.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.includes("color")?i=`${r} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function Vve(e){e=gv(e);const{values:t}=e,r=t[0],i=t[1]/100,n=t[2]/100,a=i*Math.min(n,1-n),o=(u,c=(u+r/30)%12)=>n-a*Math.max(Math.min(c-3,9-c,1),-1);let s="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(s+="a",l.push(t[3])),C2({type:s,values:l})}function $5(e){e=gv(e);let t=e.type==="hsl"||e.type==="hsla"?gv(Vve(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function GIe(e,t){const r=$5(e),i=$5(t);return(Math.max(r,i)+.05)/(Math.min(r,i)+.05)}function Si(e,t){return e=gv(e),t=O8(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,C2(e)}function VT(e,t,r){try{return Si(e,t)}catch{return e}}function O_(e,t){if(e=gv(e),t=O8(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return C2(e)}function bi(e,t,r){try{return O_(e,t)}catch{return e}}function R_(e,t){if(e=gv(e),t=O8(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return C2(e)}function _i(e,t,r){try{return R_(e,t)}catch{return e}}function HIe(e,t=.15){return $5(e)>.5?O_(e,t):R_(e,t)}function kT(e,t,r){try{return HIe(e,t)}catch{return e}}function f7(...e){return e.reduce((t,r)=>r==null?t:function(...n){t.apply(this,n),r.apply(this,n)},()=>{})}function QM(e,t=166){let r;function i(...n){const a=()=>{e.apply(this,n)};clearTimeout(r),r=setTimeout(a,t)}return i.clear=()=>{clearTimeout(r)},i}function uE(e,t){var r,i,n;return G.isValidElement(e)&&t.indexOf(e.type.muiName??((n=(i=(r=e.type)==null?void 0:r._payload)==null?void 0:i.value)==null?void 0:n.muiName))!==-1}function Bo(e){return e&&e.ownerDocument||document}function ss(e){return Bo(e).defaultView||window}function X5(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let p7=0;function $Ie(e){const[t,r]=G.useState(e),i=e||t;return G.useEffect(()=>{t==null&&(p7+=1,r(`mui-${p7}`))},[t]),i}const XIe={...TR},m7=XIe.useId;function JM(e){if(m7!==void 0){const t=m7();return e??t}return $Ie(e)}function Y5({controlled:e,default:t,name:r,state:i="value"}){const{current:n}=G.useRef(e!==void 0),[a,o]=G.useState(t),s=n?e:a,l=G.useCallback(u=>{n||o(u)},[]);return[s,l]}function Vs(e){const t=G.useRef(e);return os(()=>{t.current=e}),G.useRef((...r)=>(0,t.current)(...r)).current}function en(...e){return G.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{X5(r,t)})},e)}const g7={};function kve(e,t){const r=G.useRef(g7);return r.current===g7&&(r.current=e(t)),r}const YIe=[];function KIe(e){G.useEffect(e,YIe)}class E2{constructor(){ey(this,"currentId",null);ey(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});ey(this,"disposeEffect",()=>this.clear)}static create(){return new E2}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function O0(){const e=kve(E2.create).current;return KIe(e.disposeEffect),e}function IR(e){try{return e.matches(":focus-visible")}catch{}return!1}function qve(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function br(e,t,r=void 0){const i={};for(const n in e){const a=e[n];let o="",s=!0;for(let l=0;l<a.length;l+=1){const u=a[l];u&&(o+=(s===!0?"":" ")+t(u),s=!1,r&&r[u]&&(o+=" "+r[u]))}i[n]=o}return i}function QIe(e){return typeof e=="string"}function Wve(e,t,r){return e===void 0||QIe(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function Gve(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&typeof e[i]=="function"&&!t.includes(i)).forEach(i=>{r[i]=e[i]}),r}function v7(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function Hve(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:i,externalForwardedProps:n,className:a}=e;if(!t){const f=At(r==null?void 0:r.className,a,n==null?void 0:n.className,i==null?void 0:i.className),g={...r==null?void 0:r.style,...n==null?void 0:n.style,...i==null?void 0:i.style},p={...r,...n,...i};return f.length>0&&(p.className=f),Object.keys(g).length>0&&(p.style=g),{props:p,internalRef:void 0}}const o=Gve({...n,...i}),s=v7(i),l=v7(n),u=t(o),c=At(u==null?void 0:u.className,r==null?void 0:r.className,a,n==null?void 0:n.className,i==null?void 0:i.className),d={...u==null?void 0:u.style,...r==null?void 0:r.style,...n==null?void 0:n.style,...i==null?void 0:i.style},h={...u,...r,...l,...s};return c.length>0&&(h.className=c),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:u.ref}}function $ve(e,t,r){return typeof e=="function"?e(t,r):e}function D_(e){var d;const{elementType:t,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:n=!1,...a}=e,o=n?{}:$ve(r,i),{props:s,internalRef:l}=Hve({...a,externalSlotProps:o}),u=en(l,o==null?void 0:o.ref,(d=e.additionalProps)==null?void 0:d.ref);return Wve(t,{...s,ref:u},i)}function yb(e){var t;return parseInt(G.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}const Xve=G.createContext(null);function R8(){return G.useContext(Xve)}const JIe=typeof Symbol=="function"&&Symbol.for,ZIe=JIe?Symbol.for("mui.nested"):"__THEME_NESTED__";function eje(e,t){return typeof t=="function"?t(e):{...e,...t}}function tje(e){const{children:t,theme:r}=e,i=R8(),n=G.useMemo(()=>{const a=i===null?{...r}:eje(i,r);return a!=null&&(a[ZIe]=i!==null),a},[r,i]);return V.jsx(Xve.Provider,{value:n,children:t})}const Yve=G.createContext();function rje({value:e,...t}){return V.jsx(Yve.Provider,{value:e??!0,...t})}const bb=()=>G.useContext(Yve)??!1,Kve=G.createContext(void 0);function ije({value:e,children:t}){return V.jsx(Kve.Provider,{value:e,children:t})}function nje(e){const{theme:t,name:r,props:i}=e;if(!t||!t.components||!t.components[r])return i;const n=t.components[r];return n.defaultProps?KE(n.defaultProps,i):!n.styleOverrides&&!n.variants?KE(n,i):i}function aje({props:e,name:t}){const r=G.useContext(Kve);return nje({props:e,name:t,theme:{components:r}})}const y7={};function b7(e,t,r,i=!1){return G.useMemo(()=>{const n=e&&t[e]||t;if(typeof r=="function"){const a=r(n),o=e?{...t,[e]:a}:a;return i?()=>o:o}return e?{...t,[e]:r}:{...t,...r}},[e,t,r,i])}function Qve(e){const{children:t,theme:r,themeId:i}=e,n=P8(y7),a=R8()||y7,o=b7(i,n,r),s=b7(i,a,r,!0),l=(i?o[i]:o).direction==="rtl";return V.jsx(tje,{theme:s,children:V.jsx($M.Provider,{value:o,children:V.jsx(rje,{value:l,children:V.jsx(ije,{value:i?o[i].components:o.components,children:t})})})})}const _7={theme:void 0};function oje(e){let t,r;return function(n){let a=t;return(a===void 0||n.theme!==r)&&(_7.theme=n.theme,a=zve(e(_7)),t=a,r=n.theme),a}}const D8="mode",I8="color-scheme",sje="data-color-scheme";function lje(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:i="dark",modeStorageKey:n=D8,colorSchemeStorageKey:a=I8,attribute:o=sje,colorSchemeNode:s="document.documentElement",nonce:l}=e||{};let u="",c=o;if(o==="class"&&(c=".%s"),o==="data"&&(c="[data-%s]"),c.startsWith(".")){const h=c.substring(1);u+=`${s}.classList.remove('${h}'.replace('%s', light), '${h}'.replace('%s', dark));
      ${s}.classList.add('${h}'.replace('%s', colorScheme));`}const d=c.match(/\[([^\]]+)\]/);if(d){const[h,f]=d[1].split("=");f||(u+=`${s}.removeAttribute('${h}'.replace('%s', light));
      ${s}.removeAttribute('${h}'.replace('%s', dark));`),u+=`
      ${s}.setAttribute('${h}'.replace('%s', colorScheme), ${f?`${f}.replace('%s', colorScheme)`:'""'});`}else u+=`${s}.setAttribute('${c}', colorScheme);`;return V.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${n}') || '${t}';
  const dark = localStorage.getItem('${a}-dark') || '${i}';
  const light = localStorage.getItem('${a}-light') || '${r}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${u}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function uje(){}const cje=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(r){if(typeof window>"u")return;if(!t)return r;let i;try{i=t.localStorage.getItem(e)}catch{}return i||r},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return uje;const i=n=>{const a=n.newValue;n.key===e&&r(a)};return t.addEventListener("storage",i),()=>{t.removeEventListener("storage",i)}}});function P3(){}function w7(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Jve(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function dje(e){return Jve(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function hje(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:i,supportedColorSchemes:n=[],modeStorageKey:a=D8,colorSchemeStorageKey:o=I8,storageWindow:s=typeof window>"u"?void 0:window,storageManager:l=cje,noSsr:u=!1}=e,c=n.join(","),d=n.length>1,h=G.useMemo(()=>l==null?void 0:l({key:a,storageWindow:s}),[l,a,s]),f=G.useMemo(()=>l==null?void 0:l({key:`${o}-light`,storageWindow:s}),[l,o,s]),g=G.useMemo(()=>l==null?void 0:l({key:`${o}-dark`,storageWindow:s}),[l,o,s]),[p,m]=G.useState(()=>{const M=(h==null?void 0:h.get(t))||t,A=(f==null?void 0:f.get(r))||r,P=(g==null?void 0:g.get(i))||i;return{mode:M,systemMode:w7(M),lightColorScheme:A,darkColorScheme:P}}),[y,b]=G.useState(u||!d);G.useEffect(()=>{b(!0)},[]);const w=dje(p),x=G.useCallback(M=>{m(A=>{if(M===A.mode)return A;const P=M??t;return h==null||h.set(P),{...A,mode:P,systemMode:w7(P)}})},[h,t]),S=G.useCallback(M=>{M?typeof M=="string"?M&&!c.includes(M)?console.error(`\`${M}\` does not exist in \`theme.colorSchemes\`.`):m(A=>{const P={...A};return Jve(A,O=>{O==="light"&&(f==null||f.set(M),P.lightColorScheme=M),O==="dark"&&(g==null||g.set(M),P.darkColorScheme=M)}),P}):m(A=>{const P={...A},O=M.light===null?r:M.light,j=M.dark===null?i:M.dark;return O&&(c.includes(O)?(P.lightColorScheme=O,f==null||f.set(O)):console.error(`\`${O}\` does not exist in \`theme.colorSchemes\`.`)),j&&(c.includes(j)?(P.darkColorScheme=j,g==null||g.set(j)):console.error(`\`${j}\` does not exist in \`theme.colorSchemes\`.`)),P}):m(A=>(f==null||f.set(r),g==null||g.set(i),{...A,lightColorScheme:r,darkColorScheme:i}))},[c,f,g,r,i]),C=G.useCallback(M=>{p.mode==="system"&&m(A=>{const P=M!=null&&M.matches?"dark":"light";return A.systemMode===P?A:{...A,systemMode:P}})},[p.mode]),T=G.useRef(C);return T.current=C,G.useEffect(()=>{if(typeof window.matchMedia!="function"||!d)return;const M=(...P)=>T.current(...P),A=window.matchMedia("(prefers-color-scheme: dark)");return A.addListener(M),M(A),()=>{A.removeListener(M)}},[d]),G.useEffect(()=>{if(d){const M=(h==null?void 0:h.subscribe(O=>{(!O||["light","dark","system"].includes(O))&&x(O||t)}))||P3,A=(f==null?void 0:f.subscribe(O=>{(!O||c.match(O))&&S({light:O})}))||P3,P=(g==null?void 0:g.subscribe(O=>{(!O||c.match(O))&&S({dark:O})}))||P3;return()=>{M(),A(),P()}}},[S,x,c,t,s,d,h,f,g]),{...p,mode:y?p.mode:void 0,systemMode:y?p.systemMode:void 0,colorScheme:y?w:void 0,setMode:x,setColorScheme:S}}const fje="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function pje(e){const{themeId:t,theme:r={},modeStorageKey:i=D8,colorSchemeStorageKey:n=I8,disableTransitionOnChange:a=!1,defaultColorScheme:o,resolveTheme:s}=e,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},u=G.createContext(void 0),c=()=>G.useContext(u)||l,d={},h={};function f(y){var ne,K,B,U;const{children:b,theme:w,modeStorageKey:x=i,colorSchemeStorageKey:S=n,disableTransitionOnChange:C=a,storageManager:T,storageWindow:M=typeof window>"u"?void 0:window,documentNode:A=typeof document>"u"?void 0:document,colorSchemeNode:P=typeof document>"u"?void 0:document.documentElement,disableNestedContext:O=!1,disableStyleSheetGeneration:j=!1,defaultMode:D="system",forceThemeRerender:I=!1,noSsr:q}=y,$=G.useRef(!1),X=R8(),N=G.useContext(u),Q=!!N&&!O,F=G.useMemo(()=>w||(typeof r=="function"?r():r),[w]),L=F[t],Y=L||F,{colorSchemes:ae=d,components:re=h,cssVarPrefix:H}=Y,se=Object.keys(ae).filter(te=>!!ae[te]).join(","),le=G.useMemo(()=>se.split(","),[se]),ee=typeof o=="string"?o:o.light,J=typeof o=="string"?o:o.dark,oe=ae[ee]&&ae[J]?D:((K=(ne=ae[Y.defaultColorScheme])==null?void 0:ne.palette)==null?void 0:K.mode)||((B=Y.palette)==null?void 0:B.mode),{mode:me,setMode:be,systemMode:de,lightColorScheme:ge,darkColorScheme:ce,colorScheme:Ce,setColorScheme:Ee}=hje({supportedColorSchemes:le,defaultLightColorScheme:ee,defaultDarkColorScheme:J,modeStorageKey:x,colorSchemeStorageKey:S,defaultMode:oe,storageManager:T,storageWindow:M,noSsr:q});let Me=me,he=Ce;Q&&(Me=N.mode,he=N.colorScheme);let Ae=he||Y.defaultColorScheme;Y.vars&&!I&&(Ae=Y.defaultColorScheme);const De=G.useMemo(()=>{var Re;const te=((Re=Y.generateThemeVars)==null?void 0:Re.call(Y))||Y.vars,ve={...Y,components:re,colorSchemes:ae,cssVarPrefix:H,vars:te};if(typeof ve.generateSpacing=="function"&&(ve.spacing=ve.generateSpacing()),Ae){const Fe=ae[Ae];Fe&&typeof Fe=="object"&&Object.keys(Fe).forEach(et=>{Fe[et]&&typeof Fe[et]=="object"?ve[et]={...ve[et],...Fe[et]}:ve[et]=Fe[et]})}return s?s(ve):ve},[Y,Ae,re,ae,H]),Z=Y.colorSchemeSelector;os(()=>{if(he&&P&&Z&&Z!=="media"){const te=Z;let ve=Z;if(te==="class"&&(ve=".%s"),te==="data"&&(ve="[data-%s]"),te!=null&&te.startsWith("data-")&&!te.includes("%s")&&(ve=`[${te}="%s"]`),ve.startsWith("."))P.classList.remove(...le.map(Re=>ve.substring(1).replace("%s",Re))),P.classList.add(ve.substring(1).replace("%s",he));else{const Re=ve.replace("%s",he).match(/\[([^\]]+)\]/);if(Re){const[Fe,et]=Re[1].split("=");et||le.forEach(Ze=>{P.removeAttribute(Fe.replace(he,Ze))}),P.setAttribute(Fe,et?et.replace(/"|'/g,""):"")}else P.setAttribute(ve,he)}}},[he,Z,P,le]),G.useEffect(()=>{let te;if(C&&$.current&&A){const ve=A.createElement("style");ve.appendChild(A.createTextNode(fje)),A.head.appendChild(ve),window.getComputedStyle(A.body),te=setTimeout(()=>{A.head.removeChild(ve)},1)}return()=>{clearTimeout(te)}},[he,C,A]),G.useEffect(()=>($.current=!0,()=>{$.current=!1}),[]);const ie=G.useMemo(()=>({allColorSchemes:le,colorScheme:he,darkColorScheme:ce,lightColorScheme:ge,mode:Me,setColorScheme:Ee,setMode:be,systemMode:de}),[le,he,ce,ge,Me,Ee,be,de,De.colorSchemeSelector]);let Te=!0;(j||Y.cssVariables===!1||Q&&(X==null?void 0:X.cssVarPrefix)===H)&&(Te=!1);const Ue=V.jsxs(G.Fragment,{children:[V.jsx(Qve,{themeId:L?t:void 0,theme:De,children:b}),Te&&V.jsx(Eve,{styles:((U=De.generateStyleSheets)==null?void 0:U.call(De))||[]})]});return Q?Ue:V.jsx(u.Provider,{value:ie,children:Ue})}const g=typeof o=="string"?o:o.light,p=typeof o=="string"?o:o.dark;return{CssVarsProvider:f,useColorScheme:c,getInitColorSchemeScript:y=>lje({colorSchemeStorageKey:n,defaultLightColorScheme:g,defaultDarkColorScheme:p,modeStorageKey:i,...y})}}function mje(e=""){function t(...i){if(!i.length)return"";const n=i[0];return typeof n=="string"&&!n.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${n}${t(...i.slice(1))})`:`, ${n}`}return(i,...n)=>`var(--${e?`${e}-`:""}${i}${t(...n)})`}const x7=(e,t,r,i=[])=>{let n=e;t.forEach((a,o)=>{o===t.length-1?Array.isArray(n)?n[Number(a)]=r:n&&typeof n=="object"&&(n[a]=r):n&&typeof n=="object"&&(n[a]||(n[a]=i.includes(a)?[]:{}),n=n[a])})},gje=(e,t,r)=>{function i(n,a=[],o=[]){Object.entries(n).forEach(([s,l])=>{(!r||r&&!r([...a,s]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?i(l,[...a,s],Array.isArray(l)?[...o,s]:o):t([...a,s],l,o))})}i(e)},vje=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>e.includes(i))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function T3(e,t){const{prefix:r,shouldSkipGeneratingVar:i}=t||{},n={},a={},o={};return gje(e,(s,l,u)=>{if((typeof l=="string"||typeof l=="number")&&(!i||!i(s,l))){const c=`--${r?`${r}-`:""}${s.join("-")}`,d=vje(s,l);Object.assign(n,{[c]:d}),x7(a,s,`var(${c})`,u),x7(o,s,`var(${c}, ${d})`,u)}},s=>s[0]==="vars"),{css:n,vars:a,varsWithDefaults:o}}function yje(e,t={}){const{getSelector:r=m,disableCssColorScheme:i,colorSchemeSelector:n}=t,{colorSchemes:a={},components:o,defaultColorScheme:s="light",...l}=e,{vars:u,css:c,varsWithDefaults:d}=T3(l,t);let h=d;const f={},{[s]:g,...p}=a;if(Object.entries(p||{}).forEach(([w,x])=>{const{vars:S,css:C,varsWithDefaults:T}=T3(x,t);h=ra(h,T),f[w]={css:C,vars:S}}),g){const{css:w,vars:x,varsWithDefaults:S}=T3(g,t);h=ra(h,S),f[s]={css:w,vars:x}}function m(w,x){var C,T;let S=n;if(n==="class"&&(S=".%s"),n==="data"&&(S="[data-%s]"),n!=null&&n.startsWith("data-")&&!n.includes("%s")&&(S=`[${n}="%s"]`),w){if(S==="media")return e.defaultColorScheme===w?":root":{[`@media (prefers-color-scheme: ${((T=(C=a[w])==null?void 0:C.palette)==null?void 0:T.mode)||w})`]:{":root":x}};if(S)return e.defaultColorScheme===w?`:root, ${S.replace("%s",String(w))}`:S.replace("%s",String(w))}return":root"}return{vars:h,generateThemeVars:()=>{let w={...u};return Object.entries(f).forEach(([,{vars:x}])=>{w=ra(w,x)}),w},generateStyleSheets:()=>{var M,A;const w=[],x=e.defaultColorScheme||"light";function S(P,O){Object.keys(O).length&&w.push(typeof P=="string"?{[P]:{...O}}:P)}S(r(void 0,{...c}),c);const{[x]:C,...T}=f;if(C){const{css:P}=C,O=(A=(M=a[x])==null?void 0:M.palette)==null?void 0:A.mode,j=!i&&O?{colorScheme:O,...P}:{...P};S(r(x,{...j}),j)}return Object.entries(T).forEach(([P,{css:O}])=>{var I,q;const j=(q=(I=a[P])==null?void 0:I.palette)==null?void 0:q.mode,D=!i&&j?{colorScheme:j,...O}:{...O};S(r(P,{...D}),D)}),w}}}function bje(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}const _je=lw(),wje=T8("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${bt(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),xje=e=>A8({props:e,name:"MuiContainer",defaultTheme:_je}),Sje=(e,t)=>{const r=l=>yr(t,l),{classes:i,fixed:n,disableGutters:a,maxWidth:o}=e,s={root:["root",o&&`maxWidth${bt(String(o))}`,n&&"fixed",a&&"disableGutters"]};return br(s,r,i)};function Cje(e={}){const{createStyledComponent:t=wje,useThemeProps:r=xje,componentName:i="MuiContainer"}=e,n=t(({theme:o,ownerState:s})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!s.disableGutters&&{paddingLeft:o.spacing(2),paddingRight:o.spacing(2),[o.breakpoints.up("sm")]:{paddingLeft:o.spacing(3),paddingRight:o.spacing(3)}}}),({theme:o,ownerState:s})=>s.fixed&&Object.keys(o.breakpoints.values).reduce((l,u)=>{const c=u,d=o.breakpoints.values[c];return d!==0&&(l[o.breakpoints.up(c)]={maxWidth:`${d}${o.breakpoints.unit}`}),l},{}),({theme:o,ownerState:s})=>({...s.maxWidth==="xs"&&{[o.breakpoints.up("xs")]:{maxWidth:Math.max(o.breakpoints.values.xs,444)}},...s.maxWidth&&s.maxWidth!=="xs"&&{[o.breakpoints.up(s.maxWidth)]:{maxWidth:`${o.breakpoints.values[s.maxWidth]}${o.breakpoints.unit}`}}}));return G.forwardRef(function(s,l){const u=r(s),{className:c,component:d="div",disableGutters:h=!1,fixed:f=!1,maxWidth:g="lg",classes:p,...m}=u,y={...u,component:d,disableGutters:h,fixed:f,maxWidth:g},b=Sje(y,i);return V.jsx(n,{as:d,ownerState:y,className:At(b.root,c),ref:l,...m})})}const Eje=(e,t)=>e.filter(r=>t.includes(r)),uw=(e,t,r)=>{const i=e.keys[0];Array.isArray(t)?t.forEach((n,a)=>{r((o,s)=>{a<=e.keys.length-1&&(a===0?Object.assign(o,s):o[e.up(e.keys[a])]=s)},n)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:Eje(e.keys,Object.keys(t))).forEach(a=>{if(e.keys.includes(a)){const o=t[a];o!==void 0&&r((s,l)=>{i===a?Object.assign(s,l):s[e.up(a)]=l},o)}}):(typeof t=="number"||typeof t=="string")&&r((n,a)=>{Object.assign(n,a)},t)};function jR(e){return`--Grid-${e}Spacing`}function M2(e){return`--Grid-parent-${e}Spacing`}const S7="--Grid-columns",l_="--Grid-parent-columns",Mje=({theme:e,ownerState:t})=>{const r={};return uw(e.breakpoints,t.size,(i,n)=>{let a={};n==="grow"&&(a={flexBasis:0,flexGrow:1,maxWidth:"100%"}),n==="auto"&&(a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof n=="number"&&(a={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${n} / var(${l_}) - (var(${l_}) - ${n}) * (var(${M2("column")}) / var(${l_})))`}),i(r,a)}),r},Pje=({theme:e,ownerState:t})=>{const r={};return uw(e.breakpoints,t.offset,(i,n)=>{let a={};n==="auto"&&(a={marginLeft:"auto"}),typeof n=="number"&&(a={marginLeft:n===0?"0px":`calc(100% * ${n} / var(${l_}) + var(${M2("column")}) * ${n} / var(${l_}))`}),i(r,a)}),r},Tje=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={[S7]:12};return uw(e.breakpoints,t.columns,(i,n)=>{const a=n??12;i(r,{[S7]:a,"> *":{[l_]:a}})}),r},Aje=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return uw(e.breakpoints,t.rowSpacing,(i,n)=>{var o;const a=typeof n=="string"?n:(o=e.spacing)==null?void 0:o.call(e,n);i(r,{[jR("row")]:a,"> *":{[M2("row")]:a}})}),r},Oje=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return uw(e.breakpoints,t.columnSpacing,(i,n)=>{var o;const a=typeof n=="string"?n:(o=e.spacing)==null?void 0:o.call(e,n);i(r,{[jR("column")]:a,"> *":{[M2("column")]:a}})}),r},Rje=({theme:e,ownerState:t})=>{if(!t.container)return{};const r={};return uw(e.breakpoints,t.direction,(i,n)=>{i(r,{flexDirection:n})}),r},Dje=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${jR("row")}) var(${jR("column")})`}}),Ije=e=>{const t=[];return Object.entries(e).forEach(([r,i])=>{i!==!1&&i!==void 0&&t.push(`grid-${r}-${String(i)}`)}),t},jje=(e,t="xs")=>{function r(i){return i===void 0?!1:typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"&&i>0}if(r(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const i=[];return Object.entries(e).forEach(([n,a])=>{r(a)&&i.push(`spacing-${n}-${String(a)}`)}),i}return[]},zje=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,r])=>`direction-${t}-${r}`):[`direction-xs-${String(e)}`];function Bje(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(r=>{e[r]!==void 0&&delete e[r]})}const Lje=lw(),Fje=T8("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function Nje(e){return A8({props:e,name:"MuiGrid",defaultTheme:Lje})}function Uje(e={}){const{createStyledComponent:t=Fje,useThemeProps:r=Nje,useTheme:i=KM,componentName:n="MuiGrid"}=e,a=(u,c)=>{const{container:d,direction:h,spacing:f,wrap:g,size:p}=u,m={root:["root",d&&"container",g!=="wrap"&&`wrap-xs-${String(g)}`,...zje(h),...Ije(p),...d?jje(f,c.breakpoints.keys[0]):[]]};return br(m,y=>yr(n,y),{})};function o(u,c,d=()=>!0){const h={};return u===null||(Array.isArray(u)?u.forEach((f,g)=>{f!==null&&d(f)&&c.keys[g]&&(h[c.keys[g]]=f)}):typeof u=="object"?Object.keys(u).forEach(f=>{const g=u[f];g!=null&&d(g)&&(h[f]=g)}):h[c.keys[0]]=u),h}const s=t(Tje,Oje,Aje,Mje,Rje,Dje,Pje),l=G.forwardRef(function(c,d){const h=i(),f=r(c),g=S2(f);Bje(g,h.breakpoints);const{className:p,children:m,columns:y=12,container:b=!1,component:w="div",direction:x="row",wrap:S="wrap",size:C={},offset:T={},spacing:M=0,rowSpacing:A=M,columnSpacing:P=M,unstable_level:O=0,...j}=g,D=o(C,h.breakpoints,L=>L!==!1),I=o(T,h.breakpoints),q=c.columns??(O?void 0:y),$=c.spacing??(O?void 0:M),X=c.rowSpacing??c.spacing??(O?void 0:A),N=c.columnSpacing??c.spacing??(O?void 0:P),Q={...g,level:O,columns:q,container:b,direction:x,wrap:S,spacing:$,rowSpacing:X,columnSpacing:N,size:D,offset:I},F=a(Q,h);return V.jsx(s,{ref:d,as:w,ownerState:Q,className:At(F.root,p),...j,children:G.Children.map(m,L=>{var Y;return G.isValidElement(L)&&uE(L,["Grid"])&&b&&L.props.container?G.cloneElement(L,{unstable_level:((Y=L.props)==null?void 0:Y.unstable_level)??O+1}):L})})});return l.muiName="Grid",l}const Vje=lw(),kje=T8("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function qje(e){return A8({props:e,name:"MuiStack",defaultTheme:Vje})}function Wje(e,t){const r=G.Children.toArray(e).filter(Boolean);return r.reduce((i,n,a)=>(i.push(n),a<r.length-1&&i.push(G.cloneElement(t,{key:`separator-${a}`})),i),[])}const Gje=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],Hje=({ownerState:e,theme:t})=>{let r={display:"flex",flexDirection:"column",...Ef({theme:t},E3({values:e.direction,breakpoints:t.breakpoints.values}),i=>({flexDirection:i}))};if(e.spacing){const i=v2(t),n=Object.keys(t.breakpoints.values).reduce((l,u)=>((typeof e.spacing=="object"&&e.spacing[u]!=null||typeof e.direction=="object"&&e.direction[u]!=null)&&(l[u]=!0),l),{}),a=E3({values:e.direction,base:n}),o=E3({values:e.spacing,base:n});typeof a=="object"&&Object.keys(a).forEach((l,u,c)=>{if(!a[l]){const h=u>0?a[c[u-1]]:"column";a[l]=h}}),r=ra(r,Ef({theme:t},o,(l,u)=>e.useFlexGap?{gap:rb(i,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Gje(u?a[u]:e.direction)}`]:rb(i,l)}}))}return r=L2e(t.breakpoints,r),r};function $je(e={}){const{createStyledComponent:t=kje,useThemeProps:r=qje,componentName:i="MuiStack"}=e,n=()=>br({root:["root"]},l=>yr(i,l),{}),a=t(Hje);return G.forwardRef(function(l,u){const c=r(l),d=S2(c),{component:h="div",direction:f="column",spacing:g=0,divider:p,children:m,className:y,useFlexGap:b=!1,...w}=d,x={direction:f,spacing:g,useFlexGap:b},S=n();return V.jsx(a,{as:h,ownerState:x,ref:u,className:At(S.root,y),...w,children:p?Wje(m,p):m})})}function Zve(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:HE.white,default:HE.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Xje=Zve();function eye(){return{text:{primary:HE.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:HE.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const C7=eye();function E7(e,t,r,i){const n=i.light||i,a=i.dark||i*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=R_(e.main,n):t==="dark"&&(e.dark=O_(e.main,a)))}function Yje(e="light"){return e==="dark"?{main:e1[200],light:e1[50],dark:e1[400]}:{main:e1[700],light:e1[400],dark:e1[800]}}function Kje(e="light"){return e==="dark"?{main:Zb[200],light:Zb[50],dark:Zb[400]}:{main:Zb[500],light:Zb[300],dark:Zb[700]}}function Qje(e="light"){return e==="dark"?{main:Jb[500],light:Jb[300],dark:Jb[700]}:{main:Jb[700],light:Jb[400],dark:Jb[800]}}function Jje(e="light"){return e==="dark"?{main:t1[400],light:t1[300],dark:t1[700]}:{main:t1[700],light:t1[500],dark:t1[900]}}function Zje(e="light"){return e==="dark"?{main:r1[400],light:r1[300],dark:r1[700]}:{main:r1[800],light:r1[500],dark:r1[900]}}function e3e(e="light"){return e==="dark"?{main:wx[400],light:wx[300],dark:wx[700]}:{main:"#ed6c02",light:wx[500],dark:wx[900]}}function j8(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:i=.2,...n}=e,a=e.primary||Yje(t),o=e.secondary||Kje(t),s=e.error||Qje(t),l=e.info||Jje(t),u=e.success||Zje(t),c=e.warning||e3e(t);function d(p){return GIe(p,C7.text.primary)>=r?C7.text.primary:Xje.text.primary}const h=({color:p,name:m,mainShade:y=500,lightShade:b=300,darkShade:w=700})=>{if(p={...p},!p.main&&p[y]&&(p.main=p[y]),!p.hasOwnProperty("main"))throw new Error(Vm(11,m?` (${m})`:"",y));if(typeof p.main!="string")throw new Error(Vm(12,m?` (${m})`:"",JSON.stringify(p.main)));return E7(p,"light",b,i),E7(p,"dark",w,i),p.contrastText||(p.contrastText=d(p.main)),p};let f;return t==="light"?f=Zve():t==="dark"&&(f=eye()),ra({common:{...HE},mode:t,primary:h({color:a,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:s,name:"error"}),warning:h({color:c,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:u,name:"success"}),grey:PDe,contrastThreshold:r,getContrastText:d,augmentColor:h,tonalOffset:i,...f},n)}function t3e(e){const t={};return Object.entries(e).forEach(i=>{const[n,a]=i;typeof a=="object"&&(t[n]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),t}function r3e(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function i3e(e){return Math.round(e*1e5)/1e5}const M7={textTransform:"uppercase"},P7='"Roboto", "Helvetica", "Arial", sans-serif';function tye(e,t){const{fontFamily:r=P7,fontSize:i=14,fontWeightLight:n=300,fontWeightRegular:a=400,fontWeightMedium:o=500,fontWeightBold:s=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...d}=typeof t=="function"?t(e):t,h=i/14,f=c||(m=>`${m/l*h}rem`),g=(m,y,b,w,x)=>({fontFamily:r,fontWeight:m,fontSize:f(y),lineHeight:b,...r===P7?{letterSpacing:`${i3e(w/y)}em`}:{},...x,...u}),p={h1:g(n,96,1.167,-1.5),h2:g(n,60,1.2,-.5),h3:g(a,48,1.167,0),h4:g(a,34,1.235,.25),h5:g(a,24,1.334,0),h6:g(o,20,1.6,.15),subtitle1:g(a,16,1.75,.15),subtitle2:g(o,14,1.57,.1),body1:g(a,16,1.5,.15),body2:g(a,14,1.43,.15),button:g(o,14,1.75,.4,M7),caption:g(a,12,1.66,.4),overline:g(a,12,2.66,1,M7),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ra({htmlFontSize:l,pxToRem:f,fontFamily:r,fontSize:i,fontWeightLight:n,fontWeightRegular:a,fontWeightMedium:o,fontWeightBold:s,...p},d,{clone:!1})}const n3e=.2,a3e=.14,o3e=.12;function ji(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${n3e})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${a3e})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${o3e})`].join(",")}const s3e=["none",ji(0,2,1,-1,0,1,1,0,0,1,3,0),ji(0,3,1,-2,0,2,2,0,0,1,5,0),ji(0,3,3,-2,0,3,4,0,0,1,8,0),ji(0,2,4,-1,0,4,5,0,0,1,10,0),ji(0,3,5,-1,0,5,8,0,0,1,14,0),ji(0,3,5,-1,0,6,10,0,0,1,18,0),ji(0,4,5,-2,0,7,10,1,0,2,16,1),ji(0,5,5,-3,0,8,10,1,0,3,14,2),ji(0,5,6,-3,0,9,12,1,0,3,16,2),ji(0,6,6,-3,0,10,14,1,0,4,18,3),ji(0,6,7,-4,0,11,15,1,0,4,20,3),ji(0,7,8,-4,0,12,17,2,0,5,22,4),ji(0,7,8,-4,0,13,19,2,0,5,24,4),ji(0,7,9,-4,0,14,21,2,0,5,26,4),ji(0,8,9,-5,0,15,22,2,0,6,28,5),ji(0,8,10,-5,0,16,24,2,0,6,30,5),ji(0,8,11,-5,0,17,26,2,0,6,32,5),ji(0,9,11,-5,0,18,28,2,0,7,34,6),ji(0,9,12,-6,0,19,29,2,0,7,36,6),ji(0,10,13,-6,0,20,31,3,0,8,38,7),ji(0,10,13,-6,0,21,33,3,0,8,40,7),ji(0,10,14,-6,0,22,35,3,0,8,42,7),ji(0,11,14,-7,0,23,36,3,0,9,44,8),ji(0,11,15,-7,0,24,38,3,0,9,46,8)],l3e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},rye={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function T7(e){return`${Math.round(e)}ms`}function u3e(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function c3e(e){const t={...l3e,...e.easing},r={...rye,...e.duration};return{getAutoHeightDuration:u3e,create:(n=["all"],a={})=>{const{duration:o=r.standard,easing:s=t.easeInOut,delay:l=0,...u}=a;return(Array.isArray(n)?n:[n]).map(c=>`${c} ${typeof o=="string"?o:T7(o)} ${s} ${typeof l=="string"?l:T7(l)}`).join(",")},...e,easing:t,duration:r}}const d3e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function h3e(e){return up(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function iye(e={}){const t={...e};function r(i){const n=Object.entries(i);for(let a=0;a<n.length;a++){const[o,s]=n[a];!h3e(s)||o.startsWith("unstable_")?delete i[o]:up(s)&&(i[o]={...s},r(i[o]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function K5(e={},...t){const{breakpoints:r,mixins:i={},spacing:n,palette:a={},transitions:o={},typography:s={},shape:l,...u}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Vm(20));const c=j8(a),d=lw(e);let h=ra(d,{mixins:r3e(d.breakpoints,i),palette:c,shadows:s3e.slice(),typography:tye(c,s),transitions:c3e(o),zIndex:{...d3e}});return h=ra(h,u),h=t.reduce((f,g)=>ra(f,g),h),h.unstable_sxConfig={...YM,...u==null?void 0:u.unstable_sxConfig},h.unstable_sx=function(g){return mv({sx:g,theme:this})},h.toRuntimeSource=iye,h}function Q5(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const f3e=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=Q5(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function nye(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function aye(e){return e==="dark"?f3e:[]}function p3e(e){const{palette:t={mode:"light"},opacity:r,overlays:i,...n}=e,a=j8(t);return{palette:a,opacity:{...nye(a.mode),...r},overlays:i||aye(a.mode),...n}}function m3e(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const g3e=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],v3e=e=>(t,r)=>{const i=e.rootSelector||":root",n=e.colorSchemeSelector;let a=n;if(n==="class"&&(a=".%s"),n==="data"&&(a="[data-%s]"),n!=null&&n.startsWith("data-")&&!n.includes("%s")&&(a=`[${n}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return g3e(e.cssVarPrefix).forEach(s=>{o[s]=r[s],delete r[s]}),a==="media"?{[i]:r,"@media (prefers-color-scheme: dark)":{[i]:o}}:a?{[a.replace("%s",t)]:o,[`${i}, ${a.replace("%s",t)}`]:r}:{[i]:{...r,...o}}}if(a&&a!=="media")return`${i}, ${a.replace("%s",String(t))}`}else if(t){if(a==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[i]:r}};if(a)return a.replace("%s",String(t))}return i};function y3e(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function st(e,t,r){!e[t]&&r&&(e[t]=r)}function WC(e){return typeof e!="string"||!e.startsWith("hsl")?e:Vve(e)}function Jp(e,t){`${t}Channel`in e||(e[`${t}Channel`]=qC(WC(e[t])))}function b3e(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Vf=e=>{try{return e()}catch{}},_3e=(e="mui")=>mje(e);function A3(e,t,r,i){if(!t)return;t=t===!0?{}:t;const n=i==="dark"?"dark":"light";if(!r){e[i]=p3e({...t,palette:{mode:n,...t==null?void 0:t.palette}});return}const{palette:a,...o}=K5({...r,palette:{mode:n,...t==null?void 0:t.palette}});return e[i]={...t,palette:a,opacity:{...nye(n),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||aye(n)},o}function w3e(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:i,disableCssColorScheme:n=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:o=m3e,colorSchemeSelector:s=r.light&&r.dark?"media":void 0,rootSelector:l=":root",...u}=e,c=Object.keys(r)[0],d=i||(r.light&&c!=="light"?"light":c),h=_3e(a),{[d]:f,light:g,dark:p,...m}=r,y={...m};let b=f;if((d==="dark"&&!("dark"in r)||d==="light"&&!("light"in r))&&(b=!0),!b)throw new Error(Vm(21,d));const w=A3(y,b,u,d);g&&!y.light&&A3(y,g,void 0,"light"),p&&!y.dark&&A3(y,p,void 0,"dark");let x={defaultColorScheme:d,...w,cssVarPrefix:a,colorSchemeSelector:s,rootSelector:l,getCssVar:h,colorSchemes:y,font:{...t3e(w.typography),...w.font},spacing:b3e(u.spacing)};Object.keys(x.colorSchemes).forEach(A=>{const P=x.colorSchemes[A].palette,O=j=>{const D=j.split("-"),I=D[1],q=D[2];return h(j,P[I][q])};if(P.mode==="light"&&(st(P.common,"background","#fff"),st(P.common,"onBackground","#000")),P.mode==="dark"&&(st(P.common,"background","#000"),st(P.common,"onBackground","#fff")),y3e(P,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),P.mode==="light"){st(P.Alert,"errorColor",bi(P.error.light,.6)),st(P.Alert,"infoColor",bi(P.info.light,.6)),st(P.Alert,"successColor",bi(P.success.light,.6)),st(P.Alert,"warningColor",bi(P.warning.light,.6)),st(P.Alert,"errorFilledBg",O("palette-error-main")),st(P.Alert,"infoFilledBg",O("palette-info-main")),st(P.Alert,"successFilledBg",O("palette-success-main")),st(P.Alert,"warningFilledBg",O("palette-warning-main")),st(P.Alert,"errorFilledColor",Vf(()=>P.getContrastText(P.error.main))),st(P.Alert,"infoFilledColor",Vf(()=>P.getContrastText(P.info.main))),st(P.Alert,"successFilledColor",Vf(()=>P.getContrastText(P.success.main))),st(P.Alert,"warningFilledColor",Vf(()=>P.getContrastText(P.warning.main))),st(P.Alert,"errorStandardBg",_i(P.error.light,.9)),st(P.Alert,"infoStandardBg",_i(P.info.light,.9)),st(P.Alert,"successStandardBg",_i(P.success.light,.9)),st(P.Alert,"warningStandardBg",_i(P.warning.light,.9)),st(P.Alert,"errorIconColor",O("palette-error-main")),st(P.Alert,"infoIconColor",O("palette-info-main")),st(P.Alert,"successIconColor",O("palette-success-main")),st(P.Alert,"warningIconColor",O("palette-warning-main")),st(P.AppBar,"defaultBg",O("palette-grey-100")),st(P.Avatar,"defaultBg",O("palette-grey-400")),st(P.Button,"inheritContainedBg",O("palette-grey-300")),st(P.Button,"inheritContainedHoverBg",O("palette-grey-A100")),st(P.Chip,"defaultBorder",O("palette-grey-400")),st(P.Chip,"defaultAvatarColor",O("palette-grey-700")),st(P.Chip,"defaultIconColor",O("palette-grey-700")),st(P.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),st(P.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),st(P.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),st(P.LinearProgress,"primaryBg",_i(P.primary.main,.62)),st(P.LinearProgress,"secondaryBg",_i(P.secondary.main,.62)),st(P.LinearProgress,"errorBg",_i(P.error.main,.62)),st(P.LinearProgress,"infoBg",_i(P.info.main,.62)),st(P.LinearProgress,"successBg",_i(P.success.main,.62)),st(P.LinearProgress,"warningBg",_i(P.warning.main,.62)),st(P.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.11)`),st(P.Slider,"primaryTrack",_i(P.primary.main,.62)),st(P.Slider,"secondaryTrack",_i(P.secondary.main,.62)),st(P.Slider,"errorTrack",_i(P.error.main,.62)),st(P.Slider,"infoTrack",_i(P.info.main,.62)),st(P.Slider,"successTrack",_i(P.success.main,.62)),st(P.Slider,"warningTrack",_i(P.warning.main,.62));const j=kT(P.background.default,.8);st(P.SnackbarContent,"bg",j),st(P.SnackbarContent,"color",Vf(()=>P.getContrastText(j))),st(P.SpeedDialAction,"fabHoverBg",kT(P.background.paper,.15)),st(P.StepConnector,"border",O("palette-grey-400")),st(P.StepContent,"border",O("palette-grey-400")),st(P.Switch,"defaultColor",O("palette-common-white")),st(P.Switch,"defaultDisabledColor",O("palette-grey-100")),st(P.Switch,"primaryDisabledColor",_i(P.primary.main,.62)),st(P.Switch,"secondaryDisabledColor",_i(P.secondary.main,.62)),st(P.Switch,"errorDisabledColor",_i(P.error.main,.62)),st(P.Switch,"infoDisabledColor",_i(P.info.main,.62)),st(P.Switch,"successDisabledColor",_i(P.success.main,.62)),st(P.Switch,"warningDisabledColor",_i(P.warning.main,.62)),st(P.TableCell,"border",_i(VT(P.divider,1),.88)),st(P.Tooltip,"bg",VT(P.grey[700],.92))}if(P.mode==="dark"){st(P.Alert,"errorColor",_i(P.error.light,.6)),st(P.Alert,"infoColor",_i(P.info.light,.6)),st(P.Alert,"successColor",_i(P.success.light,.6)),st(P.Alert,"warningColor",_i(P.warning.light,.6)),st(P.Alert,"errorFilledBg",O("palette-error-dark")),st(P.Alert,"infoFilledBg",O("palette-info-dark")),st(P.Alert,"successFilledBg",O("palette-success-dark")),st(P.Alert,"warningFilledBg",O("palette-warning-dark")),st(P.Alert,"errorFilledColor",Vf(()=>P.getContrastText(P.error.dark))),st(P.Alert,"infoFilledColor",Vf(()=>P.getContrastText(P.info.dark))),st(P.Alert,"successFilledColor",Vf(()=>P.getContrastText(P.success.dark))),st(P.Alert,"warningFilledColor",Vf(()=>P.getContrastText(P.warning.dark))),st(P.Alert,"errorStandardBg",bi(P.error.light,.9)),st(P.Alert,"infoStandardBg",bi(P.info.light,.9)),st(P.Alert,"successStandardBg",bi(P.success.light,.9)),st(P.Alert,"warningStandardBg",bi(P.warning.light,.9)),st(P.Alert,"errorIconColor",O("palette-error-main")),st(P.Alert,"infoIconColor",O("palette-info-main")),st(P.Alert,"successIconColor",O("palette-success-main")),st(P.Alert,"warningIconColor",O("palette-warning-main")),st(P.AppBar,"defaultBg",O("palette-grey-900")),st(P.AppBar,"darkBg",O("palette-background-paper")),st(P.AppBar,"darkColor",O("palette-text-primary")),st(P.Avatar,"defaultBg",O("palette-grey-600")),st(P.Button,"inheritContainedBg",O("palette-grey-800")),st(P.Button,"inheritContainedHoverBg",O("palette-grey-700")),st(P.Chip,"defaultBorder",O("palette-grey-700")),st(P.Chip,"defaultAvatarColor",O("palette-grey-300")),st(P.Chip,"defaultIconColor",O("palette-grey-300")),st(P.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),st(P.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),st(P.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),st(P.LinearProgress,"primaryBg",bi(P.primary.main,.5)),st(P.LinearProgress,"secondaryBg",bi(P.secondary.main,.5)),st(P.LinearProgress,"errorBg",bi(P.error.main,.5)),st(P.LinearProgress,"infoBg",bi(P.info.main,.5)),st(P.LinearProgress,"successBg",bi(P.success.main,.5)),st(P.LinearProgress,"warningBg",bi(P.warning.main,.5)),st(P.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.13)`),st(P.Slider,"primaryTrack",bi(P.primary.main,.5)),st(P.Slider,"secondaryTrack",bi(P.secondary.main,.5)),st(P.Slider,"errorTrack",bi(P.error.main,.5)),st(P.Slider,"infoTrack",bi(P.info.main,.5)),st(P.Slider,"successTrack",bi(P.success.main,.5)),st(P.Slider,"warningTrack",bi(P.warning.main,.5));const j=kT(P.background.default,.98);st(P.SnackbarContent,"bg",j),st(P.SnackbarContent,"color",Vf(()=>P.getContrastText(j))),st(P.SpeedDialAction,"fabHoverBg",kT(P.background.paper,.15)),st(P.StepConnector,"border",O("palette-grey-600")),st(P.StepContent,"border",O("palette-grey-600")),st(P.Switch,"defaultColor",O("palette-grey-300")),st(P.Switch,"defaultDisabledColor",O("palette-grey-600")),st(P.Switch,"primaryDisabledColor",bi(P.primary.main,.55)),st(P.Switch,"secondaryDisabledColor",bi(P.secondary.main,.55)),st(P.Switch,"errorDisabledColor",bi(P.error.main,.55)),st(P.Switch,"infoDisabledColor",bi(P.info.main,.55)),st(P.Switch,"successDisabledColor",bi(P.success.main,.55)),st(P.Switch,"warningDisabledColor",bi(P.warning.main,.55)),st(P.TableCell,"border",bi(VT(P.divider,1),.68)),st(P.Tooltip,"bg",VT(P.grey[700],.92))}Jp(P.background,"default"),Jp(P.background,"paper"),Jp(P.common,"background"),Jp(P.common,"onBackground"),Jp(P,"divider"),Object.keys(P).forEach(j=>{const D=P[j];j!=="tonalOffset"&&D&&typeof D=="object"&&(D.main&&st(P[j],"mainChannel",qC(WC(D.main))),D.light&&st(P[j],"lightChannel",qC(WC(D.light))),D.dark&&st(P[j],"darkChannel",qC(WC(D.dark))),D.contrastText&&st(P[j],"contrastTextChannel",qC(WC(D.contrastText))),j==="text"&&(Jp(P[j],"primary"),Jp(P[j],"secondary")),j==="action"&&(D.active&&Jp(P[j],"active"),D.selected&&Jp(P[j],"selected")))})}),x=t.reduce((A,P)=>ra(A,P),x);const S={prefix:a,disableCssColorScheme:n,shouldSkipGeneratingVar:o,getSelector:v3e(x)},{vars:C,generateThemeVars:T,generateStyleSheets:M}=yje(x,S);return x.vars=C,Object.entries(x.colorSchemes[x.defaultColorScheme]).forEach(([A,P])=>{x[A]=P}),x.generateThemeVars=T,x.generateStyleSheets=M,x.generateSpacing=function(){return Dve(u.spacing,v2(this))},x.getColorSchemeSelector=bje(s),x.spacing=x.generateSpacing(),x.shouldSkipGeneratingVar=o,x.unstable_sxConfig={...YM,...u==null?void 0:u.unstable_sxConfig},x.unstable_sx=function(P){return mv({sx:P,theme:this})},x.toRuntimeSource=iye,x}function A7(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:j8({...r===!0?{}:r.palette,mode:t})})}function P2(e={},...t){const{palette:r,cssVariables:i=!1,colorSchemes:n=r?void 0:{light:!0},defaultColorScheme:a=r==null?void 0:r.mode,...o}=e,s=a||"light",l=n==null?void 0:n[s],u={...n,...r?{[s]:{...typeof l!="boolean"&&l,palette:r}}:void 0};if(i===!1){if(!("colorSchemes"in e))return K5(e,...t);let c=r;"palette"in e||u[s]&&(u[s]!==!0?c=u[s].palette:s==="dark"&&(c={mode:"dark"}));const d=K5({...e,palette:c},...t);return d.defaultColorScheme=s,d.colorSchemes=u,d.palette.mode==="light"&&(d.colorSchemes.light={...u.light!==!0&&u.light,palette:d.palette},A7(d,"dark",u.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:d.palette},A7(d,"light",u.light)),d}return!r&&!("light"in u)&&s==="light"&&(u.light=!0),w3e({...o,colorSchemes:u,defaultColorScheme:s,...typeof i!="boolean"&&i},...t)}const z8=P2();function aa(){const e=KM(z8);return e[Sf]||e}function oye(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const cs=e=>oye(e)&&e!=="classes",wt=Lve({themeId:Sf,defaultTheme:z8,rootShouldForwardProp:cs});function O3({theme:e,...t}){const r=Sf in e?e[Sf]:void 0;return V.jsx(Qve,{...t,themeId:r?Sf:void 0,theme:r||e})}const qT={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:x3e}=pje({themeId:Sf,theme:()=>P2({cssVariables:!0}),colorSchemeStorageKey:qT.colorSchemeStorageKey,modeStorageKey:qT.modeStorageKey,defaultColorScheme:{light:qT.defaultLightColorScheme,dark:qT.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:tye(e.palette,e.typography)};return t.unstable_sx=function(i){return mv({sx:i,theme:this})},t}}),S3e=x3e;function C3e({theme:e,...t}){if(typeof e=="function")return V.jsx(O3,{theme:e,...t});const r=Sf in e?e[Sf]:e;return"colorSchemes"in r?V.jsx(S3e,{theme:e,...t}):"vars"in r?V.jsx(O3,{theme:e,...t}):V.jsx(O3,{theme:{...e,vars:null},...t})}function E3e(e){return V.jsx(PIe,{...e,defaultTheme:z8,themeId:Sf})}function B8(e){return function(r){return V.jsx(E3e,{styles:typeof e=="function"?i=>e({theme:i,...r}):e})}}function M3e(){return S2}const Mr=oje;function _r(e){return aje(e)}function P3e(e){return yr("MuiSvgIcon",e)}Sr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const T3e=e=>{const{color:t,fontSize:r,classes:i}=e,n={root:["root",t!=="inherit"&&`color${bt(t)}`,`fontSize${bt(r)}`]};return br(n,P3e,i)},A3e=wt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${bt(r.color)}`],t[`fontSize${bt(r.fontSize)}`]]}})(Mr(({theme:e})=>{var t,r,i,n,a,o,s,l,u,c,d,h,f,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(n=(t=e.transitions)==null?void 0:t.create)==null?void 0:n.call(t,"fill",{duration:(i=(r=(e.vars??e).transitions)==null?void 0:r.duration)==null?void 0:i.shorter}),variants:[{props:p=>!p.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(a=e.typography)==null?void 0:a.pxToRem)==null?void 0:o.call(a,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(s=e.typography)==null?void 0:s.pxToRem)==null?void 0:l.call(s,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((c=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:c.call(u,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,p])=>p&&p.main).map(([p])=>{var m,y;return{props:{color:p},style:{color:(y=(m=(e.vars??e).palette)==null?void 0:m[p])==null?void 0:y.main}}}),{props:{color:"action"},style:{color:(h=(d=(e.vars??e).palette)==null?void 0:d.action)==null?void 0:h.active}},{props:{color:"disabled"},style:{color:(g=(f=(e.vars??e).palette)==null?void 0:f.action)==null?void 0:g.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),J5=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiSvgIcon"}),{children:n,className:a,color:o="inherit",component:s="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:d,viewBox:h="0 0 24 24",...f}=i,g=G.isValidElement(n)&&n.type==="svg",p={...i,color:o,component:s,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:c,viewBox:h,hasSvgAsChild:g},m={};c||(m.viewBox=h);const y=T3e(p);return V.jsxs(A3e,{as:s,className:At(y.root,a),focusable:"false",color:u,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:r,...m,...f,...g&&n.props,ownerState:p,children:[g?n.props.children:n,d?V.jsx("title",{children:d}):null]})});J5.muiName="SvgIcon";function pr(e,t){function r(i,n){return V.jsx(J5,{"data-testid":void 0,ref:n,...i,children:e})}return r.muiName=J5.muiName,G.memo(G.forwardRef(r))}function O3e(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function sye(e,t){if(!e)return t;function r(o,s){const l={};return Object.keys(s).forEach(u=>{O3e(u,s[u])&&typeof o[u]=="function"&&(l[u]=(...c)=>{o[u](...c),s[u](...c)})}),l}if(typeof e=="function"||typeof t=="function")return o=>{const s=typeof t=="function"?t(o):t,l=typeof e=="function"?e({...o,...s}):e,u=At(o==null?void 0:o.className,s==null?void 0:s.className,l==null?void 0:l.className),c=r(l,s);return{...s,...l,...c,...!!u&&{className:u},...(s==null?void 0:s.style)&&(l==null?void 0:l.style)&&{style:{...s.style,...l.style}},...(s==null?void 0:s.sx)&&(l==null?void 0:l.sx)&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(l.sx)?l.sx:[l.sx]]}}};const i=t,n=r(e,i),a=At(i==null?void 0:i.className,e==null?void 0:e.className);return{...t,...e,...n,...!!a&&{className:a},...(i==null?void 0:i.style)&&(e==null?void 0:e.style)&&{style:{...i.style,...e.style}},...(i==null?void 0:i.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(i.sx)?i.sx:[i.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function lye(e,t){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;r[i]=e[i]}return r}function Z5(e,t){return Z5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Z5(e,t)}function uye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Z5(e,t)}const O7={disabled:!1},zR=yf.createContext(null);var R3e=function(t){return t.scrollTop},GC="unmounted",f0="exited",p0="entering",z1="entered",eV="exiting",Zs=function(e){uye(t,e);function t(i,n){var a;a=e.call(this,i,n)||this;var o=n,s=o&&!o.isMounting?i.enter:i.appear,l;return a.appearStatus=null,i.in?s?(l=f0,a.appearStatus=p0):l=z1:i.unmountOnExit||i.mountOnEnter?l=GC:l=f0,a.state={status:l},a.nextCallback=null,a}t.getDerivedStateFromProps=function(n,a){var o=n.in;return o&&a.status===GC?{status:f0}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(n){var a=null;if(n!==this.props){var o=this.state.status;this.props.in?o!==p0&&o!==z1&&(a=p0):(o===p0||o===z1)&&(a=eV)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var n=this.props.timeout,a,o,s;return a=o=s=n,n!=null&&typeof n!="number"&&(a=n.exit,o=n.enter,s=n.appear!==void 0?n.appear:o),{exit:a,enter:o,appear:s}},r.updateStatus=function(n,a){if(n===void 0&&(n=!1),a!==null)if(this.cancelNextCallback(),a===p0){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:NT.findDOMNode(this);o&&R3e(o)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===f0&&this.setState({status:GC})},r.performEnter=function(n){var a=this,o=this.props.enter,s=this.context?this.context.isMounting:n,l=this.props.nodeRef?[s]:[NT.findDOMNode(this),s],u=l[0],c=l[1],d=this.getTimeouts(),h=s?d.appear:d.enter;if(!n&&!o||O7.disabled){this.safeSetState({status:z1},function(){a.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:p0},function(){a.props.onEntering(u,c),a.onTransitionEnd(h,function(){a.safeSetState({status:z1},function(){a.props.onEntered(u,c)})})})},r.performExit=function(){var n=this,a=this.props.exit,o=this.getTimeouts(),s=this.props.nodeRef?void 0:NT.findDOMNode(this);if(!a||O7.disabled){this.safeSetState({status:f0},function(){n.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:eV},function(){n.props.onExiting(s),n.onTransitionEnd(o.exit,function(){n.safeSetState({status:f0},function(){n.props.onExited(s)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(n,a){a=this.setNextCallback(a),this.setState(n,a)},r.setNextCallback=function(n){var a=this,o=!0;return this.nextCallback=function(s){o&&(o=!1,a.nextCallback=null,n(s))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},r.onTransitionEnd=function(n,a){this.setNextCallback(a);var o=this.props.nodeRef?this.props.nodeRef.current:NT.findDOMNode(this),s=n==null&&!this.props.addEndListener;if(!o||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}n!=null&&setTimeout(this.nextCallback,n)},r.render=function(){var n=this.state.status;if(n===GC)return null;var a=this.props,o=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var s=lye(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return yf.createElement(zR.Provider,{value:null},typeof o=="function"?o(n,s):yf.cloneElement(yf.Children.only(o),s))},t}(yf.Component);Zs.contextType=zR;Zs.propTypes={};function i1(){}Zs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:i1,onEntering:i1,onEntered:i1,onExit:i1,onExiting:i1,onExited:i1};Zs.UNMOUNTED=GC;Zs.EXITED=f0;Zs.ENTERING=p0;Zs.ENTERED=z1;Zs.EXITING=eV;function D3e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L8(e,t){var r=function(a){return t&&G.isValidElement(a)?t(a):a},i=Object.create(null);return e&&G.Children.map(e,function(n){return n}).forEach(function(n){i[n.key]=r(n)}),i}function I3e(e,t){e=e||{},t=t||{};function r(c){return c in t?t[c]:e[c]}var i=Object.create(null),n=[];for(var a in e)a in t?n.length&&(i[a]=n,n=[]):n.push(a);var o,s={};for(var l in t){if(i[l])for(o=0;o<i[l].length;o++){var u=i[l][o];s[i[l][o]]=r(u)}s[l]=r(l)}for(o=0;o<n.length;o++)s[n[o]]=r(n[o]);return s}function R0(e,t,r){return r[t]!=null?r[t]:e.props[t]}function j3e(e,t){return L8(e.children,function(r){return G.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:R0(r,"appear",e),enter:R0(r,"enter",e),exit:R0(r,"exit",e)})})}function z3e(e,t,r){var i=L8(e.children),n=I3e(t,i);return Object.keys(n).forEach(function(a){var o=n[a];if(G.isValidElement(o)){var s=a in t,l=a in i,u=t[a],c=G.isValidElement(u)&&!u.props.in;l&&(!s||c)?n[a]=G.cloneElement(o,{onExited:r.bind(null,o),in:!0,exit:R0(o,"exit",e),enter:R0(o,"enter",e)}):!l&&s&&!c?n[a]=G.cloneElement(o,{in:!1}):l&&s&&G.isValidElement(u)&&(n[a]=G.cloneElement(o,{onExited:r.bind(null,o),in:u.props.in,exit:R0(o,"exit",e),enter:R0(o,"enter",e)}))}}),n}var B3e=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},L3e={component:"div",childFactory:function(t){return t}},F8=function(e){uye(t,e);function t(i,n){var a;a=e.call(this,i,n)||this;var o=a.handleExited.bind(D3e(a));return a.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},a}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(n,a){var o=a.children,s=a.handleExited,l=a.firstRender;return{children:l?j3e(n,s):z3e(n,o,s),firstRender:!1}},r.handleExited=function(n,a){var o=L8(this.props.children);n.key in o||(n.props.onExited&&n.props.onExited(a),this.mounted&&this.setState(function(s){var l=OR({},s.children);return delete l[n.key],{children:l}}))},r.render=function(){var n=this.props,a=n.component,o=n.childFactory,s=lye(n,["component","childFactory"]),l=this.state.contextValue,u=B3e(this.state.children).map(o);return delete s.appear,delete s.enter,delete s.exit,a===null?yf.createElement(zR.Provider,{value:l},u):yf.createElement(zR.Provider,{value:l},yf.createElement(a,s,u))},t}(yf.Component);F8.propTypes={};F8.defaultProps=L3e;const N8=e=>e.scrollTop;function vv(e,t){const{timeout:r,easing:i,style:n={}}=e;return{duration:n.transitionDuration??(typeof r=="number"?r:r[t.mode]||0),easing:n.transitionTimingFunction??(typeof i=="object"?i[t.mode]:i),delay:n.transitionDelay}}function F3e(e){return yr("MuiCollapse",e)}Sr("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const N3e=e=>{const{orientation:t,classes:r}=e,i={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return br(i,F3e,r)},U3e=wt("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(Mr(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),V3e=wt("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),k3e=wt("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),tV=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiCollapse"}),{addEndListener:n,children:a,className:o,collapsedSize:s="0px",component:l,easing:u,in:c,onEnter:d,onEntered:h,onEntering:f,onExit:g,onExited:p,onExiting:m,orientation:y="vertical",style:b,timeout:w=rye.standard,TransitionComponent:x=Zs,...S}=i,C={...i,orientation:y,collapsedSize:s},T=N3e(C),M=aa(),A=O0(),P=G.useRef(null),O=G.useRef(),j=typeof s=="number"?`${s}px`:s,D=y==="horizontal",I=D?"width":"height",q=G.useRef(null),$=en(r,q),X=se=>le=>{if(se){const ee=q.current;le===void 0?se(ee):se(ee,le)}},N=()=>P.current?P.current[D?"clientWidth":"clientHeight"]:0,Q=X((se,le)=>{P.current&&D&&(P.current.style.position="absolute"),se.style[I]=j,d&&d(se,le)}),F=X((se,le)=>{const ee=N();P.current&&D&&(P.current.style.position="");const{duration:J,easing:oe}=vv({style:b,timeout:w,easing:u},{mode:"enter"});if(w==="auto"){const me=M.transitions.getAutoHeightDuration(ee);se.style.transitionDuration=`${me}ms`,O.current=me}else se.style.transitionDuration=typeof J=="string"?J:`${J}ms`;se.style[I]=`${ee}px`,se.style.transitionTimingFunction=oe,f&&f(se,le)}),L=X((se,le)=>{se.style[I]="auto",h&&h(se,le)}),Y=X(se=>{se.style[I]=`${N()}px`,g&&g(se)}),ae=X(p),re=X(se=>{const le=N(),{duration:ee,easing:J}=vv({style:b,timeout:w,easing:u},{mode:"exit"});if(w==="auto"){const oe=M.transitions.getAutoHeightDuration(le);se.style.transitionDuration=`${oe}ms`,O.current=oe}else se.style.transitionDuration=typeof ee=="string"?ee:`${ee}ms`;se.style[I]=j,se.style.transitionTimingFunction=J,m&&m(se)}),H=se=>{w==="auto"&&A.start(O.current||0,se),n&&n(q.current,se)};return V.jsx(x,{in:c,onEnter:Q,onEntered:L,onEntering:F,onExit:Y,onExited:ae,onExiting:re,addEndListener:H,nodeRef:q,timeout:w==="auto"?null:w,...S,children:(se,{ownerState:le,...ee})=>V.jsx(U3e,{as:l,className:At(T.root,o,{entered:T.entered,exited:!c&&j==="0px"&&T.hidden}[se]),style:{[D?"minWidth":"minHeight"]:j,...b},ref:$,ownerState:{...C,state:se},...ee,children:V.jsx(V3e,{ownerState:{...C,state:se},className:T.wrapper,ref:P,children:V.jsx(k3e,{ownerState:{...C,state:se},className:T.wrapperInner,children:a})})})})});tV&&(tV.muiSupportAuto=!0);function q3e(e){return yr("MuiPaper",e)}Sr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const W3e=e=>{const{square:t,elevation:r,variant:i,classes:n}=e,a={root:["root",i,!t&&"rounded",i==="elevation"&&`elevation${r}`]};return br(a,q3e,n)},G3e=wt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(Mr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Na=G.forwardRef(function(t,r){var f;const i=_r({props:t,name:"MuiPaper"}),n=aa(),{className:a,component:o="div",elevation:s=1,square:l=!1,variant:u="elevation",...c}=i,d={...i,component:o,elevation:s,square:l,variant:u},h=W3e(d);return V.jsx(G3e,{as:o,ownerState:d,className:At(h.root,a),ref:r,...c,style:{...u==="elevation"&&{"--Paper-shadow":(n.vars||n).shadows[s],...n.vars&&{"--Paper-overlay":(f=n.vars.overlays)==null?void 0:f[s]},...!n.vars&&n.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Si("#fff",Q5(s))}, ${Si("#fff",Q5(s))})`}},...c.style}})});function jr(e,t){const{className:r,elementType:i,ownerState:n,externalForwardedProps:a,internalForwardedProps:o,shouldForwardComponentProp:s=!1,...l}=t,{component:u,slots:c={[e]:void 0},slotProps:d={[e]:void 0},...h}=a,f=c[e]||i,g=$ve(d[e],n),{props:{component:p,...m},internalRef:y}=Hve({className:r,...l,externalForwardedProps:e==="root"?h:void 0,externalSlotProps:g}),b=en(y,g==null?void 0:g.ref,t.ref),w=e==="root"?p||u:p,x=Wve(f,{...e==="root"&&!u&&!c[e]&&o,...e!=="root"&&!c[e]&&o,...m,...w&&!s&&{as:w},...w&&s&&{component:w},ref:b},n);return[f,x]}class BR{constructor(){ey(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new BR}static use(){const t=kve(BR.create).current,[r,i]=G.useState(!1);return t.shouldMount=r,t.setShouldMount=i,G.useEffect(t.mountEffect,[r]),t}mount(){return this.mounted||(this.mounted=$3e(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.start(...t)})}stop(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.stop(...t)})}pulsate(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.pulsate(...t)})}}function H3e(){return BR.use()}function $3e(){let e,t;const r=new Promise((i,n)=>{e=i,t=n});return r.resolve=e,r.reject=t,r}function X3e(e){const{className:t,classes:r,pulsate:i=!1,rippleX:n,rippleY:a,rippleSize:o,in:s,onExited:l,timeout:u}=e,[c,d]=G.useState(!1),h=At(t,r.ripple,r.rippleVisible,i&&r.ripplePulsate),f={width:o,height:o,top:-(o/2)+a,left:-(o/2)+n},g=At(r.child,c&&r.childLeaving,i&&r.childPulsate);return!s&&!c&&d(!0),G.useEffect(()=>{if(!s&&l!=null){const p=setTimeout(l,u);return()=>{clearTimeout(p)}}},[l,s,u]),V.jsx("span",{className:h,style:f,children:V.jsx("span",{className:g})})}const zs=Sr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),rV=550,Y3e=80,K3e=Cv`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Q3e=Cv`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,J3e=Cv`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Z3e=wt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),eze=wt(X3e,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${zs.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${K3e};
    animation-duration: ${rV}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${zs.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${zs.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${zs.childLeaving} {
    opacity: 0;
    animation-name: ${Q3e};
    animation-duration: ${rV}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${zs.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${J3e};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,tze=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiTouchRipple"}),{center:n=!1,classes:a={},className:o,...s}=i,[l,u]=G.useState([]),c=G.useRef(0),d=G.useRef(null);G.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const h=G.useRef(!1),f=O0(),g=G.useRef(null),p=G.useRef(null),m=G.useCallback(x=>{const{pulsate:S,rippleX:C,rippleY:T,rippleSize:M,cb:A}=x;u(P=>[...P,V.jsx(eze,{classes:{ripple:At(a.ripple,zs.ripple),rippleVisible:At(a.rippleVisible,zs.rippleVisible),ripplePulsate:At(a.ripplePulsate,zs.ripplePulsate),child:At(a.child,zs.child),childLeaving:At(a.childLeaving,zs.childLeaving),childPulsate:At(a.childPulsate,zs.childPulsate)},timeout:rV,pulsate:S,rippleX:C,rippleY:T,rippleSize:M},c.current)]),c.current+=1,d.current=A},[a]),y=G.useCallback((x={},S={},C=()=>{})=>{const{pulsate:T=!1,center:M=n||S.pulsate,fakeElement:A=!1}=S;if((x==null?void 0:x.type)==="mousedown"&&h.current){h.current=!1;return}(x==null?void 0:x.type)==="touchstart"&&(h.current=!0);const P=A?null:p.current,O=P?P.getBoundingClientRect():{width:0,height:0,left:0,top:0};let j,D,I;if(M||x===void 0||x.clientX===0&&x.clientY===0||!x.clientX&&!x.touches)j=Math.round(O.width/2),D=Math.round(O.height/2);else{const{clientX:q,clientY:$}=x.touches&&x.touches.length>0?x.touches[0]:x;j=Math.round(q-O.left),D=Math.round($-O.top)}if(M)I=Math.sqrt((2*O.width**2+O.height**2)/3),I%2===0&&(I+=1);else{const q=Math.max(Math.abs((P?P.clientWidth:0)-j),j)*2+2,$=Math.max(Math.abs((P?P.clientHeight:0)-D),D)*2+2;I=Math.sqrt(q**2+$**2)}x!=null&&x.touches?g.current===null&&(g.current=()=>{m({pulsate:T,rippleX:j,rippleY:D,rippleSize:I,cb:C})},f.start(Y3e,()=>{g.current&&(g.current(),g.current=null)})):m({pulsate:T,rippleX:j,rippleY:D,rippleSize:I,cb:C})},[n,m,f]),b=G.useCallback(()=>{y({},{pulsate:!0})},[y]),w=G.useCallback((x,S)=>{if(f.clear(),(x==null?void 0:x.type)==="touchend"&&g.current){g.current(),g.current=null,f.start(0,()=>{w(x,S)});return}g.current=null,u(C=>C.length>0?C.slice(1):C),d.current=S},[f]);return G.useImperativeHandle(r,()=>({pulsate:b,start:y,stop:w}),[b,y,w]),V.jsx(Z3e,{className:At(zs.root,a.root,o),ref:p,...s,children:V.jsx(F8,{component:null,exit:!0,children:l})})});function rze(e){return yr("MuiButtonBase",e)}const ize=Sr("MuiButtonBase",["root","disabled","focusVisible"]),nze=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:i,classes:n}=e,o=br({root:["root",t&&"disabled",r&&"focusVisible"]},rze,n);return r&&i&&(o.root+=` ${i}`),o},aze=wt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ize.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ib=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiButtonBase"}),{action:n,centerRipple:a=!1,children:o,className:s,component:l="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:d=!1,focusRipple:h=!1,focusVisibleClassName:f,LinkComponent:g="a",onBlur:p,onClick:m,onContextMenu:y,onDragLeave:b,onFocus:w,onFocusVisible:x,onKeyDown:S,onKeyUp:C,onMouseDown:T,onMouseLeave:M,onMouseUp:A,onTouchEnd:P,onTouchMove:O,onTouchStart:j,tabIndex:D=0,TouchRippleProps:I,touchRippleRef:q,type:$,...X}=i,N=G.useRef(null),Q=H3e(),F=en(Q.ref,q),[L,Y]=G.useState(!1);u&&L&&Y(!1),G.useImperativeHandle(n,()=>({focusVisible:()=>{Y(!0),N.current.focus()}}),[]);const ae=Q.shouldMount&&!c&&!u;G.useEffect(()=>{L&&h&&!c&&Q.pulsate()},[c,h,L,Q]);const re=Zp(Q,"start",T,d),H=Zp(Q,"stop",y,d),se=Zp(Q,"stop",b,d),le=Zp(Q,"stop",A,d),ee=Zp(Q,"stop",Z=>{L&&Z.preventDefault(),M&&M(Z)},d),J=Zp(Q,"start",j,d),oe=Zp(Q,"stop",P,d),me=Zp(Q,"stop",O,d),be=Zp(Q,"stop",Z=>{IR(Z.target)||Y(!1),p&&p(Z)},!1),de=Vs(Z=>{N.current||(N.current=Z.currentTarget),IR(Z.target)&&(Y(!0),x&&x(Z)),w&&w(Z)}),ge=()=>{const Z=N.current;return l&&l!=="button"&&!(Z.tagName==="A"&&Z.href)},ce=Vs(Z=>{h&&!Z.repeat&&L&&Z.key===" "&&Q.stop(Z,()=>{Q.start(Z)}),Z.target===Z.currentTarget&&ge()&&Z.key===" "&&Z.preventDefault(),S&&S(Z),Z.target===Z.currentTarget&&ge()&&Z.key==="Enter"&&!u&&(Z.preventDefault(),m&&m(Z))}),Ce=Vs(Z=>{h&&Z.key===" "&&L&&!Z.defaultPrevented&&Q.stop(Z,()=>{Q.pulsate(Z)}),C&&C(Z),m&&Z.target===Z.currentTarget&&ge()&&Z.key===" "&&!Z.defaultPrevented&&m(Z)});let Ee=l;Ee==="button"&&(X.href||X.to)&&(Ee=g);const Me={};Ee==="button"?(Me.type=$===void 0?"button":$,Me.disabled=u):(!X.href&&!X.to&&(Me.role="button"),u&&(Me["aria-disabled"]=u));const he=en(r,N),Ae={...i,centerRipple:a,component:l,disabled:u,disableRipple:c,disableTouchRipple:d,focusRipple:h,tabIndex:D,focusVisible:L},De=nze(Ae);return V.jsxs(aze,{as:Ee,className:At(De.root,s),ownerState:Ae,onBlur:be,onClick:m,onContextMenu:H,onFocus:de,onKeyDown:ce,onKeyUp:Ce,onMouseDown:re,onMouseLeave:ee,onMouseUp:le,onDragLeave:se,onTouchEnd:oe,onTouchMove:me,onTouchStart:J,ref:he,tabIndex:u?-1:D,type:$,...Me,...X,children:[o,ae?V.jsx(tze,{ref:F,center:a,...I}):null]})});function Zp(e,t,r,i=!1){return Vs(n=>(r&&r(n),i||e[t](n),!0))}function oze(e){return typeof e.main=="string"}function sze(e,t=[]){if(!oze(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function Zi(e=[]){return([,t])=>t&&sze(t,e)}function lze(e){return yr("MuiAlert",e)}const R7=Sr("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function uze(e){return yr("MuiCircularProgress",e)}Sr("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const wg=44,iV=Cv`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,nV=Cv`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,cze=typeof iV!="string"?sw`
        animation: ${iV} 1.4s linear infinite;
      `:null,dze=typeof nV!="string"?sw`
        animation: ${nV} 1.4s ease-in-out infinite;
      `:null,hze=e=>{const{classes:t,variant:r,color:i,disableShrink:n}=e,a={root:["root",r,`color${bt(i)}`],svg:["svg"],circle:["circle",`circle${bt(r)}`,n&&"circleDisableShrink"]};return br(a,uze,t)},fze=wt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${bt(r.color)}`]]}})(Mr(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:cze||{animation:`${iV} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Zi()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),pze=wt("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),mze=wt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${bt(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(Mr(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:dze||{animation:`${nV} 1.4s ease-in-out infinite`}}]}))),cye=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiCircularProgress"}),{className:n,color:a="primary",disableShrink:o=!1,size:s=40,style:l,thickness:u=3.6,value:c=0,variant:d="indeterminate",...h}=i,f={...i,color:a,disableShrink:o,size:s,thickness:u,value:c,variant:d},g=hze(f),p={},m={},y={};if(d==="determinate"){const b=2*Math.PI*((wg-u)/2);p.strokeDasharray=b.toFixed(3),y["aria-valuenow"]=Math.round(c),p.strokeDashoffset=`${((100-c)/100*b).toFixed(3)}px`,m.transform="rotate(-90deg)"}return V.jsx(fze,{className:At(g.root,n),style:{width:s,height:s,...m,...l},ownerState:f,ref:r,role:"progressbar",...y,...h,children:V.jsx(pze,{className:g.svg,ownerState:f,viewBox:`${wg/2} ${wg/2} ${wg} ${wg}`,children:V.jsx(mze,{className:g.circle,style:p,ownerState:f,cx:wg,cy:wg,r:(wg-u)/2,fill:"none",strokeWidth:u})})})});function gze(e){return yr("MuiIconButton",e)}const D7=Sr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),vze=e=>{const{classes:t,disabled:r,color:i,edge:n,size:a,loading:o}=e,s={root:["root",o&&"loading",r&&"disabled",i!=="default"&&`color${bt(i)}`,n&&`edge${bt(n)}`,`size${bt(a)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return br(s,gze,t)},yze=wt(ib,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,r.color!=="default"&&t[`color${bt(r.color)}`],r.edge&&t[`edge${bt(r.edge)}`],t[`size${bt(r.size)}`]]}})(Mr(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Si(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Mr(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Zi()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Zi()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Si((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${D7.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${D7.loading}`]:{color:"transparent"}}))),bze=wt("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),fp=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiIconButton"}),{edge:n=!1,children:a,className:o,color:s="default",disabled:l=!1,disableFocusRipple:u=!1,size:c="medium",id:d,loading:h=null,loadingIndicator:f,...g}=i,p=JM(d),m=f??V.jsx(cye,{"aria-labelledby":p,color:"inherit",size:16}),y={...i,edge:n,color:s,disabled:l,disableFocusRipple:u,loading:h,loadingIndicator:m,size:c},b=vze(y);return V.jsxs(yze,{id:h?p:d,className:At(b.root,o),centerRipple:!0,focusRipple:!u,disabled:l||h,ref:r,...g,ownerState:y,children:[typeof h=="boolean"&&V.jsx("span",{className:b.loadingWrapper,style:{display:"contents"},children:V.jsx(bze,{className:b.loadingIndicator,ownerState:y,children:h&&m})}),a]})}),_ze=pr(V.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),wze=pr(V.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),xze=pr(V.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Sze=pr(V.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),Cze=pr(V.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Eze=e=>{const{variant:t,color:r,severity:i,classes:n}=e,a={root:["root",`color${bt(r||i)}`,`${t}${bt(r||i)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return br(a,lze,n)},Mze=wt(Na,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${bt(r.color||r.severity)}`]]}})(Mr(({theme:e})=>{const t=e.palette.mode==="light"?O_:R_,r=e.palette.mode==="light"?R_:O_;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(Zi(["light"])).map(([i])=>({props:{colorSeverity:i,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${i}Color`]:t(e.palette[i].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${i}StandardBg`]:r(e.palette[i].light,.9),[`& .${R7.icon}`]:e.vars?{color:e.vars.palette.Alert[`${i}IconColor`]}:{color:e.palette[i].main}}})),...Object.entries(e.palette).filter(Zi(["light"])).map(([i])=>({props:{colorSeverity:i,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${i}Color`]:t(e.palette[i].light,.6),border:`1px solid ${(e.vars||e).palette[i].light}`,[`& .${R7.icon}`]:e.vars?{color:e.vars.palette.Alert[`${i}IconColor`]}:{color:e.palette[i].main}}})),...Object.entries(e.palette).filter(Zi(["dark"])).map(([i])=>({props:{colorSeverity:i,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${i}FilledColor`],backgroundColor:e.vars.palette.Alert[`${i}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[i].dark:e.palette[i].main,color:e.palette.getContrastText(e.palette[i].main)}}}))]}})),Pze=wt("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Tze=wt("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),Aze=wt("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),I7={success:V.jsx(_ze,{fontSize:"inherit"}),warning:V.jsx(wze,{fontSize:"inherit"}),error:V.jsx(xze,{fontSize:"inherit"}),info:V.jsx(Sze,{fontSize:"inherit"})},Oze=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiAlert"}),{action:n,children:a,className:o,closeText:s="Close",color:l,components:u={},componentsProps:c={},icon:d,iconMapping:h=I7,onClose:f,role:g="alert",severity:p="success",slotProps:m={},slots:y={},variant:b="standard",...w}=i,x={...i,color:l,severity:p,variant:b,colorSeverity:l||p},S=Eze(x),C={slots:{closeButton:u.CloseButton,closeIcon:u.CloseIcon,...y},slotProps:{...c,...m}},[T,M]=jr("root",{ref:r,shouldForwardComponentProp:!0,className:At(S.root,o),elementType:Mze,externalForwardedProps:{...C,...w},ownerState:x,additionalProps:{role:g,elevation:0}}),[A,P]=jr("icon",{className:S.icon,elementType:Pze,externalForwardedProps:C,ownerState:x}),[O,j]=jr("message",{className:S.message,elementType:Tze,externalForwardedProps:C,ownerState:x}),[D,I]=jr("action",{className:S.action,elementType:Aze,externalForwardedProps:C,ownerState:x}),[q,$]=jr("closeButton",{elementType:fp,externalForwardedProps:C,ownerState:x}),[X,N]=jr("closeIcon",{elementType:Cze,externalForwardedProps:C,ownerState:x});return V.jsxs(T,{...M,children:[d!==!1?V.jsx(A,{...P,children:d||h[p]||I7[p]}):null,V.jsx(O,{...j,children:a}),n!=null?V.jsx(D,{...I,children:n}):null,n==null&&f?V.jsx(D,{...I,children:V.jsx(q,{size:"small","aria-label":s,title:s,color:"inherit",onClick:f,...$,children:V.jsx(X,{fontSize:"small",...N})})}):null]})});function Rze(e){return yr("MuiTypography",e)}const j7=Sr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Dze={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Ize=M3e(),jze=e=>{const{align:t,gutterBottom:r,noWrap:i,paragraph:n,variant:a,classes:o}=e,s={root:["root",a,e.align!=="inherit"&&`align${bt(t)}`,r&&"gutterBottom",i&&"noWrap",n&&"paragraph"]};return br(s,Rze,o)},zze=wt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${bt(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(Mr(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([r,i])=>r!=="inherit"&&i&&typeof i=="object").map(([r,i])=>({props:{variant:r},style:i})),...Object.entries(e.palette).filter(Zi()).map(([r])=>({props:{color:r},style:{color:(e.vars||e).palette[r].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,r])=>typeof r=="string").map(([r])=>({props:{color:`text${bt(r)}`},style:{color:(e.vars||e).palette.text[r]}})),{props:({ownerState:r})=>r.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:r})=>r.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:r})=>r.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:r})=>r.paragraph,style:{marginBottom:16}}]}})),z7={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Qt=G.forwardRef(function(t,r){const{color:i,...n}=_r({props:t,name:"MuiTypography"}),a=!Dze[i],o=Ize({...n,...a&&{color:i}}),{align:s="inherit",className:l,component:u,gutterBottom:c=!1,noWrap:d=!1,paragraph:h=!1,variant:f="body1",variantMapping:g=z7,...p}=o,m={...o,align:s,color:i,className:l,component:u,gutterBottom:c,noWrap:d,paragraph:h,variant:f,variantMapping:g},y=u||(h?"p":g[f]||z7[f])||"span",b=jze(m);return V.jsx(zze,{as:y,ref:r,className:At(b.root,l),...p,ownerState:m,style:{...s!=="inherit"&&{"--Typography-textAlign":s},...p.style}})});function Bze(e){return yr("MuiAppBar",e)}Sr("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Lze=e=>{const{color:t,position:r,classes:i}=e,n={root:["root",`color${bt(t)}`,`position${bt(r)}`]};return br(n,Bze,i)},B7=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,Fze=wt(Na,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${bt(r.position)}`],t[`color${bt(r.color)}`]]}})(Mr(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Zi(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?B7(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?B7(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),Nze=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiAppBar"}),{className:n,color:a="primary",enableColorOnDark:o=!1,position:s="fixed",...l}=i,u={...i,color:a,position:s,enableColorOnDark:o},c=Lze(u);return V.jsx(Fze,{square:!0,component:"header",ownerState:u,elevation:4,className:At(c.root,n,s==="fixed"&&"mui-fixed"),ref:r,...l})});var Ao="top",$s="bottom",Xs="right",Oo="left",U8="auto",ZM=[Ao,$s,Xs,Oo],I_="start",QE="end",Uze="clippingParents",dye="viewport",Sx="popper",Vze="reference",L7=ZM.reduce(function(e,t){return e.concat([t+"-"+I_,t+"-"+QE])},[]),hye=[].concat(ZM,[U8]).reduce(function(e,t){return e.concat([t,t+"-"+I_,t+"-"+QE])},[]),kze="beforeRead",qze="read",Wze="afterRead",Gze="beforeMain",Hze="main",$ze="afterMain",Xze="beforeWrite",Yze="write",Kze="afterWrite",Qze=[kze,qze,Wze,Gze,Hze,$ze,Xze,Yze,Kze];function Ap(e){return e?(e.nodeName||"").toLowerCase():null}function ls(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function nb(e){var t=ls(e).Element;return e instanceof t||e instanceof Element}function ks(e){var t=ls(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function V8(e){if(typeof ShadowRoot>"u")return!1;var t=ls(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Jze(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var i=t.styles[r]||{},n=t.attributes[r]||{},a=t.elements[r];!ks(a)||!Ap(a)||(Object.assign(a.style,i),Object.keys(n).forEach(function(o){var s=n[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function Zze(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(i){var n=t.elements[i],a=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:r[i]),s=o.reduce(function(l,u){return l[u]="",l},{});!ks(n)||!Ap(n)||(Object.assign(n.style,s),Object.keys(a).forEach(function(l){n.removeAttribute(l)}))})}}const eBe={name:"applyStyles",enabled:!0,phase:"write",fn:Jze,effect:Zze,requires:["computeStyles"]};function yp(e){return e.split("-")[0]}var W0=Math.max,LR=Math.min,j_=Math.round;function aV(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function fye(){return!/^((?!chrome|android).)*safari/i.test(aV())}function z_(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=e.getBoundingClientRect(),n=1,a=1;t&&ks(e)&&(n=e.offsetWidth>0&&j_(i.width)/e.offsetWidth||1,a=e.offsetHeight>0&&j_(i.height)/e.offsetHeight||1);var o=nb(e)?ls(e):window,s=o.visualViewport,l=!fye()&&r,u=(i.left+(l&&s?s.offsetLeft:0))/n,c=(i.top+(l&&s?s.offsetTop:0))/a,d=i.width/n,h=i.height/a;return{width:d,height:h,top:c,right:u+d,bottom:c+h,left:u,x:u,y:c}}function k8(e){var t=z_(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function pye(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&V8(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function km(e){return ls(e).getComputedStyle(e)}function tBe(e){return["table","td","th"].indexOf(Ap(e))>=0}function Ev(e){return((nb(e)?e.ownerDocument:e.document)||window.document).documentElement}function T2(e){return Ap(e)==="html"?e:e.assignedSlot||e.parentNode||(V8(e)?e.host:null)||Ev(e)}function F7(e){return!ks(e)||km(e).position==="fixed"?null:e.offsetParent}function rBe(e){var t=/firefox/i.test(aV()),r=/Trident/i.test(aV());if(r&&ks(e)){var i=km(e);if(i.position==="fixed")return null}var n=T2(e);for(V8(n)&&(n=n.host);ks(n)&&["html","body"].indexOf(Ap(n))<0;){var a=km(n);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return n;n=n.parentNode}return null}function eP(e){for(var t=ls(e),r=F7(e);r&&tBe(r)&&km(r).position==="static";)r=F7(r);return r&&(Ap(r)==="html"||Ap(r)==="body"&&km(r).position==="static")?t:r||rBe(e)||t}function q8(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function cE(e,t,r){return W0(e,LR(t,r))}function iBe(e,t,r){var i=cE(e,t,r);return i>r?r:i}function mye(){return{top:0,right:0,bottom:0,left:0}}function gye(e){return Object.assign({},mye(),e)}function vye(e,t){return t.reduce(function(r,i){return r[i]=e,r},{})}var nBe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,gye(typeof t!="number"?t:vye(t,ZM))};function aBe(e){var t,r=e.state,i=e.name,n=e.options,a=r.elements.arrow,o=r.modifiersData.popperOffsets,s=yp(r.placement),l=q8(s),u=[Oo,Xs].indexOf(s)>=0,c=u?"height":"width";if(!(!a||!o)){var d=nBe(n.padding,r),h=k8(a),f=l==="y"?Ao:Oo,g=l==="y"?$s:Xs,p=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],m=o[l]-r.rects.reference[l],y=eP(a),b=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,w=p/2-m/2,x=d[f],S=b-h[c]-d[g],C=b/2-h[c]/2+w,T=cE(x,C,S),M=l;r.modifiersData[i]=(t={},t[M]=T,t.centerOffset=T-C,t)}}function oBe(e){var t=e.state,r=e.options,i=r.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||pye(t.elements.popper,n)&&(t.elements.arrow=n))}const sBe={name:"arrow",enabled:!0,phase:"main",fn:aBe,effect:oBe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function B_(e){return e.split("-")[1]}var lBe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function uBe(e,t){var r=e.x,i=e.y,n=t.devicePixelRatio||1;return{x:j_(r*n)/n||0,y:j_(i*n)/n||0}}function N7(e){var t,r=e.popper,i=e.popperRect,n=e.placement,a=e.variation,o=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,h=o.x,f=h===void 0?0:h,g=o.y,p=g===void 0?0:g,m=typeof c=="function"?c({x:f,y:p}):{x:f,y:p};f=m.x,p=m.y;var y=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),w=Oo,x=Ao,S=window;if(u){var C=eP(r),T="clientHeight",M="clientWidth";if(C===ls(r)&&(C=Ev(r),km(C).position!=="static"&&s==="absolute"&&(T="scrollHeight",M="scrollWidth")),C=C,n===Ao||(n===Oo||n===Xs)&&a===QE){x=$s;var A=d&&C===S&&S.visualViewport?S.visualViewport.height:C[T];p-=A-i.height,p*=l?1:-1}if(n===Oo||(n===Ao||n===$s)&&a===QE){w=Xs;var P=d&&C===S&&S.visualViewport?S.visualViewport.width:C[M];f-=P-i.width,f*=l?1:-1}}var O=Object.assign({position:s},u&&lBe),j=c===!0?uBe({x:f,y:p},ls(r)):{x:f,y:p};if(f=j.x,p=j.y,l){var D;return Object.assign({},O,(D={},D[x]=b?"0":"",D[w]=y?"0":"",D.transform=(S.devicePixelRatio||1)<=1?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",D))}return Object.assign({},O,(t={},t[x]=b?p+"px":"",t[w]=y?f+"px":"",t.transform="",t))}function cBe(e){var t=e.state,r=e.options,i=r.gpuAcceleration,n=i===void 0?!0:i,a=r.adaptive,o=a===void 0?!0:a,s=r.roundOffsets,l=s===void 0?!0:s,u={placement:yp(t.placement),variation:B_(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,N7(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,N7(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const dBe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:cBe,data:{}};var WT={passive:!0};function hBe(e){var t=e.state,r=e.instance,i=e.options,n=i.scroll,a=n===void 0?!0:n,o=i.resize,s=o===void 0?!0:o,l=ls(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&u.forEach(function(c){c.addEventListener("scroll",r.update,WT)}),s&&l.addEventListener("resize",r.update,WT),function(){a&&u.forEach(function(c){c.removeEventListener("scroll",r.update,WT)}),s&&l.removeEventListener("resize",r.update,WT)}}const fBe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hBe,data:{}};var pBe={left:"right",right:"left",bottom:"top",top:"bottom"};function qO(e){return e.replace(/left|right|bottom|top/g,function(t){return pBe[t]})}var mBe={start:"end",end:"start"};function U7(e){return e.replace(/start|end/g,function(t){return mBe[t]})}function W8(e){var t=ls(e),r=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:r,scrollTop:i}}function G8(e){return z_(Ev(e)).left+W8(e).scrollLeft}function gBe(e,t){var r=ls(e),i=Ev(e),n=r.visualViewport,a=i.clientWidth,o=i.clientHeight,s=0,l=0;if(n){a=n.width,o=n.height;var u=fye();(u||!u&&t==="fixed")&&(s=n.offsetLeft,l=n.offsetTop)}return{width:a,height:o,x:s+G8(e),y:l}}function vBe(e){var t,r=Ev(e),i=W8(e),n=(t=e.ownerDocument)==null?void 0:t.body,a=W0(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=W0(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),s=-i.scrollLeft+G8(e),l=-i.scrollTop;return km(n||r).direction==="rtl"&&(s+=W0(r.clientWidth,n?n.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function H8(e){var t=km(e),r=t.overflow,i=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+i)}function yye(e){return["html","body","#document"].indexOf(Ap(e))>=0?e.ownerDocument.body:ks(e)&&H8(e)?e:yye(T2(e))}function dE(e,t){var r;t===void 0&&(t=[]);var i=yye(e),n=i===((r=e.ownerDocument)==null?void 0:r.body),a=ls(i),o=n?[a].concat(a.visualViewport||[],H8(i)?i:[]):i,s=t.concat(o);return n?s:s.concat(dE(T2(o)))}function oV(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function yBe(e,t){var r=z_(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function V7(e,t,r){return t===dye?oV(gBe(e,r)):nb(t)?yBe(t,r):oV(vBe(Ev(e)))}function bBe(e){var t=dE(T2(e)),r=["absolute","fixed"].indexOf(km(e).position)>=0,i=r&&ks(e)?eP(e):e;return nb(i)?t.filter(function(n){return nb(n)&&pye(n,i)&&Ap(n)!=="body"}):[]}function _Be(e,t,r,i){var n=t==="clippingParents"?bBe(e):[].concat(t),a=[].concat(n,[r]),o=a[0],s=a.reduce(function(l,u){var c=V7(e,u,i);return l.top=W0(c.top,l.top),l.right=LR(c.right,l.right),l.bottom=LR(c.bottom,l.bottom),l.left=W0(c.left,l.left),l},V7(e,o,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function bye(e){var t=e.reference,r=e.element,i=e.placement,n=i?yp(i):null,a=i?B_(i):null,o=t.x+t.width/2-r.width/2,s=t.y+t.height/2-r.height/2,l;switch(n){case Ao:l={x:o,y:t.y-r.height};break;case $s:l={x:o,y:t.y+t.height};break;case Xs:l={x:t.x+t.width,y:s};break;case Oo:l={x:t.x-r.width,y:s};break;default:l={x:t.x,y:t.y}}var u=n?q8(n):null;if(u!=null){var c=u==="y"?"height":"width";switch(a){case I_:l[u]=l[u]-(t[c]/2-r[c]/2);break;case QE:l[u]=l[u]+(t[c]/2-r[c]/2);break}}return l}function JE(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=i===void 0?e.placement:i,a=r.strategy,o=a===void 0?e.strategy:a,s=r.boundary,l=s===void 0?Uze:s,u=r.rootBoundary,c=u===void 0?dye:u,d=r.elementContext,h=d===void 0?Sx:d,f=r.altBoundary,g=f===void 0?!1:f,p=r.padding,m=p===void 0?0:p,y=gye(typeof m!="number"?m:vye(m,ZM)),b=h===Sx?Vze:Sx,w=e.rects.popper,x=e.elements[g?b:h],S=_Be(nb(x)?x:x.contextElement||Ev(e.elements.popper),l,c,o),C=z_(e.elements.reference),T=bye({reference:C,element:w,placement:n}),M=oV(Object.assign({},w,T)),A=h===Sx?M:C,P={top:S.top-A.top+y.top,bottom:A.bottom-S.bottom+y.bottom,left:S.left-A.left+y.left,right:A.right-S.right+y.right},O=e.modifiersData.offset;if(h===Sx&&O){var j=O[n];Object.keys(P).forEach(function(D){var I=[Xs,$s].indexOf(D)>=0?1:-1,q=[Ao,$s].indexOf(D)>=0?"y":"x";P[D]+=j[q]*I})}return P}function wBe(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=r.boundary,a=r.rootBoundary,o=r.padding,s=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?hye:l,c=B_(i),d=c?s?L7:L7.filter(function(g){return B_(g)===c}):ZM,h=d.filter(function(g){return u.indexOf(g)>=0});h.length===0&&(h=d);var f=h.reduce(function(g,p){return g[p]=JE(e,{placement:p,boundary:n,rootBoundary:a,padding:o})[yp(p)],g},{});return Object.keys(f).sort(function(g,p){return f[g]-f[p]})}function xBe(e){if(yp(e)===U8)return[];var t=qO(e);return[U7(e),t,U7(t)]}function SBe(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var n=r.mainAxis,a=n===void 0?!0:n,o=r.altAxis,s=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,d=r.rootBoundary,h=r.altBoundary,f=r.flipVariations,g=f===void 0?!0:f,p=r.allowedAutoPlacements,m=t.options.placement,y=yp(m),b=y===m,w=l||(b||!g?[qO(m)]:xBe(m)),x=[m].concat(w).reduce(function(re,H){return re.concat(yp(H)===U8?wBe(t,{placement:H,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:p}):H)},[]),S=t.rects.reference,C=t.rects.popper,T=new Map,M=!0,A=x[0],P=0;P<x.length;P++){var O=x[P],j=yp(O),D=B_(O)===I_,I=[Ao,$s].indexOf(j)>=0,q=I?"width":"height",$=JE(t,{placement:O,boundary:c,rootBoundary:d,altBoundary:h,padding:u}),X=I?D?Xs:Oo:D?$s:Ao;S[q]>C[q]&&(X=qO(X));var N=qO(X),Q=[];if(a&&Q.push($[j]<=0),s&&Q.push($[X]<=0,$[N]<=0),Q.every(function(re){return re})){A=O,M=!1;break}T.set(O,Q)}if(M)for(var F=g?3:1,L=function(H){var se=x.find(function(le){var ee=T.get(le);if(ee)return ee.slice(0,H).every(function(J){return J})});if(se)return A=se,"break"},Y=F;Y>0;Y--){var ae=L(Y);if(ae==="break")break}t.placement!==A&&(t.modifiersData[i]._skip=!0,t.placement=A,t.reset=!0)}}const CBe={name:"flip",enabled:!0,phase:"main",fn:SBe,requiresIfExists:["offset"],data:{_skip:!1}};function k7(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function q7(e){return[Ao,Xs,$s,Oo].some(function(t){return e[t]>=0})}function EBe(e){var t=e.state,r=e.name,i=t.rects.reference,n=t.rects.popper,a=t.modifiersData.preventOverflow,o=JE(t,{elementContext:"reference"}),s=JE(t,{altBoundary:!0}),l=k7(o,i),u=k7(s,n,a),c=q7(l),d=q7(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const MBe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:EBe};function PBe(e,t,r){var i=yp(e),n=[Oo,Ao].indexOf(i)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=a[0],s=a[1];return o=o||0,s=(s||0)*n,[Oo,Xs].indexOf(i)>=0?{x:s,y:o}:{x:o,y:s}}function TBe(e){var t=e.state,r=e.options,i=e.name,n=r.offset,a=n===void 0?[0,0]:n,o=hye.reduce(function(c,d){return c[d]=PBe(d,t.rects,a),c},{}),s=o[t.placement],l=s.x,u=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=o}const ABe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:TBe};function OBe(e){var t=e.state,r=e.name;t.modifiersData[r]=bye({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const RBe={name:"popperOffsets",enabled:!0,phase:"read",fn:OBe,data:{}};function DBe(e){return e==="x"?"y":"x"}function IBe(e){var t=e.state,r=e.options,i=e.name,n=r.mainAxis,a=n===void 0?!0:n,o=r.altAxis,s=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,d=r.padding,h=r.tether,f=h===void 0?!0:h,g=r.tetherOffset,p=g===void 0?0:g,m=JE(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),y=yp(t.placement),b=B_(t.placement),w=!b,x=q8(y),S=DBe(x),C=t.modifiersData.popperOffsets,T=t.rects.reference,M=t.rects.popper,A=typeof p=="function"?p(Object.assign({},t.rects,{placement:t.placement})):p,P=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,j={x:0,y:0};if(C){if(a){var D,I=x==="y"?Ao:Oo,q=x==="y"?$s:Xs,$=x==="y"?"height":"width",X=C[x],N=X+m[I],Q=X-m[q],F=f?-M[$]/2:0,L=b===I_?T[$]:M[$],Y=b===I_?-M[$]:-T[$],ae=t.elements.arrow,re=f&&ae?k8(ae):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:mye(),se=H[I],le=H[q],ee=cE(0,T[$],re[$]),J=w?T[$]/2-F-ee-se-P.mainAxis:L-ee-se-P.mainAxis,oe=w?-T[$]/2+F+ee+le+P.mainAxis:Y+ee+le+P.mainAxis,me=t.elements.arrow&&eP(t.elements.arrow),be=me?x==="y"?me.clientTop||0:me.clientLeft||0:0,de=(D=O==null?void 0:O[x])!=null?D:0,ge=X+J-de-be,ce=X+oe-de,Ce=cE(f?LR(N,ge):N,X,f?W0(Q,ce):Q);C[x]=Ce,j[x]=Ce-X}if(s){var Ee,Me=x==="x"?Ao:Oo,he=x==="x"?$s:Xs,Ae=C[S],De=S==="y"?"height":"width",Z=Ae+m[Me],ie=Ae-m[he],Te=[Ao,Oo].indexOf(y)!==-1,Ue=(Ee=O==null?void 0:O[S])!=null?Ee:0,ne=Te?Z:Ae-T[De]-M[De]-Ue+P.altAxis,K=Te?Ae+T[De]+M[De]-Ue-P.altAxis:ie,B=f&&Te?iBe(ne,Ae,K):cE(f?ne:Z,Ae,f?K:ie);C[S]=B,j[S]=B-Ae}t.modifiersData[i]=j}}const jBe={name:"preventOverflow",enabled:!0,phase:"main",fn:IBe,requiresIfExists:["offset"]};function zBe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function BBe(e){return e===ls(e)||!ks(e)?W8(e):zBe(e)}function LBe(e){var t=e.getBoundingClientRect(),r=j_(t.width)/e.offsetWidth||1,i=j_(t.height)/e.offsetHeight||1;return r!==1||i!==1}function FBe(e,t,r){r===void 0&&(r=!1);var i=ks(t),n=ks(t)&&LBe(t),a=Ev(t),o=z_(e,n,r),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!r)&&((Ap(t)!=="body"||H8(a))&&(s=BBe(t)),ks(t)?(l=z_(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=G8(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function NBe(e){var t=new Map,r=new Set,i=[];e.forEach(function(a){t.set(a.name,a)});function n(a){r.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!r.has(s)){var l=t.get(s);l&&n(l)}}),i.push(a)}return e.forEach(function(a){r.has(a.name)||n(a)}),i}function UBe(e){var t=NBe(e);return Qze.reduce(function(r,i){return r.concat(t.filter(function(n){return n.phase===i}))},[])}function VBe(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function kBe(e){var t=e.reduce(function(r,i){var n=r[i.name];return r[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,r},{});return Object.keys(t).map(function(r){return t[r]})}var W7={placement:"bottom",modifiers:[],strategy:"absolute"};function G7(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function qBe(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,i=r===void 0?[]:r,n=t.defaultOptions,a=n===void 0?W7:n;return function(s,l,u){u===void 0&&(u=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},W7,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:c,setOptions:function(y){var b=typeof y=="function"?y(c.options):y;p(),c.options=Object.assign({},a,c.options,b),c.scrollParents={reference:nb(s)?dE(s):s.contextElement?dE(s.contextElement):[],popper:dE(l)};var w=UBe(kBe([].concat(i,c.options.modifiers)));return c.orderedModifiers=w.filter(function(x){return x.enabled}),g(),f.update()},forceUpdate:function(){if(!h){var y=c.elements,b=y.reference,w=y.popper;if(G7(b,w)){c.rects={reference:FBe(b,eP(w),c.options.strategy==="fixed"),popper:k8(w)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(P){return c.modifiersData[P.name]=Object.assign({},P.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var S=c.orderedModifiers[x],C=S.fn,T=S.options,M=T===void 0?{}:T,A=S.name;typeof C=="function"&&(c=C({state:c,options:M,name:A,instance:f})||c)}}}},update:VBe(function(){return new Promise(function(m){f.forceUpdate(),m(c)})}),destroy:function(){p(),h=!0}};if(!G7(s,l))return f;f.setOptions(u).then(function(m){!h&&u.onFirstUpdate&&u.onFirstUpdate(m)});function g(){c.orderedModifiers.forEach(function(m){var y=m.name,b=m.options,w=b===void 0?{}:b,x=m.effect;if(typeof x=="function"){var S=x({state:c,name:y,instance:f,options:w}),C=function(){};d.push(S||C)}})}function p(){d.forEach(function(m){return m()}),d=[]}return f}}var WBe=[fBe,RBe,dBe,eBe,ABe,CBe,jBe,sBe,MBe],GBe=qBe({defaultModifiers:WBe});function HBe(e){return typeof e=="function"?e():e}const _ye=G.forwardRef(function(t,r){const{children:i,container:n,disablePortal:a=!1}=t,[o,s]=G.useState(null),l=en(G.isValidElement(i)?yb(i):null,r);if(os(()=>{a||s(HBe(n)||document.body)},[n,a]),os(()=>{if(o&&!a)return X5(r,o),()=>{X5(r,null)}},[r,o,a]),a){if(G.isValidElement(i)){const u={ref:l};return G.cloneElement(i,u)}return i}return o&&dve.createPortal(i,o)});function $Be(e){return yr("MuiPopper",e)}Sr("MuiPopper",["root"]);function XBe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function sV(e){return typeof e=="function"?e():e}function YBe(e){return e.nodeType!==void 0}const KBe=e=>{const{classes:t}=e;return br({root:["root"]},$Be,t)},QBe={},JBe=G.forwardRef(function(t,r){const{anchorEl:i,children:n,direction:a,disablePortal:o,modifiers:s,open:l,placement:u,popperOptions:c,popperRef:d,slotProps:h={},slots:f={},TransitionProps:g,ownerState:p,...m}=t,y=G.useRef(null),b=en(y,r),w=G.useRef(null),x=en(w,d),S=G.useRef(x);os(()=>{S.current=x},[x]),G.useImperativeHandle(d,()=>w.current,[]);const C=XBe(u,a),[T,M]=G.useState(C),[A,P]=G.useState(sV(i));G.useEffect(()=>{w.current&&w.current.forceUpdate()}),G.useEffect(()=>{i&&P(sV(i))},[i]),os(()=>{if(!A||!l)return;const q=N=>{M(N.placement)};let $=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:N})=>{q(N)}}];s!=null&&($=$.concat(s)),c&&c.modifiers!=null&&($=$.concat(c.modifiers));const X=GBe(A,y.current,{placement:C,...c,modifiers:$});return S.current(X),()=>{X.destroy(),S.current(null)}},[A,o,s,l,c,C]);const O={placement:T};g!==null&&(O.TransitionProps=g);const j=KBe(t),D=f.root??"div",I=D_({elementType:D,externalSlotProps:h.root,externalForwardedProps:m,additionalProps:{role:"tooltip",ref:b},ownerState:t,className:j.root});return V.jsx(D,{...I,children:typeof n=="function"?n(O):n})}),ZBe=G.forwardRef(function(t,r){const{anchorEl:i,children:n,container:a,direction:o="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:u,open:c,placement:d="bottom",popperOptions:h=QBe,popperRef:f,style:g,transition:p=!1,slotProps:m={},slots:y={},...b}=t,[w,x]=G.useState(!0),S=()=>{x(!1)},C=()=>{x(!0)};if(!l&&!c&&(!p||w))return null;let T;if(a)T=a;else if(i){const P=sV(i);T=P&&YBe(P)?Bo(P).body:Bo(null).body}const M=!c&&l&&(!p||w)?"none":void 0,A=p?{in:c,onEnter:S,onExited:C}:void 0;return V.jsx(_ye,{disablePortal:s,container:T,children:V.jsx(JBe,{anchorEl:i,direction:o,disablePortal:s,modifiers:u,ref:r,open:p?!w:c,placement:d,popperOptions:h,popperRef:f,slotProps:m,slots:y,...b,style:{position:"fixed",top:0,left:0,display:M,...g},TransitionProps:A,children:n})})}),eLe=wt(ZBe,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),wye=G.forwardRef(function(t,r){const i=bb(),n=_r({props:t,name:"MuiPopper"}),{anchorEl:a,component:o,components:s,componentsProps:l,container:u,disablePortal:c,keepMounted:d,modifiers:h,open:f,placement:g,popperOptions:p,popperRef:m,transition:y,slots:b,slotProps:w,...x}=n,S=(b==null?void 0:b.root)??(s==null?void 0:s.Root),C={anchorEl:a,container:u,disablePortal:c,keepMounted:d,modifiers:h,open:f,placement:g,popperOptions:p,popperRef:m,transition:y,...x};return V.jsx(eLe,{as:o,direction:i?"rtl":"ltr",slots:{root:S},slotProps:w??l,...C,ref:r})}),tLe=pr(V.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function rLe(e){return yr("MuiChip",e)}const Nr=Sr("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),iLe=e=>{const{classes:t,disabled:r,size:i,color:n,iconColor:a,onDelete:o,clickable:s,variant:l}=e,u={root:["root",l,r&&"disabled",`size${bt(i)}`,`color${bt(n)}`,s&&"clickable",s&&`clickableColor${bt(n)}`,o&&"deletable",o&&`deletableColor${bt(n)}`,`${l}${bt(n)}`],label:["label",`label${bt(i)}`],avatar:["avatar",`avatar${bt(i)}`,`avatarColor${bt(n)}`],icon:["icon",`icon${bt(i)}`,`iconColor${bt(a)}`],deleteIcon:["deleteIcon",`deleteIcon${bt(i)}`,`deleteIconColor${bt(n)}`,`deleteIcon${bt(l)}Color${bt(n)}`]};return br(u,rLe,t)},nLe=wt("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e,{color:i,iconColor:n,clickable:a,onDelete:o,size:s,variant:l}=r;return[{[`& .${Nr.avatar}`]:t.avatar},{[`& .${Nr.avatar}`]:t[`avatar${bt(s)}`]},{[`& .${Nr.avatar}`]:t[`avatarColor${bt(i)}`]},{[`& .${Nr.icon}`]:t.icon},{[`& .${Nr.icon}`]:t[`icon${bt(s)}`]},{[`& .${Nr.icon}`]:t[`iconColor${bt(n)}`]},{[`& .${Nr.deleteIcon}`]:t.deleteIcon},{[`& .${Nr.deleteIcon}`]:t[`deleteIcon${bt(s)}`]},{[`& .${Nr.deleteIcon}`]:t[`deleteIconColor${bt(i)}`]},{[`& .${Nr.deleteIcon}`]:t[`deleteIcon${bt(l)}Color${bt(i)}`]},t.root,t[`size${bt(s)}`],t[`color${bt(i)}`],a&&t.clickable,a&&i!=="default"&&t[`clickableColor${bt(i)})`],o&&t.deletable,o&&i!=="default"&&t[`deletableColor${bt(i)}`],t[l],t[`${l}${bt(i)}`]]}})(Mr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Nr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Nr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${Nr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Nr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Nr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Nr.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Nr.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:Si(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Si(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Nr.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Nr.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(Zi(["contrastText"])).map(([r])=>({props:{color:r},style:{backgroundColor:(e.vars||e).palette[r].main,color:(e.vars||e).palette[r].contrastText,[`& .${Nr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[r].contrastTextChannel} / 0.7)`:Si(e.palette[r].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[r].contrastText}}}})),{props:r=>r.iconColor===r.color,style:{[`& .${Nr.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:r=>r.iconColor===r.color&&r.color!=="default",style:{[`& .${Nr.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Nr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Si(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(Zi(["dark"])).map(([r])=>({props:{color:r,onDelete:!0},style:{[`&.${Nr.focusVisible}`]:{background:(e.vars||e).palette[r].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Si(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Nr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Si(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(Zi(["dark"])).map(([r])=>({props:{color:r,clickable:!0},style:{[`&:hover, &.${Nr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[r].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Nr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Nr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Nr.avatar}`]:{marginLeft:4},[`& .${Nr.avatarSmall}`]:{marginLeft:2},[`& .${Nr.icon}`]:{marginLeft:4},[`& .${Nr.iconSmall}`]:{marginLeft:2},[`& .${Nr.deleteIcon}`]:{marginRight:5},[`& .${Nr.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(Zi()).map(([r])=>({props:{variant:"outlined",color:r},style:{color:(e.vars||e).palette[r].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[r].mainChannel} / 0.7)`:Si(e.palette[r].main,.7)}`,[`&.${Nr.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Si(e.palette[r].main,e.palette.action.hoverOpacity)},[`&.${Nr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Si(e.palette[r].main,e.palette.action.focusOpacity)},[`& .${Nr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[r].mainChannel} / 0.7)`:Si(e.palette[r].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[r].main}}}}))]}})),aLe=wt("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:r}=e,{size:i}=r;return[t.label,t[`label${bt(i)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function H7(e){return e.key==="Backspace"||e.key==="Delete"}const $7=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiChip"}),{avatar:n,className:a,clickable:o,color:s="default",component:l,deleteIcon:u,disabled:c=!1,icon:d,label:h,onClick:f,onDelete:g,onKeyDown:p,onKeyUp:m,size:y="medium",variant:b="filled",tabIndex:w,skipFocusWhenDisabled:x=!1,...S}=i,C=G.useRef(null),T=en(C,r),M=Q=>{Q.stopPropagation(),g&&g(Q)},A=Q=>{Q.currentTarget===Q.target&&H7(Q)&&Q.preventDefault(),p&&p(Q)},P=Q=>{Q.currentTarget===Q.target&&g&&H7(Q)&&g(Q),m&&m(Q)},O=o!==!1&&f?!0:o,j=O||g?ib:l||"div",D={...i,component:j,disabled:c,size:y,color:s,iconColor:G.isValidElement(d)&&d.props.color||s,onDelete:!!g,clickable:O,variant:b},I=iLe(D),q=j===ib?{component:l||"div",focusVisibleClassName:I.focusVisible,...g&&{disableRipple:!0}}:{};let $=null;g&&($=u&&G.isValidElement(u)?G.cloneElement(u,{className:At(u.props.className,I.deleteIcon),onClick:M}):V.jsx(tLe,{className:At(I.deleteIcon),onClick:M}));let X=null;n&&G.isValidElement(n)&&(X=G.cloneElement(n,{className:At(I.avatar,n.props.className)}));let N=null;return d&&G.isValidElement(d)&&(N=G.cloneElement(d,{className:At(I.icon,d.props.className)})),V.jsxs(nLe,{as:j,className:At(I.root,a),disabled:O&&c?!0:void 0,onClick:f,onKeyDown:A,onKeyUp:P,ref:T,tabIndex:x&&c?-1:w,ownerState:D,...q,...S,children:[X||N,V.jsx(aLe,{className:At(I.label),ownerState:D,children:h}),$]})});function GT(e){return parseInt(e,10)||0}const oLe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function sLe(e){for(const t in e)return!1;return!0}function X7(e){return sLe(e)||e.outerHeightStyle===0&&!e.overflowing}const lLe=G.forwardRef(function(t,r){const{onChange:i,maxRows:n,minRows:a=1,style:o,value:s,...l}=t,{current:u}=G.useRef(s!=null),c=G.useRef(null),d=en(r,c),h=G.useRef(null),f=G.useRef(null),g=G.useCallback(()=>{const w=c.current,x=f.current;if(!w||!x)return;const C=ss(w).getComputedStyle(w);if(C.width==="0px")return{outerHeightStyle:0,overflowing:!1};x.style.width=C.width,x.value=w.value||t.placeholder||"x",x.value.slice(-1)===`
`&&(x.value+=" ");const T=C.boxSizing,M=GT(C.paddingBottom)+GT(C.paddingTop),A=GT(C.borderBottomWidth)+GT(C.borderTopWidth),P=x.scrollHeight;x.value="x";const O=x.scrollHeight;let j=P;a&&(j=Math.max(Number(a)*O,j)),n&&(j=Math.min(Number(n)*O,j)),j=Math.max(j,O);const D=j+(T==="border-box"?M+A:0),I=Math.abs(j-P)<=1;return{outerHeightStyle:D,overflowing:I}},[n,a,t.placeholder]),p=Vs(()=>{const w=c.current,x=g();if(!w||!x||X7(x))return!1;const S=x.outerHeightStyle;return h.current!=null&&h.current!==S}),m=G.useCallback(()=>{const w=c.current,x=g();if(!w||!x||X7(x))return;const S=x.outerHeightStyle;h.current!==S&&(h.current=S,w.style.height=`${S}px`),w.style.overflow=x.overflowing?"hidden":""},[g]),y=G.useRef(-1);os(()=>{const w=QM(m),x=c==null?void 0:c.current;if(!x)return;const S=ss(x);S.addEventListener("resize",w);let C;return typeof ResizeObserver<"u"&&(C=new ResizeObserver(()=>{p()&&(C.unobserve(x),cancelAnimationFrame(y.current),m(),y.current=requestAnimationFrame(()=>{C.observe(x)}))}),C.observe(x)),()=>{w.clear(),cancelAnimationFrame(y.current),S.removeEventListener("resize",w),C&&C.disconnect()}},[g,m,p]),os(()=>{m()});const b=w=>{u||m(),i&&i(w)};return V.jsxs(G.Fragment,{children:[V.jsx("textarea",{value:s,onChange:b,ref:d,rows:a,style:o,...l}),V.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:f,tabIndex:-1,style:{...oLe.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function ZE(e){return typeof e=="string"}function cw({props:e,states:t,muiFormControl:r}){return t.reduce((i,n)=>(i[n]=e[n],r&&typeof e[n]>"u"&&(i[n]=r[n]),i),{})}const $8=G.createContext(void 0);function dw(){return G.useContext($8)}function Y7(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function FR(e,t=!1){return e&&(Y7(e.value)&&e.value!==""||t&&Y7(e.defaultValue)&&e.defaultValue!=="")}function uLe(e){return e.startAdornment}function cLe(e){return yr("MuiInputBase",e)}const L_=Sr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var K7;const A2=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${bt(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},O2=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},dLe=e=>{const{classes:t,color:r,disabled:i,error:n,endAdornment:a,focused:o,formControl:s,fullWidth:l,hiddenLabel:u,multiline:c,readOnly:d,size:h,startAdornment:f,type:g}=e,p={root:["root",`color${bt(r)}`,i&&"disabled",n&&"error",l&&"fullWidth",o&&"focused",s&&"formControl",h&&h!=="medium"&&`size${bt(h)}`,c&&"multiline",f&&"adornedStart",a&&"adornedEnd",u&&"hiddenLabel",d&&"readOnly"],input:["input",i&&"disabled",g==="search"&&"inputTypeSearch",c&&"inputMultiline",h==="small"&&"inputSizeSmall",u&&"inputHiddenLabel",f&&"inputAdornedStart",a&&"inputAdornedEnd",d&&"readOnly"]};return br(p,cLe,t)},R2=wt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:A2})(Mr(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${L_.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),D2=wt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:O2})(Mr(({theme:e})=>{const t=e.palette.mode==="light",r={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},i={opacity:"0 !important"},n=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${L_.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":n,"&:focus::-moz-placeholder":n,"&:focus::-ms-input-placeholder":n},[`&.${L_.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:a})=>!a.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:a})=>a.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),Q7=B8({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),X8=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiInputBase"}),{"aria-describedby":n,autoComplete:a,autoFocus:o,className:s,color:l,components:u={},componentsProps:c={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:g,error:p,fullWidth:m=!1,id:y,inputComponent:b="input",inputProps:w={},inputRef:x,margin:S,maxRows:C,minRows:T,multiline:M=!1,name:A,onBlur:P,onChange:O,onClick:j,onFocus:D,onKeyDown:I,onKeyUp:q,placeholder:$,readOnly:X,renderSuffix:N,rows:Q,size:F,slotProps:L={},slots:Y={},startAdornment:ae,type:re="text",value:H,...se}=i,le=w.value!=null?w.value:H,{current:ee}=G.useRef(le!=null),J=G.useRef(),oe=G.useCallback(ve=>{},[]),me=en(J,x,w.ref,oe),[be,de]=G.useState(!1),ge=dw(),ce=cw({props:i,muiFormControl:ge,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ce.focused=ge?ge.focused:be,G.useEffect(()=>{!ge&&h&&be&&(de(!1),P&&P())},[ge,h,be,P]);const Ce=ge&&ge.onFilled,Ee=ge&&ge.onEmpty,Me=G.useCallback(ve=>{FR(ve)?Ce&&Ce():Ee&&Ee()},[Ce,Ee]);os(()=>{ee&&Me({value:le})},[le,Me,ee]);const he=ve=>{D&&D(ve),w.onFocus&&w.onFocus(ve),ge&&ge.onFocus?ge.onFocus(ve):de(!0)},Ae=ve=>{P&&P(ve),w.onBlur&&w.onBlur(ve),ge&&ge.onBlur?ge.onBlur(ve):de(!1)},De=(ve,...Re)=>{if(!ee){const Fe=ve.target||J.current;if(Fe==null)throw new Error(Vm(1));Me({value:Fe.value})}w.onChange&&w.onChange(ve,...Re),O&&O(ve,...Re)};G.useEffect(()=>{Me(J.current)},[]);const Z=ve=>{J.current&&ve.currentTarget===ve.target&&J.current.focus(),j&&j(ve)};let ie=b,Te=w;M&&ie==="input"&&(Q?Te={type:void 0,minRows:Q,maxRows:Q,...Te}:Te={type:void 0,maxRows:C,minRows:T,...Te},ie=lLe);const Ue=ve=>{Me(ve.animationName==="mui-auto-fill-cancel"?J.current:{value:"x"})};G.useEffect(()=>{ge&&ge.setAdornedStart(!!ae)},[ge,ae]);const ne={...i,color:ce.color||"primary",disabled:ce.disabled,endAdornment:g,error:ce.error,focused:ce.focused,formControl:ge,fullWidth:m,hiddenLabel:ce.hiddenLabel,multiline:M,size:ce.size,startAdornment:ae,type:re},K=dLe(ne),B=Y.root||u.Root||R2,U=L.root||c.root||{},te=Y.input||u.Input||D2;return Te={...Te,...L.input??c.input},V.jsxs(G.Fragment,{children:[!f&&typeof Q7=="function"&&(K7||(K7=V.jsx(Q7,{}))),V.jsxs(B,{...U,ref:r,onClick:Z,...se,...!ZE(B)&&{ownerState:{...ne,...U.ownerState}},className:At(K.root,U.className,s,X&&"MuiInputBase-readOnly"),children:[ae,V.jsx($8.Provider,{value:null,children:V.jsx(te,{"aria-invalid":ce.error,"aria-describedby":n,autoComplete:a,autoFocus:o,defaultValue:d,disabled:ce.disabled,id:y,onAnimationStart:Ue,name:A,placeholder:$,readOnly:X,required:ce.required,rows:Q,value:le,onKeyDown:I,onKeyUp:q,type:re,...Te,...!ZE(te)&&{as:ie,ownerState:{...ne,...Te.ownerState}},ref:me,className:At(K.input,Te.className,X&&"MuiInputBase-readOnly"),onBlur:Ae,onChange:De,onFocus:he})}),g,N?N({...ce,startAdornment:ae}):null]})]})});function hLe(e){return yr("MuiInput",e)}const Cx={...L_,...Sr("MuiInput",["root","underline","input"])};function fLe(e){return yr("MuiOutlinedInput",e)}const kf={...L_,...Sr("MuiOutlinedInput",["root","notchedOutline","input"])};function pLe(e){return yr("MuiFilledInput",e)}const ty={...L_,...Sr("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},mLe=pr(V.jsx("path",{d:"M7 10l5 5 5-5z"})),gLe=pr(V.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function vLe(e){return yr("MuiAvatar",e)}Sr("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const yLe=e=>{const{classes:t,variant:r,colorDefault:i}=e;return br({root:["root",r,i&&"colorDefault"],img:["img"],fallback:["fallback"]},vLe,t)},bLe=wt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(Mr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),_Le=wt("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),wLe=wt(gLe,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function xLe({crossOrigin:e,referrerPolicy:t,src:r,srcSet:i}){const[n,a]=G.useState(!1);return G.useEffect(()=>{if(!r&&!i)return;a(!1);let o=!0;const s=new Image;return s.onload=()=>{o&&a("loaded")},s.onerror=()=>{o&&a("error")},s.crossOrigin=e,s.referrerPolicy=t,s.src=r,i&&(s.srcset=i),()=>{o=!1}},[e,t,r,i]),n}const hE=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiAvatar"}),{alt:n,children:a,className:o,component:s="div",slots:l={},slotProps:u={},imgProps:c,sizes:d,src:h,srcSet:f,variant:g="circular",...p}=i;let m=null;const y={...i,component:s,variant:g},b=xLe({...c,...typeof u.img=="function"?u.img(y):u.img,src:h,srcSet:f}),w=h||f,x=w&&b!=="error";y.colorDefault=!x,delete y.ownerState;const S=yLe(y),[C,T]=jr("img",{className:S.img,elementType:_Le,externalForwardedProps:{slots:l,slotProps:{img:{...c,...u.img}}},additionalProps:{alt:n,src:h,srcSet:f,sizes:d},ownerState:y});return x?m=V.jsx(C,{...T}):a||a===0?m=a:w&&n?m=n[0]:m=V.jsx(wLe,{ownerState:y,className:S.fallback}),V.jsx(bLe,{as:s,className:At(S.root,o),ref:r,...p,ownerState:y,children:m})}),SLe={entering:{opacity:1},entered:{opacity:1}},CLe=G.forwardRef(function(t,r){const i=aa(),n={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:s,easing:l,in:u,onEnter:c,onEntered:d,onEntering:h,onExit:f,onExited:g,onExiting:p,style:m,timeout:y=n,TransitionComponent:b=Zs,...w}=t,x=G.useRef(null),S=en(x,yb(s),r),C=I=>q=>{if(I){const $=x.current;q===void 0?I($):I($,q)}},T=C(h),M=C((I,q)=>{N8(I);const $=vv({style:m,timeout:y,easing:l},{mode:"enter"});I.style.webkitTransition=i.transitions.create("opacity",$),I.style.transition=i.transitions.create("opacity",$),c&&c(I,q)}),A=C(d),P=C(p),O=C(I=>{const q=vv({style:m,timeout:y,easing:l},{mode:"exit"});I.style.webkitTransition=i.transitions.create("opacity",q),I.style.transition=i.transitions.create("opacity",q),f&&f(I)}),j=C(g),D=I=>{a&&a(x.current,I)};return V.jsx(b,{appear:o,in:u,nodeRef:x,onEnter:M,onEntered:A,onEntering:T,onExit:O,onExited:j,onExiting:P,addEndListener:D,timeout:y,...w,children:(I,{ownerState:q,...$})=>G.cloneElement(s,{style:{opacity:0,visibility:I==="exited"&&!u?"hidden":void 0,...SLe[I],...m,...s.props.style},ref:S,...$})})});function ELe(e){return yr("MuiBackdrop",e)}Sr("MuiBackdrop",["root","invisible"]);const MLe=e=>{const{classes:t,invisible:r}=e;return br({root:["root",r&&"invisible"]},ELe,t)},PLe=wt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),TLe=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiBackdrop"}),{children:n,className:a,component:o="div",invisible:s=!1,open:l,components:u={},componentsProps:c={},slotProps:d={},slots:h={},TransitionComponent:f,transitionDuration:g,...p}=i,m={...i,component:o,invisible:s},y=MLe(m),b={transition:f,root:u.Root,...h},w={...c,...d},x={slots:b,slotProps:w},[S,C]=jr("root",{elementType:PLe,externalForwardedProps:x,className:At(y.root,a),ownerState:m}),[T,M]=jr("transition",{elementType:CLe,externalForwardedProps:x,ownerState:m});return V.jsx(T,{in:l,timeout:g,...p,...M,children:V.jsx(S,{"aria-hidden":!0,...C,classes:y,ref:r,children:n})})}),ALe=Sr("MuiBox",["root"]),OLe=P2(),Rt=OIe({themeId:Sf,defaultTheme:OLe,defaultClassName:ALe.root,generateClassName:Ive.generate});function RLe(e){return yr("MuiButton",e)}const ry=Sr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),DLe=G.createContext({}),ILe=G.createContext(void 0),jLe=e=>{const{color:t,disableElevation:r,fullWidth:i,size:n,variant:a,loading:o,loadingPosition:s,classes:l}=e,u={root:["root",o&&"loading",a,`${a}${bt(t)}`,`size${bt(n)}`,`${a}Size${bt(n)}`,`color${bt(t)}`,r&&"disableElevation",i&&"fullWidth",o&&`loadingPosition${bt(s)}`],startIcon:["icon","startIcon",`iconSize${bt(n)}`],endIcon:["icon","endIcon",`iconSize${bt(n)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},c=br(u,RLe,l);return{...l,...c}},xye=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],zLe=wt(ib,{shouldForwardProp:e=>cs(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${bt(r.color)}`],t[`size${bt(r.size)}`],t[`${r.variant}Size${bt(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(Mr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${ry.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${ry.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${ry.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${ry.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Zi()).map(([i])=>({props:{color:i},style:{"--variant-textColor":(e.vars||e).palette[i].main,"--variant-outlinedColor":(e.vars||e).palette[i].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[i].mainChannel} / 0.5)`:Si(e.palette[i].main,.5),"--variant-containedColor":(e.vars||e).palette[i].contrastText,"--variant-containedBg":(e.vars||e).palette[i].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[i].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[i].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Si(e.palette[i].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[i].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[i].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Si(e.palette[i].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Si(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Si(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${ry.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${ry.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${ry.loading}`]:{color:"transparent"}}}]}})),BLe=wt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t[`iconSize${bt(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...xye]})),LLe=wt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t[`iconSize${bt(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...xye]})),FLe=wt("span",{name:"MuiButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),J7=wt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder",overridesResolver:(e,t)=>t.loadingIconPlaceholder})({display:"inline-block",width:"1em",height:"1em"}),ja=G.forwardRef(function(t,r){const i=G.useContext(DLe),n=G.useContext(ILe),a=KE(i,t),o=_r({props:a,name:"MuiButton"}),{children:s,color:l="primary",component:u="button",className:c,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:f=!1,endIcon:g,focusVisibleClassName:p,fullWidth:m=!1,id:y,loading:b=null,loadingIndicator:w,loadingPosition:x="center",size:S="medium",startIcon:C,type:T,variant:M="text",...A}=o,P=JM(y),O=w??V.jsx(cye,{"aria-labelledby":P,color:"inherit",size:16}),j={...o,color:l,component:u,disabled:d,disableElevation:h,disableFocusRipple:f,fullWidth:m,loading:b,loadingIndicator:O,loadingPosition:x,size:S,type:T,variant:M},D=jLe(j),I=(C||b&&x==="start")&&V.jsx(BLe,{className:D.startIcon,ownerState:j,children:C||V.jsx(J7,{className:D.loadingIconPlaceholder,ownerState:j})}),q=(g||b&&x==="end")&&V.jsx(LLe,{className:D.endIcon,ownerState:j,children:g||V.jsx(J7,{className:D.loadingIconPlaceholder,ownerState:j})}),$=n||"",X=typeof b=="boolean"?V.jsx("span",{className:D.loadingWrapper,style:{display:"contents"},children:b&&V.jsx(FLe,{className:D.loadingIndicator,ownerState:j,children:O})}):null;return V.jsxs(zLe,{ownerState:j,className:At(i.className,D.root,c,$),component:u,disabled:d||b,focusRipple:!f,focusVisibleClassName:At(D.focusVisible,p),ref:r,type:T,id:b?P:y,...A,classes:D,children:[I,x!=="end"&&X,s,x==="end"&&X,q]})});function NLe(e){return yr("MuiCard",e)}Sr("MuiCard",["root"]);const ULe=e=>{const{classes:t}=e;return br({root:["root"]},NLe,t)},VLe=wt(Na,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),kLe=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiCard"}),{className:n,raised:a=!1,...o}=i,s={...i,raised:a},l=ULe(s);return V.jsx(VLe,{className:At(l.root,n),elevation:a?8:void 0,ref:r,ownerState:s,...o})});function qLe(e){return yr("MuiCardContent",e)}Sr("MuiCardContent",["root"]);const WLe=e=>{const{classes:t}=e;return br({root:["root"]},qLe,t)},GLe=wt("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),HLe=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiCardContent"}),{className:n,component:a="div",...o}=i,s={...i,component:a},l=WLe(s);return V.jsx(GLe,{as:a,className:At(l.root,n),ownerState:s,ref:r,...o})}),qs=Cje({createStyledComponent:wt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${bt(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>_r({props:e,name:"MuiContainer"})}),lV=typeof B8({})=="function",$Le=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),XLe=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),Sye=(e,t=!1)=>{var a,o;const r={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([s,l])=>{var c,d;const u=e.getColorSchemeSelector(s);u.startsWith("@")?r[u]={":root":{colorScheme:(c=l.palette)==null?void 0:c.mode}}:r[u.replace(/\s*&/,"")]={colorScheme:(d=l.palette)==null?void 0:d.mode}});let i={html:$Le(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...XLe(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...r};const n=(o=(a=e.components)==null?void 0:a.MuiCssBaseline)==null?void 0:o.styleOverrides;return n&&(i=[i,n]),i},WO="mui-ecs",YLe=e=>{const t=Sye(e,!1),r=Array.isArray(t)?t[0]:t;return!e.vars&&r&&(r.html[`:root:has(${WO})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([i,n])=>{var o,s;const a=e.getColorSchemeSelector(i);a.startsWith("@")?r[a]={[`:root:not(:has(.${WO}))`]:{colorScheme:(o=n.palette)==null?void 0:o.mode}}:r[a.replace(/\s*&/,"")]={[`&:not(:has(.${WO}))`]:{colorScheme:(s=n.palette)==null?void 0:s.mode}}}),t},KLe=B8(lV?({theme:e,enableColorScheme:t})=>Sye(e,t):({theme:e})=>YLe(e));function QLe(e){const t=_r({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:i=!1}=t;return V.jsxs(G.Fragment,{children:[lV&&V.jsx(KLe,{enableColorScheme:i}),!lV&&!i&&V.jsx("span",{className:WO,style:{display:"none"}}),r]})}function JLe(e){const t=Bo(e);return t.body===e?ss(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function fE(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Z7(e){return parseInt(ss(e).getComputedStyle(e).paddingRight,10)||0}function ZLe(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),i=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||i}function eX(e,t,r,i,n){const a=[t,r,...i];[].forEach.call(e.children,o=>{const s=!a.includes(o),l=!ZLe(o);s&&l&&fE(o,n)})}function R3(e,t){let r=-1;return e.some((i,n)=>t(i)?(r=n,!0):!1),r}function eFe(e,t){const r=[],i=e.container;if(!t.disableScrollLock){if(JLe(i)){const o=qve(ss(i));r.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${Z7(i)+o}px`;const s=Bo(i).querySelectorAll(".mui-fixed");[].forEach.call(s,l=>{r.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${Z7(l)+o}px`})}let a;if(i.parentNode instanceof DocumentFragment)a=Bo(i).body;else{const o=i.parentElement,s=ss(i);a=(o==null?void 0:o.nodeName)==="HTML"&&s.getComputedStyle(o).overflowY==="scroll"?o:i}r.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return()=>{r.forEach(({value:a,el:o,property:s})=>{a?o.style.setProperty(s,a):o.style.removeProperty(s)})}}function tFe(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class rFe{constructor(){this.modals=[],this.containers=[]}add(t,r){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&fE(t.modalRef,!1);const n=tFe(r);eX(r,t.mount,t.modalRef,n,!0);const a=R3(this.containers,o=>o.container===r);return a!==-1?(this.containers[a].modals.push(t),i):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:n}),i)}mount(t,r){const i=R3(this.containers,a=>a.modals.includes(t)),n=this.containers[i];n.restore||(n.restore=eFe(n,r))}remove(t,r=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const n=R3(this.containers,o=>o.modals.includes(t)),a=this.containers[n];if(a.modals.splice(a.modals.indexOf(t),1),this.modals.splice(i,1),a.modals.length===0)a.restore&&a.restore(),t.modalRef&&fE(t.modalRef,r),eX(a.container,t.mount,t.modalRef,a.hiddenSiblings,!1),this.containers.splice(n,1);else{const o=a.modals[a.modals.length-1];o.modalRef&&fE(o.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const iFe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function nFe(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function aFe(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=i=>e.ownerDocument.querySelector(`input[type="radio"]${i}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function oFe(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||aFe(e))}function sFe(e){const t=[],r=[];return Array.from(e.querySelectorAll(iFe)).forEach((i,n)=>{const a=nFe(i);a===-1||!oFe(i)||(a===0?t.push(i):r.push({documentOrder:n,tabIndex:a,node:i}))}),r.sort((i,n)=>i.tabIndex===n.tabIndex?i.documentOrder-n.documentOrder:i.tabIndex-n.tabIndex).map(i=>i.node).concat(t)}function lFe(){return!0}function uFe(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:i=!1,disableRestoreFocus:n=!1,getTabbable:a=sFe,isEnabled:o=lFe,open:s}=e,l=G.useRef(!1),u=G.useRef(null),c=G.useRef(null),d=G.useRef(null),h=G.useRef(null),f=G.useRef(!1),g=G.useRef(null),p=en(yb(t),g),m=G.useRef(null);G.useEffect(()=>{!s||!g.current||(f.current=!r)},[r,s]),G.useEffect(()=>{if(!s||!g.current)return;const w=Bo(g.current);return g.current.contains(w.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),f.current&&g.current.focus()),()=>{n||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[s]),G.useEffect(()=>{if(!s||!g.current)return;const w=Bo(g.current),x=T=>{m.current=T,!(i||!o()||T.key!=="Tab")&&w.activeElement===g.current&&T.shiftKey&&(l.current=!0,c.current&&c.current.focus())},S=()=>{var A,P;const T=g.current;if(T===null)return;if(!w.hasFocus()||!o()||l.current){l.current=!1;return}if(T.contains(w.activeElement)||i&&w.activeElement!==u.current&&w.activeElement!==c.current)return;if(w.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!f.current)return;let M=[];if((w.activeElement===u.current||w.activeElement===c.current)&&(M=a(g.current)),M.length>0){const O=!!((A=m.current)!=null&&A.shiftKey&&((P=m.current)==null?void 0:P.key)==="Tab"),j=M[0],D=M[M.length-1];typeof j!="string"&&typeof D!="string"&&(O?D.focus():j.focus())}else T.focus()};w.addEventListener("focusin",S),w.addEventListener("keydown",x,!0);const C=setInterval(()=>{w.activeElement&&w.activeElement.tagName==="BODY"&&S()},50);return()=>{clearInterval(C),w.removeEventListener("focusin",S),w.removeEventListener("keydown",x,!0)}},[r,i,n,o,s,a]);const y=w=>{d.current===null&&(d.current=w.relatedTarget),f.current=!0,h.current=w.target;const x=t.props.onFocus;x&&x(w)},b=w=>{d.current===null&&(d.current=w.relatedTarget),f.current=!0};return V.jsxs(G.Fragment,{children:[V.jsx("div",{tabIndex:s?0:-1,onFocus:b,ref:u,"data-testid":"sentinelStart"}),G.cloneElement(t,{ref:p,onFocus:y}),V.jsx("div",{tabIndex:s?0:-1,onFocus:b,ref:c,"data-testid":"sentinelEnd"})]})}function cFe(e){return typeof e=="function"?e():e}function dFe(e){return e?e.props.hasOwnProperty("in"):!1}const tX=()=>{},HT=new rFe;function hFe(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:i=!1,closeAfterTransition:n=!1,onTransitionEnter:a,onTransitionExited:o,children:s,onClose:l,open:u,rootRef:c}=e,d=G.useRef({}),h=G.useRef(null),f=G.useRef(null),g=en(f,c),[p,m]=G.useState(!u),y=dFe(s);let b=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(b=!1);const w=()=>Bo(h.current),x=()=>(d.current.modalRef=f.current,d.current.mount=h.current,d.current),S=()=>{HT.mount(x(),{disableScrollLock:i}),f.current&&(f.current.scrollTop=0)},C=Vs(()=>{const q=cFe(t)||w().body;HT.add(x(),q),f.current&&S()}),T=()=>HT.isTopModal(x()),M=Vs(q=>{h.current=q,q&&(u&&T()?S():f.current&&fE(f.current,b))}),A=G.useCallback(()=>{HT.remove(x(),b)},[b]);G.useEffect(()=>()=>{A()},[A]),G.useEffect(()=>{u?C():(!y||!n)&&A()},[u,A,y,n,C]);const P=q=>$=>{var X;(X=q.onKeyDown)==null||X.call(q,$),!($.key!=="Escape"||$.which===229||!T())&&(r||($.stopPropagation(),l&&l($,"escapeKeyDown")))},O=q=>$=>{var X;(X=q.onClick)==null||X.call(q,$),$.target===$.currentTarget&&l&&l($,"backdropClick")};return{getRootProps:(q={})=>{const $=Gve(e);delete $.onTransitionEnter,delete $.onTransitionExited;const X={...$,...q};return{role:"presentation",...X,onKeyDown:P(X),ref:g}},getBackdropProps:(q={})=>{const $=q;return{"aria-hidden":!0,...$,onClick:O($),open:u}},getTransitionProps:()=>{const q=()=>{m(!1),a&&a()},$=()=>{m(!0),o&&o(),n&&A()};return{onEnter:f7(q,(s==null?void 0:s.props.onEnter)??tX),onExited:f7($,(s==null?void 0:s.props.onExited)??tX)}},rootRef:g,portalRef:M,isTopModal:T,exited:p,hasTransition:y}}function fFe(e){return yr("MuiModal",e)}Sr("MuiModal",["root","hidden","backdrop"]);const pFe=e=>{const{open:t,exited:r,classes:i}=e;return br({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},fFe,i)},mFe=wt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(Mr(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),gFe=wt(TLe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Cye=G.forwardRef(function(t,r){const i=_r({name:"MuiModal",props:t}),{BackdropComponent:n=gFe,BackdropProps:a,classes:o,className:s,closeAfterTransition:l=!1,children:u,container:c,component:d,components:h={},componentsProps:f={},disableAutoFocus:g=!1,disableEnforceFocus:p=!1,disableEscapeKeyDown:m=!1,disablePortal:y=!1,disableRestoreFocus:b=!1,disableScrollLock:w=!1,hideBackdrop:x=!1,keepMounted:S=!1,onClose:C,onTransitionEnter:T,onTransitionExited:M,open:A,slotProps:P={},slots:O={},theme:j,...D}=i,I={...i,closeAfterTransition:l,disableAutoFocus:g,disableEnforceFocus:p,disableEscapeKeyDown:m,disablePortal:y,disableRestoreFocus:b,disableScrollLock:w,hideBackdrop:x,keepMounted:S},{getRootProps:q,getBackdropProps:$,getTransitionProps:X,portalRef:N,isTopModal:Q,exited:F,hasTransition:L}=hFe({...I,rootRef:r}),Y={...I,exited:F},ae=pFe(Y),re={};if(u.props.tabIndex===void 0&&(re.tabIndex="-1"),L){const{onEnter:oe,onExited:me}=X();re.onEnter=oe,re.onExited=me}const H={slots:{root:h.Root,backdrop:h.Backdrop,...O},slotProps:{...f,...P}},[se,le]=jr("root",{ref:r,elementType:mFe,externalForwardedProps:{...H,...D,component:d},getSlotProps:q,ownerState:Y,className:At(s,ae==null?void 0:ae.root,!Y.open&&Y.exited&&(ae==null?void 0:ae.hidden))}),[ee,J]=jr("backdrop",{ref:a==null?void 0:a.ref,elementType:n,externalForwardedProps:H,shouldForwardComponentProp:!0,additionalProps:a,getSlotProps:oe=>$({...oe,onClick:me=>{oe!=null&&oe.onClick&&oe.onClick(me)}}),className:At(a==null?void 0:a.className,ae==null?void 0:ae.backdrop),ownerState:Y});return!S&&!A&&(!L||F)?null:V.jsx(_ye,{ref:N,container:c,disablePortal:y,children:V.jsxs(se,{...le,children:[!x&&n?V.jsx(ee,{...J}):null,V.jsx(uFe,{disableEnforceFocus:p,disableAutoFocus:g,disableRestoreFocus:b,isEnabled:Q,open:A,children:G.cloneElement(u,re)})]})})});function vFe(e){return yr("MuiDivider",e)}Sr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const yFe=e=>{const{absolute:t,children:r,classes:i,flexItem:n,light:a,orientation:o,textAlign:s,variant:l}=e;return br({root:["root",t&&"absolute",l,a&&"light",o==="vertical"&&"vertical",n&&"flexItem",r&&"withChildren",r&&o==="vertical"&&"withChildrenVertical",s==="right"&&o!=="vertical"&&"textAlignRight",s==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},vFe,i)},bFe=wt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(Mr(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Si(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),_Fe=wt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(Mr(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),NR=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiDivider"}),{absolute:n=!1,children:a,className:o,orientation:s="horizontal",component:l=a||s==="vertical"?"div":"hr",flexItem:u=!1,light:c=!1,role:d=l!=="hr"?"separator":void 0,textAlign:h="center",variant:f="fullWidth",...g}=i,p={...i,absolute:n,component:l,flexItem:u,light:c,orientation:s,role:d,textAlign:h,variant:f},m=yFe(p);return V.jsx(bFe,{as:l,className:At(m.root,o),role:d,ref:r,ownerState:p,"aria-orientation":d==="separator"&&(l!=="hr"||s==="vertical")?s:void 0,...g,children:a?V.jsx(_Fe,{className:m.wrapper,ownerState:p,children:a}):null})});NR&&(NR.muiSkipListHighlight=!0);function wFe(e,t,r){const i=t.getBoundingClientRect(),n=r&&r.getBoundingClientRect(),a=ss(t);let o;if(t.fakeTransform)o=t.fakeTransform;else{const u=a.getComputedStyle(t);o=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("transform")}let s=0,l=0;if(o&&o!=="none"&&typeof o=="string"){const u=o.split("(")[1].split(")")[0].split(",");s=parseInt(u[4],10),l=parseInt(u[5],10)}return e==="left"?n?`translateX(${n.right+s-i.left}px)`:`translateX(${a.innerWidth+s-i.left}px)`:e==="right"?n?`translateX(-${i.right-n.left-s}px)`:`translateX(-${i.left+i.width-s}px)`:e==="up"?n?`translateY(${n.bottom+l-i.top}px)`:`translateY(${a.innerHeight+l-i.top}px)`:n?`translateY(-${i.top-n.top+i.height-l}px)`:`translateY(-${i.top+i.height-l}px)`}function xFe(e){return typeof e=="function"?e():e}function $T(e,t,r){const i=xFe(r),n=wFe(e,t,i);n&&(t.style.webkitTransform=n,t.style.transform=n)}const SFe=G.forwardRef(function(t,r){const i=aa(),n={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:l,container:u,direction:c="down",easing:d=n,in:h,onEnter:f,onEntered:g,onEntering:p,onExit:m,onExited:y,onExiting:b,style:w,timeout:x=a,TransitionComponent:S=Zs,...C}=t,T=G.useRef(null),M=en(yb(l),T,r),A=N=>Q=>{N&&(Q===void 0?N(T.current):N(T.current,Q))},P=A((N,Q)=>{$T(c,N,u),N8(N),f&&f(N,Q)}),O=A((N,Q)=>{const F=vv({timeout:x,style:w,easing:d},{mode:"enter"});N.style.webkitTransition=i.transitions.create("-webkit-transform",{...F}),N.style.transition=i.transitions.create("transform",{...F}),N.style.webkitTransform="none",N.style.transform="none",p&&p(N,Q)}),j=A(g),D=A(b),I=A(N=>{const Q=vv({timeout:x,style:w,easing:d},{mode:"exit"});N.style.webkitTransition=i.transitions.create("-webkit-transform",Q),N.style.transition=i.transitions.create("transform",Q),$T(c,N,u),m&&m(N)}),q=A(N=>{N.style.webkitTransition="",N.style.transition="",y&&y(N)}),$=N=>{o&&o(T.current,N)},X=G.useCallback(()=>{T.current&&$T(c,T.current,u)},[c,u]);return G.useEffect(()=>{if(h||c==="down"||c==="right")return;const N=QM(()=>{T.current&&$T(c,T.current,u)}),Q=ss(T.current);return Q.addEventListener("resize",N),()=>{N.clear(),Q.removeEventListener("resize",N)}},[c,h,u]),G.useEffect(()=>{h||X()},[h,X]),V.jsx(S,{nodeRef:T,onEnter:P,onEntered:j,onEntering:O,onExit:I,onExited:q,onExiting:D,addEndListener:$,appear:s,in:h,timeout:x,...C,children:(N,{ownerState:Q,...F})=>G.cloneElement(l,{ref:M,style:{visibility:N==="exited"&&!h?"hidden":void 0,...w,...l.props.style},...F})})});function CFe(e){return yr("MuiDrawer",e)}Sr("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Eye=(e,t)=>{const{ownerState:r}=e;return[t.root,(r.variant==="permanent"||r.variant==="persistent")&&t.docked,t.modal]},EFe=e=>{const{classes:t,anchor:r,variant:i}=e,n={root:["root",`anchor${bt(r)}`],docked:[(i==="permanent"||i==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${bt(r)}`,i!=="temporary"&&`paperAnchorDocked${bt(r)}`]};return br(n,CFe,t)},MFe=wt(Cye,{name:"MuiDrawer",slot:"Root",overridesResolver:Eye})(Mr(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),PFe=wt("div",{shouldForwardProp:cs,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Eye})({flex:"0 0 auto"}),TFe=wt(Na,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${bt(r.anchor)}`],r.variant!=="temporary"&&t[`paperAnchorDocked${bt(r.anchor)}`]]}})(Mr(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),Mye={left:"right",right:"left",top:"down",bottom:"up"};function AFe(e){return["left","right"].includes(e)}function OFe({direction:e},t){return e==="rtl"&&AFe(t)?Mye[t]:t}const Pye=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiDrawer"}),n=aa(),a=bb(),o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:l,children:u,className:c,elevation:d=16,hideBackdrop:h=!1,ModalProps:{BackdropProps:f,...g}={},onClose:p,open:m=!1,PaperProps:y={},SlideProps:b,TransitionComponent:w,transitionDuration:x=o,variant:S="temporary",slots:C={},slotProps:T={},...M}=i,A=G.useRef(!1);G.useEffect(()=>{A.current=!0},[]);const P=OFe({direction:a?"rtl":"ltr"},s),j={...i,anchor:s,elevation:d,open:m,variant:S,...M},D=EFe(j),I={slots:{transition:w,...C},slotProps:{paper:y,transition:b,...T,backdrop:sye(T.backdrop||{...l,...f},{transitionDuration:x})}},[q,$]=jr("root",{ref:r,elementType:MFe,className:At(D.root,D.modal,c),shouldForwardComponentProp:!0,ownerState:j,externalForwardedProps:{...I,...M,...g},additionalProps:{open:m,onClose:p,hideBackdrop:h,slots:{backdrop:I.slots.backdrop},slotProps:{backdrop:I.slotProps.backdrop}}}),[X,N]=jr("paper",{elementType:TFe,shouldForwardComponentProp:!0,className:At(D.paper,y.className),ownerState:j,externalForwardedProps:I,additionalProps:{elevation:S==="temporary"?d:0,square:!0}}),[Q,F]=jr("docked",{elementType:PFe,ref:r,className:At(D.root,D.docked,c),ownerState:j,externalForwardedProps:I,additionalProps:M}),[L,Y]=jr("transition",{elementType:SFe,ownerState:j,externalForwardedProps:I,additionalProps:{in:m,direction:Mye[P],timeout:x,appear:A.current}}),ae=V.jsx(X,{...N,children:u});if(S==="permanent")return V.jsx(Q,{...F,children:ae});const re=V.jsx(L,{...Y,children:ae});return S==="persistent"?V.jsx(Q,{...F,children:re}):V.jsx(q,{...$,children:re})}),RFe=e=>{const{classes:t,disableUnderline:r,startAdornment:i,endAdornment:n,size:a,hiddenLabel:o,multiline:s}=e,l={root:["root",!r&&"underline",i&&"adornedStart",n&&"adornedEnd",a==="small"&&`size${bt(a)}`,o&&"hiddenLabel",s&&"multiline"],input:["input"]},u=br(l,pLe,t);return{...t,...u}},DFe=wt(R2,{shouldForwardProp:e=>cs(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...A2(e,t),!r.disableUnderline&&t.underline]}})(Mr(({theme:e})=>{const t=e.palette.mode==="light",r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",n=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:n,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i}},[`&.${ty.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i},[`&.${ty.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:a},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ty.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ty.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ty.disabled}, .${ty.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${ty.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Zi()).map(([o])=>{var s;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(s=(e.vars||e).palette[o])==null?void 0:s.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:s})=>o.multiline&&s==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),IFe=wt(D2,{name:"MuiFilledInput",slot:"Input",overridesResolver:O2})(Mr(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),Y8=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiFilledInput"}),{disableUnderline:n=!1,components:a={},componentsProps:o,fullWidth:s=!1,hiddenLabel:l,inputComponent:u="input",multiline:c=!1,slotProps:d,slots:h={},type:f="text",...g}=i,p={...i,disableUnderline:n,fullWidth:s,inputComponent:u,multiline:c,type:f},m=RFe(i),y={root:{ownerState:p},input:{ownerState:p}},b=d??o?ra(y,d??o):y,w=h.root??a.Root??DFe,x=h.input??a.Input??IFe;return V.jsx(X8,{slots:{root:w,input:x},slotProps:b,fullWidth:s,inputComponent:u,multiline:c,ref:r,type:f,...g,classes:m})});Y8.muiName="Input";function jFe(e){return yr("MuiFormControl",e)}Sr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const zFe=e=>{const{classes:t,margin:r,fullWidth:i}=e,n={root:["root",r!=="none"&&`margin${bt(r)}`,i&&"fullWidth"]};return br(n,jFe,t)},BFe=wt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`margin${bt(r.margin)}`],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),LFe=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiFormControl"}),{children:n,className:a,color:o="primary",component:s="div",disabled:l=!1,error:u=!1,focused:c,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:g=!1,size:p="medium",variant:m="outlined",...y}=i,b={...i,color:o,component:s,disabled:l,error:u,fullWidth:d,hiddenLabel:h,margin:f,required:g,size:p,variant:m},w=zFe(b),[x,S]=G.useState(()=>{let q=!1;return n&&G.Children.forEach(n,$=>{if(!uE($,["Input","Select"]))return;const X=uE($,["Select"])?$.props.input:$;X&&uLe(X.props)&&(q=!0)}),q}),[C,T]=G.useState(()=>{let q=!1;return n&&G.Children.forEach(n,$=>{uE($,["Input","Select"])&&(FR($.props,!0)||FR($.props.inputProps,!0))&&(q=!0)}),q}),[M,A]=G.useState(!1);l&&M&&A(!1);const P=c!==void 0&&!l?c:M;let O;G.useRef(!1);const j=G.useCallback(()=>{T(!0)},[]),D=G.useCallback(()=>{T(!1)},[]),I=G.useMemo(()=>({adornedStart:x,setAdornedStart:S,color:o,disabled:l,error:u,filled:C,focused:P,fullWidth:d,hiddenLabel:h,size:p,onBlur:()=>{A(!1)},onFocus:()=>{A(!0)},onEmpty:D,onFilled:j,registerEffect:O,required:g,variant:m}),[x,o,l,u,C,P,d,h,O,D,j,g,p,m]);return V.jsx($8.Provider,{value:I,children:V.jsx(BFe,{as:s,ownerState:b,className:At(w.root,a),ref:r,...y,children:n})})});function FFe(e){return yr("MuiFormHelperText",e)}const rX=Sr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var iX;const NFe=e=>{const{classes:t,contained:r,size:i,disabled:n,error:a,filled:o,focused:s,required:l}=e,u={root:["root",n&&"disabled",a&&"error",i&&`size${bt(i)}`,r&&"contained",s&&"focused",o&&"filled",l&&"required"]};return br(u,FFe,t)},UFe=wt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${bt(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(Mr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${rX.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${rX.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),VFe=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiFormHelperText"}),{children:n,className:a,component:o="p",disabled:s,error:l,filled:u,focused:c,margin:d,required:h,variant:f,...g}=i,p=dw(),m=cw({props:i,muiFormControl:p,states:["variant","size","disabled","error","filled","focused","required"]}),y={...i,component:o,contained:m.variant==="filled"||m.variant==="outlined",variant:m.variant,size:m.size,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required};delete y.ownerState;const b=NFe(y);return V.jsx(UFe,{as:o,className:At(b.root,a),ref:r,...g,ownerState:y,children:n===" "?iX||(iX=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):n})});function kFe(e){return yr("MuiFormLabel",e)}const pE=Sr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),qFe=e=>{const{classes:t,color:r,focused:i,disabled:n,error:a,filled:o,required:s}=e,l={root:["root",`color${bt(r)}`,n&&"disabled",a&&"error",o&&"filled",i&&"focused",s&&"required"],asterisk:["asterisk",a&&"error"]};return br(l,kFe,t)},WFe=wt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color==="secondary"&&t.colorSecondary,r.filled&&t.filled]}})(Mr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Zi()).map(([t])=>({props:{color:t},style:{[`&.${pE.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${pE.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${pE.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),GFe=wt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(Mr(({theme:e})=>({[`&.${pE.error}`]:{color:(e.vars||e).palette.error.main}}))),HFe=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiFormLabel"}),{children:n,className:a,color:o,component:s="label",disabled:l,error:u,filled:c,focused:d,required:h,...f}=i,g=dw(),p=cw({props:i,muiFormControl:g,states:["color","required","focused","disabled","error","filled"]}),m={...i,color:p.color||"primary",component:s,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required},y=qFe(m);return V.jsxs(WFe,{as:s,ownerState:m,className:At(y.root,a),ref:r,...f,children:[n,p.required&&V.jsxs(GFe,{ownerState:m,"aria-hidden":!0,className:y.asterisk,children:["","*"]})]})}),Da=Uje({createStyledComponent:wt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>_r({props:e,name:"MuiGrid"}),useTheme:aa});function uV(e){return`scale(${e}, ${e**2})`}const $Fe={entering:{opacity:1,transform:uV(1)},entered:{opacity:1,transform:"none"}},D3=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),UR=G.forwardRef(function(t,r){const{addEndListener:i,appear:n=!0,children:a,easing:o,in:s,onEnter:l,onEntered:u,onEntering:c,onExit:d,onExited:h,onExiting:f,style:g,timeout:p="auto",TransitionComponent:m=Zs,...y}=t,b=O0(),w=G.useRef(),x=aa(),S=G.useRef(null),C=en(S,yb(a),r),T=q=>$=>{if(q){const X=S.current;$===void 0?q(X):q(X,$)}},M=T(c),A=T((q,$)=>{N8(q);const{duration:X,delay:N,easing:Q}=vv({style:g,timeout:p,easing:o},{mode:"enter"});let F;p==="auto"?(F=x.transitions.getAutoHeightDuration(q.clientHeight),w.current=F):F=X,q.style.transition=[x.transitions.create("opacity",{duration:F,delay:N}),x.transitions.create("transform",{duration:D3?F:F*.666,delay:N,easing:Q})].join(","),l&&l(q,$)}),P=T(u),O=T(f),j=T(q=>{const{duration:$,delay:X,easing:N}=vv({style:g,timeout:p,easing:o},{mode:"exit"});let Q;p==="auto"?(Q=x.transitions.getAutoHeightDuration(q.clientHeight),w.current=Q):Q=$,q.style.transition=[x.transitions.create("opacity",{duration:Q,delay:X}),x.transitions.create("transform",{duration:D3?Q:Q*.666,delay:D3?X:X||Q*.333,easing:N})].join(","),q.style.opacity=0,q.style.transform=uV(.75),d&&d(q)}),D=T(h),I=q=>{p==="auto"&&b.start(w.current||0,q),i&&i(S.current,q)};return V.jsx(m,{appear:n,in:s,nodeRef:S,onEnter:A,onEntered:P,onEntering:M,onExit:j,onExited:D,onExiting:O,addEndListener:I,timeout:p==="auto"?null:p,...y,children:(q,{ownerState:$,...X})=>G.cloneElement(a,{style:{opacity:0,transform:uV(.75),visibility:q==="exited"&&!s?"hidden":void 0,...$Fe[q],...g,...a.props.style},ref:C,...X})})});UR&&(UR.muiSupportAuto=!0);const XFe=e=>{const{classes:t,disableUnderline:r}=e,n=br({root:["root",!r&&"underline"],input:["input"]},hLe,t);return{...t,...n}},YFe=wt(R2,{shouldForwardProp:e=>cs(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...A2(e,t),!r.disableUnderline&&t.underline]}})(Mr(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:i})=>i.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Cx.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Cx.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Cx.disabled}, .${Cx.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Cx.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Zi()).map(([i])=>({props:{color:i,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[i].main}`}}}))]}})),KFe=wt(D2,{name:"MuiInput",slot:"Input",overridesResolver:O2})({}),K8=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiInput"}),{disableUnderline:n=!1,components:a={},componentsProps:o,fullWidth:s=!1,inputComponent:l="input",multiline:u=!1,slotProps:c,slots:d={},type:h="text",...f}=i,g=XFe(i),m={root:{ownerState:{disableUnderline:n}}},y=c??o?ra(c??o,m):m,b=d.root??a.Root??YFe,w=d.input??a.Input??KFe;return V.jsx(X8,{slots:{root:b,input:w},slotProps:y,fullWidth:s,inputComponent:l,multiline:u,ref:r,type:h,...f,classes:g})});K8.muiName="Input";function QFe(e){return yr("MuiInputLabel",e)}Sr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const JFe=e=>{const{classes:t,formControl:r,size:i,shrink:n,disableAnimation:a,variant:o,required:s}=e,l={root:["root",r&&"formControl",!a&&"animated",n&&"shrink",i&&i!=="medium"&&`size${bt(i)}`,o],asterisk:[s&&"asterisk"]},u=br(l,QFe,t);return{...t,...u}},ZFe=wt(HFe,{shouldForwardProp:e=>cs(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${pE.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(Mr(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:i})=>t==="filled"&&r.shrink&&i==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),eNe=G.forwardRef(function(t,r){const i=_r({name:"MuiInputLabel",props:t}),{disableAnimation:n=!1,margin:a,shrink:o,variant:s,className:l,...u}=i,c=dw();let d=o;typeof d>"u"&&c&&(d=c.filled||c.focused||c.adornedStart);const h=cw({props:i,muiFormControl:c,states:["size","variant","required","focused"]}),f={...i,disableAnimation:n,formControl:c,shrink:d,size:h.size,variant:h.variant,required:h.required,focused:h.focused},g=JFe(f);return V.jsx(ZFe,{"data-shrink":d,ref:r,className:At(g.root,l),...u,ownerState:f,classes:g})});function tNe(e){return yr("MuiLinearProgress",e)}Sr("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const cV=4,dV=Cv`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,rNe=typeof dV!="string"?sw`
        animation: ${dV} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,hV=Cv`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,iNe=typeof hV!="string"?sw`
        animation: ${hV} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,fV=Cv`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,nNe=typeof fV!="string"?sw`
        animation: ${fV} 3s infinite linear;
      `:null,aNe=e=>{const{classes:t,variant:r,color:i}=e,n={root:["root",`color${bt(i)}`,r],dashed:["dashed",`dashedColor${bt(i)}`],bar1:["bar","bar1",`barColor${bt(i)}`,(r==="indeterminate"||r==="query")&&"bar1Indeterminate",r==="determinate"&&"bar1Determinate",r==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",r!=="buffer"&&`barColor${bt(i)}`,r==="buffer"&&`color${bt(i)}`,(r==="indeterminate"||r==="query")&&"bar2Indeterminate",r==="buffer"&&"bar2Buffer"]};return br(n,tNe,t)},Q8=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?R_(e.palette[t].main,.62):O_(e.palette[t].main,.5),oNe=wt("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`color${bt(r.color)}`],t[r.variant]]}})(Mr(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter(Zi()).map(([t])=>({props:{color:t},style:{backgroundColor:Q8(e,t)}})),{props:({ownerState:t})=>t.color==="inherit"&&t.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),sNe=wt("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.dashed,t[`dashedColor${bt(r.color)}`]]}})(Mr(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter(Zi()).map(([t])=>{const r=Q8(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`}}})]})),nNe||{animation:`${fV} 3s infinite linear`}),lNe=wt("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t.bar1,t[`barColor${bt(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar1Indeterminate,r.variant==="determinate"&&t.bar1Determinate,r.variant==="buffer"&&t.bar1Buffer]}})(Mr(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter(Zi()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:`transform .${cV}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${cV}s linear`}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:rNe||{animation:`${dV} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),uNe=wt("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t.bar2,t[`barColor${bt(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar2Indeterminate,r.variant==="buffer"&&t.bar2Buffer]}})(Mr(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter(Zi()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:t})=>t.variant!=="buffer"&&t.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:t})=>t.variant!=="buffer"&&t.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter(Zi()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:Q8(e,t),transition:`transform .${cV}s linear`}})),{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:iNe||{animation:`${hV} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),nX=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiLinearProgress"}),{className:n,color:a="primary",value:o,valueBuffer:s,variant:l="indeterminate",...u}=i,c={...i,color:a,variant:l},d=aNe(c),h=bb(),f={},g={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&o!==void 0){f["aria-valuenow"]=Math.round(o),f["aria-valuemin"]=0,f["aria-valuemax"]=100;let p=o-100;h&&(p=-p),g.bar1.transform=`translateX(${p}%)`}if(l==="buffer"&&s!==void 0){let p=(s||0)-100;h&&(p=-p),g.bar2.transform=`translateX(${p}%)`}return V.jsxs(oNe,{className:At(d.root,n),ownerState:c,role:"progressbar",...f,ref:r,...u,children:[l==="buffer"?V.jsx(sNe,{className:d.dashed,ownerState:c}):null,V.jsx(lNe,{className:d.bar1,ownerState:c,style:g.bar1}),l==="determinate"?null:V.jsx(uNe,{className:d.bar2,ownerState:c,style:g.bar2})]})}),Lm=G.createContext({});function cNe(e){return yr("MuiList",e)}Sr("MuiList",["root","padding","dense","subheader"]);const dNe=e=>{const{classes:t,disablePadding:r,dense:i,subheader:n}=e;return br({root:["root",!r&&"padding",i&&"dense",n&&"subheader"]},cNe,t)},hNe=wt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),eM=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiList"}),{children:n,className:a,component:o="ul",dense:s=!1,disablePadding:l=!1,subheader:u,...c}=i,d=G.useMemo(()=>({dense:s}),[s]),h={...i,component:o,dense:s,disablePadding:l},f=dNe(h);return V.jsx(Lm.Provider,{value:d,children:V.jsxs(hNe,{as:o,className:At(f.root,a),ref:r,ownerState:h,...c,children:[u,n]})})});function fNe(e){return yr("MuiListItem",e)}Sr("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function pNe(e){return yr("MuiListItemButton",e)}const B1=Sr("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),mNe=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters]},gNe=e=>{const{alignItems:t,classes:r,dense:i,disabled:n,disableGutters:a,divider:o,selected:s}=e,u=br({root:["root",i&&"dense",!a&&"gutters",o&&"divider",n&&"disabled",t==="flex-start"&&"alignItemsFlexStart",s&&"selected"]},pNe,r);return{...r,...u}},vNe=wt(ib,{shouldForwardProp:e=>cs(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:mNe})(Mr(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${B1.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Si(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${B1.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Si(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${B1.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Si(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Si(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${B1.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${B1.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),aX=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:a=!1,component:o="div",children:s,dense:l=!1,disableGutters:u=!1,divider:c=!1,focusVisibleClassName:d,selected:h=!1,className:f,...g}=i,p=G.useContext(Lm),m=G.useMemo(()=>({dense:l||p.dense||!1,alignItems:n,disableGutters:u}),[n,p.dense,l,u]),y=G.useRef(null);os(()=>{a&&y.current&&y.current.focus()},[a]);const b={...i,alignItems:n,dense:m.dense,disableGutters:u,divider:c,selected:h},w=gNe(b),x=en(y,r);return V.jsx(Lm.Provider,{value:m,children:V.jsx(vNe,{ref:x,href:g.href||g.to,component:(g.href||g.to)&&o==="div"?"button":o,focusVisibleClassName:At(w.focusVisible,d),ownerState:b,className:At(w.root,f),...g,classes:w,children:s})})});function yNe(e){return yr("MuiListItemSecondaryAction",e)}Sr("MuiListItemSecondaryAction",["root","disableGutters"]);const bNe=e=>{const{disableGutters:t,classes:r}=e;return br({root:["root",t&&"disableGutters"]},yNe,r)},_Ne=wt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),Tye=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiListItemSecondaryAction"}),{className:n,...a}=i,o=G.useContext(Lm),s={...i,disableGutters:o.disableGutters},l=bNe(s);return V.jsx(_Ne,{className:At(l.root,n),ownerState:s,ref:r,...a})});Tye.muiName="ListItemSecondaryAction";const wNe=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]},xNe=e=>{const{alignItems:t,classes:r,dense:i,disableGutters:n,disablePadding:a,divider:o,hasSecondaryAction:s}=e;return br({root:["root",i&&"dense",!n&&"gutters",!a&&"padding",o&&"divider",t==="flex-start"&&"alignItemsFlexStart",s&&"secondaryAction"],container:["container"]},fNe,r)},SNe=wt("div",{name:"MuiListItem",slot:"Root",overridesResolver:wNe})(Mr(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${B1.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),CNe=wt("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),pV=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiListItem"}),{alignItems:n="center",children:a,className:o,component:s,components:l={},componentsProps:u={},ContainerComponent:c="li",ContainerProps:{className:d,...h}={},dense:f=!1,disableGutters:g=!1,disablePadding:p=!1,divider:m=!1,secondaryAction:y,slotProps:b={},slots:w={},...x}=i,S=G.useContext(Lm),C=G.useMemo(()=>({dense:f||S.dense||!1,alignItems:n,disableGutters:g}),[n,S.dense,f,g]),T=G.useRef(null),M=G.Children.toArray(a),A=M.length&&uE(M[M.length-1],["ListItemSecondaryAction"]),P={...i,alignItems:n,dense:C.dense,disableGutters:g,disablePadding:p,divider:m,hasSecondaryAction:A},O=xNe(P),j=en(T,r),D=w.root||l.Root||SNe,I=b.root||u.root||{},q={className:At(O.root,I.className,o),...x};let $=s||"li";return A?($=!q.component&&!s?"div":$,c==="li"&&($==="li"?$="div":q.component==="li"&&(q.component="div")),V.jsx(Lm.Provider,{value:C,children:V.jsxs(CNe,{as:c,className:At(O.container,d),ref:j,ownerState:P,...h,children:[V.jsx(D,{...I,...!ZE(D)&&{as:$,ownerState:{...P,...I.ownerState}},...q,children:M}),M.pop()]})})):V.jsx(Lm.Provider,{value:C,children:V.jsxs(D,{...I,as:$,ref:j,...!ZE(D)&&{ownerState:{...P,...I.ownerState}},...q,children:[M,y&&V.jsx(Tye,{children:y})]})})});function ENe(e){return yr("MuiListItemIcon",e)}Sr("MuiListItemIcon",["root","alignItemsFlexStart"]);const MNe=e=>{const{alignItems:t,classes:r}=e;return br({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},ENe,r)},PNe=wt("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(Mr(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),VR=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiListItemIcon"}),{className:n,...a}=i,o=G.useContext(Lm),s={...i,alignItems:o.alignItems},l=MNe(s);return V.jsx(PNe,{className:At(l.root,n),ownerState:s,ref:r,...a})});function TNe(e){return yr("MuiListItemText",e)}const XT=Sr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),ANe=e=>{const{classes:t,inset:r,primary:i,secondary:n,dense:a}=e;return br({root:["root",r&&"inset",a&&"dense",i&&n&&"multiline"],primary:["primary"],secondary:["secondary"]},TNe,t)},ONe=wt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${XT.primary}`]:t.primary},{[`& .${XT.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${j7.root}:where(& .${XT.primary})`]:{display:"block"},[`.${j7.root}:where(& .${XT.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),tM=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiListItemText"}),{children:n,className:a,disableTypography:o=!1,inset:s=!1,primary:l,primaryTypographyProps:u,secondary:c,secondaryTypographyProps:d,slots:h={},slotProps:f={},...g}=i,{dense:p}=G.useContext(Lm);let m=l??n,y=c;const b={...i,disableTypography:o,inset:s,primary:!!m,secondary:!!y,dense:p},w=ANe(b),x={slots:h,slotProps:{primary:u,secondary:d,...f}},[S,C]=jr("root",{className:At(w.root,a),elementType:ONe,externalForwardedProps:{...x,...g},ownerState:b,ref:r}),[T,M]=jr("primary",{className:w.primary,elementType:Qt,externalForwardedProps:x,ownerState:b}),[A,P]=jr("secondary",{className:w.secondary,elementType:Qt,externalForwardedProps:x,ownerState:b});return m!=null&&m.type!==Qt&&!o&&(m=V.jsx(T,{variant:p?"body2":"body1",component:M!=null&&M.variant?void 0:"span",...M,children:m})),y!=null&&y.type!==Qt&&!o&&(y=V.jsx(A,{variant:"body2",color:"textSecondary",...P,children:y})),V.jsxs(S,{...C,children:[m,y]})});function I3(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function oX(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function Aye(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join(""))}function Ex(e,t,r,i,n,a){let o=!1,s=n(e,t,t?r:!1);for(;s;){if(s===e.firstChild){if(o)return!1;o=!0}const l=i?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!Aye(s,a)||l)s=n(e,s,r);else return s.focus(),!0}return!1}const RNe=G.forwardRef(function(t,r){const{actions:i,autoFocus:n=!1,autoFocusItem:a=!1,children:o,className:s,disabledItemsFocusable:l=!1,disableListWrap:u=!1,onKeyDown:c,variant:d="selectedMenu",...h}=t,f=G.useRef(null),g=G.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});os(()=>{n&&f.current.focus()},[n]),G.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(w,{direction:x})=>{const S=!f.current.style.width;if(w.clientHeight<f.current.clientHeight&&S){const C=`${qve(ss(w))}px`;f.current.style[x==="rtl"?"paddingLeft":"paddingRight"]=C,f.current.style.width=`calc(100% + ${C})`}return f.current}}),[]);const p=w=>{const x=f.current,S=w.key;if(w.ctrlKey||w.metaKey||w.altKey){c&&c(w);return}const T=Bo(x).activeElement;if(S==="ArrowDown")w.preventDefault(),Ex(x,T,u,l,I3);else if(S==="ArrowUp")w.preventDefault(),Ex(x,T,u,l,oX);else if(S==="Home")w.preventDefault(),Ex(x,null,u,l,I3);else if(S==="End")w.preventDefault(),Ex(x,null,u,l,oX);else if(S.length===1){const M=g.current,A=S.toLowerCase(),P=performance.now();M.keys.length>0&&(P-M.lastTime>500?(M.keys=[],M.repeating=!0,M.previousKeyMatched=!0):M.repeating&&A!==M.keys[0]&&(M.repeating=!1)),M.lastTime=P,M.keys.push(A);const O=T&&!M.repeating&&Aye(T,M);M.previousKeyMatched&&(O||Ex(x,T,!1,l,I3,M))?w.preventDefault():M.previousKeyMatched=!1}c&&c(w)},m=en(f,r);let y=-1;G.Children.forEach(o,(w,x)=>{if(!G.isValidElement(w)){y===x&&(y+=1,y>=o.length&&(y=-1));return}w.props.disabled||(d==="selectedMenu"&&w.props.selected||y===-1)&&(y=x),y===x&&(w.props.disabled||w.props.muiSkipListHighlight||w.type.muiSkipListHighlight)&&(y+=1,y>=o.length&&(y=-1))});const b=G.Children.map(o,(w,x)=>{if(x===y){const S={};return a&&(S.autoFocus=!0),w.props.tabIndex===void 0&&d==="selectedMenu"&&(S.tabIndex=0),G.cloneElement(w,S)}return w});return V.jsx(eM,{role:"menu",ref:m,className:s,onKeyDown:p,tabIndex:n?0:-1,...h,children:b})});function DNe(e){return yr("MuiPopover",e)}Sr("MuiPopover",["root","paper"]);function sX(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function lX(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function uX(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function YT(e){return typeof e=="function"?e():e}const INe=e=>{const{classes:t}=e;return br({root:["root"],paper:["paper"]},DNe,t)},jNe=wt(Cye,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Oye=wt(Na,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),zNe=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiPopover"}),{action:n,anchorEl:a,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:l="anchorEl",children:u,className:c,container:d,elevation:h=8,marginThreshold:f=16,open:g,PaperProps:p={},slots:m={},slotProps:y={},transformOrigin:b={vertical:"top",horizontal:"left"},TransitionComponent:w,transitionDuration:x="auto",TransitionProps:S={},disableScrollLock:C=!1,...T}=i,M=G.useRef(),A={...i,anchorOrigin:o,anchorReference:l,elevation:h,marginThreshold:f,transformOrigin:b,TransitionComponent:w,transitionDuration:x,TransitionProps:S},P=INe(A),O=G.useCallback(()=>{if(l==="anchorPosition")return s;const oe=YT(a),be=(oe&&oe.nodeType===1?oe:Bo(M.current).body).getBoundingClientRect();return{top:be.top+sX(be,o.vertical),left:be.left+lX(be,o.horizontal)}},[a,o.horizontal,o.vertical,s,l]),j=G.useCallback(oe=>({vertical:sX(oe,b.vertical),horizontal:lX(oe,b.horizontal)}),[b.horizontal,b.vertical]),D=G.useCallback(oe=>{const me={width:oe.offsetWidth,height:oe.offsetHeight},be=j(me);if(l==="none")return{top:null,left:null,transformOrigin:uX(be)};const de=O();let ge=de.top-be.vertical,ce=de.left-be.horizontal;const Ce=ge+me.height,Ee=ce+me.width,Me=ss(YT(a)),he=Me.innerHeight-f,Ae=Me.innerWidth-f;if(f!==null&&ge<f){const De=ge-f;ge-=De,be.vertical+=De}else if(f!==null&&Ce>he){const De=Ce-he;ge-=De,be.vertical+=De}if(f!==null&&ce<f){const De=ce-f;ce-=De,be.horizontal+=De}else if(Ee>Ae){const De=Ee-Ae;ce-=De,be.horizontal+=De}return{top:`${Math.round(ge)}px`,left:`${Math.round(ce)}px`,transformOrigin:uX(be)}},[a,l,O,j,f]),[I,q]=G.useState(g),$=G.useCallback(()=>{const oe=M.current;if(!oe)return;const me=D(oe);me.top!==null&&oe.style.setProperty("top",me.top),me.left!==null&&(oe.style.left=me.left),oe.style.transformOrigin=me.transformOrigin,q(!0)},[D]);G.useEffect(()=>(C&&window.addEventListener("scroll",$),()=>window.removeEventListener("scroll",$)),[a,C,$]);const X=()=>{$()},N=()=>{q(!1)};G.useEffect(()=>{g&&$()}),G.useImperativeHandle(n,()=>g?{updatePosition:()=>{$()}}:null,[g,$]),G.useEffect(()=>{if(!g)return;const oe=QM(()=>{$()}),me=ss(YT(a));return me.addEventListener("resize",oe),()=>{oe.clear(),me.removeEventListener("resize",oe)}},[a,g,$]);let Q=x;const F={slots:{transition:w,...m},slotProps:{transition:S,paper:p,...y}},[L,Y]=jr("transition",{elementType:UR,externalForwardedProps:F,ownerState:A,getSlotProps:oe=>({...oe,onEntering:(me,be)=>{var de;(de=oe.onEntering)==null||de.call(oe,me,be),X()},onExited:me=>{var be;(be=oe.onExited)==null||be.call(oe,me),N()}}),additionalProps:{appear:!0,in:g}});x==="auto"&&!L.muiSupportAuto&&(Q=void 0);const ae=d||(a?Bo(YT(a)).body:void 0),[re,{slots:H,slotProps:se,...le}]=jr("root",{ref:r,elementType:jNe,externalForwardedProps:{...F,...T},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:m.backdrop},slotProps:{backdrop:sye(typeof y.backdrop=="function"?y.backdrop(A):y.backdrop,{invisible:!0})},container:ae,open:g},ownerState:A,className:At(P.root,c)}),[ee,J]=jr("paper",{ref:M,className:P.paper,elementType:Oye,externalForwardedProps:F,shouldForwardComponentProp:!0,additionalProps:{elevation:h,style:I?void 0:{opacity:0}},ownerState:A});return V.jsx(re,{...le,...!ZE(re)&&{slots:H,slotProps:se,disableScrollLock:C},children:V.jsx(L,{...Y,timeout:Q,children:V.jsx(ee,{...J,children:u})})})});function BNe(e){return yr("MuiMenu",e)}Sr("MuiMenu",["root","paper","list"]);const LNe={vertical:"top",horizontal:"right"},FNe={vertical:"top",horizontal:"left"},NNe=e=>{const{classes:t}=e;return br({root:["root"],paper:["paper"],list:["list"]},BNe,t)},UNe=wt(zNe,{shouldForwardProp:e=>cs(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),VNe=wt(Oye,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),kNe=wt(RNe,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),qNe=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiMenu"}),{autoFocus:n=!0,children:a,className:o,disableAutoFocusItem:s=!1,MenuListProps:l={},onClose:u,open:c,PaperProps:d={},PopoverClasses:h,transitionDuration:f="auto",TransitionProps:{onEntering:g,...p}={},variant:m="selectedMenu",slots:y={},slotProps:b={},...w}=i,x=bb(),S={...i,autoFocus:n,disableAutoFocusItem:s,MenuListProps:l,onEntering:g,PaperProps:d,transitionDuration:f,TransitionProps:p,variant:m},C=NNe(S),T=n&&!s&&c,M=G.useRef(null),A=(Q,F)=>{M.current&&M.current.adjustStyleForScrollbar(Q,{direction:x?"rtl":"ltr"}),g&&g(Q,F)},P=Q=>{Q.key==="Tab"&&(Q.preventDefault(),u&&u(Q,"tabKeyDown"))};let O=-1;G.Children.map(a,(Q,F)=>{G.isValidElement(Q)&&(Q.props.disabled||(m==="selectedMenu"&&Q.props.selected||O===-1)&&(O=F))});const j={slots:y,slotProps:{list:l,transition:p,paper:d,...b}},D=D_({elementType:y.root,externalSlotProps:b.root,ownerState:S,className:[C.root,o]}),[I,q]=jr("paper",{className:C.paper,elementType:VNe,externalForwardedProps:j,shouldForwardComponentProp:!0,ownerState:S}),[$,X]=jr("list",{className:At(C.list,l.className),elementType:kNe,shouldForwardComponentProp:!0,externalForwardedProps:j,getSlotProps:Q=>({...Q,onKeyDown:F=>{var L;P(F),(L=Q.onKeyDown)==null||L.call(Q,F)}}),ownerState:S}),N=typeof j.slotProps.transition=="function"?j.slotProps.transition(S):j.slotProps.transition;return V.jsx(UNe,{onClose:u,anchorOrigin:{vertical:"bottom",horizontal:x?"right":"left"},transformOrigin:x?LNe:FNe,slots:{root:y.root,paper:I,backdrop:y.backdrop,...y.transition&&{transition:y.transition}},slotProps:{root:D,paper:q,backdrop:typeof b.backdrop=="function"?b.backdrop(S):b.backdrop,transition:{...N,onEntering:(...Q)=>{var F;A(...Q),(F=N==null?void 0:N.onEntering)==null||F.call(N,...Q)}}},open:c,ref:r,transitionDuration:f,ownerState:S,...w,classes:h,children:V.jsx($,{actions:M,autoFocus:n&&(O===-1||s),autoFocusItem:T,variant:m,...X,children:a})})});function WNe(e){return yr("MuiNativeSelect",e)}const J8=Sr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),GNe=e=>{const{classes:t,variant:r,disabled:i,multiple:n,open:a,error:o}=e,s={select:["select",r,i&&"disabled",n&&"multiple",o&&"error"],icon:["icon",`icon${bt(r)}`,a&&"iconOpen",i&&"disabled"]};return br(s,WNe,t)},Rye=wt("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${J8.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),HNe=wt(Rye,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:cs,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${J8.multiple}`]:t.multiple}]}})({}),Dye=wt("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${J8.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),$Ne=wt(Dye,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${bt(r.variant)}`],r.open&&t.iconOpen]}})({}),XNe=G.forwardRef(function(t,r){const{className:i,disabled:n,error:a,IconComponent:o,inputRef:s,variant:l="standard",...u}=t,c={...t,disabled:n,variant:l,error:a},d=GNe(c);return V.jsxs(G.Fragment,{children:[V.jsx(HNe,{ownerState:c,className:At(d.select,i),disabled:n,ref:s||r,...u}),t.multiple?null:V.jsx($Ne,{as:o,ownerState:c,className:d.icon})]})});var cX;const YNe=wt("fieldset",{shouldForwardProp:cs})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),KNe=wt("legend",{shouldForwardProp:cs})(Mr(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function QNe(e){const{children:t,classes:r,className:i,label:n,notched:a,...o}=e,s=n!=null&&n!=="",l={...e,notched:a,withLabel:s};return V.jsx(YNe,{"aria-hidden":!0,className:i,ownerState:l,...o,children:V.jsx(KNe,{ownerState:l,children:s?V.jsx("span",{children:n}):cX||(cX=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const JNe=e=>{const{classes:t}=e,i=br({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},fLe,t);return{...t,...i}},ZNe=wt(R2,{shouldForwardProp:e=>cs(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:A2})(Mr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${kf.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${kf.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${kf.focused} .${kf.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Zi()).map(([r])=>({props:{color:r},style:{[`&.${kf.focused} .${kf.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}})),{props:{},style:{[`&.${kf.error} .${kf.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${kf.disabled} .${kf.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:i})=>r.multiline&&i==="small",style:{padding:"8.5px 14px"}}]}})),e4e=wt(QNe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(Mr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),t4e=wt(D2,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:O2})(Mr(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),Z8=G.forwardRef(function(t,r){var i;const n=_r({props:t,name:"MuiOutlinedInput"}),{components:a={},fullWidth:o=!1,inputComponent:s="input",label:l,multiline:u=!1,notched:c,slots:d={},type:h="text",...f}=n,g=JNe(n),p=dw(),m=cw({props:n,muiFormControl:p,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),y={...n,color:m.color||"primary",disabled:m.disabled,error:m.error,focused:m.focused,formControl:p,fullWidth:o,hiddenLabel:m.hiddenLabel,multiline:u,size:m.size,type:h},b=d.root??a.Root??ZNe,w=d.input??a.Input??t4e;return V.jsx(X8,{slots:{root:b,input:w},renderSuffix:x=>V.jsx(e4e,{ownerState:y,className:g.notchedOutline,label:l!=null&&l!==""&&m.required?i||(i=V.jsxs(G.Fragment,{children:[l,"","*"]})):l,notched:typeof c<"u"?c:!!(x.startAdornment||x.filled||x.focused)}),fullWidth:o,inputComponent:s,multiline:u,ref:r,type:h,...f,classes:{...g,notchedOutline:null}})});Z8.muiName="Input";function Iye(e){return yr("MuiSelect",e)}const Mx=Sr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var dX;const r4e=wt(Rye,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${Mx.select}`]:t.select},{[`&.${Mx.select}`]:t[r.variant]},{[`&.${Mx.error}`]:t.error},{[`&.${Mx.multiple}`]:t.multiple}]}})({[`&.${Mx.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),i4e=wt(Dye,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${bt(r.variant)}`],r.open&&t.iconOpen]}})({}),n4e=wt("input",{shouldForwardProp:e=>oye(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function hX(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function a4e(e){return e==null||typeof e=="string"&&!e.trim()}const o4e=e=>{const{classes:t,variant:r,disabled:i,multiple:n,open:a,error:o}=e,s={select:["select",r,i&&"disabled",n&&"multiple",o&&"error"],icon:["icon",`icon${bt(r)}`,a&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return br(s,Iye,t)},s4e=G.forwardRef(function(t,r){var et;const{"aria-describedby":i,"aria-label":n,autoFocus:a,autoWidth:o,children:s,className:l,defaultOpen:u,defaultValue:c,disabled:d,displayEmpty:h,error:f=!1,IconComponent:g,inputRef:p,labelId:m,MenuProps:y={},multiple:b,name:w,onBlur:x,onChange:S,onClose:C,onFocus:T,onOpen:M,open:A,readOnly:P,renderValue:O,required:j,SelectDisplayProps:D={},tabIndex:I,type:q,value:$,variant:X="standard",...N}=t,[Q,F]=Y5({controlled:$,default:c,name:"Select"}),[L,Y]=Y5({controlled:A,default:u,name:"Select"}),ae=G.useRef(null),re=G.useRef(null),[H,se]=G.useState(null),{current:le}=G.useRef(A!=null),[ee,J]=G.useState(),oe=en(r,p),me=G.useCallback(Ze=>{re.current=Ze,Ze&&se(Ze)},[]),be=H==null?void 0:H.parentNode;G.useImperativeHandle(oe,()=>({focus:()=>{re.current.focus()},node:ae.current,value:Q}),[Q]),G.useEffect(()=>{u&&L&&H&&!le&&(J(o?null:be.clientWidth),re.current.focus())},[H,o]),G.useEffect(()=>{a&&re.current.focus()},[a]),G.useEffect(()=>{if(!m)return;const Ze=Bo(re.current).getElementById(m);if(Ze){const Pe=()=>{getSelection().isCollapsed&&re.current.focus()};return Ze.addEventListener("click",Pe),()=>{Ze.removeEventListener("click",Pe)}}},[m]);const de=(Ze,Pe)=>{Ze?M&&M(Pe):C&&C(Pe),le||(J(o?null:be.clientWidth),Y(Ze))},ge=Ze=>{Ze.button===0&&(Ze.preventDefault(),re.current.focus(),de(!0,Ze))},ce=Ze=>{de(!1,Ze)},Ce=G.Children.toArray(s),Ee=Ze=>{const Pe=Ce.find(Le=>Le.props.value===Ze.target.value);Pe!==void 0&&(F(Pe.props.value),S&&S(Ze,Pe))},Me=Ze=>Pe=>{let Le;if(Pe.currentTarget.hasAttribute("tabindex")){if(b){Le=Array.isArray(Q)?Q.slice():[];const ht=Q.indexOf(Ze.props.value);ht===-1?Le.push(Ze.props.value):Le.splice(ht,1)}else Le=Ze.props.value;if(Ze.props.onClick&&Ze.props.onClick(Pe),Q!==Le&&(F(Le),S)){const ht=Pe.nativeEvent||Pe,Be=new ht.constructor(ht.type,ht);Object.defineProperty(Be,"target",{writable:!0,value:{value:Le,name:w}}),S(Be,Ze)}b||de(!1,Pe)}},he=Ze=>{P||[" ","ArrowUp","ArrowDown","Enter"].includes(Ze.key)&&(Ze.preventDefault(),de(!0,Ze))},Ae=H!==null&&L,De=Ze=>{!Ae&&x&&(Object.defineProperty(Ze,"target",{writable:!0,value:{value:Q,name:w}}),x(Ze))};delete N["aria-invalid"];let Z,ie;const Te=[];let Ue=!1;(FR({value:Q})||h)&&(O?Z=O(Q):Ue=!0);const ne=Ce.map(Ze=>{if(!G.isValidElement(Ze))return null;let Pe;if(b){if(!Array.isArray(Q))throw new Error(Vm(2));Pe=Q.some(Le=>hX(Le,Ze.props.value)),Pe&&Ue&&Te.push(Ze.props.children)}else Pe=hX(Q,Ze.props.value),Pe&&Ue&&(ie=Ze.props.children);return G.cloneElement(Ze,{"aria-selected":Pe?"true":"false",onClick:Me(Ze),onKeyUp:Le=>{Le.key===" "&&Le.preventDefault(),Ze.props.onKeyUp&&Ze.props.onKeyUp(Le)},role:"option",selected:Pe,value:void 0,"data-value":Ze.props.value})});Ue&&(b?Te.length===0?Z=null:Z=Te.reduce((Ze,Pe,Le)=>(Ze.push(Pe),Le<Te.length-1&&Ze.push(", "),Ze),[]):Z=ie);let K=ee;!o&&le&&H&&(K=be.clientWidth);let B;typeof I<"u"?B=I:B=d?null:0;const U=D.id||(w?`mui-component-select-${w}`:void 0),te={...t,variant:X,value:Q,open:Ae,error:f},ve=o4e(te),Re={...y.PaperProps,...(et=y.slotProps)==null?void 0:et.paper},Fe=JM();return V.jsxs(G.Fragment,{children:[V.jsx(r4e,{as:"div",ref:me,tabIndex:B,role:"combobox","aria-controls":Ae?Fe:void 0,"aria-disabled":d?"true":void 0,"aria-expanded":Ae?"true":"false","aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[m,U].filter(Boolean).join(" ")||void 0,"aria-describedby":i,"aria-required":j?"true":void 0,"aria-invalid":f?"true":void 0,onKeyDown:he,onMouseDown:d||P?null:ge,onBlur:De,onFocus:T,...D,ownerState:te,className:At(D.className,ve.select,l),id:U,children:a4e(Z)?dX||(dX=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):Z}),V.jsx(n4e,{"aria-invalid":f,value:Array.isArray(Q)?Q.join(","):Q,name:w,ref:ae,"aria-hidden":!0,onChange:Ee,tabIndex:-1,disabled:d,className:ve.nativeInput,autoFocus:a,required:j,...N,ownerState:te}),V.jsx(i4e,{as:g,className:ve.icon,ownerState:te}),V.jsx(qNe,{id:`menu-${w||""}`,anchorEl:be,open:Ae,onClose:ce,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...y,slotProps:{...y.slotProps,list:{"aria-labelledby":m,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:Fe,...y.MenuListProps},paper:{...Re,style:{minWidth:K,...Re!=null?Re.style:null}}},children:ne})]})}),l4e=e=>{const{classes:t}=e,i=br({root:["root"]},Iye,t);return{...t,...i}},eq={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>cs(e)&&e!=="variant",slot:"Root"},u4e=wt(K8,eq)(""),c4e=wt(Z8,eq)(""),d4e=wt(Y8,eq)(""),jye=G.forwardRef(function(t,r){const i=_r({name:"MuiSelect",props:t}),{autoWidth:n=!1,children:a,classes:o={},className:s,defaultOpen:l=!1,displayEmpty:u=!1,IconComponent:c=mLe,id:d,input:h,inputProps:f,label:g,labelId:p,MenuProps:m,multiple:y=!1,native:b=!1,onClose:w,onOpen:x,open:S,renderValue:C,SelectDisplayProps:T,variant:M="outlined",...A}=i,P=b?XNe:s4e,O=dw(),j=cw({props:i,muiFormControl:O,states:["variant","error"]}),D=j.variant||M,I={...i,variant:D,classes:o},q=l4e(I),{root:$,...X}=q,N=h||{standard:V.jsx(u4e,{ownerState:I}),outlined:V.jsx(c4e,{label:g,ownerState:I}),filled:V.jsx(d4e,{ownerState:I})}[D],Q=en(r,yb(N));return V.jsx(G.Fragment,{children:G.cloneElement(N,{inputComponent:P,inputProps:{children:a,error:j.error,IconComponent:c,variant:D,type:void 0,multiple:y,...b?{id:d}:{autoWidth:n,defaultOpen:l,displayEmpty:u,labelId:p,MenuProps:m,onClose:w,onOpen:x,open:S,renderValue:C,SelectDisplayProps:{id:d,...T}},...f,classes:f?ra(X,f.classes):X,...h?h.props.inputProps:{}},...(y&&b||u)&&D==="outlined"?{notched:!0}:{},ref:Q,className:At(N.props.className,s,q.root),...!h&&{variant:D},...A})})});jye.muiName="Select";function h4e(e){return yr("MuiTooltip",e)}const $i=Sr("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function f4e(e){return Math.round(e*1e5)/1e5}const p4e=e=>{const{classes:t,disableInteractive:r,arrow:i,touch:n,placement:a}=e,o={popper:["popper",!r&&"popperInteractive",i&&"popperArrow"],tooltip:["tooltip",i&&"tooltipArrow",n&&"touch",`tooltipPlacement${bt(a.split("-")[0])}`],arrow:["arrow"]};return br(o,h4e,t)},m4e=wt(wye,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(Mr(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${$i.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${$i.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${$i.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${$i.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${$i.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${$i.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${$i.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${$i.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),g4e=wt("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${bt(r.placement.split("-")[0])}`]]}})(Mr(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:Si(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${$i.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${$i.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${$i.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${$i.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${f4e(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${$i.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${$i.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${$i.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${$i.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${$i.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${$i.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${$i.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${$i.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${$i.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${$i.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),v4e=wt("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(Mr(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:Si(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let KT=!1;const fX=new E2;let Px={x:0,y:0};function QT(e,t){return(r,...i)=>{t&&t(r,...i),e(r,...i)}}const mE=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiTooltip"}),{arrow:n=!1,children:a,classes:o,components:s={},componentsProps:l={},describeChild:u=!1,disableFocusListener:c=!1,disableHoverListener:d=!1,disableInteractive:h=!1,disableTouchListener:f=!1,enterDelay:g=100,enterNextDelay:p=0,enterTouchDelay:m=700,followCursor:y=!1,id:b,leaveDelay:w=0,leaveTouchDelay:x=1500,onClose:S,onOpen:C,open:T,placement:M="bottom",PopperComponent:A,PopperProps:P={},slotProps:O={},slots:j={},title:D,TransitionComponent:I,TransitionProps:q,...$}=i,X=G.isValidElement(a)?a:V.jsx("span",{children:a}),N=aa(),Q=bb(),[F,L]=G.useState(),[Y,ae]=G.useState(null),re=G.useRef(!1),H=h||y,se=O0(),le=O0(),ee=O0(),J=O0(),[oe,me]=Y5({controlled:T,default:!1,name:"Tooltip",state:"open"});let be=oe;const de=JM(b),ge=G.useRef(),ce=Vs(()=>{ge.current!==void 0&&(document.body.style.WebkitUserSelect=ge.current,ge.current=void 0),J.clear()});G.useEffect(()=>ce,[ce]);const Ce=ye=>{fX.clear(),KT=!0,me(!0),C&&!be&&C(ye)},Ee=Vs(ye=>{fX.start(800+w,()=>{KT=!1}),me(!1),S&&be&&S(ye),se.start(N.transitions.duration.shortest,()=>{re.current=!1})}),Me=ye=>{re.current&&ye.type!=="touchstart"||(F&&F.removeAttribute("title"),le.clear(),ee.clear(),g||KT&&p?le.start(KT?p:g,()=>{Ce(ye)}):Ce(ye))},he=ye=>{le.clear(),ee.start(w,()=>{Ee(ye)})},[,Ae]=G.useState(!1),De=ye=>{IR(ye.target)||(Ae(!1),he(ye))},Z=ye=>{F||L(ye.currentTarget),IR(ye.target)&&(Ae(!0),Me(ye))},ie=ye=>{re.current=!0;const xe=X.props;xe.onTouchStart&&xe.onTouchStart(ye)},Te=ye=>{ie(ye),ee.clear(),se.clear(),ce(),ge.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",J.start(m,()=>{document.body.style.WebkitUserSelect=ge.current,Me(ye)})},Ue=ye=>{X.props.onTouchEnd&&X.props.onTouchEnd(ye),ce(),ee.start(x,()=>{Ee(ye)})};G.useEffect(()=>{if(!be)return;function ye(xe){xe.key==="Escape"&&Ee(xe)}return document.addEventListener("keydown",ye),()=>{document.removeEventListener("keydown",ye)}},[Ee,be]);const ne=en(yb(X),L,r);!D&&D!==0&&(be=!1);const K=G.useRef(),B=ye=>{const xe=X.props;xe.onMouseMove&&xe.onMouseMove(ye),Px={x:ye.clientX,y:ye.clientY},K.current&&K.current.update()},U={},te=typeof D=="string";u?(U.title=!be&&te&&!d?D:null,U["aria-describedby"]=be?de:null):(U["aria-label"]=te?D:null,U["aria-labelledby"]=be&&!te?de:null);const ve={...U,...$,...X.props,className:At($.className,X.props.className),onTouchStart:ie,ref:ne,...y?{onMouseMove:B}:{}},Re={};f||(ve.onTouchStart=Te,ve.onTouchEnd=Ue),d||(ve.onMouseOver=QT(Me,ve.onMouseOver),ve.onMouseLeave=QT(he,ve.onMouseLeave),H||(Re.onMouseOver=Me,Re.onMouseLeave=he)),c||(ve.onFocus=QT(Z,ve.onFocus),ve.onBlur=QT(De,ve.onBlur),H||(Re.onFocus=Z,Re.onBlur=De));const Fe={...i,isRtl:Q,arrow:n,disableInteractive:H,placement:M,PopperComponentProp:A,touch:re.current},et=typeof O.popper=="function"?O.popper(Fe):O.popper,Ze=G.useMemo(()=>{var xe,He;let ye=[{name:"arrow",enabled:!!Y,options:{element:Y,padding:4}}];return(xe=P.popperOptions)!=null&&xe.modifiers&&(ye=ye.concat(P.popperOptions.modifiers)),(He=et==null?void 0:et.popperOptions)!=null&&He.modifiers&&(ye=ye.concat(et.popperOptions.modifiers)),{...P.popperOptions,...et==null?void 0:et.popperOptions,modifiers:ye}},[Y,P.popperOptions,et==null?void 0:et.popperOptions]),Pe=p4e(Fe),Le=typeof O.transition=="function"?O.transition(Fe):O.transition,ht={slots:{popper:s.Popper,transition:s.Transition??I,tooltip:s.Tooltip,arrow:s.Arrow,...j},slotProps:{arrow:O.arrow??l.arrow,popper:{...P,...et??l.popper},tooltip:O.tooltip??l.tooltip,transition:{...q,...Le??l.transition}}},[Be,Ye]=jr("popper",{elementType:m4e,externalForwardedProps:ht,ownerState:Fe,className:At(Pe.popper,P==null?void 0:P.className)}),[$e,mt]=jr("transition",{elementType:UR,externalForwardedProps:ht,ownerState:Fe}),[It,qt]=jr("tooltip",{elementType:g4e,className:Pe.tooltip,externalForwardedProps:ht,ownerState:Fe}),[mr,Rr]=jr("arrow",{elementType:v4e,className:Pe.arrow,externalForwardedProps:ht,ownerState:Fe,ref:ae});return V.jsxs(G.Fragment,{children:[G.cloneElement(X,ve),V.jsx(Be,{as:A??wye,placement:M,anchorEl:y?{getBoundingClientRect:()=>({top:Px.y,left:Px.x,right:Px.x,bottom:Px.y,width:0,height:0})}:F,popperRef:K,open:F?be:!1,id:de,transition:!0,...Re,...Ye,popperOptions:Ze,children:({TransitionProps:ye})=>V.jsx($e,{timeout:N.transitions.duration.shorter,...ye,...mt,children:V.jsxs(It,{...qt,children:[D,n?V.jsx(mr,{...Rr}):null]})})})]})}),pX=$je({createStyledComponent:wt("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>_r({props:e,name:"MuiStack"})});function y4e(e){return yr("MuiTab",e)}const xs=Sr("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),b4e=e=>{const{classes:t,textColor:r,fullWidth:i,wrapped:n,icon:a,label:o,selected:s,disabled:l}=e,u={root:["root",a&&o&&"labelIcon",`textColor${bt(r)}`,i&&"fullWidth",n&&"wrapped",s&&"selected",l&&"disabled"],icon:["iconWrapper","icon"]};return br(u,y4e,t)},_4e=wt(ib,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.label&&r.icon&&t.labelIcon,t[`textColor${bt(r.textColor)}`],r.fullWidth&&t.fullWidth,r.wrapped&&t.wrapped,{[`& .${xs.iconWrapper}`]:t.iconWrapper},{[`& .${xs.icon}`]:t.icon}]}})(Mr(({theme:e})=>({...e.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:t})=>t.label&&(t.iconPosition==="top"||t.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:t})=>t.label&&t.iconPosition!=="top"&&t.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:t})=>t.icon&&t.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:t,iconPosition:r})=>t.icon&&t.label&&r==="top",style:{[`& > .${xs.icon}`]:{marginBottom:6}}},{props:({ownerState:t,iconPosition:r})=>t.icon&&t.label&&r==="bottom",style:{[`& > .${xs.icon}`]:{marginTop:6}}},{props:({ownerState:t,iconPosition:r})=>t.icon&&t.label&&r==="start",style:{[`& > .${xs.icon}`]:{marginRight:e.spacing(1)}}},{props:({ownerState:t,iconPosition:r})=>t.icon&&t.label&&r==="end",style:{[`& > .${xs.icon}`]:{marginLeft:e.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${xs.selected}`]:{opacity:1},[`&.${xs.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${xs.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${xs.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(e.vars||e).palette.text.secondary,[`&.${xs.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${xs.disabled}`]:{color:(e.vars||e).palette.text.disabled}}},{props:({ownerState:t})=>t.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:t})=>t.wrapped,style:{fontSize:e.typography.pxToRem(12)}}]}))),G1=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiTab"}),{className:n,disabled:a=!1,disableFocusRipple:o=!1,fullWidth:s,icon:l,iconPosition:u="top",indicator:c,label:d,onChange:h,onClick:f,onFocus:g,selected:p,selectionFollowsFocus:m,textColor:y="inherit",value:b,wrapped:w=!1,...x}=i,S={...i,disabled:a,disableFocusRipple:o,selected:p,icon:!!l,iconPosition:u,label:!!d,fullWidth:s,textColor:y,wrapped:w},C=b4e(S),T=l&&d&&G.isValidElement(l)?G.cloneElement(l,{className:At(C.icon,l.props.className)}):l,M=P=>{!p&&h&&h(P,b),f&&f(P)},A=P=>{m&&!p&&h&&h(P,b),g&&g(P)};return V.jsxs(_4e,{focusRipple:!o,className:At(C.root,n),ref:r,role:"tab","aria-selected":p,disabled:a,onClick:M,onFocus:A,ownerState:S,tabIndex:p?0:-1,...x,children:[u==="top"||u==="start"?V.jsxs(G.Fragment,{children:[T,d]}):V.jsxs(G.Fragment,{children:[d,T]}),c]})});function w4e(e){return yr("MuiToolbar",e)}Sr("MuiToolbar",["root","gutters","regular","dense"]);const x4e=e=>{const{classes:t,disableGutters:r,variant:i}=e;return br({root:["root",!r&&"gutters",i]},w4e,t)},S4e=wt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(Mr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),C4e=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiToolbar"}),{className:n,component:a="div",disableGutters:o=!1,variant:s="regular",...l}=i,u={...i,component:a,disableGutters:o,variant:s},c=x4e(u);return V.jsx(S4e,{as:a,className:At(c.root,n),ref:r,ownerState:u,...l})}),E4e=pr(V.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),M4e=pr(V.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function P4e(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function T4e(e,t,r,i={},n=()=>{}){const{ease:a=P4e,duration:o=300}=i;let s=null;const l=t[e];let u=!1;const c=()=>{u=!0},d=h=>{if(u){n(new Error("Animation cancelled"));return}s===null&&(s=h);const f=Math.min(1,(h-s)/o);if(t[e]=a(f)*(r-l)+l,f>=1){requestAnimationFrame(()=>{n(null)});return}requestAnimationFrame(d)};return l===r?(n(new Error("Element already at target position")),c):(requestAnimationFrame(d),c)}const A4e={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function O4e(e){const{onChange:t,...r}=e,i=G.useRef(),n=G.useRef(null),a=()=>{i.current=n.current.offsetHeight-n.current.clientHeight};return os(()=>{const o=QM(()=>{const l=i.current;a(),l!==i.current&&t(i.current)}),s=ss(n.current);return s.addEventListener("resize",o),()=>{o.clear(),s.removeEventListener("resize",o)}},[t]),G.useEffect(()=>{a(),t(i.current)},[t]),V.jsx("div",{style:A4e,...r,ref:n})}function R4e(e){return yr("MuiTabScrollButton",e)}const D4e=Sr("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),I4e=e=>{const{classes:t,orientation:r,disabled:i}=e;return br({root:["root",r,i&&"disabled"]},R4e,t)},j4e=wt(ib,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.orientation&&t[r.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${D4e.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),z4e=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiTabScrollButton"}),{className:n,slots:a={},slotProps:o={},direction:s,orientation:l,disabled:u,...c}=i,d=bb(),h={isRtl:d,...i},f=I4e(h),g=a.StartScrollButtonIcon??E4e,p=a.EndScrollButtonIcon??M4e,m=D_({elementType:g,externalSlotProps:o.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:h}),y=D_({elementType:p,externalSlotProps:o.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:h});return V.jsx(j4e,{component:"div",className:At(f.root,n),ref:r,role:null,ownerState:h,tabIndex:null,...c,style:{...c.style,...l==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${d?-90:90}deg)`}},children:s==="left"?V.jsx(g,{...m}):V.jsx(p,{...y})})});function B4e(e){return yr("MuiTabs",e)}const j3=Sr("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),mX=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,gX=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,JT=(e,t,r)=>{let i=!1,n=r(e,t);for(;n;){if(n===e.firstChild){if(i)return;i=!0}const a=n.disabled||n.getAttribute("aria-disabled")==="true";if(!n.hasAttribute("tabindex")||a)n=r(e,n);else{n.focus();return}}},L4e=e=>{const{vertical:t,fixed:r,hideScrollbar:i,scrollableX:n,scrollableY:a,centered:o,scrollButtonsHideMobile:s,classes:l}=e;return br({root:["root",t&&"vertical"],scroller:["scroller",r&&"fixed",i&&"hideScrollbar",n&&"scrollableX",a&&"scrollableY"],list:["list","flexContainer",t&&"flexContainerVertical",t&&"vertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[n&&"scrollableX"],hideScrollbar:[i&&"hideScrollbar"]},B4e,l)},F4e=wt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${j3.scrollButtons}`]:t.scrollButtons},{[`& .${j3.scrollButtons}`]:r.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,r.vertical&&t.vertical]}})(Mr(({theme:e})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.scrollButtonsHideMobile,style:{[`& .${j3.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}}}]}))),N4e=wt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.scroller,r.fixed&&t.fixed,r.hideScrollbar&&t.hideScrollbar,r.scrollableX&&t.scrollableX,r.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:e})=>e.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:e})=>e.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:e})=>e.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:e})=>e.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),U4e=wt("div",{name:"MuiTabs",slot:"List",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.list,t.flexContainer,r.vertical&&t.flexContainerVertical,r.centered&&t.centered]}})({display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.centered,style:{justifyContent:"center"}}]}),V4e=wt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(Mr(({theme:e})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(e.vars||e).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(e.vars||e).palette.secondary.main}},{props:({ownerState:t})=>t.vertical,style:{height:"100%",width:2,right:0}}]}))),k4e=wt(O4e)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),vX={},zye=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiTabs"}),n=aa(),a=bb(),{"aria-label":o,"aria-labelledby":s,action:l,centered:u=!1,children:c,className:d,component:h="div",allowScrollButtonsMobile:f=!1,indicatorColor:g="primary",onChange:p,orientation:m="horizontal",ScrollButtonComponent:y,scrollButtons:b="auto",selectionFollowsFocus:w,slots:x={},slotProps:S={},TabIndicatorProps:C={},TabScrollButtonProps:T={},textColor:M="primary",value:A,variant:P="standard",visibleScrollbar:O=!1,...j}=i,D=P==="scrollable",I=m==="vertical",q=I?"scrollTop":"scrollLeft",$=I?"top":"left",X=I?"bottom":"right",N=I?"clientHeight":"clientWidth",Q=I?"height":"width",F={...i,component:h,allowScrollButtonsMobile:f,indicatorColor:g,orientation:m,vertical:I,scrollButtons:b,textColor:M,variant:P,visibleScrollbar:O,fixed:!D,hideScrollbar:D&&!O,scrollableX:D&&!I,scrollableY:D&&I,centered:u&&!D,scrollButtonsHideMobile:!f},L=L4e(F),Y=D_({elementType:x.StartScrollButtonIcon,externalSlotProps:S.startScrollButtonIcon,ownerState:F}),ae=D_({elementType:x.EndScrollButtonIcon,externalSlotProps:S.endScrollButtonIcon,ownerState:F}),[re,H]=G.useState(!1),[se,le]=G.useState(vX),[ee,J]=G.useState(!1),[oe,me]=G.useState(!1),[be,de]=G.useState(!1),[ge,ce]=G.useState({overflow:"hidden",scrollbarWidth:0}),Ce=new Map,Ee=G.useRef(null),Me=G.useRef(null),he={slots:x,slotProps:{indicator:C,scrollButton:T,...S}},Ae=()=>{const He=Ee.current;let Xe;if(He){const Lt=He.getBoundingClientRect();Xe={clientWidth:He.clientWidth,scrollLeft:He.scrollLeft,scrollTop:He.scrollTop,scrollWidth:He.scrollWidth,top:Lt.top,bottom:Lt.bottom,left:Lt.left,right:Lt.right}}let pt;if(He&&A!==!1){const Lt=Me.current.children;if(Lt.length>0){const nr=Lt[Ce.get(A)];pt=nr?nr.getBoundingClientRect():null}}return{tabsMeta:Xe,tabMeta:pt}},De=Vs(()=>{const{tabsMeta:He,tabMeta:Xe}=Ae();let pt=0,Lt;I?(Lt="top",Xe&&He&&(pt=Xe.top-He.top+He.scrollTop)):(Lt=a?"right":"left",Xe&&He&&(pt=(a?-1:1)*(Xe[Lt]-He[Lt]+He.scrollLeft)));const nr={[Lt]:pt,[Q]:Xe?Xe[Q]:0};if(typeof se[Lt]!="number"||typeof se[Q]!="number")le(nr);else{const Xr=Math.abs(se[Lt]-nr[Lt]),we=Math.abs(se[Q]-nr[Q]);(Xr>=1||we>=1)&&le(nr)}}),Z=(He,{animation:Xe=!0}={})=>{Xe?T4e(q,Ee.current,He,{duration:n.transitions.duration.standard}):Ee.current[q]=He},ie=He=>{let Xe=Ee.current[q];I?Xe+=He:Xe+=He*(a?-1:1),Z(Xe)},Te=()=>{const He=Ee.current[N];let Xe=0;const pt=Array.from(Me.current.children);for(let Lt=0;Lt<pt.length;Lt+=1){const nr=pt[Lt];if(Xe+nr[N]>He){Lt===0&&(Xe=He);break}Xe+=nr[N]}return Xe},Ue=()=>{ie(-1*Te())},ne=()=>{ie(Te())},[K,{onChange:B,...U}]=jr("scrollbar",{className:At(L.scrollableX,L.hideScrollbar),elementType:k4e,shouldForwardComponentProp:!0,externalForwardedProps:he,ownerState:F}),te=G.useCallback(He=>{B==null||B(He),ce({overflow:null,scrollbarWidth:He})},[B]),[ve,Re]=jr("scrollButtons",{className:At(L.scrollButtons,T.className),elementType:z4e,externalForwardedProps:he,ownerState:F,additionalProps:{orientation:m,slots:{StartScrollButtonIcon:x.startScrollButtonIcon||x.StartScrollButtonIcon,EndScrollButtonIcon:x.endScrollButtonIcon||x.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:Y,endScrollButtonIcon:ae}}}),Fe=()=>{const He={};He.scrollbarSizeListener=D?V.jsx(K,{...U,onChange:te}):null;const pt=D&&(b==="auto"&&(ee||oe)||b===!0);return He.scrollButtonStart=pt?V.jsx(ve,{direction:a?"right":"left",onClick:Ue,disabled:!ee,...Re}):null,He.scrollButtonEnd=pt?V.jsx(ve,{direction:a?"left":"right",onClick:ne,disabled:!oe,...Re}):null,He},et=Vs(He=>{const{tabsMeta:Xe,tabMeta:pt}=Ae();if(!(!pt||!Xe)){if(pt[$]<Xe[$]){const Lt=Xe[q]+(pt[$]-Xe[$]);Z(Lt,{animation:He})}else if(pt[X]>Xe[X]){const Lt=Xe[q]+(pt[X]-Xe[X]);Z(Lt,{animation:He})}}}),Ze=Vs(()=>{D&&b!==!1&&de(!be)});G.useEffect(()=>{const He=QM(()=>{Ee.current&&De()});let Xe;const pt=Xr=>{Xr.forEach(we=>{we.removedNodes.forEach(We=>{Xe==null||Xe.unobserve(We)}),we.addedNodes.forEach(We=>{Xe==null||Xe.observe(We)})}),He(),Ze()},Lt=ss(Ee.current);Lt.addEventListener("resize",He);let nr;return typeof ResizeObserver<"u"&&(Xe=new ResizeObserver(He),Array.from(Me.current.children).forEach(Xr=>{Xe.observe(Xr)})),typeof MutationObserver<"u"&&(nr=new MutationObserver(pt),nr.observe(Me.current,{childList:!0})),()=>{He.clear(),Lt.removeEventListener("resize",He),nr==null||nr.disconnect(),Xe==null||Xe.disconnect()}},[De,Ze]),G.useEffect(()=>{const He=Array.from(Me.current.children),Xe=He.length;if(typeof IntersectionObserver<"u"&&Xe>0&&D&&b!==!1){const pt=He[0],Lt=He[Xe-1],nr={root:Ee.current,threshold:.99},Xr=qe=>{J(!qe[0].isIntersecting)},we=new IntersectionObserver(Xr,nr);we.observe(pt);const We=qe=>{me(!qe[0].isIntersecting)},tt=new IntersectionObserver(We,nr);return tt.observe(Lt),()=>{we.disconnect(),tt.disconnect()}}},[D,b,be,c==null?void 0:c.length]),G.useEffect(()=>{H(!0)},[]),G.useEffect(()=>{De()}),G.useEffect(()=>{et(vX!==se)},[et,se]),G.useImperativeHandle(l,()=>({updateIndicator:De,updateScrollButtons:Ze}),[De,Ze]);const[Pe,Le]=jr("indicator",{className:At(L.indicator,C.className),elementType:V4e,externalForwardedProps:he,ownerState:F,additionalProps:{style:se}}),ht=V.jsx(Pe,{...Le});let Be=0;const Ye=G.Children.map(c,He=>{if(!G.isValidElement(He))return null;const Xe=He.props.value===void 0?Be:He.props.value;Ce.set(Xe,Be);const pt=Xe===A;return Be+=1,G.cloneElement(He,{fullWidth:P==="fullWidth",indicator:pt&&!re&&ht,selected:pt,selectionFollowsFocus:w,onChange:p,textColor:M,value:Xe,...Be===1&&A===!1&&!He.props.tabIndex?{tabIndex:0}:{}})}),$e=He=>{if(He.altKey||He.shiftKey||He.ctrlKey||He.metaKey)return;const Xe=Me.current,pt=Bo(Xe).activeElement;if(pt.getAttribute("role")!=="tab")return;let nr=m==="horizontal"?"ArrowLeft":"ArrowUp",Xr=m==="horizontal"?"ArrowRight":"ArrowDown";switch(m==="horizontal"&&a&&(nr="ArrowRight",Xr="ArrowLeft"),He.key){case nr:He.preventDefault(),JT(Xe,pt,gX);break;case Xr:He.preventDefault(),JT(Xe,pt,mX);break;case"Home":He.preventDefault(),JT(Xe,null,mX);break;case"End":He.preventDefault(),JT(Xe,null,gX);break}},mt=Fe(),[It,qt]=jr("root",{ref:r,className:At(L.root,d),elementType:F4e,externalForwardedProps:{...he,...j,component:h},ownerState:F}),[mr,Rr]=jr("scroller",{ref:Ee,className:L.scroller,elementType:N4e,externalForwardedProps:he,ownerState:F,additionalProps:{style:{overflow:ge.overflow,[I?`margin${a?"Left":"Right"}`:"marginBottom"]:O?void 0:-ge.scrollbarWidth}}}),[ye,xe]=jr("list",{ref:Me,className:At(L.list,L.flexContainer),elementType:U4e,externalForwardedProps:he,ownerState:F,getSlotProps:He=>({...He,onKeyDown:Xe=>{var pt;$e(Xe),(pt=He.onKeyDown)==null||pt.call(He,Xe)}})});return V.jsxs(It,{...qt,children:[mt.scrollButtonStart,mt.scrollbarSizeListener,V.jsxs(mr,{...Rr,children:[V.jsx(ye,{"aria-label":o,"aria-labelledby":s,"aria-orientation":m==="vertical"?"vertical":null,role:"tablist",...xe,children:Ye}),re&&ht]}),mt.scrollButtonEnd]})});function q4e(e){return yr("MuiTextField",e)}Sr("MuiTextField",["root"]);const W4e={standard:K8,filled:Y8,outlined:Z8},G4e=e=>{const{classes:t}=e;return br({root:["root"]},q4e,t)},H4e=wt(LFe,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),G0=G.forwardRef(function(t,r){const i=_r({props:t,name:"MuiTextField"}),{autoComplete:n,autoFocus:a=!1,children:o,className:s,color:l="primary",defaultValue:u,disabled:c=!1,error:d=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:g,id:p,InputLabelProps:m,inputProps:y,InputProps:b,inputRef:w,label:x,maxRows:S,minRows:C,multiline:T=!1,name:M,onBlur:A,onChange:P,onFocus:O,placeholder:j,required:D=!1,rows:I,select:q=!1,SelectProps:$,slots:X={},slotProps:N={},type:Q,value:F,variant:L="outlined",...Y}=i,ae={...i,autoFocus:a,color:l,disabled:c,error:d,fullWidth:f,multiline:T,required:D,select:q,variant:L},re=G4e(ae),H=JM(p),se=g&&H?`${H}-helper-text`:void 0,le=x&&H?`${H}-label`:void 0,ee=W4e[L],J={slots:X,slotProps:{input:b,inputLabel:m,htmlInput:y,formHelperText:h,select:$,...N}},oe={},me=J.slotProps.inputLabel;L==="outlined"&&(me&&typeof me.shrink<"u"&&(oe.notched=me.shrink),oe.label=x),q&&((!$||!$.native)&&(oe.id=void 0),oe["aria-describedby"]=void 0);const[be,de]=jr("root",{elementType:H4e,shouldForwardComponentProp:!0,externalForwardedProps:{...J,...Y},ownerState:ae,className:At(re.root,s),ref:r,additionalProps:{disabled:c,error:d,fullWidth:f,required:D,color:l,variant:L}}),[ge,ce]=jr("input",{elementType:ee,externalForwardedProps:J,additionalProps:oe,ownerState:ae}),[Ce,Ee]=jr("inputLabel",{elementType:eNe,externalForwardedProps:J,ownerState:ae}),[Me,he]=jr("htmlInput",{elementType:"input",externalForwardedProps:J,ownerState:ae}),[Ae,De]=jr("formHelperText",{elementType:VFe,externalForwardedProps:J,ownerState:ae}),[Z,ie]=jr("select",{elementType:jye,externalForwardedProps:J,ownerState:ae}),Te=V.jsx(ge,{"aria-describedby":se,autoComplete:n,autoFocus:a,defaultValue:u,fullWidth:f,multiline:T,name:M,rows:I,maxRows:S,minRows:C,type:Q,value:F,id:H,inputRef:w,onBlur:A,onChange:P,onFocus:O,placeholder:j,inputProps:he,slots:{input:X.htmlInput?Me:void 0},...ce});return V.jsxs(be,{...de,children:[x!=null&&x!==""&&V.jsx(Ce,{htmlFor:H,id:le,...Ee,children:x}),q?V.jsx(Z,{"aria-describedby":se,id:H,labelId:le,value:F,input:Te,...ie,children:o}):Te,g&&V.jsx(Ae,{id:se,...De,children:g})]})}),$4e=Uve({themeId:Sf}),X4e=()=>{};var yX={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bye=function(e){const t=[];let r=0;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=n&63|128):(n&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(n=65536+((n&1023)<<10)+(e.charCodeAt(++i)&1023),t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=n&63|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=n&63|128)}return t},Y4e=function(e){const t=[];let r=0,i=0;for(;r<e.length;){const n=e[r++];if(n<128)t[i++]=String.fromCharCode(n);else if(n>191&&n<224){const a=e[r++];t[i++]=String.fromCharCode((n&31)<<6|a&63)}else if(n>239&&n<365){const a=e[r++],o=e[r++],s=e[r++],l=((n&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const a=e[r++],o=e[r++];t[i++]=String.fromCharCode((n&15)<<12|(a&63)<<6|o&63)}}return t.join("")},Lye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let n=0;n<e.length;n+=3){const a=e[n],o=n+1<e.length,s=o?e[n+1]:0,l=n+2<e.length,u=l?e[n+2]:0,c=a>>2,d=(a&3)<<4|s>>4;let h=(s&15)<<2|u>>6,f=u&63;l||(f=64,o||(h=64)),i.push(r[c],r[d],r[h],r[f])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bye(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Y4e(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let n=0;n<e.length;){const a=r[e.charAt(n++)],s=n<e.length?r[e.charAt(n)]:0;++n;const u=n<e.length?r[e.charAt(n)]:64;++n;const d=n<e.length?r[e.charAt(n)]:64;if(++n,a==null||s==null||u==null||d==null)throw new K4e;const h=a<<2|s>>4;if(i.push(h),u!==64){const f=s<<4&240|u>>2;if(i.push(f),d!==64){const g=u<<6&192|d;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class K4e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Q4e=function(e){const t=Bye(e);return Lye.encodeByteArray(t,!0)},Fye=function(e){return Q4e(e).replace(/\./g,"")},Nye=function(e){try{return Lye.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4e=()=>J4e().__FIREBASE_DEFAULTS__,eUe=()=>{if(typeof process>"u"||typeof yX>"u")return;const e=yX.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},tUe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Nye(e[1]);return t&&JSON.parse(t)},tq=()=>{try{return X4e()||Z4e()||eUe()||tUe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},rUe=e=>{var t,r;return(r=(t=tq())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[e]},Uye=()=>{var e;return(e=tq())===null||e===void 0?void 0:e.config},Vye=e=>{var t;return(t=tq())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iUe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nUe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(uo())}function aUe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oUe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function sUe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lUe(){const e=uo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function uUe(){try{return typeof indexedDB=="object"}catch{return!1}}function cUe(){return new Promise((e,t)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(i);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(i),e(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{var a;t(((a=n.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dUe="FirebaseError";class Mv extends Error{constructor(t,r,i){super(r),this.code=t,this.customData=i,this.name=dUe,Object.setPrototypeOf(this,Mv.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tP.prototype.create)}}class tP{constructor(t,r,i){this.service=t,this.serviceName=r,this.errors=i}create(t,...r){const i=r[0]||{},n=`${this.service}/${t}`,a=this.errors[t],o=a?hUe(a,i):"Error",s=`${this.serviceName}: ${o} (${n}).`;return new Mv(n,s,i)}}function hUe(e,t){return e.replace(fUe,(r,i)=>{const n=t[i];return n!=null?String(n):`<${i}?>`})}const fUe=/\{\$([^}]+)}/g;function pUe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F_(e,t){if(e===t)return!0;const r=Object.keys(e),i=Object.keys(t);for(const n of r){if(!i.includes(n))return!1;const a=e[n],o=t[n];if(bX(a)&&bX(o)){if(!F_(a,o))return!1}else if(a!==o)return!1}for(const n of i)if(!r.includes(n))return!1;return!0}function bX(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(e){const t=[];for(const[r,i]of Object.entries(e))Array.isArray(i)?i.forEach(n=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function HC(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[n,a]=i.split("=");t[decodeURIComponent(n)]=decodeURIComponent(a)}}),t}function $C(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function mUe(e,t){const r=new gUe(e,t);return r.subscribe.bind(r)}class gUe{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,i){let n;if(t===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");vUe(t,["next","error","complete"])?n=t:n={next:t,error:r,complete:i},n.next===void 0&&(n.next=z3),n.error===void 0&&(n.error=z3),n.complete===void 0&&(n.complete=z3);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vUe(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function z3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(e){return e&&e._delegate?e._delegate:e}class N_{constructor(t,r,i){this.name=t,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yUe{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const i=new iUe;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:r});n&&i.resolve(n)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(_Ue(t))try{this.getOrInitializeService({instanceIdentifier:m0})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:n});i.resolve(a)}catch{}}}}clearInstance(t=m0){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=m0){return this.instances.has(t)}getOptions(t=m0){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);i===s&&o.resolve(n)}return n}onInit(t,r){var i;const n=this.normalizeInstanceIdentifier(r),a=(i=this.onInitCallbacks.get(n))!==null&&i!==void 0?i:new Set;a.add(t),this.onInitCallbacks.set(n,a);const o=this.instances.get(n);return o&&t(o,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const i=this.onInitCallbacks.get(r);if(i)for(const n of i)try{n(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bUe(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=m0){return this.component?this.component.multipleInstances?t:m0:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bUe(e){return e===m0?void 0:e}function _Ue(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wUe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new yUe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(xi||(xi={}));const xUe={debug:xi.DEBUG,verbose:xi.VERBOSE,info:xi.INFO,warn:xi.WARN,error:xi.ERROR,silent:xi.SILENT},SUe=xi.INFO,CUe={[xi.DEBUG]:"log",[xi.VERBOSE]:"log",[xi.INFO]:"info",[xi.WARN]:"warn",[xi.ERROR]:"error"},EUe=(e,t,...r)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),n=CUe[t];if(n)console[n](`[${i}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class kye{constructor(t){this.name=t,this._logLevel=SUe,this._logHandler=EUe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in xi))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?xUe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,xi.DEBUG,...t),this._logHandler(this,xi.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,xi.VERBOSE,...t),this._logHandler(this,xi.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,xi.INFO,...t),this._logHandler(this,xi.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,xi.WARN,...t),this._logHandler(this,xi.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,xi.ERROR,...t),this._logHandler(this,xi.ERROR,...t)}}const MUe=(e,t)=>t.some(r=>e instanceof r);let _X,wX;function PUe(){return _X||(_X=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TUe(){return wX||(wX=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qye=new WeakMap,mV=new WeakMap,Wye=new WeakMap,B3=new WeakMap,rq=new WeakMap;function AUe(e){const t=new Promise((r,i)=>{const n=()=>{e.removeEventListener("success",a),e.removeEventListener("error",o)},a=()=>{r(lv(e.result)),n()},o=()=>{i(e.error),n()};e.addEventListener("success",a),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&qye.set(r,e)}).catch(()=>{}),rq.set(t,e),t}function OUe(e){if(mV.has(e))return;const t=new Promise((r,i)=>{const n=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",o),e.removeEventListener("abort",o)},a=()=>{r(),n()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",a),e.addEventListener("error",o),e.addEventListener("abort",o)});mV.set(e,t)}let gV={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return mV.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Wye.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return lv(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function RUe(e){gV=e(gV)}function DUe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const i=e.call(L3(this),t,...r);return Wye.set(i,t.sort?t.sort():[t]),lv(i)}:TUe().includes(e)?function(...t){return e.apply(L3(this),t),lv(qye.get(this))}:function(...t){return lv(e.apply(L3(this),t))}}function IUe(e){return typeof e=="function"?DUe(e):(e instanceof IDBTransaction&&OUe(e),MUe(e,PUe())?new Proxy(e,gV):e)}function lv(e){if(e instanceof IDBRequest)return AUe(e);if(B3.has(e))return B3.get(e);const t=IUe(e);return t!==e&&(B3.set(e,t),rq.set(t,e)),t}const L3=e=>rq.get(e);function jUe(e,t,{blocked:r,upgrade:i,blocking:n,terminated:a}={}){const o=indexedDB.open(e,t),s=lv(o);return i&&o.addEventListener("upgradeneeded",l=>{i(lv(o.result),l.oldVersion,l.newVersion,lv(o.transaction),l)}),r&&o.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),s.then(l=>{a&&l.addEventListener("close",()=>a()),n&&l.addEventListener("versionchange",u=>n(u.oldVersion,u.newVersion,u))}).catch(()=>{}),s}const zUe=["get","getKey","getAll","getAllKeys","count"],BUe=["put","add","delete","clear"],F3=new Map;function xX(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(F3.get(t))return F3.get(t);const r=t.replace(/FromIndex$/,""),i=t!==r,n=BUe.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(n||zUe.includes(r)))return;const a=async function(o,...s){const l=this.transaction(o,n?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(s.shift())),(await Promise.all([u[r](...s),n&&l.done]))[0]};return F3.set(t,a),a}RUe(e=>({...e,get:(t,r,i)=>xX(t,r)||e.get(t,r,i),has:(t,r)=>!!xX(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LUe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(FUe(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function FUe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const vV="@firebase/app",SX="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=new kye("@firebase/app"),NUe="@firebase/app-compat",UUe="@firebase/analytics-compat",VUe="@firebase/analytics",kUe="@firebase/app-check-compat",qUe="@firebase/app-check",WUe="@firebase/auth",GUe="@firebase/auth-compat",HUe="@firebase/database",$Ue="@firebase/data-connect",XUe="@firebase/database-compat",YUe="@firebase/functions",KUe="@firebase/functions-compat",QUe="@firebase/installations",JUe="@firebase/installations-compat",ZUe="@firebase/messaging",e5e="@firebase/messaging-compat",t5e="@firebase/performance",r5e="@firebase/performance-compat",i5e="@firebase/remote-config",n5e="@firebase/remote-config-compat",a5e="@firebase/storage",o5e="@firebase/storage-compat",s5e="@firebase/firestore",l5e="@firebase/vertexai",u5e="@firebase/firestore-compat",c5e="firebase",d5e="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="[DEFAULT]",h5e={[vV]:"fire-core",[NUe]:"fire-core-compat",[VUe]:"fire-analytics",[UUe]:"fire-analytics-compat",[qUe]:"fire-app-check",[kUe]:"fire-app-check-compat",[WUe]:"fire-auth",[GUe]:"fire-auth-compat",[HUe]:"fire-rtdb",[$Ue]:"fire-data-connect",[XUe]:"fire-rtdb-compat",[YUe]:"fire-fn",[KUe]:"fire-fn-compat",[QUe]:"fire-iid",[JUe]:"fire-iid-compat",[ZUe]:"fire-fcm",[e5e]:"fire-fcm-compat",[t5e]:"fire-perf",[r5e]:"fire-perf-compat",[i5e]:"fire-rc",[n5e]:"fire-rc-compat",[a5e]:"fire-gcs",[o5e]:"fire-gcs-compat",[s5e]:"fire-fst",[u5e]:"fire-fst-compat",[l5e]:"fire-vertex","fire-js":"fire-js",[c5e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=new Map,f5e=new Map,bV=new Map;function CX(e,t){try{e.container.addComponent(t)}catch(r){qm.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function rM(e){const t=e.name;if(bV.has(t))return qm.debug(`There were multiple attempts to register component ${t}.`),!1;bV.set(t,e);for(const r of kR.values())CX(r,e);for(const r of f5e.values())CX(r,e);return!0}function Gye(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function es(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},uv=new tP("app","Firebase",p5e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5e{constructor(t,r,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new N_("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw uv.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=d5e;function Hye(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:yV,automaticDataCollectionEnabled:!1},t),n=i.name;if(typeof n!="string"||!n)throw uv.create("bad-app-name",{appName:String(n)});if(r||(r=Uye()),!r)throw uv.create("no-options");const a=kR.get(n);if(a){if(F_(r,a.options)&&F_(i,a.config))return a;throw uv.create("duplicate-app",{appName:n})}const o=new wUe(n);for(const l of bV.values())o.addComponent(l);const s=new m5e(r,i,o);return kR.set(n,s),s}function g5e(e=yV){const t=kR.get(e);if(!t&&e===yV&&Uye())return Hye();if(!t)throw uv.create("no-app",{appName:e});return t}function u_(e,t,r){var i;let n=(i=h5e[e])!==null&&i!==void 0?i:e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const s=[`Unable to register library "${n}" with version "${t}":`];a&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&o&&s.push("and"),o&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),qm.warn(s.join(" "));return}rM(new N_(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5e="firebase-heartbeat-database",y5e=1,iM="firebase-heartbeat-store";let N3=null;function $ye(){return N3||(N3=jUe(v5e,y5e,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(iM)}catch(r){console.warn(r)}}}}).catch(e=>{throw uv.create("idb-open",{originalErrorMessage:e.message})})),N3}async function b5e(e){try{const r=(await $ye()).transaction(iM),i=await r.objectStore(iM).get(Xye(e));return await r.done,i}catch(t){if(t instanceof Mv)qm.warn(t.message);else{const r=uv.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});qm.warn(r.message)}}}async function EX(e,t){try{const i=(await $ye()).transaction(iM,"readwrite");await i.objectStore(iM).put(t,Xye(e)),await i.done}catch(r){if(r instanceof Mv)qm.warn(r.message);else{const i=uv.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});qm.warn(i.message)}}}function Xye(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5e=1024,w5e=30;class x5e{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new C5e(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,r;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=MX();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>w5e){const o=E5e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){qm.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=MX(),{heartbeatsToSend:i,unsentEntries:n}=S5e(this._heartbeatsCache.heartbeats),a=Fye(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return qm.warn(r),""}}}function MX(){return new Date().toISOString().substring(0,10)}function S5e(e,t=_5e){const r=[];let i=e.slice();for(const n of e){const a=r.find(o=>o.agent===n.agent);if(a){if(a.dates.push(n.date),PX(r)>t){a.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),PX(r)>t){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class C5e{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uUe()?cUe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await b5e(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const n=await this.read();return EX(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const n=await this.read();return EX(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function PX(e){return Fye(JSON.stringify({version:2,heartbeats:e})).length}function E5e(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let i=1;i<e.length;i++)e[i].date<r&&(r=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5e(e){rM(new N_("platform-logger",t=>new LUe(t),"PRIVATE")),rM(new N_("heartbeat",t=>new x5e(t),"PRIVATE")),u_(vV,SX,e),u_(vV,SX,"esm2017"),u_("fire-js","")}M5e("");var P5e="firebase",T5e="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */u_(P5e,T5e,"app");function iq(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function A5e(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})}function O5e(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(i=1,n&&(a=u[0]&2?n.return:u[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,u[1])).done)return a;switch(n=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(c){u=[6,c],n=0}finally{i=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Yye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R5e=Yye,Kye=new tP("auth","Firebase",Yye());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new kye("@firebase/auth");function D5e(e,...t){qR.logLevel<=xi.WARN&&qR.warn(`Auth (${rP}): ${e}`,...t)}function GO(e,...t){qR.logLevel<=xi.ERROR&&qR.error(`Auth (${rP}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(e,...t){throw aq(e,...t)}function Ro(e,...t){return aq(e,...t)}function nq(e,t,r){const i=Object.assign(Object.assign({},R5e()),{[t]:r});return new tP("auth","Firebase",i).create(t,{appName:e.name})}function bp(e){return nq(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I5e(e,t,r){const i=r;if(!(t instanceof i))throw i.name!==t.constructor.name&&Ys(e,"argument-error"),nq(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function aq(e,...t){if(typeof e!="string"){const r=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(r,...i)}return Kye.create(e,...t)}function Ut(e,t,...r){if(!e)throw aq(t,...r)}function Tm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw GO(t),new Error(t)}function Wm(e,t){e||Tm(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Qye(){return TX()==="http:"||TX()==="https:"}function TX(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qye()||oUe()||"connection"in navigator)?navigator.onLine:!0}function z5e(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(t,r){this.shortDelay=t,this.longDelay=r,Wm(r>t,"Short delay should be less than long delay!"),this.isMobile=nUe()||sUe()}get(){return j5e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(e,t){Wm(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jye{static initialize(t,r,i){this.fetchImpl=t,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F5e=new iP(3e4,6e4);function Fo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function el(e,t,r,i,n={}){return Zye(e,n,async()=>{let a={},o={};i&&(t==="GET"?o=i:a={body:JSON.stringify(i)});const s=hw(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u=Object.assign({method:t,headers:l},a);return aUe()||(u.referrerPolicy="no-referrer"),Jye.fetch()(await e0e(e,e.config.apiHost,r,s),u)})}async function Zye(e,t,r){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},B5e),t);try{const n=new U5e(e),a=await Promise.race([r(),n.promise]);n.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw XC(e,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[l,u]=s.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw XC(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw XC(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw XC(e,"user-disabled",o);const c=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw nq(e,c,u);Ys(e,c)}}catch(n){if(n instanceof Mv)throw n;Ys(e,"network-request-failed",{message:String(n)})}}async function Pv(e,t,r,i,n={}){const a=await el(e,t,r,i,n);return"mfaPendingCredential"in a&&Ys(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function e0e(e,t,r,i){const n=`${t}${r}?${i}`,a=e,o=a.config.emulator?oq(e.config,n):`${e.config.apiScheme}://${n}`;return L5e.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function N5e(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U5e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(Ro(this.auth,"network-request-failed")),F5e.get())})}}function XC(e,t,r){const i={appName:e.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const n=Ro(e,t,i);return n.customData._tokenResponse=r,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(e){return e!==void 0&&e.getResponse!==void 0}function OX(e){return e!==void 0&&e.enterprise!==void 0}class t0e{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return N5e(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V5e(e){return(await el(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function r0e(e,t){return el(e,"GET","/v2/recaptchaConfig",Fo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k5e(e,t){return el(e,"POST","/v1/accounts:delete",t)}async function WR(e,t){return el(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function q5e(e,t=!1){const r=Lp(e),i=await r.getIdToken(t),n=sq(i);Ut(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error");const a=typeof n.firebase=="object"?n.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:n,token:i,authTime:gE(U3(n.auth_time)),issuedAtTime:gE(U3(n.iat)),expirationTime:gE(U3(n.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function U3(e){return Number(e)*1e3}function sq(e){const[t,r,i]=e.split(".");if(t===void 0||r===void 0||i===void 0)return GO("JWT malformed, contained fewer than 3 sections"),null;try{const n=Nye(r);return n?JSON.parse(n):(GO("Failed to decode base64 JWT payload"),null)}catch(n){return GO("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function RX(e){const t=sq(e);return Ut(t,"internal-error"),Ut(typeof t.exp<"u","internal-error"),Ut(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(e,t,r=!1){if(r)return t;try{return await t}catch(i){throw i instanceof Mv&&W5e(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function W5e({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5e{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const n=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=gE(this.lastLoginAt),this.creationTime=gE(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(e){var t;const r=e.auth,i=await e.getIdToken(),n=await nM(e,WR(r,{idToken:i}));Ut(n==null?void 0:n.users.length,r,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const o=!((t=a.providerUserInfo)===null||t===void 0)&&t.length?i0e(a.providerUserInfo):[],s=$5e(e.providerData,o),l=e.isAnonymous,u=!(e.email&&a.passwordHash)&&!(s!=null&&s.length),c=l?u:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new wV(a.createdAt,a.lastLoginAt),isAnonymous:c};Object.assign(e,d)}async function H5e(e){const t=Lp(e);await GR(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function $5e(e,t){return[...e.filter(i=>!t.some(n=>n.providerId===i.providerId)),...t]}function i0e(e){return e.map(t=>{var{providerId:r}=t,i=iq(t,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5e(e,t){const r=await Zye(e,{},async()=>{const i=hw({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:a}=e.config,o=await e0e(e,n,"/v1/token",`key=${a}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Jye.fetch()(o,{method:"POST",headers:s,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Y5e(e,t){return el(e,"POST","/v2/accounts:revokeToken",Fo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ut(t.idToken,"internal-error"),Ut(typeof t.idToken<"u","internal-error"),Ut(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):RX(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Ut(t.length!==0,"internal-error");const r=RX(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ut(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:i,refreshToken:n,expiresIn:a}=await X5e(t,r);this.updateTokensAndExpiration(i,n,Number(a))}updateTokensAndExpiration(t,r,i){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,r){const{refreshToken:i,accessToken:n,expirationTime:a}=r,o=new c_;return i&&(Ut(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),n&&(Ut(typeof n=="string","internal-error",{appName:t}),o.accessToken=n),a&&(Ut(typeof a=="number","internal-error",{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new c_,this.toJSON())}_performRefresh(){return Tm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(e,t){Ut(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class bf{constructor(t){var{uid:r,auth:i,stsTokenManager:n}=t,a=iq(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G5e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new wV(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await nM(this,this.stsTokenManager.getToken(this.auth,t));return Ut(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return q5e(this,t)}reload(){return H5e(this)}_assign(t){this!==t&&(Ut(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new bf(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){Ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),r&&await GR(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(bp(this.auth));const t=await this.getIdToken();return await nM(this,k5e(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var i,n,a,o,s,l,u,c;const d=(i=r.displayName)!==null&&i!==void 0?i:void 0,h=(n=r.email)!==null&&n!==void 0?n:void 0,f=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,g=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(s=r.tenantId)!==null&&s!==void 0?s:void 0,m=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=r.createdAt)!==null&&u!==void 0?u:void 0,b=(c=r.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:x,isAnonymous:S,providerData:C,stsTokenManager:T}=r;Ut(w&&T,t,"internal-error");const M=c_.fromJSON(this.name,T);Ut(typeof w=="string",t,"internal-error"),xg(d,t.name),xg(h,t.name),Ut(typeof x=="boolean",t,"internal-error"),Ut(typeof S=="boolean",t,"internal-error"),xg(f,t.name),xg(g,t.name),xg(p,t.name),xg(m,t.name),xg(y,t.name),xg(b,t.name);const A=new bf({uid:w,auth:t,email:h,emailVerified:x,displayName:d,isAnonymous:S,photoURL:g,phoneNumber:f,tenantId:p,stsTokenManager:M,createdAt:y,lastLoginAt:b});return C&&Array.isArray(C)&&(A.providerData=C.map(P=>Object.assign({},P))),m&&(A._redirectEventId=m),A}static async _fromIdTokenResponse(t,r,i=!1){const n=new c_;n.updateFromServerResponse(r);const a=new bf({uid:r.localId,auth:t,stsTokenManager:n,isAnonymous:i});return await GR(a),a}static async _fromGetAccountInfoResponse(t,r,i){const n=r.users[0];Ut(n.localId!==void 0,"internal-error");const a=n.providerUserInfo!==void 0?i0e(n.providerUserInfo):[],o=!(n.email&&n.passwordHash)&&!(a!=null&&a.length),s=new c_;s.updateFromIdToken(i);const l=new bf({uid:n.localId,auth:t,stsTokenManager:s,isAnonymous:o}),u={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:a,metadata:new wV(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DX=new Map;function Am(e){Wm(e instanceof Function,"Expected a class definition");let t=DX.get(e);return t?(Wm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,DX.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}n0e.type="NONE";const IX=n0e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(e,t,r){return`firebase:${e}:${t}:${r}`}class d_{constructor(t,r,i){this.persistence=t,this.auth=r,this.userKey=i;const{config:n,name:a}=this.auth;this.fullUserKey=HO(this.userKey,n.apiKey,a),this.fullPersistenceKey=HO("persistence",n.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await WR(this.auth,{idToken:t}).catch(()=>{});return r?bf._fromGetAccountInfoResponse(this.auth,r,t):null}return bf._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,i="authUser"){if(!r.length)return new d_(Am(IX),t,i);const n=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=n[0]||Am(IX);const o=HO(i,t.config.apiKey,t.name);let s=null;for(const u of r)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const h=await WR(t,{idToken:c}).catch(()=>{});if(!h)break;d=await bf._fromGetAccountInfoResponse(t,h,c)}else d=bf._fromJSON(t,c);u!==a&&(s=d),a=u;break}}catch{}const l=n.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new d_(a,t,i):(a=l[0],s&&await a._set(o,s.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new d_(a,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jX(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(l0e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(a0e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(c0e(t))return"Blackberry";if(d0e(t))return"Webos";if(o0e(t))return"Safari";if((t.includes("chrome/")||s0e(t))&&!t.includes("edge/"))return"Chrome";if(u0e(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function a0e(e=uo()){return/firefox\//i.test(e)}function o0e(e=uo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function s0e(e=uo()){return/crios\//i.test(e)}function l0e(e=uo()){return/iemobile/i.test(e)}function u0e(e=uo()){return/android/i.test(e)}function c0e(e=uo()){return/blackberry/i.test(e)}function d0e(e=uo()){return/webos/i.test(e)}function lq(e=uo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function K5e(e=uo()){var t;return lq(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Q5e(){return lUe()&&document.documentMode===10}function h0e(e=uo()){return lq(e)||u0e(e)||d0e(e)||c0e(e)||/windows phone/i.test(e)||l0e(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0e(e,t=[]){let r;switch(e){case"Browser":r=jX(uo());break;case"Worker":r=`${jX(uo())}-${e}`;break;default:r=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${rP}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5e{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const i=a=>new Promise((o,s)=>{try{const l=t(a);o(l)}catch(l){s(l)}});i.onAbort=r,this.queue.push(i);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const i of this.queue)await i(t),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const n of r)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5e(e,t={}){return el(e,"GET","/v2/passwordPolicy",Fo(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eVe=6;class tVe{constructor(t){var r,i,n,a;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:eVe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(a=t.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,i,n,a,o,s;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(n=l.containsLowercaseLetter)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(a=l.containsUppercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),l}validatePasswordLengthOptions(t,r){const i=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=t.length>=i),n&&(r.meetsMaxPasswordLength=t.length<=n)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let n=0;n<t.length;n++)i=t.charAt(n),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,r,i,n,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rVe{constructor(t,r,i,n){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zX(this),this.idTokenSubscription=new zX(this),this.beforeStateQueue=new J5e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kye,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Am(r)),this._initializationPromise=this.queue(async()=>{var i,n,a;if(!this._deleted&&(this.persistenceManager=await d_.create(this,t),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await WR(this,{idToken:t}),i=await bf._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var r;if(es(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let n=i,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,s=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===s)&&(l!=null&&l.user)&&(n=l.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await GR(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=z5e()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(es(this.app))return Promise.reject(bp(this));const r=t?Lp(t):null;return r&&Ut(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Ut(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(bp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return es(this.app)?Promise.reject(bp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Am(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Z5e(this),r=new tVe(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new tP("auth","Firebase",t())}onAuthStateChanged(t,r,i){return this.registerStateListener(this.authStateSubscription,t,r,i)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,i){return this.registerStateListener(this.idTokenSubscription,t,r,i)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await Y5e(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const i=await this.getOrInitRedirectPersistenceManager(r);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Am(t)||this._popupRedirectResolver;Ut(r,this,"argument-error"),this.redirectPersistenceManager=await d_.create(this,[Am(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,i,n){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ut(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const l=t.addObserver(r,i,n);return()=>{o=!0,l()}}else{const l=t.addObserver(r);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=f0e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());i&&(r["X-Firebase-Client"]=i);const n=await this._getAppCheckToken();return n&&(r["X-Firebase-AppCheck"]=n),r}async _getAppCheckToken(){var t;if(es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&D5e(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Rf(e){return Lp(e)}class zX{constructor(t){this.auth=t,this.observer=null,this.addObserver=mUe(r=>this.observer=r)}get next(){return Ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nP={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iVe(e){nP=e}function uq(e){return nP.loadJS(e)}function nVe(){return nP.recaptchaV2Script}function aVe(){return nP.recaptchaEnterpriseScript}function oVe(){return nP.gapiScript}function p0e(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sVe=500,lVe=6e4,ZT=1e12;class uVe{constructor(t){this.auth=t,this.counter=ZT,this._widgets=new Map}render(t,r){const i=this.counter;return this._widgets.set(i,new hVe(t,this.auth.name,r||{})),this.counter++,i}reset(t){var r;const i=t||ZT;(r=this._widgets.get(i))===null||r===void 0||r.delete(),this._widgets.delete(i)}getResponse(t){var r;const i=t||ZT;return((r=this._widgets.get(i))===null||r===void 0?void 0:r.getResponse())||""}async execute(t){var r;const i=t||ZT;return(r=this._widgets.get(i))===null||r===void 0||r.execute(),""}}class cVe{constructor(){this.enterprise=new dVe}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class dVe{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class hVe{constructor(t,r,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const n=typeof t=="string"?document.getElementById(t):t;Ut(n,"argument-error",{appName:r}),this.container=n,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=fVe(50);const{callback:t,"expired-callback":r}=this.params;if(t)try{t(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,r)try{r()}catch{}this.isVisible&&this.execute()},lVe)},sVe))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function fVe(e){const t=[],r="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(r.charAt(Math.floor(Math.random()*r.length)));return t.join("")}const pVe="recaptcha-enterprise",vE="NO_RECAPTCHA";class m0e{constructor(t){this.type=pVe,this.auth=Rf(t)}async verify(t="verify",r=!1){async function i(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{r0e(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const u=new t0e(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(l=>{s(l)})})}function n(a,o,s){const l=window.grecaptcha;OX(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:t}).then(u=>{o(u)}).catch(()=>{o(vE)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cVe().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{i(this.auth).then(s=>{if(!r&&OX(window.grecaptcha))n(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=aVe();l.length!==0&&(l+=s),uq(l).then(()=>{n(s,a,o)}).catch(u=>{o(u)})}}).catch(s=>{o(s)})})}}async function Tx(e,t,r,i=!1,n=!1){const a=new m0e(e);let o;if(n)o=vE;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const s=Object.assign({},t);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const l=s.phoneEnrollmentInfo.phoneNumber,u=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const l=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function h_(e,t,r,i,n){var a,o;if(n==="EMAIL_PASSWORD_PROVIDER")if(!((a=e._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Tx(e,t,r,r==="getOobCode");return i(e,s)}else return i(e,t).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Tx(e,t,r,r==="getOobCode");return i(e,l)}else return Promise.reject(s)});else if(n==="PHONE_PROVIDER")if(!((o=e._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const s=await Tx(e,t,r);return i(e,s).catch(async l=>{var u;if(((u=e._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const c=await Tx(e,t,r,!1,!0);return i(e,c)}return Promise.reject(l)})}else{const s=await Tx(e,t,r,!1,!0);return i(e,s)}else return Promise.reject(n+" provider is not supported.")}async function mVe(e){const t=Rf(e),r=await r0e(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new t0e(r);t.tenantId==null?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()&&new m0e(t).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gVe(e,t){const r=Gye(e,"auth");if(r.isInitialized()){const n=r.getImmediate(),a=r.getOptions();if(F_(a,t??{}))return n;Ys(n,"already-initialized")}return r.initialize({options:t})}function vVe(e,t){const r=(t==null?void 0:t.persistence)||[],i=(Array.isArray(r)?r:[r]).map(Am);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function yVe(e,t,r){const i=Rf(e);Ut(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const n=!1,a=g0e(t),{host:o,port:s}=bVe(t),l=s===null?"":`:${s}`,u={url:`${a}//${o}${l}/`},c=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!i._canInitEmulator){Ut(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ut(F_(u,i.config.emulator)&&F_(c,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=c,i.settings.appVerificationDisabledForTesting=!0,_Ve()}function g0e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bVe(e){const t=g0e(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(i);if(n){const a=n[1];return{host:a,port:BX(i.substr(a.length+1))}}else{const[a,o]=i.split(":");return{host:a,port:BX(o)}}}function BX(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function _Ve(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Tm("not implemented")}_getIdTokenResponse(t){return Tm("not implemented")}_linkToIdToken(t,r){return Tm("not implemented")}_getReauthenticationResolver(t){return Tm("not implemented")}}async function wVe(e,t){return el(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xVe(e,t){return Pv(e,"POST","/v1/accounts:signInWithPassword",Fo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SVe(e,t){return Pv(e,"POST","/v1/accounts:signInWithEmailLink",Fo(e,t))}async function CVe(e,t){return Pv(e,"POST","/v1/accounts:signInWithEmailLink",Fo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM extends I2{constructor(t,r,i,n=null){super("password",i),this._email=t,this._password=r,this._tenantId=n}static _fromEmailAndPassword(t,r){return new aM(t,r,"password")}static _fromEmailAndCode(t,r,i=null){return new aM(t,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h_(t,r,"signInWithPassword",xVe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SVe(t,{email:this._email,oobCode:this._password});default:Ys(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const i={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h_(t,i,"signUpPassword",wVe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return CVe(t,{idToken:r,email:this._email,oobCode:this._password});default:Ys(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f_(e,t){return Pv(e,"POST","/v1/accounts:signInWithIdp",Fo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVe="http://localhost";class ab extends I2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new ab(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Ys("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:n}=r,a=iq(r,["providerId","signInMethod"]);if(!i||!n)return null;const o=new ab(i,n);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(t){const r=this.buildRequest();return f_(t,r)}_linkToIdToken(t,r){const i=this.buildRequest();return i.idToken=r,f_(t,i)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,f_(t,r)}buildRequest(){const t={requestUri:EVe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=hw(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LX(e,t){return el(e,"POST","/v1/accounts:sendVerificationCode",Fo(e,t))}async function MVe(e,t){return Pv(e,"POST","/v1/accounts:signInWithPhoneNumber",Fo(e,t))}async function PVe(e,t){const r=await Pv(e,"POST","/v1/accounts:signInWithPhoneNumber",Fo(e,t));if(r.temporaryProof)throw XC(e,"account-exists-with-different-credential",r);return r}const TVe={USER_NOT_FOUND:"user-not-found"};async function AVe(e,t){const r=Object.assign(Object.assign({},t),{operation:"REAUTH"});return Pv(e,"POST","/v1/accounts:signInWithPhoneNumber",Fo(e,r),TVe)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends I2{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,r){return new yE({verificationId:t,verificationCode:r})}static _fromTokenResponse(t,r){return new yE({phoneNumber:t,temporaryProof:r})}_getIdTokenResponse(t){return MVe(t,this._makeVerificationRequest())}_linkToIdToken(t,r){return PVe(t,Object.assign({idToken:r},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return AVe(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:r,verificationId:i,verificationCode:n}=this.params;return t&&r?{temporaryProof:t,phoneNumber:r}:{sessionInfo:i,code:n}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));const{verificationId:r,verificationCode:i,phoneNumber:n,temporaryProof:a}=t;return!i&&!r&&!n&&!a?null:new yE({verificationId:r,verificationCode:i,phoneNumber:n,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OVe(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RVe(e){const t=HC($C(e)).link,r=t?HC($C(t)).deep_link_id:null,i=HC($C(e)).deep_link_id;return(i?HC($C(i)).link:null)||i||r||t||e}class cq{constructor(t){var r,i,n,a,o,s;const l=HC($C(t)),u=(r=l.apiKey)!==null&&r!==void 0?r:null,c=(i=l.oobCode)!==null&&i!==void 0?i:null,d=OVe((n=l.mode)!==null&&n!==void 0?n:null);Ut(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(a=l.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(s=l.tenantId)!==null&&s!==void 0?s:null}static parseLink(t){const r=RVe(t);try{return new cq(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.providerId=fw.PROVIDER_ID}static credential(t,r){return aM._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=cq.parseLink(r);return Ut(i,"argument-error"),aM._fromEmailAndCode(t,i.code,i.tenantId)}}fw.PROVIDER_ID="password";fw.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP extends dq{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends aP{constructor(){super("facebook.com")}static credential(t){return ab._fromParams({providerId:qg.PROVIDER_ID,signInMethod:qg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qg.credentialFromTaggedObject(t)}static credentialFromError(t){return qg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qg.credential(t.oauthAccessToken)}catch{return null}}}qg.FACEBOOK_SIGN_IN_METHOD="facebook.com";qg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends aP{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return ab._fromParams({providerId:Em.PROVIDER_ID,signInMethod:Em.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return Em.credentialFromTaggedObject(t)}static credentialFromError(t){return Em.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return Em.credential(r,i)}catch{return null}}}Em.GOOGLE_SIGN_IN_METHOD="google.com";Em.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends aP{constructor(){super("github.com")}static credential(t){return ab._fromParams({providerId:Wg.PROVIDER_ID,signInMethod:Wg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wg.credentialFromTaggedObject(t)}static credentialFromError(t){return Wg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wg.credential(t.oauthAccessToken)}catch{return null}}}Wg.GITHUB_SIGN_IN_METHOD="github.com";Wg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends aP{constructor(){super("twitter.com")}static credential(t,r){return ab._fromParams({providerId:Gg.PROVIDER_ID,signInMethod:Gg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return Gg.credentialFromTaggedObject(t)}static credentialFromError(t){return Gg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=t;if(!r||!i)return null;try{return Gg.credential(r,i)}catch{return null}}}Gg.TWITTER_SIGN_IN_METHOD="twitter.com";Gg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DVe(e,t){return Pv(e,"POST","/v1/accounts:signUp",Fo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,i,n=!1){const a=await bf._fromIdTokenResponse(t,i,n),o=FX(i);return new ob({user:a,providerId:o,_tokenResponse:i,operationType:r})}static async _forOperation(t,r,i){await t._updateTokensIfNecessary(i,!0);const n=FX(i);return new ob({user:t,providerId:n,_tokenResponse:i,operationType:r})}}function FX(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR extends Mv{constructor(t,r,i,n){var a;super(r.code,r.message),this.operationType=i,this.user=n,Object.setPrototypeOf(this,HR.prototype),this.customData={appName:t.name,tenantId:(a=t.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,r,i,n){return new HR(t,r,i,n)}}function v0e(e,t,r,i){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?HR._fromErrorAndOperation(e,a,t,i):a})}async function IVe(e,t,r=!1){const i=await nM(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return ob._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jVe(e,t,r=!1){const{auth:i}=e;if(es(i.app))return Promise.reject(bp(i));const n="reauthenticate";try{const a=await nM(e,v0e(i,n,t,e),r);Ut(a.idToken,i,"internal-error");const o=sq(a.idToken);Ut(o,i,"internal-error");const{sub:s}=o;return Ut(e.uid===s,i,"user-mismatch"),ob._forOperation(e,n,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ys(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y0e(e,t,r=!1){if(es(e.app))return Promise.reject(bp(e));const i="signIn",n=await v0e(e,i,t),a=await ob._fromIdTokenResponse(e,i,n);return r||await e._updateCurrentUser(a.user),a}async function b0e(e,t){return y0e(Rf(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0e(e){const t=Rf(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function zVe(e,t,r){if(es(e.app))return Promise.reject(bp(e));const i=Rf(e),o=await h_(i,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DVe,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_0e(e),l}),s=await ob._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(s.user),s}function BVe(e,t,r){return es(e.app)?Promise.reject(bp(e)):b0e(Lp(e),fw.credential(t,r)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&_0e(e),i})}function LVe(e,t,r,i){return Lp(e).onIdTokenChanged(t,r,i)}function FVe(e,t,r){return Lp(e).beforeAuthStateChanged(t,r)}function NVe(e,t,r,i){return Lp(e).onAuthStateChanged(t,r,i)}function UVe(e){return Lp(e).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NX(e,t){return el(e,"POST","/v2/accounts/mfaEnrollment:start",Fo(e,t))}const $R="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0e{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem($R,"1"),this.storage.removeItem($R),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VVe=1e3,kVe=10;class x0e extends w0e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h0e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),n=this.localCache[r];i!==n&&t(r,n,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((o,s,l)=>{this.notifyListeners(o,l)});return}const i=t.key;r?this.detachListener():this.stopPolling();const n=()=>{const o=this.storage.getItem(i);!r&&this.localCache[i]===o||this.notifyListeners(i,o)},a=this.storage.getItem(i);Q5e()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(n,kVe):n()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const n of Array.from(i))n(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},VVe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}x0e.type="LOCAL";const qVe=x0e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0e extends w0e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}S0e.type="SESSION";const C0e=S0e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WVe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(n=>n.isListeningto(t));if(r)return r;const i=new j2(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:i,eventType:n,data:a}=r.data,o=this.handlersMap[n];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:n});const s=Array.from(o).map(async u=>u(r.origin,a)),l=await WVe(s);r.ports[0].postMessage({status:"done",eventId:i,eventType:n,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}j2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(e="",t=10){let r="";for(let i=0;i<t;i++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GVe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,i=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let a,o;return new Promise((s,l)=>{const u=hq("",20);n.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:n,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(h.data.response);break;default:clearTimeout(c),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(o),n.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[n.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return window}function HVe(e){yn().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}async function $Ve(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XVe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function YVe(){return fq()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0e="firebaseLocalStorageDb",KVe=1,XR="firebaseLocalStorage",M0e="fbase_key";class oP{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function z2(e,t){return e.transaction([XR],t?"readwrite":"readonly").objectStore(XR)}function QVe(){const e=indexedDB.deleteDatabase(E0e);return new oP(e).toPromise()}function xV(){const e=indexedDB.open(E0e,KVe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(XR,{keyPath:M0e})}catch(n){r(n)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(XR)?t(i):(i.close(),await QVe(),t(await xV()))})})}async function UX(e,t,r){const i=z2(e,!0).put({[M0e]:t,value:r});return new oP(i).toPromise()}async function JVe(e,t){const r=z2(e,!1).get(t),i=await new oP(r).toPromise();return i===void 0?null:i.value}function VX(e,t){const r=z2(e,!0).delete(t);return new oP(r).toPromise()}const ZVe=800,e6e=3;class P0e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xV(),this.db)}async _withRetries(t){let r=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(r++>e6e)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fq()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=j2._getInstance(YVe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await $Ve(),!this.activeServiceWorker)return;this.sender=new GVe(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||XVe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await xV();return await UX(t,$R,"1"),await VX(t,$R),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>UX(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(i=>JVe(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>VX(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(n=>{const a=z2(n,!1).getAll();return new oP(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(t.length!==0)for(const{fbase_key:n,value:a}of t)i.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(a)&&(this.notifyListeners(n,a),r.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!i.has(n)&&(this.notifyListeners(n,null),r.push(n));return r}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const n of Array.from(i))n(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZVe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P0e.type="LOCAL";const t6e=P0e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kX(e,t){return el(e,"POST","/v2/accounts/mfaSignIn:start",Fo(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=p0e("rcb"),r6e=new iP(3e4,6e4);class i6e{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((t=yn().grecaptcha)===null||t===void 0)&&t.render)}load(t,r=""){return Ut(n6e(r),t,"argument-error"),this.shouldResolveImmediately(r)&&AX(yn().grecaptcha)?Promise.resolve(yn().grecaptcha):new Promise((i,n)=>{const a=yn().setTimeout(()=>{n(Ro(t,"network-request-failed"))},r6e.get());yn()[V3]=()=>{yn().clearTimeout(a),delete yn()[V3];const s=yn().grecaptcha;if(!s||!AX(s)){n(Ro(t,"internal-error"));return}const l=s.render;s.render=(u,c)=>{const d=l(u,c);return this.counter++,d},this.hostLanguage=r,i(s)};const o=`${nVe()}?${hw({onload:V3,render:"explicit",hl:r})}`;uq(o).catch(()=>{clearTimeout(a),n(Ro(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var r;return!!(!((r=yn().grecaptcha)===null||r===void 0)&&r.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function n6e(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}class a6e{async load(t){return new uVe(t)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="recaptcha",o6e={theme:"light",type:"image"};class s6e{constructor(t,r,i=Object.assign({},o6e)){this.parameters=i,this.type=bE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rf(t),this.isInvisible=this.parameters.size==="invisible",Ut(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const n=typeof r=="string"?document.getElementById(r):r;Ut(n,this.auth,"argument-error"),this.container=n,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new a6e:new i6e,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),r=this.getAssertedRecaptcha(),i=r.getResponse(t);return i||new Promise(n=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),n(o))};this.tokenChangeListeners.add(a),this.isInvisible&&r.execute(t)})}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){Ut(!this.parameters.sitekey,this.auth,"argument-error"),Ut(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ut(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return r=>{if(this.tokenChangeListeners.forEach(i=>i(r)),typeof t=="function")t(r);else if(typeof t=="string"){const i=yn()[t];typeof i=="function"&&i(r)}}}assertNotDestroyed(){Ut(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const r=document.createElement("div");t.appendChild(r),t=r}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){Ut(Qye()&&!fq(),this.auth,"internal-error"),await l6e(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await V5e(this.auth);Ut(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return Ut(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function l6e(){let e=null;return new Promise(t=>{if(document.readyState==="complete"){t();return}e=()=>t(),window.addEventListener("load",e)}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6e{constructor(t,r){this.verificationId=t,this.onConfirmation=r}confirm(t){const r=yE._fromVerification(this.verificationId,t);return this.onConfirmation(r)}}async function c6e(e,t,r){if(es(e.app))return Promise.reject(bp(e));const i=Rf(e),n=await d6e(i,t,Lp(r));return new u6e(n,a=>b0e(i,a))}async function d6e(e,t,r){var i;if(!e._getRecaptchaConfig())try{await mVe(e)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let n;if(typeof t=="string"?n={phoneNumber:t}:n=t,"session"in n){const a=n.session;if("phoneNumber"in n){Ut(a.type==="enroll",e,"internal-error");const o={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:n.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await h_(e,o,"mfaSmsEnrollment",async(c,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===vE){Ut((r==null?void 0:r.type)===bE,c,"argument-error");const h=await k3(c,d,r);return NX(c,h)}return NX(c,d)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).phoneSessionInfo.sessionInfo}else{Ut(a.type==="signin",e,"internal-error");const o=((i=n.multiFactorHint)===null||i===void 0?void 0:i.uid)||n.multiFactorUid;Ut(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await h_(e,s,"mfaSmsSignIn",async(d,h)=>{if(h.phoneSignInInfo.captchaResponse===vE){Ut((r==null?void 0:r.type)===bE,d,"argument-error");const f=await k3(d,h,r);return kX(d,f)}return kX(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:n.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await h_(e,a,"sendVerificationCode",async(u,c)=>{if(c.captchaResponse===vE){Ut((r==null?void 0:r.type)===bE,u,"argument-error");const d=await k3(u,c,r);return LX(u,d)}return LX(u,c)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{r==null||r._reset()}}async function k3(e,t,r){Ut(r.type===bE,e,"argument-error");const i=await r.verify();Ut(typeof i=="string",e,"argument-error");const n=Object.assign({},t);if("phoneEnrollmentInfo"in n){const a=n.phoneEnrollmentInfo.phoneNumber,o=n.phoneEnrollmentInfo.captchaResponse,s=n.phoneEnrollmentInfo.clientType,l=n.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(n,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:i,captchaResponse:o,clientType:s,recaptchaVersion:l}}),n}else if("phoneSignInInfo"in n){const a=n.phoneSignInInfo.captchaResponse,o=n.phoneSignInInfo.clientType,s=n.phoneSignInInfo.recaptchaVersion;return Object.assign(n,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:a,clientType:o,recaptchaVersion:s}}),n}else return Object.assign(n,{recaptchaToken:i}),n}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0e(e,t){return t?Am(t):(Ut(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq extends I2{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return f_(t,this._buildIdpRequest())}_linkToIdToken(t,r){return f_(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return f_(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function h6e(e){return y0e(e.auth,new pq(e),e.bypassAuthState)}function f6e(e){const{auth:t,user:r}=e;return Ut(r,t,"internal-error"),jVe(r,new pq(e),e.bypassAuthState)}async function p6e(e){const{auth:t,user:r}=e;return Ut(r,t,"internal-error"),IVe(r,new pq(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0e{constructor(t,r,i,n,a=!1){this.auth=t,this.resolver=i,this.user=n,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:i,postBody:n,tenantId:a,error:o,type:s}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return h6e;case"linkViaPopup":case"linkViaRedirect":return p6e;case"reauthViaPopup":case"reauthViaRedirect":return f6e;default:Ys(this.auth,"internal-error")}}resolve(t){Wm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Wm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6e=new iP(2e3,1e4);async function g6e(e,t,r){if(es(e.app))return Promise.reject(Ro(e,"operation-not-supported-in-this-environment"));const i=Rf(e);I5e(e,t,dq);const n=T0e(i,r);return new D0(i,"signInViaPopup",t,n).executeNotNull()}class D0 extends A0e{constructor(t,r,i,n,a){super(t,r,n,a),this.provider=i,this.authWindow=null,this.pollId=null,D0.currentPopupAction&&D0.currentPopupAction.cancel(),D0.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ut(t,this.auth,"internal-error"),t}async onExecution(){Wm(this.filter.length===1,"Popup operations only handle one event");const t=hq();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ro(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ro(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D0.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ro(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,m6e.get())};t()}}D0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6e="pendingRedirect",$O=new Map;class y6e extends A0e{constructor(t,r,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let t=$O.get(this.auth._key());if(!t){try{const i=await b6e(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(r){t=()=>Promise.reject(r)}$O.set(this.auth._key(),t)}return this.bypassAuthState||$O.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b6e(e,t){const r=x6e(t),i=w6e(e);if(!await i._isAvailable())return!1;const n=await i._get(r)==="true";return await i._remove(r),n}function _6e(e,t){$O.set(e._key(),t)}function w6e(e){return Am(e._redirectPersistence)}function x6e(e){return HO(v6e,e.config.apiKey,e.name)}async function S6e(e,t,r=!1){if(es(e.app))return Promise.reject(bp(e));const i=Rf(e),n=T0e(i,t),o=await new y6e(i,n,r).execute();return o&&!r&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6e=10*60*1e3;class E6e{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(r=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!M6e(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var i;if(t.error&&!O0e(t)){const n=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError(Ro(this.auth,n))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const i=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=C6e&&this.cachedEventUids.clear(),this.cachedEventUids.has(qX(t))}saveEventToCache(t){this.cachedEventUids.add(qX(t)),this.lastProcessedEventTime=Date.now()}}function qX(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function O0e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function M6e(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O0e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6e(e,t={}){return el(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A6e=/^https?/;async function O6e(e){if(e.config.emulator)return;const{authorizedDomains:t}=await P6e(e);for(const r of t)try{if(R6e(r))return}catch{}Ys(e,"unauthorized-domain")}function R6e(e){const t=_V(),{protocol:r,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&i===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===i}if(!A6e.test(r))return!1;if(T6e.test(e))return i===e;const n=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6e=new iP(3e4,6e4);function WX(){const e=yn().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function I6e(e){return new Promise((t,r)=>{var i,n,a;function o(){WX(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{WX(),r(Ro(e,"network-request-failed"))},timeout:D6e.get()})}if(!((n=(i=yn().gapi)===null||i===void 0?void 0:i.iframes)===null||n===void 0)&&n.Iframe)t(gapi.iframes.getContext());else if(!((a=yn().gapi)===null||a===void 0)&&a.load)o();else{const s=p0e("iframefcb");return yn()[s]=()=>{gapi.load?o():r(Ro(e,"network-request-failed"))},uq(`${oVe()}?onload=${s}`).catch(l=>r(l))}}).catch(t=>{throw XO=null,t})}let XO=null;function j6e(e){return XO=XO||I6e(e),XO}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6e=new iP(5e3,15e3),B6e="__/auth/iframe",L6e="emulator/auth/iframe",F6e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N6e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U6e(e){const t=e.config;Ut(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?oq(t,L6e):`https://${e.config.authDomain}/${B6e}`,i={apiKey:t.apiKey,appName:e.name,v:rP},n=N6e.get(e.config.apiHost);n&&(i.eid=n);const a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),`${r}?${hw(i).slice(1)}`}async function V6e(e){const t=await j6e(e),r=yn().gapi;return Ut(r,e,"internal-error"),t.open({where:document.body,url:U6e(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F6e,dontclear:!0},i=>new Promise(async(n,a)=>{await i.restyle({setHideOnLeave:!1});const o=Ro(e,"network-request-failed"),s=yn().setTimeout(()=>{a(o)},z6e.get());function l(){yn().clearTimeout(s),n(i)}i.ping(l).then(l,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q6e=500,W6e=600,G6e="_blank",H6e="http://localhost";class GX{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $6e(e,t,r,i=q6e,n=W6e){const a=Math.max((window.screen.availHeight-n)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let s="";const l=Object.assign(Object.assign({},k6e),{width:i.toString(),height:n.toString(),top:a,left:o}),u=uo().toLowerCase();r&&(s=s0e(u)?G6e:r),a0e(u)&&(t=t||H6e,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(K5e(u)&&s!=="_self")return X6e(t||"",s),new GX(null);const d=window.open(t||"",s,c);Ut(d,e,"popup-blocked");try{d.focus()}catch{}return new GX(d)}function X6e(e,t){const r=document.createElement("a");r.href=e,r.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6e="__/auth/handler",K6e="emulator/auth/handler",Q6e=encodeURIComponent("fac");async function HX(e,t,r,i,n,a){Ut(e.config.authDomain,e,"auth-domain-config-required"),Ut(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:i,v:rP,eventId:n};if(t instanceof dq){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",pUe(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(t instanceof aP){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const s=o;for(const c of Object.keys(s))s[c]===void 0&&delete s[c];const l=await e._getAppCheckToken(),u=l?`#${Q6e}=${encodeURIComponent(l)}`:"";return`${J6e(e)}?${hw(s).slice(1)}${u}`}function J6e({config:e}){return e.emulator?oq(e,K6e):`https://${e.authDomain}/${Y6e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="webStorageSupport";class Z6e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=C0e,this._completeRedirectFn=S6e,this._overrideRedirectResult=_6e}async _openPopup(t,r,i,n){var a;Wm((a=this.eventManagers[t._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await HX(t,r,i,_V(),n);return $6e(t,o,hq())}async _openRedirect(t,r,i,n){await this._originValidation(t);const a=await HX(t,r,i,_V(),n);return HVe(a),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:n,promise:a}=this.eventManagers[r];return n?Promise.resolve(n):(Wm(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(t);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(t){const r=await V6e(t),i=new E6e(t);return r.register("authEvent",n=>(Ut(n==null?void 0:n.authEvent,t,"invalid-auth-event"),{status:i.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=r,i}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(q3,{type:q3},n=>{var a;const o=(a=n==null?void 0:n[0])===null||a===void 0?void 0:a[q3];o!==void 0&&r(!!o),Ys(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=O6e(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return h0e()||o0e()||lq()}}const eke=Z6e;var $X="@firebase/auth",XX="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tke{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rke(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ike(e){rM(new N_("auth",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=i.options;Ut(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:s,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f0e(e)},u=new rVe(i,n,a,l);return vVe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,i)=>{t.getProvider("auth-internal").initialize()})),rM(new N_("auth-internal",t=>{const r=Rf(t.getProvider("auth").getImmediate());return(i=>new tke(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),u_($X,XX,rke(e)),u_($X,XX,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nke=5*60,ake=Vye("authIdTokenMaxAge")||nke;let YX=null;const oke=e=>async t=>{const r=t&&await t.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>ake)return;const n=r==null?void 0:r.token;YX!==n&&(YX=n,await fetch(e,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function ske(e=g5e()){const t=Gye(e,"auth");if(t.isInitialized())return t.getImmediate();const r=gVe(e,{popupRedirectResolver:eke,persistence:[t6e,qVe,C0e]}),i=Vye("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const o=oke(a.toString());FVe(r,o,()=>o(r.currentUser)),LVe(r,s=>o(s))}}const n=rUe("auth");return n&&yVe(r,`http://${n}`),r}function lke(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}iVe({loadJS(e){return new Promise((t,r)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=n=>{const a=Ro("internal-error");a.customData=n,r(a)},i.type="text/javascript",i.charset="UTF-8",lke().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ike("Browser");const uke={apiKey:"AIzaSyB3YRIoSokGNLrTxMbDRBhYfHHR73o-UV8",authDomain:"quirckart-infotech.firebaseapp.com",databaseURL:"https://quirckart-infotech-default-rtdb.firebaseio.com",projectId:"quirckart-infotech",storageBucket:"quirckart-infotech.firebasestorage.app",messagingSenderId:"1011544239867",appId:"1:1011544239867:web:84e790ac1093508ed60a5e",measurementId:"G-0KTRRVB0M2"},cke=Hye(uke),Jg=ske(cke);function R0e(e,t){return function(){return e.apply(t,arguments)}}const{toString:dke}=Object.prototype,{getPrototypeOf:mq}=Object,B2=(e=>t=>{const r=dke.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Df=e=>(e=e.toLowerCase(),t=>B2(t)===e),L2=e=>t=>typeof t===e,{isArray:pw}=Array,oM=L2("undefined");function hke(e){return e!==null&&!oM(e)&&e.constructor!==null&&!oM(e.constructor)&&is(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const D0e=Df("ArrayBuffer");function fke(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&D0e(e.buffer),t}const pke=L2("string"),is=L2("function"),I0e=L2("number"),F2=e=>e!==null&&typeof e=="object",mke=e=>e===!0||e===!1,YO=e=>{if(B2(e)!=="object")return!1;const t=mq(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gke=Df("Date"),vke=Df("File"),yke=Df("Blob"),bke=Df("FileList"),_ke=e=>F2(e)&&is(e.pipe),wke=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||is(e.append)&&((t=B2(e))==="formdata"||t==="object"&&is(e.toString)&&e.toString()==="[object FormData]"))},xke=Df("URLSearchParams"),[Ske,Cke,Eke,Mke]=["ReadableStream","Request","Response","Headers"].map(Df),Pke=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sP(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,n;if(typeof e!="object"&&(e=[e]),pw(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(i=0;i<o;i++)s=a[i],t.call(null,e[s],s,e)}}function j0e(e,t){t=t.toLowerCase();const r=Object.keys(e);let i=r.length,n;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const I0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,z0e=e=>!oM(e)&&e!==I0;function SV(){const{caseless:e}=z0e(this)&&this||{},t={},r=(i,n)=>{const a=e&&j0e(t,n)||n;YO(t[a])&&YO(i)?t[a]=SV(t[a],i):YO(i)?t[a]=SV({},i):pw(i)?t[a]=i.slice():t[a]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&sP(arguments[i],r);return t}const Tke=(e,t,r,{allOwnKeys:i}={})=>(sP(t,(n,a)=>{r&&is(n)?e[a]=R0e(n,r):e[a]=n},{allOwnKeys:i}),e),Ake=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Oke=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Rke=(e,t,r,i)=>{let n,a,o;const s={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)o=n[a],(!i||i(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=r!==!1&&mq(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Dke=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},Ike=e=>{if(!e)return null;if(pw(e))return e;let t=e.length;if(!I0e(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},jke=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&mq(Uint8Array)),zke=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const a=n.value;t.call(e,a[0],a[1])}},Bke=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},Lke=Df("HTMLFormElement"),Fke=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,n){return i.toUpperCase()+n}),KX=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Nke=Df("RegExp"),B0e=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};sP(r,(n,a)=>{let o;(o=t(n,a,e))!==!1&&(i[a]=o||n)}),Object.defineProperties(e,i)},Uke=e=>{B0e(e,(t,r)=>{if(is(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(is(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Vke=(e,t)=>{const r={},i=n=>{n.forEach(a=>{r[a]=!0})};return pw(e)?i(e):i(String(e).split(t)),r},kke=()=>{},qke=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Wke(e){return!!(e&&is(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Gke=e=>{const t=new Array(10),r=(i,n)=>{if(F2(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[n]=i;const a=pw(i)?[]:{};return sP(i,(o,s)=>{const l=r(o,n+1);!oM(l)&&(a[s]=l)}),t[n]=void 0,a}}return i};return r(e,0)},Hke=Df("AsyncFunction"),$ke=e=>e&&(F2(e)||is(e))&&is(e.then)&&is(e.catch),L0e=((e,t)=>e?setImmediate:t?((r,i)=>(I0.addEventListener("message",({source:n,data:a})=>{n===I0&&a===r&&i.length&&i.shift()()},!1),n=>{i.push(n),I0.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",is(I0.postMessage)),Xke=typeof queueMicrotask<"u"?queueMicrotask.bind(I0):typeof process<"u"&&process.nextTick||L0e,ot={isArray:pw,isArrayBuffer:D0e,isBuffer:hke,isFormData:wke,isArrayBufferView:fke,isString:pke,isNumber:I0e,isBoolean:mke,isObject:F2,isPlainObject:YO,isReadableStream:Ske,isRequest:Cke,isResponse:Eke,isHeaders:Mke,isUndefined:oM,isDate:gke,isFile:vke,isBlob:yke,isRegExp:Nke,isFunction:is,isStream:_ke,isURLSearchParams:xke,isTypedArray:jke,isFileList:bke,forEach:sP,merge:SV,extend:Tke,trim:Pke,stripBOM:Ake,inherits:Oke,toFlatObject:Rke,kindOf:B2,kindOfTest:Df,endsWith:Dke,toArray:Ike,forEachEntry:zke,matchAll:Bke,isHTMLForm:Lke,hasOwnProperty:KX,hasOwnProp:KX,reduceDescriptors:B0e,freezeMethods:Uke,toObjectSet:Vke,toCamelCase:Fke,noop:kke,toFiniteNumber:qke,findKey:j0e,global:I0,isContextDefined:z0e,isSpecCompliantForm:Wke,toJSONObject:Gke,isAsyncFn:Hke,isThenable:$ke,setImmediate:L0e,asap:Xke};function Or(e,t,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n,this.status=n.status?n.status:null)}ot.inherits(Or,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ot.toJSONObject(this.config),code:this.code,status:this.status}}});const F0e=Or.prototype,N0e={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{N0e[e]={value:e}});Object.defineProperties(Or,N0e);Object.defineProperty(F0e,"isAxiosError",{value:!0});Or.from=(e,t,r,i,n,a)=>{const o=Object.create(F0e);return ot.toFlatObject(e,o,function(l){return l!==Error.prototype},s=>s!=="isAxiosError"),Or.call(o,e.message,t,r,i,n),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const Yke=null;function CV(e){return ot.isPlainObject(e)||ot.isArray(e)}function U0e(e){return ot.endsWith(e,"[]")?e.slice(0,-2):e}function QX(e,t,r){return e?e.concat(t).map(function(n,a){return n=U0e(n),!r&&a?"["+n+"]":n}).join(r?".":""):t}function Kke(e){return ot.isArray(e)&&!e.some(CV)}const Qke=ot.toFlatObject(ot,{},null,function(t){return/^is[A-Z]/.test(t)});function N2(e,t,r){if(!ot.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=ot.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!ot.isUndefined(m[p])});const i=r.metaTokens,n=r.visitor||c,a=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&ot.isSpecCompliantForm(t);if(!ot.isFunction(n))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(ot.isDate(g))return g.toISOString();if(!l&&ot.isBlob(g))throw new Or("Blob is not supported. Use a Buffer instead.");return ot.isArrayBuffer(g)||ot.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,p,m){let y=g;if(g&&!m&&typeof g=="object"){if(ot.endsWith(p,"{}"))p=i?p:p.slice(0,-2),g=JSON.stringify(g);else if(ot.isArray(g)&&Kke(g)||(ot.isFileList(g)||ot.endsWith(p,"[]"))&&(y=ot.toArray(g)))return p=U0e(p),y.forEach(function(w,x){!(ot.isUndefined(w)||w===null)&&t.append(o===!0?QX([p],x,a):o===null?p:p+"[]",u(w))}),!1}return CV(g)?!0:(t.append(QX(m,p,a),u(g)),!1)}const d=[],h=Object.assign(Qke,{defaultVisitor:c,convertValue:u,isVisitable:CV});function f(g,p){if(!ot.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));d.push(g),ot.forEach(g,function(y,b){(!(ot.isUndefined(y)||y===null)&&n.call(t,y,ot.isString(b)?b.trim():b,p,h))===!0&&f(y,p?p.concat(b):[b])}),d.pop()}}if(!ot.isObject(e))throw new TypeError("data must be an object");return f(e),t}function JX(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function gq(e,t){this._pairs=[],e&&N2(e,this,t)}const V0e=gq.prototype;V0e.append=function(t,r){this._pairs.push([t,r])};V0e.toString=function(t){const r=t?function(i){return t.call(this,i,JX)}:JX;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function Jke(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function k0e(e,t,r){if(!t)return e;const i=r&&r.encode||Jke;ot.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let a;if(n?a=n(t,r):a=ot.isURLSearchParams(t)?t.toString():new gq(t,r).toString(i),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class ZX{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ot.forEach(this.handlers,function(i){i!==null&&t(i)})}}const q0e={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zke=typeof URLSearchParams<"u"?URLSearchParams:gq,e8e=typeof FormData<"u"?FormData:null,t8e=typeof Blob<"u"?Blob:null,r8e={isBrowser:!0,classes:{URLSearchParams:Zke,FormData:e8e,Blob:t8e},protocols:["http","https","file","blob","url","data"]},vq=typeof window<"u"&&typeof document<"u",EV=typeof navigator=="object"&&navigator||void 0,i8e=vq&&(!EV||["ReactNative","NativeScript","NS"].indexOf(EV.product)<0),n8e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",a8e=vq&&window.location.href||"http://localhost",o8e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:vq,hasStandardBrowserEnv:i8e,hasStandardBrowserWebWorkerEnv:n8e,navigator:EV,origin:a8e},Symbol.toStringTag,{value:"Module"})),za={...o8e,...r8e};function s8e(e,t){return N2(e,new za.classes.URLSearchParams,Object.assign({visitor:function(r,i,n,a){return za.isNode&&ot.isBuffer(r)?(this.append(i,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function l8e(e){return ot.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function u8e(e){const t={},r=Object.keys(e);let i;const n=r.length;let a;for(i=0;i<n;i++)a=r[i],t[a]=e[a];return t}function W0e(e){function t(r,i,n,a){let o=r[a++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),l=a>=r.length;return o=!o&&ot.isArray(n)?n.length:o,l?(ot.hasOwnProp(n,o)?n[o]=[n[o],i]:n[o]=i,!s):((!n[o]||!ot.isObject(n[o]))&&(n[o]=[]),t(r,i,n[o],a)&&ot.isArray(n[o])&&(n[o]=u8e(n[o])),!s)}if(ot.isFormData(e)&&ot.isFunction(e.entries)){const r={};return ot.forEachEntry(e,(i,n)=>{t(l8e(i),n,r,0)}),r}return null}function c8e(e,t,r){if(ot.isString(e))try{return(t||JSON.parse)(e),ot.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const lP={transitional:q0e,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const i=r.getContentType()||"",n=i.indexOf("application/json")>-1,a=ot.isObject(t);if(a&&ot.isHTMLForm(t)&&(t=new FormData(t)),ot.isFormData(t))return n?JSON.stringify(W0e(t)):t;if(ot.isArrayBuffer(t)||ot.isBuffer(t)||ot.isStream(t)||ot.isFile(t)||ot.isBlob(t)||ot.isReadableStream(t))return t;if(ot.isArrayBufferView(t))return t.buffer;if(ot.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return s8e(t,this.formSerializer).toString();if((s=ot.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return N2(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||n?(r.setContentType("application/json",!1),c8e(t)):t}],transformResponse:[function(t){const r=this.transitional||lP.transitional,i=r&&r.forcedJSONParsing,n=this.responseType==="json";if(ot.isResponse(t)||ot.isReadableStream(t))return t;if(t&&ot.isString(t)&&(i&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?Or.from(s,Or.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:za.classes.FormData,Blob:za.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ot.forEach(["delete","get","head","post","put","patch"],e=>{lP.headers[e]={}});const d8e=ot.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),h8e=e=>{const t={};let r,i,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),i=o.substring(n+1).trim(),!(!r||t[r]&&d8e[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},eY=Symbol("internals");function Ax(e){return e&&String(e).trim().toLowerCase()}function KO(e){return e===!1||e==null?e:ot.isArray(e)?e.map(KO):String(e)}function f8e(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const p8e=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function W3(e,t,r,i,n){if(ot.isFunction(i))return i.call(this,t,r);if(n&&(t=r),!!ot.isString(t)){if(ot.isString(i))return t.indexOf(i)!==-1;if(ot.isRegExp(i))return i.test(t)}}function m8e(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function g8e(e,t){const r=ot.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(n,a,o){return this[i].call(this,t,n,a,o)},configurable:!0})})}let Do=class{constructor(t){t&&this.set(t)}set(t,r,i){const n=this;function a(s,l,u){const c=Ax(l);if(!c)throw new Error("header name must be a non-empty string");const d=ot.findKey(n,c);(!d||n[d]===void 0||u===!0||u===void 0&&n[d]!==!1)&&(n[d||l]=KO(s))}const o=(s,l)=>ot.forEach(s,(u,c)=>a(u,c,l));if(ot.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(ot.isString(t)&&(t=t.trim())&&!p8e(t))o(h8e(t),r);else if(ot.isHeaders(t))for(const[s,l]of t.entries())a(l,s,i);else t!=null&&a(r,t,i);return this}get(t,r){if(t=Ax(t),t){const i=ot.findKey(this,t);if(i){const n=this[i];if(!r)return n;if(r===!0)return f8e(n);if(ot.isFunction(r))return r.call(this,n,i);if(ot.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ax(t),t){const i=ot.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||W3(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let n=!1;function a(o){if(o=Ax(o),o){const s=ot.findKey(i,o);s&&(!r||W3(i,i[s],s,r))&&(delete i[s],n=!0)}}return ot.isArray(t)?t.forEach(a):a(t),n}clear(t){const r=Object.keys(this);let i=r.length,n=!1;for(;i--;){const a=r[i];(!t||W3(this,this[a],a,t,!0))&&(delete this[a],n=!0)}return n}normalize(t){const r=this,i={};return ot.forEach(this,(n,a)=>{const o=ot.findKey(i,a);if(o){r[o]=KO(n),delete r[a];return}const s=t?m8e(a):String(a).trim();s!==a&&delete r[a],r[s]=KO(n),i[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return ot.forEach(this,(i,n)=>{i!=null&&i!==!1&&(r[n]=t&&ot.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(n=>i.set(n)),i}static accessor(t){const i=(this[eY]=this[eY]={accessors:{}}).accessors,n=this.prototype;function a(o){const s=Ax(o);i[s]||(g8e(n,o),i[s]=!0)}return ot.isArray(t)?t.forEach(a):a(t),this}};Do.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ot.reduceDescriptors(Do.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[r]=i}}});ot.freezeMethods(Do);function G3(e,t){const r=this||lP,i=t||r,n=Do.from(i.headers);let a=i.data;return ot.forEach(e,function(s){a=s.call(r,a,n.normalize(),t?t.status:void 0)}),n.normalize(),a}function G0e(e){return!!(e&&e.__CANCEL__)}function mw(e,t,r){Or.call(this,e??"canceled",Or.ERR_CANCELED,t,r),this.name="CanceledError"}ot.inherits(mw,Or,{__CANCEL__:!0});function H0e(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new Or("Request failed with status code "+r.status,[Or.ERR_BAD_REQUEST,Or.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function v8e(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function y8e(e,t){e=e||10;const r=new Array(e),i=new Array(e);let n=0,a=0,o;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),c=i[a];o||(o=u),r[n]=l,i[n]=u;let d=a,h=0;for(;d!==n;)h+=r[d++],d=d%e;if(n=(n+1)%e,n===a&&(a=(a+1)%e),u-o<t)return;const f=c&&u-c;return f?Math.round(h*1e3/f):void 0}}function b8e(e,t){let r=0,i=1e3/t,n,a;const o=(u,c=Date.now())=>{r=c,n=null,a&&(clearTimeout(a),a=null),e.apply(null,u)};return[(...u)=>{const c=Date.now(),d=c-r;d>=i?o(u,c):(n=u,a||(a=setTimeout(()=>{a=null,o(n)},i-d)))},()=>n&&o(n)]}const YR=(e,t,r=3)=>{let i=0;const n=y8e(50,250);return b8e(a=>{const o=a.loaded,s=a.lengthComputable?a.total:void 0,l=o-i,u=n(l),c=o<=s;i=o;const d={loaded:o,total:s,progress:s?o/s:void 0,bytes:l,rate:u||void 0,estimated:u&&s&&c?(s-o)/u:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(d)},r)},tY=(e,t)=>{const r=e!=null;return[i=>t[0]({lengthComputable:r,total:e,loaded:i}),t[1]]},rY=e=>(...t)=>ot.asap(()=>e(...t)),_8e=za.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,za.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(za.origin),za.navigator&&/(msie|trident)/i.test(za.navigator.userAgent)):()=>!0,w8e=za.hasStandardBrowserEnv?{write(e,t,r,i,n,a){const o=[e+"="+encodeURIComponent(t)];ot.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),ot.isString(i)&&o.push("path="+i),ot.isString(n)&&o.push("domain="+n),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function x8e(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function S8e(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function $0e(e,t,r){let i=!x8e(t);return e&&(i||r==!1)?S8e(e,t):t}const iY=e=>e instanceof Do?{...e}:e;function sb(e,t){t=t||{};const r={};function i(u,c,d,h){return ot.isPlainObject(u)&&ot.isPlainObject(c)?ot.merge.call({caseless:h},u,c):ot.isPlainObject(c)?ot.merge({},c):ot.isArray(c)?c.slice():c}function n(u,c,d,h){if(ot.isUndefined(c)){if(!ot.isUndefined(u))return i(void 0,u,d,h)}else return i(u,c,d,h)}function a(u,c){if(!ot.isUndefined(c))return i(void 0,c)}function o(u,c){if(ot.isUndefined(c)){if(!ot.isUndefined(u))return i(void 0,u)}else return i(void 0,c)}function s(u,c,d){if(d in t)return i(u,c);if(d in e)return i(void 0,u)}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(u,c,d)=>n(iY(u),iY(c),d,!0)};return ot.forEach(Object.keys(Object.assign({},e,t)),function(c){const d=l[c]||n,h=d(e[c],t[c],c);ot.isUndefined(h)&&d!==s||(r[c]=h)}),r}const X0e=e=>{const t=sb({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:n,xsrfCookieName:a,headers:o,auth:s}=t;t.headers=o=Do.from(o),t.url=k0e($0e(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let l;if(ot.isFormData(r)){if(za.hasStandardBrowserEnv||za.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...c]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...c].join("; "))}}if(za.hasStandardBrowserEnv&&(i&&ot.isFunction(i)&&(i=i(t)),i||i!==!1&&_8e(t.url))){const u=n&&a&&w8e.read(a);u&&o.set(n,u)}return t},C8e=typeof XMLHttpRequest<"u",E8e=C8e&&function(e){return new Promise(function(r,i){const n=X0e(e);let a=n.data;const o=Do.from(n.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:u}=n,c,d,h,f,g;function p(){f&&f(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(c),n.signal&&n.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout;function y(){if(!m)return;const w=Do.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),S={data:!s||s==="text"||s==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:w,config:e,request:m};H0e(function(T){r(T),p()},function(T){i(T),p()},S),m=null}"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(y)},m.onabort=function(){m&&(i(new Or("Request aborted",Or.ECONNABORTED,e,m)),m=null)},m.onerror=function(){i(new Or("Network Error",Or.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let x=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const S=n.transitional||q0e;n.timeoutErrorMessage&&(x=n.timeoutErrorMessage),i(new Or(x,S.clarifyTimeoutError?Or.ETIMEDOUT:Or.ECONNABORTED,e,m)),m=null},a===void 0&&o.setContentType(null),"setRequestHeader"in m&&ot.forEach(o.toJSON(),function(x,S){m.setRequestHeader(S,x)}),ot.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),s&&s!=="json"&&(m.responseType=n.responseType),u&&([h,g]=YR(u,!0),m.addEventListener("progress",h)),l&&m.upload&&([d,f]=YR(l),m.upload.addEventListener("progress",d),m.upload.addEventListener("loadend",f)),(n.cancelToken||n.signal)&&(c=w=>{m&&(i(!w||w.type?new mw(null,e,m):w),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(c),n.signal&&(n.signal.aborted?c():n.signal.addEventListener("abort",c)));const b=v8e(n.url);if(b&&za.protocols.indexOf(b)===-1){i(new Or("Unsupported protocol "+b+":",Or.ERR_BAD_REQUEST,e));return}m.send(a||null)})},M8e=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let i=new AbortController,n;const a=function(u){if(!n){n=!0,s();const c=u instanceof Error?u:this.reason;i.abort(c instanceof Or?c:new mw(c instanceof Error?c.message:c))}};let o=t&&setTimeout(()=>{o=null,a(new Or(`timeout ${t} of ms exceeded`,Or.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),e=null)};e.forEach(u=>u.addEventListener("abort",a));const{signal:l}=i;return l.unsubscribe=()=>ot.asap(s),l}},P8e=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let i=0,n;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},T8e=async function*(e,t){for await(const r of A8e(e))yield*P8e(r,t)},A8e=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:i}=await t.read();if(r)break;yield i}}finally{await t.cancel()}},nY=(e,t,r,i)=>{const n=T8e(e,t);let a=0,o,s=l=>{o||(o=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await n.next();if(u){s(),l.close();return}let d=c.byteLength;if(r){let h=a+=d;r(h)}l.enqueue(new Uint8Array(c))}catch(u){throw s(u),u}},cancel(l){return s(l),n.return()}},{highWaterMark:2})},U2=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Y0e=U2&&typeof ReadableStream=="function",O8e=U2&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),K0e=(e,...t)=>{try{return!!e(...t)}catch{return!1}},R8e=Y0e&&K0e(()=>{let e=!1;const t=new Request(za.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),aY=64*1024,MV=Y0e&&K0e(()=>ot.isReadableStream(new Response("").body)),KR={stream:MV&&(e=>e.body)};U2&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!KR[t]&&(KR[t]=ot.isFunction(e[t])?r=>r[t]():(r,i)=>{throw new Or(`Response type '${t}' is not supported`,Or.ERR_NOT_SUPPORT,i)})})})(new Response);const D8e=async e=>{if(e==null)return 0;if(ot.isBlob(e))return e.size;if(ot.isSpecCompliantForm(e))return(await new Request(za.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ot.isArrayBufferView(e)||ot.isArrayBuffer(e))return e.byteLength;if(ot.isURLSearchParams(e)&&(e=e+""),ot.isString(e))return(await O8e(e)).byteLength},I8e=async(e,t)=>{const r=ot.toFiniteNumber(e.getContentLength());return r??D8e(t)},j8e=U2&&(async e=>{let{url:t,method:r,data:i,signal:n,cancelToken:a,timeout:o,onDownloadProgress:s,onUploadProgress:l,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:h}=X0e(e);u=u?(u+"").toLowerCase():"text";let f=M8e([n,a&&a.toAbortSignal()],o),g;const p=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(l&&R8e&&r!=="get"&&r!=="head"&&(m=await I8e(c,i))!==0){let S=new Request(t,{method:"POST",body:i,duplex:"half"}),C;if(ot.isFormData(i)&&(C=S.headers.get("content-type"))&&c.setContentType(C),S.body){const[T,M]=tY(m,YR(rY(l)));i=nY(S.body,aY,T,M)}}ot.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;g=new Request(t,{...h,signal:f,method:r.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",credentials:y?d:void 0});let b=await fetch(g);const w=MV&&(u==="stream"||u==="response");if(MV&&(s||w&&p)){const S={};["status","statusText","headers"].forEach(A=>{S[A]=b[A]});const C=ot.toFiniteNumber(b.headers.get("content-length")),[T,M]=s&&tY(C,YR(rY(s),!0))||[];b=new Response(nY(b.body,aY,T,()=>{M&&M(),p&&p()}),S)}u=u||"text";let x=await KR[ot.findKey(KR,u)||"text"](b,e);return!w&&p&&p(),await new Promise((S,C)=>{H0e(S,C,{data:x,headers:Do.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:g})})}catch(y){throw p&&p(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new Or("Network Error",Or.ERR_NETWORK,e,g),{cause:y.cause||y}):Or.from(y,y&&y.code,e,g)}}),PV={http:Yke,xhr:E8e,fetch:j8e};ot.forEach(PV,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const oY=e=>`- ${e}`,z8e=e=>ot.isFunction(e)||e===null||e===!1,Q0e={getAdapter:e=>{e=ot.isArray(e)?e:[e];const{length:t}=e;let r,i;const n={};for(let a=0;a<t;a++){r=e[a];let o;if(i=r,!z8e(r)&&(i=PV[(o=String(r)).toLowerCase()],i===void 0))throw new Or(`Unknown adapter '${o}'`);if(i)break;n[o||"#"+a]=i}if(!i){const a=Object.entries(n).map(([s,l])=>`adapter ${s} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(oY).join(`
`):" "+oY(a[0]):"as no adapter specified";throw new Or("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:PV};function H3(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mw(null,e)}function sY(e){return H3(e),e.headers=Do.from(e.headers),e.data=G3.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Q0e.getAdapter(e.adapter||lP.adapter)(e).then(function(i){return H3(e),i.data=G3.call(e,e.transformResponse,i),i.headers=Do.from(i.headers),i},function(i){return G0e(i)||(H3(e),i&&i.response&&(i.response.data=G3.call(e,e.transformResponse,i.response),i.response.headers=Do.from(i.response.headers))),Promise.reject(i)})}const J0e="1.8.4",V2={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{V2[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const lY={};V2.transitional=function(t,r,i){function n(a,o){return"[Axios v"+J0e+"] Transitional option '"+a+"'"+o+(i?". "+i:"")}return(a,o,s)=>{if(t===!1)throw new Or(n(o," has been removed"+(r?" in "+r:"")),Or.ERR_DEPRECATED);return r&&!lY[o]&&(lY[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,o,s):!0}};V2.spelling=function(t){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function B8e(e,t,r){if(typeof e!="object")throw new Or("options must be an object",Or.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let n=i.length;for(;n-- >0;){const a=i[n],o=t[a];if(o){const s=e[a],l=s===void 0||o(s,a,e);if(l!==!0)throw new Or("option "+a+" must be "+l,Or.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Or("Unknown option "+a,Or.ERR_BAD_OPTION)}}const QO={assertOptions:B8e,validators:V2},qf=QO.validators;let H0=class{constructor(t){this.defaults=t,this.interceptors={request:new ZX,response:new ZX}}async request(t,r){try{return await this._request(t,r)}catch(i){if(i instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const a=n.stack?n.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=sb(this.defaults,r);const{transitional:i,paramsSerializer:n,headers:a}=r;i!==void 0&&QO.assertOptions(i,{silentJSONParsing:qf.transitional(qf.boolean),forcedJSONParsing:qf.transitional(qf.boolean),clarifyTimeoutError:qf.transitional(qf.boolean)},!1),n!=null&&(ot.isFunction(n)?r.paramsSerializer={serialize:n}:QO.assertOptions(n,{encode:qf.function,serialize:qf.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),QO.assertOptions(r,{baseUrl:qf.spelling("baseURL"),withXsrfToken:qf.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=a&&ot.merge(a.common,a[r.method]);a&&ot.forEach(["delete","get","head","post","put","patch","common"],g=>{delete a[g]}),r.headers=Do.concat(o,a);const s=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(l=l&&p.synchronous,s.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let c,d=0,h;if(!l){const g=[sY.bind(this),void 0];for(g.unshift.apply(g,s),g.push.apply(g,u),h=g.length,c=Promise.resolve(r);d<h;)c=c.then(g[d++],g[d++]);return c}h=s.length;let f=r;for(d=0;d<h;){const g=s[d++],p=s[d++];try{f=g(f)}catch(m){p.call(this,m);break}}try{c=sY.call(this,f)}catch(g){return Promise.reject(g)}for(d=0,h=u.length;d<h;)c=c.then(u[d++],u[d++]);return c}getUri(t){t=sb(this.defaults,t);const r=$0e(t.baseURL,t.url,t.allowAbsoluteUrls);return k0e(r,t.params,t.paramsSerializer)}};ot.forEach(["delete","get","head","options"],function(t){H0.prototype[t]=function(r,i){return this.request(sb(i||{},{method:t,url:r,data:(i||{}).data}))}});ot.forEach(["post","put","patch"],function(t){function r(i){return function(a,o,s){return this.request(sb(s||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}H0.prototype[t]=r(),H0.prototype[t+"Form"]=r(!0)});let L8e=class Z0e{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const i=this;this.promise.then(n=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](n);i._listeners=null}),this.promise.then=n=>{let a;const o=new Promise(s=>{i.subscribe(s),a=s}).then(n);return o.cancel=function(){i.unsubscribe(a)},o},t(function(a,o,s){i.reason||(i.reason=new mw(a,o,s),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=i=>{t.abort(i)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Z0e(function(n){t=n}),cancel:t}}};function F8e(e){return function(r){return e.apply(null,r)}}function N8e(e){return ot.isObject(e)&&e.isAxiosError===!0}const TV={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(TV).forEach(([e,t])=>{TV[t]=e});function ebe(e){const t=new H0(e),r=R0e(H0.prototype.request,t);return ot.extend(r,H0.prototype,t,{allOwnKeys:!0}),ot.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return ebe(sb(e,n))},r}const tn=ebe(lP);tn.Axios=H0;tn.CanceledError=mw;tn.CancelToken=L8e;tn.isCancel=G0e;tn.VERSION=J0e;tn.toFormData=N2;tn.AxiosError=Or;tn.Cancel=tn.CanceledError;tn.all=function(t){return Promise.all(t)};tn.spread=F8e;tn.isAxiosError=N8e;tn.mergeConfig=sb;tn.AxiosHeaders=Do;tn.formToJSON=e=>W0e(ot.isHTMLForm(e)?new FormData(e):e);tn.getAdapter=Q0e.getAdapter;tn.HttpStatusCode=TV;tn.default=tn;const{Axios:zDt,AxiosError:BDt,CanceledError:LDt,isCancel:FDt,CancelToken:NDt,VERSION:UDt,all:VDt,Cancel:kDt,isAxiosError:qDt,spread:WDt,toFormData:GDt,AxiosHeaders:HDt,HttpStatusCode:$Dt,formToJSON:XDt,getAdapter:YDt,mergeConfig:KDt}=tn,U8e=pr(V.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),uY=pr(V.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"})),cY=pr(V.jsx("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"})),dY=pr(V.jsx("path",{d:"M6 6h12v12H6z"})),V8e=pr(V.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),k8e=pr(V.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"})),q8e=P2({palette:{mode:"dark",primary:{main:"#8B5CF6",light:"#A78BFA",dark:"#7C3AED"},secondary:{main:"#3B82F6",light:"#60A5FA",dark:"#2563EB"},background:{default:"#0F172A",paper:"rgba(30, 41, 59, 0.7)"},text:{primary:"#FFFFFF",secondary:"rgba(255, 255, 255, 0.7)"}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none"}}},MuiTypography:{styleOverrides:{root:{color:"#FFFFFF"}}},MuiCard:{styleOverrides:{root:{backgroundColor:"rgba(30, 41, 59, 0.7)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.1)"}}}}}),yq=G.createContext({});function gw(e){const t=G.useRef(null);return t.current===null&&(t.current=e()),t.current}const bq=typeof window<"u",k2=bq?G.useLayoutEffect:G.useEffect,q2=G.createContext(null),W2=G.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class W8e extends G.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const i=r.offsetParent,n=i instanceof HTMLElement&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=n-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function G8e({children:e,isPresent:t,anchorX:r}){const i=G.useId(),n=G.useRef(null),a=G.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=G.useContext(W2);return G.useInsertionEffect(()=>{const{width:s,height:l,top:u,left:c,right:d}=a.current;if(t||!n.current||!s||!l)return;const h=r==="left"?`left: ${c}`:`right: ${d}`;n.current.dataset.motionPopId=i;const f=document.createElement("style");return o&&(f.nonce=o),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${u}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[t]),V.jsx(W8e,{isPresent:t,childRef:n,sizeRef:a,children:G.cloneElement(e,{ref:n})})}const H8e=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:n,presenceAffectsLayout:a,mode:o,anchorX:s})=>{const l=gw($8e),u=G.useId(),c=G.useCallback(h=>{l.set(h,!0);for(const f of l.values())if(!f)return;i&&i()},[l,i]),d=G.useMemo(()=>({id:u,initial:t,isPresent:r,custom:n,onExitComplete:c,register:h=>(l.set(h,!1),()=>l.delete(h))}),a?[Math.random(),c]:[r,c]);return G.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[r]),G.useEffect(()=>{!r&&!l.size&&i&&i()},[r]),o==="popLayout"&&(e=V.jsx(G8e,{isPresent:r,anchorX:s,children:e})),V.jsx(q2.Provider,{value:d,children:e})};function $8e(){return new Map}function tbe(e=!0){const t=G.useContext(q2);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:i,register:n}=t,a=G.useId();G.useEffect(()=>{if(e)return n(a)},[e]);const o=G.useCallback(()=>e&&i&&i(a),[a,i,e]);return!r&&i?[!1,o]:[!0]}const eA=e=>e.key||"";function hY(e){const t=[];return G.Children.forEach(e,r=>{G.isValidElement(r)&&t.push(r)}),t}const fY=({children:e,custom:t,initial:r=!0,onExitComplete:i,presenceAffectsLayout:n=!0,mode:a="sync",propagate:o=!1,anchorX:s="left"})=>{const[l,u]=tbe(o),c=G.useMemo(()=>hY(e),[e]),d=o&&!l?[]:c.map(eA),h=G.useRef(!0),f=G.useRef(c),g=gw(()=>new Map),[p,m]=G.useState(c),[y,b]=G.useState(c);k2(()=>{h.current=!1,f.current=c;for(let S=0;S<y.length;S++){const C=eA(y[S]);d.includes(C)?g.delete(C):g.get(C)!==!0&&g.set(C,!1)}},[y,d.length,d.join("-")]);const w=[];if(c!==p){let S=[...c];for(let C=0;C<y.length;C++){const T=y[C],M=eA(T);d.includes(M)||(S.splice(C,0,T),w.push(T))}return a==="wait"&&w.length&&(S=w),b(hY(S)),m(c),null}const{forceRender:x}=G.useContext(yq);return V.jsx(V.Fragment,{children:y.map(S=>{const C=eA(S),T=o&&!l?!1:c===y||d.includes(C),M=()=>{if(g.has(C))g.set(C,!0);else return;let A=!0;g.forEach(P=>{P||(A=!1)}),A&&(x==null||x(),b(f.current),o&&(u==null||u()),i&&i())};return V.jsx(H8e,{isPresent:T,initial:!h.current||r?void 0:!1,custom:t,presenceAffectsLayout:n,mode:a,onExitComplete:T?void 0:M,anchorX:s,children:S},C)})})};function _q(e,t){e.indexOf(t)===-1&&e.push(t)}function wq(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}let X8e=()=>{},rbe=()=>{};const Y8e={useManualTiming:!1};function xq(e){let t;return()=>(t===void 0&&(t=e()),t)}const ns=e=>e,U_=(e,t,r)=>{const i=t-e;return i===0?1:(r-e)/i};class Sq{constructor(){this.subscriptions=[]}add(t){return _q(this.subscriptions,t),()=>wq(this.subscriptions,t)}notify(t,r,i){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,r,i);else for(let a=0;a<n;a++){const o=this.subscriptions[a];o&&o(t,r,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _p=e=>e*1e3,wp=e=>e/1e3;function Cq(e,t){return t?e*(1e3/t):0}const ibe=xq(()=>window.ScrollTimeline!==void 0);class K8e{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=r}attachTimeline(t,r){const i=this.animations.map(n=>{if(ibe()&&n.attachTimeline)return n.attachTimeline(t);if(typeof r=="function")return r(n)});return()=>{i.forEach((n,a)=>{n&&n(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Q8e extends K8e{then(t,r){return this.finished.finally(t).then(()=>{})}}const Eq=e=>Array.isArray(e)&&typeof e[0]=="number",J8e={};function Z8e(e,t){const r=xq(e);return()=>J8e[t]??r()}const sM=Z8e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nbe=(e,t,r=10)=>{let i="";const n=Math.max(Math.round(t/r),2);for(let a=0;a<n;a++)i+=e(a/(n-1))+", ";return`linear(${i.substring(0,i.length-2)})`},YC=([e,t,r,i])=>`cubic-bezier(${e}, ${t}, ${r}, ${i})`,AV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:YC([0,.65,.55,1]),circOut:YC([.55,0,1,.45]),backIn:YC([.31,.01,.66,-.59]),backOut:YC([.33,1.53,.69,.99])};function abe(e,t){if(e)return typeof e=="function"&&sM()?nbe(e,t):Eq(e)?YC(e):Array.isArray(e)?e.map(r=>abe(r,t)||AV.easeOut):AV[e]}function eqe(e,t,r,{delay:i=0,duration:n=300,repeat:a=0,repeatType:o="loop",ease:s="easeInOut",times:l}={},u=void 0){const c={[t]:r};l&&(c.offset=l);const d=abe(s,n);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:i,duration:n,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal",pseudoElement:u})}function Mq(e){return typeof e=="function"&&"applyToOptions"in e}function Pq(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const QR=2e4;function Tq(e){let t=0;const r=50;let i=e.next(t);for(;!i.done&&t<QR;)t+=r,i=e.next(t);return t>=QR?1/0:t}function tqe(e,t=100,r){const i=r({...e,keyframes:[0,t]}),n=Math.min(Tq(i),QR);return{type:"keyframes",ease:a=>i.next(n*a).value/t,duration:wp(n)}}function obe(e){return!!(typeof e=="function"&&sM()||!e||typeof e=="string"&&(e in AV||sM())||Eq(e)||Array.isArray(e)&&e.every(obe))}function pY(e,t){e.timeline=t,e.onfinish=null}const tA=["read","resolveKeyframes","update","preRender","render","postRender"];function rqe(e,t){let r=new Set,i=new Set,n=!1,a=!1;const o=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),e()),c(s)}const u={schedule:(c,d=!1,h=!1)=>{const g=h&&n?r:i;return d&&o.add(c),g.has(c)||g.add(c),c},cancel:c=>{i.delete(c),o.delete(c)},process:c=>{if(s=c,n){a=!0;return}n=!0,[r,i]=[i,r],r.forEach(l),r.clear(),n=!1,a&&(a=!1,u.process(c))}};return u}const iqe=40;function sbe(e,t){let r=!1,i=!0;const n={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,o=tA.reduce((y,b)=>(y[b]=rqe(a),y),{}),{read:s,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:h}=o,f=()=>{const y=performance.now();r=!1,n.delta=i?1e3/60:Math.max(Math.min(y-n.timestamp,iqe),1),n.timestamp=y,n.isProcessing=!0,s.process(n),l.process(n),u.process(n),c.process(n),d.process(n),h.process(n),n.isProcessing=!1,r&&t&&(i=!1,e(f))},g=()=>{r=!0,i=!0,n.isProcessing||e(f)};return{schedule:tA.reduce((y,b)=>{const w=o[b];return y[b]=(x,S=!1,C=!1)=>(r||g(),w.schedule(x,S,C)),y},{}),cancel:y=>{for(let b=0;b<tA.length;b++)o[tA[b]].cancel(y)},state:n,steps:o}}const{schedule:ti,cancel:Mf,state:Xn,steps:$3}=sbe(typeof requestAnimationFrame<"u"?requestAnimationFrame:ns,!0),{schedule:Aq}=sbe(queueMicrotask,!1);let JO;function nqe(){JO=void 0}const xp={now:()=>(JO===void 0&&xp.set(Xn.isProcessing||Y8e.useManualTiming?Xn.timestamp:performance.now()),JO),set:e=>{JO=e,queueMicrotask(nqe)}},mf={x:!1,y:!1};function lbe(){return mf.x||mf.y}function aqe(e){return e==="x"||e==="y"?mf[e]?null:(mf[e]=!0,()=>{mf[e]=!1}):mf.x||mf.y?null:(mf.x=mf.y=!0,()=>{mf.x=mf.y=!1})}function ube(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const n=document.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e)}function cbe(e,t){const r=ube(e),i=new AbortController,n={passive:!0,...t,signal:i.signal};return[r,n,()=>i.abort()]}function mY(e){return!(e.pointerType==="touch"||lbe())}function oqe(e,t,r={}){const[i,n,a]=cbe(e,r),o=s=>{if(!mY(s))return;const{target:l}=s,u=t(l,s);if(typeof u!="function"||!l)return;const c=d=>{mY(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,n)};return i.forEach(s=>{s.addEventListener("pointerenter",o,n)}),a}const dbe=(e,t)=>t?e===t?!0:dbe(e,t.parentElement):!1,Oq=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,sqe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function lqe(e){return sqe.has(e.tagName)||e.tabIndex!==-1}const KC=new WeakSet;function gY(e){return t=>{t.key==="Enter"&&e(t)}}function X3(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const uqe=(e,t)=>{const r=e.currentTarget;if(!r)return;const i=gY(()=>{if(KC.has(r))return;X3(r,"down");const n=gY(()=>{X3(r,"up")}),a=()=>X3(r,"cancel");r.addEventListener("keyup",n,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",i,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),t)};function vY(e){return Oq(e)&&!lbe()}function cqe(e,t,r={}){const[i,n,a]=cbe(e,r),o=s=>{const l=s.currentTarget;if(!vY(s)||KC.has(l))return;KC.add(l);const u=t(l,s),c=(f,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!vY(f)||!KC.has(l))&&(KC.delete(l),typeof u=="function"&&u(f,{success:g}))},d=f=>{c(f,l===window||l===document||r.useGlobalTarget||dbe(l,f.target))},h=f=>{c(f,!1)};window.addEventListener("pointerup",d,n),window.addEventListener("pointercancel",h,n)};return i.forEach(s=>{(r.useGlobalTarget?window:s).addEventListener("pointerdown",o,n),s instanceof HTMLElement&&(s.addEventListener("focus",u=>uqe(u,n)),!lqe(s)&&!s.hasAttribute("tabindex")&&(s.tabIndex=0))}),a}const yY=30,dqe=e=>!isNaN(parseFloat(e)),_E={current:void 0};class hqe{constructor(t,r={}){this.version="12.6.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,n=!0)=>{const a=xp.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=xp.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=dqe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Sq);const i=this.events[t].add(r);return t==="change"?()=>{i(),ti.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,i){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return _E.current&&_E.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=xp.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>yY)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,yY);return Cq(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pp(e,t){return new hqe(e,t)}const hbe=G.createContext({strict:!1}),bY={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},V_={};for(const e in bY)V_[e]={isEnabled:t=>bY[e].some(r=>!!t[r])};function fqe(e){for(const t in e)V_[t]={...V_[t],...e[t]}}const pqe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function JR(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||pqe.has(e)}let fbe=e=>!JR(e);function mqe(e){e&&(fbe=t=>t.startsWith("on")?!JR(t):e(t))}try{mqe(require("@emotion/is-prop-valid").default)}catch{}function gqe(e,t,r){const i={};for(const n in e)n==="values"&&typeof e.values=="object"||(fbe(n)||r===!0&&JR(n)||!t&&!JR(n)||e.draggable&&n.startsWith("onDrag"))&&(i[n]=e[n]);return i}function vqe(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...i)=>e(...i);return new Proxy(r,{get:(i,n)=>n==="create"?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}const G2=G.createContext({});function H2(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function lM(e){return typeof e=="string"||Array.isArray(e)}const Rq=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dq=["initial",...Rq];function $2(e){return H2(e.animate)||Dq.some(t=>lM(e[t]))}function pbe(e){return!!($2(e)||e.variants)}function yqe(e,t){if($2(e)){const{initial:r,animate:i}=e;return{initial:r===!1||lM(r)?r:void 0,animate:lM(i)?i:void 0}}return e.inherit!==!1?t:{}}function bqe(e){const{initial:t,animate:r}=yqe(e,G.useContext(G2));return G.useMemo(()=>({initial:t,animate:r}),[_Y(t),_Y(r)])}function _Y(e){return Array.isArray(e)?e.join(" "):e}const _qe=Symbol.for("motionComponentSymbol");function H1(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function wqe(e,t,r){return G.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),r&&(typeof r=="function"?r(i):H1(r)&&(r.current=i))},[t])}const Iq=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xqe="framerAppearId",mbe="data-"+Iq(xqe),gbe=G.createContext({});function Sqe(e,t,r,i,n){var p,m;const{visualElement:a}=G.useContext(G2),o=G.useContext(hbe),s=G.useContext(q2),l=G.useContext(W2).reducedMotion,u=G.useRef(null);i=i||o.renderer,!u.current&&i&&(u.current=i(e,{visualState:t,parent:a,props:r,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=G.useContext(gbe);c&&!c.projection&&n&&(c.type==="html"||c.type==="svg")&&Cqe(u.current,r,n,d);const h=G.useRef(!1);G.useInsertionEffect(()=>{c&&h.current&&c.update(r,s)});const f=r[mbe],g=G.useRef(!!f&&!((p=window.MotionHandoffIsComplete)!=null&&p.call(window,f))&&((m=window.MotionHasOptimisedAnimation)==null?void 0:m.call(window,f)));return k2(()=>{c&&(h.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),Aq.render(c.render),g.current&&c.animationState&&c.animationState.animateChanges())}),G.useEffect(()=>{c&&(!g.current&&c.animationState&&c.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,f)}),g.current=!1))}),c}function Cqe(e,t,r,i){const{layoutId:n,layout:a,drag:o,dragConstraints:s,layoutScroll:l,layoutRoot:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:vbe(e.parent)),e.projection.setOptions({layoutId:n,layout:a,alwaysMeasureLayout:!!o||s&&H1(s),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:u})}function vbe(e){if(e)return e.options.allowProjection!==!1?e.projection:vbe(e.parent)}function Eqe({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:i,Component:n}){e&&fqe(e);function a(s,l){let u;const c={...G.useContext(W2),...s,layoutId:Mqe(s)},{isStatic:d}=c,h=bqe(s),f=i(s,d);if(!d&&bq){Pqe();const g=Tqe(c);u=g.MeasureLayout,h.visualElement=Sqe(n,f,c,t,g.ProjectionNode)}return V.jsxs(G2.Provider,{value:h,children:[u&&h.visualElement?V.jsx(u,{visualElement:h.visualElement,...c}):null,r(n,s,wqe(f,h.visualElement,l),f,d,h.visualElement)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=G.forwardRef(a);return o[_qe]=n,o}function Mqe({layoutId:e}){const t=G.useContext(yq).id;return t&&e!==void 0?t+"-"+e:e}function Pqe(e,t){G.useContext(hbe).strict}function Tqe(e){const{drag:t,layout:r}=V_;if(!t&&!r)return{};const i={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const ybe=e=>t=>typeof t=="string"&&t.startsWith(e),jq=ybe("--"),Aqe=ybe("var(--"),zq=e=>Aqe(e)?Oqe.test(e.split("/*")[0].trim()):!1,Oqe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uM={};function Rqe(e){for(const t in e)uM[t]=e[t],jq(t)&&(uM[t].isCSSVariable=!0)}const vw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_b=new Set(vw);function bbe(e,{layout:t,layoutId:r}){return _b.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!uM[e]||e==="opacity")}const La=e=>!!(e&&e.getVelocity),_be=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Op=(e,t,r)=>r>t?t:r<e?e:r,yw={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},cM={...yw,transform:e=>Op(0,1,e)},rA={...yw,default:1},uP=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ng=uP("deg"),Sp=uP("%"),fr=uP("px"),Dqe=uP("vh"),Iqe=uP("vw"),wY={...Sp,parse:e=>Sp.parse(e)/100,transform:e=>Sp.transform(e*100)},jqe={borderWidth:fr,borderTopWidth:fr,borderRightWidth:fr,borderBottomWidth:fr,borderLeftWidth:fr,borderRadius:fr,radius:fr,borderTopLeftRadius:fr,borderTopRightRadius:fr,borderBottomRightRadius:fr,borderBottomLeftRadius:fr,width:fr,maxWidth:fr,height:fr,maxHeight:fr,top:fr,right:fr,bottom:fr,left:fr,padding:fr,paddingTop:fr,paddingRight:fr,paddingBottom:fr,paddingLeft:fr,margin:fr,marginTop:fr,marginRight:fr,marginBottom:fr,marginLeft:fr,backgroundPositionX:fr,backgroundPositionY:fr},zqe={rotate:Ng,rotateX:Ng,rotateY:Ng,rotateZ:Ng,scale:rA,scaleX:rA,scaleY:rA,scaleZ:rA,skew:Ng,skewX:Ng,skewY:Ng,distance:fr,translateX:fr,translateY:fr,translateZ:fr,x:fr,y:fr,z:fr,perspective:fr,transformPerspective:fr,opacity:cM,originX:wY,originY:wY,originZ:fr},xY={...yw,transform:Math.round},Bq={...jqe,...zqe,zIndex:xY,size:fr,fillOpacity:cM,strokeOpacity:cM,numOctaves:xY},Bqe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Lqe=vw.length;function Fqe(e,t,r){let i="",n=!0;for(let a=0;a<Lqe;a++){const o=vw[a],s=e[o];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(o.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||r){const u=_be(s,Bq[o]);if(!l){n=!1;const c=Bqe[o]||o;i+=`${c}(${u}) `}r&&(t[o]=u)}}return i=i.trim(),r?i=r(t,n?"":i):n&&(i="none"),i}function Lq(e,t,r){const{style:i,vars:n,transformOrigin:a}=e;let o=!1,s=!1;for(const l in t){const u=t[l];if(_b.has(l)){o=!0;continue}else if(jq(l)){n[l]=u;continue}else{const c=_be(u,Bq[l]);l.startsWith("origin")?(s=!0,a[l]=c):i[l]=c}}if(t.transform||(o||r?i.transform=Fqe(t,e.transform,r):i.transform&&(i.transform="none")),s){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;i.transformOrigin=`${l} ${u} ${c}`}}const Fq=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wbe(e,t,r){for(const i in t)!La(t[i])&&!bbe(i,r)&&(e[i]=t[i])}function Nqe({transformTemplate:e},t){return G.useMemo(()=>{const r=Fq();return Lq(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Uqe(e,t){const r=e.style||{},i={};return wbe(i,r,e),Object.assign(i,Nqe(e,t)),i}function Vqe(e,t){const r={},i=Uqe(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const kqe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Nq(e){return typeof e!="string"||e.includes("-")?!1:!!(kqe.indexOf(e)>-1||/[A-Z]/u.test(e))}const qqe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Wqe={offset:"strokeDashoffset",array:"strokeDasharray"};function Gqe(e,t,r=1,i=0,n=!0){e.pathLength=1;const a=n?qqe:Wqe;e[a.offset]=fr.transform(-i);const o=fr.transform(t),s=fr.transform(r);e[a.array]=`${o} ${s}`}function SY(e,t,r){return typeof e=="string"?e:fr.transform(t+r*e)}function Hqe(e,t,r){const i=SY(t,e.x,e.width),n=SY(r,e.y,e.height);return`${i} ${n}`}function Uq(e,{attrX:t,attrY:r,attrScale:i,originX:n,originY:a,pathLength:o,pathSpacing:s=1,pathOffset:l=0,...u},c,d){if(Lq(e,u,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f,dimensions:g}=e;h.transform&&(g&&(f.transform=h.transform),delete h.transform),g&&(n!==void 0||a!==void 0||f.transform)&&(f.transformOrigin=Hqe(g,n!==void 0?n:.5,a!==void 0?a:.5)),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),i!==void 0&&(h.scale=i),o!==void 0&&Gqe(h,o,s,l,!1)}const xbe=()=>({...Fq(),attrs:{}}),Vq=e=>typeof e=="string"&&e.toLowerCase()==="svg";function $qe(e,t,r,i){const n=G.useMemo(()=>{const a=xbe();return Uq(a,t,Vq(i),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};wbe(a,e.style,e),n.style={...a,...n.style}}return n}function Xqe(e=!1){return(r,i,n,{latestValues:a},o)=>{const l=(Nq(r)?$qe:Vqe)(i,a,o,r),u=gqe(i,typeof r=="string",e),c=r!==G.Fragment?{...u,...l,ref:n}:{},{children:d}=i,h=G.useMemo(()=>La(d)?d.get():d,[d]);return G.createElement(r,{...c,children:h})}}function CY(e){const t=[{},{}];return e==null||e.values.forEach((r,i)=>{t[0][i]=r.get(),t[1][i]=r.getVelocity()}),t}function kq(e,t,r,i){if(typeof t=="function"){const[n,a]=CY(i);t=t(r!==void 0?r:e.custom,n,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[n,a]=CY(i);t=t(r!==void 0?r:e.custom,n,a)}return t}const OV=e=>Array.isArray(e),Yqe=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Kqe=e=>OV(e)?e[e.length-1]||0:e;function ZO(e){const t=La(e)?e.get():e;return Yqe(t)?t.toValue():t}function Qqe({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},i,n,a){const o={latestValues:Jqe(i,n,a,e),renderState:t()};return r&&(o.onMount=s=>r({props:i,current:s,...o}),o.onUpdate=s=>r(s)),o}const Sbe=e=>(t,r)=>{const i=G.useContext(G2),n=G.useContext(q2),a=()=>Qqe(e,t,i,n);return r?a():gw(a)};function Jqe(e,t,r,i){const n={},a=i(e,{});for(const h in a)n[h]=ZO(a[h]);let{initial:o,animate:s}=e;const l=$2(e),u=pbe(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),s===void 0&&(s=t.animate));let c=r?r.initial===!1:!1;c=c||o===!1;const d=c?s:o;if(d&&typeof d!="boolean"&&!H2(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const g=kq(e,h[f]);if(g){const{transitionEnd:p,transition:m,...y}=g;for(const b in y){let w=y[b];if(Array.isArray(w)){const x=c?w.length-1:0;w=w[x]}w!==null&&(n[b]=w)}for(const b in p)n[b]=p[b]}}}return n}function qq(e,t,r){var a;const{style:i}=e,n={};for(const o in i)(La(i[o])||t.style&&La(t.style[o])||bbe(o,e)||((a=r==null?void 0:r.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(n[o]=i[o]);return n}const Zqe={useVisualState:Sbe({scrapeMotionValuesFromProps:qq,createRenderState:Fq})};function Cbe(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function Ebe(e,{style:t,vars:r},i,n){Object.assign(e.style,t,n&&n.getProjectionStyles(i));for(const a in r)e.style.setProperty(a,r[a])}const Mbe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Pbe(e,t,r,i){Ebe(e,t,void 0,i);for(const n in t.attrs)e.setAttribute(Mbe.has(n)?n:Iq(n),t.attrs[n])}function Tbe(e,t,r){const i=qq(e,t,r);for(const n in e)if(La(e[n])||La(t[n])){const a=vw.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;i[a]=e[n]}return i}const EY=["x","y","width","height","cx","cy","r"],eWe={useVisualState:Sbe({scrapeMotionValuesFromProps:Tbe,createRenderState:xbe,onUpdate:({props:e,prevProps:t,current:r,renderState:i,latestValues:n})=>{if(!r)return;let a=!!e.drag;if(!a){for(const s in n)if(_b.has(s)){a=!0;break}}if(!a)return;let o=!t;if(t)for(let s=0;s<EY.length;s++){const l=EY[s];e[l]!==t[l]&&(o=!0)}o&&ti.read(()=>{Cbe(r,i),ti.render(()=>{Uq(i,n,Vq(r.tagName),e.transformTemplate),Pbe(r,i)})})}})};function tWe(e,t){return function(i,{forwardMotionProps:n}={forwardMotionProps:!1}){const o={...Nq(i)?eWe:Zqe,preloadedFeatures:e,useRender:Xqe(n),createVisualElement:t,Component:i};return Eqe(o)}}function dM(e,t,r){const i=e.getProps();return kq(i,t,r!==void 0?r:i.custom,e)}const Abe=new Set(["width","height","top","left","right","bottom",...vw]);function rWe(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,pp(r))}function iWe(e,t){const r=dM(e,t);let{transitionEnd:i={},transition:n={},...a}=r||{};a={...a,...i};for(const o in a){const s=Kqe(a[o]);rWe(e,o,s)}}function nWe(e){return!!(La(e)&&e.add)}function RV(e,t){const r=e.getValue("willChange");if(nWe(r))return r.add(t)}function Obe(e){return e.props[mbe]}const Rbe=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,aWe=1e-7,oWe=12;function sWe(e,t,r,i,n){let a,o,s=0;do o=t+(r-t)/2,a=Rbe(o,i,n)-e,a>0?r=o:t=o;while(Math.abs(a)>aWe&&++s<oWe);return o}function cP(e,t,r,i){if(e===t&&r===i)return ns;const n=a=>sWe(a,0,1,e,r);return a=>a===0||a===1?a:Rbe(n(a),t,i)}const Dbe=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ibe=e=>t=>1-e(1-t),jbe=cP(.33,1.53,.69,.99),Wq=Ibe(jbe),zbe=Dbe(Wq),Bbe=e=>(e*=2)<1?.5*Wq(e):.5*(2-Math.pow(2,-10*(e-1))),Gq=e=>1-Math.sin(Math.acos(e)),Lbe=Ibe(Gq),Fbe=Dbe(Gq),Nbe=e=>/^0[^.\s]+$/u.test(e);function lWe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Nbe(e):!0}const wE=e=>Math.round(e*1e5)/1e5,Hq=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uWe(e){return e==null}const cWe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$q=(e,t)=>r=>!!(typeof r=="string"&&cWe.test(r)&&r.startsWith(e)||t&&!uWe(r)&&Object.prototype.hasOwnProperty.call(r,t)),Ube=(e,t,r)=>i=>{if(typeof i!="string")return i;const[n,a,o,s]=i.match(Hq);return{[e]:parseFloat(n),[t]:parseFloat(a),[r]:parseFloat(o),alpha:s!==void 0?parseFloat(s):1}},dWe=e=>Op(0,255,e),Y3={...yw,transform:e=>Math.round(dWe(e))},j0={test:$q("rgb","red"),parse:Ube("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:i=1})=>"rgba("+Y3.transform(e)+", "+Y3.transform(t)+", "+Y3.transform(r)+", "+wE(cM.transform(i))+")"};function hWe(e){let t="",r="",i="",n="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),i=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),i=e.substring(3,4),n=e.substring(4,5),t+=t,r+=r,i+=i,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:n?parseInt(n,16)/255:1}}const DV={test:$q("#"),parse:hWe,transform:j0.transform},$1={test:$q("hsl","hue"),parse:Ube("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:i=1})=>"hsla("+Math.round(e)+", "+Sp.transform(wE(t))+", "+Sp.transform(wE(r))+", "+wE(cM.transform(i))+")"},Ra={test:e=>j0.test(e)||DV.test(e)||$1.test(e),parse:e=>j0.test(e)?j0.parse(e):$1.test(e)?$1.parse(e):DV.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?j0.transform(e):$1.transform(e)},fWe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pWe(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Hq))==null?void 0:t.length)||0)+(((r=e.match(fWe))==null?void 0:r.length)||0)>0}const Vbe="number",kbe="color",mWe="var",gWe="var(",MY="${}",vWe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hM(e){const t=e.toString(),r=[],i={color:[],number:[],var:[]},n=[];let a=0;const s=t.replace(vWe,l=>(Ra.test(l)?(i.color.push(a),n.push(kbe),r.push(Ra.parse(l))):l.startsWith(gWe)?(i.var.push(a),n.push(mWe),r.push(l)):(i.number.push(a),n.push(Vbe),r.push(parseFloat(l))),++a,MY)).split(MY);return{values:r,split:s,indexes:i,types:n}}function qbe(e){return hM(e).values}function Wbe(e){const{split:t,types:r}=hM(e),i=t.length;return n=>{let a="";for(let o=0;o<i;o++)if(a+=t[o],n[o]!==void 0){const s=r[o];s===Vbe?a+=wE(n[o]):s===kbe?a+=Ra.transform(n[o]):a+=n[o]}return a}}const yWe=e=>typeof e=="number"?0:e;function bWe(e){const t=qbe(e);return Wbe(e)(t.map(yWe))}const yv={test:pWe,parse:qbe,createTransformer:Wbe,getAnimatableNone:bWe},_We=new Set(["brightness","contrast","saturate","opacity"]);function wWe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=r.match(Hq)||[];if(!i)return e;const n=r.replace(i,"");let a=_We.has(t)?1:0;return i!==r&&(a*=100),t+"("+a+n+")"}const xWe=/\b([a-z-]*)\(.*?\)/gu,IV={...yv,getAnimatableNone:e=>{const t=e.match(xWe);return t?t.map(wWe).join(" "):e}},SWe={...Bq,color:Ra,backgroundColor:Ra,outlineColor:Ra,fill:Ra,stroke:Ra,borderColor:Ra,borderTopColor:Ra,borderRightColor:Ra,borderBottomColor:Ra,borderLeftColor:Ra,filter:IV,WebkitFilter:IV},Gbe=e=>SWe[e];function Hbe(e,t){let r=Gbe(e);return r!==IV&&(r=yv),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const CWe=new Set(["auto","none","0"]);function EWe(e,t,r){let i=0,n;for(;i<e.length&&!n;){const a=e[i];typeof a=="string"&&!CWe.has(a)&&hM(a).values.length&&(n=e[i]),i++}if(n&&r)for(const a of t)e[a]=Hbe(r,n)}const z0=e=>e*180/Math.PI,jV=e=>{const t=z0(Math.atan2(e[1],e[0]));return zV(t)},MWe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:jV,rotateZ:jV,skewX:e=>z0(Math.atan(e[1])),skewY:e=>z0(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},zV=e=>(e=e%360,e<0&&(e+=360),e),PY=jV,TY=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),AY=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),PWe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:TY,scaleY:AY,scale:e=>(TY(e)+AY(e))/2,rotateX:e=>zV(z0(Math.atan2(e[6],e[5]))),rotateY:e=>zV(z0(Math.atan2(-e[2],e[0]))),rotateZ:PY,rotate:PY,skewX:e=>z0(Math.atan(e[4])),skewY:e=>z0(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function OY(e){return e.includes("scale")?1:0}function BV(e,t){if(!e||e==="none")return OY(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,n;if(r)i=PWe,n=r;else{const s=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=MWe,n=s}if(!n)return OY(t);const a=i[t],o=n[1].split(",").map(AWe);return typeof a=="function"?a(o):o[a]}const TWe=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return BV(r,t)};function AWe(e){return parseFloat(e.trim())}const RY=e=>e===yw||e===fr,OWe=new Set(["x","y","z"]),RWe=vw.filter(e=>!OWe.has(e));function DWe(e){const t=[];return RWe.forEach(r=>{const i=e.getValue(r);i!==void 0&&(t.push([r,i.get()]),i.set(r.startsWith("scale")?1:0))}),t}const k_={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>BV(t,"x"),y:(e,{transform:t})=>BV(t,"y")};k_.translateX=k_.x;k_.translateY=k_.y;const $0=new Set;let LV=!1,FV=!1;function $be(){if(FV){const e=Array.from($0).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),r=new Map;t.forEach(i=>{const n=DWe(i);n.length&&(r.set(i,n),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const n=r.get(i);n&&n.forEach(([a,o])=>{var s;(s=i.getValue(a))==null||s.set(o)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}FV=!1,LV=!1,$0.forEach(e=>e.complete()),$0.clear()}function Xbe(){$0.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(FV=!0)})}function IWe(){Xbe(),$be()}class Xq{constructor(t,r,i,n,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=i,this.motionValue=n,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?($0.add(this),LV||(LV=!0,ti.read(Xbe),ti.resolveKeyframes($be))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:i,motionValue:n}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const o=n==null?void 0:n.get(),s=t[t.length-1];if(o!==void 0)t[0]=o;else if(i&&r){const l=i.readValue(r,s);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=s),n&&o===void 0&&n.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),$0.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,$0.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ybe=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),jWe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zWe(e){const t=jWe.exec(e);if(!t)return[,];const[,r,i,n]=t;return[`--${r??i}`,n]}function Kbe(e,t,r=1){const[i,n]=zWe(e);if(!i)return;const a=window.getComputedStyle(t).getPropertyValue(i);if(a){const o=a.trim();return Ybe(o)?parseFloat(o):o}return zq(n)?Kbe(n,t,r+1):n}const Qbe=e=>t=>t.test(e),BWe={test:e=>e==="auto",parse:e=>e},Jbe=[yw,fr,Sp,Ng,Iqe,Dqe,BWe],DY=e=>Jbe.find(Qbe(e));class Zbe extends Xq{constructor(t,r,i,n,a){super(t,r,i,n,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:i}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),zq(u))){const c=Kbe(u,r.current);c!==void 0&&(t[l]=c),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Abe.has(i)||t.length!==2)return;const[n,a]=t,o=DY(n),s=DY(a);if(o!==s)if(RY(o)&&RY(s))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,i=[];for(let n=0;n<t.length;n++)lWe(t[n])&&i.push(n);i.length&&EWe(t,i,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=k_[i](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const n=r[r.length-1];n!==void 0&&t.getValue(i,n).jump(n,!1)}measureEndState(){var s;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const n=t.getValue(r);n&&n.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=k_[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(s=this.removedTransforms)!=null&&s.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const IY=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(yv.test(e)||e==="0")&&!e.startsWith("url("));function LWe(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function FWe(e,t,r,i){const n=e[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=IY(n,t),s=IY(a,t);return!o||!s?!1:LWe(e)||(r==="spring"||Mq(r))&&i}const NWe=e=>e!==null;function X2(e,{repeat:t,repeatType:r="loop"},i){const n=e.filter(NWe),a=t&&r!=="loop"&&t%2===1?0:n.length-1;return!a||i===void 0?n[a]:i}const UWe=40;class e1e{constructor({autoplay:t=!0,delay:r=0,type:i="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:o="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=xp.now(),this.options={autoplay:t,delay:r,type:i,repeat:n,repeatDelay:a,repeatType:o,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>UWe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&IWe(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=xp.now(),this.hasAttemptedResolve=!0;const{name:i,type:n,velocity:a,delay:o,onComplete:s,onUpdate:l,isGenerator:u}=this.options;if(!u&&!FWe(t,i,n,a))if(o)this.options.duration=0;else{l&&l(X2(t,this.options,r)),s&&s(),this.resolveFinishedPromise();return}const c=this.initPlayback(t,r);c!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...c},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Fi=(e,t,r)=>e+(t-e)*r;function K3(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function VWe({hue:e,saturation:t,lightness:r,alpha:i}){e/=360,t/=100,r/=100;let n=0,a=0,o=0;if(!t)n=a=o=r;else{const s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;n=K3(l,s,e+1/3),a=K3(l,s,e),o=K3(l,s,e-1/3)}return{red:Math.round(n*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:i}}function ZR(e,t){return r=>r>0?t:e}const Q3=(e,t,r)=>{const i=e*e,n=r*(t*t-i)+i;return n<0?0:Math.sqrt(n)},kWe=[DV,j0,$1],qWe=e=>kWe.find(t=>t.test(e));function jY(e){const t=qWe(e);if(!t)return!1;let r=t.parse(e);return t===$1&&(r=VWe(r)),r}const zY=(e,t)=>{const r=jY(e),i=jY(t);if(!r||!i)return ZR(e,t);const n={...r};return a=>(n.red=Q3(r.red,i.red,a),n.green=Q3(r.green,i.green,a),n.blue=Q3(r.blue,i.blue,a),n.alpha=Fi(r.alpha,i.alpha,a),j0.transform(n))},WWe=(e,t)=>r=>t(e(r)),dP=(...e)=>e.reduce(WWe),NV=new Set(["none","hidden"]);function GWe(e,t){return NV.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function HWe(e,t){return r=>Fi(e,t,r)}function Yq(e){return typeof e=="number"?HWe:typeof e=="string"?zq(e)?ZR:Ra.test(e)?zY:YWe:Array.isArray(e)?t1e:typeof e=="object"?Ra.test(e)?zY:$We:ZR}function t1e(e,t){const r=[...e],i=r.length,n=e.map((a,o)=>Yq(a)(a,t[o]));return a=>{for(let o=0;o<i;o++)r[o]=n[o](a);return r}}function $We(e,t){const r={...e,...t},i={};for(const n in r)e[n]!==void 0&&t[n]!==void 0&&(i[n]=Yq(e[n])(e[n],t[n]));return n=>{for(const a in i)r[a]=i[a](n);return r}}function XWe(e,t){const r=[],i={color:0,var:0,number:0};for(let n=0;n<t.values.length;n++){const a=t.types[n],o=e.indexes[a][i[a]],s=e.values[o]??0;r[n]=s,i[a]++}return r}const YWe=(e,t)=>{const r=yv.createTransformer(t),i=hM(e),n=hM(t);return i.indexes.var.length===n.indexes.var.length&&i.indexes.color.length===n.indexes.color.length&&i.indexes.number.length>=n.indexes.number.length?NV.has(e)&&!n.values.length||NV.has(t)&&!i.values.length?GWe(e,t):dP(t1e(XWe(i,n),n.values),r):ZR(e,t)};function r1e(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Fi(e,t,r):Yq(e)(e,t)}const KWe=5;function i1e(e,t,r){const i=Math.max(t-KWe,0);return Cq(r-e(i),t-i)}const Yi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},BY=.001;function QWe({duration:e=Yi.duration,bounce:t=Yi.bounce,velocity:r=Yi.velocity,mass:i=Yi.mass}){let n,a,o=1-t;o=Op(Yi.minDamping,Yi.maxDamping,o),e=Op(Yi.minDuration,Yi.maxDuration,wp(e)),o<1?(n=u=>{const c=u*o,d=c*e,h=c-r,f=UV(u,o),g=Math.exp(-d);return BY-h/f*g},a=u=>{const d=u*o*e,h=d*r+r,f=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-d),p=UV(Math.pow(u,2),o);return(-n(u)+BY>0?-1:1)*((h-f)*g)/p}):(n=u=>{const c=Math.exp(-u*e),d=(u-r)*e+1;return-.001+c*d},a=u=>{const c=Math.exp(-u*e),d=(r-u)*(e*e);return c*d});const s=5/e,l=ZWe(n,a,s);if(e=_p(e),isNaN(l))return{stiffness:Yi.stiffness,damping:Yi.damping,duration:e};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:e}}}const JWe=12;function ZWe(e,t,r){let i=r;for(let n=1;n<JWe;n++)i=i-e(i)/t(i);return i}function UV(e,t){return e*Math.sqrt(1-t*t)}const eGe=["duration","bounce"],tGe=["stiffness","damping","mass"];function LY(e,t){return t.some(r=>e[r]!==void 0)}function rGe(e){let t={velocity:Yi.velocity,stiffness:Yi.stiffness,damping:Yi.damping,mass:Yi.mass,isResolvedFromDuration:!1,...e};if(!LY(e,tGe)&&LY(e,eGe))if(e.visualDuration){const r=e.visualDuration,i=2*Math.PI/(r*1.2),n=i*i,a=2*Op(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:Yi.mass,stiffness:n,damping:a}}else{const r=QWe(e);t={...t,...r,mass:Yi.mass},t.isResolvedFromDuration=!0}return t}function eD(e=Yi.visualDuration,t=Yi.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:n}=r;const a=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],s={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:d,velocity:h,isResolvedFromDuration:f}=rGe({...r,velocity:-wp(r.velocity||0)}),g=h||0,p=u/(2*Math.sqrt(l*c)),m=o-a,y=wp(Math.sqrt(l/c)),b=Math.abs(m)<5;i||(i=b?Yi.restSpeed.granular:Yi.restSpeed.default),n||(n=b?Yi.restDelta.granular:Yi.restDelta.default);let w;if(p<1){const S=UV(y,p);w=C=>{const T=Math.exp(-p*y*C);return o-T*((g+p*y*m)/S*Math.sin(S*C)+m*Math.cos(S*C))}}else if(p===1)w=S=>o-Math.exp(-y*S)*(m+(g+y*m)*S);else{const S=y*Math.sqrt(p*p-1);w=C=>{const T=Math.exp(-p*y*C),M=Math.min(S*C,300);return o-T*((g+p*y*m)*Math.sinh(M)+S*m*Math.cosh(M))/S}}const x={calculatedDuration:f&&d||null,next:S=>{const C=w(S);if(f)s.done=S>=d;else{let T=0;p<1&&(T=S===0?_p(g):i1e(w,S,C));const M=Math.abs(T)<=i,A=Math.abs(o-C)<=n;s.done=M&&A}return s.value=s.done?o:C,s},toString:()=>{const S=Math.min(Tq(x),QR),C=nbe(T=>x.next(S*T).value,S,30);return S+"ms "+C},toTransition:()=>{}};return x}eD.applyToOptions=e=>{const t=tqe(e,100,eD);return e.ease=sM()?t.ease:"easeOut",e.duration=_p(t.duration),e.type="keyframes",e};function FY({keyframes:e,velocity:t=0,power:r=.8,timeConstant:i=325,bounceDamping:n=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:l,restDelta:u=.5,restSpeed:c}){const d=e[0],h={done:!1,value:d},f=M=>s!==void 0&&M<s||l!==void 0&&M>l,g=M=>s===void 0?l:l===void 0||Math.abs(s-M)<Math.abs(l-M)?s:l;let p=r*t;const m=d+p,y=o===void 0?m:o(m);y!==m&&(p=y-d);const b=M=>-p*Math.exp(-M/i),w=M=>y+b(M),x=M=>{const A=b(M),P=w(M);h.done=Math.abs(A)<=u,h.value=h.done?y:P};let S,C;const T=M=>{f(h.value)&&(S=M,C=eD({keyframes:[h.value,g(h.value)],velocity:i1e(w,M,h.value),damping:n,stiffness:a,restDelta:u,restSpeed:c}))};return T(0),{calculatedDuration:null,next:M=>{let A=!1;return!C&&S===void 0&&(A=!0,x(M),T(M)),S!==void 0&&M>=S?C.next(M-S):(!A&&x(M),h)}}}const iGe=cP(.42,0,1,1),nGe=cP(0,0,.58,1),n1e=cP(.42,0,.58,1),aGe=e=>Array.isArray(e)&&typeof e[0]!="number",oGe={linear:ns,easeIn:iGe,easeInOut:n1e,easeOut:nGe,circIn:Gq,circInOut:Fbe,circOut:Lbe,backIn:Wq,backInOut:zbe,backOut:jbe,anticipate:Bbe},NY=e=>{if(Eq(e)){rbe(e.length===4);const[t,r,i,n]=e;return cP(t,r,i,n)}else if(typeof e=="string")return oGe[e];return e};function sGe(e,t,r){const i=[],n=r||r1e,a=e.length-1;for(let o=0;o<a;o++){let s=n(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||ns:t;s=dP(l,s)}i.push(s)}return i}function Kq(e,t,{clamp:r=!0,ease:i,mixer:n}={}){const a=e.length;if(rbe(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=sGe(t,i,n),l=s.length,u=c=>{if(o&&c<e[0])return t[0];let d=0;if(l>1)for(;d<e.length-2&&!(c<e[d+1]);d++);const h=U_(e[d],e[d+1],c);return s[d](h)};return r?c=>u(Op(e[0],e[a-1],c)):u}function lGe(e,t){const r=e[e.length-1];for(let i=1;i<=t;i++){const n=U_(0,t,i);e.push(Fi(r,1,n))}}function a1e(e){const t=[0];return lGe(t,e.length-1),t}function uGe(e,t){return e.map(r=>r*t)}function cGe(e,t){return e.map(()=>t||n1e).splice(0,e.length-1)}function tD({duration:e=300,keyframes:t,times:r,ease:i="easeInOut"}){const n=aGe(i)?i.map(NY):NY(i),a={done:!1,value:t[0]},o=uGe(r&&r.length===t.length?r:a1e(t),e),s=Kq(o,t,{ease:Array.isArray(n)?n:cGe(t,n)});return{calculatedDuration:e,next:l=>(a.value=s(l),a.done=l>=e,a)}}const dGe=e=>{const t=({timestamp:r})=>e(r);return{start:()=>ti.update(t,!0),stop:()=>Mf(t),now:()=>Xn.isProcessing?Xn.timestamp:xp.now()}},hGe={decay:FY,inertia:FY,tween:tD,keyframes:tD,spring:eD},fGe=e=>e/100;class Qq extends e1e{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:r,motionValue:i,element:n,keyframes:a}=this.options,o=(n==null?void 0:n.KeyframeResolver)||Xq,s=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(a,s,r,i,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:i=0,repeatDelay:n=0,repeatType:a,velocity:o=0}=this.options,s=Mq(r)?r:hGe[r]||tD;let l,u;s!==tD&&typeof t[0]!="number"&&(l=dP(fGe,r1e(t[0],t[1])),t=[0,100]);const c=s({...this.options,keyframes:t});a==="mirror"&&(u=s({...this.options,keyframes:[...t].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Tq(c));const{calculatedDuration:d}=c,h=d+n,f=h*(i+1)-n;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:f}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:i}=this;if(!i){const{keyframes:M}=this.options;return{done:!0,value:M[M.length-1]}}const{finalKeyframe:n,generator:a,mirroredGenerator:o,mapPercentToKeyframes:s,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=i;if(this.startTime===null)return a.next(0);const{delay:h,repeat:f,repeatType:g,repeatDelay:p,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-h*(this.speed>=0?1:-1),b=this.speed>=0?y<0:y>c;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let w=this.currentTime,x=a;if(f){const M=Math.min(this.currentTime,c)/d;let A=Math.floor(M),P=M%1;!P&&M>=1&&(P=1),P===1&&A--,A=Math.min(A,f+1),!!(A%2)&&(g==="reverse"?(P=1-P,p&&(P-=p/d)):g==="mirror"&&(x=o)),w=Op(0,1,P)*d}const S=b?{done:!1,value:l[0]}:x.next(w);s&&(S.value=s(S.value));let{done:C}=S;!b&&u!==null&&(C=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return T&&n!==void 0&&(S.value=X2(l,this.options,n)),m&&m(S.value),T&&this.finish(),S}get duration(){const{resolved:t}=this;return t?wp(t.calculatedDuration):0}get time(){return wp(this.currentTime)}set time(t){t=_p(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=wp(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=dGe,onPlay:r,startTime:i}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),r&&r();const n=this.driver.now();this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=n):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}get finished(){return this.currentFinishedPromise}}const pGe=new Set(["opacity","clipPath","filter","transform"]),mGe=xq(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rD=10,gGe=2e4;function vGe(e){return Mq(e.type)||e.type==="spring"||!obe(e.ease)}function yGe(e,t){const r=new Qq({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:e[0]};const n=[];let a=0;for(;!i.done&&a<gGe;)i=r.sample(a),n.push(i.value),a+=rD;return{times:void 0,keyframes:n,duration:a-rD,ease:"linear"}}const o1e={anticipate:Bbe,backInOut:zbe,circInOut:Fbe};function bGe(e){return e in o1e}class UY extends e1e{constructor(t){super(t);const{name:r,motionValue:i,element:n,keyframes:a}=this.options;this.resolver=new Zbe(a,(o,s)=>this.onKeyframesResolved(o,s),r,i,n),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:i=300,times:n,ease:a,type:o,motionValue:s,name:l,startTime:u}=this.options;if(!s.owner||!s.owner.current)return!1;if(typeof a=="string"&&sM()&&bGe(a)&&(a=o1e[a]),vGe(this.options)){const{onComplete:d,onUpdate:h,motionValue:f,element:g,...p}=this.options,m=yGe(t,p);t=m.keyframes,t.length===1&&(t[1]=t[0]),i=m.duration,n=m.times,a=m.ease,o="keyframes"}const c=eqe(s.owner.current,l,t,{...this.options,duration:i,times:n,ease:a});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(pY(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:d}=this.options;s.set(X2(t,this.options,r)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:i,times:n,type:o,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return wp(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return wp(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:i}=r;i.currentTime=_p(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}get finished(){return this.resolved.animation.finished}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:i}=r;i.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return ns;const{animation:i}=r;pY(i,t)}return ns}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:i,duration:n,type:a,ease:o,times:s}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:h,...f}=this.options,g=new Qq({...f,keyframes:i,duration:n,type:a,ease:o,times:s,isGenerator:!0}),p=_p(this.time);u.setWithVelocity(g.sample(p-rD).value,g.sample(p).value,rD)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:i,repeatDelay:n,repeatType:a,damping:o,type:s}=t;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=r.owner.getProps();return mGe()&&i&&pGe.has(i)&&(i!=="transform"||!u)&&!l&&!n&&a!=="mirror"&&o!==0&&s!=="inertia"}}const _Ge={type:"spring",stiffness:500,damping:25,restSpeed:10},wGe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),xGe={type:"keyframes",duration:.8},SGe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CGe=(e,{keyframes:t})=>t.length>2?xGe:_b.has(e)?e.startsWith("scale")?wGe(t[1]):_Ge:SGe;function EGe({when:e,delay:t,delayChildren:r,staggerChildren:i,staggerDirection:n,repeat:a,repeatType:o,repeatDelay:s,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Jq=(e,t,r,i={},n,a)=>o=>{const s=Pq(i,e)||{},l=s.delay||i.delay||0;let{elapsed:u=0}=i;u=u-_p(l);let c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...s,delay:-u,onUpdate:h=>{t.set(h),s.onUpdate&&s.onUpdate(h)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:a?void 0:n};EGe(s)||(c={...c,...CGe(e,c)}),c.duration&&(c.duration=_p(c.duration)),c.repeatDelay&&(c.repeatDelay=_p(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),c.allowFlatten=!s.type&&!s.ease,d&&!a&&t.get()!==void 0){const h=X2(c.keyframes,s);if(h!==void 0)return ti.update(()=>{c.onUpdate(h),c.onComplete()}),new Q8e([])}return!a&&UY.supports(c)?new UY(c):new Qq(c)};function MGe({protectedKeys:e,needsAnimating:t},r){const i=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,i}function s1e(e,t,{delay:r=0,transitionOverride:i,type:n}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...s}=t;i&&(a=i);const l=[],u=n&&e.animationState&&e.animationState.getState()[n];for(const c in s){const d=e.getValue(c,e.latestValues[c]??null),h=s[c];if(h===void 0||u&&MGe(u,c))continue;const f={delay:r,...Pq(a||{},c)};let g=!1;if(window.MotionHandoffAnimation){const m=Obe(e);if(m){const y=window.MotionHandoffAnimation(m,c,ti);y!==null&&(f.startTime=y,g=!0)}}RV(e,c),d.start(Jq(c,d,h,e.shouldReduceMotion&&Abe.has(c)?{type:!1}:f,e,g));const p=d.animation;p&&l.push(p)}return o&&Promise.all(l).then(()=>{ti.update(()=>{o&&iWe(e,o)})}),l}function VV(e,t,r={}){var l;const i=dM(e,t,r.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:n=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(n=r.transitionOverride);const a=i?()=>Promise.all(s1e(e,i,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=n;return PGe(e,t,c+u,d,h,r)}:()=>Promise.resolve(),{when:s}=n;if(s){const[u,c]=s==="beforeChildren"?[a,o]:[o,a];return u().then(()=>c())}else return Promise.all([a(),o(r.delay)])}function PGe(e,t,r=0,i=0,n=1,a){const o=[],s=(e.variantChildren.size-1)*i,l=n===1?(u=0)=>u*i:(u=0)=>s-u*i;return Array.from(e.variantChildren).sort(TGe).forEach((u,c)=>{u.notify("AnimationStart",t),o.push(VV(u,t,{...a,delay:r+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function TGe(e,t){return e.sortNodePosition(t)}function AGe(e,t,r={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const n=t.map(a=>VV(e,a,r));i=Promise.all(n)}else if(typeof t=="string")i=VV(e,t,r);else{const n=typeof t=="function"?dM(e,t,r.custom):t;i=Promise.all(s1e(e,n,r))}return i.then(()=>{e.notify("AnimationComplete",t)})}function l1e(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}const OGe=Dq.length;function u1e(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?u1e(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<OGe;r++){const i=Dq[r],n=e.props[i];(lM(n)||n===!1)&&(t[i]=n)}return t}const RGe=[...Rq].reverse(),DGe=Rq.length;function IGe(e){return t=>Promise.all(t.map(({animation:r,options:i})=>AGe(e,r,i)))}function jGe(e){let t=IGe(e),r=VY(),i=!0;const n=l=>(u,c)=>{var h;const d=dM(e,c,l==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:f,transitionEnd:g,...p}=d;u={...u,...p,...g}}return u};function a(l){t=l(e)}function o(l){const{props:u}=e,c=u1e(e.parent)||{},d=[],h=new Set;let f={},g=1/0;for(let m=0;m<DGe;m++){const y=RGe[m],b=r[y],w=u[y]!==void 0?u[y]:c[y],x=lM(w),S=y===l?b.isActive:null;S===!1&&(g=m);let C=w===c[y]&&w!==u[y]&&x;if(C&&i&&e.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...f},!b.isActive&&S===null||!w&&!b.prevProp||H2(w)||typeof w=="boolean")continue;const T=zGe(b.prevProp,w);let M=T||y===l&&b.isActive&&!C&&x||m>g&&x,A=!1;const P=Array.isArray(w)?w:[w];let O=P.reduce(n(y),{});S===!1&&(O={});const{prevResolvedValues:j={}}=b,D={...j,...O},I=X=>{M=!0,h.has(X)&&(A=!0,h.delete(X)),b.needsAnimating[X]=!0;const N=e.getValue(X);N&&(N.liveStyle=!1)};for(const X in D){const N=O[X],Q=j[X];if(f.hasOwnProperty(X))continue;let F=!1;OV(N)&&OV(Q)?F=!l1e(N,Q):F=N!==Q,F?N!=null?I(X):h.add(X):N!==void 0&&h.has(X)?I(X):b.protectedKeys[X]=!0}b.prevProp=w,b.prevResolvedValues=O,b.isActive&&(f={...f,...O}),i&&e.blockInitialAnimation&&(M=!1),M&&(!(C&&T)||A)&&d.push(...P.map(X=>({animation:X,options:{type:y}})))}if(h.size){const m={};if(typeof u.initial!="boolean"){const y=dM(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(m.transition=y.transition)}h.forEach(y=>{const b=e.getBaseTarget(y),w=e.getValue(y);w&&(w.liveStyle=!0),m[y]=b??null}),d.push({animation:m})}let p=!!d.length;return i&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(p=!1),i=!1,p?t(d):Promise.resolve()}function s(l,u){var d;if(r[l].isActive===u)return Promise.resolve();(d=e.variantChildren)==null||d.forEach(h=>{var f;return(f=h.animationState)==null?void 0:f.setActive(l,u)}),r[l].isActive=u;const c=o(l);for(const h in r)r[h].protectedKeys={};return c}return{animateChanges:o,setActive:s,setAnimateFunction:a,getState:()=>r,reset:()=>{r=VY(),i=!0}}}function zGe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!l1e(t,e):!1}function iy(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VY(){return{animate:iy(!0),whileInView:iy(),whileHover:iy(),whileTap:iy(),whileDrag:iy(),whileFocus:iy(),exit:iy()}}class Tv{constructor(t){this.isMounted=!1,this.node=t}update(){}}class BGe extends Tv{constructor(t){super(t),t.animationState||(t.animationState=jGe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();H2(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let LGe=0;class FGe extends Tv{constructor(){super(...arguments),this.id=LGe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const n=this.node.animationState.setActive("exit",!t);r&&!t&&n.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const NGe={animation:{Feature:BGe},exit:{Feature:FGe}};function fM(e,t,r,i={passive:!0}){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r)}function hP(e){return{point:{x:e.pageX,y:e.pageY}}}const UGe=e=>t=>Oq(t)&&e(t,hP(t));function xE(e,t,r,i){return fM(e,t,UGe(r),i)}function c1e({top:e,left:t,right:r,bottom:i}){return{x:{min:t,max:r},y:{min:e,max:i}}}function VGe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function kGe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}const d1e=1e-4,qGe=1-d1e,WGe=1+d1e,h1e=.01,GGe=0-h1e,HGe=0+h1e;function oo(e){return e.max-e.min}function $Ge(e,t,r){return Math.abs(e-t)<=r}function kY(e,t,r,i=.5){e.origin=i,e.originPoint=Fi(t.min,t.max,e.origin),e.scale=oo(r)/oo(t),e.translate=Fi(r.min,r.max,e.origin)-e.originPoint,(e.scale>=qGe&&e.scale<=WGe||isNaN(e.scale))&&(e.scale=1),(e.translate>=GGe&&e.translate<=HGe||isNaN(e.translate))&&(e.translate=0)}function SE(e,t,r,i){kY(e.x,t.x,r.x,i?i.originX:void 0),kY(e.y,t.y,r.y,i?i.originY:void 0)}function qY(e,t,r){e.min=r.min+t.min,e.max=e.min+oo(t)}function XGe(e,t,r){qY(e.x,t.x,r.x),qY(e.y,t.y,r.y)}function WY(e,t,r){e.min=t.min-r.min,e.max=e.min+oo(t)}function CE(e,t,r){WY(e.x,t.x,r.x),WY(e.y,t.y,r.y)}const GY=()=>({translate:0,scale:1,origin:0,originPoint:0}),X1=()=>({x:GY(),y:GY()}),HY=()=>({min:0,max:0}),ln=()=>({x:HY(),y:HY()});function Os(e){return[e("x"),e("y")]}function J3(e){return e===void 0||e===1}function kV({scale:e,scaleX:t,scaleY:r}){return!J3(e)||!J3(t)||!J3(r)}function g0(e){return kV(e)||f1e(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function f1e(e){return $Y(e.x)||$Y(e.y)}function $Y(e){return e&&e!=="0%"}function iD(e,t,r){const i=e-r,n=t*i;return r+n}function XY(e,t,r,i,n){return n!==void 0&&(e=iD(e,n,i)),iD(e,r,i)+t}function qV(e,t=0,r=1,i,n){e.min=XY(e.min,t,r,i,n),e.max=XY(e.max,t,r,i,n)}function p1e(e,{x:t,y:r}){qV(e.x,t.translate,t.scale,t.originPoint),qV(e.y,r.translate,r.scale,r.originPoint)}const YY=.999999999999,KY=1.0000000000001;function YGe(e,t,r,i=!1){const n=r.length;if(!n)return;t.x=t.y=1;let a,o;for(let s=0;s<n;s++){a=r[s],o=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&K1(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,p1e(e,o)),i&&g0(a.latestValues)&&K1(e,a.latestValues))}t.x<KY&&t.x>YY&&(t.x=1),t.y<KY&&t.y>YY&&(t.y=1)}function Y1(e,t){e.min=e.min+t,e.max=e.max+t}function QY(e,t,r,i,n=.5){const a=Fi(e.min,e.max,n);qV(e,t,r,a,i)}function K1(e,t){QY(e.x,t.x,t.scaleX,t.scale,t.originX),QY(e.y,t.y,t.scaleY,t.scale,t.originY)}function m1e(e,t){return c1e(kGe(e.getBoundingClientRect(),t))}function KGe(e,t,r){const i=m1e(e,r),{scroll:n}=t;return n&&(Y1(i.x,n.offset.x),Y1(i.y,n.offset.y)),i}const g1e=({current:e})=>e?e.ownerDocument.defaultView:null,JY=(e,t)=>Math.abs(e-t);function QGe(e,t){const r=JY(e.x,t.x),i=JY(e.y,t.y);return Math.sqrt(r**2+i**2)}class v1e{constructor(t,r,{transformPagePoint:i,contextWindow:n,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=ez(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=QGe(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:g}=d,{timestamp:p}=Xn;this.history.push({...g,timestamp:p});const{onStart:m,onMove:y}=this.handlers;h||(m&&m(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Z3(h,this.transformPagePoint),ti.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:g,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=ez(d.type==="pointercancel"?this.lastMoveEventInfo:Z3(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,m),g&&g(d,m)},!Oq(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=i,this.contextWindow=n||window;const o=hP(t),s=Z3(o,this.transformPagePoint),{point:l}=s,{timestamp:u}=Xn;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=r;c&&c(t,ez(s,this.history)),this.removeListeners=dP(xE(this.contextWindow,"pointermove",this.handlePointerMove),xE(this.contextWindow,"pointerup",this.handlePointerUp),xE(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Mf(this.updatePoint)}}function Z3(e,t){return t?{point:t(e.point)}:e}function ZY(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ez({point:e},t){return{point:e,delta:ZY(e,y1e(t)),offset:ZY(e,JGe(t)),velocity:ZGe(t,.1)}}function JGe(e){return e[0]}function y1e(e){return e[e.length-1]}function ZGe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,i=null;const n=y1e(e);for(;r>=0&&(i=e[r],!(n.timestamp-i.timestamp>_p(t)));)r--;if(!i)return{x:0,y:0};const a=wp(n.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const o={x:(n.x-i.x)/a,y:(n.y-i.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function eHe(e,{min:t,max:r},i){return t!==void 0&&e<t?e=i?Fi(t,e,i.min):Math.max(e,t):r!==void 0&&e>r&&(e=i?Fi(r,e,i.max):Math.min(e,r)),e}function eK(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function tHe(e,{top:t,left:r,bottom:i,right:n}){return{x:eK(e.x,r,n),y:eK(e.y,t,i)}}function tK(e,t){let r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,i]=[i,r]),{min:r,max:i}}function rHe(e,t){return{x:tK(e.x,t.x),y:tK(e.y,t.y)}}function iHe(e,t){let r=.5;const i=oo(e),n=oo(t);return n>i?r=U_(t.min,t.max-i,e.min):i>n&&(r=U_(e.min,e.max-n,t.min)),Op(0,1,r)}function nHe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const WV=.35;function aHe(e=WV){return e===!1?e=0:e===!0&&(e=WV),{x:rK(e,"left","right"),y:rK(e,"top","bottom")}}function rK(e,t,r){return{min:iK(e,t),max:iK(e,r)}}function iK(e,t){return typeof e=="number"?e:e[t]||0}const oHe=new WeakMap;class sHe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const n=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(hP(c).point)},a=(c,d)=>{const{drag:h,dragPropagation:f,onDragStart:g}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=aqe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Os(m=>{let y=this.getAxisMotionValue(m).get()||0;if(Sp.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[m];w&&(y=oo(w)*(parseFloat(y)/100))}}this.originPoint[m]=y}),g&&ti.postRender(()=>g(c,d)),RV(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},o=(c,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:g,onDrag:p}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:m}=d;if(f&&this.currentDirection===null){this.currentDirection=lHe(m),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,m),this.updateAxis("y",d.point,m),this.visualElement.render(),p&&p(c,d)},s=(c,d)=>this.stop(c,d),l=()=>Os(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)==null?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new v1e(t,{onSessionStart:n,onStart:a,onMove:o,onSessionEnd:s,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:g1e(this.visualElement)})}stop(t,r){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:n}=r;this.startAnimation(n);const{onDragEnd:a}=this.getProps();a&&ti.postRender(()=>a(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,i){const{drag:n}=this.getProps();if(!i||!iA(t,n,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=eHe(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,n=this.constraints;t&&H1(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=tHe(i.layoutBox,t):this.constraints=!1,this.elastic=aHe(r),n!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Os(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=nHe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!H1(t))return!1;const i=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const a=KGe(i,n.root,this.visualElement.getTransformPagePoint());let o=rHe(n.layout.layoutBox,a);if(r){const s=r(VGe(o));this.hasMutatedConstraints=!!s,s&&(o=c1e(s))}return o}startAnimation(t){const{drag:r,dragMomentum:i,dragElastic:n,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},u=Os(c=>{if(!iA(c,r,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const h=n?200:1e6,f=n?40:1e7,g={type:"inertia",velocity:i?t[c]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(s)}startAxisValueAnimation(t,r){const i=this.getAxisMotionValue(t);return RV(this.visualElement,t),i.start(Jq(t,i,0,r,this.visualElement,!1))}stopAnimation(){Os(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Os(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),n=i[r];return n||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Os(r=>{const{drag:i}=this.getProps();if(!iA(r,i,this.currentDirection))return;const{projection:n}=this.visualElement,a=this.getAxisMotionValue(r);if(n&&n.layout){const{min:o,max:s}=n.layout.layoutBox[r];a.set(t[r]-Fi(o,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:i}=this.visualElement;if(!H1(r)||!i||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Os(o=>{const s=this.getAxisMotionValue(o);if(s&&this.constraints!==!1){const l=s.get();n[o]=iHe({min:l,max:l},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Os(o=>{if(!iA(o,t,null))return;const s=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];s.set(Fi(l,u,n[o]))})}addListeners(){if(!this.visualElement.current)return;oHe.set(this.visualElement,this);const t=this.visualElement.current,r=xE(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();H1(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,a=n.addEventListener("measure",i);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ti.read(i);const o=fM(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Os(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),r(),a(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:i=!1,dragPropagation:n=!1,dragConstraints:a=!1,dragElastic:o=WV,dragMomentum:s=!0}=t;return{...t,drag:r,dragDirectionLock:i,dragPropagation:n,dragConstraints:a,dragElastic:o,dragMomentum:s}}}function iA(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function lHe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class uHe extends Tv{constructor(t){super(t),this.removeGroupControls=ns,this.removeListeners=ns,this.controls=new sHe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ns}unmount(){this.removeGroupControls(),this.removeListeners()}}const nK=e=>(t,r)=>{e&&ti.postRender(()=>e(t,r))};class cHe extends Tv{constructor(){super(...arguments),this.removePointerDownListener=ns}onPointerDown(t){this.session=new v1e(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:g1e(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:i,onPanEnd:n}=this.node.getProps();return{onSessionStart:nK(t),onStart:nK(r),onMove:i,onEnd:(a,o)=>{delete this.session,n&&ti.postRender(()=>n(a,o))}}}mount(){this.removePointerDownListener=xE(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const eR={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function aK(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ox={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(fr.test(e))e=parseFloat(e);else return e;const r=aK(e,t.target.x),i=aK(e,t.target.y);return`${r}% ${i}%`}},dHe={correct:(e,{treeScale:t,projectionDelta:r})=>{const i=e,n=yv.parse(e);if(n.length>5)return i;const a=yv.createTransformer(e),o=typeof n[0]!="number"?1:0,s=r.x.scale*t.x,l=r.y.scale*t.y;n[0+o]/=s,n[1+o]/=l;const u=Fi(s,l,.5);return typeof n[2+o]=="number"&&(n[2+o]/=u),typeof n[3+o]=="number"&&(n[3+o]/=u),a(n)}};class hHe extends G.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:i,layoutId:n}=this.props,{projection:a}=t;Rqe(fHe),a&&(r.group&&r.group.add(a),i&&i.register&&n&&i.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),eR.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:i,drag:n,isPresent:a}=this.props,o=i.projection;return o&&(o.isPresent=a,n||t.layoutDependency!==r||r===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||ti.postRender(()=>{const s=o.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Aq.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:i}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(n),i&&i.deregister&&i.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function b1e(e){const[t,r]=tbe(),i=G.useContext(yq);return V.jsx(hHe,{...e,layoutGroup:i,switchLayoutGroup:G.useContext(gbe),isPresent:t,safeToRemove:r})}const fHe={borderRadius:{...Ox,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ox,borderTopRightRadius:Ox,borderBottomLeftRadius:Ox,borderBottomRightRadius:Ox,boxShadow:dHe};function pHe(e,t,r){const i=La(e)?e:pp(e);return i.start(Jq("",i,t,r)),i.animation}function mHe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const gHe=(e,t)=>e.depth-t.depth;class vHe{constructor(){this.children=[],this.isDirty=!1}add(t){_q(this.children,t),this.isDirty=!0}remove(t){wq(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(gHe),this.isDirty=!1,this.children.forEach(t)}}function yHe(e,t){const r=xp.now(),i=({timestamp:n})=>{const a=n-r;a>=t&&(Mf(i),e(a-t))};return ti.read(i,!0),()=>Mf(i)}const _1e=["TopLeft","TopRight","BottomLeft","BottomRight"],bHe=_1e.length,oK=e=>typeof e=="string"?parseFloat(e):e,sK=e=>typeof e=="number"||fr.test(e);function _He(e,t,r,i,n,a){n?(e.opacity=Fi(0,r.opacity!==void 0?r.opacity:1,wHe(i)),e.opacityExit=Fi(t.opacity!==void 0?t.opacity:1,0,xHe(i))):a&&(e.opacity=Fi(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,i));for(let o=0;o<bHe;o++){const s=`border${_1e[o]}Radius`;let l=lK(t,s),u=lK(r,s);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||sK(l)===sK(u)?(e[s]=Math.max(Fi(oK(l),oK(u),i),0),(Sp.test(u)||Sp.test(l))&&(e[s]+="%")):e[s]=u}(t.rotate||r.rotate)&&(e.rotate=Fi(t.rotate||0,r.rotate||0,i))}function lK(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const wHe=w1e(0,.5,Lbe),xHe=w1e(.5,.95,ns);function w1e(e,t,r){return i=>i<e?0:i>t?1:r(U_(e,t,i))}function uK(e,t){e.min=t.min,e.max=t.max}function Ss(e,t){uK(e.x,t.x),uK(e.y,t.y)}function cK(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function dK(e,t,r,i,n){return e-=t,e=iD(e,1/r,i),n!==void 0&&(e=iD(e,1/n,i)),e}function SHe(e,t=0,r=1,i=.5,n,a=e,o=e){if(Sp.test(t)&&(t=parseFloat(t),t=Fi(o.min,o.max,t/100)-o.min),typeof t!="number")return;let s=Fi(a.min,a.max,i);e===a&&(s-=t),e.min=dK(e.min,t,r,s,n),e.max=dK(e.max,t,r,s,n)}function hK(e,t,[r,i,n],a,o){SHe(e,t[r],t[i],t[n],t.scale,a,o)}const CHe=["x","scaleX","originX"],EHe=["y","scaleY","originY"];function fK(e,t,r,i){hK(e.x,t,CHe,r?r.x:void 0,i?i.x:void 0),hK(e.y,t,EHe,r?r.y:void 0,i?i.y:void 0)}function pK(e){return e.translate===0&&e.scale===1}function x1e(e){return pK(e.x)&&pK(e.y)}function mK(e,t){return e.min===t.min&&e.max===t.max}function MHe(e,t){return mK(e.x,t.x)&&mK(e.y,t.y)}function gK(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function S1e(e,t){return gK(e.x,t.x)&&gK(e.y,t.y)}function vK(e){return oo(e.x)/oo(e.y)}function yK(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class PHe{constructor(){this.members=[]}add(t){_q(this.members,t),t.scheduleRender()}remove(t){if(wq(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(n=>t===n);if(r===0)return!1;let i;for(let n=r;n>=0;n--){const a=this.members[n];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(t,r){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,r&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:i}=t;r.onExitComplete&&r.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function THe(e,t,r){let i="";const n=e.x.translate/t.x,a=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((n||a||o)&&(i=`translate3d(${n}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:h,skewX:f,skewY:g}=r;u&&(i=`perspective(${u}px) ${i}`),c&&(i+=`rotate(${c}deg) `),d&&(i+=`rotateX(${d}deg) `),h&&(i+=`rotateY(${h}deg) `),f&&(i+=`skewX(${f}deg) `),g&&(i+=`skewY(${g}deg) `)}const s=e.x.scale*t.x,l=e.y.scale*t.y;return(s!==1||l!==1)&&(i+=`scale(${s}, ${l})`),i||"none"}const tz=["","X","Y","Z"],AHe={visibility:"hidden"},bK=1e3;let OHe=0;function rz(e,t,r,i){const{latestValues:n}=t;n[e]&&(r[e]=n[e],t.setStaticValue(e,0),i&&(i[e]=0))}function C1e(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=Obe(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:n,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",ti,!(n||a))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&C1e(i)}function E1e({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:i,resetTransform:n}){return class{constructor(o={},s=t==null?void 0:t()){this.id=OHe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(IHe),this.nodes.forEach(FHe),this.nodes.forEach(NHe),this.nodes.forEach(jHe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new vHe)}addEventListener(o,s){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Sq),this.eventHandlers.get(o).add(s)}notifyListeners(o,...s){const l=this.eventHandlers.get(o);l&&l.notify(...s)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mHe(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(u||l)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=yHe(h,250),eR.hasAnimatedSinceResize&&(eR.hasAnimatedSinceResize=!1,this.nodes.forEach(wK))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||WHe,{onLayoutAnimationStart:m,onLayoutAnimationComplete:y}=c.getProps(),b=!this.targetLayout||!S1e(this.targetLayout,g),w=!h&&f;if(this.options.layoutRoot||this.resumeFrom||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const x={...Pq(p,"layout"),onPlay:m,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else h||wK(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Mf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UHe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&C1e(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_K);return}this.isUpdating||this.nodes.forEach(BHe),this.isUpdating=!1,this.nodes.forEach(LHe),this.nodes.forEach(RHe),this.nodes.forEach(DHe),this.clearAllSnapshots();const s=xp.now();Xn.delta=Op(0,1e3/60,s-Xn.timestamp),Xn.timestamp=s,Xn.isProcessing=!0,$3.update.process(Xn),$3.preRender.process(Xn),$3.render.process(Xn),Xn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Aq.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zHe),this.sharedNodes.forEach(VHe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ti.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ti.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!oo(this.snapshot.measuredBox.x)&&!oo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(s=!1),s){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!x1e(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(s||g0(this.latestValues)||c)&&(n(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return o&&(l=this.removeTransform(l)),GHe(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return ln();const s=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(HHe))){const{scroll:c}=this.root;c&&(Y1(s.x,c.offset.x),Y1(s.y,c.offset.y))}return s}removeElementScroll(o){var l;const s=ln();if(Ss(s,o),(l=this.scroll)!=null&&l.wasRoot)return s;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:h}=c;c!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Ss(s,o),Y1(s.x,d.offset.x),Y1(s.y,d.offset.y))}return s}applyTransform(o,s=!1){const l=ln();Ss(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!s&&c.options.layoutScroll&&c.scroll&&c!==c.root&&K1(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),g0(c.latestValues)&&K1(l,c.latestValues)}return g0(this.latestValues)&&K1(l,this.latestValues),l}removeTransform(o){const s=ln();Ss(s,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!g0(u.latestValues))continue;kV(u.latestValues)&&u.updateSnapshot();const c=ln(),d=u.measurePageBox();Ss(c,d),fK(s,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return g0(this.latestValues)&&fK(s,this.latestValues),s}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var h;const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==s;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!(!this.layout||!(c||d))){if(this.resolvedRelativeTargetAt=Xn.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),CE(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XGe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ss(this.target,this.layout.layoutBox),p1e(this.target,this.targetDelta)):Ss(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),CE(this.relativeTargetOrigin,this.target,f.target),Ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||kV(this.parent.latestValues)||f1e(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),s=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Xn.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Ss(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;YGe(this.layoutCorrected,this.treeScale,this.path,s),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ln());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cK(this.prevProjectionDelta.x,this.projectionDelta.x),cK(this.prevProjectionDelta.y,this.projectionDelta.y)),SE(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!yK(this.projectionDelta.x,this.prevProjectionDelta.x)||!yK(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var s;if((s=this.options.visualElement)==null||s.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=X1(),this.projectionDelta=X1(),this.projectionDeltaWithTransform=X1()}setAnimationOrigin(o,s=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=X1();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const h=ln(),f=l?l.source:void 0,g=this.layout?this.layout.source:void 0,p=f!==g,m=this.getStack(),y=!m||m.members.length<=1,b=!!(p&&!y&&this.options.crossfade===!0&&!this.path.some(qHe));this.animationProgress=0;let w;this.mixTargetDelta=x=>{const S=x/1e3;xK(d.x,o.x,S),xK(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(CE(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kHe(this.relativeTarget,this.relativeTargetOrigin,h,S),w&&MHe(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ln()),Ss(w,this.relativeTarget)),p&&(this.animationValues=c,_He(c,u,this.latestValues,S,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Mf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ti.update(()=>{eR.hasAnimatedSinceResize=!0,this.currentAnimation=pHe(0,bK,{...o,onUpdate:s=>{this.mixTargetDelta(s),o.onUpdate&&o.onUpdate(s)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:s,target:l,layout:u,latestValues:c}=o;if(!(!s||!l||!u)){if(this!==o&&this.layout&&u&&M1e(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ln();const d=oo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=oo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}Ss(s,l),K1(s,c),SE(this.projectionDeltaWithTransform,this.layoutCorrected,s,c)}}registerSharedNode(o,s){this.sharedNodes.has(o)||this.sharedNodes.set(o,new PHe),this.sharedNodes.get(o).add(s);const u=s.options.initialPromotionConfig;s.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(s):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())==null?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())==null?void 0:s.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:s,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let s=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const u={};l.z&&rz("z",o,u,this.animationValues);for(let c=0;c<tz.length;c++)rz(`rotate${tz[c]}`,o,u,this.animationValues),rz(`skew${tz[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return AHe;const s={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=ZO(o==null?void 0:o.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none",s;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=ZO(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!g0(this.latestValues)&&(f.transform=l?l({},""):"none",this.hasProjected=!1),f}const c=u.animationValues||u.latestValues;this.applyTransformsToTarget(),s.transform=THe(this.projectionDeltaWithTransform,this.treeScale,c),l&&(s.transform=l(c,s.transform));const{x:d,y:h}=this.projectionDelta;s.transformOrigin=`${d.origin*100}% ${h.origin*100}% 0`,u.animationValues?s.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:s.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const f in uM){if(c[f]===void 0)continue;const{correct:g,applyTo:p,isCSSVariable:m}=uM[f],y=s.transform==="none"?c[f]:g(c[f],u);if(p){const b=p.length;for(let w=0;w<b;w++)s[p[w]]=y}else m?this.options.visualElement.renderState.vars[f]=y:s[f]=y}return this.options.layoutId&&(s.pointerEvents=u===this?ZO(o==null?void 0:o.pointerEvents)||"":"none"),s}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var s;return(s=o.currentAnimation)==null?void 0:s.stop()}),this.root.nodes.forEach(_K),this.root.sharedNodes.clear()}}}function RHe(e){e.updateLayout()}function DHe(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:n}=e.layout,{animationType:a}=e.options,o=t.source!==e.layout.source;a==="size"?Os(d=>{const h=o?t.measuredBox[d]:t.layoutBox[d],f=oo(h);h.min=i[d].min,h.max=h.min+f}):M1e(a,t.layoutBox,i)&&Os(d=>{const h=o?t.measuredBox[d]:t.layoutBox[d],f=oo(i[d]);h.max=h.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+f)});const s=X1();SE(s,i,t.layoutBox);const l=X1();o?SE(l,e.applyTransform(n,!0),t.measuredBox):SE(l,i,t.layoutBox);const u=!x1e(s);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const g=ln();CE(g,t.layoutBox,h.layoutBox);const p=ln();CE(p,i,f.layoutBox),S1e(g,p)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:s,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function IHe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function jHe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function zHe(e){e.clearSnapshot()}function _K(e){e.clearMeasurements()}function BHe(e){e.isLayoutDirty=!1}function LHe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function wK(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function FHe(e){e.resolveTargetDelta()}function NHe(e){e.calcProjection()}function UHe(e){e.resetSkewAndRotation()}function VHe(e){e.removeLeadSnapshot()}function xK(e,t,r){e.translate=Fi(t.translate,0,r),e.scale=Fi(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function SK(e,t,r,i){e.min=Fi(t.min,r.min,i),e.max=Fi(t.max,r.max,i)}function kHe(e,t,r,i){SK(e.x,t.x,r.x,i),SK(e.y,t.y,r.y,i)}function qHe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const WHe={duration:.45,ease:[.4,0,.1,1]},CK=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),EK=CK("applewebkit/")&&!CK("chrome/")?Math.round:ns;function MK(e){e.min=EK(e.min),e.max=EK(e.max)}function GHe(e){MK(e.x),MK(e.y)}function M1e(e,t,r){return e==="position"||e==="preserve-aspect"&&!$Ge(vK(t),vK(r),.2)}function HHe(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const $He=E1e({attachResizeListener:(e,t)=>fM(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iz={current:void 0},P1e=E1e({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!iz.current){const e=new $He({});e.mount(window),e.setOptions({layoutScroll:!0}),iz.current=e}return iz.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),XHe={pan:{Feature:cHe},drag:{Feature:uHe,ProjectionNode:P1e,MeasureLayout:b1e}};function PK(e,t,r){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",r==="Start");const n="onHover"+r,a=i[n];a&&ti.postRender(()=>a(t,hP(t)))}class YHe extends Tv{mount(){const{current:t}=this.node;t&&(this.unmount=oqe(t,(r,i)=>(PK(this.node,i,"Start"),n=>PK(this.node,n,"End"))))}unmount(){}}class KHe extends Tv{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dP(fM(this.node.current,"focus",()=>this.onFocus()),fM(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TK(e,t,r){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",r==="Start");const n="onTap"+(r==="End"?"":r),a=i[n];a&&ti.postRender(()=>a(t,hP(t)))}class QHe extends Tv{mount(){const{current:t}=this.node;t&&(this.unmount=cqe(t,(r,i)=>(TK(this.node,i,"Start"),(n,{success:a})=>TK(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const GV=new WeakMap,nz=new WeakMap,JHe=e=>{const t=GV.get(e.target);t&&t(e)},ZHe=e=>{e.forEach(JHe)};function e9e({root:e,...t}){const r=e||document;nz.has(r)||nz.set(r,{});const i=nz.get(r),n=JSON.stringify(t);return i[n]||(i[n]=new IntersectionObserver(ZHe,{root:e,...t})),i[n]}function t9e(e,t,r){const i=e9e(t);return GV.set(e,r),i.observe(e),()=>{GV.delete(e),i.unobserve(e)}}const r9e={some:0,all:1};class i9e extends Tv{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:i,amount:n="some",once:a}=t,o={root:r?r.current:void 0,rootMargin:i,threshold:typeof n=="number"?n:r9e[n]},s=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),h=u?c:d;h&&h(l)};return t9e(this.node.current,o,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(n9e(t,r))&&this.startObserver()}unmount(){}}function n9e({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const a9e={inView:{Feature:i9e},tap:{Feature:QHe},focus:{Feature:KHe},hover:{Feature:YHe}},o9e={layout:{ProjectionNode:P1e,MeasureLayout:b1e}},HV={current:null},T1e={current:!1};function s9e(){if(T1e.current=!0,!!bq)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>HV.current=e.matches;e.addListener(t),t()}else HV.current=!1}const l9e=[...Jbe,Ra,yv],u9e=e=>l9e.find(Qbe(e)),c9e=new WeakMap;function d9e(e,t,r){for(const i in t){const n=t[i],a=r[i];if(La(n))e.addValue(i,n);else if(La(a))e.addValue(i,pp(n,{owner:e}));else if(a!==n)if(e.hasValue(i)){const o=e.getValue(i);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=e.getStaticValue(i);e.addValue(i,pp(o!==void 0?o:n,{owner:e}))}}for(const i in r)t[i]===void 0&&e.removeValue(i);return t}const AK=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class h9e{scrapeMotionValuesFromProps(t,r,i){return{}}constructor({parent:t,props:r,presenceContext:i,reducedMotionConfig:n,blockInitialAnimation:a,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xq,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=xp.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ti.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=o;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=s,this.blockInitialAnimation=!!a,this.isControllingVariants=$2(r),this.isVariantNode=pbe(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const g=h[f];l[f]!==void 0&&La(g)&&g.set(l[f],!1)}}mount(t){this.current=t,c9e.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),T1e.current||s9e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:HV.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Mf(this.notifyUpdate),Mf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=_b.has(t);i&&this.onBindTransform&&this.onBindTransform();const n=r.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&ti.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{n(),a(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in V_){const r=V_[t];if(!r)continue;const{isEnabled:i,Feature:n}=r;if(!this.features[t]&&n&&i(this.props)&&(this.features[t]=new n(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let i=0;i<AK.length;i++){const n=AK[i];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const a="on"+n,o=t[a];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=d9e(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const i=this.values.get(t);r!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&r!==void 0&&(i=pp(r===null?void 0:r,{owner:this}),this.addValue(t,i)),i}readValue(t,r){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Ybe(i)||Nbe(i))?i=parseFloat(i):!u9e(i)&&yv.test(r)&&(i=Hbe(t,r)),this.setBaseTarget(t,La(i)?i.get():i)),La(i)?i.get():i}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var a;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=kq(this.props,r,(a=this.presenceContext)==null?void 0:a.custom);o&&(i=o[t])}if(r&&i!==void 0)return i;const n=this.getBaseTargetFromProps(this.props,t);return n!==void 0&&!La(n)?n:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Sq),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class A1e extends h9e{constructor(){super(...arguments),this.KeyframeResolver=Zbe}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:i}){delete r[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;La(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function f9e(e){return window.getComputedStyle(e)}class p9e extends A1e{constructor(){super(...arguments),this.type="html",this.renderInstance=Ebe}readValueFromInstance(t,r){if(_b.has(r))return TWe(t,r);{const i=f9e(t),n=(jq(r)?i.getPropertyValue(r):i[r])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:r}){return m1e(t,r)}build(t,r,i){Lq(t,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,r,i){return qq(t,r,i)}}class m9e extends A1e{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Cbe(this.current,this.renderState)}}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(_b.has(r)){const i=Gbe(r);return i&&i.default||0}return r=Mbe.has(r)?r:Iq(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,i){return Tbe(t,r,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&ti.postRender(this.updateDimensions)}build(t,r,i){Uq(t,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,r,i,n){Pbe(t,r,i,n)}mount(t){this.isSVGTag=Vq(t.tagName),super.mount(t)}}const g9e=(e,t)=>Nq(e)?new m9e(t):new p9e(t,{allowProjection:e!==G.Fragment}),v9e=tWe({...NGe,...a9e,...XHe,...o9e},g9e),Fr=vqe(v9e);function O1e(e,t){let r;const i=()=>{const{currentTime:n}=t,o=(n===null?0:n.value)/100;r!==o&&e(o),r=o};return ti.update(i,!0),()=>Mf(i)}const tR=new WeakMap;let Ug;function y9e(e,t){if(t){const{inlineSize:r,blockSize:i}=t[0];return{width:r,height:i}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function b9e({target:e,contentRect:t,borderBoxSize:r}){var i;(i=tR.get(e))==null||i.forEach(n=>{n({target:e,contentSize:t,get size(){return y9e(e,r)}})})}function _9e(e){e.forEach(b9e)}function w9e(){typeof ResizeObserver>"u"||(Ug=new ResizeObserver(_9e))}function x9e(e,t){Ug||w9e();const r=ube(e);return r.forEach(i=>{let n=tR.get(i);n||(n=new Set,tR.set(i,n)),n.add(t),Ug==null||Ug.observe(i)}),()=>{r.forEach(i=>{const n=tR.get(i);n==null||n.delete(t),n!=null&&n.size||Ug==null||Ug.unobserve(i)})}}const rR=new Set;let EE;function S9e(){EE=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};rR.forEach(r=>r(t))},window.addEventListener("resize",EE)}function C9e(e){return rR.add(e),EE||S9e(),()=>{rR.delete(e),!rR.size&&EE&&(EE=void 0)}}function E9e(e,t){return typeof e=="function"?C9e(e):x9e(e,t)}const M9e=50,OK=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),P9e=()=>({time:0,x:OK(),y:OK()}),T9e={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function RK(e,t,r,i){const n=r[t],{length:a,position:o}=T9e[t],s=n.current,l=r.time;n.current=e[`scroll${o}`],n.scrollLength=e[`scroll${a}`]-e[`client${a}`],n.offset.length=0,n.offset[0]=0,n.offset[1]=n.scrollLength,n.progress=U_(0,n.scrollLength,n.current);const u=i-l;n.velocity=u>M9e?0:Cq(n.current-s,u)}function A9e(e,t,r){RK(e,"x",t,r),RK(e,"y",t,r),t.time=r}function O9e(e,t){const r={x:0,y:0};let i=e;for(;i&&i!==t;)if(i instanceof HTMLElement)r.x+=i.offsetLeft,r.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const n=i.getBoundingClientRect();i=i.parentElement;const a=i.getBoundingClientRect();r.x+=n.left-a.left,r.y+=n.top-a.top}else if(i instanceof SVGGraphicsElement){const{x:n,y:a}=i.getBBox();r.x+=n,r.y+=a;let o=null,s=i.parentNode;for(;!o;)s.tagName==="svg"&&(o=s),s=i.parentNode;i=o}else break;return r}const $V={start:0,center:.5,end:1};function DK(e,t,r=0){let i=0;if(e in $V&&(e=$V[e]),typeof e=="string"){const n=parseFloat(e);e.endsWith("px")?i=n:e.endsWith("%")?e=n/100:e.endsWith("vw")?i=n/100*document.documentElement.clientWidth:e.endsWith("vh")?i=n/100*document.documentElement.clientHeight:e=n}return typeof e=="number"&&(i=t*e),r+i}const R9e=[0,0];function D9e(e,t,r,i){let n=Array.isArray(e)?e:R9e,a=0,o=0;return typeof e=="number"?n=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?n=e.split(" "):n=[e,$V[e]?e:"0"]),a=DK(n[0],r,i),o=DK(n[1],t),a-o}const I9e={All:[[0,0],[1,1]]},j9e={x:0,y:0};function z9e(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function B9e(e,t,r){const{offset:i=I9e.All}=r,{target:n=e,axis:a="y"}=r,o=a==="y"?"height":"width",s=n!==e?O9e(n,e):j9e,l=n===e?{width:e.scrollWidth,height:e.scrollHeight}:z9e(n),u={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let c=!t[a].interpolate;const d=i.length;for(let h=0;h<d;h++){const f=D9e(i[h],u[o],l[o],s[a]);!c&&f!==t[a].interpolatorOffsets[h]&&(c=!0),t[a].offset[h]=f}c&&(t[a].interpolate=Kq(t[a].offset,a1e(i),{clamp:!1}),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=Op(0,1,t[a].interpolate(t[a].current))}function L9e(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let i=t;for(;i&&i!==e;)r.x.targetOffset+=i.offsetLeft,r.y.targetOffset+=i.offsetTop,i=i.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}function F9e(e,t,r,i={}){return{measure:()=>L9e(e,i.target,r),update:n=>{A9e(e,r,n),(i.offset||i.target)&&B9e(e,r,i)},notify:()=>t(r)}}const Rx=new WeakMap,IK=new WeakMap,az=new WeakMap,jK=e=>e===document.documentElement?window:e;function Zq(e,{container:t=document.documentElement,...r}={}){let i=az.get(t);i||(i=new Set,az.set(t,i));const n=P9e(),a=F9e(t,e,n,r);if(i.add(a),!Rx.has(t)){const s=()=>{for(const h of i)h.measure()},l=()=>{for(const h of i)h.update(Xn.timestamp)},u=()=>{for(const h of i)h.notify()},c=()=>{ti.read(s,!1,!0),ti.read(l,!1,!0),ti.update(u,!1,!0)};Rx.set(t,c);const d=jK(t);window.addEventListener("resize",c,{passive:!0}),t!==document.documentElement&&IK.set(t,E9e(t,c)),d.addEventListener("scroll",c,{passive:!0})}const o=Rx.get(t);return ti.read(o,!1,!0),()=>{var u;Mf(o);const s=az.get(t);if(!s||(s.delete(a),s.size))return;const l=Rx.get(t);Rx.delete(t),l&&(jK(t).removeEventListener("scroll",l),(u=IK.get(t))==null||u(),window.removeEventListener("resize",l))}}function N9e({source:e,container:t,axis:r="y"}){e&&(t=e);const i={value:0},n=Zq(a=>{i.value=a[r].progress*100},{container:t,axis:r});return{currentTime:i,cancel:n}}const oz=new Map;function R1e({source:e,container:t=document.documentElement,axis:r="y"}={}){e&&(t=e),oz.has(t)||oz.set(t,{});const i=oz.get(t);return i[r]||(i[r]=ibe()?new ScrollTimeline({source:t,axis:r}):N9e({source:t,axis:r})),i[r]}function U9e(e){return e.length===2}function D1e(e){return e&&(e.target||e.offset)}function V9e(e,t){return U9e(e)||D1e(t)?Zq(r=>{e(r[t.axis].progress,r)},t):O1e(e,R1e(t))}function k9e(e,t){if(e.flatten(),D1e(t))return e.pause(),Zq(r=>{e.time=e.duration*r[t.axis].progress},t);{const r=R1e(t);return e.attachTimeline?e.attachTimeline(r,i=>(i.pause(),O1e(n=>{i.time=i.duration*n},r))):ns}}function q9e(e,{axis:t="y",...r}={}){const i={axis:t,...r};return typeof e=="function"?V9e(e,i):k9e(e,i)}function zK(e,t){X8e(!!(!t||t.current))}const W9e=()=>({scrollX:pp(0),scrollY:pp(0),scrollXProgress:pp(0),scrollYProgress:pp(0)});function G9e({container:e,target:t,layoutEffect:r=!0,...i}={}){const n=gw(W9e);return(r?k2:G.useEffect)(()=>(zK("target",t),zK("container",e),q9e((o,{x:s,y:l})=>{n.scrollX.set(s.current),n.scrollXProgress.set(s.progress),n.scrollY.set(l.current),n.scrollYProgress.set(l.progress)},{...i,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(i.offset)]),n}function H9e(e){const t=gw(()=>pp(e)),{isStatic:r}=G.useContext(W2);if(r){const[,i]=G.useState(e);G.useEffect(()=>t.on("change",i),[])}return t}function I1e(e,t){const r=H9e(t()),i=()=>r.set(t());return i(),k2(()=>{const n=()=>ti.preRender(i,!1,!0),a=e.map(o=>o.on("change",n));return()=>{a.forEach(o=>o()),Mf(i)}}),r}const $9e=e=>e&&typeof e=="object"&&e.mix,X9e=e=>$9e(e)?e.mix:void 0;function Y9e(...e){const t=!Array.isArray(e[0]),r=t?0:-1,i=e[0+r],n=e[1+r],a=e[2+r],o=e[3+r],s=Kq(n,a,{mixer:X9e(a[0]),...o});return t?s(i):s}function K9e(e){_E.current=[],e();const t=I1e(_E.current,e);return _E.current=void 0,t}function sz(e,t,r,i){if(typeof e=="function")return K9e(e);const n=typeof t=="function"?t:Y9e(t,r,i);return Array.isArray(e)?BK(e,n):BK([e],([a])=>n(a))}function BK(e,t){const r=gw(()=>[]);return I1e(e,()=>{r.length=0;const i=e.length;for(let n=0;n<i;n++)r[n]=e[n].get();return t(r)})}const Q9e="modulepreload",J9e=function(e){return"/"+e},LK={},tl=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(l=>{if(l=J9e(l),l in LK)return;LK[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Q9e,u||(d.as="script"),d.crossOrigin="",d.href=l,s&&d.setAttribute("nonce",s),document.head.appendChild(d),u)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return n.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};var Z9e=Object.create,Y2=Object.defineProperty,e$e=Object.getOwnPropertyDescriptor,t$e=Object.getOwnPropertyNames,r$e=Object.getPrototypeOf,i$e=Object.prototype.hasOwnProperty,n$e=(e,t,r)=>t in e?Y2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wb=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),a$e=(e,t)=>{for(var r in t)Y2(e,r,{get:t[r],enumerable:!0})},o$e=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of t$e(t))!i$e.call(e,n)&&n!==r&&Y2(e,n,{get:()=>t[n],enumerable:!(i=e$e(t,n))||i.enumerable});return e},Av=(e,t,r)=>(r=e!=null?Z9e(r$e(e)):{},o$e(t||!e||!e.__esModule?Y2(r,"default",{value:e,enumerable:!0}):r,e)),QC=(e,t,r)=>(n$e(e,typeof t!="symbol"?t+"":t,r),r),s$e=wb((e,t)=>{(function(r,i){typeof e=="object"?t.exports=i():typeof define=="function"&&define.amd?define(i):r.Alea=i()})(e,function(){return r.importState=function(n){var a=new r;return a.importState(n),a},r;function r(){return function(n){var a=0,o=0,s=0,l=1;n.length==0&&(n=[+new Date]);var u=i();a=u(" "),o=u(" "),s=u(" ");for(var c=0;c<n.length;c++)a-=u(n[c]),a<0&&(a+=1),o-=u(n[c]),o<0&&(o+=1),s-=u(n[c]),s<0&&(s+=1);u=null;var d=function(){var h=2091639*a+l*23283064365386963e-26;return a=o,o=s,s=h-(l=h|0)};return d.next=d,d.uint32=function(){return d()*4294967296},d.fract53=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.version="Alea 0.9",d.args=n,d.exportState=function(){return[a,o,s,l]},d.importState=function(h){a=+h[0]||0,o=+h[1]||0,s=+h[2]||0,l=+h[3]||0},d}(Array.prototype.slice.call(arguments))}function i(){var n=4022871197,a=function(o){o=o.toString();for(var s=0;s<o.length;s++){n+=o.charCodeAt(s);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return a.version="Mash 0.9",a}})}),j1e=wb((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(i,n,a,o,s){if(n=n===void 0||n,a=a===void 0||a,s=1e-64/(o=o||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,u,c,d,h,f,g,p,m,y,b,w,x=i[0].length,S=i.length;if(S<x)throw new TypeError("Invalid matrix: m < n");for(var C=[],T=[],M=[],A=n==="f"?S:x,P=y=g=0;P<S;P++)T[P]=new Array(A).fill(0);for(P=0;P<x;P++)M[P]=new Array(x).fill(0);var O,j=new Array(x).fill(0);for(P=0;P<S;P++)for(l=0;l<x;l++)T[P][l]=i[P][l];for(P=0;P<x;P++){for(C[P]=g,m=0,c=P+1,l=P;l<S;l++)m+=Math.pow(T[l][P],2);if(m<s)g=0;else for(p=(f=T[P][P])*(g=f<0?Math.sqrt(m):-Math.sqrt(m))-m,T[P][P]=f-g,l=c;l<x;l++){for(m=0,u=P;u<S;u++)m+=T[u][P]*T[u][l];for(f=m/p,u=P;u<S;u++)T[u][l]=T[u][l]+f*T[u][P]}for(j[P]=g,m=0,l=c;l<x;l++)m+=Math.pow(T[P][l],2);if(m<s)g=0;else{for(p=(f=T[P][P+1])*(g=f<0?Math.sqrt(m):-Math.sqrt(m))-m,T[P][P+1]=f-g,l=c;l<x;l++)C[l]=T[P][l]/p;for(l=c;l<S;l++){for(m=0,u=c;u<x;u++)m+=T[l][u]*T[P][u];for(u=c;u<x;u++)T[l][u]=T[l][u]+m*C[u]}}y<(b=Math.abs(j[P])+Math.abs(C[P]))&&(y=b)}if(a)for(P=x-1;0<=P;P--){if(g!==0){for(p=T[P][P+1]*g,l=c;l<x;l++)M[l][P]=T[P][l]/p;for(l=c;l<x;l++){for(m=0,u=c;u<x;u++)m+=T[P][u]*M[u][l];for(u=c;u<x;u++)M[u][l]=M[u][l]+m*M[u][P]}}for(l=c;l<x;l++)M[P][l]=0,M[l][P]=0;M[P][P]=1,g=C[P],c=P}if(n){if(n==="f")for(P=x;P<S;P++){for(l=x;l<S;l++)T[P][l]=0;T[P][P]=1}for(P=x-1;0<=P;P--){for(c=P+1,g=j[P],l=c;l<A;l++)T[P][l]=0;if(g!==0){for(p=T[P][P]*g,l=c;l<A;l++){for(m=0,u=c;u<S;u++)m+=T[u][P]*T[u][l];for(f=m/p,u=P;u<S;u++)T[u][l]=T[u][l]+f*T[u][P]}for(l=P;l<S;l++)T[l][P]=T[l][P]/g}else for(l=P;l<S;l++)T[l][P]=0;T[P][P]=T[P][P]+1}}for(o*=y,u=x-1;0<=u;u--)for(var D=0;D<50;D++){for(O=!1,c=u;0<=c;c--){if(Math.abs(C[c])<=o){O=!0;break}if(Math.abs(j[c-1])<=o)break}if(!O){for(h=0,d=c-(m=1),P=c;P<u+1&&(f=m*C[P],C[P]=h*C[P],!(Math.abs(f)<=o));P++)if(g=j[P],j[P]=Math.sqrt(f*f+g*g),h=g/(p=j[P]),m=-f/p,n)for(l=0;l<S;l++)b=T[l][d],w=T[l][P],T[l][d]=b*h+w*m,T[l][P]=-b*m+w*h}if(w=j[u],c===u){if(w<0&&(j[u]=-w,a))for(l=0;l<x;l++)M[l][u]=-M[l][u];break}for(y=j[c],f=(((b=j[u-1])-w)*(b+w)+((g=C[u-1])-(p=C[u]))*(g+p))/(2*p*b),g=Math.sqrt(f*f+1),f=((y-w)*(y+w)+p*(b/(f<0?f-g:f+g)-p))/y,P=c+(m=h=1);P<u+1;P++){if(g=C[P],b=j[P],p=m*g,g*=h,w=Math.sqrt(f*f+p*p),f=y*(h=f/(C[P-1]=w))+g*(m=p/w),g=-y*m+g*h,p=b*m,b*=h,a)for(l=0;l<x;l++)y=M[l][P-1],w=M[l][P],M[l][P-1]=y*h+w*m,M[l][P]=-y*m+w*h;if(w=Math.sqrt(f*f+p*p),f=(h=f/(j[P-1]=w))*g+(m=p/w)*b,y=-m*g+h*b,n)for(l=0;l<S;l++)b=T[l][P-1],w=T[l][P],T[l][P-1]=b*h+w*m,T[l][P]=-b*m+w*h}C[c]=0,C[u]=f,j[u]=y}for(P=0;P<x;P++)j[P]<o&&(j[P]=0);return{u:T,q:j,v:M}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),l$e=wb((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(i){if(i===null||i===!0||i===!1)return NaN;var n=Number(i);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}t.exports=e.default}),u$e=wb((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(i){var n=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return n.setUTCFullYear(i.getFullYear()),i.getTime()-n.getTime()}t.exports=e.default}),c$e=wb((e,t)=>{function r(a,o){function s(){this.constructor=a}s.prototype=o.prototype,a.prototype=new s}function i(a,o,s,l){this.message=a,this.expected=o,this.found=s,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,i)}r(i,Error),i.buildMessage=function(a,o){var s={literal:function(g){return'"'+u(g.text)+'"'},class:function(g){var p="",m;for(m=0;m<g.parts.length;m++)p+=g.parts[m]instanceof Array?c(g.parts[m][0])+"-"+c(g.parts[m][1]):c(g.parts[m]);return"["+(g.inverted?"^":"")+p+"]"},any:function(g){return"any character"},end:function(g){return"end of input"},other:function(g){return g.description}};function l(g){return g.charCodeAt(0).toString(16).toUpperCase()}function u(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+l(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+l(p)})}function c(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+l(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+l(p)})}function d(g){return s[g.type](g)}function h(g){var p=new Array(g.length),m,y;for(m=0;m<g.length;m++)p[m]=d(g[m]);if(p.sort(),p.length>0){for(m=1,y=1;m<p.length;m++)p[m-1]!==p[m]&&(p[y]=p[m],y++);p.length=y}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function f(g){return g?'"'+u(g)+'"':"end of input"}return"Expected "+h(a)+" but "+f(o)+" found."};function n(a,o){o=o!==void 0?o:{};var s={},l={svg_path:ht},u=ht,c=function(ue){if(!ue)return[];for(var pe=[],Oe=0;Oe<ue.length;Oe++)pe=pe.concat.apply(pe,ue[Oe]);var _e=pe[0];return _e&&_e.code=="m"&&(delete _e.relative,_e.code="M"),pe},d=function(ue,pe){return Ir(ue,pe)},h=/^[Mm]/,f=Re(["M","m"],!1,!1),g=function(ue,pe,Oe){var _e=pi(ue,[pe]);return Oe&&(_e=_e.concat(pi(ue=="M"?"L":"l",Oe[1]))),_e},p=/^[Zz]/,m=Re(["Z","z"],!1,!1),y=function(){return pi("Z")},b=/^[Ll]/,w=Re(["L","l"],!1,!1),x=function(ue,pe){return pi(ue,pe)},S=/^[Hh]/,C=Re(["H","h"],!1,!1),T=function(ue,pe){return pi(ue,pe.map(function(Oe){return{x:Oe}}))},M=/^[Vv]/,A=Re(["V","v"],!1,!1),P=function(ue,pe){return pi(ue,pe.map(function(Oe){return{y:Oe}}))},O=/^[Cc]/,j=Re(["C","c"],!1,!1),D=function(ue,pe,Oe){return{x1:ue.x,y1:ue.y,x2:pe.x,y2:pe.y,x:Oe.x,y:Oe.y}},I=/^[Ss]/,q=Re(["S","s"],!1,!1),$=function(ue,pe){return{x2:ue.x,y2:ue.y,x:pe.x,y:pe.y}},X=/^[Qq]/,N=Re(["Q","q"],!1,!1),Q=function(ue,pe){return{x1:ue.x,y1:ue.y,x:pe.x,y:pe.y}},F=/^[Tt]/,L=Re(["T","t"],!1,!1),Y=/^[Aa]/,ae=Re(["A","a"],!1,!1),re=function(ue,pe,Oe,_e,Ve,ft){return{rx:ue,ry:pe,xAxisRotation:Oe,largeArc:_e,sweep:Ve,x:ft.x,y:ft.y}},H=function(ue,pe){return{x:ue,y:pe}},se=function(ue){return ue*1},le=function(ue){return ue.join("")*1},ee=/^[01]/,J=Re(["0","1"],!1,!1),oe=function(ue){return ue=="1"},me=function(){return""},be=",",de=ve(",",!1),ge=function(ue){return ue.join("")},ce=".",Ce=ve(".",!1),Ee=/^[eE]/,Me=Re(["e","E"],!1,!1),he=/^[+\-]/,Ae=Re(["+","-"],!1,!1),De=/^[0-9]/,Z=Re([["0","9"]],!1,!1),ie=function(ue){return ue.join("")},Te=/^[ \t\n\r]/,Ue=Re([" ","	",`
`,"\r"],!1,!1),ne=0,K=[{line:1,column:1}],B=0,U=[],te;if("startRule"in o){if(!(o.startRule in l))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');u=l[o.startRule]}function ve(ue,pe){return{type:"literal",text:ue,ignoreCase:pe}}function Re(ue,pe,Oe){return{type:"class",parts:ue,inverted:pe,ignoreCase:Oe}}function Fe(){return{type:"end"}}function et(ue){var pe=K[ue],Oe;if(pe)return pe;for(Oe=ue-1;!K[Oe];)Oe--;for(pe=K[Oe],pe={line:pe.line,column:pe.column};Oe<ue;)a.charCodeAt(Oe)===10?(pe.line++,pe.column=1):pe.column++,Oe++;return K[ue]=pe,pe}function Ze(ue,pe){var Oe=et(ue),_e=et(pe);return{start:{offset:ue,line:Oe.line,column:Oe.column},end:{offset:pe,line:_e.line,column:_e.column}}}function Pe(ue){ne<B||(ne>B&&(B=ne,U=[]),U.push(ue))}function Le(ue,pe,Oe){return new i(i.buildMessage(ue,pe),ue,pe,Oe)}function ht(){var ue,pe,Oe,_e,Ve;for(ue=ne,pe=[],Oe=Nt();Oe!==s;)pe.push(Oe),Oe=Nt();if(pe!==s)if(Oe=Be(),Oe===s&&(Oe=null),Oe!==s){for(_e=[],Ve=Nt();Ve!==s;)_e.push(Ve),Ve=Nt();_e!==s?(pe=c(Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;else ne=ue,ue=s;return ue}function Be(){var ue,pe,Oe,_e,Ve,ft;if(ue=ne,pe=Ye(),pe!==s){for(Oe=[],_e=ne,Ve=[],ft=Nt();ft!==s;)Ve.push(ft),ft=Nt();for(Ve!==s?(ft=Ye(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);_e!==s;){for(Oe.push(_e),_e=ne,Ve=[],ft=Nt();ft!==s;)Ve.push(ft),ft=Nt();Ve!==s?(ft=Ye(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s)}Oe!==s?(pe=d(pe,Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function Ye(){var ue,pe,Oe,_e,Ve,ft;if(ue=ne,pe=mt(),pe!==s){for(Oe=[],_e=ne,Ve=[],ft=Nt();ft!==s;)Ve.push(ft),ft=Nt();for(Ve!==s?(ft=$e(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);_e!==s;){for(Oe.push(_e),_e=ne,Ve=[],ft=Nt();ft!==s;)Ve.push(ft),ft=Nt();Ve!==s?(ft=$e(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s)}Oe!==s?(pe=d(pe,Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function $e(){var ue;return ue=It(),ue===s&&(ue=qt(),ue===s&&(ue=Rr(),ue===s&&(ue=xe(),ue===s&&(ue=He(),ue===s&&(ue=Lt(),ue===s&&(ue=we(),ue===s&&(ue=qe(),ue===s&&(ue=Tt())))))))),ue}function mt(){var ue,pe,Oe,_e,Ve,ft,oa;if(ue=ne,h.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(f)),pe!==s){for(Oe=[],_e=Nt();_e!==s;)Oe.push(_e),_e=Nt();Oe!==s?(_e=zt(),_e!==s?(Ve=ne,ft=Se(),ft===s&&(ft=null),ft!==s?(oa=mr(),oa!==s?(ft=[ft,oa],Ve=ft):(ne=Ve,Ve=s)):(ne=Ve,Ve=s),Ve===s&&(Ve=null),Ve!==s?(pe=g(pe,_e,Ve),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function It(){var ue,pe;return ue=ne,p.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(m)),pe!==s&&(pe=y()),ue=pe,ue}function qt(){var ue,pe,Oe,_e;if(ue=ne,b.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(w)),pe!==s){for(Oe=[],_e=Nt();_e!==s;)Oe.push(_e),_e=Nt();Oe!==s?(_e=mr(),_e!==s?(pe=x(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function mr(){var ue,pe,Oe,_e,Ve,ft;if(ue=ne,pe=zt(),pe!==s){for(Oe=[],_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=zt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);_e!==s;)Oe.push(_e),_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=zt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);Oe!==s?(pe=d(pe,Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function Rr(){var ue,pe,Oe,_e;if(ue=ne,S.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(C)),pe!==s){for(Oe=[],_e=Nt();_e!==s;)Oe.push(_e),_e=Nt();Oe!==s?(_e=ye(),_e!==s?(pe=T(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function ye(){var ue,pe,Oe,_e,Ve,ft;if(ue=ne,pe=Vt(),pe!==s){for(Oe=[],_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=Vt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);_e!==s;)Oe.push(_e),_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=Vt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);Oe!==s?(pe=d(pe,Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function xe(){var ue,pe,Oe,_e;if(ue=ne,M.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(A)),pe!==s){for(Oe=[],_e=Nt();_e!==s;)Oe.push(_e),_e=Nt();Oe!==s?(_e=ye(),_e!==s?(pe=P(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function He(){var ue,pe,Oe,_e;if(ue=ne,O.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(j)),pe!==s){for(Oe=[],_e=Nt();_e!==s;)Oe.push(_e),_e=Nt();Oe!==s?(_e=Xe(),_e!==s?(pe=x(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function Xe(){var ue,pe,Oe,_e,Ve,ft;if(ue=ne,pe=pt(),pe!==s){for(Oe=[],_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=pt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);_e!==s;)Oe.push(_e),_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=pt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);Oe!==s?(pe=d(pe,Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function pt(){var ue,pe,Oe,_e,Ve,ft;return ue=ne,pe=zt(),pe!==s?(Oe=Se(),Oe===s&&(Oe=null),Oe!==s?(_e=zt(),_e!==s?(Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=zt(),ft!==s?(pe=D(pe,_e,ft),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s),ue}function Lt(){var ue,pe,Oe,_e;if(ue=ne,I.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(q)),pe!==s){for(Oe=[],_e=Nt();_e!==s;)Oe.push(_e),_e=Nt();Oe!==s?(_e=nr(),_e!==s?(pe=x(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function nr(){var ue,pe,Oe,_e,Ve,ft;if(ue=ne,pe=Xr(),pe!==s){for(Oe=[],_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=Xr(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);_e!==s;)Oe.push(_e),_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=Xr(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);Oe!==s?(pe=d(pe,Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function Xr(){var ue,pe,Oe,_e;return ue=ne,pe=zt(),pe!==s?(Oe=Se(),Oe===s&&(Oe=null),Oe!==s?(_e=zt(),_e!==s?(pe=$(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s),ue}function we(){var ue,pe,Oe,_e;if(ue=ne,X.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(N)),pe!==s){for(Oe=[],_e=Nt();_e!==s;)Oe.push(_e),_e=Nt();Oe!==s?(_e=We(),_e!==s?(pe=x(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function We(){var ue,pe,Oe,_e,Ve,ft;if(ue=ne,pe=tt(),pe!==s){for(Oe=[],_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=tt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);_e!==s;)Oe.push(_e),_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=tt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);Oe!==s?(pe=d(pe,Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function tt(){var ue,pe,Oe,_e;return ue=ne,pe=zt(),pe!==s?(Oe=Se(),Oe===s&&(Oe=null),Oe!==s?(_e=zt(),_e!==s?(pe=Q(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s),ue}function qe(){var ue,pe,Oe,_e;if(ue=ne,F.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(L)),pe!==s){for(Oe=[],_e=Nt();_e!==s;)Oe.push(_e),_e=Nt();Oe!==s?(_e=nt(),_e!==s?(pe=x(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function nt(){var ue,pe,Oe,_e,Ve,ft;if(ue=ne,pe=zt(),pe!==s){for(Oe=[],_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=zt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);_e!==s;)Oe.push(_e),_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=zt(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);Oe!==s?(pe=d(pe,Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function Tt(){var ue,pe,Oe,_e;if(ue=ne,Y.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(ae)),pe!==s){for(Oe=[],_e=Nt();_e!==s;)Oe.push(_e),_e=Nt();Oe!==s?(_e=Ft(),_e!==s?(pe=x(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function Ft(){var ue,pe,Oe,_e,Ve,ft;if(ue=ne,pe=$t(),pe!==s){for(Oe=[],_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=$t(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);_e!==s;)Oe.push(_e),_e=ne,Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=$t(),ft!==s?(Ve=[Ve,ft],_e=Ve):(ne=_e,_e=s)):(ne=_e,_e=s);Oe!==s?(pe=d(pe,Oe),ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;return ue}function $t(){var ue,pe,Oe,_e,Ve,ft,oa,il,fs,zf,Yr,Wr;return ue=ne,pe=gr(),pe!==s?(Oe=Se(),Oe===s&&(Oe=null),Oe!==s?(_e=gr(),_e!==s?(Ve=Se(),Ve===s&&(Ve=null),Ve!==s?(ft=Vt(),ft!==s?(oa=Se(),oa!==s?(il=dr(),il!==s?(fs=Se(),fs===s&&(fs=null),fs!==s?(zf=dr(),zf!==s?(Yr=Se(),Yr===s&&(Yr=null),Yr!==s?(Wr=zt(),Wr!==s?(pe=re(pe,_e,ft,il,zf,Wr),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s),ue}function zt(){var ue,pe,Oe,_e;return ue=ne,pe=Vt(),pe!==s?(Oe=Se(),Oe===s&&(Oe=null),Oe!==s?(_e=Vt(),_e!==s?(pe=H(pe,_e),ue=pe):(ne=ue,ue=s)):(ne=ue,ue=s)):(ne=ue,ue=s),ue}function gr(){var ue,pe;return ue=ne,pe=ut(),pe===s&&(pe=Kt()),pe!==s&&(pe=se(pe)),ue=pe,ue}function Vt(){var ue,pe,Oe,_e;return ue=ne,pe=ne,Oe=St(),Oe===s&&(Oe=null),Oe!==s?(_e=ut(),_e!==s?(Oe=[Oe,_e],pe=Oe):(ne=pe,pe=s)):(ne=pe,pe=s),pe===s&&(pe=ne,Oe=St(),Oe===s&&(Oe=null),Oe!==s?(_e=Kt(),_e!==s?(Oe=[Oe,_e],pe=Oe):(ne=pe,pe=s)):(ne=pe,pe=s)),pe!==s&&(pe=le(pe)),ue=pe,ue}function dr(){var ue,pe;return ue=ne,ee.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(J)),pe!==s&&(pe=oe(pe)),ue=pe,ue}function Se(){var ue,pe,Oe,_e,Ve;if(ue=ne,pe=[],Oe=Nt(),Oe!==s)for(;Oe!==s;)pe.push(Oe),Oe=Nt();else pe=s;if(pe!==s)if(Oe=Ge(),Oe===s&&(Oe=null),Oe!==s){for(_e=[],Ve=Nt();Ve!==s;)_e.push(Ve),Ve=Nt();_e!==s?(pe=[pe,Oe,_e],ue=pe):(ne=ue,ue=s)}else ne=ue,ue=s;else ne=ue,ue=s;if(ue===s){if(ue=ne,pe=ne,Oe=Ge(),Oe!==s){for(_e=[],Ve=Nt();Ve!==s;)_e.push(Ve),Ve=Nt();_e!==s?(Oe=[Oe,_e],pe=Oe):(ne=pe,pe=s)}else ne=pe,pe=s;pe!==s&&(pe=me()),ue=pe}return ue}function Ge(){var ue;return a.charCodeAt(ne)===44?(ue=be,ne++):(ue=s,Pe(de)),ue}function ut(){var ue,pe,Oe,_e;return ue=ne,pe=ne,Oe=vt(),Oe!==s?(_e=_t(),_e===s&&(_e=null),_e!==s?(Oe=[Oe,_e],pe=Oe):(ne=pe,pe=s)):(ne=pe,pe=s),pe===s&&(pe=ne,Oe=Kt(),Oe!==s?(_e=_t(),_e!==s?(Oe=[Oe,_e],pe=Oe):(ne=pe,pe=s)):(ne=pe,pe=s)),pe!==s&&(pe=ge(pe)),ue=pe,ue}function vt(){var ue,pe,Oe,_e,Ve;return ue=ne,pe=ne,Oe=Kt(),Oe===s&&(Oe=null),Oe!==s?(a.charCodeAt(ne)===46?(_e=ce,ne++):(_e=s,Pe(Ce)),_e!==s?(Ve=Kt(),Ve!==s?(Oe=[Oe,_e,Ve],pe=Oe):(ne=pe,pe=s)):(ne=pe,pe=s)):(ne=pe,pe=s),pe===s&&(pe=ne,Oe=Kt(),Oe!==s?(a.charCodeAt(ne)===46?(_e=ce,ne++):(_e=s,Pe(Ce)),_e!==s?(Oe=[Oe,_e],pe=Oe):(ne=pe,pe=s)):(ne=pe,pe=s)),pe!==s&&(pe=ge(pe)),ue=pe,ue}function _t(){var ue,pe,Oe,_e,Ve;return ue=ne,pe=ne,Ee.test(a.charAt(ne))?(Oe=a.charAt(ne),ne++):(Oe=s,Pe(Me)),Oe!==s?(_e=St(),_e===s&&(_e=null),_e!==s?(Ve=Kt(),Ve!==s?(Oe=[Oe,_e,Ve],pe=Oe):(ne=pe,pe=s)):(ne=pe,pe=s)):(ne=pe,pe=s),pe!==s&&(pe=ge(pe)),ue=pe,ue}function St(){var ue;return he.test(a.charAt(ne))?(ue=a.charAt(ne),ne++):(ue=s,Pe(Ae)),ue}function Kt(){var ue,pe,Oe;if(ue=ne,pe=[],De.test(a.charAt(ne))?(Oe=a.charAt(ne),ne++):(Oe=s,Pe(Z)),Oe!==s)for(;Oe!==s;)pe.push(Oe),De.test(a.charAt(ne))?(Oe=a.charAt(ne),ne++):(Oe=s,Pe(Z));else pe=s;return pe!==s&&(pe=ie(pe)),ue=pe,ue}function Nt(){var ue,pe;return ue=ne,Te.test(a.charAt(ne))?(pe=a.charAt(ne),ne++):(pe=s,Pe(Ue)),pe!==s&&(pe=me()),ue=pe,ue}function Ir(ue,pe){if(!pe)return[ue];for(var Oe=[ue],_e=0,Ve=pe.length;_e<Ve;_e++)Oe[_e+1]=pe[_e][1];return Oe}var zr={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var Pr in zr)zr[Pr.toUpperCase()]=zr[Pr];function pi(ue,pe){pe||(pe=[{}]);for(var Oe=pe.length;Oe--;){var _e={code:ue,command:zr[ue]};ue==ue.toLowerCase()&&(_e.relative=!0);for(var Ve in pe[Oe])_e[Ve]=pe[Oe][Ve];pe[Oe]=_e}return pe}if(te=u(),te!==s&&ne===a.length)return te;throw te!==s&&ne<a.length&&Pe(Fe()),Le(U,B<a.length?a.charAt(B):null,B<a.length?Ze(B,B+1):Ze(B,B))}t.exports={SyntaxError:i,parse:n}}),z1e=wb((e,t)=>{var r=c$e().parse;r.parseSVG=r,r.makeAbsolute=i,t.exports=r;function i(n){var a,o={x:0,y:0},s={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return n.forEach(function(l){l.command==="moveto"&&(a=l),l.x0=o.x,l.y0=o.y;for(var u in s)u in l&&(l[u]+=l.relative?l[s[u]]:0);"x"in l||(l.x=o.x),"y"in l||(l.y=o.y),l.relative=!1,l.code=l.code.toUpperCase(),l.command=="closepath"&&(l.x=a.x,l.y=a.y),o=l}),n}}),d$e=wb((e,t)=>{t.exports=function(r,i){for(var n=r.split("."),a=i.split("."),o=0;o<3;o++){var s=Number(n[o]),l=Number(a[o]);if(s>l)return 1;if(l>s)return-1;if(!isNaN(s)&&isNaN(l))return 1;if(isNaN(s)&&!isNaN(l))return-1}return 0}}),bw="149",Cs={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},h$e=0,FK=1,f$e=2,eW=1,p$e=2,JC=3,Pf=0,ea=1,Fa=2,Cn=0,X0=1,NK=2,UK=3,VK=4,m$e=5,L1=100,g$e=101,v$e=102,kK=103,qK=104,y$e=200,b$e=201,_$e=202,w$e=203,B1e=204,L1e=205,x$e=206,S$e=207,C$e=208,E$e=209,M$e=210,P$e=0,T$e=1,A$e=2,XV=3,O$e=4,R$e=5,D$e=6,I$e=7,F1e=0,j$e=1,z$e=2,Cp=0,B$e=1,L$e=2,F$e=3,N$e=4,U$e=5,N1e=300,lb=301,ub=302,YV=303,KV=304,fP=306,Om=1e3,Di=1001,QV=1002,Dr=1003,WK=1004,lz=1005,Ar=1006,V$e=1007,q_=1008,Va=1009,k$e=1010,q$e=1011,U1e=1012,W$e=1013,Rm=1014,ci=1015,Gm=1016,G$e=1017,H$e=1018,Y0=1020,$$e=1021,zi=1023,X$e=1024,Y$e=1025,K0=1026,cb=1027,iR=1028,K$e=1029,nD=1030,Q$e=1031,V1e=1033,uz=33776,cz=33777,dz=33778,hz=33779,GK=35840,HK=35841,$K=35842,XK=35843,J$e=36196,YK=37492,KK=37496,QK=37808,JK=37809,ZK=37810,eQ=37811,tQ=37812,rQ=37813,iQ=37814,nQ=37815,aQ=37816,oQ=37817,sQ=37818,lQ=37819,uQ=37820,cQ=37821,fz=36492,Z$e=36283,dQ=36284,hQ=36285,fQ=36286,k1e=2200,q1e=2201,tW=2202,aD=2300,oD=2301,pz=2302,Q1=2400,J1=2401,sD=2402,rW=2500,e7e=2501,Tf=3e3,Er=3001,Zm=3200,W1e=3201,t7e=0,r7e=1,ip="srgb",lD="srgb-linear",mz=7680,i7e=519,JV=35044,n7e=35048,ZV="300 es",e6=1035,xa=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let i=0,n=r.length;i<n;i++)r[i].call(this,e);e.target=null}}},Ta=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],pQ=1234567,ME=Math.PI/180,pM=180/Math.PI;function Ws(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ta[e&255]+Ta[e>>8&255]+Ta[e>>16&255]+Ta[e>>24&255]+"-"+Ta[t&255]+Ta[t>>8&255]+"-"+Ta[t>>16&15|64]+Ta[t>>24&255]+"-"+Ta[r&63|128]+Ta[r>>8&255]+"-"+Ta[r>>16&255]+Ta[r>>24&255]+Ta[i&255]+Ta[i>>8&255]+Ta[i>>16&255]+Ta[i>>24&255]).toLowerCase()}function _n(e,t,r){return Math.max(t,Math.min(r,e))}function iW(e,t){return(e%t+t)%t}function a7e(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)}function o7e(e,t,r){return e!==t?(r-e)/(t-e):0}function PE(e,t,r){return(1-r)*e+r*t}function s7e(e,t,r,i){return PE(e,t,1-Math.exp(-r*i))}function l7e(e,t=1){return t-Math.abs(iW(e,t*2)-t)}function u7e(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function c7e(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function d7e(e,t){return e+Math.floor(Math.random()*(t-e+1))}function h7e(e,t){return e+Math.random()*(t-e)}function f7e(e){return e*(.5-Math.random())}function p7e(e){e!==void 0&&(pQ=e);let t=pQ+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function m7e(e){return e*ME}function g7e(e){return e*pM}function t6(e){return(e&e-1)===0&&e!==0}function G1e(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function uD(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function v7e(e,t,r,i,n){let a=Math.cos,o=Math.sin,s=a(r/2),l=o(r/2),u=a((t+i)/2),c=o((t+i)/2),d=a((t-i)/2),h=o((t-i)/2),f=a((i-t)/2),g=o((i-t)/2);switch(n){case"XYX":e.set(s*c,l*d,l*h,s*u);break;case"YZY":e.set(l*h,s*c,l*d,s*u);break;case"ZXZ":e.set(l*d,l*h,s*c,s*u);break;case"XZX":e.set(s*c,l*g,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*g,s*u);break;case"ZYZ":e.set(l*g,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function Dm(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function wi(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Ot=Object.freeze({__proto__:null,DEG2RAD:ME,RAD2DEG:pM,ceilPowerOfTwo:G1e,clamp:_n,damp:s7e,degToRad:m7e,denormalize:Dm,euclideanModulo:iW,floorPowerOfTwo:uD,generateUUID:Ws,inverseLerp:o7e,isPowerOfTwo:t6,lerp:PE,mapLinear:a7e,normalize:wi,pingpong:l7e,radToDeg:g7e,randFloat:h7e,randFloatSpread:f7e,randInt:d7e,seededRandom:p7e,setQuaternionFromProperEuler:v7e,smootherstep:c7e,smoothstep:u7e}),ze=class{constructor(e=0,t=0){ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*r-a*i+e.x,this.y=n*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},xn=class{constructor(){xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,n,a,o,s,l){let u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=n,u[5]=s,u[6]=r,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[3],s=r[6],l=r[1],u=r[4],c=r[7],d=r[2],h=r[5],f=r[8],g=i[0],p=i[3],m=i[6],y=i[1],b=i[4],w=i[7],x=i[2],S=i[5],C=i[8];return n[0]=a*g+o*y+s*x,n[3]=a*p+o*b+s*S,n[6]=a*m+o*w+s*C,n[1]=l*g+u*y+c*x,n[4]=l*p+u*b+c*S,n[7]=l*m+u*w+c*C,n[2]=d*g+h*y+f*x,n[5]=d*p+h*b+f*S,n[8]=d*m+h*w+f*C,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-r*n*u+r*o*s+i*n*l-i*a*s}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,d=o*s-u*n,h=l*n-a*s,f=t*c+r*d+i*h;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);let g=1/f;return e[0]=c*g,e[1]=(i*l-u*r)*g,e[2]=(o*r-i*a)*g,e[3]=d*g,e[4]=(u*t-i*s)*g,e[5]=(i*n-o*t)*g,e[6]=h*g,e[7]=(r*s-l*t)*g,e[8]=(a*t-r*n)*g,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,a,o){let s=Math.cos(n),l=Math.sin(n);return this.set(r*s,r*l,-r*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(gz.makeScale(e,t)),this}rotate(e){return this.premultiply(gz.makeRotation(-e)),this}translate(e,t){return this.premultiply(gz.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},gz=new xn;function H1e(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var y7e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function nA(e,t){return new y7e[e](t)}function mM(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function b7e(e,t,r){return new Promise(function(i,n){function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:n();break;case e.TIMEOUT_EXPIRED:setTimeout(a,r);break;default:i()}}setTimeout(a,r)})}function Q0(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function nR(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var vz={[ip]:{[lD]:Q0},[lD]:{[ip]:nR}},Ga={legacyMode:!0,get workingColorSpace(){return lD},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(vz[t]&&vz[t][r]!==void 0){let i=vz[t][r];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},$1e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},On={r:0,g:0,b:0},hl={h:0,s:0,l:0},aA={h:0,s:0,l:0};function yz(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function oA(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var er=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ip){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ga.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Ga.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ga.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Ga.workingColorSpace){if(e=iW(e,1),t=_n(t,0,1),r=_n(r,0,1),t===0)this.r=this.g=this.b=r;else{let n=r<=.5?r*(1+t):r+t-r*t,a=2*r-n;this.r=yz(a,n,e+1/3),this.g=yz(a,n,e),this.b=yz(a,n,e-1/3)}return Ga.toWorkingColorSpace(this,i),this}setStyle(e,t=ip){function r(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let n,a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,Ga.toWorkingColorSpace(this,t),r(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,Ga.toWorkingColorSpace(this,t),r(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let s=parseFloat(n[1])/360,l=parseFloat(n[2])/100,u=parseFloat(n[3])/100;return r(n[4]),this.setHSL(s,l,u,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=i[1],a=n.length;if(a===3)return this.r=parseInt(n.charAt(0)+n.charAt(0),16)/255,this.g=parseInt(n.charAt(1)+n.charAt(1),16)/255,this.b=parseInt(n.charAt(2)+n.charAt(2),16)/255,Ga.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(n.charAt(0)+n.charAt(1),16)/255,this.g=parseInt(n.charAt(2)+n.charAt(3),16)/255,this.b=parseInt(n.charAt(4)+n.charAt(5),16)/255,Ga.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=ip){let r=$1e[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Q0(e.r),this.g=Q0(e.g),this.b=Q0(e.b),this}copyLinearToSRGB(e){return this.r=nR(e.r),this.g=nR(e.g),this.b=nR(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ip){return Ga.fromWorkingColorSpace(oA(this,On),e),_n(On.r*255,0,255)<<16^_n(On.g*255,0,255)<<8^_n(On.b*255,0,255)<<0}getHexString(e=ip){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ga.workingColorSpace){Ga.fromWorkingColorSpace(oA(this,On),t);let r=On.r,i=On.g,n=On.b,a=Math.max(r,i,n),o=Math.min(r,i,n),s,l,u=(o+a)/2;if(o===a)s=0,l=0;else{let c=a-o;switch(l=u<=.5?c/(a+o):c/(2-a-o),a){case r:s=(i-n)/c+(i<n?6:0);break;case i:s=(n-r)/c+2;break;case n:s=(r-i)/c+4;break}s/=6}return e.h=s,e.s=l,e.l=u,e}getRGB(e,t=Ga.workingColorSpace){return Ga.fromWorkingColorSpace(oA(this,On),t),e.r=On.r,e.g=On.g,e.b=On.b,e}getStyle(e=ip){return Ga.fromWorkingColorSpace(oA(this,On),e),e!==ip?`color(${e} ${On.r} ${On.g} ${On.b})`:`rgb(${On.r*255|0},${On.g*255|0},${On.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(hl),hl.h+=e,hl.s+=t,hl.l+=r,this.setHSL(hl.h,hl.s,hl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(hl),e.getHSL(aA);let r=PE(hl.h,aA.h,t),i=PE(hl.s,aA.s,t),n=PE(hl.l,aA.l,t);return this.setHSL(r,i,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};er.NAMES=$1e;var n1,X1e=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{n1===void 0&&(n1=mM("canvas")),n1.width=e.width,n1.height=e.height;let r=n1.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=n1}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=mM("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),n=i.data;for(let a=0;a<n.length;a++)n[a]=Q0(n[a]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Q0(t[r]/255)*255):t[r]=Q0(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Y1e=class{constructor(e=null){this.isSource=!0,this.uuid=Ws(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let n;if(Array.isArray(i)){n=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?n.push(bz(i[a].image)):n.push(bz(i[a]))}else n=bz(i);r.url=n}return t||(e.images[this.uuid]=r),r}};function bz(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?X1e.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var _7e=0,Vi=class extends xa{constructor(e=Vi.DEFAULT_IMAGE,t=Vi.DEFAULT_MAPPING,r=Di,i=Di,n=Ar,a=q_,o=zi,s=Va,l=Vi.DEFAULT_ANISOTROPY,u=Tf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_7e++}),this.uuid=Ws(),this.name="",this.source=new Y1e(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new ze(0,0),this.repeat=new ze(1,1),this.center=new ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==N1e)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Om:e.x=e.x-Math.floor(e.x);break;case Di:e.x=e.x<0?0:1;break;case QV:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Om:e.y=e.y-Math.floor(e.y);break;case Di:e.y=e.y<0?0:1;break;case QV:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Vi.DEFAULT_IMAGE=null;Vi.DEFAULT_MAPPING=N1e;Vi.DEFAULT_ANISOTROPY=1;var hr=class{constructor(e=0,t=0,r=0,i=1){hr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*n,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*n,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*n,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],d=a[9],h=a[2],f=a[6],g=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-h)<.01&&Math.abs(d-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+h)<.1&&Math.abs(d+f)<.1&&Math.abs(o+c+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let m=(o+1)/2,y=(c+1)/2,b=(g+1)/2,w=(s+u)/4,x=(l+h)/4,S=(d+f)/4;return m>y&&m>b?m<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(m),i=w/r,n=x/r):y>b?y<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(y),r=w/i,n=S/i):b<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(b),r=x/n,i=S/n),this.set(r,i,n,t),this}let p=Math.sqrt((f-d)*(f-d)+(l-h)*(l-h)+(u-s)*(u-s));return Math.abs(p)<.001&&(p=1),this.x=(f-d)/p,this.y=(l-h)/p,this.z=(u-s)/p,this.w=Math.acos((o+c+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},kr=class extends xa{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new hr(0,0,e,t),this.scissorTest=!1,this.viewport=new hr(0,0,e,t);let i={width:e,height:t,depth:1};this.texture=new Vi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Ar,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Y1e(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},K1e=class extends Vi{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=Di,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},w7e=class extends Vi{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Dr,this.minFilter=Dr,this.wrapR=Di,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Q1e=class extends kr{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;let n=this.texture;this.texture=[];for(let a=0;a<r;a++)this.texture[a]=n.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,n=this.texture.length;i<n;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},ur=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,n,a,o){let s=r[i+0],l=r[i+1],u=r[i+2],c=r[i+3],d=n[a+0],h=n[a+1],f=n[a+2],g=n[a+3];if(o===0){e[t+0]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(o===1){e[t+0]=d,e[t+1]=h,e[t+2]=f,e[t+3]=g;return}if(c!==g||s!==d||l!==h||u!==f){let p=1-o,m=s*d+l*h+u*f+c*g,y=m>=0?1:-1,b=1-m*m;if(b>Number.EPSILON){let x=Math.sqrt(b),S=Math.atan2(x,m*y);p=Math.sin(p*S)/x,o=Math.sin(o*S)/x}let w=o*y;if(s=s*p+d*w,l=l*p+h*w,u=u*p+f*w,c=c*p+g*w,p===1-o){let x=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=x,l*=x,u*=x,c*=x}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,r,i,n,a){let o=r[i],s=r[i+1],l=r[i+2],u=r[i+3],c=n[a],d=n[a+1],h=n[a+2],f=n[a+3];return e[t]=o*f+u*c+s*h-l*d,e[t+1]=s*f+u*d+l*c-o*h,e[t+2]=l*f+u*h+o*d-s*c,e[t+3]=u*f-o*c-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let r=e._x,i=e._y,n=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(r/2),u=o(i/2),c=o(n/2),d=s(r/2),h=s(i/2),f=s(n/2);switch(a){case"XYZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"YXZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"ZXY":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"ZYX":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"YZX":this._x=d*u*c+l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c-d*h*f;break;case"XZY":this._x=d*u*c-l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],d=r+o+c;if(d>0){let h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(u-s)*h,this._y=(n-l)*h,this._z=(a-i)*h}else if(r>o&&r>c){let h=2*Math.sqrt(1+r-o-c);this._w=(u-s)/h,this._x=.25*h,this._y=(i+a)/h,this._z=(n+l)/h}else if(o>c){let h=2*Math.sqrt(1+o-r-c);this._w=(n-l)/h,this._x=(i+a)/h,this._y=.25*h,this._z=(s+u)/h}else{let h=2*Math.sqrt(1+c-r-o);this._w=(a-i)/h,this._x=(n+l)/h,this._y=(s+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_n(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+a*o+i*l-n*s,this._y=i*u+a*s+n*o-r*l,this._z=n*u+a*l+r*s-i*o,this._w=a*u-r*o-i*s-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,n=this._z,a=this._w,o=a*e._w+r*e._x+i*e._y+n*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=n,this;let s=1-o*o;if(s<=Number.EPSILON){let h=1-t;return this._w=h*a+t*this._w,this._x=h*r+t*this._x,this._y=h*i+t*this._y,this._z=h*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),u=Math.atan2(l,o),c=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=a*c+this._w*d,this._x=r*c+this._x*d,this._y=i*c+this._y*d,this._z=n*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(n),r*Math.cos(n),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},k=class{constructor(e=0,t=0,r=0){k.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mQ.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mQ.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,a=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*a,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*a,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*a,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*r,u=s*r+o*t-n*i,c=s*i+n*r-a*t,d=-n*t-a*r-o*i;return this.x=l*s+d*-n+u*-o-c*-a,this.y=u*s+d*-a+c*-n-l*-o,this.z=c*s+d*-o+l*-a-u*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-n*o,this.y=n*a-r*s,this.z=r*o-i*a,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return _z.copy(this).projectOnVector(e),this.sub(_z)}reflect(e){return this.sub(_z.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(_n(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},_z=new k,mQ=new ur,dn=class{constructor(e=new k(1/0,1/0,1/0),t=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.length;s<l;s+=3){let u=e[s],c=e[s+1],d=e[s+2];u<t&&(t=u),c<r&&(r=c),d<i&&(i=d),u>n&&(n=u),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,r,i),this.max.set(n,a,o),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,n=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.count;s<l;s++){let u=e.getX(s),c=e.getY(s),d=e.getZ(s);u<t&&(t=u),c<r&&(r=c),d<i&&(i=d),u>n&&(n=u),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,r,i),this.max.set(n,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=ny.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){let n=r.attributes.position;for(let a=0,o=n.count;a<o;a++)ny.fromBufferAttribute(n,a).applyMatrix4(e.matrixWorld),this.expandByPoint(ny)}else r.boundingBox===null&&r.computeBoundingBox(),wz.copy(r.boundingBox),wz.applyMatrix4(e.matrixWorld),this.union(wz);let i=e.children;for(let n=0,a=i.length;n<a;n++)this.expandByObject(i[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ny),ny.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Dx),sA.subVectors(this.max,Dx),a1.subVectors(e.a,Dx),o1.subVectors(e.b,Dx),s1.subVectors(e.c,Dx),Sg.subVectors(o1,a1),Cg.subVectors(s1,o1),ay.subVectors(a1,s1);let t=[0,-Sg.z,Sg.y,0,-Cg.z,Cg.y,0,-ay.z,ay.y,Sg.z,0,-Sg.x,Cg.z,0,-Cg.x,ay.z,0,-ay.x,-Sg.y,Sg.x,0,-Cg.y,Cg.x,0,-ay.y,ay.x,0];return!xz(t,a1,o1,s1,sA)||(t=[1,0,0,0,1,0,0,0,1],!xz(t,a1,o1,s1,sA))?!1:(lA.crossVectors(Sg,Cg),t=[lA.x,lA.y,lA.z],xz(t,a1,o1,s1,sA))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ny.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(ny).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(em[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),em[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),em[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),em[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),em[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),em[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),em[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),em[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(em),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},em=[new k,new k,new k,new k,new k,new k,new k,new k],ny=new k,wz=new dn,a1=new k,o1=new k,s1=new k,Sg=new k,Cg=new k,ay=new k,Dx=new k,sA=new k,lA=new k,oy=new k;function xz(e,t,r,i,n){for(let a=0,o=e.length-3;a<=o;a+=3){oy.fromArray(e,a);let s=n.x*Math.abs(oy.x)+n.y*Math.abs(oy.y)+n.z*Math.abs(oy.z),l=t.dot(oy),u=r.dot(oy),c=i.dot(oy);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}var x7e=new dn,Ix=new k,Sz=new k,Lo=class{constructor(t=new k,r=-1){this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){let i=this.center;r!==void 0?i.copy(r):x7e.setFromPoints(t).getCenter(i);let n=0;for(let a=0,o=t.length;a<o;a++)n=Math.max(n,i.distanceToSquared(t[a]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){let i=this.center.distanceToSquared(t);return r.copy(t),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Ix.subVectors(t,this.center);let r=Ix.lengthSq();if(r>this.radius*this.radius){let i=Math.sqrt(r),n=(i-this.radius)*.5;this.center.addScaledVector(Ix,n/i),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Sz.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Ix.copy(t.center).add(Sz)),this.expandByPoint(Ix.copy(t.center).sub(Sz))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},tm=new k,Cz=new k,uA=new k,Eg=new k,Ez=new k,cA=new k,Mz=new k,_w=class{constructor(e=new k,t=new k(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,tm)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=tm.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(tm.copy(this.direction).multiplyScalar(t).add(this.origin),tm.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Cz.copy(e).add(t).multiplyScalar(.5),uA.copy(t).sub(e).normalize(),Eg.copy(this.origin).sub(Cz);let n=e.distanceTo(t)*.5,a=-this.direction.dot(uA),o=Eg.dot(this.direction),s=-Eg.dot(uA),l=Eg.lengthSq(),u=Math.abs(1-a*a),c,d,h,f;if(u>0)if(c=a*s-o,d=a*o-s,f=n*u,c>=0)if(d>=-f)if(d<=f){let g=1/u;c*=g,d*=g,h=c*(c+a*d+2*o)+d*(a*c+d+2*s)+l}else d=n,c=Math.max(0,-(a*d+o)),h=-c*c+d*(d+2*s)+l;else d=-n,c=Math.max(0,-(a*d+o)),h=-c*c+d*(d+2*s)+l;else d<=-f?(c=Math.max(0,-(-a*n+o)),d=c>0?-n:Math.min(Math.max(-n,-s),n),h=-c*c+d*(d+2*s)+l):d<=f?(c=0,d=Math.min(Math.max(-n,-s),n),h=d*(d+2*s)+l):(c=Math.max(0,-(a*n+o)),d=c>0?n:Math.min(Math.max(-n,-s),n),h=-c*c+d*(d+2*s)+l);else d=a>0?-n:n,c=Math.max(0,-(a*d+o)),h=-c*c+d*(d+2*s)+l;return r&&r.copy(this.direction).multiplyScalar(c).add(this.origin),i&&i.copy(uA).multiplyScalar(d).add(Cz),h}intersectSphere(e,t){tm.subVectors(e.center,this.origin);let r=tm.dot(this.direction),i=tm.dot(tm)-r*r,n=e.radius*e.radius;if(i>n)return null;let a=Math.sqrt(n-i),o=r-a,s=r+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,n,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(r=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(r=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),u>=0?(n=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(n=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),r>a||n>i||((n>r||isNaN(r))&&(r=n),(a<i||isNaN(i))&&(i=a),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),r>s||o>i)||((o>r||r!==r)&&(r=o),(s<i||i!==i)&&(i=s),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,tm)!==null}intersectTriangle(e,t,r,i,n){Ez.subVectors(t,e),cA.subVectors(r,e),Mz.crossVectors(Ez,cA);let a=this.direction.dot(Mz),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Eg.subVectors(this.origin,e);let s=o*this.direction.dot(cA.crossVectors(Eg,cA));if(s<0)return null;let l=o*this.direction.dot(Ez.cross(Eg));if(l<0||s+l>a)return null;let u=-o*Eg.dot(Mz);return u<0?null:this.at(u/a,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},dt=class{constructor(){dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,r,i,n,a,o,s,l,u,c,d,h,f,g,p,m){let y=this.elements;return y[0]=t,y[4]=r,y[8]=i,y[12]=n,y[1]=a,y[5]=o,y[9]=s,y[13]=l,y[2]=u,y[6]=c,y[10]=d,y[14]=h,y[3]=f,y[7]=g,y[11]=p,y[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new dt().fromArray(this.elements)}copy(t){let r=this.elements,i=t.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this}copyPosition(t){let r=this.elements,i=t.elements;return r[12]=i[12],r[13]=i[13],r[14]=i[14],this}setFromMatrix3(t){let r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,i){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,r,i){return this.set(t.x,r.x,i.x,0,t.y,r.y,i.y,0,t.z,r.z,i.z,0,0,0,0,1),this}extractRotation(t){let r=this.elements,i=t.elements,n=1/l1.setFromMatrixColumn(t,0).length(),a=1/l1.setFromMatrixColumn(t,1).length(),o=1/l1.setFromMatrixColumn(t,2).length();return r[0]=i[0]*n,r[1]=i[1]*n,r[2]=i[2]*n,r[3]=0,r[4]=i[4]*a,r[5]=i[5]*a,r[6]=i[6]*a,r[7]=0,r[8]=i[8]*o,r[9]=i[9]*o,r[10]=i[10]*o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){let r=this.elements,i=t.x,n=t.y,a=t.z,o=Math.cos(i),s=Math.sin(i),l=Math.cos(n),u=Math.sin(n),c=Math.cos(a),d=Math.sin(a);if(t.order==="XYZ"){let h=o*c,f=o*d,g=s*c,p=s*d;r[0]=l*c,r[4]=-l*d,r[8]=u,r[1]=f+g*u,r[5]=h-p*u,r[9]=-s*l,r[2]=p-h*u,r[6]=g+f*u,r[10]=o*l}else if(t.order==="YXZ"){let h=l*c,f=l*d,g=u*c,p=u*d;r[0]=h+p*s,r[4]=g*s-f,r[8]=o*u,r[1]=o*d,r[5]=o*c,r[9]=-s,r[2]=f*s-g,r[6]=p+h*s,r[10]=o*l}else if(t.order==="ZXY"){let h=l*c,f=l*d,g=u*c,p=u*d;r[0]=h-p*s,r[4]=-o*d,r[8]=g+f*s,r[1]=f+g*s,r[5]=o*c,r[9]=p-h*s,r[2]=-o*u,r[6]=s,r[10]=o*l}else if(t.order==="ZYX"){let h=o*c,f=o*d,g=s*c,p=s*d;r[0]=l*c,r[4]=g*u-f,r[8]=h*u+p,r[1]=l*d,r[5]=p*u+h,r[9]=f*u-g,r[2]=-u,r[6]=s*l,r[10]=o*l}else if(t.order==="YZX"){let h=o*l,f=o*u,g=s*l,p=s*u;r[0]=l*c,r[4]=p-h*d,r[8]=g*d+f,r[1]=d,r[5]=o*c,r[9]=-s*c,r[2]=-u*c,r[6]=f*d+g,r[10]=h-p*d}else if(t.order==="XZY"){let h=o*l,f=o*u,g=s*l,p=s*u;r[0]=l*c,r[4]=-d,r[8]=u*c,r[1]=h*d+p,r[5]=o*c,r[9]=f*d-g,r[2]=g*d-f,r[6]=s*c,r[10]=p*d+h}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(S7e,t,C7e)}lookAt(t,r,i){let n=this.elements;return $o.subVectors(t,r),$o.lengthSq()===0&&($o.z=1),$o.normalize(),Mg.crossVectors(i,$o),Mg.lengthSq()===0&&(Math.abs(i.z)===1?$o.x+=1e-4:$o.z+=1e-4,$o.normalize(),Mg.crossVectors(i,$o)),Mg.normalize(),dA.crossVectors($o,Mg),n[0]=Mg.x,n[4]=dA.x,n[8]=$o.x,n[1]=Mg.y,n[5]=dA.y,n[9]=$o.y,n[2]=Mg.z,n[6]=dA.z,n[10]=$o.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){let i=t.elements,n=r.elements,a=this.elements,o=i[0],s=i[4],l=i[8],u=i[12],c=i[1],d=i[5],h=i[9],f=i[13],g=i[2],p=i[6],m=i[10],y=i[14],b=i[3],w=i[7],x=i[11],S=i[15],C=n[0],T=n[4],M=n[8],A=n[12],P=n[1],O=n[5],j=n[9],D=n[13],I=n[2],q=n[6],$=n[10],X=n[14],N=n[3],Q=n[7],F=n[11],L=n[15];return a[0]=o*C+s*P+l*I+u*N,a[4]=o*T+s*O+l*q+u*Q,a[8]=o*M+s*j+l*$+u*F,a[12]=o*A+s*D+l*X+u*L,a[1]=c*C+d*P+h*I+f*N,a[5]=c*T+d*O+h*q+f*Q,a[9]=c*M+d*j+h*$+f*F,a[13]=c*A+d*D+h*X+f*L,a[2]=g*C+p*P+m*I+y*N,a[6]=g*T+p*O+m*q+y*Q,a[10]=g*M+p*j+m*$+y*F,a[14]=g*A+p*D+m*X+y*L,a[3]=b*C+w*P+x*I+S*N,a[7]=b*T+w*O+x*q+S*Q,a[11]=b*M+w*j+x*$+S*F,a[15]=b*A+w*D+x*X+S*L,this}multiplyScalar(t){let r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){let t=this.elements,r=t[0],i=t[4],n=t[8],a=t[12],o=t[1],s=t[5],l=t[9],u=t[13],c=t[2],d=t[6],h=t[10],f=t[14],g=t[3],p=t[7],m=t[11],y=t[15];return g*(+a*l*d-n*u*d-a*s*h+i*u*h+n*s*f-i*l*f)+p*(+r*l*f-r*u*h+a*o*h-n*o*f+n*u*c-a*l*c)+m*(+r*u*d-r*s*f-a*o*d+i*o*f+a*s*c-i*u*c)+y*(-n*s*c-r*l*d+r*s*h+n*o*d-i*o*h+i*l*c)}transpose(){let t=this.elements,r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,i){let n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=r,n[14]=i),this}invert(){let t=this.elements,r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],g=t[12],p=t[13],m=t[14],y=t[15],b=d*m*u-p*h*u+p*l*f-s*m*f-d*l*y+s*h*y,w=g*h*u-c*m*u-g*l*f+o*m*f+c*l*y-o*h*y,x=c*p*u-g*d*u+g*s*f-o*p*f-c*s*y+o*d*y,S=g*d*l-c*p*l-g*s*h+o*p*h+c*s*m-o*d*m,C=r*b+i*w+n*x+a*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let T=1/C;return t[0]=b*T,t[1]=(p*h*a-d*m*a-p*n*f+i*m*f+d*n*y-i*h*y)*T,t[2]=(s*m*a-p*l*a+p*n*u-i*m*u-s*n*y+i*l*y)*T,t[3]=(d*l*a-s*h*a-d*n*u+i*h*u+s*n*f-i*l*f)*T,t[4]=w*T,t[5]=(c*m*a-g*h*a+g*n*f-r*m*f-c*n*y+r*h*y)*T,t[6]=(g*l*a-o*m*a-g*n*u+r*m*u+o*n*y-r*l*y)*T,t[7]=(o*h*a-c*l*a+c*n*u-r*h*u-o*n*f+r*l*f)*T,t[8]=x*T,t[9]=(g*d*a-c*p*a-g*i*f+r*p*f+c*i*y-r*d*y)*T,t[10]=(o*p*a-g*s*a+g*i*u-r*p*u-o*i*y+r*s*y)*T,t[11]=(c*s*a-o*d*a-c*i*u+r*d*u+o*i*f-r*s*f)*T,t[12]=S*T,t[13]=(c*p*n-g*d*n+g*i*h-r*p*h-c*i*m+r*d*m)*T,t[14]=(g*s*n-o*p*n-g*i*l+r*p*l+o*i*m-r*s*m)*T,t[15]=(o*d*n-c*s*n+c*i*l-r*d*l-o*i*h+r*s*h)*T,this}scale(t){let r=this.elements,i=t.x,n=t.y,a=t.z;return r[0]*=i,r[4]*=n,r[8]*=a,r[1]*=i,r[5]*=n,r[9]*=a,r[2]*=i,r[6]*=n,r[10]*=a,r[3]*=i,r[7]*=n,r[11]*=a,this}getMaxScaleOnAxis(){let t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,i,n))}makeTranslation(t,r,i){return this.set(1,0,0,t,0,1,0,r,0,0,1,i,0,0,0,1),this}makeRotationX(t){let r=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1),this}makeRotationY(t){let r=Math.cos(t),i=Math.sin(t);return this.set(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1),this}makeRotationZ(t){let r=Math.cos(t),i=Math.sin(t);return this.set(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){let i=Math.cos(r),n=Math.sin(r),a=1-i,o=t.x,s=t.y,l=t.z,u=a*o,c=a*s;return this.set(u*o+i,u*s-n*l,u*l+n*s,0,u*s+n*l,c*s+i,c*l-n*o,0,u*l-n*s,c*l+n*o,a*l*l+i,0,0,0,0,1),this}makeScale(t,r,i){return this.set(t,0,0,0,0,r,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,r,i,n,a,o){return this.set(1,i,a,0,t,1,o,0,r,n,1,0,0,0,0,1),this}compose(t,r,i){let n=this.elements,a=r._x,o=r._y,s=r._z,l=r._w,u=a+a,c=o+o,d=s+s,h=a*u,f=a*c,g=a*d,p=o*c,m=o*d,y=s*d,b=l*u,w=l*c,x=l*d,S=i.x,C=i.y,T=i.z;return n[0]=(1-(p+y))*S,n[1]=(f+x)*S,n[2]=(g-w)*S,n[3]=0,n[4]=(f-x)*C,n[5]=(1-(h+y))*C,n[6]=(m+b)*C,n[7]=0,n[8]=(g+w)*T,n[9]=(m-b)*T,n[10]=(1-(h+p))*T,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,r,i){let n=this.elements,a=l1.set(n[0],n[1],n[2]).length(),o=l1.set(n[4],n[5],n[6]).length(),s=l1.set(n[8],n[9],n[10]).length();this.determinant()<0&&(a=-a),t.x=n[12],t.y=n[13],t.z=n[14],fl.copy(this);let l=1/a,u=1/o,c=1/s;return fl.elements[0]*=l,fl.elements[1]*=l,fl.elements[2]*=l,fl.elements[4]*=u,fl.elements[5]*=u,fl.elements[6]*=u,fl.elements[8]*=c,fl.elements[9]*=c,fl.elements[10]*=c,r.setFromRotationMatrix(fl),i.x=a,i.y=o,i.z=s,this}makePerspective(t,r,i,n,a,o){let s=this.elements,l=2*a/(r-t),u=2*a/(i-n),c=(r+t)/(r-t),d=(i+n)/(i-n),h=-(o+a)/(o-a),f=-2*o*a/(o-a);return s[0]=l,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=u,s[9]=d,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,r,i,n,a,o){let s=this.elements,l=1/(r-t),u=1/(i-n),c=1/(o-a),d=(r+t)*l,h=(i+n)*u,f=(o+a)*c;return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-d,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){let r=this.elements,i=t.elements;for(let n=0;n<16;n++)if(r[n]!==i[n])return!1;return!0}fromArray(t,r=0){for(let i=0;i<16;i++)this.elements[i]=t[i+r];return this}toArray(t=[],r=0){let i=this.elements;return t[r]=i[0],t[r+1]=i[1],t[r+2]=i[2],t[r+3]=i[3],t[r+4]=i[4],t[r+5]=i[5],t[r+6]=i[6],t[r+7]=i[7],t[r+8]=i[8],t[r+9]=i[9],t[r+10]=i[10],t[r+11]=i[11],t[r+12]=i[12],t[r+13]=i[13],t[r+14]=i[14],t[r+15]=i[15],t}},l1=new k,fl=new dt,S7e=new k(0,0,0),C7e=new k(1,1,1),Mg=new k,dA=new k,$o=new k,gQ=new dt,vQ=new ur,Bn=class{constructor(e=0,t=0,r=0,i=Bn.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],a=i[4],o=i[8],s=i[1],l=i[5],u=i[9],c=i[2],d=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(_n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-_n(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,n),this._z=0);break;case"ZXY":this._x=Math.asin(_n(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,n));break;case"ZYX":this._y=Math.asin(-_n(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,n)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(_n(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,n)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-_n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,n)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return gQ.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gQ,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return vQ.setFromEuler(this),this.setFromQuaternion(vQ,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Bn.DEFAULT_ORDER="XYZ";var nW=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},E7e=0,yQ=new k,u1=new ur,rm=new dt,hA=new k,jx=new k,M7e=new k,P7e=new ur,bQ=new k(1,0,0),_Q=new k(0,1,0),wQ=new k(0,0,1),T7e={type:"added"},xQ={type:"removed"},li=class extends xa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:E7e++}),this.uuid=Ws(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=li.DEFAULT_UP.clone();let e=new k,t=new Bn,r=new ur,i=new k(1,1,1);function n(){r.setFromEuler(t,!1)}function a(){t.setFromQuaternion(r,void 0,!1)}t._onChange(n),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new dt},normalMatrix:{value:new xn}}),this.matrix=new dt,this.matrixWorld=new dt,this.matrixAutoUpdate=li.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new nW,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return u1.setFromAxisAngle(e,t),this.quaternion.multiply(u1),this}rotateOnWorldAxis(e,t){return u1.setFromAxisAngle(e,t),this.quaternion.premultiply(u1),this}rotateX(e){return this.rotateOnAxis(bQ,e)}rotateY(e){return this.rotateOnAxis(_Q,e)}rotateZ(e){return this.rotateOnAxis(wQ,e)}translateOnAxis(e,t){return yQ.copy(e).applyQuaternion(this.quaternion),this.position.add(yQ.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(bQ,e)}translateY(e){return this.translateOnAxis(_Q,e)}translateZ(e){return this.translateOnAxis(wQ,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(rm.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?hA.copy(e):hA.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),jx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rm.lookAt(jx,hA,this.up):rm.lookAt(hA,jx,this.up),this.quaternion.setFromRotationMatrix(rm),i&&(rm.extractRotation(i.matrixWorld),u1.setFromRotationMatrix(rm),this.quaternion.premultiply(u1.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(T7e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(xQ)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(xQ)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),rm.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),rm.multiply(e.parent.matrixWorld)),e.applyMatrix4(rm),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let n=this.children[r].getObjectByProperty(e,t);if(n!==void 0)return n}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,n=this.children.length;i<n;i++){let a=this.children[i].getObjectsByProperty(e,t);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jx,e,M7e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jx,P7e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++){let n=t[r];(n.matrixWorldAutoUpdate===!0||e===!0)&&n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let n=0,a=i.length;n<a;n++){let o=i[n];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function n(o,s){return o[s.uuid]===void 0&&(o[s.uuid]=s.toJSON(e)),s.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){let s=o.shapes;if(Array.isArray(s))for(let l=0,u=s.length;l<u;l++){let c=s[l];n(e.shapes,c)}else n(e.shapes,s)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let o=[];for(let s=0,l=this.material.length;s<l;s++)o.push(n(e.materials,this.material[s]));i.material=o}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){let s=this.animations[o];i.animations.push(n(e.animations,s))}}if(t){let o=a(e.geometries),s=a(e.materials),l=a(e.textures),u=a(e.images),c=a(e.shapes),d=a(e.skeletons),h=a(e.animations),f=a(e.nodes);o.length>0&&(r.geometries=o),s.length>0&&(r.materials=s),l.length>0&&(r.textures=l),u.length>0&&(r.images=u),c.length>0&&(r.shapes=c),d.length>0&&(r.skeletons=d),h.length>0&&(r.animations=h),f.length>0&&(r.nodes=f)}return r.object=i,r;function a(o){let s=[];for(let l in o){let u=o[l];delete u.metadata,s.push(u)}return s}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};li.DEFAULT_UP=new k(0,1,0);li.DEFAULT_MATRIX_AUTO_UPDATE=!0;li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var pl=new k,im=new k,Pz=new k,nm=new k,c1=new k,d1=new k,SQ=new k,Tz=new k,Az=new k,Oz=new k,va=class{constructor(t=new k,r=new k,i=new k){this.a=t,this.b=r,this.c=i}static getNormal(t,r,i,n){n.subVectors(i,r),pl.subVectors(t,r),n.cross(pl);let a=n.lengthSq();return a>0?n.multiplyScalar(1/Math.sqrt(a)):n.set(0,0,0)}static getBarycoord(t,r,i,n,a){pl.subVectors(n,r),im.subVectors(i,r),Pz.subVectors(t,r);let o=pl.dot(pl),s=pl.dot(im),l=pl.dot(Pz),u=im.dot(im),c=im.dot(Pz),d=o*u-s*s;if(d===0)return a.set(-2,-1,-1);let h=1/d,f=(u*l-s*c)*h,g=(o*c-s*l)*h;return a.set(1-f-g,g,f)}static containsPoint(t,r,i,n){return this.getBarycoord(t,r,i,n,nm),nm.x>=0&&nm.y>=0&&nm.x+nm.y<=1}static getUV(t,r,i,n,a,o,s,l){return this.getBarycoord(t,r,i,n,nm),l.set(0,0),l.addScaledVector(a,nm.x),l.addScaledVector(o,nm.y),l.addScaledVector(s,nm.z),l}static isFrontFacing(t,r,i,n){return pl.subVectors(i,r),im.subVectors(t,r),pl.cross(im).dot(n)<0}set(t,r,i){return this.a.copy(t),this.b.copy(r),this.c.copy(i),this}setFromPointsAndIndices(t,r,i,n){return this.a.copy(t[r]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,r,i,n){return this.a.fromBufferAttribute(t,r),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return pl.subVectors(this.c,this.b),im.subVectors(this.a,this.b),pl.cross(im).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return va.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return va.getBarycoord(t,this.a,this.b,this.c,r)}getUV(t,r,i,n,a){return va.getUV(t,this.a,this.b,this.c,r,i,n,a)}containsPoint(t){return va.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return va.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){let i=this.a,n=this.b,a=this.c,o,s;c1.subVectors(n,i),d1.subVectors(a,i),Tz.subVectors(t,i);let l=c1.dot(Tz),u=d1.dot(Tz);if(l<=0&&u<=0)return r.copy(i);Az.subVectors(t,n);let c=c1.dot(Az),d=d1.dot(Az);if(c>=0&&d<=c)return r.copy(n);let h=l*d-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),r.copy(i).addScaledVector(c1,o);Oz.subVectors(t,a);let f=c1.dot(Oz),g=d1.dot(Oz);if(g>=0&&f<=g)return r.copy(a);let p=f*u-l*g;if(p<=0&&u>=0&&g<=0)return s=u/(u-g),r.copy(i).addScaledVector(d1,s);let m=c*g-f*d;if(m<=0&&d-c>=0&&f-g>=0)return SQ.subVectors(a,n),s=(d-c)/(d-c+(f-g)),r.copy(n).addScaledVector(SQ,s);let y=1/(m+p+h);return o=p*y,s=h*y,r.copy(i).addScaledVector(c1,o).addScaledVector(d1,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},A7e=0,pP=class extends xa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:A7e++}),this.uuid=Ws(),this.name="",this.type="Material",this.blending=X0,this.side=Pf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=B1e,this.blendDst=L1e,this.blendEquation=L1,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=XV,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=i7e,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=mz,this.stencilZFail=mz,this.stencilZPass=mz,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==X0&&(r.blending=this.blending),this.side!==Pf&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(n){let a=[];for(let o in n){let s=n[o];delete s.metadata,a.push(s)}return a}if(t){let n=i(e.textures),a=i(e.images);n.length>0&&(r.textures=n),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Hm=class extends pP{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new er(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=F1e,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},gn=new k,fA=new ze,tr=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=JV,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)fA.fromBufferAttribute(this,t),fA.applyMatrix3(e),this.setXY(t,fA.x,fA.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)gn.fromBufferAttribute(this,t),gn.applyMatrix3(e),this.setXYZ(t,gn.x,gn.y,gn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)gn.fromBufferAttribute(this,t),gn.applyMatrix4(e),this.setXYZ(t,gn.x,gn.y,gn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)gn.fromBufferAttribute(this,t),gn.applyNormalMatrix(e),this.setXYZ(t,gn.x,gn.y,gn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)gn.fromBufferAttribute(this,t),gn.transformDirection(e),this.setXYZ(t,gn.x,gn.y,gn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Dm(t,this.array)),t}setX(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Dm(t,this.array)),t}setY(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Dm(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Dm(t,this.array)),t}setW(e,t){return this.normalized&&(t=wi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),r=wi(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),r=wi(r,this.array),i=wi(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.normalized&&(t=wi(t,this.array),r=wi(r,this.array),i=wi(i,this.array),n=wi(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==JV&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},J1e=class extends tr{constructor(e,t,r){super(new Uint16Array(e),t,r)}},p_=class extends tr{constructor(e,t,r){super(new Uint32Array(e),t,r)}},Pt=class extends tr{constructor(e,t,r){super(new Float32Array(e),t,r)}},O7e=0,Es=new dt,Rz=new li,h1=new k,Xo=new dn,zx=new dn,Gn=new k,Wt=class extends xa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:O7e++}),this.uuid=Ws(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(H1e(e)?p_:J1e)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let n=new xn().getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Es.makeRotationFromQuaternion(e),this.applyMatrix4(Es),this}rotateX(e){return Es.makeRotationX(e),this.applyMatrix4(Es),this}rotateY(e){return Es.makeRotationY(e),this.applyMatrix4(Es),this}rotateZ(e){return Es.makeRotationZ(e),this.applyMatrix4(Es),this}translate(e,t,r){return Es.makeTranslation(e,t,r),this.applyMatrix4(Es),this}scale(e,t,r){return Es.makeScale(e,t,r),this.applyMatrix4(Es),this}lookAt(e){return Rz.lookAt(e),Rz.updateMatrix(),this.applyMatrix4(Rz.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(h1).negate(),this.translate(h1.x,h1.y,h1.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Pt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new dn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let n=t[r];Xo.setFromBufferAttribute(n),this.morphTargetsRelative?(Gn.addVectors(this.boundingBox.min,Xo.min),this.boundingBox.expandByPoint(Gn),Gn.addVectors(this.boundingBox.max,Xo.max),this.boundingBox.expandByPoint(Gn)):(this.boundingBox.expandByPoint(Xo.min),this.boundingBox.expandByPoint(Xo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Lo);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new k,1/0);return}if(e){let r=this.boundingSphere.center;if(Xo.setFromBufferAttribute(e),t)for(let n=0,a=t.length;n<a;n++){let o=t[n];zx.setFromBufferAttribute(o),this.morphTargetsRelative?(Gn.addVectors(Xo.min,zx.min),Xo.expandByPoint(Gn),Gn.addVectors(Xo.max,zx.max),Xo.expandByPoint(Gn)):(Xo.expandByPoint(zx.min),Xo.expandByPoint(zx.max))}Xo.getCenter(r);let i=0;for(let n=0,a=e.count;n<a;n++)Gn.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(Gn));if(t)for(let n=0,a=t.length;n<a;n++){let o=t[n],s=this.morphTargetsRelative;for(let l=0,u=o.count;l<u;l++)Gn.fromBufferAttribute(o,l),s&&(h1.fromBufferAttribute(e,l),Gn.add(h1)),i=Math.max(i,r.distanceToSquared(Gn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,i=t.position.array,n=t.normal.array,a=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new tr(new Float32Array(4*o),4));let s=this.getAttribute("tangent").array,l=[],u=[];for(let A=0;A<o;A++)l[A]=new k,u[A]=new k;let c=new k,d=new k,h=new k,f=new ze,g=new ze,p=new ze,m=new k,y=new k;function b(A,P,O){c.fromArray(i,A*3),d.fromArray(i,P*3),h.fromArray(i,O*3),f.fromArray(a,A*2),g.fromArray(a,P*2),p.fromArray(a,O*2),d.sub(c),h.sub(c),g.sub(f),p.sub(f);let j=1/(g.x*p.y-p.x*g.y);!isFinite(j)||(m.copy(d).multiplyScalar(p.y).addScaledVector(h,-g.y).multiplyScalar(j),y.copy(h).multiplyScalar(g.x).addScaledVector(d,-p.x).multiplyScalar(j),l[A].add(m),l[P].add(m),l[O].add(m),u[A].add(y),u[P].add(y),u[O].add(y))}let w=this.groups;w.length===0&&(w=[{start:0,count:r.length}]);for(let A=0,P=w.length;A<P;++A){let O=w[A],j=O.start,D=O.count;for(let I=j,q=j+D;I<q;I+=3)b(r[I+0],r[I+1],r[I+2])}let x=new k,S=new k,C=new k,T=new k;function M(A){C.fromArray(n,A*3),T.copy(C);let P=l[A];x.copy(P),x.sub(C.multiplyScalar(C.dot(P))).normalize(),S.crossVectors(T,P);let O=S.dot(u[A])<0?-1:1;s[A*4]=x.x,s[A*4+1]=x.y,s[A*4+2]=x.z,s[A*4+3]=O}for(let A=0,P=w.length;A<P;++A){let O=w[A],j=O.start,D=O.count;for(let I=j,q=j+D;I<q;I+=3)M(r[I+0]),M(r[I+1]),M(r[I+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new tr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,h=r.count;d<h;d++)r.setXYZ(d,0,0,0);let i=new k,n=new k,a=new k,o=new k,s=new k,l=new k,u=new k,c=new k;if(e)for(let d=0,h=e.count;d<h;d+=3){let f=e.getX(d+0),g=e.getX(d+1),p=e.getX(d+2);i.fromBufferAttribute(t,f),n.fromBufferAttribute(t,g),a.fromBufferAttribute(t,p),u.subVectors(a,n),c.subVectors(i,n),u.cross(c),o.fromBufferAttribute(r,f),s.fromBufferAttribute(r,g),l.fromBufferAttribute(r,p),o.add(u),s.add(u),l.add(u),r.setXYZ(f,o.x,o.y,o.z),r.setXYZ(g,s.x,s.y,s.z),r.setXYZ(p,l.x,l.y,l.z)}else for(let d=0,h=t.count;d<h;d+=3)i.fromBufferAttribute(t,d+0),n.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),u.subVectors(a,n),c.subVectors(i,n),u.cross(c),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Gn.fromBufferAttribute(e,t),Gn.normalize(),e.setXYZ(t,Gn.x,Gn.y,Gn.z)}toNonIndexed(){function e(o,s){let l=o.array,u=o.itemSize,c=o.normalized,d=new l.constructor(s.length*u),h=0,f=0;for(let g=0,p=s.length;g<p;g++){o.isInterleavedBufferAttribute?h=s[g]*o.data.stride+o.offset:h=s[g]*u;for(let m=0;m<u;m++)d[f++]=l[h++]}return new tr(d,u,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Wt,r=this.index.array,i=this.attributes;for(let o in i){let s=i[o],l=e(s,r);t.setAttribute(o,l)}let n=this.morphAttributes;for(let o in n){let s=[],l=n[o];for(let u=0,c=l.length;u<c;u++){let d=l[u],h=e(d,r);s.push(h)}t.morphAttributes[o]=s}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let o=0,s=a.length;o<s;o++){let l=a[o];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let s=this.parameters;for(let l in s)s[l]!==void 0&&(e[l]=s[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let s in r){let l=r[s];e.data.attributes[s]=l.toJSON(e.data)}let i={},n=!1;for(let s in this.morphAttributes){let l=this.morphAttributes[s],u=[];for(let c=0,d=l.length;c<d;c++){let h=l[c];u.push(h.toJSON(e.data))}u.length>0&&(i[s]=u,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let u=i[l];this.setAttribute(l,u.clone(t))}let n=e.morphAttributes;for(let l in n){let u=[],c=n[l];for(let d=0,h=c.length;d<h;d++)u.push(c[d].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let l=0,u=a.length;l<u;l++){let c=a[l];this.addGroup(c.start,c.count,c.materialIndex)}let o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());let s=e.boundingSphere;return s!==null&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},CQ=new dt,f1=new _w,Dz=new Lo,Bx=new k,Lx=new k,Fx=new k,Iz=new k,pA=new k,mA=new ze,gA=new ze,vA=new ze,jz=new k,yA=new k,Ci=class extends li{constructor(e=new Wt,t=new Hm){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}getVertexPosition(e,t){let r=this.geometry,i=r.attributes.position,n=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);let o=this.morphTargetInfluences;if(n&&o){pA.set(0,0,0);for(let s=0,l=n.length;s<l;s++){let u=o[s],c=n[s];u!==0&&(Iz.fromBufferAttribute(c,e),a?pA.addScaledVector(Iz,u):pA.addScaledVector(Iz.sub(t),u))}t.add(pA)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Dz.copy(r.boundingSphere),Dz.applyMatrix4(n),e.ray.intersectsSphere(Dz)===!1)||(CQ.copy(n).invert(),f1.copy(e.ray).applyMatrix4(CQ),r.boundingBox!==null&&f1.intersectsBox(r.boundingBox)===!1))return;let a,o=r.index,s=r.attributes.position,l=r.attributes.uv,u=r.attributes.uv2,c=r.groups,d=r.drawRange;if(o!==null)if(Array.isArray(i))for(let h=0,f=c.length;h<f;h++){let g=c[h],p=i[g.materialIndex],m=Math.max(g.start,d.start),y=Math.min(o.count,Math.min(g.start+g.count,d.start+d.count));for(let b=m,w=y;b<w;b+=3){let x=o.getX(b),S=o.getX(b+1),C=o.getX(b+2);a=bA(this,p,e,f1,l,u,x,S,C),a&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{let h=Math.max(0,d.start),f=Math.min(o.count,d.start+d.count);for(let g=h,p=f;g<p;g+=3){let m=o.getX(g),y=o.getX(g+1),b=o.getX(g+2);a=bA(this,i,e,f1,l,u,m,y,b),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}else if(s!==void 0)if(Array.isArray(i))for(let h=0,f=c.length;h<f;h++){let g=c[h],p=i[g.materialIndex],m=Math.max(g.start,d.start),y=Math.min(s.count,Math.min(g.start+g.count,d.start+d.count));for(let b=m,w=y;b<w;b+=3){let x=b,S=b+1,C=b+2;a=bA(this,p,e,f1,l,u,x,S,C),a&&(a.faceIndex=Math.floor(b/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{let h=Math.max(0,d.start),f=Math.min(s.count,d.start+d.count);for(let g=h,p=f;g<p;g+=3){let m=g,y=g+1,b=g+2;a=bA(this,i,e,f1,l,u,m,y,b),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}}};function R7e(e,t,r,i,n,a,o,s){let l;if(t.side===ea?l=i.intersectTriangle(o,a,n,!0,s):l=i.intersectTriangle(n,a,o,t.side===Pf,s),l===null)return null;yA.copy(s),yA.applyMatrix4(e.matrixWorld);let u=r.ray.origin.distanceTo(yA);return u<r.near||u>r.far?null:{distance:u,point:yA.clone(),object:e}}function bA(e,t,r,i,n,a,o,s,l){e.getVertexPosition(o,Bx),e.getVertexPosition(s,Lx),e.getVertexPosition(l,Fx);let u=R7e(e,t,r,i,Bx,Lx,Fx,jz);if(u){n&&(mA.fromBufferAttribute(n,o),gA.fromBufferAttribute(n,s),vA.fromBufferAttribute(n,l),u.uv=va.getUV(jz,Bx,Lx,Fx,mA,gA,vA,new ze)),a&&(mA.fromBufferAttribute(a,o),gA.fromBufferAttribute(a,s),vA.fromBufferAttribute(a,l),u.uv2=va.getUV(jz,Bx,Lx,Fx,mA,gA,vA,new ze));let c={a:o,b:s,c:l,normal:new k,materialIndex:0};va.getNormal(Bx,Lx,Fx,c.normal),u.face=c}return u}var Af=class extends Wt{constructor(e=1,t=1,r=1,i=1,n=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a};let o=this;i=Math.floor(i),n=Math.floor(n),a=Math.floor(a);let s=[],l=[],u=[],c=[],d=0,h=0;f("z","y","x",-1,-1,r,t,e,a,n,0),f("z","y","x",1,-1,r,t,-e,a,n,1),f("x","z","y",1,1,e,r,t,i,a,2),f("x","z","y",1,-1,e,r,-t,i,a,3),f("x","y","z",1,-1,e,t,r,i,n,4),f("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(s),this.setAttribute("position",new Pt(l,3)),this.setAttribute("normal",new Pt(u,3)),this.setAttribute("uv",new Pt(c,2));function f(g,p,m,y,b,w,x,S,C,T,M){let A=w/C,P=x/T,O=w/2,j=x/2,D=S/2,I=C+1,q=T+1,$=0,X=0,N=new k;for(let Q=0;Q<q;Q++){let F=Q*P-j;for(let L=0;L<I;L++){let Y=L*A-O;N[g]=Y*y,N[p]=F*b,N[m]=D,l.push(N.x,N.y,N.z),N[g]=0,N[p]=0,N[m]=S>0?1:-1,u.push(N.x,N.y,N.z),c.push(L/C),c.push(1-Q/T),$+=1}}for(let Q=0;Q<T;Q++)for(let F=0;F<C;F++){let L=d+F+I*Q,Y=d+F+I*(Q+1),ae=d+(F+1)+I*(Q+1),re=d+(F+1)+I*Q;s.push(L,Y,re),s.push(Y,ae,re),X+=6}o.addGroup(h,X,M),h+=X,d+=$}}static fromJSON(e){return new Af(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function W_(e){let t={};for(let r in e){t[r]={};for(let i in e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function ro(e){let t={};for(let r=0;r<e.length;r++){let i=W_(e[r]);for(let n in i)t[n]=i[n]}return t}function D7e(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}function Z1e(e){return e.getRenderTarget()===null&&e.outputEncoding===Er?ip:lD}var ww={clone:W_,merge:ro},I7e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,j7e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,qr=class extends pP{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=I7e,this.fragmentShader=j7e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=W_(e.uniforms),this.uniformsGroups=D7e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},Ov=class extends li{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dt,this.projectionMatrix=new dt,this.projectionMatrixInverse=new dt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Ia=class extends Ov{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=pM*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(ME*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return pM*2*Math.atan(Math.tan(ME*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,n,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(ME*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,a=this.view;if(this.view!==null&&this.view.enabled){let s=a.fullWidth,l=a.fullHeight;n+=a.offsetX*i/s,t-=a.offsetY*r/l,i*=a.width/s,r*=a.height/l}let o=this.filmOffset;o!==0&&(n+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},p1=-90,m1=1,z7e=class extends li{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;let i=new Ia(p1,m1,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let n=new Ia(p1,m1,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(-1,0,0),this.add(n);let a=new Ia(p1,m1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);let o=new Ia(p1,m1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);let s=new Ia(p1,m1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);let l=new Ia(p1,m1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[i,n,a,o,s,l]=this.children,u=e.getRenderTarget(),c=e.toneMapping,d=e.xr.enabled;e.toneMapping=Cp,e.xr.enabled=!1;let h=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,n),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,o),e.setRenderTarget(r,4),e.render(t,s),r.texture.generateMipmaps=h,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=c,e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}},aW=class extends Vi{constructor(e,t,r,i,n,a,o,s,l,u){e=e!==void 0?e:[],t=t!==void 0?t:lb,super(e,t,r,i,n,a,o,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},B7e=class extends kr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new aW(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ar}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Af(5,5,5),n=new qr({name:"CubemapFromEquirect",uniforms:W_(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ea,blending:Cn});n.uniforms.tEquirect.value=t;let a=new Ci(i,n),o=t.minFilter;return t.minFilter===q_&&(t.minFilter=Ar),new z7e(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,r,i){let n=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,r,i);e.setRenderTarget(n)}},zz=new k,L7e=new k,F7e=new xn,So=class{constructor(e=new k(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=zz.subVectors(r,t).cross(L7e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(zz),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(r).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||F7e.getNormalMatrix(e),i=this.coplanarPoint(zz).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},g1=new Lo,_A=new k,oW=class{constructor(e=new So,t=new So,r=new So,i=new So,n=new So,a=new So){this.planes=[e,t,r,i,n,a]}set(e,t,r,i,n,a){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(n),o[5].copy(a),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],d=r[8],h=r[9],f=r[10],g=r[11],p=r[12],m=r[13],y=r[14],b=r[15];return t[0].setComponents(o-i,c-s,g-d,b-p).normalize(),t[1].setComponents(o+i,c+s,g+d,b+p).normalize(),t[2].setComponents(o+n,c+l,g+h,b+m).normalize(),t[3].setComponents(o-n,c-l,g-h,b-m).normalize(),t[4].setComponents(o-a,c-u,g-f,b-y).normalize(),t[5].setComponents(o+a,c+u,g+f,b+y).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),g1.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(g1)}intersectsSprite(e){return g1.center.set(0,0,0),g1.radius=.7071067811865476,g1.applyMatrix4(e.matrixWorld),this.intersectsSphere(g1)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(_A.x=i.normal.x>0?e.max.x:e.min.x,_A.y=i.normal.y>0?e.max.y:e.min.y,_A.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(_A)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function e_e(){let e=null,t=!1,r=null,i=null;function n(a,o){r(a,o),i=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&r!==null&&(i=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(a){r=a},setContext:function(a){e=a}}}function N7e(e,t){let r=t.isWebGL2,i=new WeakMap;function n(u,c){let d=u.array,h=u.usage,f=e.createBuffer();e.bindBuffer(c,f),e.bufferData(c,d,h),u.onUploadCallback();let g;if(d instanceof Float32Array)g=5126;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(r)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(d instanceof Int16Array)g=5122;else if(d instanceof Uint32Array)g=5125;else if(d instanceof Int32Array)g=5124;else if(d instanceof Int8Array)g=5120;else if(d instanceof Uint8Array)g=5121;else if(d instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:f,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function a(u,c,d){let h=c.array,f=c.updateRange;e.bindBuffer(d,u),f.count===-1?e.bufferSubData(d,0,h):(r?e.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):e.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);let c=i.get(u);c&&(e.deleteBuffer(c.buffer),i.delete(u))}function l(u,c){if(u.isGLBufferAttribute){let h=i.get(u);(!h||h.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let d=i.get(u);d===void 0?i.set(u,n(u,c)):d.version<u.version&&(a(d.buffer,u,c),d.version=u.version)}return{get:o,remove:s,update:l}}var Rp=class extends Wt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let n=e/2,a=t/2,o=Math.floor(r),s=Math.floor(i),l=o+1,u=s+1,c=e/o,d=t/s,h=[],f=[],g=[],p=[];for(let m=0;m<u;m++){let y=m*d-a;for(let b=0;b<l;b++){let w=b*c-n;f.push(w,-y,0),g.push(0,0,1),p.push(b/o),p.push(1-m/s)}}for(let m=0;m<s;m++)for(let y=0;y<o;y++){let b=y+l*m,w=y+l*(m+1),x=y+1+l*(m+1),S=y+1+l*m;h.push(b,w,S),h.push(w,x,S)}this.setIndex(h),this.setAttribute("position",new Pt(f,3)),this.setAttribute("normal",new Pt(g,3)),this.setAttribute("uv",new Pt(p,2))}static fromJSON(e){return new Rp(e.width,e.height,e.widthSegments,e.heightSegments)}},U7e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,V7e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,k7e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,q7e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,W7e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,G7e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,H7e="vec3 transformed = vec3( position );",$7e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,X7e=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Y7e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,K7e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Q7e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,J7e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Z7e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,eXe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,tXe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,rXe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,iXe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,nXe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,aXe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,oXe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,sXe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,lXe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,uXe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,cXe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dXe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,hXe="gl_FragColor = linearToOutputTexel( gl_FragColor );",fXe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,pXe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,mXe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,gXe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,vXe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,yXe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,bXe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,_Xe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,wXe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xXe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,SXe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,CXe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,EXe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,MXe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,PXe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,TXe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,AXe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,OXe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,RXe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,DXe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,IXe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,jXe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,zXe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,BXe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,LXe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,FXe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,NXe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,UXe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,VXe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,kXe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,qXe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,WXe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,GXe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,HXe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$Xe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,XXe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,YXe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,KXe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,QXe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,JXe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,ZXe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,eYe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,tYe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,rYe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,iYe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,nYe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,aYe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,oYe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,sYe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,lYe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,uYe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,cYe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,dYe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,hYe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,fYe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,pYe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,mYe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,gYe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,vYe=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,yYe=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,bYe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,_Ye=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,wYe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,xYe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,SYe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,CYe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,EYe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,MYe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,PYe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TYe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,AYe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,OYe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,RYe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,DYe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,IYe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,jYe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,zYe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,BYe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,LYe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,FYe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,NYe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,UYe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,VYe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,kYe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,qYe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,WYe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,GYe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,HYe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$Ye=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,XYe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,YYe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,KYe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QYe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JYe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ZYe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eKe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tKe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rKe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,iKe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nKe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,aKe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,oKe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sKe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lKe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,uKe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cKe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dKe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hKe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fKe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pKe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mKe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,gKe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vKe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Tr={alphamap_fragment:U7e,alphamap_pars_fragment:V7e,alphatest_fragment:k7e,alphatest_pars_fragment:q7e,aomap_fragment:W7e,aomap_pars_fragment:G7e,begin_vertex:H7e,beginnormal_vertex:$7e,bsdfs:X7e,iridescence_fragment:Y7e,bumpmap_pars_fragment:K7e,clipping_planes_fragment:Q7e,clipping_planes_pars_fragment:J7e,clipping_planes_pars_vertex:Z7e,clipping_planes_vertex:eXe,color_fragment:tXe,color_pars_fragment:rXe,color_pars_vertex:iXe,color_vertex:nXe,common:aXe,cube_uv_reflection_fragment:oXe,defaultnormal_vertex:sXe,displacementmap_pars_vertex:lXe,displacementmap_vertex:uXe,emissivemap_fragment:cXe,emissivemap_pars_fragment:dXe,encodings_fragment:hXe,encodings_pars_fragment:fXe,envmap_fragment:pXe,envmap_common_pars_fragment:mXe,envmap_pars_fragment:gXe,envmap_pars_vertex:vXe,envmap_physical_pars_fragment:AXe,envmap_vertex:yXe,fog_vertex:bXe,fog_pars_vertex:_Xe,fog_fragment:wXe,fog_pars_fragment:xXe,gradientmap_pars_fragment:SXe,lightmap_fragment:CXe,lightmap_pars_fragment:EXe,lights_lambert_fragment:MXe,lights_lambert_pars_fragment:PXe,lights_pars_begin:TXe,lights_toon_fragment:OXe,lights_toon_pars_fragment:RXe,lights_phong_fragment:DXe,lights_phong_pars_fragment:IXe,lights_physical_fragment:jXe,lights_physical_pars_fragment:zXe,lights_fragment_begin:BXe,lights_fragment_maps:LXe,lights_fragment_end:FXe,logdepthbuf_fragment:NXe,logdepthbuf_pars_fragment:UXe,logdepthbuf_pars_vertex:VXe,logdepthbuf_vertex:kXe,map_fragment:qXe,map_pars_fragment:WXe,map_particle_fragment:GXe,map_particle_pars_fragment:HXe,metalnessmap_fragment:$Xe,metalnessmap_pars_fragment:XXe,morphcolor_vertex:YXe,morphnormal_vertex:KXe,morphtarget_pars_vertex:QXe,morphtarget_vertex:JXe,normal_fragment_begin:ZXe,normal_fragment_maps:eYe,normal_pars_fragment:tYe,normal_pars_vertex:rYe,normal_vertex:iYe,normalmap_pars_fragment:nYe,clearcoat_normal_fragment_begin:aYe,clearcoat_normal_fragment_maps:oYe,clearcoat_pars_fragment:sYe,iridescence_pars_fragment:lYe,output_fragment:uYe,packing:cYe,premultiplied_alpha_fragment:dYe,project_vertex:hYe,dithering_fragment:fYe,dithering_pars_fragment:pYe,roughnessmap_fragment:mYe,roughnessmap_pars_fragment:gYe,shadowmap_pars_fragment:vYe,shadowmap_pars_vertex:yYe,shadowmap_vertex:bYe,shadowmask_pars_fragment:_Ye,skinbase_vertex:wYe,skinning_pars_vertex:xYe,skinning_vertex:SYe,skinnormal_vertex:CYe,specularmap_fragment:EYe,specularmap_pars_fragment:MYe,tonemapping_fragment:PYe,tonemapping_pars_fragment:TYe,transmission_fragment:AYe,transmission_pars_fragment:OYe,uv_pars_fragment:RYe,uv_pars_vertex:DYe,uv_vertex:IYe,uv2_pars_fragment:jYe,uv2_pars_vertex:zYe,uv2_vertex:BYe,worldpos_vertex:LYe,background_vert:FYe,background_frag:NYe,backgroundCube_vert:UYe,backgroundCube_frag:VYe,cube_vert:kYe,cube_frag:qYe,depth_vert:WYe,depth_frag:GYe,distanceRGBA_vert:HYe,distanceRGBA_frag:$Ye,equirect_vert:XYe,equirect_frag:YYe,linedashed_vert:KYe,linedashed_frag:QYe,meshbasic_vert:JYe,meshbasic_frag:ZYe,meshlambert_vert:eKe,meshlambert_frag:tKe,meshmatcap_vert:rKe,meshmatcap_frag:iKe,meshnormal_vert:nKe,meshnormal_frag:aKe,meshphong_vert:oKe,meshphong_frag:sKe,meshphysical_vert:lKe,meshphysical_frag:uKe,meshtoon_vert:cKe,meshtoon_frag:dKe,points_vert:hKe,points_frag:fKe,shadow_vert:pKe,shadow_frag:mKe,sprite_vert:gKe,sprite_frag:vKe},Et={common:{diffuse:{value:new er(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new xn},uv2Transform:{value:new xn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new er(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new er(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new er(16777215)},opacity:{value:1},center:{value:new ze(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xn}}},sp={basic:{uniforms:ro([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.fog]),vertexShader:Tr.meshbasic_vert,fragmentShader:Tr.meshbasic_frag},lambert:{uniforms:ro([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new er(0)}}]),vertexShader:Tr.meshlambert_vert,fragmentShader:Tr.meshlambert_frag},phong:{uniforms:ro([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new er(0)},specular:{value:new er(1118481)},shininess:{value:30}}]),vertexShader:Tr.meshphong_vert,fragmentShader:Tr.meshphong_frag},standard:{uniforms:ro([Et.common,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.roughnessmap,Et.metalnessmap,Et.fog,Et.lights,{emissive:{value:new er(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tr.meshphysical_vert,fragmentShader:Tr.meshphysical_frag},toon:{uniforms:ro([Et.common,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.gradientmap,Et.fog,Et.lights,{emissive:{value:new er(0)}}]),vertexShader:Tr.meshtoon_vert,fragmentShader:Tr.meshtoon_frag},matcap:{uniforms:ro([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,{matcap:{value:null}}]),vertexShader:Tr.meshmatcap_vert,fragmentShader:Tr.meshmatcap_frag},points:{uniforms:ro([Et.points,Et.fog]),vertexShader:Tr.points_vert,fragmentShader:Tr.points_frag},dashed:{uniforms:ro([Et.common,Et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tr.linedashed_vert,fragmentShader:Tr.linedashed_frag},depth:{uniforms:ro([Et.common,Et.displacementmap]),vertexShader:Tr.depth_vert,fragmentShader:Tr.depth_frag},normal:{uniforms:ro([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,{opacity:{value:1}}]),vertexShader:Tr.meshnormal_vert,fragmentShader:Tr.meshnormal_frag},sprite:{uniforms:ro([Et.sprite,Et.fog]),vertexShader:Tr.sprite_vert,fragmentShader:Tr.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tr.background_vert,fragmentShader:Tr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Tr.backgroundCube_vert,fragmentShader:Tr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tr.cube_vert,fragmentShader:Tr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tr.equirect_vert,fragmentShader:Tr.equirect_frag},distanceRGBA:{uniforms:ro([Et.common,Et.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tr.distanceRGBA_vert,fragmentShader:Tr.distanceRGBA_frag},shadow:{uniforms:ro([Et.lights,Et.fog,{color:{value:new er(0)},opacity:{value:1}}]),vertexShader:Tr.shadow_vert,fragmentShader:Tr.shadow_frag}};sp.physical={uniforms:ro([sp.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ze(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new er(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new er(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new er(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Tr.meshphysical_vert,fragmentShader:Tr.meshphysical_frag};var wA={r:0,b:0,g:0};function yKe(e,t,r,i,n,a,o){let s=new er(0),l=a===!0?0:1,u,c,d=null,h=0,f=null;function g(m,y){let b=!1,w=y.isScene===!0?y.background:null;w&&w.isTexture&&(w=(y.backgroundBlurriness>0?r:t).get(w));let x=e.xr,S=x.getSession&&x.getSession();S&&S.environmentBlendMode==="additive"&&(w=null),w===null?p(s,l):w&&w.isColor&&(p(w,1),b=!0),(e.autoClear||b)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),w&&(w.isCubeTexture||w.mapping===fP)?(c===void 0&&(c=new Ci(new Af(1,1,1),new qr({name:"BackgroundCubeMaterial",uniforms:W_(sp.backgroundCube.uniforms),vertexShader:sp.backgroundCube.vertexShader,fragmentShader:sp.backgroundCube.fragmentShader,side:ea,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(C,T,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=w.encoding!==Er,(d!==w||h!==w.version||f!==e.toneMapping)&&(c.material.needsUpdate=!0,d=w,h=w.version,f=e.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Ci(new Rp(2,2),new qr({name:"BackgroundMaterial",uniforms:W_(sp.background.uniforms),vertexShader:sp.background.vertexShader,fragmentShader:sp.background.fragmentShader,side:Pf,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.toneMapped=w.encoding!==Er,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||h!==w.version||f!==e.toneMapping)&&(u.material.needsUpdate=!0,d=w,h=w.version,f=e.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null))}function p(m,y){m.getRGB(wA,Z1e(e)),i.buffers.color.setClear(wA.r,wA.g,wA.b,y,o)}return{getClearColor:function(){return s},setClearColor:function(m,y=1){s.set(m),l=y,p(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,p(s,l)},render:g}}function bKe(e,t,r,i){let n=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||a!==null,s={},l=m(null),u=l,c=!1;function d(I,q,$,X,N){let Q=!1;if(o){let F=p(X,$,q);u!==F&&(u=F,f(u.object)),Q=y(I,X,$,N),Q&&b(I,X,$,N)}else{let F=q.wireframe===!0;(u.geometry!==X.id||u.program!==$.id||u.wireframe!==F)&&(u.geometry=X.id,u.program=$.id,u.wireframe=F,Q=!0)}N!==null&&r.update(N,34963),(Q||c)&&(c=!1,M(I,q,$,X),N!==null&&e.bindBuffer(34963,r.get(N).buffer))}function h(){return i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()}function f(I){return i.isWebGL2?e.bindVertexArray(I):a.bindVertexArrayOES(I)}function g(I){return i.isWebGL2?e.deleteVertexArray(I):a.deleteVertexArrayOES(I)}function p(I,q,$){let X=$.wireframe===!0,N=s[I.id];N===void 0&&(N={},s[I.id]=N);let Q=N[q.id];Q===void 0&&(Q={},N[q.id]=Q);let F=Q[X];return F===void 0&&(F=m(h()),Q[X]=F),F}function m(I){let q=[],$=[],X=[];for(let N=0;N<n;N++)q[N]=0,$[N]=0,X[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:$,attributeDivisors:X,object:I,attributes:{},index:null}}function y(I,q,$,X){let N=u.attributes,Q=q.attributes,F=0,L=$.getAttributes();for(let Y in L)if(L[Y].location>=0){let ae=N[Y],re=Q[Y];if(re===void 0&&(Y==="instanceMatrix"&&I.instanceMatrix&&(re=I.instanceMatrix),Y==="instanceColor"&&I.instanceColor&&(re=I.instanceColor)),ae===void 0||ae.attribute!==re||re&&ae.data!==re.data)return!0;F++}return u.attributesNum!==F||u.index!==X}function b(I,q,$,X){let N={},Q=q.attributes,F=0,L=$.getAttributes();for(let Y in L)if(L[Y].location>=0){let ae=Q[Y];ae===void 0&&(Y==="instanceMatrix"&&I.instanceMatrix&&(ae=I.instanceMatrix),Y==="instanceColor"&&I.instanceColor&&(ae=I.instanceColor));let re={};re.attribute=ae,ae&&ae.data&&(re.data=ae.data),N[Y]=re,F++}u.attributes=N,u.attributesNum=F,u.index=X}function w(){let I=u.newAttributes;for(let q=0,$=I.length;q<$;q++)I[q]=0}function x(I){S(I,0)}function S(I,q){let $=u.newAttributes,X=u.enabledAttributes,N=u.attributeDivisors;$[I]=1,X[I]===0&&(e.enableVertexAttribArray(I),X[I]=1),N[I]!==q&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](I,q),N[I]=q)}function C(){let I=u.newAttributes,q=u.enabledAttributes;for(let $=0,X=q.length;$<X;$++)q[$]!==I[$]&&(e.disableVertexAttribArray($),q[$]=0)}function T(I,q,$,X,N,Q){i.isWebGL2===!0&&($===5124||$===5125)?e.vertexAttribIPointer(I,q,$,N,Q):e.vertexAttribPointer(I,q,$,X,N,Q)}function M(I,q,$,X){if(i.isWebGL2===!1&&(I.isInstancedMesh||X.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;w();let N=X.attributes,Q=$.getAttributes(),F=q.defaultAttributeValues;for(let L in Q){let Y=Q[L];if(Y.location>=0){let ae=N[L];if(ae===void 0&&(L==="instanceMatrix"&&I.instanceMatrix&&(ae=I.instanceMatrix),L==="instanceColor"&&I.instanceColor&&(ae=I.instanceColor)),ae!==void 0){let re=ae.normalized,H=ae.itemSize,se=r.get(ae);if(se===void 0)continue;let le=se.buffer,ee=se.type,J=se.bytesPerElement;if(ae.isInterleavedBufferAttribute){let oe=ae.data,me=oe.stride,be=ae.offset;if(oe.isInstancedInterleavedBuffer){for(let de=0;de<Y.locationSize;de++)S(Y.location+de,oe.meshPerAttribute);I.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let de=0;de<Y.locationSize;de++)x(Y.location+de);e.bindBuffer(34962,le);for(let de=0;de<Y.locationSize;de++)T(Y.location+de,H/Y.locationSize,ee,re,me*J,(be+H/Y.locationSize*de)*J)}else{if(ae.isInstancedBufferAttribute){for(let oe=0;oe<Y.locationSize;oe++)S(Y.location+oe,ae.meshPerAttribute);I.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let oe=0;oe<Y.locationSize;oe++)x(Y.location+oe);e.bindBuffer(34962,le);for(let oe=0;oe<Y.locationSize;oe++)T(Y.location+oe,H/Y.locationSize,ee,re,H*J,H/Y.locationSize*oe*J)}}else if(F!==void 0){let re=F[L];if(re!==void 0)switch(re.length){case 2:e.vertexAttrib2fv(Y.location,re);break;case 3:e.vertexAttrib3fv(Y.location,re);break;case 4:e.vertexAttrib4fv(Y.location,re);break;default:e.vertexAttrib1fv(Y.location,re)}}}}C()}function A(){j();for(let I in s){let q=s[I];for(let $ in q){let X=q[$];for(let N in X)g(X[N].object),delete X[N];delete q[$]}delete s[I]}}function P(I){if(s[I.id]===void 0)return;let q=s[I.id];for(let $ in q){let X=q[$];for(let N in X)g(X[N].object),delete X[N];delete q[$]}delete s[I.id]}function O(I){for(let q in s){let $=s[q];if($[I.id]===void 0)continue;let X=$[I.id];for(let N in X)g(X[N].object),delete X[N];delete $[I.id]}}function j(){D(),c=!0,u!==l&&(u=l,f(u.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:j,resetDefaultState:D,dispose:A,releaseStatesOfGeometry:P,releaseStatesOfProgram:O,initAttributes:w,enableAttribute:x,disableUnusedAttributes:C}}function _Ke(e,t,r,i){let n=i.isWebGL2,a;function o(u){a=u}function s(u,c){e.drawArrays(a,u,c),r.update(c,a,1)}function l(u,c,d){if(d===0)return;let h,f;if(n)h=e,f="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[f](a,u,c,d),r.update(c,a,d)}this.setMode=o,this.render=s,this.renderInstances=l}function wKe(e,t,r){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let T=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(T){if(T==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return T==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,s=r.precision!==void 0?r.precision:"highp",l=a(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);let u=o||t.has("WEBGL_draw_buffers"),c=r.logarithmicDepthBuffer===!0,d=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),g=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),y=e.getParameter(36348),b=e.getParameter(36349),w=h>0,x=o||t.has("OES_texture_float"),S=w&&x,C=o?e.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:n,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:g,maxAttributes:p,maxVertexUniforms:m,maxVaryings:y,maxFragmentUniforms:b,vertexTextures:w,floatFragmentTextures:x,floatVertexTextures:S,maxSamples:C}}function xKe(e){let t=this,r=null,i=0,n=!1,a=!1,o=new So,s=new xn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let f=d.length!==0||h||i!==0||n;return n=h,i=d.length,f},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(d,h){r=c(d,h,0)},this.setState=function(d,h,f){let g=d.clippingPlanes,p=d.clipIntersection,m=d.clipShadows,y=e.get(d);if(!n||g===null||g.length===0||a&&!m)a?c(null):u();else{let b=a?0:i,w=b*4,x=y.clippingState||null;l.value=x,x=c(g,h,w,f);for(let S=0;S!==w;++S)x[S]=r[S];y.clippingState=x,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=b}};function u(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(d,h,f,g){let p=d!==null?d.length:0,m=null;if(p!==0){if(m=l.value,g!==!0||m===null){let y=f+p*4,b=h.matrixWorldInverse;s.getNormalMatrix(b),(m===null||m.length<y)&&(m=new Float32Array(y));for(let w=0,x=f;w!==p;++w,x+=4)o.copy(d[w]).applyMatrix4(b,s),o.normal.toArray(m,x),m[x+3]=o.constant}l.value=m,l.needsUpdate=!0}return t.numPlanes=p,t.numIntersection=0,m}}function SKe(e){let t=new WeakMap;function r(o,s){return s===YV?o.mapping=lb:s===KV&&(o.mapping=ub),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){let s=o.mapping;if(s===YV||s===KV)if(t.has(o)){let l=t.get(o).texture;return r(l,o.mapping)}else{let l=o.image;if(l&&l.height>0){let u=new B7e(l.height/2);return u.fromEquirectangularTexture(e,o),t.set(o,u),o.addEventListener("dispose",n),r(u.texture,o.mapping)}else return null}}return o}function n(o){let s=o.target;s.removeEventListener("dispose",n);let l=t.get(s);l!==void 0&&(t.delete(s),l.dispose())}function a(){t=new WeakMap}return{get:i,dispose:a}}var K2=class extends Ov{constructor(e=-1,t=1,r=1,i=-1,n=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,a=r+e,o=i+t,s=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,a=n+l*this.view.width,o-=u*this.view.offsetY,s=o-u*this.view.height}this.projectionMatrix.makeOrthographic(n,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Z1=4,EQ=[.125,.215,.35,.446,.526,.582],S0=20,Bz=new K2,MQ=new er,Lz=null,v0=(1+Math.sqrt(5))/2,v1=1/v0,PQ=[new k(1,1,1),new k(-1,1,1),new k(1,1,-1),new k(-1,1,-1),new k(0,v0,v1),new k(0,v0,-v1),new k(v1,0,v0),new k(-v1,0,v0),new k(v0,v1,0),new k(-v0,v1,0)],TQ=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Lz=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,r,i,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=RQ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=OQ(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Lz),e.scissorTest=!1,xA(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===lb||e.mapping===ub?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Lz=this._renderer.getRenderTarget();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Ar,minFilter:Ar,generateMipmaps:!1,type:Gm,format:zi,encoding:Tf,depthBuffer:!1},i=AQ(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=AQ(e,t,r);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=CKe(n)),this._blurMaterial=EKe(n,e,t)}return i}_compileMaterial(e){let t=new Ci(this._lodPlanes[0],e);this._renderer.compile(t,Bz)}_sceneToCubeUV(e,t,r,i){let n=new Ia(90,1,t,r),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(MQ),s.toneMapping=Cp,s.autoClear=!1;let c=new Hm({name:"PMREM.Background",side:ea,depthWrite:!1,depthTest:!1}),d=new Ci(new Af,c),h=!1,f=e.background;f?f.isColor&&(c.color.copy(f),e.background=null,h=!0):(c.color.copy(MQ),h=!0);for(let g=0;g<6;g++){let p=g%3;p===0?(n.up.set(0,a[g],0),n.lookAt(o[g],0,0)):p===1?(n.up.set(0,0,a[g]),n.lookAt(0,o[g],0)):(n.up.set(0,a[g],0),n.lookAt(0,0,o[g]));let m=this._cubeSize;xA(i,p*m,g>2?m:0,m,m),s.setRenderTarget(i),h&&s.render(d,n),s.render(e,n)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){let r=this._renderer,i=e.mapping===lb||e.mapping===ub;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=RQ()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=OQ());let n=i?this._cubemapMaterial:this._equirectMaterial,a=new Ci(this._lodPlanes[0],n),o=n.uniforms;o.envMap.value=e;let s=this._cubeSize;xA(t,0,0,3*s,2*s),r.setRenderTarget(t),r.render(a,Bz)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let n=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=PQ[(i-1)%PQ.length];this._blur(e,i-1,i,n,a)}t.autoClear=r}_blur(e,t,r,i,n){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",n),this._halfBlur(a,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,a,o){let s=this._renderer,l=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,c=new Ci(this._lodPlanes[i],l),d=l.uniforms,h=this._sizeLods[r]-1,f=isFinite(n)?Math.PI/(2*h):2*Math.PI/(2*S0-1),g=n/f,p=isFinite(n)?1+Math.floor(u*g):S0;p>S0&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${S0}`);let m=[],y=0;for(let C=0;C<S0;++C){let T=C/g,M=Math.exp(-T*T/2);m.push(M),C===0?y+=M:C<p&&(y+=2*M)}for(let C=0;C<m.length;C++)m[C]=m[C]/y;d.envMap.value=e.texture,d.samples.value=p,d.weights.value=m,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);let{_lodMax:b}=this;d.dTheta.value=f,d.mipInt.value=b-r;let w=this._sizeLods[i],x=3*w*(i>b-Z1?i-b+Z1:0),S=4*(this._cubeSize-w);xA(t,x,S,3*w,2*w),s.setRenderTarget(t),s.render(c,Bz)}};function CKe(e){let t=[],r=[],i=[],n=e,a=e-Z1+1+EQ.length;for(let o=0;o<a;o++){let s=Math.pow(2,n);r.push(s);let l=1/s;o>e-Z1?l=EQ[o-e+Z1-1]:o===0&&(l=0),i.push(l);let u=1/(s-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],f=6,g=6,p=3,m=2,y=1,b=new Float32Array(p*g*f),w=new Float32Array(m*g*f),x=new Float32Array(y*g*f);for(let C=0;C<f;C++){let T=C%3*2/3-1,M=C>2?0:-1,A=[T,M,0,T+2/3,M,0,T+2/3,M+1,0,T,M,0,T+2/3,M+1,0,T,M+1,0];b.set(A,p*g*C),w.set(h,m*g*C);let P=[C,C,C,C,C,C];x.set(P,y*g*C)}let S=new Wt;S.setAttribute("position",new tr(b,p)),S.setAttribute("uv",new tr(w,m)),S.setAttribute("faceIndex",new tr(x,y)),t.push(S),n>Z1&&n--}return{lodPlanes:t,sizeLods:r,sigmas:i}}function AQ(e,t,r){let i=new kr(e,t,r);return i.texture.mapping=fP,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function xA(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function EKe(e,t,r){let i=new Float32Array(S0),n=new k(0,1,0);return new qr({name:"SphericalGaussianBlur",defines:{n:S0,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:sW(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Cn,depthTest:!1,depthWrite:!1})}function OQ(){return new qr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:sW(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Cn,depthTest:!1,depthWrite:!1})}function RQ(){return new qr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:sW(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Cn,depthTest:!1,depthWrite:!1})}function sW(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function MKe(e){let t=new WeakMap,r=null;function i(s){if(s&&s.isTexture){let l=s.mapping,u=l===YV||l===KV,c=l===lb||l===ub;if(u||c)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let d=t.get(s);return r===null&&(r=new TQ(e)),d=u?r.fromEquirectangular(s,d):r.fromCubemap(s,d),t.set(s,d),d.texture}else{if(t.has(s))return t.get(s).texture;{let d=s.image;if(u&&d&&d.height>0||c&&d&&n(d)){r===null&&(r=new TQ(e));let h=u?r.fromEquirectangular(s):r.fromCubemap(s);return t.set(s,h),s.addEventListener("dispose",a),h.texture}else return null}}}return s}function n(s){let l=0,u=6;for(let c=0;c<u;c++)s[c]!==void 0&&l++;return l===u}function a(s){let l=s.target;l.removeEventListener("dispose",a);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function o(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:o}}function PKe(e){let t={};function r(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(i){return r(i)!==null},init:function(i){i.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(i){let n=r(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function TKe(e,t,r,i){let n={},a=new WeakMap;function o(d){let h=d.target;h.index!==null&&t.remove(h.index);for(let g in h.attributes)t.remove(h.attributes[g]);h.removeEventListener("dispose",o),delete n[h.id];let f=a.get(h);f&&(t.remove(f),a.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function s(d,h){return n[h.id]===!0||(h.addEventListener("dispose",o),n[h.id]=!0,r.memory.geometries++),h}function l(d){let h=d.attributes;for(let g in h)t.update(h[g],34962);let f=d.morphAttributes;for(let g in f){let p=f[g];for(let m=0,y=p.length;m<y;m++)t.update(p[m],34962)}}function u(d){let h=[],f=d.index,g=d.attributes.position,p=0;if(f!==null){let b=f.array;p=f.version;for(let w=0,x=b.length;w<x;w+=3){let S=b[w+0],C=b[w+1],T=b[w+2];h.push(S,C,C,T,T,S)}}else{let b=g.array;p=g.version;for(let w=0,x=b.length/3-1;w<x;w+=3){let S=w+0,C=w+1,T=w+2;h.push(S,C,C,T,T,S)}}let m=new(H1e(h)?p_:J1e)(h,1);m.version=p;let y=a.get(d);y&&t.remove(y),a.set(d,m)}function c(d){let h=a.get(d);if(h){let f=d.index;f!==null&&h.version<f.version&&u(d)}else u(d);return a.get(d)}return{get:s,update:l,getWireframeAttribute:c}}function AKe(e,t,r,i){let n=i.isWebGL2,a;function o(h){a=h}let s,l;function u(h){s=h.type,l=h.bytesPerElement}function c(h,f){e.drawElements(a,f,s,h*l),r.update(f,a,1)}function d(h,f,g){if(g===0)return;let p,m;if(n)p=e,m="drawElementsInstanced";else if(p=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](a,f,s,h*l,g),r.update(f,a,g)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=d}function OKe(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,o,s){switch(r.calls++,o){case 4:r.triangles+=s*(a/3);break;case 1:r.lines+=s*(a/2);break;case 3:r.lines+=s*(a-1);break;case 2:r.lines+=s*a;break;case 0:r.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:n,update:i}}function RKe(e,t){return e[0]-t[0]}function DKe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function IKe(e,t,r){let i={},n=new Float32Array(8),a=new WeakMap,o=new hr,s=[];for(let u=0;u<8;u++)s[u]=[u,0];function l(u,c,d,h){let f=u.morphTargetInfluences;if(t.isWebGL2===!0){let g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=g!==void 0?g.length:0,m=a.get(c);if(m===void 0||m.count!==p){let w=function(){I.dispose(),a.delete(c),c.removeEventListener("dispose",w)};m!==void 0&&m.texture.dispose();let x=c.morphAttributes.position!==void 0,S=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,T=c.morphAttributes.position||[],M=c.morphAttributes.normal||[],A=c.morphAttributes.color||[],P=0;x===!0&&(P=1),S===!0&&(P=2),C===!0&&(P=3);let O=c.attributes.position.count*P,j=1;O>t.maxTextureSize&&(j=Math.ceil(O/t.maxTextureSize),O=t.maxTextureSize);let D=new Float32Array(O*j*4*p),I=new K1e(D,O,j,p);I.type=ci,I.needsUpdate=!0;let q=P*4;for(let $=0;$<p;$++){let X=T[$],N=M[$],Q=A[$],F=O*j*4*$;for(let L=0;L<X.count;L++){let Y=L*q;x===!0&&(o.fromBufferAttribute(X,L),D[F+Y+0]=o.x,D[F+Y+1]=o.y,D[F+Y+2]=o.z,D[F+Y+3]=0),S===!0&&(o.fromBufferAttribute(N,L),D[F+Y+4]=o.x,D[F+Y+5]=o.y,D[F+Y+6]=o.z,D[F+Y+7]=0),C===!0&&(o.fromBufferAttribute(Q,L),D[F+Y+8]=o.x,D[F+Y+9]=o.y,D[F+Y+10]=o.z,D[F+Y+11]=Q.itemSize===4?o.w:1)}}m={count:p,texture:I,size:new ze(O,j)},a.set(c,m),c.addEventListener("dispose",w)}let y=0;for(let w=0;w<f.length;w++)y+=f[w];let b=c.morphTargetsRelative?1:1-y;h.getUniforms().setValue(e,"morphTargetBaseInfluence",b),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",m.texture,r),h.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{let g=f===void 0?0:f.length,p=i[c.id];if(p===void 0||p.length!==g){p=[];for(let x=0;x<g;x++)p[x]=[x,0];i[c.id]=p}for(let x=0;x<g;x++){let S=p[x];S[0]=x,S[1]=f[x]}p.sort(DKe);for(let x=0;x<8;x++)x<g&&p[x][1]?(s[x][0]=p[x][0],s[x][1]=p[x][1]):(s[x][0]=Number.MAX_SAFE_INTEGER,s[x][1]=0);s.sort(RKe);let m=c.morphAttributes.position,y=c.morphAttributes.normal,b=0;for(let x=0;x<8;x++){let S=s[x],C=S[0],T=S[1];C!==Number.MAX_SAFE_INTEGER&&T?(m&&c.getAttribute("morphTarget"+x)!==m[C]&&c.setAttribute("morphTarget"+x,m[C]),y&&c.getAttribute("morphNormal"+x)!==y[C]&&c.setAttribute("morphNormal"+x,y[C]),n[x]=T,b+=T):(m&&c.hasAttribute("morphTarget"+x)===!0&&c.deleteAttribute("morphTarget"+x),y&&c.hasAttribute("morphNormal"+x)===!0&&c.deleteAttribute("morphNormal"+x),n[x]=0)}let w=c.morphTargetsRelative?1:1-b;h.getUniforms().setValue(e,"morphTargetBaseInfluence",w),h.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function jKe(e,t,r,i){let n=new WeakMap;function a(l){let u=i.render.frame,c=l.geometry,d=t.get(l,c);return n.get(d)!==u&&(t.update(d),n.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),d}function o(){n=new WeakMap}function s(l){let u=l.target;u.removeEventListener("dispose",s),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:a,dispose:o}}var t_e=new Vi,r_e=new K1e,i_e=new w7e,n_e=new aW,DQ=[],IQ=[],jQ=new Float32Array(16),zQ=new Float32Array(9),BQ=new Float32Array(4);function xw(e,t,r){let i=e[0];if(i==null||i<=0||i>0)return e;let n=t*r,a=DQ[n];if(a===void 0&&(a=new Float32Array(n),DQ[n]=a),t!==0){i.toArray(a,0);for(let o=1,s=0;o!==t;++o)s+=r,e[o].toArray(a,s)}return a}function Nn(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function Un(e,t){for(let r=0,i=t.length;r<i;r++)e[r]=t[r]}function Q2(e,t){let r=IQ[t];r===void 0&&(r=new Int32Array(t),IQ[t]=r);for(let i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function zKe(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function BKe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Nn(r,t))return;e.uniform2fv(this.addr,t),Un(r,t)}}function LKe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Nn(r,t))return;e.uniform3fv(this.addr,t),Un(r,t)}}function FKe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Nn(r,t))return;e.uniform4fv(this.addr,t),Un(r,t)}}function NKe(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(Nn(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),Un(r,t)}else{if(Nn(r,i))return;BQ.set(i),e.uniformMatrix2fv(this.addr,!1,BQ),Un(r,i)}}function UKe(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(Nn(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),Un(r,t)}else{if(Nn(r,i))return;zQ.set(i),e.uniformMatrix3fv(this.addr,!1,zQ),Un(r,i)}}function VKe(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(Nn(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),Un(r,t)}else{if(Nn(r,i))return;jQ.set(i),e.uniformMatrix4fv(this.addr,!1,jQ),Un(r,i)}}function kKe(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function qKe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Nn(r,t))return;e.uniform2iv(this.addr,t),Un(r,t)}}function WKe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Nn(r,t))return;e.uniform3iv(this.addr,t),Un(r,t)}}function GKe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Nn(r,t))return;e.uniform4iv(this.addr,t),Un(r,t)}}function HKe(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function $Ke(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Nn(r,t))return;e.uniform2uiv(this.addr,t),Un(r,t)}}function XKe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(Nn(r,t))return;e.uniform3uiv(this.addr,t),Un(r,t)}}function YKe(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Nn(r,t))return;e.uniform4uiv(this.addr,t),Un(r,t)}}function KKe(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2D(t||t_e,n)}function QKe(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||i_e,n)}function JKe(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(t||n_e,n)}function ZKe(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||r_e,n)}function eQe(e){switch(e){case 5126:return zKe;case 35664:return BKe;case 35665:return LKe;case 35666:return FKe;case 35674:return NKe;case 35675:return UKe;case 35676:return VKe;case 5124:case 35670:return kKe;case 35667:case 35671:return qKe;case 35668:case 35672:return WKe;case 35669:case 35673:return GKe;case 5125:return HKe;case 36294:return $Ke;case 36295:return XKe;case 36296:return YKe;case 35678:case 36198:case 36298:case 36306:case 35682:return KKe;case 35679:case 36299:case 36307:return QKe;case 35680:case 36300:case 36308:case 36293:return JKe;case 36289:case 36303:case 36311:case 36292:return ZKe}}function tQe(e,t){e.uniform1fv(this.addr,t)}function rQe(e,t){let r=xw(t,this.size,2);e.uniform2fv(this.addr,r)}function iQe(e,t){let r=xw(t,this.size,3);e.uniform3fv(this.addr,r)}function nQe(e,t){let r=xw(t,this.size,4);e.uniform4fv(this.addr,r)}function aQe(e,t){let r=xw(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function oQe(e,t){let r=xw(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function sQe(e,t){let r=xw(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function lQe(e,t){e.uniform1iv(this.addr,t)}function uQe(e,t){e.uniform2iv(this.addr,t)}function cQe(e,t){e.uniform3iv(this.addr,t)}function dQe(e,t){e.uniform4iv(this.addr,t)}function hQe(e,t){e.uniform1uiv(this.addr,t)}function fQe(e,t){e.uniform2uiv(this.addr,t)}function pQe(e,t){e.uniform3uiv(this.addr,t)}function mQe(e,t){e.uniform4uiv(this.addr,t)}function gQe(e,t,r){let i=this.cache,n=t.length,a=Q2(r,n);Nn(i,a)||(e.uniform1iv(this.addr,a),Un(i,a));for(let o=0;o!==n;++o)r.setTexture2D(t[o]||t_e,a[o])}function vQe(e,t,r){let i=this.cache,n=t.length,a=Q2(r,n);Nn(i,a)||(e.uniform1iv(this.addr,a),Un(i,a));for(let o=0;o!==n;++o)r.setTexture3D(t[o]||i_e,a[o])}function yQe(e,t,r){let i=this.cache,n=t.length,a=Q2(r,n);Nn(i,a)||(e.uniform1iv(this.addr,a),Un(i,a));for(let o=0;o!==n;++o)r.setTextureCube(t[o]||n_e,a[o])}function bQe(e,t,r){let i=this.cache,n=t.length,a=Q2(r,n);Nn(i,a)||(e.uniform1iv(this.addr,a),Un(i,a));for(let o=0;o!==n;++o)r.setTexture2DArray(t[o]||r_e,a[o])}function _Qe(e){switch(e){case 5126:return tQe;case 35664:return rQe;case 35665:return iQe;case 35666:return nQe;case 35674:return aQe;case 35675:return oQe;case 35676:return sQe;case 5124:case 35670:return lQe;case 35667:case 35671:return uQe;case 35668:case 35672:return cQe;case 35669:case 35673:return dQe;case 5125:return hQe;case 36294:return fQe;case 36295:return pQe;case 36296:return mQe;case 35678:case 36198:case 36298:case 36306:case 35682:return gQe;case 35679:case 36299:case 36307:return vQe;case 35680:case 36300:case 36308:case 36293:return yQe;case 36289:case 36303:case 36311:case 36292:return bQe}}var wQe=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=eQe(t.type)}},xQe=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=_Qe(t.type)}},SQe=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){if(t===void 0)return;let i=this.seq;for(let n=0,a=i.length;n!==a;++n){let o=i[n];o.setValue(e,t[o.id],r)}}},Fz=/(\w+)(\])?(\[|\.)?/g;function LQ(e,t){e.seq.push(t),e.map[t.id]=t}function CQe(e,t,r){let i=e.name,n=i.length;for(Fz.lastIndex=0;;){let a=Fz.exec(i),o=Fz.lastIndex,s=a[1],l=a[2]==="]",u=a[3];if(l&&(s=s|0),u===void 0||u==="["&&o+2===n){LQ(r,u===void 0?new wQe(s,e,t):new xQe(s,e,t));break}else{let c=r.map[s];c===void 0&&(c=new SQe(s),LQ(r,c)),r=c}}}var aR=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){let n=e.getActiveUniform(t,i),a=e.getUniformLocation(t,n.name);CQe(n,a,this)}}setValue(e,t,r,i){let n=this.map[t];n!==void 0&&n.setValue(e,r,i)}setOptional(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let n=0,a=t.length;n!==a;++n){let o=t[n],s=r[o.id];s.needsUpdate!==!1&&o.setValue(e,s.value,i)}}static seqWithValue(e,t){let r=[];for(let i=0,n=e.length;i!==n;++i){let a=e[i];a.id in t&&r.push(a)}return r}};function FQ(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}var EQe=0;function MQe(e,t){let r=e.split(`
`),i=[],n=Math.max(t-6,0),a=Math.min(t+6,r.length);for(let o=n;o<a;o++){let s=o+1;i.push(`${s===t?">":" "} ${s}: ${r[o]}`)}return i.join(`
`)}function PQe(e){switch(e){case Tf:return["Linear","( value )"];case Er:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function NQ(e,t,r){let i=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(i&&n==="")return"";let a=/ERROR: 0:(\d+)/.exec(n);if(a){let o=parseInt(a[1]);return r.toUpperCase()+`

`+n+`

`+MQe(e.getShaderSource(t),o)}else return n}function TQe(e,t){let r=PQe(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function AQe(e,t){let r;switch(t){case B$e:r="Linear";break;case L$e:r="Reinhard";break;case F$e:r="OptimizedCineon";break;case N$e:r="ACESFilmic";break;case U$e:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function OQe(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ZC).join(`
`)}function RQe(e){let t=[];for(let r in e){let i=e[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join(`
`)}function DQe(e,t){let r={},i=e.getProgramParameter(t,35721);for(let n=0;n<i;n++){let a=e.getActiveAttrib(t,n),o=a.name,s=1;a.type===35674&&(s=2),a.type===35675&&(s=3),a.type===35676&&(s=4),r[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return r}function ZC(e){return e!==""}function UQ(e,t){let r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function VQ(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var IQe=/^[ \t]*#include +<([\w\d./]+)>/gm;function r6(e){return e.replace(IQe,jQe)}function jQe(e,t){let r=Tr[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return r6(r)}var zQe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function kQ(e){return e.replace(zQe,BQe)}function BQe(e,t,r,i){let n="";for(let a=parseInt(t);a<parseInt(r);a++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function qQ(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function LQe(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===eW?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===p$e?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===JC&&(t="SHADOWMAP_TYPE_VSM"),t}function FQe(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case lb:case ub:t="ENVMAP_TYPE_CUBE";break;case fP:t="ENVMAP_TYPE_CUBE_UV";break}return t}function NQe(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ub:t="ENVMAP_MODE_REFRACTION";break}return t}function UQe(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case F1e:t="ENVMAP_BLENDING_MULTIPLY";break;case j$e:t="ENVMAP_BLENDING_MIX";break;case z$e:t="ENVMAP_BLENDING_ADD";break}return t}function VQe(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let r=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function kQe(e,t,r,i){let n=e.getContext(),a=r.defines,o=r.vertexShader,s=r.fragmentShader,l=LQe(r),u=FQe(r),c=NQe(r),d=UQe(r),h=VQe(r),f=r.isWebGL2?"":OQe(r),g=RQe(a),p=n.createProgram(),m,y,b=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(m=[g].filter(ZC).join(`
`),m.length>0&&(m+=`
`),y=[f,g].filter(ZC).join(`
`),y.length>0&&(y+=`
`)):(m=[qQ(r),"#define SHADER_NAME "+r.shaderName,g,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ZC).join(`
`),y=[f,qQ(r),"#define SHADER_NAME "+r.shaderName,g,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+c:"",r.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==Cp?"#define TONE_MAPPING":"",r.toneMapping!==Cp?Tr.tonemapping_pars_fragment:"",r.toneMapping!==Cp?AQe("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Tr.encodings_pars_fragment,TQe("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(ZC).join(`
`)),o=r6(o),o=UQ(o,r),o=VQ(o,r),s=r6(s),s=UQ(s,r),s=VQ(s,r),o=kQ(o),s=kQ(s),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,y=["#define varying in",r.glslVersion===ZV?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===ZV?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);let w=b+m+o,x=b+y+s,S=FQ(n,35633,w),C=FQ(n,35632,x);if(n.attachShader(p,S),n.attachShader(p,C),r.index0AttributeName!==void 0?n.bindAttribLocation(p,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(p,0,"position"),n.linkProgram(p),e.debug.checkShaderErrors){let A=n.getProgramInfoLog(p).trim(),P=n.getShaderInfoLog(S).trim(),O=n.getShaderInfoLog(C).trim(),j=!0,D=!0;if(n.getProgramParameter(p,35714)===!1){j=!1;let I=NQ(n,S,"vertex"),q=NQ(n,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(p,35715)+`

Program Info Log: `+A+`
`+I+`
`+q)}else A!==""?console.warn("THREE.WebGLProgram: Program Info Log:",A):(P===""||O==="")&&(D=!1);D&&(this.diagnostics={runnable:j,programLog:A,vertexShader:{log:P,prefix:m},fragmentShader:{log:O,prefix:y}})}n.deleteShader(S),n.deleteShader(C);let T;this.getUniforms=function(){return T===void 0&&(T=new aR(n,p)),T};let M;return this.getAttributes=function(){return M===void 0&&(M=DQe(n,p)),M},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(p),this.program=void 0},this.name=r.shaderName,this.id=EQe++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=S,this.fragmentShader=C,this}var qQe=0,WQe=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),n=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(n)===!1&&(a.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new GQe(e),t.set(e,r)),r}},GQe=class{constructor(e){this.id=qQe++,this.code=e,this.usedTimes=0}};function HQe(e,t,r,i,n,a,o){let s=new nW,l=new WQe,u=[],c=n.isWebGL2,d=n.logarithmicDepthBuffer,h=n.vertexTextures,f=n.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(M,A,P,O,j){let D=O.fog,I=j.geometry,q=M.isMeshStandardMaterial?O.environment:null,$=(M.isMeshStandardMaterial?r:t).get(M.envMap||q),X=$&&$.mapping===fP?$.image.height:null,N=g[M.type];M.precision!==null&&(f=n.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));let Q=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,F=Q!==void 0?Q.length:0,L=0;I.morphAttributes.position!==void 0&&(L=1),I.morphAttributes.normal!==void 0&&(L=2),I.morphAttributes.color!==void 0&&(L=3);let Y,ae,re,H;if(N){let oe=sp[N];Y=oe.vertexShader,ae=oe.fragmentShader}else Y=M.vertexShader,ae=M.fragmentShader,l.update(M),re=l.getVertexShaderID(M),H=l.getFragmentShaderID(M);let se=e.getRenderTarget(),le=M.alphaTest>0,ee=M.clearcoat>0,J=M.iridescence>0;return{isWebGL2:c,shaderID:N,shaderName:M.type,vertexShader:Y,fragmentShader:ae,defines:M.defines,customVertexShaderID:re,customFragmentShaderID:H,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,instancing:j.isInstancedMesh===!0,instancingColor:j.isInstancedMesh===!0&&j.instanceColor!==null,supportsVertexTextures:h,outputEncoding:se===null?e.outputEncoding:se.isXRRenderTarget===!0?se.texture.encoding:Tf,map:!!M.map,matcap:!!M.matcap,envMap:!!$,envMapMode:$&&$.mapping,envMapCubeUVHeight:X,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===r7e,tangentSpaceNormalMap:M.normalMapType===t7e,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===Er,clearcoat:ee,clearcoatMap:ee&&!!M.clearcoatMap,clearcoatRoughnessMap:ee&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:ee&&!!M.clearcoatNormalMap,iridescence:J,iridescenceMap:J&&!!M.iridescenceMap,iridescenceThicknessMap:J&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===X0,alphaMap:!!M.alphaMap,alphaTest:le,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!I.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!I.attributes.color&&I.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!D,useFog:M.fog===!0,fogExp2:D&&D.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:d,skinning:j.isSkinnedMesh===!0,morphTargets:I.morphAttributes.position!==void 0,morphNormals:I.morphAttributes.normal!==void 0,morphColors:I.morphAttributes.color!==void 0,morphTargetsCount:F,morphTextureStride:L,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:e.shadowMap.enabled&&P.length>0,shadowMapType:e.shadowMap.type,toneMapping:M.toneMapped?e.toneMapping:Cp,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Fa,flipSided:M.side===ea,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function m(M){let A=[];if(M.shaderID?A.push(M.shaderID):(A.push(M.customVertexShaderID),A.push(M.customFragmentShaderID)),M.defines!==void 0)for(let P in M.defines)A.push(P),A.push(M.defines[P]);return M.isRawShaderMaterial===!1&&(y(A,M),b(A,M),A.push(e.outputEncoding)),A.push(M.customProgramCacheKey),A.join()}function y(M,A){M.push(A.precision),M.push(A.outputEncoding),M.push(A.envMapMode),M.push(A.envMapCubeUVHeight),M.push(A.combine),M.push(A.vertexUvs),M.push(A.fogExp2),M.push(A.sizeAttenuation),M.push(A.morphTargetsCount),M.push(A.morphAttributeCount),M.push(A.numDirLights),M.push(A.numPointLights),M.push(A.numSpotLights),M.push(A.numSpotLightMaps),M.push(A.numHemiLights),M.push(A.numRectAreaLights),M.push(A.numDirLightShadows),M.push(A.numPointLightShadows),M.push(A.numSpotLightShadows),M.push(A.numSpotLightShadowsWithMaps),M.push(A.shadowMapType),M.push(A.toneMapping),M.push(A.numClippingPlanes),M.push(A.numClipIntersection),M.push(A.depthPacking)}function b(M,A){s.disableAll(),A.isWebGL2&&s.enable(0),A.supportsVertexTextures&&s.enable(1),A.instancing&&s.enable(2),A.instancingColor&&s.enable(3),A.map&&s.enable(4),A.matcap&&s.enable(5),A.envMap&&s.enable(6),A.lightMap&&s.enable(7),A.aoMap&&s.enable(8),A.emissiveMap&&s.enable(9),A.bumpMap&&s.enable(10),A.normalMap&&s.enable(11),A.objectSpaceNormalMap&&s.enable(12),A.tangentSpaceNormalMap&&s.enable(13),A.clearcoat&&s.enable(14),A.clearcoatMap&&s.enable(15),A.clearcoatRoughnessMap&&s.enable(16),A.clearcoatNormalMap&&s.enable(17),A.iridescence&&s.enable(18),A.iridescenceMap&&s.enable(19),A.iridescenceThicknessMap&&s.enable(20),A.displacementMap&&s.enable(21),A.specularMap&&s.enable(22),A.roughnessMap&&s.enable(23),A.metalnessMap&&s.enable(24),A.gradientMap&&s.enable(25),A.alphaMap&&s.enable(26),A.alphaTest&&s.enable(27),A.vertexColors&&s.enable(28),A.vertexAlphas&&s.enable(29),A.vertexUvs&&s.enable(30),A.vertexTangents&&s.enable(31),A.uvsVertexOnly&&s.enable(32),M.push(s.mask),s.disableAll(),A.fog&&s.enable(0),A.useFog&&s.enable(1),A.flatShading&&s.enable(2),A.logarithmicDepthBuffer&&s.enable(3),A.skinning&&s.enable(4),A.morphTargets&&s.enable(5),A.morphNormals&&s.enable(6),A.morphColors&&s.enable(7),A.premultipliedAlpha&&s.enable(8),A.shadowMapEnabled&&s.enable(9),A.physicallyCorrectLights&&s.enable(10),A.doubleSided&&s.enable(11),A.flipSided&&s.enable(12),A.useDepthPacking&&s.enable(13),A.dithering&&s.enable(14),A.specularIntensityMap&&s.enable(15),A.specularColorMap&&s.enable(16),A.transmission&&s.enable(17),A.transmissionMap&&s.enable(18),A.thicknessMap&&s.enable(19),A.sheen&&s.enable(20),A.sheenColorMap&&s.enable(21),A.sheenRoughnessMap&&s.enable(22),A.decodeVideoTexture&&s.enable(23),A.opaque&&s.enable(24),M.push(s.mask)}function w(M){let A=g[M.type],P;if(A){let O=sp[A];P=ww.clone(O.uniforms)}else P=M.uniforms;return P}function x(M,A){let P;for(let O=0,j=u.length;O<j;O++){let D=u[O];if(D.cacheKey===A){P=D,++P.usedTimes;break}}return P===void 0&&(P=new kQe(e,A,M,a),u.push(P)),P}function S(M){if(--M.usedTimes===0){let A=u.indexOf(M);u[A]=u[u.length-1],u.pop(),M.destroy()}}function C(M){l.remove(M)}function T(){l.dispose()}return{getParameters:p,getProgramCacheKey:m,getUniforms:w,acquireProgram:x,releaseProgram:S,releaseShaderCache:C,programs:u,dispose:T}}function $Qe(){let e=new WeakMap;function t(a){let o=e.get(a);return o===void 0&&(o={},e.set(a,o)),o}function r(a){e.delete(a)}function i(a,o,s){e.get(a)[o]=s}function n(){e=new WeakMap}return{get:t,remove:r,update:i,dispose:n}}function XQe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function WQ(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function GQ(){let e=[],t=0,r=[],i=[],n=[];function a(){t=0,r.length=0,i.length=0,n.length=0}function o(d,h,f,g,p,m){let y=e[t];return y===void 0?(y={id:d.id,object:d,geometry:h,material:f,groupOrder:g,renderOrder:d.renderOrder,z:p,group:m},e[t]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=f,y.groupOrder=g,y.renderOrder=d.renderOrder,y.z=p,y.group=m),t++,y}function s(d,h,f,g,p,m){let y=o(d,h,f,g,p,m);f.transmission>0?i.push(y):f.transparent===!0?n.push(y):r.push(y)}function l(d,h,f,g,p,m){let y=o(d,h,f,g,p,m);f.transmission>0?i.unshift(y):f.transparent===!0?n.unshift(y):r.unshift(y)}function u(d,h){r.length>1&&r.sort(d||XQe),i.length>1&&i.sort(h||WQ),n.length>1&&n.sort(h||WQ)}function c(){for(let d=t,h=e.length;d<h;d++){let f=e[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:r,transmissive:i,transparent:n,init:a,push:s,unshift:l,finish:c,sort:u}}function YQe(){let e=new WeakMap;function t(i,n){let a=e.get(i),o;return a===void 0?(o=new GQ,e.set(i,[o])):n>=a.length?(o=new GQ,a.push(o)):o=a[n],o}function r(){e=new WeakMap}return{get:t,dispose:r}}function KQe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new k,color:new er};break;case"SpotLight":r={position:new k,direction:new k,color:new er,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new k,color:new er,distance:0,decay:0};break;case"HemisphereLight":r={direction:new k,skyColor:new er,groundColor:new er};break;case"RectAreaLight":r={color:new er,position:new k,halfWidth:new k,halfHeight:new k};break}return e[t.id]=r,r}}}function QQe(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var JQe=0;function ZQe(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function eJe(e,t){let r=new KQe,i=QQe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)n.probe.push(new k);let a=new k,o=new dt,s=new dt;function l(c,d){let h=0,f=0,g=0;for(let O=0;O<9;O++)n.probe[O].set(0,0,0);let p=0,m=0,y=0,b=0,w=0,x=0,S=0,C=0,T=0,M=0;c.sort(ZQe);let A=d!==!0?Math.PI:1;for(let O=0,j=c.length;O<j;O++){let D=c[O],I=D.color,q=D.intensity,$=D.distance,X=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)h+=I.r*q*A,f+=I.g*q*A,g+=I.b*q*A;else if(D.isLightProbe)for(let N=0;N<9;N++)n.probe[N].addScaledVector(D.sh.coefficients[N],q);else if(D.isDirectionalLight){let N=r.get(D);if(N.color.copy(D.color).multiplyScalar(D.intensity*A),D.castShadow){let Q=D.shadow,F=i.get(D);F.shadowBias=Q.bias,F.shadowNormalBias=Q.normalBias,F.shadowRadius=Q.radius,F.shadowMapSize=Q.mapSize,n.directionalShadow[p]=F,n.directionalShadowMap[p]=X,n.directionalShadowMatrix[p]=D.shadow.matrix,x++}n.directional[p]=N,p++}else if(D.isSpotLight){let N=r.get(D);N.position.setFromMatrixPosition(D.matrixWorld),N.color.copy(I).multiplyScalar(q*A),N.distance=$,N.coneCos=Math.cos(D.angle),N.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),N.decay=D.decay,n.spot[y]=N;let Q=D.shadow;if(D.map&&(n.spotLightMap[T]=D.map,T++,Q.updateMatrices(D),D.castShadow&&M++),n.spotLightMatrix[y]=Q.matrix,D.castShadow){let F=i.get(D);F.shadowBias=Q.bias,F.shadowNormalBias=Q.normalBias,F.shadowRadius=Q.radius,F.shadowMapSize=Q.mapSize,n.spotShadow[y]=F,n.spotShadowMap[y]=X,C++}y++}else if(D.isRectAreaLight){let N=r.get(D);N.color.copy(I).multiplyScalar(q),N.halfWidth.set(D.width*.5,0,0),N.halfHeight.set(0,D.height*.5,0),n.rectArea[b]=N,b++}else if(D.isPointLight){let N=r.get(D);if(N.color.copy(D.color).multiplyScalar(D.intensity*A),N.distance=D.distance,N.decay=D.decay,D.castShadow){let Q=D.shadow,F=i.get(D);F.shadowBias=Q.bias,F.shadowNormalBias=Q.normalBias,F.shadowRadius=Q.radius,F.shadowMapSize=Q.mapSize,F.shadowCameraNear=Q.camera.near,F.shadowCameraFar=Q.camera.far,n.pointShadow[m]=F,n.pointShadowMap[m]=X,n.pointShadowMatrix[m]=D.shadow.matrix,S++}n.point[m]=N,m++}else if(D.isHemisphereLight){let N=r.get(D);N.skyColor.copy(D.color).multiplyScalar(q*A),N.groundColor.copy(D.groundColor).multiplyScalar(q*A),n.hemi[w]=N,w++}}b>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Et.LTC_FLOAT_1,n.rectAreaLTC2=Et.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Et.LTC_HALF_1,n.rectAreaLTC2=Et.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=h,n.ambient[1]=f,n.ambient[2]=g;let P=n.hash;(P.directionalLength!==p||P.pointLength!==m||P.spotLength!==y||P.rectAreaLength!==b||P.hemiLength!==w||P.numDirectionalShadows!==x||P.numPointShadows!==S||P.numSpotShadows!==C||P.numSpotMaps!==T)&&(n.directional.length=p,n.spot.length=y,n.rectArea.length=b,n.point.length=m,n.hemi.length=w,n.directionalShadow.length=x,n.directionalShadowMap.length=x,n.pointShadow.length=S,n.pointShadowMap.length=S,n.spotShadow.length=C,n.spotShadowMap.length=C,n.directionalShadowMatrix.length=x,n.pointShadowMatrix.length=S,n.spotLightMatrix.length=C+T-M,n.spotLightMap.length=T,n.numSpotLightShadowsWithMaps=M,P.directionalLength=p,P.pointLength=m,P.spotLength=y,P.rectAreaLength=b,P.hemiLength=w,P.numDirectionalShadows=x,P.numPointShadows=S,P.numSpotShadows=C,P.numSpotMaps=T,n.version=JQe++)}function u(c,d){let h=0,f=0,g=0,p=0,m=0,y=d.matrixWorldInverse;for(let b=0,w=c.length;b<w;b++){let x=c[b];if(x.isDirectionalLight){let S=n.directional[h];S.direction.setFromMatrixPosition(x.matrixWorld),a.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(a),S.direction.transformDirection(y),h++}else if(x.isSpotLight){let S=n.spot[g];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(y),S.direction.setFromMatrixPosition(x.matrixWorld),a.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(a),S.direction.transformDirection(y),g++}else if(x.isRectAreaLight){let S=n.rectArea[p];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(y),s.identity(),o.copy(x.matrixWorld),o.premultiply(y),s.extractRotation(o),S.halfWidth.set(x.width*.5,0,0),S.halfHeight.set(0,x.height*.5,0),S.halfWidth.applyMatrix4(s),S.halfHeight.applyMatrix4(s),p++}else if(x.isPointLight){let S=n.point[f];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(y),f++}else if(x.isHemisphereLight){let S=n.hemi[m];S.direction.setFromMatrixPosition(x.matrixWorld),S.direction.transformDirection(y),m++}}}return{setup:l,setupView:u,state:n}}function HQ(e,t){let r=new eJe(e,t),i=[],n=[];function a(){i.length=0,n.length=0}function o(c){i.push(c)}function s(c){n.push(c)}function l(c){r.setup(i,c)}function u(c){r.setupView(i,c)}return{init:a,state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:s}}function tJe(e,t){let r=new WeakMap;function i(a,o=0){let s=r.get(a),l;return s===void 0?(l=new HQ(e,t),r.set(a,[l])):o>=s.length?(l=new HQ(e,t),s.push(l)):l=s[o],l}function n(){r=new WeakMap}return{get:i,dispose:n}}var a_e=class extends pP{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Zm,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},rJe=class extends pP{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new k,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},iJe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,nJe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function aJe(e,t,r){let i=new oW,n=new ze,a=new ze,o=new hr,s=new a_e({depthPacking:W1e}),l=new rJe,u={},c=r.maxTextureSize,d={[Pf]:ea,[ea]:Pf,[Fa]:Fa},h=new qr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ze},radius:{value:4}},vertexShader:iJe,fragmentShader:nJe}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let g=new Wt;g.setAttribute("position",new tr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let p=new Ci(g,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=eW,this.render=function(x,S,C){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||x.length===0)return;let T=e.getRenderTarget(),M=e.getActiveCubeFace(),A=e.getActiveMipmapLevel(),P=e.state;P.setBlending(Cn),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);for(let O=0,j=x.length;O<j;O++){let D=x[O],I=D.shadow;if(I===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(I.autoUpdate===!1&&I.needsUpdate===!1)continue;n.copy(I.mapSize);let q=I.getFrameExtents();if(n.multiply(q),a.copy(I.mapSize),(n.x>c||n.y>c)&&(n.x>c&&(a.x=Math.floor(c/q.x),n.x=a.x*q.x,I.mapSize.x=a.x),n.y>c&&(a.y=Math.floor(c/q.y),n.y=a.y*q.y,I.mapSize.y=a.y)),I.map===null){let X=this.type!==JC?{minFilter:Dr,magFilter:Dr}:{};I.map=new kr(n.x,n.y,X),I.map.texture.name=D.name+".shadowMap",I.camera.updateProjectionMatrix()}e.setRenderTarget(I.map),e.clear();let $=I.getViewportCount();for(let X=0;X<$;X++){let N=I.getViewport(X);o.set(a.x*N.x,a.y*N.y,a.x*N.z,a.y*N.w),P.viewport(o),I.updateMatrices(D,X),i=I.getFrustum(),w(S,C,I.camera,D,this.type)}I.isPointLightShadow!==!0&&this.type===JC&&y(I,C),I.needsUpdate=!1}m.needsUpdate=!1,e.setRenderTarget(T,M,A)};function y(x,S){let C=t.update(p);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new kr(n.x,n.y)),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,e.setRenderTarget(x.mapPass),e.clear(),e.renderBufferDirect(S,null,C,h,p,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,e.setRenderTarget(x.map),e.clear(),e.renderBufferDirect(S,null,C,f,p,null)}function b(x,S,C,T,M,A){let P=null,O=C.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(O!==void 0)P=O;else if(P=C.isPointLight===!0?l:s,e.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){let j=P.uuid,D=S.uuid,I=u[j];I===void 0&&(I={},u[j]=I);let q=I[D];q===void 0&&(q=P.clone(),I[D]=q),P=q}return P.visible=S.visible,P.wireframe=S.wireframe,A===JC?P.side=S.shadowSide!==null?S.shadowSide:S.side:P.side=S.shadowSide!==null?S.shadowSide:d[S.side],P.alphaMap=S.alphaMap,P.alphaTest=S.alphaTest,P.map=S.map,P.clipShadows=S.clipShadows,P.clippingPlanes=S.clippingPlanes,P.clipIntersection=S.clipIntersection,P.displacementMap=S.displacementMap,P.displacementScale=S.displacementScale,P.displacementBias=S.displacementBias,P.wireframeLinewidth=S.wireframeLinewidth,P.linewidth=S.linewidth,C.isPointLight===!0&&P.isMeshDistanceMaterial===!0&&(P.referencePosition.setFromMatrixPosition(C.matrixWorld),P.nearDistance=T,P.farDistance=M),P}function w(x,S,C,T,M){if(x.visible===!1)return;if(x.layers.test(S.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&M===JC)&&(!x.frustumCulled||i.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,x.matrixWorld);let P=t.update(x),O=x.material;if(Array.isArray(O)){let j=P.groups;for(let D=0,I=j.length;D<I;D++){let q=j[D],$=O[q.materialIndex];if($&&$.visible){let X=b(x,$,T,C.near,C.far,M);e.renderBufferDirect(C,null,P,X,x,q)}}}else if(O.visible){let j=b(x,O,T,C.near,C.far,M);e.renderBufferDirect(C,null,P,j,x,null)}}let A=x.children;for(let P=0,O=A.length;P<O;P++)w(A[P],S,C,T,M)}}function oJe(e,t,r){let i=r.isWebGL2;function n(){let Be=!1,Ye=new hr,$e=null,mt=new hr(0,0,0,0);return{setMask:function(It){$e!==It&&!Be&&(e.colorMask(It,It,It,It),$e=It)},setLocked:function(It){Be=It},setClear:function(It,qt,mr,Rr,ye){ye===!0&&(It*=Rr,qt*=Rr,mr*=Rr),Ye.set(It,qt,mr,Rr),mt.equals(Ye)===!1&&(e.clearColor(It,qt,mr,Rr),mt.copy(Ye))},reset:function(){Be=!1,$e=null,mt.set(-1,0,0,0)}}}function a(){let Be=!1,Ye=null,$e=null,mt=null;return{setTest:function(It){It?le(2929):ee(2929)},setMask:function(It){Ye!==It&&!Be&&(e.depthMask(It),Ye=It)},setFunc:function(It){if($e!==It){switch(It){case P$e:e.depthFunc(512);break;case T$e:e.depthFunc(519);break;case A$e:e.depthFunc(513);break;case XV:e.depthFunc(515);break;case O$e:e.depthFunc(514);break;case R$e:e.depthFunc(518);break;case D$e:e.depthFunc(516);break;case I$e:e.depthFunc(517);break;default:e.depthFunc(515)}$e=It}},setLocked:function(It){Be=It},setClear:function(It){mt!==It&&(e.clearDepth(It),mt=It)},reset:function(){Be=!1,Ye=null,$e=null,mt=null}}}function o(){let Be=!1,Ye=null,$e=null,mt=null,It=null,qt=null,mr=null,Rr=null,ye=null;return{setTest:function(xe){Be||(xe?le(2960):ee(2960))},setMask:function(xe){Ye!==xe&&!Be&&(e.stencilMask(xe),Ye=xe)},setFunc:function(xe,He,Xe){($e!==xe||mt!==He||It!==Xe)&&(e.stencilFunc(xe,He,Xe),$e=xe,mt=He,It=Xe)},setOp:function(xe,He,Xe){(qt!==xe||mr!==He||Rr!==Xe)&&(e.stencilOp(xe,He,Xe),qt=xe,mr=He,Rr=Xe)},setLocked:function(xe){Be=xe},setClear:function(xe){ye!==xe&&(e.clearStencil(xe),ye=xe)},reset:function(){Be=!1,Ye=null,$e=null,mt=null,It=null,qt=null,mr=null,Rr=null,ye=null}}}let s=new n,l=new a,u=new o,c=new WeakMap,d=new WeakMap,h={},f={},g=new WeakMap,p=[],m=null,y=!1,b=null,w=null,x=null,S=null,C=null,T=null,M=null,A=!1,P=null,O=null,j=null,D=null,I=null,q=e.getParameter(35661),$=!1,X=0,N=e.getParameter(7938);N.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(N)[1]),$=X>=1):N.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),$=X>=2);let Q=null,F={},L=e.getParameter(3088),Y=e.getParameter(2978),ae=new hr().fromArray(L),re=new hr().fromArray(Y);function H(Be,Ye,$e){let mt=new Uint8Array(4),It=e.createTexture();e.bindTexture(Be,It),e.texParameteri(Be,10241,9728),e.texParameteri(Be,10240,9728);for(let qt=0;qt<$e;qt++)e.texImage2D(Ye+qt,0,6408,1,1,0,6408,5121,mt);return It}let se={};se[3553]=H(3553,3553,1),se[34067]=H(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),u.setClear(0),le(2929),l.setFunc(XV),Ce(!1),Ee(FK),le(2884),ge(Cn);function le(Be){h[Be]!==!0&&(e.enable(Be),h[Be]=!0)}function ee(Be){h[Be]!==!1&&(e.disable(Be),h[Be]=!1)}function J(Be,Ye){return f[Be]!==Ye?(e.bindFramebuffer(Be,Ye),f[Be]=Ye,i&&(Be===36009&&(f[36160]=Ye),Be===36160&&(f[36009]=Ye)),!0):!1}function oe(Be,Ye){let $e=p,mt=!1;if(Be)if($e=g.get(Ye),$e===void 0&&($e=[],g.set(Ye,$e)),Be.isWebGLMultipleRenderTargets){let It=Be.texture;if($e.length!==It.length||$e[0]!==36064){for(let qt=0,mr=It.length;qt<mr;qt++)$e[qt]=36064+qt;$e.length=It.length,mt=!0}}else $e[0]!==36064&&($e[0]=36064,mt=!0);else $e[0]!==1029&&($e[0]=1029,mt=!0);mt&&(r.isWebGL2?e.drawBuffers($e):t.get("WEBGL_draw_buffers").drawBuffersWEBGL($e))}function me(Be){return m!==Be?(e.useProgram(Be),m=Be,!0):!1}let be={[L1]:32774,[g$e]:32778,[v$e]:32779};if(i)be[kK]=32775,be[qK]=32776;else{let Be=t.get("EXT_blend_minmax");Be!==null&&(be[kK]=Be.MIN_EXT,be[qK]=Be.MAX_EXT)}let de={[y$e]:0,[b$e]:1,[_$e]:768,[B1e]:770,[M$e]:776,[C$e]:774,[x$e]:772,[w$e]:769,[L1e]:771,[E$e]:775,[S$e]:773};function ge(Be,Ye,$e,mt,It,qt,mr,Rr){if(Be===Cn){y===!0&&(ee(3042),y=!1);return}if(y===!1&&(le(3042),y=!0),Be!==m$e){if(Be!==b||Rr!==A){if((w!==L1||C!==L1)&&(e.blendEquation(32774),w=L1,C=L1),Rr)switch(Be){case X0:e.blendFuncSeparate(1,771,1,771);break;case NK:e.blendFunc(1,1);break;case UK:e.blendFuncSeparate(0,769,0,1);break;case VK:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be);break}else switch(Be){case X0:e.blendFuncSeparate(770,771,1,771);break;case NK:e.blendFunc(770,1);break;case UK:e.blendFuncSeparate(0,769,0,1);break;case VK:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be);break}x=null,S=null,T=null,M=null,b=Be,A=Rr}return}It=It||Ye,qt=qt||$e,mr=mr||mt,(Ye!==w||It!==C)&&(e.blendEquationSeparate(be[Ye],be[It]),w=Ye,C=It),($e!==x||mt!==S||qt!==T||mr!==M)&&(e.blendFuncSeparate(de[$e],de[mt],de[qt],de[mr]),x=$e,S=mt,T=qt,M=mr),b=Be,A=!1}function ce(Be,Ye){Be.side===Fa?ee(2884):le(2884);let $e=Be.side===ea;Ye&&($e=!$e),Ce($e),Be.blending===X0&&Be.transparent===!1?ge(Cn):ge(Be.blending,Be.blendEquation,Be.blendSrc,Be.blendDst,Be.blendEquationAlpha,Be.blendSrcAlpha,Be.blendDstAlpha,Be.premultipliedAlpha),l.setFunc(Be.depthFunc),l.setTest(Be.depthTest),l.setMask(Be.depthWrite),s.setMask(Be.colorWrite);let mt=Be.stencilWrite;u.setTest(mt),mt&&(u.setMask(Be.stencilWriteMask),u.setFunc(Be.stencilFunc,Be.stencilRef,Be.stencilFuncMask),u.setOp(Be.stencilFail,Be.stencilZFail,Be.stencilZPass)),he(Be.polygonOffset,Be.polygonOffsetFactor,Be.polygonOffsetUnits),Be.alphaToCoverage===!0?le(32926):ee(32926)}function Ce(Be){P!==Be&&(Be?e.frontFace(2304):e.frontFace(2305),P=Be)}function Ee(Be){Be!==h$e?(le(2884),Be!==O&&(Be===FK?e.cullFace(1029):Be===f$e?e.cullFace(1028):e.cullFace(1032))):ee(2884),O=Be}function Me(Be){Be!==j&&($&&e.lineWidth(Be),j=Be)}function he(Be,Ye,$e){Be?(le(32823),(D!==Ye||I!==$e)&&(e.polygonOffset(Ye,$e),D=Ye,I=$e)):ee(32823)}function Ae(Be){Be?le(3089):ee(3089)}function De(Be){Be===void 0&&(Be=33984+q-1),Q!==Be&&(e.activeTexture(Be),Q=Be)}function Z(Be,Ye,$e){$e===void 0&&(Q===null?$e=33984+q-1:$e=Q);let mt=F[$e];mt===void 0&&(mt={type:void 0,texture:void 0},F[$e]=mt),(mt.type!==Be||mt.texture!==Ye)&&(Q!==$e&&(e.activeTexture($e),Q=$e),e.bindTexture(Be,Ye||se[Be]),mt.type=Be,mt.texture=Ye)}function ie(){let Be=F[Q];Be!==void 0&&Be.type!==void 0&&(e.bindTexture(Be.type,null),Be.type=void 0,Be.texture=void 0)}function Te(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Ue(){try{e.compressedTexImage3D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function ne(){try{e.texSubImage2D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function K(){try{e.texSubImage3D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function B(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function U(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function te(){try{e.texStorage2D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function ve(){try{e.texStorage3D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Re(){try{e.texImage2D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Fe(){try{e.texImage3D.apply(e,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function et(Be){ae.equals(Be)===!1&&(e.scissor(Be.x,Be.y,Be.z,Be.w),ae.copy(Be))}function Ze(Be){re.equals(Be)===!1&&(e.viewport(Be.x,Be.y,Be.z,Be.w),re.copy(Be))}function Pe(Be,Ye){let $e=d.get(Ye);$e===void 0&&($e=new WeakMap,d.set(Ye,$e));let mt=$e.get(Be);mt===void 0&&(mt=e.getUniformBlockIndex(Ye,Be.name),$e.set(Be,mt))}function Le(Be,Ye){let $e=d.get(Ye).get(Be);c.get(Ye)!==$e&&(e.uniformBlockBinding(Ye,$e,Be.__bindingPointIndex),c.set(Ye,$e))}function ht(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),i===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},Q=null,F={},f={},g=new WeakMap,p=[],m=null,y=!1,b=null,w=null,x=null,S=null,C=null,T=null,M=null,A=!1,P=null,O=null,j=null,D=null,I=null,ae.set(0,0,e.canvas.width,e.canvas.height),re.set(0,0,e.canvas.width,e.canvas.height),s.reset(),l.reset(),u.reset()}return{buffers:{color:s,depth:l,stencil:u},enable:le,disable:ee,bindFramebuffer:J,drawBuffers:oe,useProgram:me,setBlending:ge,setMaterial:ce,setFlipSided:Ce,setCullFace:Ee,setLineWidth:Me,setPolygonOffset:he,setScissorTest:Ae,activeTexture:De,bindTexture:Z,unbindTexture:ie,compressedTexImage2D:Te,compressedTexImage3D:Ue,texImage2D:Re,texImage3D:Fe,updateUBOMapping:Pe,uniformBlockBinding:Le,texStorage2D:te,texStorage3D:ve,texSubImage2D:ne,texSubImage3D:K,compressedTexSubImage2D:B,compressedTexSubImage3D:U,scissor:et,viewport:Ze,reset:ht}}function sJe(e,t,r,i,n,a,o){let s=n.isWebGL2,l=n.maxTextures,u=n.maxCubemapSize,c=n.maxTextureSize,d=n.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap,p,m=new WeakMap,y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(Z,ie){return y?new OffscreenCanvas(Z,ie):mM("canvas")}function w(Z,ie,Te,Ue){let ne=1;if((Z.width>Ue||Z.height>Ue)&&(ne=Ue/Math.max(Z.width,Z.height)),ne<1||ie===!0)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap){let K=ie?uD:Math.floor,B=K(ne*Z.width),U=K(ne*Z.height);p===void 0&&(p=b(B,U));let te=Te?b(B,U):p;return te.width=B,te.height=U,te.getContext("2d").drawImage(Z,0,0,B,U),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Z.width+"x"+Z.height+") to ("+B+"x"+U+")."),te}else return"data"in Z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Z.width+"x"+Z.height+")."),Z;return Z}function x(Z){return t6(Z.width)&&t6(Z.height)}function S(Z){return s?!1:Z.wrapS!==Di||Z.wrapT!==Di||Z.minFilter!==Dr&&Z.minFilter!==Ar}function C(Z,ie){return Z.generateMipmaps&&ie&&Z.minFilter!==Dr&&Z.minFilter!==Ar}function T(Z){e.generateMipmap(Z)}function M(Z,ie,Te,Ue,ne=!1){if(s===!1)return ie;if(Z!==null){if(e[Z]!==void 0)return e[Z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let K=ie;return ie===6403&&(Te===5126&&(K=33326),Te===5131&&(K=33325),Te===5121&&(K=33321)),ie===33319&&(Te===5126&&(K=33328),Te===5131&&(K=33327),Te===5121&&(K=33323)),ie===6408&&(Te===5126&&(K=34836),Te===5131&&(K=34842),Te===5121&&(K=Ue===Er&&ne===!1?35907:32856),Te===32819&&(K=32854),Te===32820&&(K=32855)),(K===33325||K===33326||K===33327||K===33328||K===34842||K===34836)&&t.get("EXT_color_buffer_float"),K}function A(Z,ie,Te){return C(Z,Te)===!0||Z.isFramebufferTexture&&Z.minFilter!==Dr&&Z.minFilter!==Ar?Math.log2(Math.max(ie.width,ie.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?ie.mipmaps.length:1}function P(Z){return Z===Dr||Z===WK||Z===lz?9728:9729}function O(Z){let ie=Z.target;ie.removeEventListener("dispose",O),D(ie),ie.isVideoTexture&&g.delete(ie)}function j(Z){let ie=Z.target;ie.removeEventListener("dispose",j),q(ie)}function D(Z){let ie=i.get(Z);if(ie.__webglInit===void 0)return;let Te=Z.source,Ue=m.get(Te);if(Ue){let ne=Ue[ie.__cacheKey];ne.usedTimes--,ne.usedTimes===0&&I(Z),Object.keys(Ue).length===0&&m.delete(Te)}i.remove(Z)}function I(Z){let ie=i.get(Z);e.deleteTexture(ie.__webglTexture);let Te=Z.source,Ue=m.get(Te);delete Ue[ie.__cacheKey],o.memory.textures--}function q(Z){let ie=Z.texture,Te=i.get(Z),Ue=i.get(ie);if(Ue.__webglTexture!==void 0&&(e.deleteTexture(Ue.__webglTexture),o.memory.textures--),Z.depthTexture&&Z.depthTexture.dispose(),Z.isWebGLCubeRenderTarget)for(let ne=0;ne<6;ne++)e.deleteFramebuffer(Te.__webglFramebuffer[ne]),Te.__webglDepthbuffer&&e.deleteRenderbuffer(Te.__webglDepthbuffer[ne]);else{if(e.deleteFramebuffer(Te.__webglFramebuffer),Te.__webglDepthbuffer&&e.deleteRenderbuffer(Te.__webglDepthbuffer),Te.__webglMultisampledFramebuffer&&e.deleteFramebuffer(Te.__webglMultisampledFramebuffer),Te.__webglColorRenderbuffer)for(let ne=0;ne<Te.__webglColorRenderbuffer.length;ne++)Te.__webglColorRenderbuffer[ne]&&e.deleteRenderbuffer(Te.__webglColorRenderbuffer[ne]);Te.__webglDepthRenderbuffer&&e.deleteRenderbuffer(Te.__webglDepthRenderbuffer)}if(Z.isWebGLMultipleRenderTargets)for(let ne=0,K=ie.length;ne<K;ne++){let B=i.get(ie[ne]);B.__webglTexture&&(e.deleteTexture(B.__webglTexture),o.memory.textures--),i.remove(ie[ne])}i.remove(ie),i.remove(Z)}let $=0;function X(){$=0}function N(){let Z=$;return Z>=l&&console.warn("THREE.WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+l),$+=1,Z}function Q(Z){let ie=[];return ie.push(Z.wrapS),ie.push(Z.wrapT),ie.push(Z.wrapR||0),ie.push(Z.magFilter),ie.push(Z.minFilter),ie.push(Z.anisotropy),ie.push(Z.internalFormat),ie.push(Z.format),ie.push(Z.type),ie.push(Z.generateMipmaps),ie.push(Z.premultiplyAlpha),ie.push(Z.flipY),ie.push(Z.unpackAlignment),ie.push(Z.encoding),ie.join()}function F(Z,ie){let Te=i.get(Z);if(Z.isVideoTexture&&Ae(Z),Z.isRenderTargetTexture===!1&&Z.version>0&&Te.__version!==Z.version){let Ue=Z.image;if(Ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ee(Te,Z,ie);return}}r.bindTexture(3553,Te.__webglTexture,33984+ie)}function L(Z,ie){let Te=i.get(Z);if(Z.version>0&&Te.__version!==Z.version){ee(Te,Z,ie);return}r.bindTexture(35866,Te.__webglTexture,33984+ie)}function Y(Z,ie){let Te=i.get(Z);if(Z.version>0&&Te.__version!==Z.version){ee(Te,Z,ie);return}r.bindTexture(32879,Te.__webglTexture,33984+ie)}function ae(Z,ie){let Te=i.get(Z);if(Z.version>0&&Te.__version!==Z.version){J(Te,Z,ie);return}r.bindTexture(34067,Te.__webglTexture,33984+ie)}let re={[Om]:10497,[Di]:33071,[QV]:33648},H={[Dr]:9728,[WK]:9984,[lz]:9986,[Ar]:9729,[V$e]:9985,[q_]:9987};function se(Z,ie,Te){if(Te?(e.texParameteri(Z,10242,re[ie.wrapS]),e.texParameteri(Z,10243,re[ie.wrapT]),(Z===32879||Z===35866)&&e.texParameteri(Z,32882,re[ie.wrapR]),e.texParameteri(Z,10240,H[ie.magFilter]),e.texParameteri(Z,10241,H[ie.minFilter])):(e.texParameteri(Z,10242,33071),e.texParameteri(Z,10243,33071),(Z===32879||Z===35866)&&e.texParameteri(Z,32882,33071),(ie.wrapS!==Di||ie.wrapT!==Di)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(Z,10240,P(ie.magFilter)),e.texParameteri(Z,10241,P(ie.minFilter)),ie.minFilter!==Dr&&ie.minFilter!==Ar&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let Ue=t.get("EXT_texture_filter_anisotropic");if(ie.magFilter===Dr||ie.minFilter!==lz&&ie.minFilter!==q_||ie.type===ci&&t.has("OES_texture_float_linear")===!1||s===!1&&ie.type===Gm&&t.has("OES_texture_half_float_linear")===!1)return;(ie.anisotropy>1||i.get(ie).__currentAnisotropy)&&(e.texParameterf(Z,Ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ie.anisotropy,n.getMaxAnisotropy())),i.get(ie).__currentAnisotropy=ie.anisotropy)}}function le(Z,ie){let Te=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,ie.addEventListener("dispose",O));let Ue=ie.source,ne=m.get(Ue);ne===void 0&&(ne={},m.set(Ue,ne));let K=Q(ie);if(K!==Z.__cacheKey){ne[K]===void 0&&(ne[K]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,Te=!0),ne[K].usedTimes++;let B=ne[Z.__cacheKey];B!==void 0&&(ne[Z.__cacheKey].usedTimes--,B.usedTimes===0&&I(ie)),Z.__cacheKey=K,Z.__webglTexture=ne[K].texture}return Te}function ee(Z,ie,Te){let Ue=3553;(ie.isDataArrayTexture||ie.isCompressedArrayTexture)&&(Ue=35866),ie.isData3DTexture&&(Ue=32879);let ne=le(Z,ie),K=ie.source;r.bindTexture(Ue,Z.__webglTexture,33984+Te);let B=i.get(K);if(K.version!==B.__version||ne===!0){r.activeTexture(33984+Te),e.pixelStorei(37440,ie.flipY),e.pixelStorei(37441,ie.premultiplyAlpha),e.pixelStorei(3317,ie.unpackAlignment),e.pixelStorei(37443,0);let U=S(ie)&&x(ie.image)===!1,te=w(ie.image,U,!1,c);te=De(ie,te);let ve=x(te)||s,Re=a.convert(ie.format,ie.encoding),Fe=a.convert(ie.type),et=M(ie.internalFormat,Re,Fe,ie.encoding,ie.isVideoTexture);se(Ue,ie,ve);let Ze,Pe=ie.mipmaps,Le=s&&ie.isVideoTexture!==!0,ht=B.__version===void 0||ne===!0,Be=A(ie,te,ve);if(ie.isDepthTexture)et=6402,s?ie.type===ci?et=36012:ie.type===Rm?et=33190:ie.type===Y0?et=35056:et=33189:ie.type===ci&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ie.format===K0&&et===6402&&ie.type!==U1e&&ie.type!==Rm&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ie.type=Rm,Fe=a.convert(ie.type)),ie.format===cb&&et===6402&&(et=34041,ie.type!==Y0&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ie.type=Y0,Fe=a.convert(ie.type))),ht&&(Le?r.texStorage2D(3553,1,et,te.width,te.height):r.texImage2D(3553,0,et,te.width,te.height,0,Re,Fe,null));else if(ie.isDataTexture)if(Pe.length>0&&ve){Le&&ht&&r.texStorage2D(3553,Be,et,Pe[0].width,Pe[0].height);for(let Ye=0,$e=Pe.length;Ye<$e;Ye++)Ze=Pe[Ye],Le?r.texSubImage2D(3553,Ye,0,0,Ze.width,Ze.height,Re,Fe,Ze.data):r.texImage2D(3553,Ye,et,Ze.width,Ze.height,0,Re,Fe,Ze.data);ie.generateMipmaps=!1}else Le?(ht&&r.texStorage2D(3553,Be,et,te.width,te.height),r.texSubImage2D(3553,0,0,0,te.width,te.height,Re,Fe,te.data)):r.texImage2D(3553,0,et,te.width,te.height,0,Re,Fe,te.data);else if(ie.isCompressedTexture)if(ie.isCompressedArrayTexture){Le&&ht&&r.texStorage3D(35866,Be,et,Pe[0].width,Pe[0].height,te.depth);for(let Ye=0,$e=Pe.length;Ye<$e;Ye++)Ze=Pe[Ye],ie.format!==zi?Re!==null?Le?r.compressedTexSubImage3D(35866,Ye,0,0,0,Ze.width,Ze.height,te.depth,Re,Ze.data,0,0):r.compressedTexImage3D(35866,Ye,et,Ze.width,Ze.height,te.depth,0,Ze.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?r.texSubImage3D(35866,Ye,0,0,0,Ze.width,Ze.height,te.depth,Re,Fe,Ze.data):r.texImage3D(35866,Ye,et,Ze.width,Ze.height,te.depth,0,Re,Fe,Ze.data)}else{Le&&ht&&r.texStorage2D(3553,Be,et,Pe[0].width,Pe[0].height);for(let Ye=0,$e=Pe.length;Ye<$e;Ye++)Ze=Pe[Ye],ie.format!==zi?Re!==null?Le?r.compressedTexSubImage2D(3553,Ye,0,0,Ze.width,Ze.height,Re,Ze.data):r.compressedTexImage2D(3553,Ye,et,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?r.texSubImage2D(3553,Ye,0,0,Ze.width,Ze.height,Re,Fe,Ze.data):r.texImage2D(3553,Ye,et,Ze.width,Ze.height,0,Re,Fe,Ze.data)}else if(ie.isDataArrayTexture)Le?(ht&&r.texStorage3D(35866,Be,et,te.width,te.height,te.depth),r.texSubImage3D(35866,0,0,0,0,te.width,te.height,te.depth,Re,Fe,te.data)):r.texImage3D(35866,0,et,te.width,te.height,te.depth,0,Re,Fe,te.data);else if(ie.isData3DTexture)Le?(ht&&r.texStorage3D(32879,Be,et,te.width,te.height,te.depth),r.texSubImage3D(32879,0,0,0,0,te.width,te.height,te.depth,Re,Fe,te.data)):r.texImage3D(32879,0,et,te.width,te.height,te.depth,0,Re,Fe,te.data);else if(ie.isFramebufferTexture){if(ht)if(Le)r.texStorage2D(3553,Be,et,te.width,te.height);else{let Ye=te.width,$e=te.height;for(let mt=0;mt<Be;mt++)r.texImage2D(3553,mt,et,Ye,$e,0,Re,Fe,null),Ye>>=1,$e>>=1}}else if(Pe.length>0&&ve){Le&&ht&&r.texStorage2D(3553,Be,et,Pe[0].width,Pe[0].height);for(let Ye=0,$e=Pe.length;Ye<$e;Ye++)Ze=Pe[Ye],Le?r.texSubImage2D(3553,Ye,0,0,Re,Fe,Ze):r.texImage2D(3553,Ye,et,Re,Fe,Ze);ie.generateMipmaps=!1}else Le?(ht&&r.texStorage2D(3553,Be,et,te.width,te.height),r.texSubImage2D(3553,0,0,0,Re,Fe,te)):r.texImage2D(3553,0,et,Re,Fe,te);C(ie,ve)&&T(Ue),B.__version=K.version,ie.onUpdate&&ie.onUpdate(ie)}Z.__version=ie.version}function J(Z,ie,Te){if(ie.image.length!==6)return;let Ue=le(Z,ie),ne=ie.source;r.bindTexture(34067,Z.__webglTexture,33984+Te);let K=i.get(ne);if(ne.version!==K.__version||Ue===!0){r.activeTexture(33984+Te),e.pixelStorei(37440,ie.flipY),e.pixelStorei(37441,ie.premultiplyAlpha),e.pixelStorei(3317,ie.unpackAlignment),e.pixelStorei(37443,0);let B=ie.isCompressedTexture||ie.image[0].isCompressedTexture,U=ie.image[0]&&ie.image[0].isDataTexture,te=[];for(let Ye=0;Ye<6;Ye++)!B&&!U?te[Ye]=w(ie.image[Ye],!1,!0,u):te[Ye]=U?ie.image[Ye].image:ie.image[Ye],te[Ye]=De(ie,te[Ye]);let ve=te[0],Re=x(ve)||s,Fe=a.convert(ie.format,ie.encoding),et=a.convert(ie.type),Ze=M(ie.internalFormat,Fe,et,ie.encoding),Pe=s&&ie.isVideoTexture!==!0,Le=K.__version===void 0||Ue===!0,ht=A(ie,ve,Re);se(34067,ie,Re);let Be;if(B){Pe&&Le&&r.texStorage2D(34067,ht,Ze,ve.width,ve.height);for(let Ye=0;Ye<6;Ye++){Be=te[Ye].mipmaps;for(let $e=0;$e<Be.length;$e++){let mt=Be[$e];ie.format!==zi?Fe!==null?Pe?r.compressedTexSubImage2D(34069+Ye,$e,0,0,mt.width,mt.height,Fe,mt.data):r.compressedTexImage2D(34069+Ye,$e,Ze,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pe?r.texSubImage2D(34069+Ye,$e,0,0,mt.width,mt.height,Fe,et,mt.data):r.texImage2D(34069+Ye,$e,Ze,mt.width,mt.height,0,Fe,et,mt.data)}}}else{Be=ie.mipmaps,Pe&&Le&&(Be.length>0&&ht++,r.texStorage2D(34067,ht,Ze,te[0].width,te[0].height));for(let Ye=0;Ye<6;Ye++)if(U){Pe?r.texSubImage2D(34069+Ye,0,0,0,te[Ye].width,te[Ye].height,Fe,et,te[Ye].data):r.texImage2D(34069+Ye,0,Ze,te[Ye].width,te[Ye].height,0,Fe,et,te[Ye].data);for(let $e=0;$e<Be.length;$e++){let mt=Be[$e].image[Ye].image;Pe?r.texSubImage2D(34069+Ye,$e+1,0,0,mt.width,mt.height,Fe,et,mt.data):r.texImage2D(34069+Ye,$e+1,Ze,mt.width,mt.height,0,Fe,et,mt.data)}}else{Pe?r.texSubImage2D(34069+Ye,0,0,0,Fe,et,te[Ye]):r.texImage2D(34069+Ye,0,Ze,Fe,et,te[Ye]);for(let $e=0;$e<Be.length;$e++){let mt=Be[$e];Pe?r.texSubImage2D(34069+Ye,$e+1,0,0,Fe,et,mt.image[Ye]):r.texImage2D(34069+Ye,$e+1,Ze,Fe,et,mt.image[Ye])}}}C(ie,Re)&&T(34067),K.__version=ne.version,ie.onUpdate&&ie.onUpdate(ie)}Z.__version=ie.version}function oe(Z,ie,Te,Ue,ne){let K=a.convert(Te.format,Te.encoding),B=a.convert(Te.type),U=M(Te.internalFormat,K,B,Te.encoding);i.get(ie).__hasExternalTextures||(ne===32879||ne===35866?r.texImage3D(ne,0,U,ie.width,ie.height,ie.depth,0,K,B,null):r.texImage2D(ne,0,U,ie.width,ie.height,0,K,B,null)),r.bindFramebuffer(36160,Z),he(ie)?h.framebufferTexture2DMultisampleEXT(36160,Ue,ne,i.get(Te).__webglTexture,0,Me(ie)):(ne===3553||ne>=34069&&ne<=34074)&&e.framebufferTexture2D(36160,Ue,ne,i.get(Te).__webglTexture,0),r.bindFramebuffer(36160,null)}function me(Z,ie,Te){if(e.bindRenderbuffer(36161,Z),ie.depthBuffer&&!ie.stencilBuffer){let Ue=33189;if(Te||he(ie)){let ne=ie.depthTexture;ne&&ne.isDepthTexture&&(ne.type===ci?Ue=36012:ne.type===Rm&&(Ue=33190));let K=Me(ie);he(ie)?h.renderbufferStorageMultisampleEXT(36161,K,Ue,ie.width,ie.height):e.renderbufferStorageMultisample(36161,K,Ue,ie.width,ie.height)}else e.renderbufferStorage(36161,Ue,ie.width,ie.height);e.framebufferRenderbuffer(36160,36096,36161,Z)}else if(ie.depthBuffer&&ie.stencilBuffer){let Ue=Me(ie);Te&&he(ie)===!1?e.renderbufferStorageMultisample(36161,Ue,35056,ie.width,ie.height):he(ie)?h.renderbufferStorageMultisampleEXT(36161,Ue,35056,ie.width,ie.height):e.renderbufferStorage(36161,34041,ie.width,ie.height),e.framebufferRenderbuffer(36160,33306,36161,Z)}else{let Ue=ie.isWebGLMultipleRenderTargets===!0?ie.texture:[ie.texture];for(let ne=0;ne<Ue.length;ne++){let K=Ue[ne],B=a.convert(K.format,K.encoding),U=a.convert(K.type),te=M(K.internalFormat,B,U,K.encoding),ve=Me(ie);Te&&he(ie)===!1?e.renderbufferStorageMultisample(36161,ve,te,ie.width,ie.height):he(ie)?h.renderbufferStorageMultisampleEXT(36161,ve,te,ie.width,ie.height):e.renderbufferStorage(36161,te,ie.width,ie.height)}}e.bindRenderbuffer(36161,null)}function be(Z,ie){if(ie&&ie.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,Z),!(ie.depthTexture&&ie.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ie.depthTexture).__webglTexture||ie.depthTexture.image.width!==ie.width||ie.depthTexture.image.height!==ie.height)&&(ie.depthTexture.image.width=ie.width,ie.depthTexture.image.height=ie.height,ie.depthTexture.needsUpdate=!0),F(ie.depthTexture,0);let Te=i.get(ie.depthTexture).__webglTexture,Ue=Me(ie);if(ie.depthTexture.format===K0)he(ie)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,Te,0,Ue):e.framebufferTexture2D(36160,36096,3553,Te,0);else if(ie.depthTexture.format===cb)he(ie)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,Te,0,Ue):e.framebufferTexture2D(36160,33306,3553,Te,0);else throw new Error("Unknown depthTexture format")}function de(Z){let ie=i.get(Z),Te=Z.isWebGLCubeRenderTarget===!0;if(Z.depthTexture&&!ie.__autoAllocateDepthBuffer){if(Te)throw new Error("target.depthTexture not supported in Cube render targets");be(ie.__webglFramebuffer,Z)}else if(Te){ie.__webglDepthbuffer=[];for(let Ue=0;Ue<6;Ue++)r.bindFramebuffer(36160,ie.__webglFramebuffer[Ue]),ie.__webglDepthbuffer[Ue]=e.createRenderbuffer(),me(ie.__webglDepthbuffer[Ue],Z,!1)}else r.bindFramebuffer(36160,ie.__webglFramebuffer),ie.__webglDepthbuffer=e.createRenderbuffer(),me(ie.__webglDepthbuffer,Z,!1);r.bindFramebuffer(36160,null)}function ge(Z,ie,Te){let Ue=i.get(Z);ie!==void 0&&oe(Ue.__webglFramebuffer,Z,Z.texture,36064,3553),Te!==void 0&&de(Z)}function ce(Z){let ie=Z.texture,Te=i.get(Z),Ue=i.get(ie);Z.addEventListener("dispose",j),Z.isWebGLMultipleRenderTargets!==!0&&(Ue.__webglTexture===void 0&&(Ue.__webglTexture=e.createTexture()),Ue.__version=ie.version,o.memory.textures++);let ne=Z.isWebGLCubeRenderTarget===!0,K=Z.isWebGLMultipleRenderTargets===!0,B=x(Z)||s;if(ne){Te.__webglFramebuffer=[];for(let U=0;U<6;U++)Te.__webglFramebuffer[U]=e.createFramebuffer()}else{if(Te.__webglFramebuffer=e.createFramebuffer(),K)if(n.drawBuffers){let U=Z.texture;for(let te=0,ve=U.length;te<ve;te++){let Re=i.get(U[te]);Re.__webglTexture===void 0&&(Re.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&Z.samples>0&&he(Z)===!1){let U=K?ie:[ie];Te.__webglMultisampledFramebuffer=e.createFramebuffer(),Te.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,Te.__webglMultisampledFramebuffer);for(let te=0;te<U.length;te++){let ve=U[te];Te.__webglColorRenderbuffer[te]=e.createRenderbuffer(),e.bindRenderbuffer(36161,Te.__webglColorRenderbuffer[te]);let Re=a.convert(ve.format,ve.encoding),Fe=a.convert(ve.type),et=M(ve.internalFormat,Re,Fe,ve.encoding,Z.isXRRenderTarget===!0),Ze=Me(Z);e.renderbufferStorageMultisample(36161,Ze,et,Z.width,Z.height),e.framebufferRenderbuffer(36160,36064+te,36161,Te.__webglColorRenderbuffer[te])}e.bindRenderbuffer(36161,null),Z.depthBuffer&&(Te.__webglDepthRenderbuffer=e.createRenderbuffer(),me(Te.__webglDepthRenderbuffer,Z,!0)),r.bindFramebuffer(36160,null)}}if(ne){r.bindTexture(34067,Ue.__webglTexture),se(34067,ie,B);for(let U=0;U<6;U++)oe(Te.__webglFramebuffer[U],Z,ie,36064,34069+U);C(ie,B)&&T(34067),r.unbindTexture()}else if(K){let U=Z.texture;for(let te=0,ve=U.length;te<ve;te++){let Re=U[te],Fe=i.get(Re);r.bindTexture(3553,Fe.__webglTexture),se(3553,Re,B),oe(Te.__webglFramebuffer,Z,Re,36064+te,3553),C(Re,B)&&T(3553)}r.unbindTexture()}else{let U=3553;(Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(s?U=Z.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(U,Ue.__webglTexture),se(U,ie,B),oe(Te.__webglFramebuffer,Z,ie,36064,U),C(ie,B)&&T(U),r.unbindTexture()}Z.depthBuffer&&de(Z)}function Ce(Z){let ie=x(Z)||s,Te=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let Ue=0,ne=Te.length;Ue<ne;Ue++){let K=Te[Ue];if(C(K,ie)){let B=Z.isWebGLCubeRenderTarget?34067:3553,U=i.get(K).__webglTexture;r.bindTexture(B,U),T(B),r.unbindTexture()}}}function Ee(Z){if(s&&Z.samples>0&&he(Z)===!1){let ie=Z.isWebGLMultipleRenderTargets?Z.texture:[Z.texture],Te=Z.width,Ue=Z.height,ne=16384,K=[],B=Z.stencilBuffer?33306:36096,U=i.get(Z),te=Z.isWebGLMultipleRenderTargets===!0;if(te)for(let ve=0;ve<ie.length;ve++)r.bindFramebuffer(36160,U.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+ve,36161,null),r.bindFramebuffer(36160,U.__webglFramebuffer),e.framebufferTexture2D(36009,36064+ve,3553,null,0);r.bindFramebuffer(36008,U.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,U.__webglFramebuffer);for(let ve=0;ve<ie.length;ve++){K.push(36064+ve),Z.depthBuffer&&K.push(B);let Re=U.__ignoreDepthValues!==void 0?U.__ignoreDepthValues:!1;if(Re===!1&&(Z.depthBuffer&&(ne|=256),Z.stencilBuffer&&(ne|=1024)),te&&e.framebufferRenderbuffer(36008,36064,36161,U.__webglColorRenderbuffer[ve]),Re===!0&&(e.invalidateFramebuffer(36008,[B]),e.invalidateFramebuffer(36009,[B])),te){let Fe=i.get(ie[ve]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,Fe,0)}e.blitFramebuffer(0,0,Te,Ue,0,0,Te,Ue,ne,9728),f&&e.invalidateFramebuffer(36008,K)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),te)for(let ve=0;ve<ie.length;ve++){r.bindFramebuffer(36160,U.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+ve,36161,U.__webglColorRenderbuffer[ve]);let Re=i.get(ie[ve]).__webglTexture;r.bindFramebuffer(36160,U.__webglFramebuffer),e.framebufferTexture2D(36009,36064+ve,3553,Re,0)}r.bindFramebuffer(36009,U.__webglMultisampledFramebuffer)}}function Me(Z){return Math.min(d,Z.samples)}function he(Z){let ie=i.get(Z);return s&&Z.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&ie.__useRenderToTexture!==!1}function Ae(Z){let ie=o.render.frame;g.get(Z)!==ie&&(g.set(Z,ie),Z.update())}function De(Z,ie){let Te=Z.encoding,Ue=Z.format,ne=Z.type;return Z.isCompressedTexture===!0||Z.isVideoTexture===!0||Z.format===e6||Te!==Tf&&(Te===Er?s===!1?t.has("EXT_sRGB")===!0&&Ue===zi?(Z.format=e6,Z.minFilter=Ar,Z.generateMipmaps=!1):ie=X1e.sRGBToLinear(ie):(Ue!==zi||ne!==Va)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Te)),ie}this.allocateTextureUnit=N,this.resetTextureUnits=X,this.setTexture2D=F,this.setTexture2DArray=L,this.setTexture3D=Y,this.setTextureCube=ae,this.rebindTextures=ge,this.setupRenderTarget=ce,this.updateRenderTargetMipmap=Ce,this.updateMultisampleRenderTarget=Ee,this.setupDepthRenderbuffer=de,this.setupFrameBufferTexture=oe,this.useMultisampledRTT=he}function lJe(e,t,r){let i=r.isWebGL2;function n(a,o=null){let s;if(a===Va)return 5121;if(a===G$e)return 32819;if(a===H$e)return 32820;if(a===k$e)return 5120;if(a===q$e)return 5122;if(a===U1e)return 5123;if(a===W$e)return 5124;if(a===Rm)return 5125;if(a===ci)return 5126;if(a===Gm)return i?5131:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(a===$$e)return 6406;if(a===zi)return 6408;if(a===X$e)return 6409;if(a===Y$e)return 6410;if(a===K0)return 6402;if(a===cb)return 34041;if(a===e6)return s=t.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(a===iR)return 6403;if(a===K$e)return 36244;if(a===nD)return 33319;if(a===Q$e)return 33320;if(a===V1e)return 36249;if(a===uz||a===cz||a===dz||a===hz)if(o===Er)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(a===uz)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===cz)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===dz)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===hz)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(a===uz)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===cz)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===dz)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===hz)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===GK||a===HK||a===$K||a===XK)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(a===GK)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===HK)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===$K)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===XK)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===J$e)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===YK||a===KK)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(a===YK)return o===Er?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(a===KK)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===QK||a===JK||a===ZK||a===eQ||a===tQ||a===rQ||a===iQ||a===nQ||a===aQ||a===oQ||a===sQ||a===lQ||a===uQ||a===cQ)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(a===QK)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===JK)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===ZK)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===eQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===tQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===rQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===iQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===nQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===aQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===oQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===sQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===lQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===uQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===cQ)return o===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===fz)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(a===fz)return o===Er?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(a===Z$e||a===dQ||a===hQ||a===fQ)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(a===fz)return s.COMPRESSED_RED_RGTC1_EXT;if(a===dQ)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===hQ)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===fQ)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Y0?i?34042:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):e[a]!==void 0?e[a]:null}return{convert:n}}var uJe=class extends Ia{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Im=class extends li{constructor(){super(),this.isGroup=!0,this.type="Group"}},cJe={type:"move"},Nz=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Im,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Im,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Im,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,n=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){a=!0;for(let g of e.hand.values()){let p=t.getJointPose(g,r),m=this._getHandJoint(l,g);p!==null&&(m.matrix.fromArray(p.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.jointRadius=p.radius),m.visible=p!==null}let u=l.joints["index-finger-tip"],c=l.joints["thumb-tip"],d=u.position.distanceTo(c.position),h=.02,f=.005;l.inputState.pinching&&d>h+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&d<=h-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else s!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,r),n!==null&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),n.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(n.linearVelocity)):s.hasLinearVelocity=!1,n.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(n.angularVelocity)):s.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&n!==null&&(i=n),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(cJe)))}return o!==null&&(o.visible=i!==null),s!==null&&(s.visible=n!==null),l!==null&&(l.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new Im;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},G_=class extends Vi{constructor(e,t,r,i,n,a,o,s,l,u){if(u=u!==void 0?u:K0,u!==K0&&u!==cb)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===K0&&(r=Rm),r===void 0&&u===cb&&(r=Y0),super(null,i,n,a,o,s,u,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Dr,this.minFilter=s!==void 0?s:Dr,this.flipY=!1,this.generateMipmaps=!1}},dJe=class extends xa{constructor(e,t){super();let r=this,i=null,n=1,a=null,o="local-floor",s=1,l=null,u=null,c=null,d=null,h=null,f=null,g=t.getContextAttributes(),p=null,m=null,y=[],b=[],w=new Set,x=new Map,S=new Ia;S.layers.enable(1),S.viewport=new hr;let C=new Ia;C.layers.enable(2),C.viewport=new hr;let T=[S,C],M=new uJe;M.layers.enable(1),M.layers.enable(2);let A=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let Y=y[L];return Y===void 0&&(Y=new Nz,y[L]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(L){let Y=y[L];return Y===void 0&&(Y=new Nz,y[L]=Y),Y.getGripSpace()},this.getHand=function(L){let Y=y[L];return Y===void 0&&(Y=new Nz,y[L]=Y),Y.getHandSpace()};function O(L){let Y=b.indexOf(L.inputSource);if(Y===-1)return;let ae=y[Y];ae!==void 0&&ae.dispatchEvent({type:L.type,data:L.inputSource})}function j(){i.removeEventListener("select",O),i.removeEventListener("selectstart",O),i.removeEventListener("selectend",O),i.removeEventListener("squeeze",O),i.removeEventListener("squeezestart",O),i.removeEventListener("squeezeend",O),i.removeEventListener("end",j),i.removeEventListener("inputsourceschange",D);for(let L=0;L<y.length;L++){let Y=b[L];Y!==null&&(b[L]=null,y[L].disconnect(Y))}A=null,P=null,e.setRenderTarget(p),h=null,d=null,c=null,i=null,m=null,F.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(L){n=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){o=L,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(L){l=L},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(L){if(i=L,i!==null){if(p=e.getRenderTarget(),i.addEventListener("select",O),i.addEventListener("selectstart",O),i.addEventListener("selectend",O),i.addEventListener("squeeze",O),i.addEventListener("squeezestart",O),i.addEventListener("squeezeend",O),i.addEventListener("end",j),i.addEventListener("inputsourceschange",D),g.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let Y={antialias:i.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:n};h=new XRWebGLLayer(i,t,Y),i.updateRenderState({baseLayer:h}),m=new kr(h.framebufferWidth,h.framebufferHeight,{format:zi,type:Va,encoding:e.outputEncoding,stencilBuffer:g.stencil})}else{let Y=null,ae=null,re=null;g.depth&&(re=g.stencil?35056:33190,Y=g.stencil?cb:K0,ae=g.stencil?Y0:Rm);let H={colorFormat:32856,depthFormat:re,scaleFactor:n};c=new XRWebGLBinding(i,t),d=c.createProjectionLayer(H),i.updateRenderState({layers:[d]}),m=new kr(d.textureWidth,d.textureHeight,{format:zi,type:Va,depthTexture:new G_(d.textureWidth,d.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});let se=e.properties.get(m);se.__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(s),l=null,a=await i.requestReferenceSpace(o),F.setContext(i),F.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function D(L){for(let Y=0;Y<L.removed.length;Y++){let ae=L.removed[Y],re=b.indexOf(ae);re>=0&&(b[re]=null,y[re].disconnect(ae))}for(let Y=0;Y<L.added.length;Y++){let ae=L.added[Y],re=b.indexOf(ae);if(re===-1){for(let se=0;se<y.length;se++)if(se>=b.length){b.push(ae),re=se;break}else if(b[se]===null){b[se]=ae,re=se;break}if(re===-1)break}let H=y[re];H&&H.connect(ae)}}let I=new k,q=new k;function $(L,Y,ae){I.setFromMatrixPosition(Y.matrixWorld),q.setFromMatrixPosition(ae.matrixWorld);let re=I.distanceTo(q),H=Y.projectionMatrix.elements,se=ae.projectionMatrix.elements,le=H[14]/(H[10]-1),ee=H[14]/(H[10]+1),J=(H[9]+1)/H[5],oe=(H[9]-1)/H[5],me=(H[8]-1)/H[0],be=(se[8]+1)/se[0],de=le*me,ge=le*be,ce=re/(-me+be),Ce=ce*-me;Y.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(Ce),L.translateZ(ce),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();let Ee=le+ce,Me=ee+ce,he=de-Ce,Ae=ge+(re-Ce),De=J*ee/Me*Ee,Z=oe*ee/Me*Ee;L.projectionMatrix.makePerspective(he,Ae,De,Z,Ee,Me)}function X(L,Y){Y===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(Y.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(i===null)return;M.near=C.near=S.near=L.near,M.far=C.far=S.far=L.far,(A!==M.near||P!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),A=M.near,P=M.far);let Y=L.parent,ae=M.cameras;X(M,Y);for(let H=0;H<ae.length;H++)X(ae[H],Y);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),L.matrix.copy(M.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale);let re=L.children;for(let H=0,se=re.length;H<se;H++)re[H].updateMatrixWorld(!0);ae.length===2?$(M,S,C):M.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(!(d===null&&h===null))return s},this.setFoveation=function(L){s=L,d!==null&&(d.fixedFoveation=L),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=L)},this.getPlanes=function(){return w};let N=null;function Q(L,Y){if(u=Y.getViewerPose(l||a),f=Y,u!==null){let ae=u.views;h!==null&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let re=!1;ae.length!==M.cameras.length&&(M.cameras.length=0,re=!0);for(let H=0;H<ae.length;H++){let se=ae[H],le=null;if(h!==null)le=h.getViewport(se);else{let J=c.getViewSubImage(d,se);le=J.viewport,H===0&&(e.setRenderTargetTextures(m,J.colorTexture,d.ignoreDepthValues?void 0:J.depthStencilTexture),e.setRenderTarget(m))}let ee=T[H];ee===void 0&&(ee=new Ia,ee.layers.enable(H),ee.viewport=new hr,T[H]=ee),ee.matrix.fromArray(se.transform.matrix),ee.projectionMatrix.fromArray(se.projectionMatrix),ee.viewport.set(le.x,le.y,le.width,le.height),H===0&&M.matrix.copy(ee.matrix),re===!0&&M.cameras.push(ee)}}for(let ae=0;ae<y.length;ae++){let re=b[ae],H=y[ae];re!==null&&H!==void 0&&H.update(re,Y,l||a)}if(N&&N(L,Y),Y.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:Y.detectedPlanes});let ae=null;for(let re of w)Y.detectedPlanes.has(re)||(ae===null&&(ae=[]),ae.push(re));if(ae!==null)for(let re of ae)w.delete(re),x.delete(re),r.dispatchEvent({type:"planeremoved",data:re});for(let re of Y.detectedPlanes)if(!w.has(re))w.add(re),x.set(re,Y.lastChangedTime),r.dispatchEvent({type:"planeadded",data:re});else{let H=x.get(re);re.lastChangedTime>H&&(x.set(re,re.lastChangedTime),r.dispatchEvent({type:"planechanged",data:re}))}}f=null}let F=new e_e;F.setAnimationLoop(Q),this.setAnimationLoop=function(L){N=L},this.dispose=function(){}}};function hJe(e,t){function r(p,m){m.color.getRGB(p.fogColor.value,Z1e(e)),m.isFog?(p.fogNear.value=m.near,p.fogFar.value=m.far):m.isFogExp2&&(p.fogDensity.value=m.density)}function i(p,m,y,b,w){m.isMeshBasicMaterial||m.isMeshLambertMaterial?n(p,m):m.isMeshToonMaterial?(n(p,m),c(p,m)):m.isMeshPhongMaterial?(n(p,m),u(p,m)):m.isMeshStandardMaterial?(n(p,m),d(p,m),m.isMeshPhysicalMaterial&&h(p,m,w)):m.isMeshMatcapMaterial?(n(p,m),f(p,m)):m.isMeshDepthMaterial?n(p,m):m.isMeshDistanceMaterial?(n(p,m),g(p,m)):m.isMeshNormalMaterial?n(p,m):m.isLineBasicMaterial?(a(p,m),m.isLineDashedMaterial&&o(p,m)):m.isPointsMaterial?s(p,m,y,b):m.isSpriteMaterial?l(p,m):m.isShadowMaterial?(p.color.value.copy(m.color),p.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function n(p,m){p.opacity.value=m.opacity,m.color&&p.diffuse.value.copy(m.color),m.emissive&&p.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,m.side===ea&&(p.bumpScale.value*=-1)),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias),m.emissiveMap&&(p.emissiveMap.value=m.emissiveMap),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),m.side===ea&&p.normalScale.value.negate()),m.specularMap&&(p.specularMap.value=m.specularMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let y=t.get(m).envMap;if(y&&(p.envMap.value=y,p.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=m.reflectivity,p.ior.value=m.ior,p.refractionRatio.value=m.refractionRatio),m.lightMap){p.lightMap.value=m.lightMap;let x=e.physicallyCorrectLights!==!0?Math.PI:1;p.lightMapIntensity.value=m.lightMapIntensity*x}m.aoMap&&(p.aoMap.value=m.aoMap,p.aoMapIntensity.value=m.aoMapIntensity);let b;m.map?b=m.map:m.specularMap?b=m.specularMap:m.displacementMap?b=m.displacementMap:m.normalMap?b=m.normalMap:m.bumpMap?b=m.bumpMap:m.roughnessMap?b=m.roughnessMap:m.metalnessMap?b=m.metalnessMap:m.alphaMap?b=m.alphaMap:m.emissiveMap?b=m.emissiveMap:m.clearcoatMap?b=m.clearcoatMap:m.clearcoatNormalMap?b=m.clearcoatNormalMap:m.clearcoatRoughnessMap?b=m.clearcoatRoughnessMap:m.iridescenceMap?b=m.iridescenceMap:m.iridescenceThicknessMap?b=m.iridescenceThicknessMap:m.specularIntensityMap?b=m.specularIntensityMap:m.specularColorMap?b=m.specularColorMap:m.transmissionMap?b=m.transmissionMap:m.thicknessMap?b=m.thicknessMap:m.sheenColorMap?b=m.sheenColorMap:m.sheenRoughnessMap&&(b=m.sheenRoughnessMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),p.uvTransform.value.copy(b.matrix));let w;m.aoMap?w=m.aoMap:m.lightMap&&(w=m.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),p.uv2Transform.value.copy(w.matrix))}function a(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity}function o(p,m){p.dashSize.value=m.dashSize,p.totalSize.value=m.dashSize+m.gapSize,p.scale.value=m.scale}function s(p,m,y,b){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.size.value=m.size*y,p.scale.value=b*.5,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let w;m.map?w=m.map:m.alphaMap&&(w=m.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),p.uvTransform.value.copy(w.matrix))}function l(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.rotation.value=m.rotation,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let y;m.map?y=m.map:m.alphaMap&&(y=m.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix))}function u(p,m){p.specular.value.copy(m.specular),p.shininess.value=Math.max(m.shininess,1e-4)}function c(p,m){m.gradientMap&&(p.gradientMap.value=m.gradientMap)}function d(p,m){p.roughness.value=m.roughness,p.metalness.value=m.metalness,m.roughnessMap&&(p.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(p.metalnessMap.value=m.metalnessMap),t.get(m).envMap&&(p.envMapIntensity.value=m.envMapIntensity)}function h(p,m,y){p.ior.value=m.ior,m.sheen>0&&(p.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),p.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(p.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(p.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(p.clearcoat.value=m.clearcoat,p.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(p.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),p.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===ea&&p.clearcoatNormalScale.value.negate())),m.iridescence>0&&(p.iridescence.value=m.iridescence,p.iridescenceIOR.value=m.iridescenceIOR,p.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(p.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(p.transmission.value=m.transmission,p.transmissionSamplerMap.value=y.texture,p.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(p.transmissionMap.value=m.transmissionMap),p.thickness.value=m.thickness,m.thicknessMap&&(p.thicknessMap.value=m.thicknessMap),p.attenuationDistance.value=m.attenuationDistance,p.attenuationColor.value.copy(m.attenuationColor)),p.specularIntensity.value=m.specularIntensity,p.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(p.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(p.specularColorMap.value=m.specularColorMap)}function f(p,m){m.matcap&&(p.matcap.value=m.matcap)}function g(p,m){p.referencePosition.value.copy(m.referencePosition),p.nearDistance.value=m.nearDistance,p.farDistance.value=m.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function fJe(e,t,r,i){let n={},a={},o=[],s=r.isWebGL2?e.getParameter(35375):0;function l(b,w){let x=w.program;i.uniformBlockBinding(b,x)}function u(b,w){let x=n[b.id];x===void 0&&(g(b),x=c(b),n[b.id]=x,b.addEventListener("dispose",m));let S=w.program;i.updateUBOMapping(b,S);let C=t.render.frame;a[b.id]!==C&&(h(b),a[b.id]=C)}function c(b){let w=d();b.__bindingPointIndex=w;let x=e.createBuffer(),S=b.__size,C=b.usage;return e.bindBuffer(35345,x),e.bufferData(35345,S,C),e.bindBuffer(35345,null),e.bindBufferBase(35345,w,x),x}function d(){for(let b=0;b<s;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(b){let w=n[b.id],x=b.uniforms,S=b.__cache;e.bindBuffer(35345,w);for(let C=0,T=x.length;C<T;C++){let M=x[C];if(f(M,C,S)===!0){let A=M.__offset,P=Array.isArray(M.value)?M.value:[M.value],O=0;for(let j=0;j<P.length;j++){let D=P[j],I=p(D);typeof D=="number"?(M.__data[0]=D,e.bufferSubData(35345,A+O,M.__data)):D.isMatrix3?(M.__data[0]=D.elements[0],M.__data[1]=D.elements[1],M.__data[2]=D.elements[2],M.__data[3]=D.elements[0],M.__data[4]=D.elements[3],M.__data[5]=D.elements[4],M.__data[6]=D.elements[5],M.__data[7]=D.elements[0],M.__data[8]=D.elements[6],M.__data[9]=D.elements[7],M.__data[10]=D.elements[8],M.__data[11]=D.elements[0]):(D.toArray(M.__data,O),O+=I.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,A,M.__data)}}e.bindBuffer(35345,null)}function f(b,w,x){let S=b.value;if(x[w]===void 0){if(typeof S=="number")x[w]=S;else{let C=Array.isArray(S)?S:[S],T=[];for(let M=0;M<C.length;M++)T.push(C[M].clone());x[w]=T}return!0}else if(typeof S=="number"){if(x[w]!==S)return x[w]=S,!0}else{let C=Array.isArray(x[w])?x[w]:[x[w]],T=Array.isArray(S)?S:[S];for(let M=0;M<C.length;M++){let A=C[M];if(A.equals(T[M])===!1)return A.copy(T[M]),!0}}return!1}function g(b){let w=b.uniforms,x=0,S=16,C=0;for(let T=0,M=w.length;T<M;T++){let A=w[T],P={boundary:0,storage:0},O=Array.isArray(A.value)?A.value:[A.value];for(let j=0,D=O.length;j<D;j++){let I=O[j],q=p(I);P.boundary+=q.boundary,P.storage+=q.storage}if(A.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=x,T>0){C=x%S;let j=S-C;C!==0&&j-P.boundary<0&&(x+=S-C,A.__offset=x)}x+=P.storage}return C=x%S,C>0&&(x+=S-C),b.__size=x,b.__cache={},this}function p(b){let w={boundary:0,storage:0};return typeof b=="number"?(w.boundary=4,w.storage=4):b.isVector2?(w.boundary=8,w.storage=8):b.isVector3||b.isColor?(w.boundary=16,w.storage=12):b.isVector4?(w.boundary=16,w.storage=16):b.isMatrix3?(w.boundary=48,w.storage=48):b.isMatrix4?(w.boundary=64,w.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),w}function m(b){let w=b.target;w.removeEventListener("dispose",m);let x=o.indexOf(w.__bindingPointIndex);o.splice(x,1),e.deleteBuffer(n[w.id]),delete n[w.id],delete a[w.id]}function y(){for(let b in n)e.deleteBuffer(n[b]);o=[],n={},a={}}return{bind:l,update:u,dispose:y}}function pJe(){let e=mM("canvas");return e.style.display="block",e}function o_e(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:pJe(),r=e.context!==void 0?e.context:null,i=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,a=e.antialias!==void 0?e.antialias:!1,o=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,s=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",u=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,c;r!==null?c=r.getContextAttributes().alpha:c=e.alpha!==void 0?e.alpha:!1;let d=null,h=null,f=[],g=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Tf,this.physicallyCorrectLights=!1,this.toneMapping=Cp,this.toneMappingExposure=1;let p=this,m=!1,y=0,b=0,w=null,x=-1,S=null,C=new hr,T=new hr,M=null,A=t.width,P=t.height,O=1,j=null,D=null,I=new hr(0,0,A,P),q=new hr(0,0,A,P),$=!1,X=new oW,N=!1,Q=!1,F=null,L=new dt,Y=new ze,ae=new k,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return w===null?O:1}let se=r;function le(we,We){for(let tt=0;tt<we.length;tt++){let qe=we[tt],nt=t.getContext(qe,We);if(nt!==null)return nt}return null}try{let we={alpha:!0,depth:i,stencil:n,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:s,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${bw}`),t.addEventListener("webglcontextlost",et,!1),t.addEventListener("webglcontextrestored",Ze,!1),t.addEventListener("webglcontextcreationerror",Pe,!1),se===null){let We=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&We.shift(),se=le(We,we),se===null)throw le(We)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}se.getShaderPrecisionFormat===void 0&&(se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(we){throw console.error("THREE.WebGLRenderer: "+we.message),we}let ee,J,oe,me,be,de,ge,ce,Ce,Ee,Me,he,Ae,De,Z,ie,Te,Ue,ne,K,B,U,te,ve;function Re(){ee=new PKe(se),J=new wKe(se,ee,e),ee.init(J),U=new lJe(se,ee,J),oe=new oJe(se,ee,J),me=new OKe,be=new $Qe,de=new sJe(se,ee,oe,be,J,U,me),ge=new SKe(p),ce=new MKe(p),Ce=new N7e(se,J),te=new bKe(se,ee,Ce,J),Ee=new TKe(se,Ce,me,te),Me=new jKe(se,Ee,Ce,me),ne=new IKe(se,J,de),ie=new xKe(be),he=new HQe(p,ge,ce,ee,J,te,ie),Ae=new hJe(p,be),De=new YQe,Z=new tJe(ee,J),Ue=new yKe(p,ge,ce,oe,Me,c,o),Te=new aJe(p,Me,J),ve=new fJe(se,me,J,oe),K=new _Ke(se,ee,me,J),B=new AKe(se,ee,me,J),me.programs=he.programs,p.capabilities=J,p.extensions=ee,p.properties=be,p.renderLists=De,p.shadowMap=Te,p.state=oe,p.info=me}Re();let Fe=new dJe(p,se);this.xr=Fe,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){let we=ee.get("WEBGL_lose_context");we&&we.loseContext()},this.forceContextRestore=function(){let we=ee.get("WEBGL_lose_context");we&&we.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(we){we!==void 0&&(O=we,this.setSize(A,P,!1))},this.getSize=function(we){return we.set(A,P)},this.setSize=function(we,We,tt){if(Fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}A=we,P=We,t.width=Math.floor(we*O),t.height=Math.floor(We*O),tt!==!1&&(t.style.width=we+"px",t.style.height=We+"px"),this.setViewport(0,0,we,We)},this.getDrawingBufferSize=function(we){return we.set(A*O,P*O).floor()},this.setDrawingBufferSize=function(we,We,tt){A=we,P=We,O=tt,t.width=Math.floor(we*tt),t.height=Math.floor(We*tt),this.setViewport(0,0,we,We)},this.getCurrentViewport=function(we){return we.copy(C)},this.getViewport=function(we){return we.copy(I)},this.setViewport=function(we,We,tt,qe){we.isVector4?I.set(we.x,we.y,we.z,we.w):I.set(we,We,tt,qe),oe.viewport(C.copy(I).multiplyScalar(O).floor())},this.getScissor=function(we){return we.copy(q)},this.setScissor=function(we,We,tt,qe){we.isVector4?q.set(we.x,we.y,we.z,we.w):q.set(we,We,tt,qe),oe.scissor(T.copy(q).multiplyScalar(O).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(we){oe.setScissorTest($=we)},this.setOpaqueSort=function(we){j=we},this.setTransparentSort=function(we){D=we},this.getClearColor=function(we){return we.copy(Ue.getClearColor())},this.setClearColor=function(){Ue.setClearColor.apply(Ue,arguments)},this.getClearAlpha=function(){return Ue.getClearAlpha()},this.setClearAlpha=function(){Ue.setClearAlpha.apply(Ue,arguments)},this.clear=function(we=!0,We=!0,tt=!0){let qe=0;we&&(qe|=16384),We&&(qe|=256),tt&&(qe|=1024),se.clear(qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",et,!1),t.removeEventListener("webglcontextrestored",Ze,!1),t.removeEventListener("webglcontextcreationerror",Pe,!1),De.dispose(),Z.dispose(),be.dispose(),ge.dispose(),ce.dispose(),Me.dispose(),te.dispose(),ve.dispose(),he.dispose(),Fe.dispose(),Fe.removeEventListener("sessionstart",mt),Fe.removeEventListener("sessionend",It),F&&(F.dispose(),F=null),qt.stop()};function et(we){we.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Ze(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;let we=me.autoReset,We=Te.enabled,tt=Te.autoUpdate,qe=Te.needsUpdate,nt=Te.type;Re(),me.autoReset=we,Te.enabled=We,Te.autoUpdate=tt,Te.needsUpdate=qe,Te.type=nt}function Pe(we){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",we.statusMessage)}function Le(we){let We=we.target;We.removeEventListener("dispose",Le),ht(We)}function ht(we){Be(we),be.remove(we)}function Be(we){let We=be.get(we).programs;We!==void 0&&(We.forEach(function(tt){he.releaseProgram(tt)}),we.isShaderMaterial&&he.releaseShaderCache(we))}this.renderBufferDirect=function(we,We,tt,qe,nt,Tt){We===null&&(We=re);let Ft=nt.isMesh&&nt.matrixWorld.determinant()<0,$t=Lt(we,We,tt,qe,nt);oe.setMaterial(qe,Ft);let zt=tt.index,gr=1;qe.wireframe===!0&&(zt=Ee.getWireframeAttribute(tt),gr=2);let Vt=tt.drawRange,dr=tt.attributes.position,Se=Vt.start*gr,Ge=(Vt.start+Vt.count)*gr;Tt!==null&&(Se=Math.max(Se,Tt.start*gr),Ge=Math.min(Ge,(Tt.start+Tt.count)*gr)),zt!==null?(Se=Math.max(Se,0),Ge=Math.min(Ge,zt.count)):dr!=null&&(Se=Math.max(Se,0),Ge=Math.min(Ge,dr.count));let ut=Ge-Se;if(ut<0||ut===1/0)return;te.setup(nt,qe,$t,tt,zt);let vt,_t=K;if(zt!==null&&(vt=Ce.get(zt),_t=B,_t.setIndex(vt)),nt.isMesh)qe.wireframe===!0?(oe.setLineWidth(qe.wireframeLinewidth*H()),_t.setMode(1)):_t.setMode(4);else if(nt.isLine){let St=qe.linewidth;St===void 0&&(St=1),oe.setLineWidth(St*H()),nt.isLineSegments?_t.setMode(1):nt.isLineLoop?_t.setMode(2):_t.setMode(3)}else nt.isPoints?_t.setMode(0):nt.isSprite&&_t.setMode(4);if(nt.isInstancedMesh)_t.renderInstances(Se,ut,nt.count);else if(tt.isInstancedBufferGeometry){let St=tt._maxInstanceCount!==void 0?tt._maxInstanceCount:1/0,Kt=Math.min(tt.instanceCount,St);_t.renderInstances(Se,ut,Kt)}else _t.render(Se,ut)},this.compile=function(we,We){function tt(qe,nt,Tt){qe.transparent===!0&&qe.side===Fa&&qe.forceSinglePass===!1?(qe.side=ea,qe.needsUpdate=!0,Xe(qe,nt,Tt),qe.side=Pf,qe.needsUpdate=!0,Xe(qe,nt,Tt),qe.side=Fa):Xe(qe,nt,Tt)}h=Z.get(we),h.init(),g.push(h),we.traverseVisible(function(qe){qe.isLight&&qe.layers.test(We.layers)&&(h.pushLight(qe),qe.castShadow&&h.pushShadow(qe))}),h.setupLights(p.physicallyCorrectLights),we.traverse(function(qe){let nt=qe.material;if(nt)if(Array.isArray(nt))for(let Tt=0;Tt<nt.length;Tt++){let Ft=nt[Tt];tt(Ft,we,qe)}else tt(nt,we,qe)}),g.pop(),h=null};let Ye=null;function $e(we){Ye&&Ye(we)}function mt(){qt.stop()}function It(){qt.start()}let qt=new e_e;qt.setAnimationLoop($e),typeof self<"u"&&qt.setContext(self),this.setAnimationLoop=function(we){Ye=we,Fe.setAnimationLoop(we),we===null?qt.stop():qt.start()},Fe.addEventListener("sessionstart",mt),Fe.addEventListener("sessionend",It),this.render=function(we,We){if(We!==void 0&&We.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;we.matrixWorldAutoUpdate===!0&&we.updateMatrixWorld(),We.parent===null&&We.matrixWorldAutoUpdate===!0&&We.updateMatrixWorld(),Fe.enabled===!0&&Fe.isPresenting===!0&&(Fe.cameraAutoUpdate===!0&&Fe.updateCamera(We),We=Fe.getCamera()),we.isScene===!0&&we.onBeforeRender(p,we,We,w),h=Z.get(we,g.length),h.init(),g.push(h),L.multiplyMatrices(We.projectionMatrix,We.matrixWorldInverse),X.setFromProjectionMatrix(L),Q=this.localClippingEnabled,N=ie.init(this.clippingPlanes,Q),d=De.get(we,f.length),d.init(),f.push(d),mr(we,We,0,p.sortObjects),d.finish(),p.sortObjects===!0&&d.sort(j,D),N===!0&&ie.beginShadows();let tt=h.state.shadowsArray;if(Te.render(tt,we,We),N===!0&&ie.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ue.render(d,we),h.setupLights(p.physicallyCorrectLights),We.isArrayCamera){let qe=We.cameras;for(let nt=0,Tt=qe.length;nt<Tt;nt++){let Ft=qe[nt];Rr(d,we,Ft,Ft.viewport)}}else Rr(d,we,We);w!==null&&(de.updateMultisampleRenderTarget(w),de.updateRenderTargetMipmap(w)),we.isScene===!0&&we.onAfterRender(p,we,We),te.resetDefaultState(),x=-1,S=null,g.pop(),g.length>0?h=g[g.length-1]:h=null,f.pop(),f.length>0?d=f[f.length-1]:d=null};function mr(we,We,tt,qe){if(we.visible===!1)return;if(we.layers.test(We.layers)){if(we.isGroup)tt=we.renderOrder;else if(we.isLOD)we.autoUpdate===!0&&we.update(We);else if(we.isLight)h.pushLight(we),we.castShadow&&h.pushShadow(we);else if(we.isSprite){if(!we.frustumCulled||X.intersectsSprite(we)){qe&&ae.setFromMatrixPosition(we.matrixWorld).applyMatrix4(L);let Tt=Me.update(we),Ft=we.material;Ft.visible&&d.push(we,Tt,Ft,tt,ae.z,null)}}else if((we.isMesh||we.isLine||we.isPoints)&&(we.isSkinnedMesh&&we.skeleton.frame!==me.render.frame&&(we.skeleton.update(),we.skeleton.frame=me.render.frame),!we.frustumCulled||X.intersectsObject(we))){qe&&ae.setFromMatrixPosition(we.matrixWorld).applyMatrix4(L);let Tt=Me.update(we),Ft=we.material;if(Array.isArray(Ft)){let $t=Tt.groups;for(let zt=0,gr=$t.length;zt<gr;zt++){let Vt=$t[zt],dr=Ft[Vt.materialIndex];dr&&dr.visible&&d.push(we,Tt,dr,tt,ae.z,Vt)}}else Ft.visible&&d.push(we,Tt,Ft,tt,ae.z,null)}}let nt=we.children;for(let Tt=0,Ft=nt.length;Tt<Ft;Tt++)mr(nt[Tt],We,tt,qe)}function Rr(we,We,tt,qe){let nt=we.opaque,Tt=we.transmissive,Ft=we.transparent;h.setupLightsView(tt),N===!0&&ie.setGlobalState(p.clippingPlanes,tt),Tt.length>0&&ye(nt,We,tt),qe&&oe.viewport(C.copy(qe)),nt.length>0&&xe(nt,We,tt),Tt.length>0&&xe(Tt,We,tt),Ft.length>0&&xe(Ft,We,tt),oe.buffers.depth.setTest(!0),oe.buffers.depth.setMask(!0),oe.buffers.color.setMask(!0),oe.setPolygonOffset(!1)}function ye(we,We,tt){let qe=J.isWebGL2;F===null&&(F=new kr(1,1,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")?Gm:Va,minFilter:q_,samples:qe&&a===!0?4:0})),p.getDrawingBufferSize(Y),qe?F.setSize(Y.x,Y.y):F.setSize(uD(Y.x),uD(Y.y));let nt=p.getRenderTarget();p.setRenderTarget(F),p.clear();let Tt=p.toneMapping;p.toneMapping=Cp,xe(we,We,tt),p.toneMapping=Tt,de.updateMultisampleRenderTarget(F),de.updateRenderTargetMipmap(F),p.setRenderTarget(nt)}function xe(we,We,tt){let qe=We.isScene===!0?We.overrideMaterial:null;for(let nt=0,Tt=we.length;nt<Tt;nt++){let Ft=we[nt],$t=Ft.object,zt=Ft.geometry,gr=qe===null?Ft.material:qe,Vt=Ft.group;$t.layers.test(tt.layers)&&He($t,We,tt,zt,gr,Vt)}}function He(we,We,tt,qe,nt,Tt){we.onBeforeRender(p,We,tt,qe,nt,Tt),we.modelViewMatrix.multiplyMatrices(tt.matrixWorldInverse,we.matrixWorld),we.normalMatrix.getNormalMatrix(we.modelViewMatrix),nt.onBeforeRender(p,We,tt,qe,we,Tt),nt.transparent===!0&&nt.side===Fa&&nt.forceSinglePass===!1?(nt.side=ea,nt.needsUpdate=!0,p.renderBufferDirect(tt,We,qe,nt,we,Tt),nt.side=Pf,nt.needsUpdate=!0,p.renderBufferDirect(tt,We,qe,nt,we,Tt),nt.side=Fa):p.renderBufferDirect(tt,We,qe,nt,we,Tt),we.onAfterRender(p,We,tt,qe,nt,Tt)}function Xe(we,We,tt){We.isScene!==!0&&(We=re);let qe=be.get(we),nt=h.state.lights,Tt=h.state.shadowsArray,Ft=nt.state.version,$t=he.getParameters(we,nt.state,Tt,We,tt),zt=he.getProgramCacheKey($t),gr=qe.programs;qe.environment=we.isMeshStandardMaterial?We.environment:null,qe.fog=We.fog,qe.envMap=(we.isMeshStandardMaterial?ce:ge).get(we.envMap||qe.environment),gr===void 0&&(we.addEventListener("dispose",Le),gr=new Map,qe.programs=gr);let Vt=gr.get(zt);if(Vt!==void 0){if(qe.currentProgram===Vt&&qe.lightsStateVersion===Ft)return pt(we,$t),Vt}else $t.uniforms=he.getUniforms(we),we.onBuild(tt,$t,p),we.onBeforeCompile($t,p),Vt=he.acquireProgram($t,zt),gr.set(zt,Vt),qe.uniforms=$t.uniforms;let dr=qe.uniforms;(!we.isShaderMaterial&&!we.isRawShaderMaterial||we.clipping===!0)&&(dr.clippingPlanes=ie.uniform),pt(we,$t),qe.needsLights=Xr(we),qe.lightsStateVersion=Ft,qe.needsLights&&(dr.ambientLightColor.value=nt.state.ambient,dr.lightProbe.value=nt.state.probe,dr.directionalLights.value=nt.state.directional,dr.directionalLightShadows.value=nt.state.directionalShadow,dr.spotLights.value=nt.state.spot,dr.spotLightShadows.value=nt.state.spotShadow,dr.rectAreaLights.value=nt.state.rectArea,dr.ltc_1.value=nt.state.rectAreaLTC1,dr.ltc_2.value=nt.state.rectAreaLTC2,dr.pointLights.value=nt.state.point,dr.pointLightShadows.value=nt.state.pointShadow,dr.hemisphereLights.value=nt.state.hemi,dr.directionalShadowMap.value=nt.state.directionalShadowMap,dr.directionalShadowMatrix.value=nt.state.directionalShadowMatrix,dr.spotShadowMap.value=nt.state.spotShadowMap,dr.spotLightMatrix.value=nt.state.spotLightMatrix,dr.spotLightMap.value=nt.state.spotLightMap,dr.pointShadowMap.value=nt.state.pointShadowMap,dr.pointShadowMatrix.value=nt.state.pointShadowMatrix);let Se=Vt.getUniforms(),Ge=aR.seqWithValue(Se.seq,dr);return qe.currentProgram=Vt,qe.uniformsList=Ge,Vt}function pt(we,We){let tt=be.get(we);tt.outputEncoding=We.outputEncoding,tt.instancing=We.instancing,tt.skinning=We.skinning,tt.morphTargets=We.morphTargets,tt.morphNormals=We.morphNormals,tt.morphColors=We.morphColors,tt.morphTargetsCount=We.morphTargetsCount,tt.numClippingPlanes=We.numClippingPlanes,tt.numIntersection=We.numClipIntersection,tt.vertexAlphas=We.vertexAlphas,tt.vertexTangents=We.vertexTangents,tt.toneMapping=We.toneMapping}function Lt(we,We,tt,qe,nt){We.isScene!==!0&&(We=re),de.resetTextureUnits();let Tt=We.fog,Ft=qe.isMeshStandardMaterial?We.environment:null,$t=w===null?p.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:Tf,zt=(qe.isMeshStandardMaterial?ce:ge).get(qe.envMap||Ft),gr=qe.vertexColors===!0&&!!tt.attributes.color&&tt.attributes.color.itemSize===4,Vt=!!qe.normalMap&&!!tt.attributes.tangent,dr=!!tt.morphAttributes.position,Se=!!tt.morphAttributes.normal,Ge=!!tt.morphAttributes.color,ut=qe.toneMapped?p.toneMapping:Cp,vt=tt.morphAttributes.position||tt.morphAttributes.normal||tt.morphAttributes.color,_t=vt!==void 0?vt.length:0,St=be.get(qe),Kt=h.state.lights;if(N===!0&&(Q===!0||we!==S)){let _e=we===S&&qe.id===x;ie.setState(qe,we,_e)}let Nt=!1;qe.version===St.__version?(St.needsLights&&St.lightsStateVersion!==Kt.state.version||St.outputEncoding!==$t||nt.isInstancedMesh&&St.instancing===!1||!nt.isInstancedMesh&&St.instancing===!0||nt.isSkinnedMesh&&St.skinning===!1||!nt.isSkinnedMesh&&St.skinning===!0||St.envMap!==zt||qe.fog===!0&&St.fog!==Tt||St.numClippingPlanes!==void 0&&(St.numClippingPlanes!==ie.numPlanes||St.numIntersection!==ie.numIntersection)||St.vertexAlphas!==gr||St.vertexTangents!==Vt||St.morphTargets!==dr||St.morphNormals!==Se||St.morphColors!==Ge||St.toneMapping!==ut||J.isWebGL2===!0&&St.morphTargetsCount!==_t)&&(Nt=!0):(Nt=!0,St.__version=qe.version);let Ir=St.currentProgram;Nt===!0&&(Ir=Xe(qe,We,nt));let zr=!1,Pr=!1,pi=!1,ue=Ir.getUniforms(),pe=St.uniforms;if(oe.useProgram(Ir.program)&&(zr=!0,Pr=!0,pi=!0),qe.id!==x&&(x=qe.id,Pr=!0),zr||S!==we){if(ue.setValue(se,"projectionMatrix",we.projectionMatrix),J.logarithmicDepthBuffer&&ue.setValue(se,"logDepthBufFC",2/(Math.log(we.far+1)/Math.LN2)),S!==we&&(S=we,Pr=!0,pi=!0),qe.isShaderMaterial||qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshStandardMaterial||qe.envMap){let _e=ue.map.cameraPosition;_e!==void 0&&_e.setValue(se,ae.setFromMatrixPosition(we.matrixWorld))}(qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshLambertMaterial||qe.isMeshBasicMaterial||qe.isMeshStandardMaterial||qe.isShaderMaterial)&&ue.setValue(se,"isOrthographic",we.isOrthographicCamera===!0),(qe.isMeshPhongMaterial||qe.isMeshToonMaterial||qe.isMeshLambertMaterial||qe.isMeshBasicMaterial||qe.isMeshStandardMaterial||qe.isShaderMaterial||qe.isShadowMaterial||nt.isSkinnedMesh)&&ue.setValue(se,"viewMatrix",we.matrixWorldInverse)}if(nt.isSkinnedMesh){ue.setOptional(se,nt,"bindMatrix"),ue.setOptional(se,nt,"bindMatrixInverse");let _e=nt.skeleton;_e&&(J.floatVertexTextures?(_e.boneTexture===null&&_e.computeBoneTexture(),ue.setValue(se,"boneTexture",_e.boneTexture,de),ue.setValue(se,"boneTextureSize",_e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Oe=tt.morphAttributes;if((Oe.position!==void 0||Oe.normal!==void 0||Oe.color!==void 0&&J.isWebGL2===!0)&&ne.update(nt,tt,qe,Ir),(Pr||St.receiveShadow!==nt.receiveShadow)&&(St.receiveShadow=nt.receiveShadow,ue.setValue(se,"receiveShadow",nt.receiveShadow)),qe.isMeshGouraudMaterial&&qe.envMap!==null&&(pe.envMap.value=zt,pe.flipEnvMap.value=zt.isCubeTexture&&zt.isRenderTargetTexture===!1?-1:1),Pr&&(ue.setValue(se,"toneMappingExposure",p.toneMappingExposure),St.needsLights&&nr(pe,pi),Tt&&qe.fog===!0&&Ae.refreshFogUniforms(pe,Tt),Ae.refreshMaterialUniforms(pe,qe,O,P,F),aR.upload(se,St.uniformsList,pe,de)),qe.isShaderMaterial&&qe.uniformsNeedUpdate===!0&&(aR.upload(se,St.uniformsList,pe,de),qe.uniformsNeedUpdate=!1),qe.isSpriteMaterial&&ue.setValue(se,"center",nt.center),ue.setValue(se,"modelViewMatrix",nt.modelViewMatrix),ue.setValue(se,"normalMatrix",nt.normalMatrix),ue.setValue(se,"modelMatrix",nt.matrixWorld),nt.previousModelViewMatrix&&ue.setValue(se,"previousModelViewMatrix",nt.previousModelViewMatrix),we.previousProjectionMatrix&&ue.setValue(se,"previousProjectionMatrix",we.previousProjectionMatrix),qe.isShaderMaterial||qe.isRawShaderMaterial){let _e=qe.uniformsGroups;for(let Ve=0,ft=_e.length;Ve<ft;Ve++)if(J.isWebGL2){let oa=_e[Ve];ve.update(oa,Ir),ve.bind(oa,Ir)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ir}function nr(we,We){we.ambientLightColor.needsUpdate=We,we.lightProbe.needsUpdate=We,we.directionalLights.needsUpdate=We,we.directionalLightShadows.needsUpdate=We,we.pointLights.needsUpdate=We,we.pointLightShadows.needsUpdate=We,we.spotLights.needsUpdate=We,we.spotLightShadows.needsUpdate=We,we.rectAreaLights.needsUpdate=We,we.hemisphereLights.needsUpdate=We}function Xr(we){return we.isMeshLambertMaterial||we.isMeshToonMaterial||we.isMeshPhongMaterial||we.isMeshStandardMaterial||we.isShadowMaterial||we.isShaderMaterial&&we.lights===!0}this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(we,We,tt){be.get(we.texture).__webglTexture=We,be.get(we.depthTexture).__webglTexture=tt;let qe=be.get(we);qe.__hasExternalTextures=!0,qe.__hasExternalTextures&&(qe.__autoAllocateDepthBuffer=tt===void 0,qe.__autoAllocateDepthBuffer||ee.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),qe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(we,We){let tt=be.get(we);tt.__webglFramebuffer=We,tt.__useDefaultFramebuffer=We===void 0},this.setRenderTarget=function(we,We=0,tt=0){w=we,y=We,b=tt;let qe=!0,nt=null,Tt=!1,Ft=!1;if(we){let $t=be.get(we);$t.__useDefaultFramebuffer!==void 0?(oe.bindFramebuffer(36160,null),qe=!1):$t.__webglFramebuffer===void 0?de.setupRenderTarget(we):$t.__hasExternalTextures&&de.rebindTextures(we,be.get(we.texture).__webglTexture,be.get(we.depthTexture).__webglTexture);let zt=we.texture;(zt.isData3DTexture||zt.isDataArrayTexture||zt.isCompressedArrayTexture)&&(Ft=!0);let gr=be.get(we).__webglFramebuffer;we.isWebGLCubeRenderTarget?(nt=gr[We],Tt=!0):J.isWebGL2&&we.samples>0&&de.useMultisampledRTT(we)===!1?nt=be.get(we).__webglMultisampledFramebuffer:nt=gr,C.copy(we.viewport),T.copy(we.scissor),M=we.scissorTest}else C.copy(I).multiplyScalar(O).floor(),T.copy(q).multiplyScalar(O).floor(),M=$;if(oe.bindFramebuffer(36160,nt)&&J.drawBuffers&&qe&&oe.drawBuffers(we,nt),oe.viewport(C),oe.scissor(T),oe.setScissorTest(M),Tt){let $t=be.get(we.texture);se.framebufferTexture2D(36160,36064,34069+We,$t.__webglTexture,tt)}else if(Ft){let $t=be.get(we.texture),zt=We||0;se.framebufferTextureLayer(36160,36064,$t.__webglTexture,tt||0,zt)}x=-1},this.readRenderTargetPixels=function(we,We,tt,qe,nt,Tt,Ft){if(!(we&&we.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let $t=be.get(we).__webglFramebuffer;if(we.isWebGLCubeRenderTarget&&Ft!==void 0&&($t=$t[Ft]),$t){oe.bindFramebuffer(36160,$t);try{let zt=we.texture,gr=zt.format,Vt=zt.type;if(gr!==zi&&U.convert(gr)!==se.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let dr=Vt===Gm&&(ee.has("EXT_color_buffer_half_float")||J.isWebGL2&&ee.has("EXT_color_buffer_float"));if(Vt!==Va&&U.convert(Vt)!==se.getParameter(35738)&&!(Vt===ci&&(J.isWebGL2||ee.has("OES_texture_float")||ee.has("WEBGL_color_buffer_float")))&&!dr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}We>=0&&We<=we.width-qe&&tt>=0&&tt<=we.height-nt&&se.readPixels(We,tt,qe,nt,U.convert(gr),U.convert(Vt),Tt)}finally{let zt=w!==null?be.get(w).__webglFramebuffer:null;oe.bindFramebuffer(36160,zt)}}},this.readRenderTargetPixelsAsync=async function(we,We,tt,qe,nt,Tt,Ft){if(!(we&&we.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let $t=be.get(we).__webglFramebuffer;if(we.isWebGLCubeRenderTarget&&Ft!==void 0&&($t=$t[Ft]),$t){let zt=we.texture,gr=zt.format,Vt=zt.type;if(We>=0&&We<=we.width-qe&&tt>=0&&tt<=we.height-nt){oe.bindFramebuffer(se.FRAMEBUFFER,$t);let dr=se.createBuffer();se.bindBuffer(se.PIXEL_PACK_BUFFER,dr),se.bufferData(se.PIXEL_PACK_BUFFER,Tt.byteLength,se.STREAM_READ),se.readPixels(We,tt,qe,nt,U.convert(gr),U.convert(Vt),0);let Se=w!==null?be.get(w).__webglFramebuffer:null;oe.bindFramebuffer(se.FRAMEBUFFER,Se);let Ge=se.fenceSync(se.SYNC_GPU_COMMANDS_COMPLETE,0);return se.flush(),await b7e(se,Ge,4),se.bindBuffer(se.PIXEL_PACK_BUFFER,dr),se.getBufferSubData(se.PIXEL_PACK_BUFFER,0,Tt),se.deleteBuffer(dr),se.deleteSync(Ge),Tt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(we,We,tt=0){let qe=Math.pow(2,-tt),nt=Math.floor(We.image.width*qe),Tt=Math.floor(We.image.height*qe);de.setTexture2D(We,0),se.copyTexSubImage2D(3553,tt,0,0,we.x,we.y,nt,Tt),oe.unbindTexture()},this.copyTextureToTexture=function(we,We,tt,qe=0){let nt=We.image.width,Tt=We.image.height,Ft=U.convert(tt.format),$t=U.convert(tt.type);de.setTexture2D(tt,0),se.pixelStorei(37440,tt.flipY),se.pixelStorei(37441,tt.premultiplyAlpha),se.pixelStorei(3317,tt.unpackAlignment),We.isDataTexture?se.texSubImage2D(3553,qe,we.x,we.y,nt,Tt,Ft,$t,We.image.data):We.isCompressedTexture?se.compressedTexSubImage2D(3553,qe,we.x,we.y,We.mipmaps[0].width,We.mipmaps[0].height,Ft,We.mipmaps[0].data):se.texSubImage2D(3553,qe,we.x,we.y,Ft,$t,We.image),qe===0&&tt.generateMipmaps&&se.generateMipmap(3553),oe.unbindTexture()},this.copyTextureToTexture3D=function(we,We,tt,qe,nt=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let Tt=we.max.x-we.min.x+1,Ft=we.max.y-we.min.y+1,$t=we.max.z-we.min.z+1,zt=U.convert(qe.format),gr=U.convert(qe.type),Vt;if(qe.isData3DTexture)de.setTexture3D(qe,0),Vt=32879;else if(qe.isDataArrayTexture)de.setTexture2DArray(qe,0),Vt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}se.pixelStorei(37440,qe.flipY),se.pixelStorei(37441,qe.premultiplyAlpha),se.pixelStorei(3317,qe.unpackAlignment);let dr=se.getParameter(3314),Se=se.getParameter(32878),Ge=se.getParameter(3316),ut=se.getParameter(3315),vt=se.getParameter(32877),_t=tt.isCompressedTexture?tt.mipmaps[0]:tt.image;se.pixelStorei(3314,_t.width),se.pixelStorei(32878,_t.height),se.pixelStorei(3316,we.min.x),se.pixelStorei(3315,we.min.y),se.pixelStorei(32877,we.min.z),tt.isDataTexture||tt.isData3DTexture?se.texSubImage3D(Vt,nt,We.x,We.y,We.z,Tt,Ft,$t,zt,gr,_t.data):tt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),se.compressedTexSubImage3D(Vt,nt,We.x,We.y,We.z,Tt,Ft,$t,zt,_t.data)):se.texSubImage3D(Vt,nt,We.x,We.y,We.z,Tt,Ft,$t,zt,gr,_t),se.pixelStorei(3314,dr),se.pixelStorei(32878,Se),se.pixelStorei(3316,Ge),se.pixelStorei(3315,ut),se.pixelStorei(32877,vt),nt===0&&qe.generateMipmaps&&se.generateMipmap(Vt),oe.unbindTexture()},this.initRenderTarget=function(we){be.get(we).__webglFramebuffer===void 0&&de.setupRenderTarget(we)},this.initTexture=function(we){we.isCubeTexture?de.setTextureCube(we,0):we.isData3DTexture?de.setTexture3D(we,0):we.isDataArrayTexture||we.isCompressedArrayTexture?de.setTexture2DArray(we,0):de.setTexture2D(we,0),oe.unbindTexture()},this.resetState=function(){y=0,b=0,w=null,oe.reset(),te.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var mJe=class extends o_e{};mJe.prototype.isWebGL1Renderer=!0;var s_e=class{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new er(e),this.near=t,this.far=r}clone(){return new s_e(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Io=class extends li{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let r=super.toJSON(t);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}},gJe=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=JV,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ws()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ws()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ws()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Ha=new k,i6=class{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ha.fromBufferAttribute(this,t),Ha.applyMatrix4(e),this.setXYZ(t,Ha.x,Ha.y,Ha.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ha.fromBufferAttribute(this,t),Ha.applyNormalMatrix(e),this.setXYZ(t,Ha.x,Ha.y,Ha.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ha.fromBufferAttribute(this,t),Ha.transformDirection(e),this.setXYZ(t,Ha.x,Ha.y,Ha.z);return this}setX(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=wi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Dm(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Dm(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Dm(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Dm(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=wi(t,this.array),r=wi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=wi(t,this.array),r=wi(r,this.array),i=wi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=wi(t,this.array),r=wi(r,this.array),i=wi(i,this.array),n=wi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return new tr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new i6(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},l_e=class extends li{constructor(){super(),this.isBone=!0,this.type="Bone"}},so=class extends Vi{constructor(t=null,r=1,i=1,n,a,o,s,l,u=Dr,c=Dr,d,h){super(null,o,s,l,u,c,n,a,d,h),this.isDataTexture=!0,this.image={data:t,width:r,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},$Q=new dt,vJe=new dt,lW=class{constructor(e=[],t=[]){this.uuid=Ws(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new dt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let n=0,a=e.length;n<a;n++){let o=e[n]?e[n].matrixWorld:vJe;$Q.multiplyMatrices(o,t[n]),$Q.toArray(r,n*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new lW(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=G1e(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new so(t,e,e,zi,ci);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){let n=e.bones[r],a=t[n];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),a=new l_e),this.bones.push(a),this.boneInverses.push(new dt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let i=0,n=t.length;i<n;i++){let a=t[i];e.bones.push(a.uuid);let o=r[i];e.boneInverses.push(o.toArray())}return e}},gM=class extends tr{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},XQ=new dt,YQ=new dt,SA=[],yJe=new dt,Nx=new Ci,bJe=class extends Ci{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new gM(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,yJe)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let r=this.matrixWorld,i=this.count;if(Nx.geometry=this.geometry,Nx.material=this.material,Nx.material!==void 0)for(let n=0;n<i;n++){this.getMatrixAt(n,XQ),YQ.multiplyMatrices(r,XQ),Nx.matrixWorld=YQ,Nx.raycast(e,SA);for(let a=0,o=SA.length;a<o;a++){let s=SA[a];s.instanceId=n,s.object=this,t.push(s)}SA.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new gM(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},Rv=class extends pP{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new er(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},KQ=new k,QQ=new k,JQ=new dt,Uz=new _w,CA=new Lo,cD=class extends li{constructor(e=new Wt,t=new Rv){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,n=t.count;i<n;i++)KQ.fromBufferAttribute(t,i-1),QQ.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=KQ.distanceTo(QQ);e.setAttribute("lineDistance",new Pt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),CA.copy(r.boundingSphere),CA.applyMatrix4(i),CA.radius+=n,e.ray.intersectsSphere(CA)===!1)return;JQ.copy(i).invert(),Uz.copy(e.ray).applyMatrix4(JQ);let o=n/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new k,u=new k,c=new k,d=new k,h=this.isLineSegments?2:1,f=r.index,g=r.attributes.position;if(f!==null){let p=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count);for(let y=p,b=m-1;y<b;y+=h){let w=f.getX(y),x=f.getX(y+1);if(l.fromBufferAttribute(g,w),u.fromBufferAttribute(g,x),Uz.distanceSqToSegment(l,u,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);let S=e.ray.origin.distanceTo(d);S<e.near||S>e.far||t.push({distance:S,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{let p=Math.max(0,a.start),m=Math.min(g.count,a.start+a.count);for(let y=p,b=m-1;y<b;y+=h){if(l.fromBufferAttribute(g,y),u.fromBufferAttribute(g,y+1),Uz.distanceSqToSegment(l,u,d,c)>s)continue;d.applyMatrix4(this.matrixWorld);let w=e.ray.origin.distanceTo(d);w<e.near||w>e.far||t.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}},ZQ=new k,eJ=new k,mP=class extends cD{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,n=t.count;i<n;i+=2)ZQ.fromBufferAttribute(t,i),eJ.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+ZQ.distanceTo(eJ);e.setAttribute("lineDistance",new Pt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},_Je=class extends Vi{constructor(e,t,r,i,n,a,o,s,l){super(e,t,r,i,n,a,o,s,l),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Ar,this.magFilter=n!==void 0?n:Ar,this.generateMipmaps=!1;let u=this;function c(){u.needsUpdate=!0,e.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(c)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},wJe=class extends Vi{constructor(e,t,r,i,n,a,o,s,l){super(e,t,r,i,n,a,o,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},Fp=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),n+=r.distanceTo(i),t.push(n),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,n=r.length,a;t?a=t:a=e*r[n-1];let o=0,s=n-1,l;for(;o<=s;)if(i=Math.floor(o+(s-o)/2),l=r[i]-a,l<0)o=i+1;else if(l>0)s=i-1;else{s=i;break}if(i=s,r[i]===a)return i/(n-1);let u=r[i],c=r[i+1]-u,d=(a-u)/c;return(i+d)/(n-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);let n=this.getPoint(r),a=this.getPoint(i),o=t||(n.isVector2?new ze:new k);return o.copy(a).sub(n).normalize(),o}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new k,i=[],n=[],a=[],o=new k,s=new dt;for(let h=0;h<=e;h++){let f=h/e;i[h]=this.getTangentAt(f,new k)}n[0]=new k,a[0]=new k;let l=Number.MAX_VALUE,u=Math.abs(i[0].x),c=Math.abs(i[0].y),d=Math.abs(i[0].z);u<=l&&(l=u,r.set(1,0,0)),c<=l&&(l=c,r.set(0,1,0)),d<=l&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],o),a[0].crossVectors(i[0],n[0]);for(let h=1;h<=e;h++){if(n[h]=n[h-1].clone(),a[h]=a[h-1].clone(),o.crossVectors(i[h-1],i[h]),o.length()>Number.EPSILON){o.normalize();let f=Math.acos(_n(i[h-1].dot(i[h]),-1,1));n[h].applyMatrix4(s.makeRotationAxis(o,f))}a[h].crossVectors(i[h],n[h])}if(t===!0){let h=Math.acos(_n(n[0].dot(n[e]),-1,1));h/=e,i[0].dot(o.crossVectors(n[0],n[e]))>0&&(h=-h);for(let f=1;f<=e;f++)n[f].applyMatrix4(s.makeRotationAxis(i[f],h*f)),a[f].crossVectors(i[f],n[f])}return{tangents:i,normals:n,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},J2=class extends Fp{constructor(e=0,t=0,r=1,i=1,n=0,a=Math.PI*2,o=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t){let r=t||new ze,i=Math.PI*2,n=this.aEndAngle-this.aStartAngle,a=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(a?n=0:n=i),this.aClockwise===!0&&!a&&(n===i?n=-i:n=n-i);let o=this.aStartAngle+e*n,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){let u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=s-this.aX,h=l-this.aY;s=d*u-h*c+this.aX,l=d*c+h*u+this.aY}return r.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},xJe=class extends J2{constructor(e,t,r,i,n,a){super(e,t,r,r,i,n,a),this.isArcCurve=!0,this.type="ArcCurve"}};function uW(){let e=0,t=0,r=0,i=0;function n(a,o,s,l){e=a,t=s,r=-3*a+3*o-2*s-l,i=2*a-2*o+s+l}return{initCatmullRom:function(a,o,s,l,u){n(o,s,u*(s-a),u*(l-o))},initNonuniformCatmullRom:function(a,o,s,l,u,c,d){let h=(o-a)/u-(s-a)/(u+c)+(s-o)/c,f=(s-o)/c-(l-o)/(c+d)+(l-s)/d;h*=c,f*=c,n(o,s,h,f)},calc:function(a){let o=a*a,s=o*a;return e+t*a+r*o+i*s}}}var EA=new k,Vz=new uW,kz=new uW,qz=new uW,SJe=class extends Fp{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new k){let r=t,i=this.points,n=i.length,a=(n-(this.closed?0:1))*e,o=Math.floor(a),s=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/n)+1)*n:s===0&&o===n-1&&(o=n-2,s=1);let l,u;this.closed||o>0?l=i[(o-1)%n]:(EA.subVectors(i[0],i[1]).add(i[0]),l=EA);let c=i[o%n],d=i[(o+1)%n];if(this.closed||o+2<n?u=i[(o+2)%n]:(EA.subVectors(i[n-1],i[n-2]).add(i[n-1]),u=EA),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,f=Math.pow(l.distanceToSquared(c),h),g=Math.pow(c.distanceToSquared(d),h),p=Math.pow(d.distanceToSquared(u),h);g<1e-4&&(g=1),f<1e-4&&(f=g),p<1e-4&&(p=g),Vz.initNonuniformCatmullRom(l.x,c.x,d.x,u.x,f,g,p),kz.initNonuniformCatmullRom(l.y,c.y,d.y,u.y,f,g,p),qz.initNonuniformCatmullRom(l.z,c.z,d.z,u.z,f,g,p)}else this.curveType==="catmullrom"&&(Vz.initCatmullRom(l.x,c.x,d.x,u.x,this.tension),kz.initCatmullRom(l.y,c.y,d.y,u.y,this.tension),qz.initCatmullRom(l.z,c.z,d.z,u.z,this.tension));return r.set(Vz.calc(s),kz.calc(s),qz.calc(s)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new k().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function tJ(e,t,r,i,n){let a=(i-t)*.5,o=(n-r)*.5,s=e*e,l=e*s;return(2*r-2*i+a+o)*l+(-3*r+3*i-2*a-o)*s+a*e+r}function CJe(e,t){let r=1-e;return r*r*t}function EJe(e,t){return 2*(1-e)*e*t}function MJe(e,t){return e*e*t}function TE(e,t,r,i){return CJe(e,t)+EJe(e,r)+MJe(e,i)}function PJe(e,t){let r=1-e;return r*r*r*t}function TJe(e,t){let r=1-e;return 3*r*r*e*t}function AJe(e,t){return 3*(1-e)*e*e*t}function OJe(e,t){return e*e*e*t}function AE(e,t,r,i,n){return PJe(e,t)+TJe(e,r)+AJe(e,i)+OJe(e,n)}var _f=class extends Fp{constructor(e=new ze,t=new ze,r=new ze,i=new ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ze){let r=t,i=this.v0,n=this.v1,a=this.v2,o=this.v3;return r.set(AE(e,i.x,n.x,a.x,o.x),AE(e,i.y,n.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},oR=class extends Fp{constructor(e=new k,t=new k,r=new k,i=new k){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new k){let r=t,i=this.v0,n=this.v1,a=this.v2,o=this.v3;return r.set(AE(e,i.x,n.x,a.x,o.x),AE(e,i.y,n.y,a.y,o.y),AE(e,i.z,n.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Cf=class extends Fp{constructor(e=new ze,t=new ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ze){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new ze;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},u_e=class extends Fp{constructor(e=new k,t=new k){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new k){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},bv=class extends Fp{constructor(e=new ze,t=new ze,r=new ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ze){let r=t,i=this.v0,n=this.v1,a=this.v2;return r.set(TE(e,i.x,n.x,a.x),TE(e,i.y,n.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},RJe=class extends Fp{constructor(e=new k,t=new k,r=new k){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new k){let r=t,i=this.v0,n=this.v1,a=this.v2;return r.set(TE(e,i.x,n.x,a.x),TE(e,i.y,n.y,a.y),TE(e,i.z,n.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},cW=class extends Fp{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ze){let r=t,i=this.points,n=(i.length-1)*e,a=Math.floor(n),o=n-a,s=i[a===0?a:a-1],l=i[a],u=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return r.set(tJ(o,s.x,l.x,u.x,c.x),tJ(o,s.y,l.y,u.y,c.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new ze().fromArray(i))}return this}},DJe=Object.freeze({__proto__:null,ArcCurve:xJe,CatmullRomCurve3:SJe,CubicBezierCurve:_f,CubicBezierCurve3:oR,EllipseCurve:J2,LineCurve:Cf,LineCurve3:u_e,QuadraticBezierCurve:bv,QuadraticBezierCurve3:RJe,SplineCurve:cW}),c_e=class extends Fp{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Cf(t,e))}getPoint(e,t){let r=e*this.getLength(),i=this.getCurveLengths(),n=0;for(;n<i.length;){if(i[n]>=r){let a=i[n]-r,o=this.curves[n],s=o.getLength(),l=s===0?0:1-a/s;return o.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,n=this.curves;i<n.length;i++){let a=n[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let l=0;l<s.length;l++){let u=s[l];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new DJe[i.type]().fromJSON(i))}return this}},dD=class extends c_e{constructor(e){super(),this.type="Path",this.currentPoint=new ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new Cf(this.currentPoint.clone(),new ze(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new bv(this.currentPoint.clone(),new ze(e,t),new ze(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,a){let o=new _f(this.currentPoint.clone(),new ze(e,t),new ze(r,i),new ze(n,a));return this.curves.push(o),this.currentPoint.set(n,a),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new cW(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,a){let o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,r,i,n,a),this}absarc(e,t,r,i,n,a){return this.absellipse(e,t,r,r,i,n,a),this}ellipse(e,t,r,i,n,a,o,s){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,i,n,a,o,s),this}absellipse(e,t,r,i,n,a,o,s){let l=new J2(e,t,r,i,n,a,o,s);if(this.curves.length>0){let c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},d_e=class extends Wt{constructor(e=[new ze(0,-.5),new ze(.5,0),new ze(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=_n(i,0,Math.PI*2);let n=[],a=[],o=[],s=[],l=[],u=1/t,c=new k,d=new ze,h=new k,f=new k,g=new k,p=0,m=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:p=e[y+1].x-e[y].x,m=e[y+1].y-e[y].y,h.x=m*1,h.y=-p,h.z=m*0,g.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(g.x,g.y,g.z);break;default:p=e[y+1].x-e[y].x,m=e[y+1].y-e[y].y,h.x=m*1,h.y=-p,h.z=m*0,f.copy(h),h.x+=g.x,h.y+=g.y,h.z+=g.z,h.normalize(),s.push(h.x,h.y,h.z),g.copy(f)}for(let y=0;y<=t;y++){let b=r+y*u*i,w=Math.sin(b),x=Math.cos(b);for(let S=0;S<=e.length-1;S++){c.x=e[S].x*w,c.y=e[S].y,c.z=e[S].x*x,a.push(c.x,c.y,c.z),d.x=y/t,d.y=S/(e.length-1),o.push(d.x,d.y);let C=s[3*S+0]*w,T=s[3*S+1],M=s[3*S+0]*x;l.push(C,T,M)}}for(let y=0;y<t;y++)for(let b=0;b<e.length-1;b++){let w=b+y*e.length,x=w,S=w+e.length,C=w+e.length+1,T=w+1;n.push(x,S,T),n.push(C,T,S)}this.setIndex(n),this.setAttribute("position",new Pt(a,3)),this.setAttribute("uv",new Pt(o,2)),this.setAttribute("normal",new Pt(l,3))}static fromJSON(e){return new d_e(e.points,e.segments,e.phiStart,e.phiLength)}},dW=class extends Wt{constructor(e=1,t=1,r=1,i=32,n=1,a=!1,o=0,s=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s};let l=this;i=Math.floor(i),n=Math.floor(n);let u=[],c=[],d=[],h=[],f=0,g=[],p=r/2,m=0;y(),a===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new Pt(c,3)),this.setAttribute("normal",new Pt(d,3)),this.setAttribute("uv",new Pt(h,2));function y(){let w=new k,x=new k,S=0,C=(t-e)/r;for(let T=0;T<=n;T++){let M=[],A=T/n,P=A*(t-e)+e;for(let O=0;O<=i;O++){let j=O/i,D=j*s+o,I=Math.sin(D),q=Math.cos(D);x.x=P*I,x.y=-A*r+p,x.z=P*q,c.push(x.x,x.y,x.z),w.set(I,C,q).normalize(),d.push(w.x,w.y,w.z),h.push(j,1-A),M.push(f++)}g.push(M)}for(let T=0;T<i;T++)for(let M=0;M<n;M++){let A=g[M][T],P=g[M+1][T],O=g[M+1][T+1],j=g[M][T+1];u.push(A,P,j),u.push(P,O,j),S+=6}l.addGroup(m,S,0),m+=S}function b(w){let x=f,S=new ze,C=new k,T=0,M=w===!0?e:t,A=w===!0?1:-1;for(let O=1;O<=i;O++)c.push(0,p*A,0),d.push(0,A,0),h.push(.5,.5),f++;let P=f;for(let O=0;O<=i;O++){let j=O/i*s+o,D=Math.cos(j),I=Math.sin(j);C.x=M*I,C.y=p*A,C.z=M*D,c.push(C.x,C.y,C.z),d.push(0,A,0),S.x=D*.5+.5,S.y=I*.5*A+.5,h.push(S.x,S.y),f++}for(let O=0;O<i;O++){let j=x+O,D=P+O;w===!0?u.push(D,D+1,j):u.push(D+1,D,j),T+=3}l.addGroup(m,T,w===!0?1:2),m+=T}}static fromJSON(e){return new dW(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},hW=class extends dW{constructor(e=1,t=1,r=32,i=1,n=!1,a=0,o=Math.PI*2){super(0,e,t,r,i,n,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:o}}static fromJSON(e){return new hW(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},fW=class extends Wt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};let n=[],a=[];o(i),l(r),u(),this.setAttribute("position",new Pt(n,3)),this.setAttribute("normal",new Pt(n.slice(),3)),this.setAttribute("uv",new Pt(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(y){let b=new k,w=new k,x=new k;for(let S=0;S<t.length;S+=3)h(t[S+0],b),h(t[S+1],w),h(t[S+2],x),s(b,w,x,y)}function s(y,b,w,x){let S=x+1,C=[];for(let T=0;T<=S;T++){C[T]=[];let M=y.clone().lerp(w,T/S),A=b.clone().lerp(w,T/S),P=S-T;for(let O=0;O<=P;O++)O===0&&T===S?C[T][O]=M:C[T][O]=M.clone().lerp(A,O/P)}for(let T=0;T<S;T++)for(let M=0;M<2*(S-T)-1;M++){let A=Math.floor(M/2);M%2===0?(d(C[T][A+1]),d(C[T+1][A]),d(C[T][A])):(d(C[T][A+1]),d(C[T+1][A+1]),d(C[T+1][A]))}}function l(y){let b=new k;for(let w=0;w<n.length;w+=3)b.x=n[w+0],b.y=n[w+1],b.z=n[w+2],b.normalize().multiplyScalar(y),n[w+0]=b.x,n[w+1]=b.y,n[w+2]=b.z}function u(){let y=new k;for(let b=0;b<n.length;b+=3){y.x=n[b+0],y.y=n[b+1],y.z=n[b+2];let w=p(y)/2/Math.PI+.5,x=m(y)/Math.PI+.5;a.push(w,1-x)}f(),c()}function c(){for(let y=0;y<a.length;y+=6){let b=a[y+0],w=a[y+2],x=a[y+4],S=Math.max(b,w,x),C=Math.min(b,w,x);S>.9&&C<.1&&(b<.2&&(a[y+0]+=1),w<.2&&(a[y+2]+=1),x<.2&&(a[y+4]+=1))}}function d(y){n.push(y.x,y.y,y.z)}function h(y,b){let w=y*3;b.x=e[w+0],b.y=e[w+1],b.z=e[w+2]}function f(){let y=new k,b=new k,w=new k,x=new k,S=new ze,C=new ze,T=new ze;for(let M=0,A=0;M<n.length;M+=9,A+=6){y.set(n[M+0],n[M+1],n[M+2]),b.set(n[M+3],n[M+4],n[M+5]),w.set(n[M+6],n[M+7],n[M+8]),S.set(a[A+0],a[A+1]),C.set(a[A+2],a[A+3]),T.set(a[A+4],a[A+5]),x.copy(y).add(b).add(w).divideScalar(3);let P=p(x);g(S,A+0,y,P),g(C,A+2,b,P),g(T,A+4,w,P)}}function g(y,b,w,x){x<0&&y.x===1&&(a[b]=y.x-1),w.x===0&&w.z===0&&(a[b]=x/2/Math.PI+.5)}function p(y){return Math.atan2(y.z,-y.x)}function m(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new fW(e.vertices,e.indices,e.radius,e.details)}},h_e=class extends fW{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new h_e(e.radius,e.detail)}},hD=class extends dD{constructor(e){super(e),this.uuid=Ws(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new dD().fromJSON(i))}return this}},IJe={triangulate:function(e,t,r=2){let i=t&&t.length,n=i?t[0]*r:e.length,a=f_e(e,0,n,r,!0),o=[];if(!a||a.next===a.prev)return o;let s,l,u,c,d,h,f;if(i&&(a=FJe(e,t,a,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(let g=r;g<n;g+=r)d=e[g],h=e[g+1],d<s&&(s=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);f=Math.max(u-s,c-l),f=f!==0?32767/f:0}return vM(a,o,r,s,l,f,0),o}};function f_e(e,t,r,i,n){let a,o;if(n===YJe(e,t,r,i)>0)for(a=t;a<r;a+=i)o=rJ(a,e[a],e[a+1],o);else for(a=r-i;a>=t;a-=i)o=rJ(a,e[a],e[a+1],o);return o&&Z2(o,o.next)&&(bM(o),o=o.next),o}function db(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(Z2(r,r.next)||Ni(r.prev,r,r.next)===0)){if(bM(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function vM(e,t,r,i,n,a,o){if(!e)return;!o&&a&&qJe(e,i,n,a);let s=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,a?zJe(e,i,n,a):jJe(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),bM(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=BJe(db(e),t,r),vM(e,t,r,i,n,a,2)):o===2&&LJe(e,t,r,i,n,a):vM(db(e),t,r,i,n,a,1);break}}}function jJe(e){let t=e.prev,r=e,i=e.next;if(Ni(t,r,i)>=0)return!1;let n=t.x,a=r.x,o=i.x,s=t.y,l=r.y,u=i.y,c=n<a?n<o?n:o:a<o?a:o,d=s<l?s<u?s:u:l<u?l:u,h=n>a?n>o?n:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u,g=i.next;for(;g!==t;){if(g.x>=c&&g.x<=h&&g.y>=d&&g.y<=f&&e_(n,s,a,l,o,u,g.x,g.y)&&Ni(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function zJe(e,t,r,i){let n=e.prev,a=e,o=e.next;if(Ni(n,a,o)>=0)return!1;let s=n.x,l=a.x,u=o.x,c=n.y,d=a.y,h=o.y,f=s<l?s<u?s:u:l<u?l:u,g=c<d?c<h?c:h:d<h?d:h,p=s>l?s>u?s:u:l>u?l:u,m=c>d?c>h?c:h:d>h?d:h,y=n6(f,g,t,r,i),b=n6(p,m,t,r,i),w=e.prevZ,x=e.nextZ;for(;w&&w.z>=y&&x&&x.z<=b;){if(w.x>=f&&w.x<=p&&w.y>=g&&w.y<=m&&w!==n&&w!==o&&e_(s,c,l,d,u,h,w.x,w.y)&&Ni(w.prev,w,w.next)>=0||(w=w.prevZ,x.x>=f&&x.x<=p&&x.y>=g&&x.y<=m&&x!==n&&x!==o&&e_(s,c,l,d,u,h,x.x,x.y)&&Ni(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;w&&w.z>=y;){if(w.x>=f&&w.x<=p&&w.y>=g&&w.y<=m&&w!==n&&w!==o&&e_(s,c,l,d,u,h,w.x,w.y)&&Ni(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;x&&x.z<=b;){if(x.x>=f&&x.x<=p&&x.y>=g&&x.y<=m&&x!==n&&x!==o&&e_(s,c,l,d,u,h,x.x,x.y)&&Ni(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function BJe(e,t,r){let i=e;do{let n=i.prev,a=i.next.next;!Z2(n,a)&&p_e(n,i,i.next,a)&&yM(n,a)&&yM(a,n)&&(t.push(n.i/r|0),t.push(i.i/r|0),t.push(a.i/r|0),bM(i),bM(i.next),i=e=a),i=i.next}while(i!==e);return db(i)}function LJe(e,t,r,i,n,a){let o=e;do{let s=o.next.next;for(;s!==o.prev;){if(o.i!==s.i&&HJe(o,s)){let l=m_e(o,s);o=db(o,o.next),l=db(l,l.next),vM(o,t,r,i,n,a,0),vM(l,t,r,i,n,a,0);return}s=s.next}o=o.next}while(o!==e)}function FJe(e,t,r,i){let n=[],a,o,s,l,u;for(a=0,o=t.length;a<o;a++)s=t[a]*i,l=a<o-1?t[a+1]*i:e.length,u=f_e(e,s,l,i,!1),u===u.next&&(u.steiner=!0),n.push(GJe(u));for(n.sort(NJe),a=0;a<n.length;a++)r=UJe(n[a],r);return r}function NJe(e,t){return e.x-t.x}function UJe(e,t){let r=VJe(e,t);if(!r)return t;let i=m_e(r,e);return db(i,i.next),db(r,r.next)}function VJe(e,t){let r=t,i=-1/0,n,a=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){let h=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=a&&h>i&&(i=h,n=r.x<r.next.x?r:r.next,h===a))return n}r=r.next}while(r!==t);if(!n)return null;let s=n,l=n.x,u=n.y,c=1/0,d;r=n;do a>=r.x&&r.x>=l&&a!==r.x&&e_(o<u?a:i,o,l,u,o<u?i:a,o,r.x,r.y)&&(d=Math.abs(o-r.y)/(a-r.x),yM(r,e)&&(d<c||d===c&&(r.x>n.x||r.x===n.x&&kJe(n,r)))&&(n=r,c=d)),r=r.next;while(r!==s);return n}function kJe(e,t){return Ni(e.prev,e,t.prev)<0&&Ni(t.next,e,e.next)<0}function qJe(e,t,r,i){let n=e;do n.z===0&&(n.z=n6(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,WJe(n)}function WJe(e){let t,r,i,n,a,o,s,l,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,i=r,s=0,t=0;t<u&&(s++,i=i.nextZ,!!i);t++);for(l=u;s>0||l>0&&i;)s!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(o>1);return e}function n6(e,t,r,i,n){return e=(e-r)*n|0,t=(t-i)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function GJe(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function e_(e,t,r,i,n,a,o,s){return(n-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(i-s)>=(r-o)*(t-s)&&(r-o)*(a-s)>=(n-o)*(i-s)}function HJe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!$Je(e,t)&&(yM(e,t)&&yM(t,e)&&XJe(e,t)&&(Ni(e.prev,e,t.prev)||Ni(e,t.prev,t))||Z2(e,t)&&Ni(e.prev,e,e.next)>0&&Ni(t.prev,t,t.next)>0)}function Ni(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Z2(e,t){return e.x===t.x&&e.y===t.y}function p_e(e,t,r,i){let n=PA(Ni(e,t,r)),a=PA(Ni(e,t,i)),o=PA(Ni(r,i,e)),s=PA(Ni(r,i,t));return!!(n!==a&&o!==s||n===0&&MA(e,r,t)||a===0&&MA(e,i,t)||o===0&&MA(r,e,i)||s===0&&MA(r,t,i))}function MA(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function PA(e){return e>0?1:e<0?-1:0}function $Je(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&p_e(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function yM(e,t){return Ni(e.prev,e,e.next)<0?Ni(e,t,e.next)>=0&&Ni(e,e.prev,t)>=0:Ni(e,t,e.prev)<0||Ni(e,e.next,t)<0}function XJe(e,t){let r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function m_e(e,t){let r=new a6(e.i,e.x,e.y),i=new a6(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function rJ(e,t,r,i){let n=new a6(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function bM(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function a6(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function YJe(e,t,r,i){let n=0;for(let a=t,o=r-i;a<r;a+=i)n+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return n}var g_e=class{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return r*.5}static isClockWise(e){return g_e.area(e)<0}static triangulateShape(e,t){let r=[],i=[],n=[];iJ(e),nJ(r,e);let a=e.length;t.forEach(iJ);for(let s=0;s<t.length;s++)i.push(a),a+=t[s].length,nJ(r,t[s]);let o=IJe.triangulate(r,i);for(let s=0;s<o.length;s+=3)n.push(o.slice(s,s+3));return n}};function iJ(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function nJ(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var v_e=class extends fW{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new v_e(e.radius,e.detail)}},m_=class extends Wt{constructor(e=1,t=32,r=16,i=0,n=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let s=Math.min(a+o,Math.PI),l=0,u=[],c=new k,d=new k,h=[],f=[],g=[],p=[];for(let m=0;m<=r;m++){let y=[],b=m/r,w=0;m==0&&a==0?w=.5/t:m==r&&s==Math.PI&&(w=-.5/t);for(let x=0;x<=t;x++){let S=x/t;c.x=-e*Math.cos(i+S*n)*Math.sin(a+b*o),c.y=e*Math.cos(a+b*o),c.z=e*Math.sin(i+S*n)*Math.sin(a+b*o),f.push(c.x,c.y,c.z),d.copy(c).normalize(),g.push(d.x,d.y,d.z),p.push(S+w,1-b),y.push(l++)}u.push(y)}for(let m=0;m<r;m++)for(let y=0;y<t;y++){let b=u[m][y+1],w=u[m][y],x=u[m+1][y],S=u[m+1][y+1];(m!==0||a>0)&&h.push(b,w,S),(m!==r-1||s<Math.PI)&&h.push(w,x,S)}this.setIndex(h),this.setAttribute("position",new Pt(f,3)),this.setAttribute("normal",new Pt(g,3)),this.setAttribute("uv",new Pt(p,2))}static fromJSON(e){return new m_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},y_e=class extends Wt{constructor(e=1,t=.4,r=12,i=48,n=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},r=Math.floor(r),i=Math.floor(i);let a=[],o=[],s=[],l=[],u=new k,c=new k,d=new k;for(let h=0;h<=r;h++)for(let f=0;f<=i;f++){let g=f/i*n,p=h/r*Math.PI*2;c.x=(e+t*Math.cos(p))*Math.cos(g),c.y=(e+t*Math.cos(p))*Math.sin(g),c.z=t*Math.sin(p),o.push(c.x,c.y,c.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),d.subVectors(c,u).normalize(),s.push(d.x,d.y,d.z),l.push(f/i),l.push(h/r)}for(let h=1;h<=r;h++)for(let f=1;f<=i;f++){let g=(i+1)*h+f-1,p=(i+1)*(h-1)+f-1,m=(i+1)*(h-1)+f,y=(i+1)*h+f;a.push(g,p,y),a.push(p,m,y)}this.setIndex(a),this.setAttribute("position",new Pt(o,3)),this.setAttribute("normal",new Pt(s,3)),this.setAttribute("uv",new Pt(l,2))}static fromJSON(e){return new y_e(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},b_e=class extends Wt{constructor(e=1,t=.4,r=64,i=8,n=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:a},r=Math.floor(r),i=Math.floor(i);let o=[],s=[],l=[],u=[],c=new k,d=new k,h=new k,f=new k,g=new k,p=new k,m=new k;for(let b=0;b<=r;++b){let w=b/r*n*Math.PI*2;y(w,n,a,e,h),y(w+.01,n,a,e,f),p.subVectors(f,h),m.addVectors(f,h),g.crossVectors(p,m),m.crossVectors(g,p),g.normalize(),m.normalize();for(let x=0;x<=i;++x){let S=x/i*Math.PI*2,C=-t*Math.cos(S),T=t*Math.sin(S);c.x=h.x+(C*m.x+T*g.x),c.y=h.y+(C*m.y+T*g.y),c.z=h.z+(C*m.z+T*g.z),s.push(c.x,c.y,c.z),d.subVectors(c,h).normalize(),l.push(d.x,d.y,d.z),u.push(b/r),u.push(x/i)}}for(let b=1;b<=r;b++)for(let w=1;w<=i;w++){let x=(i+1)*(b-1)+(w-1),S=(i+1)*b+(w-1),C=(i+1)*b+w,T=(i+1)*(b-1)+w;o.push(x,S,T),o.push(S,C,T)}this.setIndex(o),this.setAttribute("position",new Pt(s,3)),this.setAttribute("normal",new Pt(l,3)),this.setAttribute("uv",new Pt(u,2));function y(b,w,x,S,C){let T=Math.cos(b),M=Math.sin(b),A=x/w*b,P=Math.cos(A);C.x=S*(2+P)*.5*T,C.y=S*(2+P)*M*.5,C.z=S*Math.sin(A)*.5}}static fromJSON(e){return new b_e(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},KJe=class extends qr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}};function Pg(e,t,r){return __e(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)}function TA(e,t,r){return!e||e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function __e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QJe(e){function t(n,a){return e[n]-e[a]}let r=e.length,i=new Array(r);for(let n=0;n!==r;++n)i[n]=n;return i.sort(t),i}function aJ(e,t,r){let i=e.length,n=new e.constructor(i);for(let a=0,o=0;o!==i;++a){let s=r[a]*t;for(let l=0;l!==t;++l)n[o++]=e[s+l]}return n}function w_e(e,t,r,i){let n=1,a=e[0];for(;a!==void 0&&a[i]===void 0;)a=e[n++];if(a===void 0)return;let o=a[i];if(o!==void 0)if(Array.isArray(o))do o=a[i],o!==void 0&&(t.push(a.time),r.push.apply(r,o)),a=e[n++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[i],o!==void 0&&(t.push(a.time),o.toArray(r,r.length)),a=e[n++];while(a!==void 0);else do o=a[i],o!==void 0&&(t.push(a.time),r.push(o)),a=e[n++];while(a!==void 0)}var eI=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{let a;r:{i:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(n=i,i=t[++r],e<i)break t}a=t.length;break r}if(!(e>=n)){let o=t[1];e<o&&(r=2,n=o);for(let s=r-2;;){if(n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===s)break;if(i=n,n=t[--r-1],e>=n)break t}a=r,r=0;break r}break e}for(;r<a;){let o=r+a>>>1;e<t[o]?a=o:r=o+1}if(i=t[r],n=t[r-1],n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i;for(let a=0;a!==i;++a)t[a]=r[n+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},JJe=class extends eI{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Q1,endingEnd:Q1}}intervalChanged_(e,t,r){let i=this.parameterPositions,n=e-2,a=e+1,o=i[n],s=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case J1:n=e,o=2*t-r;break;case sD:n=i.length-2,o=t+i[n]-i[n+1];break;default:n=e,o=r}if(s===void 0)switch(this.getSettings_().endingEnd){case J1:a=e,s=2*r-t;break;case sD:a=1,s=r+i[1]-i[0];break;default:a=e-1,s=t}let l=(r-t)*.5,u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-r),this._offsetPrev=n*u,this._offsetNext=a*u}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(r-t)/(i-t),g=f*f,p=g*f,m=-d*p+2*d*g-d*f,y=(1+d)*p+(-1.5-2*d)*g+(-.5+d)*f+1,b=(-1-h)*p+(1.5+h)*g+.5*f,w=h*p-h*g;for(let x=0;x!==o;++x)n[x]=m*a[u+x]+y*a[l+x]+b*a[s+x]+w*a[c+x];return n}},x_e=class extends eI{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(r-t)/(i-t),c=1-u;for(let d=0;d!==o;++d)n[d]=a[l+d]*c+a[s+d]*u;return n}},ZJe=class extends eI{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}},Np=class{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=TA(t,this.TimeBufferType),this.values=TA(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:TA(e.times,Array),values:TA(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new ZJe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new x_e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new JJe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case aD:t=this.InterpolantFactoryMethodDiscrete;break;case oD:t=this.InterpolantFactoryMethodLinear;break;case pz:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return aD;case this.InterpolantFactoryMethodLinear:return oD;case this.InterpolantFactoryMethodSmooth:return pz}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,n=0,a=i-1;for(;n!==i&&r[n]<e;)++n;for(;a!==-1&&r[a]>t;)--a;if(++a,n!==0||a!==i){n>=a&&(a=Math.max(a,1),n=a-1);let o=this.getValueSize();this.times=Pg(r,n,a),this.values=Pg(this.values,n*o,a*o)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,n=r.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==n;o++){let s=r[o];if(typeof s=="number"&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(a!==null&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(i!==void 0&&__e(i))for(let o=0,s=i.length;o!==s;++o){let l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}return e}optimize(){let e=Pg(this.times),t=Pg(this.values),r=this.getValueSize(),i=this.getInterpolation()===pz,n=e.length-1,a=1;for(let o=1;o<n;++o){let s=!1,l=e[o],u=e[o+1];if(l!==u&&(o!==1||l!==e[0]))if(i)s=!0;else{let c=o*r,d=c-r,h=c+r;for(let f=0;f!==r;++f){let g=t[c+f];if(g!==t[d+f]||g!==t[h+f]){s=!0;break}}}if(s){if(o!==a){e[a]=e[o];let c=o*r,d=a*r;for(let h=0;h!==r;++h)t[d+h]=t[c+h]}++a}}if(n>0){e[a]=e[n];for(let o=n*r,s=a*r,l=0;l!==r;++l)t[s+l]=t[o+l];++a}return a!==e.length?(this.times=Pg(e,0,a),this.values=Pg(t,0,a*r)):(this.times=e,this.values=t),this}clone(){let e=Pg(this.times,0),t=Pg(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};Np.prototype.TimeBufferType=Float32Array;Np.prototype.ValueBufferType=Float32Array;Np.prototype.DefaultInterpolation=oD;var Sw=class extends Np{};Sw.prototype.ValueTypeName="bool";Sw.prototype.ValueBufferType=Array;Sw.prototype.DefaultInterpolation=aD;Sw.prototype.InterpolantFactoryMethodLinear=void 0;Sw.prototype.InterpolantFactoryMethodSmooth=void 0;var S_e=class extends Np{};S_e.prototype.ValueTypeName="color";var fD=class extends Np{};fD.prototype.ValueTypeName="number";var eZe=class extends eI{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(r-t)/(i-t),l=e*o;for(let u=l+o;l!==u;l+=4)ur.slerpFlat(n,0,a,l-o,a,l,s);return n}},gP=class extends Np{InterpolantFactoryMethodLinear(e){return new eZe(this.times,this.values,this.getValueSize(),e)}};gP.prototype.ValueTypeName="quaternion";gP.prototype.DefaultInterpolation=oD;gP.prototype.InterpolantFactoryMethodSmooth=void 0;var Cw=class extends Np{};Cw.prototype.ValueTypeName="string";Cw.prototype.ValueBufferType=Array;Cw.prototype.DefaultInterpolation=aD;Cw.prototype.InterpolantFactoryMethodLinear=void 0;Cw.prototype.InterpolantFactoryMethodSmooth=void 0;var pD=class extends Np{};pD.prototype.ValueTypeName="vector";var o6=class{constructor(e,t=-1,r,i=rW){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ws(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,o=r.length;a!==o;++a)t.push(rZe(r[a]).scale(i));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,a=r.length;n!==a;++n)t.push(Np.toJSON(r[n]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let n=t.length,a=[];for(let o=0;o<n;o++){let s=[],l=[];s.push((o+n-1)%n,o,(o+1)%n),l.push(0,1,0);let u=QJe(s);s=aJ(s,1,u),l=aJ(l,1,u),!i&&s[0]===0&&(s.push(n),l.push(l[0])),a.push(new fD(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/r))}return new this(e,-1,a)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},n=/^([\w-]*?)([\d]+)$/;for(let o=0,s=e.length;o<s;o++){let l=e[o],u=l.name.match(n);if(u&&u.length>1){let c=u[1],d=i[c];d||(i[c]=d=[]),d.push(l)}}let a=[];for(let o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(u,c,d,h,f){if(d.length!==0){let g=[],p=[];w_e(d,g,p,h),g.length!==0&&f.push(new u(c,g,p))}},i=[],n=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[];for(let u=0;u<l.length;u++){let c=l[u].keys;if(!(!c||c.length===0))if(c[0].morphTargets){let d={},h;for(h=0;h<c.length;h++)if(c[h].morphTargets)for(let f=0;f<c[h].morphTargets.length;f++)d[c[h].morphTargets[f]]=-1;for(let f in d){let g=[],p=[];for(let m=0;m!==c[h].morphTargets.length;++m){let y=c[h];g.push(y.time),p.push(y.morphTarget===f?1:0)}i.push(new fD(".morphTargetInfluence["+f+"]",g,p))}s=d.length*a}else{let d=".bones["+t[u].name+"]";r(pD,d+".position",c,"pos",i),r(gP,d+".quaternion",c,"rot",i),r(pD,d+".scale",c,"scl",i)}}return i.length===0?null:new this(n,s,i,o)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function tZe(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fD;case"vector":case"vector2":case"vector3":case"vector4":return pD;case"color":return S_e;case"quaternion":return gP;case"bool":case"boolean":return Sw;case"string":return Cw}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function rZe(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=tZe(e.type);if(e.times===void 0){let r=[],i=[];w_e(e.keys,r,i,"value"),e.times=r,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var mD={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},C_e=class{constructor(e,t,r){let i=this,n=!1,a=0,o=0,s,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){o++,n===!1&&i.onStart!==void 0&&i.onStart(u,a,o),n=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(n=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return s?s(u):u},this.setURLModifier=function(u){return s=u,this},this.addHandler=function(u,c){return l.push(u,c),this},this.removeHandler=function(u){let c=l.indexOf(u);return c!==-1&&l.splice(c,2),this},this.getHandler=function(u){for(let c=0,d=l.length;c<d;c+=2){let h=l[c],f=l[c+1];if(h.global&&(h.lastIndex=0),h.test(u))return f}return null}}},iZe=new C_e,vP=class{constructor(e){this.manager=e!==void 0?e:iZe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},am={},nZe=class extends Error{constructor(e,t){super(e),this.response=t}},s6=class extends vP{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=mD.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(am[e]!==void 0){am[e].push({onLoad:t,onProgress:r,onError:i});return}am[e]=[],am[e].push({onLoad:t,onProgress:r,onError:i});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=am[e],c=l.body.getReader(),d=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=d?parseInt(d):0,f=h!==0,g=0,p=new ReadableStream({start(m){y();function y(){c.read().then(({done:b,value:w})=>{if(b)m.close();else{g+=w.byteLength;let x=new ProgressEvent("progress",{lengthComputable:f,loaded:g,total:h});for(let S=0,C=u.length;S<C;S++){let T=u[S];T.onProgress&&T.onProgress(x)}m.enqueue(w),y()}})}}});return new Response(p)}else throw new nZe(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(s){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return l.json();default:if(o===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(o),c=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(c);return l.arrayBuffer().then(h=>d.decode(h))}}}).then(l=>{mD.add(e,l);let u=am[e];delete am[e];for(let c=0,d=u.length;c<d;c++){let h=u[c];h.onLoad&&h.onLoad(l)}}).catch(l=>{let u=am[e];if(u===void 0)throw this.manager.itemError(e),l;delete am[e];for(let c=0,d=u.length;c<d;c++){let h=u[c];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},aZe=class extends vP{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,a=mD.get(e);if(a!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a;let o=mM("img");function s(){u(),mD.add(e,this),t&&t(this),n.manager.itemEnd(e)}function l(c){u(),i&&i(c),n.manager.itemError(e),n.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),n.manager.itemStart(e),o.src=e,o}},oZe=class extends vP{constructor(e){super(e)}load(e,t,r,i){let n=new Vi,a=new aZe(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){n.image=o,n.needsUpdate=!0,t!==void 0&&t(n)},r,i),n}},yP=class extends li{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new er(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},sZe=class extends yP{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.groundColor=new er(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},Wz=new dt,oJ=new k,sJ=new k,pW=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ze(512,512),this.map=null,this.mapPass=null,this.matrix=new dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oW,this._frameExtents=new ze(1,1),this._viewportCount=1,this._viewports=[new hr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;oJ.setFromMatrixPosition(e.matrixWorld),t.position.copy(oJ),sJ.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(sJ),t.updateMatrixWorld(),Wz.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wz),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Wz)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},lZe=class extends pW{constructor(){super(new Ia(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=pM*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},uZe=class extends yP{constructor(e,t,r=0,i=Math.PI/3,n=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.target=new li,this.distance=r,this.angle=i,this.penumbra=n,this.decay=a,this.map=null,this.shadow=new lZe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},lJ=new dt,Ux=new k,Gz=new k,cZe=class extends pW{constructor(){super(new Ia(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ze(4,2),this._viewportCount=6,this._viewports=[new hr(2,1,1,1),new hr(0,1,1,1),new hr(3,1,1,1),new hr(1,1,1,1),new hr(3,0,1,1),new hr(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),Ux.setFromMatrixPosition(e.matrixWorld),r.position.copy(Ux),Gz.copy(r.position),Gz.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Gz),r.updateMatrixWorld(),i.makeTranslation(-Ux.x,-Ux.y,-Ux.z),lJ.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lJ)}},dZe=class extends yP{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new cZe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},hZe=class extends pW{constructor(){super(new K2(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},fZe=class extends yP{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.target=new li,this.shadow=new hZe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},E_e=class extends Wt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},M_e=class extends vP{constructor(e){super(e)}load(e,t,r,i){let n=this,a=new s6(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(e,function(o){try{t(n.parse(JSON.parse(o)))}catch(s){i?i(s):console.error(s),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(d,h){if(t[h]!==void 0)return t[h];let f=d.interleavedBuffers[h],g=n(d,f.buffer),p=nA(f.type,g),m=new gJe(p,f.stride);return m.uuid=f.uuid,t[h]=m,m}function n(d,h){if(r[h]!==void 0)return r[h];let f=d.arrayBuffers[h],g=new Uint32Array(f).buffer;return r[h]=g,g}let a=e.isInstancedBufferGeometry?new E_e:new Wt,o=e.data.index;if(o!==void 0){let d=nA(o.type,o.array);a.setIndex(new tr(d,1))}let s=e.data.attributes;for(let d in s){let h=s[d],f;if(h.isInterleavedBufferAttribute){let g=i(e.data,h.data);f=new i6(g,h.itemSize,h.offset,h.normalized)}else{let g=nA(h.type,h.array),p=h.isInstancedBufferAttribute?gM:tr;f=new p(g,h.itemSize,h.normalized)}h.name!==void 0&&(f.name=h.name),h.usage!==void 0&&f.setUsage(h.usage),h.updateRange!==void 0&&(f.updateRange.offset=h.updateRange.offset,f.updateRange.count=h.updateRange.count),a.setAttribute(d,f)}let l=e.data.morphAttributes;if(l)for(let d in l){let h=l[d],f=[];for(let g=0,p=h.length;g<p;g++){let m=h[g],y;if(m.isInterleavedBufferAttribute){let b=i(e.data,m.data);y=new i6(b,m.itemSize,m.offset,m.normalized)}else{let b=nA(m.type,m.array);y=new tr(b,m.itemSize,m.normalized)}m.name!==void 0&&(y.name=m.name),f.push(y)}a.morphAttributes[d]=f}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let d=0,h=u.length;d!==h;++d){let f=u[d];a.addGroup(f.start,f.count,f.materialIndex)}let c=e.data.boundingSphere;if(c!==void 0){let d=new k;c.center!==void 0&&d.fromArray(c.center),a.boundingSphere=new Lo(d,c.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}},pZe=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uJ(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=uJ();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function uJ(){return(typeof performance>"u"?Date:performance).now()}var mZe=class{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,n,a;switch(t){case"quaternion":i=this._slerp,n=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,n=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,n=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=n,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,i=this.valueSize,n=e*i+i,a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)r[n+o]=r[o];a=t}else{a+=t;let o=t/a;this._mixBufferRegion(r,n,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let s=t*this._origIndex;this._mixBufferRegion(r,i,s,1-n,t)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){o.setValue(r,i);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let n=r,a=i;n!==a;++n)t[n]=t[i+n%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,n){if(i>=.5)for(let a=0;a!==n;++a)e[t+a]=e[r+a]}_slerp(e,t,r,i){ur.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,n){let a=this._workIndex*n;ur.multiplyQuaternionsFlat(e,a,e,t,e,r),ur.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,r,i,n){let a=1-i;for(let o=0;o!==n;++o){let s=t+o;e[s]=e[s]*a+e[r+o]*i}}_lerpAdditive(e,t,r,i,n){for(let a=0;a!==n;++a){let o=t+a;e[o]=e[o]+e[r+a]*i}}},mW="\\[\\]\\.:\\/",gZe=new RegExp("["+mW+"]","g"),gW="[^"+mW+"]",vZe="[^"+mW.replace("\\.","")+"]",yZe=/((?:WC+[\/:])*)/.source.replace("WC",gW),bZe=/(WCOD+)?/.source.replace("WCOD",vZe),_Ze=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gW),wZe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gW),xZe=new RegExp("^"+yZe+bZe+_Ze+wZe+"$"),SZe=["material","materials","bones","map"],CZe=class{constructor(e,t,r){let i=r||gi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},gi=class{constructor(e,t,r){this.path=t,this.parsedPath=r||gi.parseTrackName(t),this.node=gi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new gi.Composite(e,t,r):new gi(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(gZe,"")}static parseTrackName(e){let t=xZe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let n=r.nodeName.substring(i+1);SZe.indexOf(n)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(n){for(let a=0;a<n.length;a++){let o=n[a];if(o.name===t||o.uuid===t)return o;let s=r(o.children);if(s)return s}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=gi.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let a=e[i];if(a===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(n!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[n]!==void 0&&(n=e.morphTargetDictionary[n])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=n}else a.fromArray!==void 0&&a.toArray!==void 0?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};gi.Composite=CZe;gi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};gi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};gi.prototype.GetterByBindingType=[gi.prototype._getValue_direct,gi.prototype._getValue_array,gi.prototype._getValue_arrayElement,gi.prototype._getValue_toArray];gi.prototype.SetterByBindingTypeAndVersioning=[[gi.prototype._setValue_direct,gi.prototype._setValue_direct_setNeedsUpdate,gi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_array,gi.prototype._setValue_array_setNeedsUpdate,gi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_arrayElement,gi.prototype._setValue_arrayElement_setNeedsUpdate,gi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_fromArray,gi.prototype._setValue_fromArray_setNeedsUpdate,gi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var EZe=class{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;let n=t.tracks,a=n.length,o=new Array(a),s={endingStart:Q1,endingEnd:Q1};for(let l=0;l!==a;++l){let u=n[l].createInterpolant(null);o[l]=u,u.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=q1e,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let i=this._clip.duration,n=e._clip.duration,a=n/i,o=i/n;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let i=this._mixer,n=i.time,a=this.timeScale,o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);let s=o.parameterPositions,l=o.sampleValues;return s[0]=n,s[1]=n+r,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}let n=this._startTime;if(n!==null){let s=(e-n)*r;s<0||r===0?t=0:(this._startTime=null,t=r*s)}t*=this._updateTimeScale(e);let a=this._updateTime(t),o=this._updateWeight(e);if(o>0){let s=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case e7e:for(let u=0,c=s.length;u!==c;++u)s[u].evaluate(a),l[u].accumulateAdditive(o);break;case rW:default:for(let u=0,c=s.length;u!==c;++u)s[u].evaluate(a),l[u].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,i=this.time+e,n=this._loopCount,a=r===tW;if(e===0)return n===-1?i:a&&(n&1)===1?t-i:i;if(r===k1e){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){let o=Math.floor(i/t);i-=t*o,n+=Math.abs(o);let s=this.repetitions-n;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(s===1){let l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(n&1)===1)return t-i}return i}_setEndings(e,t,r){let i=this._interpolantSettings;r?(i.endingStart=J1,i.endingEnd=J1):(e?i.endingStart=this.zeroSlopeAtStart?J1:Q1:i.endingStart=sD,t?i.endingEnd=this.zeroSlopeAtEnd?J1:Q1:i.endingEnd=sD)}_scheduleFading(e,t,r){let i=this._mixer,n=i.time,a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);let o=a.parameterPositions,s=a.sampleValues;return o[0]=n,s[0]=t,o[1]=n+e,s[1]=r,this}},MZe=new Float32Array(1),PZe=class extends xa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,u=l[s];u===void 0&&(u={},l[s]=u);for(let c=0;c!==n;++c){let d=i[c],h=d.name,f=u[h];if(f!==void 0)++f.referenceCount,a[c]=f;else{if(f=a[c],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,s,h));continue}let g=t&&t._propertyBindings[c].binding.parsedPath;f=new mZe(gi.create(r,h,g),d.ValueTypeName,d.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,s,h),a[c]=f}o[c].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let r=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,r)}let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];n.useCount++===0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.useCount===0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){let i=this._actions,n=this._actionsByClip,a=n[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{let o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,a=this._actionsByClip,o=a[n],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;let c=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete c[d],s.length===0&&delete a[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.referenceCount===0&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_addInactiveBinding(e,t,r){let i=this._bindingsByRootAndName,n=this._bindings,a=i[t];a===void 0&&(a={},i[t]=a),a[r]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[n],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new x_e(new Float32Array(2),new Float32Array(2),1,MZe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n}clipAction(e,t,r){let i=t||this._root,n=i.uuid,a=typeof e=="string"?o6.findByName(i,e):e,o=a!==null?a.uuid:e,s=this._actionsByClip[o],l=null;if(r===void 0&&(a!==null?r=a.blendMode:r=rW),s!==void 0){let c=s.actionByRoot[n];if(c!==void 0&&c.blendMode===r)return c;l=s.knownActions[0],a===null&&(a=l._clip)}if(a===null)return null;let u=new EZe(this,a,t,r);return this._bindAction(u,l),this._addInactiveAction(u,o,n),u}existingAction(e,t){let r=t||this._root,i=r.uuid,n=typeof e=="string"?o6.findByName(r,e):e,a=n?n.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(i,e,n,a);let o=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)o[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(n!==void 0){let a=n.knownActions;for(let o=0,s=a.length;o!==s;++o){let l=a[o];this._deactivateAction(l);let u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let a in r){let o=r[a].actionByRoot,s=o[t];s!==void 0&&(this._deactivateAction(s),this._removeInactiveAction(s))}let i=this._bindingsByRootAndName,n=i[t];if(n!==void 0)for(let a in n){let o=n[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){let r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}},lt=class{constructor(t){this.value=t}clone(){return new lt(this.value.clone===void 0?this.value:this.value.clone())}},P_e=class{constructor(e,t,r=0,i=1/0){this.ray=new _w(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new nW,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return l6(e,this,r,t),r.sort(cJ),r}intersectObjects(e,t=!0,r=[]){for(let i=0,n=e.length;i<n;i++)l6(e[i],this,r,t);return r.sort(cJ),r}};function cJ(e,t){return e.distance-t.distance}function l6(e,t,r,i){if(e.layers.test(t.layers)&&e.raycast(t,r),i===!0){let n=e.children;for(let a=0,o=n.length;a<o;a++)l6(n[a],t,r,!0)}}var dJ=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(_n(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},hJ=new ze,vW=class{constructor(e=new ze(1/0,1/0),t=new ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=hJ.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hJ.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},fJ=new k,AA=new k,Gs=class{constructor(e=new k,t=new k){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){fJ.subVectors(e,this.start),AA.subVectors(this.end,this.start);let r=AA.dot(AA),i=AA.dot(fJ)/r;return t&&(i=_n(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},pJ=new k,TZe=class extends li{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let r=new Wt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,s=32;a<s;a++,o++){let l=a/s*Math.PI*2,u=o/s*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Pt(i,3));let n=new Rv({fog:!1,toneMapped:!1});this.cone=new mP(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),pJ.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pJ),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},AZe=class extends Ci{constructor(e,t,r){let i=new m_(t,4,2),n=new Hm({wireframe:!0,fog:!1,toneMapped:!1});super(i,n),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},mJ=new k,OA=new k,gJ=new k,OZe=class extends li{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Wt;i.setAttribute("position",new Pt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new Rv({fog:!1,toneMapped:!1});this.lightPlane=new cD(i,n),this.add(this.lightPlane),i=new Wt,i.setAttribute("position",new Pt([0,0,0,0,0,1],3)),this.targetLine=new cD(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),mJ.setFromMatrixPosition(this.light.matrixWorld),OA.setFromMatrixPosition(this.light.target.matrixWorld),gJ.subVectors(OA,mJ),this.lightPlane.lookAt(OA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(OA),this.targetLine.scale.z=gJ.length()}},RA=new k,Wi=new Ov,gD=class extends mP{constructor(e){let t=new Wt,r=new Rv({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(f,g){s(f),s(g)}function s(f){i.push(0,0,0),n.push(0,0,0),a[f]===void 0&&(a[f]=[]),a[f].push(i.length/3-1)}t.setAttribute("position",new Pt(i,3)),t.setAttribute("color",new Pt(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new er(16755200),u=new er(16711680),c=new er(43775),d=new er(16777215),h=new er(3355443);this.setColors(l,u,c,d,h)}setColors(e,t,r,i,n){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,n.r,n.g,n.b),a.setXYZ(41,n.r,n.g,n.b),a.setXYZ(42,n.r,n.g,n.b),a.setXYZ(43,n.r,n.g,n.b),a.setXYZ(44,n.r,n.g,n.b),a.setXYZ(45,n.r,n.g,n.b),a.setXYZ(46,n.r,n.g,n.b),a.setXYZ(47,n.r,n.g,n.b),a.setXYZ(48,n.r,n.g,n.b),a.setXYZ(49,n.r,n.g,n.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,r=1,i=1;Wi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),nn("c",t,e,Wi,0,0,-1),nn("t",t,e,Wi,0,0,1),nn("n1",t,e,Wi,-1,-1,-1),nn("n2",t,e,Wi,r,-1,-1),nn("n3",t,e,Wi,-1,i,-1),nn("n4",t,e,Wi,r,i,-1),nn("f1",t,e,Wi,-1,-1,1),nn("f2",t,e,Wi,r,-1,1),nn("f3",t,e,Wi,-1,i,1),nn("f4",t,e,Wi,r,i,1),nn("u1",t,e,Wi,r*.7,i*1.1,-1),nn("u2",t,e,Wi,-1*.7,i*1.1,-1),nn("u3",t,e,Wi,0,i*2,-1),nn("cf1",t,e,Wi,-1,0,1),nn("cf2",t,e,Wi,r,0,1),nn("cf3",t,e,Wi,0,-1,1),nn("cf4",t,e,Wi,0,i,1),nn("cn1",t,e,Wi,-1,0,-1),nn("cn2",t,e,Wi,r,0,-1),nn("cn3",t,e,Wi,0,-1,-1),nn("cn4",t,e,Wi,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function nn(e,t,r,i,n,a,o){RA.set(n,a,o).unproject(i);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,c=s.length;u<c;u++)l.setXYZ(s[u],RA.x,RA.y,RA.z)}}var vD=class extends mP{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new Wt;n.setIndex(new tr(r,1)),n.setAttribute("position",new Pt(i,3)),super(n,new Rv({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},RZe=class extends mP{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Wt;i.setAttribute("position",new Pt(t,3)),i.setAttribute("color",new Pt(r,3));let n=new Rv({vertexColors:!0,toneMapped:!1});super(i,n),this.type="AxesHelper"}setColors(e,t,r){let i=new er,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Mm=DZe();function DZe(){let e=new ArrayBuffer(4),t=new Float32Array(e),r=new Uint32Array(e),i=new Uint32Array(512),n=new Uint32Array(512);for(let l=0;l<256;++l){let u=l-127;u<-27?(i[l]=0,i[l|256]=32768,n[l]=24,n[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,n[l]=-u-1,n[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,n[l]=13,n[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,n[l]=24,n[l|256]=24):(i[l]=31744,i[l|256]=64512,n[l]=13,n[l|256]=13)}let a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;(u&8388608)===0;)u<<=1,c-=8388608;u&=-8388609,c+=947912704,a[l]=u|c}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:t,uint32View:r,baseTable:i,shiftTable:n,mantissaTable:a,exponentTable:o,offsetTable:s}}function IZe(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=_n(e,-65504,65504),Mm.floatView[0]=e;let t=Mm.uint32View[0],r=t>>23&511;return Mm.baseTable[r]+((t&8388607)>>Mm.shiftTable[r])}function jZe(e){let t=e>>10;return Mm.uint32View[0]=Mm.mantissaTable[Mm.offsetTable[t]+(e&1023)]+Mm.exponentTable[t],Mm.floatView[0]}var zZe=Object.freeze({__proto__:null,fromHalfFloat:jZe,toHalfFloat:IZe});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bw}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=bw);var Vx=".",yW=Symbol("target"),T_e=Symbol("unsubscribe");function u6(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function BZe(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var cp=Array.isArray;function bW(e){return typeof e=="symbol"}var LZe={after:(e,t)=>cp(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>cp(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=Vx),bW(t)?e+t.toString():e+t):e,initial:e=>{if(cp(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(Vx);return t===-1?"":e.slice(0,t)},last:e=>{if(cp(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(Vx);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(cp(e))for(let r of e)t(r);else if(e!==""){let r=0,i=e.indexOf(Vx);if(i===-1)t(e);else for(;r<e.length;)i===-1&&(i=e.length),t(e.slice(r,i)),r=i+1,i=e.indexOf(Vx,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},Ds=LZe;function FZe(e){return typeof e=="object"&&typeof e.next=="function"}function NZe(e,t,r,i,n){let a=e.next;if(t.name==="entries")e.next=function(){let o=a.call(this);return o.done===!1&&(o.value[0]=n(o.value[0],t,o.value[0],i),o.value[1]=n(o.value[1],t,o.value[0],i)),o};else if(t.name==="values"){let o=r[yW].keys();e.next=function(){let s=a.call(this);return s.done===!1&&(s.value=n(s.value,t,o.next().value,i)),s}}else e.next=function(){let o=a.call(this);return o.done===!1&&(o.value=n(o.value,t,o.value,i)),o};return e}function vJ(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&bW(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var UZe=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),i=r[t];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(e,t),r[t]=i),i}getProxy(e,t,r,i){if(this.isUnsubscribed)return e;let n=e[i],a=n||e;this._pathCache.set(a,t);let o=this._proxyCache.get(a);return o===void 0&&(o=n===void 0?new Proxy(e,r):e,this._proxyCache.set(a,o)),o}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,Ds.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,i,n){if(!this._equals(n,r)||!(t in e)){let a=this._getOwnPropertyDescriptor(e,t);return a!==void 0&&"set"in a?Reflect.set(e,t,r,i):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let i=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&i!==void 0&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function c6(e){return toString.call(e)==="[object Object]"}function DA(){return!0}function y1(e,t){return e.length!==t.length||e.some((r,i)=>t[i]!==r)}var A_e=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),VZe=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),O_e={push:DA,pop:DA,shift:DA,unshift:DA,copyWithin:y1,reverse:y1,sort:y1,splice:y1,flat:y1,fill:y1},kZe=new Set([...A_e,...VZe,...Object.keys(O_e)]);function IA(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var R_e=["keys","values","entries"],D_e=new Set(["has","toString"]),I_e={add:IA,clear:IA,delete:IA,forEach:IA},qZe=new Set([...D_e,...Object.keys(I_e),...R_e]);function jA(e,t){if(e.size!==t.size)return!0;let r;for(let[i,n]of e)if(r=t.get(i),r!==n||r===void 0&&!t.has(i))return!0;return!1}var WZe=new Set([...D_e,"get"]),j_e={set:jA,clear:jA,delete:jA,forEach:jA},GZe=new Set([...WZe,...Object.keys(j_e),...R_e]),_v=class{constructor(e,t,r,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return A_e.has(e)}_shallowClone(e){let t=e;if(c6(e))t={...e};else if(cp(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,i]of e.entries())t.set(r,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,i){return e?(cp(i)?this._onIsChanged=O_e[t]:i instanceof Set?this._onIsChanged=I_e[t]:i instanceof Map&&(this._onIsChanged=j_e[t]),i):r}update(e,t,r){let i=Ds.after(e,this._path);if(t!=="length"){let n=this.clone;Ds.walk(i,a=>{n&&n[a]&&(this._clonedCache.has(n[a])||(n[a]=this._shallowClone(n[a])),n=n[a])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:r}),n&&n[t]&&(n[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],Ds.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},yJ=class extends _v{static isHandledMethod(e){return kZe.has(e)}},HZe=class extends _v{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},bJ=class extends _v{static isHandledMethod(e){return qZe.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},_J=class extends _v{static isHandledMethod(e){return GZe.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},$Ze=class extends _v{constructor(e,t,r,i){super(void 0,t,r,i),this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},XZe=class extends _v{constructor(e,t,r,i){super(void 0,t,r,i),this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},F1=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return c6(e)||cp(e)||u6(e)}static isHandledMethod(e,t){return c6(e)?_v.isHandledMethod(t):cp(e)?yJ.isHandledMethod(t):e instanceof Set?bJ.isHandledMethod(t):e instanceof Map?_J.isHandledMethod(t):u6(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let i=_v;cp(e)?i=yJ:e instanceof Date?i=HZe:e instanceof Set?i=bJ:e instanceof Map?i=_J:e instanceof WeakSet?i=$Ze:e instanceof WeakMap&&(i=XZe),this._stack.push(new i(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:i}=e,n=F1.isHandledMethod(r,i);return this._stack[this._stack.length-1].preferredThisArg(n,i,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},YZe={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},_W=(e,t,r={})=>{r={...YZe,...r};let i=Symbol("ProxyTarget"),{equals:n,isShallow:a,ignoreDetached:o,details:s}=r,l=new UZe(n),u=typeof r.onValidate=="function",c=new F1(u),d=(b,w,x,S,C)=>!u||c.isCloning||r.onValidate(Ds.concat(l.getPath(b),w),x,S,C)===!0,h=(b,w,x,S)=>{!vJ(l,r,w)&&!(o&&l.isDetached(b,e))&&f(l.getPath(b),w,x,S)},f=(b,w,x,S,C)=>{c.isCloning?c.update(b,w,S):t(Ds.concat(b,w),x,S,C)},g=b=>b&&(b[i]||b),p=(b,w,x,S)=>BZe(b)||x==="constructor"||a&&!F1.isHandledMethod(w,x)||vJ(l,r,x)||l.isGetInvariant(w,x)||o&&l.isDetached(w,e)?b:(S===void 0&&(S=l.getPath(w)),l.getProxy(b,Ds.concat(S,x),m,i)),m={get(b,w,x){if(bW(w)){if(w===i||w===yW)return b;if(w===T_e&&!l.isUnsubscribed&&l.getPath(b).length===0)return l.unsubscribe(),b}let S=u6(b)?Reflect.get(b,w):Reflect.get(b,w,x);return p(S,b,w)},set(b,w,x,S){x=g(x);let C=b[i]||b,T=C[w];if(n(T,x)&&w in b)return!0;let M=d(b,w,x,T);return M&&l.setProperty(C,w,x,S,T)?(h(b,w,b[w],T),!0):!M},defineProperty(b,w,x){if(!l.isSameDescriptor(x,b,w)){let S=b[w];d(b,w,x.value,S)&&l.defineProperty(b,w,x,S)&&h(b,w,x.value,S)}return!0},deleteProperty(b,w){if(!Reflect.has(b,w))return!0;let x=Reflect.get(b,w),S=d(b,w,void 0,x);return S&&l.deleteProperty(b,w,x)?(h(b,w,void 0,x),!0):!S},apply(b,w,x){let S=w[i]||w;if(l.isUnsubscribed)return Reflect.apply(b,S,x);if((s===!1||s!==!0&&!s.includes(b.name))&&F1.isHandledType(S)){let C=Ds.initial(l.getPath(b)),T=F1.isHandledMethod(S,b.name);c.start(S,C,x);let M=Reflect.apply(b,c.preferredThisArg(b,w,S),T?x.map(O=>g(O)):x),A=c.isChanged(S,n),P=c.stop();if(F1.isHandledType(M)&&T&&(w instanceof Map&&b.name==="get"&&(C=Ds.concat(C,x[0])),M=l.getProxy(M,C,m)),A){let O={name:b.name,args:x,result:M},j=c.isCloning?Ds.initial(C):C,D=c.isCloning?Ds.last(C):"";d(Ds.get(e,j),D,S,P,O)?f(j,D,S,P,O):c.undo(S)}return(w instanceof Map||w instanceof Set)&&FZe(M)?NZe(M,b,w,C,p):M}return Reflect.apply(b,w,x)}},y=l.getProxy(e,r.pathAsArray?[]:"",m);return t=t.bind(y),u&&(r.onValidate=r.onValidate.bind(y)),y};_W.target=e=>e&&e[yW]||e;_W.unsubscribe=e=>e[T_e]||e;var wJ=_W,KZe=typeof global=="object"&&global&&global.Object===Object&&global,z_e=KZe,QZe=typeof self=="object"&&self&&self.Object===Object&&self,JZe=z_e||QZe||Function("return this")(),If=JZe,ZZe=If.Symbol,Ks=ZZe,B_e=Object.prototype,eet=B_e.hasOwnProperty,tet=B_e.toString,kx=Ks?Ks.toStringTag:void 0;function ret(e){var t=eet.call(e,kx),r=e[kx];try{e[kx]=void 0;var i=!0}catch{}var n=tet.call(e);return i&&(t?e[kx]=r:delete e[kx]),n}var iet=ret,net=Object.prototype,aet=net.toString;function oet(e){return aet.call(e)}var set=oet,uet="[object Null]",cet="[object Undefined]",xJ=Ks?Ks.toStringTag:void 0;function det(e){return e==null?e===void 0?cet:uet:xJ&&xJ in Object(e)?iet(e):set(e)}var xb=det;function het(e){return e!=null&&typeof e=="object"}var $m=het,fet="[object Symbol]";function pet(e){return typeof e=="symbol"||$m(e)&&xb(e)==fet}var bP=pet;function met(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var L_e=met,get=Array.isArray,Dp=get,SJ=Ks?Ks.prototype:void 0,CJ=SJ?SJ.toString:void 0;function F_e(e){if(typeof e=="string")return e;if(Dp(e))return L_e(e,F_e)+"";if(bP(e))return CJ?CJ.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var vet=F_e,yet=/\s/;function bet(e){for(var t=e.length;t--&&yet.test(e.charAt(t)););return t}var _et=bet,wet=/^\s+/;function xet(e){return e&&e.slice(0,_et(e)+1).replace(wet,"")}var Cet=xet;function Eet(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Of=Eet,EJ=NaN,Met=/^[-+]0x[0-9a-f]+$/i,Pet=/^0b[01]+$/i,Tet=/^0o[0-7]+$/i,Aet=parseInt;function Oet(e){if(typeof e=="number")return e;if(bP(e))return EJ;if(Of(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Of(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Cet(e);var r=Pet.test(e);return r||Tet.test(e)?Aet(e.slice(2),r?2:8):Met.test(e)?EJ:+e}var MJ=Oet;function Ret(e){return e}var N_e=Ret,Det="[object AsyncFunction]",Iet="[object Function]",jet="[object GeneratorFunction]",zet="[object Proxy]";function Bet(e){if(!Of(e))return!1;var t=xb(e);return t==Iet||t==jet||t==Det||t==zet}var U_e=Bet,Let=If["__core-js_shared__"],Hz=Let,PJ=function(){var e=/[^.]+$/.exec(Hz&&Hz.keys&&Hz.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Fet(e){return!!PJ&&PJ in e}var Net=Fet,Uet=Function.prototype,Vet=Uet.toString;function ket(e){if(e!=null){try{return Vet.call(e)}catch{}try{return e+""}catch{}}return""}var Sb=ket,qet=/[\\^$.*+?()[\]{}|]/g,Wet=/^\[object .+?Constructor\]$/,Get=Function.prototype,Het=Object.prototype,$et=Get.toString,Xet=Het.hasOwnProperty,Yet=RegExp("^"+$et.call(Xet).replace(qet,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ket(e){if(!Of(e)||Net(e))return!1;var t=U_e(e)?Yet:Wet;return t.test(Sb(e))}var Qet=Ket;function Jet(e,t){return e==null?void 0:e[t]}var Zet=Jet;function ett(e,t){var r=Zet(e,t);return Qet(r)?r:void 0}var Cb=ett,ttt=Cb(If,"WeakMap"),d6=ttt,TJ=Object.create,rtt=function(){function e(){}return function(t){if(!Of(t))return{};if(TJ)return TJ(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),itt=rtt;function ntt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var att=ntt;function ott(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var stt=ott,ltt=800,utt=16,ctt=Date.now;function dtt(e){var t=0,r=0;return function(){var i=ctt(),n=utt-(i-r);if(r=i,n>0){if(++t>=ltt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var htt=dtt;function ftt(e){return function(){return e}}var ptt=ftt,mtt=function(){try{var e=Cb(Object,"defineProperty");return e({},"",{}),e}catch{}}(),yD=mtt,gtt=yD?function(e,t){return yD(e,"toString",{configurable:!0,enumerable:!1,value:ptt(t),writable:!0})}:N_e,vtt=gtt,ytt=htt(vtt),btt=ytt;function _tt(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var wtt=_tt,xtt=9007199254740991,Stt=/^(?:0|[1-9]\d*)$/;function Ctt(e,t){var r=typeof e;return t=t??xtt,!!t&&(r=="number"||r!="symbol"&&Stt.test(e))&&e>-1&&e%1==0&&e<t}var wW=Ctt;function Ett(e,t,r){t=="__proto__"&&yD?yD(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var V_e=Ett;function Mtt(e,t){return e===t||e!==e&&t!==t}var xW=Mtt,Ptt=Object.prototype,Ttt=Ptt.hasOwnProperty;function Att(e,t,r){var i=e[t];(!(Ttt.call(e,t)&&xW(i,r))||r===void 0&&!(t in e))&&V_e(e,t,r)}var SW=Att;function Ott(e,t,r,i){var n=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=i?i(r[s],e[s],s,r,e):void 0;l===void 0&&(l=e[s]),n?V_e(r,s,l):SW(r,s,l)}return r}var _P=Ott,AJ=Math.max;function Rtt(e,t,r){return t=AJ(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=AJ(i.length-t,0),o=Array(a);++n<a;)o[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(o),att(e,this,s)}}var Dtt=Rtt,Itt=9007199254740991;function jtt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Itt}var CW=jtt;function ztt(e){return e!=null&&CW(e.length)&&!U_e(e)}var k_e=ztt,Btt=Object.prototype;function Ltt(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Btt;return e===r}var EW=Ltt;function Ftt(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var Ntt=Ftt,Utt="[object Arguments]";function Vtt(e){return $m(e)&&xb(e)==Utt}var OJ=Vtt,q_e=Object.prototype,ktt=q_e.hasOwnProperty,qtt=q_e.propertyIsEnumerable,Wtt=OJ(function(){return arguments}())?OJ:function(e){return $m(e)&&ktt.call(e,"callee")&&!qtt.call(e,"callee")},MW=Wtt;function Gtt(){return!1}var Htt=Gtt,W_e=typeof exports=="object"&&exports&&!exports.nodeType&&exports,RJ=W_e&&typeof module=="object"&&module&&!module.nodeType&&module,$tt=RJ&&RJ.exports===W_e,DJ=$tt?If.Buffer:void 0,Xtt=DJ?DJ.isBuffer:void 0,Ytt=Xtt||Htt,bD=Ytt,Ktt="[object Arguments]",Qtt="[object Array]",Jtt="[object Boolean]",Ztt="[object Date]",ert="[object Error]",trt="[object Function]",rrt="[object Map]",irt="[object Number]",nrt="[object Object]",art="[object RegExp]",ort="[object Set]",srt="[object String]",lrt="[object WeakMap]",urt="[object ArrayBuffer]",crt="[object DataView]",drt="[object Float32Array]",hrt="[object Float64Array]",frt="[object Int8Array]",prt="[object Int16Array]",mrt="[object Int32Array]",grt="[object Uint8Array]",vrt="[object Uint8ClampedArray]",yrt="[object Uint16Array]",brt="[object Uint32Array]",Ri={};Ri[drt]=Ri[hrt]=Ri[frt]=Ri[prt]=Ri[mrt]=Ri[grt]=Ri[vrt]=Ri[yrt]=Ri[brt]=!0;Ri[Ktt]=Ri[Qtt]=Ri[urt]=Ri[Jtt]=Ri[crt]=Ri[Ztt]=Ri[ert]=Ri[trt]=Ri[rrt]=Ri[irt]=Ri[nrt]=Ri[art]=Ri[ort]=Ri[srt]=Ri[lrt]=!1;function _rt(e){return $m(e)&&CW(e.length)&&!!Ri[xb(e)]}var wrt=_rt;function xrt(e){return function(t){return e(t)}}var PW=xrt,G_e=typeof exports=="object"&&exports&&!exports.nodeType&&exports,OE=G_e&&typeof module=="object"&&module&&!module.nodeType&&module,Srt=OE&&OE.exports===G_e,$z=Srt&&z_e.process,Crt=function(){try{var e=OE&&OE.require&&OE.require("util").types;return e||$z&&$z.binding&&$z.binding("util")}catch{}}(),H_=Crt,IJ=H_&&H_.isTypedArray,Ert=IJ?PW(IJ):wrt,H_e=Ert,Mrt=Object.prototype,Prt=Mrt.hasOwnProperty;function Trt(e,t){var r=Dp(e),i=!r&&MW(e),n=!r&&!i&&bD(e),a=!r&&!i&&!n&&H_e(e),o=r||i||n||a,s=o?Ntt(e.length,String):[],l=s.length;for(var u in e)(t||Prt.call(e,u))&&!(o&&(u=="length"||n&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||wW(u,l)))&&s.push(u);return s}var $_e=Trt;function Art(e,t){return function(r){return e(t(r))}}var X_e=Art,Ort=X_e(Object.keys,Object),Rrt=Ort,Drt=Object.prototype,Irt=Drt.hasOwnProperty;function jrt(e){if(!EW(e))return Rrt(e);var t=[];for(var r in Object(e))Irt.call(e,r)&&r!="constructor"&&t.push(r);return t}var zrt=jrt;function Brt(e){return k_e(e)?$_e(e):zrt(e)}var TW=Brt;function Lrt(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Frt=Lrt,Nrt=Object.prototype,Urt=Nrt.hasOwnProperty;function Vrt(e){if(!Of(e))return Frt(e);var t=EW(e),r=[];for(var i in e)i=="constructor"&&(t||!Urt.call(e,i))||r.push(i);return r}var krt=Vrt;function qrt(e){return k_e(e)?$_e(e,!0):krt(e)}var B0=qrt,Wrt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Grt=/^\w*$/;function Hrt(e,t){if(Dp(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||bP(e)?!0:Grt.test(e)||!Wrt.test(e)||t!=null&&e in Object(t)}var $rt=Hrt,Xrt=Cb(Object,"create"),_M=Xrt;function Yrt(){this.__data__=_M?_M(null):{},this.size=0}var Krt=Yrt;function Qrt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Jrt=Qrt,Zrt="__lodash_hash_undefined__",eit=Object.prototype,tit=eit.hasOwnProperty;function rit(e){var t=this.__data__;if(_M){var r=t[e];return r===Zrt?void 0:r}return tit.call(t,e)?t[e]:void 0}var iit=rit,nit=Object.prototype,ait=nit.hasOwnProperty;function oit(e){var t=this.__data__;return _M?t[e]!==void 0:ait.call(t,e)}var sit=oit,lit="__lodash_hash_undefined__";function uit(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_M&&t===void 0?lit:t,this}var cit=uit;function Ew(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ew.prototype.clear=Krt;Ew.prototype.delete=Jrt;Ew.prototype.get=iit;Ew.prototype.has=sit;Ew.prototype.set=cit;var jJ=Ew;function dit(){this.__data__=[],this.size=0}var hit=dit;function fit(e,t){for(var r=e.length;r--;)if(xW(e[r][0],t))return r;return-1}var tI=fit,pit=Array.prototype,mit=pit.splice;function git(e){var t=this.__data__,r=tI(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():mit.call(t,r,1),--this.size,!0}var vit=git;function yit(e){var t=this.__data__,r=tI(t,e);return r<0?void 0:t[r][1]}var bit=yit;function _it(e){return tI(this.__data__,e)>-1}var wit=_it;function xit(e,t){var r=this.__data__,i=tI(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var Sit=xit;function Mw(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Mw.prototype.clear=hit;Mw.prototype.delete=vit;Mw.prototype.get=bit;Mw.prototype.has=wit;Mw.prototype.set=Sit;var rI=Mw,Cit=Cb(If,"Map"),wM=Cit;function Eit(){this.size=0,this.__data__={hash:new jJ,map:new(wM||rI),string:new jJ}}var Mit=Eit;function Pit(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Tit=Pit;function Ait(e,t){var r=e.__data__;return Tit(t)?r[typeof t=="string"?"string":"hash"]:r.map}var iI=Ait;function Oit(e){var t=iI(this,e).delete(e);return this.size-=t?1:0,t}var Rit=Oit;function Dit(e){return iI(this,e).get(e)}var Iit=Dit;function jit(e){return iI(this,e).has(e)}var zit=jit;function Bit(e,t){var r=iI(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var Lit=Bit;function Pw(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Pw.prototype.clear=Mit;Pw.prototype.delete=Rit;Pw.prototype.get=Iit;Pw.prototype.has=zit;Pw.prototype.set=Lit;var nI=Pw,Fit="Expected a function";function AW(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Fit);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var o=e.apply(this,i);return r.cache=a.set(n,o)||a,o};return r.cache=new(AW.Cache||nI),r}AW.Cache=nI;var Nit=AW,Uit=500;function Vit(e){var t=Nit(e,function(i){return r.size===Uit&&r.clear(),i}),r=t.cache;return t}var kit=Vit,qit=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wit=/\\(\\)?/g,Git=kit(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(qit,function(r,i,n,a){t.push(n?a.replace(Wit,"$1"):i||r)}),t}),Hit=Git;function $it(e){return e==null?"":vet(e)}var Xit=$it;function Yit(e,t){return Dp(e)?e:$rt(e,t)?[e]:Hit(Xit(e))}var Tw=Yit;function Kit(e){if(typeof e=="string"||bP(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var aI=Kit;function Qit(e,t){t=Tw(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[aI(t[r++])];return r&&r==i?e:void 0}var Y_e=Qit;function Jit(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var OW=Jit,zJ=Ks?Ks.isConcatSpreadable:void 0;function Zit(e){return Dp(e)||MW(e)||!!(zJ&&e&&e[zJ])}var ent=Zit;function K_e(e,t,r,i,n){var a=-1,o=e.length;for(r||(r=ent),n||(n=[]);++a<o;){var s=e[a];t>0&&r(s)?t>1?K_e(s,t-1,r,i,n):OW(n,s):i||(n[n.length]=s)}return n}var tnt=K_e;function rnt(e){var t=e==null?0:e.length;return t?tnt(e,1):[]}var int=rnt;function nnt(e){return btt(Dtt(e,void 0,int),e+"")}var Q_e=nnt,ant=X_e(Object.getPrototypeOf,Object),RW=ant,ont="[object Object]",snt=Function.prototype,lnt=Object.prototype,J_e=snt.toString,unt=lnt.hasOwnProperty,cnt=J_e.call(Object);function dnt(e){if(!$m(e)||xb(e)!=ont)return!1;var t=RW(e);if(t===null)return!0;var r=unt.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&J_e.call(r)==cnt}var hnt=dnt;function fnt(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+t];return a}var pnt=fnt;function mnt(){this.__data__=new rI,this.size=0}var gnt=mnt;function vnt(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var ynt=vnt;function bnt(e){return this.__data__.get(e)}var _nt=bnt;function wnt(e){return this.__data__.has(e)}var xnt=wnt,Snt=200;function Cnt(e,t){var r=this.__data__;if(r instanceof rI){var i=r.__data__;if(!wM||i.length<Snt-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new nI(i)}return r.set(e,t),this.size=r.size,this}var Ent=Cnt;function Aw(e){var t=this.__data__=new rI(e);this.size=t.size}Aw.prototype.clear=gnt;Aw.prototype.delete=ynt;Aw.prototype.get=_nt;Aw.prototype.has=xnt;Aw.prototype.set=Ent;var sR=Aw;function Mnt(e,t){return e&&_P(t,TW(t),e)}var Pnt=Mnt;function Tnt(e,t){return e&&_P(t,B0(t),e)}var Ant=Tnt,Z_e=typeof exports=="object"&&exports&&!exports.nodeType&&exports,BJ=Z_e&&typeof module=="object"&&module&&!module.nodeType&&module,Ont=BJ&&BJ.exports===Z_e,LJ=Ont?If.Buffer:void 0,FJ=LJ?LJ.allocUnsafe:void 0;function Rnt(e,t){if(t)return e.slice();var r=e.length,i=FJ?FJ(r):new e.constructor(r);return e.copy(i),i}var Dnt=Rnt;function Int(e,t){for(var r=-1,i=e==null?0:e.length,n=0,a=[];++r<i;){var o=e[r];t(o,r,e)&&(a[n++]=o)}return a}var jnt=Int;function znt(){return[]}var ewe=znt,Bnt=Object.prototype,Lnt=Bnt.propertyIsEnumerable,NJ=Object.getOwnPropertySymbols,Fnt=NJ?function(e){return e==null?[]:(e=Object(e),jnt(NJ(e),function(t){return Lnt.call(e,t)}))}:ewe,DW=Fnt;function Nnt(e,t){return _P(e,DW(e),t)}var Unt=Nnt,Vnt=Object.getOwnPropertySymbols,knt=Vnt?function(e){for(var t=[];e;)OW(t,DW(e)),e=RW(e);return t}:ewe,twe=knt;function qnt(e,t){return _P(e,twe(e),t)}var Wnt=qnt;function Gnt(e,t,r){var i=t(e);return Dp(e)?i:OW(i,r(e))}var rwe=Gnt;function Hnt(e){return rwe(e,TW,DW)}var h6=Hnt;function $nt(e){return rwe(e,B0,twe)}var iwe=$nt,Xnt=Cb(If,"DataView"),f6=Xnt,Ynt=Cb(If,"Promise"),p6=Ynt,Knt=Cb(If,"Set"),m6=Knt,UJ="[object Map]",Qnt="[object Object]",VJ="[object Promise]",kJ="[object Set]",qJ="[object WeakMap]",WJ="[object DataView]",Jnt=Sb(f6),Znt=Sb(wM),eat=Sb(p6),tat=Sb(m6),rat=Sb(d6),y0=xb;(f6&&y0(new f6(new ArrayBuffer(1)))!=WJ||wM&&y0(new wM)!=UJ||p6&&y0(p6.resolve())!=VJ||m6&&y0(new m6)!=kJ||d6&&y0(new d6)!=qJ)&&(y0=function(e){var t=xb(e),r=t==Qnt?e.constructor:void 0,i=r?Sb(r):"";if(i)switch(i){case Jnt:return WJ;case Znt:return UJ;case eat:return VJ;case tat:return kJ;case rat:return qJ}return t});var xM=y0,iat=Object.prototype,nat=iat.hasOwnProperty;function aat(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&nat.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var oat=aat,sat=If.Uint8Array,_D=sat;function lat(e){var t=new e.constructor(e.byteLength);return new _D(t).set(new _D(e)),t}var IW=lat;function uat(e,t){var r=t?IW(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var cat=uat,dat=/\w*$/;function hat(e){var t=new e.constructor(e.source,dat.exec(e));return t.lastIndex=e.lastIndex,t}var fat=hat,GJ=Ks?Ks.prototype:void 0,HJ=GJ?GJ.valueOf:void 0;function pat(e){return HJ?Object(HJ.call(e)):{}}var mat=pat;function gat(e,t){var r=t?IW(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var vat=gat,yat="[object Boolean]",bat="[object Date]",_at="[object Map]",wat="[object Number]",xat="[object RegExp]",Sat="[object Set]",Cat="[object String]",Eat="[object Symbol]",Mat="[object ArrayBuffer]",Pat="[object DataView]",Tat="[object Float32Array]",Aat="[object Float64Array]",Oat="[object Int8Array]",Rat="[object Int16Array]",Dat="[object Int32Array]",Iat="[object Uint8Array]",jat="[object Uint8ClampedArray]",zat="[object Uint16Array]",Bat="[object Uint32Array]";function Lat(e,t,r){var i=e.constructor;switch(t){case Mat:return IW(e);case yat:case bat:return new i(+e);case Pat:return cat(e,r);case Tat:case Aat:case Oat:case Rat:case Dat:case Iat:case jat:case zat:case Bat:return vat(e,r);case _at:return new i;case wat:case Cat:return new i(e);case xat:return fat(e);case Sat:return new i;case Eat:return mat(e)}}var Fat=Lat;function Nat(e){return typeof e.constructor=="function"&&!EW(e)?itt(RW(e)):{}}var Uat=Nat,Vat="[object Map]";function kat(e){return $m(e)&&xM(e)==Vat}var qat=kat,$J=H_&&H_.isMap,Wat=$J?PW($J):qat,Gat=Wat,Hat="[object Set]";function $at(e){return $m(e)&&xM(e)==Hat}var Xat=$at,XJ=H_&&H_.isSet,Yat=XJ?PW(XJ):Xat,Kat=Yat,Qat=1,Jat=2,Zat=4,nwe="[object Arguments]",eot="[object Array]",tot="[object Boolean]",rot="[object Date]",iot="[object Error]",awe="[object Function]",not="[object GeneratorFunction]",aot="[object Map]",oot="[object Number]",owe="[object Object]",sot="[object RegExp]",lot="[object Set]",uot="[object String]",cot="[object Symbol]",dot="[object WeakMap]",hot="[object ArrayBuffer]",fot="[object DataView]",pot="[object Float32Array]",mot="[object Float64Array]",got="[object Int8Array]",vot="[object Int16Array]",yot="[object Int32Array]",bot="[object Uint8Array]",_ot="[object Uint8ClampedArray]",wot="[object Uint16Array]",xot="[object Uint32Array]",Mi={};Mi[nwe]=Mi[eot]=Mi[hot]=Mi[fot]=Mi[tot]=Mi[rot]=Mi[pot]=Mi[mot]=Mi[got]=Mi[vot]=Mi[yot]=Mi[aot]=Mi[oot]=Mi[owe]=Mi[sot]=Mi[lot]=Mi[uot]=Mi[cot]=Mi[bot]=Mi[_ot]=Mi[wot]=Mi[xot]=!0;Mi[iot]=Mi[awe]=Mi[dot]=!1;function lR(e,t,r,i,n,a){var o,s=t&Qat,l=t&Jat,u=t&Zat;if(r&&(o=n?r(e,i,n,a):r(e)),o!==void 0)return o;if(!Of(e))return e;var c=Dp(e);if(c){if(o=oat(e),!s)return stt(e,o)}else{var d=xM(e),h=d==awe||d==not;if(bD(e))return Dnt(e,s);if(d==owe||d==nwe||h&&!n){if(o=l||h?{}:Uat(e),!s)return l?Wnt(e,Ant(o,e)):Unt(e,Pnt(o,e))}else{if(!Mi[d])return n?e:{};o=Fat(e,d,s)}}a||(a=new sR);var f=a.get(e);if(f)return f;a.set(e,o),Kat(e)?e.forEach(function(m){o.add(lR(m,t,r,m,e,a))}):Gat(e)&&e.forEach(function(m,y){o.set(y,lR(m,t,r,y,e,a))});var g=u?l?iwe:h6:l?B0:TW,p=c?void 0:g(e);return wtt(p||e,function(m,y){p&&(y=m,m=e[y]),SW(o,y,lR(m,t,r,y,e,a))}),o}var swe=lR,Sot=1,Cot=4;function Eot(e){return swe(e,Sot|Cot)}var oI=Eot,Mot="__lodash_hash_undefined__";function Pot(e){return this.__data__.set(e,Mot),this}var Tot=Pot;function Aot(e){return this.__data__.has(e)}var Oot=Aot;function wD(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new nI;++t<r;)this.add(e[t])}wD.prototype.add=wD.prototype.push=Tot;wD.prototype.has=Oot;var Rot=wD;function Dot(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var Iot=Dot;function jot(e,t){return e.has(t)}var zot=jot,Bot=1,Lot=2;function Fot(e,t,r,i,n,a){var o=r&Bot,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e),c=a.get(t);if(u&&c)return u==t&&c==e;var d=-1,h=!0,f=r&Lot?new Rot:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var g=e[d],p=t[d];if(i)var m=o?i(p,g,d,t,e,a):i(g,p,d,e,t,a);if(m!==void 0){if(m)continue;h=!1;break}if(f){if(!Iot(t,function(y,b){if(!zot(f,b)&&(g===y||n(g,y,r,i,a)))return f.push(b)})){h=!1;break}}else if(!(g===p||n(g,p,r,i,a))){h=!1;break}}return a.delete(e),a.delete(t),h}var lwe=Fot;function Not(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}var Uot=Not;function Vot(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var kot=Vot,qot=1,Wot=2,Got="[object Boolean]",Hot="[object Date]",$ot="[object Error]",Xot="[object Map]",Yot="[object Number]",Kot="[object RegExp]",Qot="[object Set]",Jot="[object String]",Zot="[object Symbol]",est="[object ArrayBuffer]",tst="[object DataView]",YJ=Ks?Ks.prototype:void 0,Xz=YJ?YJ.valueOf:void 0;function rst(e,t,r,i,n,a,o){switch(r){case tst:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case est:return!(e.byteLength!=t.byteLength||!a(new _D(e),new _D(t)));case Got:case Hot:case Yot:return xW(+e,+t);case $ot:return e.name==t.name&&e.message==t.message;case Kot:case Jot:return e==t+"";case Xot:var s=Uot;case Qot:var l=i&qot;if(s||(s=kot),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;i|=Wot,o.set(e,t);var c=lwe(s(e),s(t),i,n,a,o);return o.delete(e),c;case Zot:if(Xz)return Xz.call(e)==Xz.call(t)}return!1}var ist=rst,nst=1,ast=Object.prototype,ost=ast.hasOwnProperty;function sst(e,t,r,i,n,a){var o=r&nst,s=h6(e),l=s.length,u=h6(t),c=u.length;if(l!=c&&!o)return!1;for(var d=l;d--;){var h=s[d];if(!(o?h in t:ost.call(t,h)))return!1}var f=a.get(e),g=a.get(t);if(f&&g)return f==t&&g==e;var p=!0;a.set(e,t),a.set(t,e);for(var m=o;++d<l;){h=s[d];var y=e[h],b=t[h];if(i)var w=o?i(b,y,h,t,e,a):i(y,b,h,e,t,a);if(!(w===void 0?y===b||n(y,b,r,i,a):w)){p=!1;break}m||(m=h=="constructor")}if(p&&!m){var x=e.constructor,S=t.constructor;x!=S&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof S=="function"&&S instanceof S)&&(p=!1)}return a.delete(e),a.delete(t),p}var lst=sst,ust=1,KJ="[object Arguments]",QJ="[object Array]",zA="[object Object]",cst=Object.prototype,JJ=cst.hasOwnProperty;function dst(e,t,r,i,n,a){var o=Dp(e),s=Dp(t),l=o?QJ:xM(e),u=s?QJ:xM(t);l=l==KJ?zA:l,u=u==KJ?zA:u;var c=l==zA,d=u==zA,h=l==u;if(h&&bD(e)){if(!bD(t))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new sR),o||H_e(e)?lwe(e,t,r,i,n,a):ist(e,t,l,r,i,n,a);if(!(r&ust)){var f=c&&JJ.call(e,"__wrapped__"),g=d&&JJ.call(t,"__wrapped__");if(f||g){var p=f?e.value():e,m=g?t.value():t;return a||(a=new sR),n(p,m,r,i,a)}}return h?(a||(a=new sR),lst(e,t,r,i,n,a)):!1}var hst=dst;function uwe(e,t,r,i,n){return e===t?!0:e==null||t==null||!$m(e)&&!$m(t)?e!==e&&t!==t:hst(e,t,r,i,uwe,n)}var fst=uwe;function pst(e,t){return e!=null&&t in Object(e)}var mst=pst;function gst(e,t,r){t=Tw(t,e);for(var i=-1,n=t.length,a=!1;++i<n;){var o=aI(t[i]);if(!(a=e!=null&&r(e,o)))break;e=e[o]}return a||++i!=n?a:(n=e==null?0:e.length,!!n&&CW(n)&&wW(o,n)&&(Dp(e)||MW(e)))}var vst=gst;function yst(e,t){return e!=null&&vst(e,t,mst)}var bst=yst,_st=function(){return If.Date.now()},Yz=_st,wst="Expected a function",xst=Math.max,Sst=Math.min;function Cst(e,t,r){var i,n,a,o,s,l,u=0,c=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(wst);t=MJ(t)||0,Of(r)&&(c=!!r.leading,d="maxWait"in r,a=d?xst(MJ(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h);function f(C){var T=i,M=n;return i=n=void 0,u=C,o=e.apply(M,T),o}function g(C){return u=C,s=setTimeout(y,t),c?f(C):o}function p(C){var T=C-l,M=C-u,A=t-T;return d?Sst(A,a-M):A}function m(C){var T=C-l,M=C-u;return l===void 0||T>=t||T<0||d&&M>=a}function y(){var C=Yz();if(m(C))return b(C);s=setTimeout(y,p(C))}function b(C){return s=void 0,h&&i?f(C):(i=n=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,i=l=n=s=void 0}function x(){return s===void 0?o:b(Yz())}function S(){var C=Yz(),T=m(C);if(i=arguments,n=this,l=C,T){if(s===void 0)return g(l);if(d)return clearTimeout(s),s=setTimeout(y,t),f(l)}return s===void 0&&(s=setTimeout(y,t)),o}return S.cancel=w,S.flush=x,S}var SM=Cst;function Est(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Mst=Est;function Pst(e,t){return e>t}var Tst=Pst;function Ast(e,t){return t.length<2?e:Y_e(e,pnt(t,0,-1))}var Ost=Ast;function Rst(e,t){return fst(e,t)}var jW=Rst;function Dst(e,t,r){for(var i=-1,n=e.length;++i<n;){var a=e[i],o=t(a);if(o!=null&&(s===void 0?o===o&&!bP(o):r(o,s)))var s=o,l=a}return l}var Ist=Dst;function jst(e){return e&&e.length?Ist(e,N_e,Tst):void 0}var zst=jst;function Bst(e,t){return t=Tw(t,e),e=Ost(e,t),e==null||delete e[aI(Mst(t))]}var Lst=Bst;function Fst(e){return hnt(e)?void 0:e}var Nst=Fst,Ust=1,Vst=2,kst=4,qst=Q_e(function(e,t){var r={};if(e==null)return r;var i=!1;t=L_e(t,function(a){return a=Tw(a,e),i||(i=a.length>1),a}),_P(e,iwe(e),r),i&&(r=swe(r,Ust|Vst|kst,Nst));for(var n=t.length;n--;)Lst(r,t[n]);return r}),g6=qst;function Wst(e,t,r,i){if(!Of(e))return e;t=Tw(t,e);for(var n=-1,a=t.length,o=a-1,s=e;s!=null&&++n<a;){var l=aI(t[n]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=o){var c=s[l];u=i?i(c,l,s):void 0,u===void 0&&(u=Of(c)?c:wW(t[n+1])?[]:{})}SW(s,l,u),s=s[l]}return e}var Gst=Wst;function Hst(e,t,r){for(var i=-1,n=t.length,a={};++i<n;){var o=t[i],s=Y_e(e,o);r(s,o)&&Gst(a,Tw(o,e),s)}return a}var $st=Hst;function Xst(e,t){return $st(e,t,function(r,i){return bst(e,i)})}var Yst=Xst,Kst=Q_e(function(e,t){return e==null?{}:Yst(e,t)}),Ep=Kst,Qst="Expected a function";function Jst(e,t,r){var i=!0,n=!0;if(typeof e!="function")throw new TypeError(Qst);return Of(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),SM(e,t,{leading:i,maxWait:t,trailing:n})}var Zst=Jst;function cwe(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function Qs(e,t){return Object.setPrototypeOf(e,t),e}var elt=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),tlt=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),rlt=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||sI&&"ontouchend"in document,ilt=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,nlt=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,alt=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},olt=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},slt=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},dwe=elt();dwe&&slt();var sI=tlt(),wP=rlt(),llt=ilt(),ts=nlt(),ZJ=alt(),ult=Number(olt());function hwe(e){return Array.isArray(e)?e:[e]}function fwe(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}function BA(e){return sI?e.metaKey:e.ctrlKey}function clt(e){return e.wheelDeltaY===0||e.deltaY===0?sI&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var ar=[],xD={},eE={},uR={};function pwe(e){ar.includes(e)||ar.push(e)}function g_(e){delete xD[e.pointerId];for(let t=0;t<ar.length;t++)if(ar[t].pointerId===e.pointerId){ar.splice(t,1);break}}function dlt(){ar.splice(0,ar.length)}function SD(e){if(e.pointerType!=="touch")return;let t=xD[e.pointerId];t===void 0&&(t={x:0,y:0},xD[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function Kz(e){let t=e.pointerId===ar[0].pointerId?ar[1]:ar[0];return xD[t.pointerId]}function mwe(e){eE[e.key]=!0,uR[e.key]=uR[e.key]===void 0?1:uR[e.key]+1}function gwe(e){if(sI&&eE.Meta)for(let t in eE)eE[t]=!1;else eE[e.key]=!1;uR={}}function hlt(e){e.addEventListener("pointerdown",pwe,!0),e.addEventListener("pointerdown",SD,!0),e.addEventListener("pointermove",SD,!0),e.addEventListener("pointerup",g_,!0),e.addEventListener("pointercancel",g_,!0),e.addEventListener("pointerleave",g_,!0),window.addEventListener("keydown",mwe,!0),window.addEventListener("keyup",gwe,!0)}function flt(e){e.removeEventListener("pointerdown",pwe,!0),e.removeEventListener("pointerdown",SD,!0),e.removeEventListener("pointermove",SD,!0),e.removeEventListener("pointerup",g_,!0),e.removeEventListener("pointercancel",g_,!0),e.removeEventListener("pointerleave",g_,!0),window.removeEventListener("keydown",mwe,!0),window.removeEventListener("keyup",gwe,!0)}var vwe,plt=new Promise(e=>{vwe=e}),LA;function mlt(){if(LA)return LA;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@1.9.82/build",r=tl(()=>import("./navmesh-BFd9Mv4x.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/navmesh.wasm`).then(s=>s.arrayBuffer())]),a=i.default,o=await a({wasmBinary:n});vwe(o)}return LA=e(),LA}var ywe,glt=new Promise(e=>{ywe=e}),FA;function vlt(){if(FA)return FA;async function e(){let t=await tl(()=>import("./physics-BM4kW-A5.js"),[]);await t.init(),ywe(t)}return FA=e(),FA}var Zt=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let i={...r,[e]:t};return Object.setPrototypeOf(i,Zt.prototype),i}}add(e,t){var r;return((r=this.runOp({type:1,id:e,data:t}))==null?void 0:r.data)??this}runOp(e){let t=this;if(e.type===1){let r=t[e.id],i;r===void 0?i={type:2,id:e.id}:i={type:1,id:e.id,data:r};let{id:n,data:a}=e,o={...t,[n]:a};return Object.setPrototypeOf(o,Zt.prototype),{data:o,actual:e,reverse:i}}else if(e.type===2){let{id:r}=e,i=t[r];if(i===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,Zt.prototype),delete n[r],{data:n,actual:e,reverse:{type:1,id:r,data:i}}}}return null}};function zW(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let i=e[r];i&&typeof i=="object"&&zW(i)}return Object.freeze(e)}function ylt(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var bwe=class extends Error{};function Qz(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function Zg(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let a=e;e=t,t=a}let i=[],n=1/(r+1);for(let a=0;a<r;a++){let o=e+(t-e)*(a+.75+Math.random()*.5)*n;i.push(o)}return i}function BW(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function blt(){return typeof process<"u"}function _we(e,t){for(let r of e)t(r.id,r.data)!==!0&&_we(r.children,t)}function wwe(e,t){if(t(e.id,e.data)!==!0)for(let r of e.children)wwe(r,t)}var ya=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ya.prototype)}deepFreeze(){let e=0;for(;e<this.length;)zW(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let r of e.children)this.fillCaches0(r,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&wwe(r,t)}}traverse(e){_we(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),i=this.childrenArray(r),n=i.findIndex(o=>o.id===e);if(n<0)throw new Error("not expected");let a=i[n];return i=[...i],i[n]={...a,data:t},this.modifyArrayBy(r,i)}}modifyArrayBy(e,t){let r=e,i=t;for(;r!==null;){let a=i,o=r;if(r=this.parent(r),r===void 0)throw new Error;i=this.childrenArray(r);let s=i.findIndex(l=>l.id===o);if(s<0)throw new Error;i=[...i],i[s]={...i[s],children:a}}Object.setPrototypeOf(i,ya.prototype);let n=i;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let r of t)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:r,id:i,data:n,children:a}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let o=t,s=this.childrenArray(o),l={fi:r,id:i,data:n,children:a};return s=[...s,l],s.sort((u,c)=>u.fi-c.fi),e.localIndex=s.indexOf(l),{data:this.modifyArrayBy(o,s),actual:e,reverse:{type:8,id:i}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let i=this.childrenArray(r),n=i.findIndex(o=>o.id===t);e.localIndex=n,i=[...i];let a=i.splice(n,1)[0];return{data:this.modifyArrayBy(r,i),actual:e,reverse:{type:7,...a,parent:r}}}}moveOp(e){let{parent:t,fi:r,id:i}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:i});if(t!==null){let d=t;for(;d!==null;){if(d===void 0)throw new Error;if(d===i)throw new bwe("cyclic tree");d=this.parent(d)}}let n=this.parent(i);if(n===void 0)return null;let a=n,o=this.childrenArray(n),s=o.findIndex(d=>d.id===i);o=[...o];let l=o.splice(s,1)[0],u=this.modifyArrayBy(n,o);n=t,o=u.childrenArray(n);let c=l.fi;return l={...l,fi:r},o=[...o,l],o.sort((d,h)=>d.fi-h.fi),e.localIndex=o.indexOf(l),u=u.modifyArrayBy(n,o),{data:u,actual:e,reverse:{type:9,parent:a,fi:c,id:i}}}previous(e,t){if(t===null){let i=this.childrenArray(e);return i.length===0?null:i[i.length-1].id}let r=null;for(let i of this.childrenArray(e)){if(i.id===t)return r;r=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)+1;if(i<r.length)return r[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)-1;return i>=0?this.traverseSortPrevious(r[i].id):t}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push({...r,...i})}t.sort((r,i)=>ylt(r.sortKey,i.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],i=this.get(t),n=i;if(i!==void 0){for(;t;)r.splice(0,0,i.fi),t=this.parent(t),t!==null&&(i=this.get(t));return{...n,sortKey:r}}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let i=this.childrenArray(e);if(t===null){if(i.length===0)return Zg(0,r,r);{let n=i[0].fi;return Zg(n-r,n,r)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let a=i.find(o=>o.fi>n.fi);if(a===void 0){let o=i[i.length-1].fi;return Zg(o,o+r,r)}else return Zg(n.fi,a.fi,r)}}},CD;(e=>{function t(r,i){if(i.type!==0)return null;if(Array.isArray(r)){let n=i.props,a={},o=[...r],s=!1;if(n)for(let l of Object.keys(n)){let u=parseInt(l);if(isNaN(u))throw new Error("wrong index");a[l]=o[u],o[u]=n[l],s=!0}return s?{data:o,actual:i,reverse:{type:0,props:a}}:null}else{let n=i.props,a={},o={...r},s=!1;if(n)for(let l of Object.keys(n)){a[l]=o[l];let u=n[l];u===void 0?delete o[l]:o[l]=u,s=!0}return s?{data:o,actual:i,reverse:{type:0,props:a}}:null}}e.runOp=t})(CD||(CD={}));var Ht=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ht.prototype)}deepFreeze(){let e=0;for(;e<this.length;)zW(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,i=r.findIndex(a=>a.id===e);if(i<0)throw new Error("not expected");let n=r[i];return r=[...r],r[i]={...n,data:t},this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,Ht.prototype);let t=e;return blt()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:r,data:i}=e,n=this,a={fi:t,id:r,data:i};return n=[...n,a],n.sort((o,s)=>o.fi-s.fi),e.localIndex=n.indexOf(a),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:r}}}deleteOp(e){let{id:t}=e,r=this,i=r.findIndex(a=>a.id===t);if(i===-1)return null;e.localIndex=i,r=[...r];let n=r.splice(i,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:r}=e,i=this;i=[...i];let n=i.findIndex(s=>s.id===r);if(n===-1)return null;let a=i[n].fi,o={...i[n],fi:t};return i[n]=o,i.sort((s,l)=>s.fi-l.fi),e.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:a,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return Zg(0,t,t);{let i=r[0].fi;return Zg(i-t,i,t)}}else{let i=this.get(e);if(i===void 0)throw new Error("illegal args");let n=r.find(a=>a.fi>i.fi);if(n===void 0){let a=r[r.length-1].fi;return Zg(a,a+t,t)}else return Zg(i.fi,n.fi,t)}}};function $_(e){return e&&typeof e=="object"&&e instanceof En}var En=class{unusedFunOverridesTable(t){}runOp(t){let r=[],i=this,n=0,a={};for(;n<t.path.length;){if(r.push(i),i=i===void 0?void 0:i[t.path[n]],i!==void 0&&!$_(i))return null;n+=1}i=i?Qz(i):new En;for(let[l,u]of Object.entries(t.props)){let c=i[l];a[l]=c,u===void 0?delete i[l]:i[l]=u}for(;n>0;){if(Object.keys(i).length===0){let l=r[n-1];l&&(i=Qz(l),delete i[t.path[n-1]])}else{let l=r[n-1];if(l){let u=Qz(l);u[t.path[n-1]]=i,i=u}else{let u=new En;u[t.path[n-1]]=i,i=u}}n-=1}let o=Object.setPrototypeOf(i,En.prototype),s={...t,props:a};return{data:o,actual:t,reverse:s}}},cv;(e=>{function t(n,a){return CM(n,a)??n}e.apply=t;function r(n,a){return FW(n,a)}e.merge=r;function i(n,a){let o=0,s=a.path,l=n;for(;o<s.length&&l!==void 0;){if(l=Ln.zoomOnce(l,s[o]),l===void 0)return a;if(!$_(l))return;o+=1}if(l===void 0)return a;if($_(l))if(a.type===0){let u={...a.props};for(let c of Object.keys(l))delete u[c];return{...a,props:u}}else if(a.type===1||a.type===4||a.type===7){let u=LW([a],l);return u?(console.log(u),u):a}else return a}e.filterOp=i})(cv||(cv={}));function LW(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let a=n.id,o=CM(n.data,t[a]);if(r=r||o!==void 0,o===void 0&&(o=n.data),n.children){let s=LW(n.children,t);return s!==void 0?r=!0:s=n.children,{...n,id:a,data:o,children:s}}else return{...n,id:a,data:o}});if(r)return i}function _lt(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let a=n.id,o=CM(n.data,t[a]);return r=r||o!==void 0,o===void 0&&(o=n.data),{...n,id:a,data:o}});if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function CM(e,t){if(!$_(t))return t;if(e instanceof ya){let r=LW(e,t);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof Ht)return _lt(e,t);if(Array.isArray(e)){let r=!1,i=e.map((n,a)=>{let o=CM(n,t[a]);return r=r||o!==void 0,o===void 0&&(o=n),o});return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else{if(e instanceof En)return FW(e,t);if(e&&typeof e=="object"){let r={},i=!1;for(let[n,a]of Object.entries(e)){let o=CM(a,t[n]);i=i||o!==void 0,o===void 0&&(o=a),r[n]=o}return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}}}}function FW(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!$_(t))return t;if(!$_(e))return cv.apply(e,t);let r=new Set;for(let n of Object.keys(e))r.add(n);for(let n of Object.keys(t))r.add(n);let i=new En;for(let n of r){let a=FW(e===void 0?void 0:e[n],t===void 0?void 0:t[n]);i[n]=a}return i}function wlt(e,t){let r={cur:[],result:[],len:0};return e=EM(e,t,r)??e,[e,r.result]}function ED(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function MD(e){e&&(e.len-=1)}function xlt(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function xwe(e,t,r){let i=!1,n=e.map(a=>{let o=a.id,s=t[o];if(s!==void 0&&typeof s=="string"&&(i=!0,o=s,r!==null))throw new Error("not supported");let l=EM(a.data,t,ED(r,o));MD(r),i=i||l!==void 0,l===void 0&&(l=a.data);let u=xwe(a.children,t,r);return u!==void 0?i=!0:u=a.children,{...a,id:o,data:l,children:u}});if(i)return n}function Slt(e,t,r){let i=!1,n=e.map(a=>{let o=a.id,s=t[o];if(s!==void 0&&typeof s=="string"&&(i=!0,o=s,r!==null))throw new Error("not supported");let l=EM(a.data,t,ED(r,o));return MD(r),i=i||l!==void 0,l===void 0&&(l=a.data),{...a,id:o,data:l}});if(i)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function EM(e,t,r){if(e instanceof ya){let i=xwe(e,t,r);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof Ht)return Slt(e,t,r);if(Array.isArray(e)){let i=!1,n=e.map((a,o)=>{let s=EM(a,t,ED(r,o));return MD(r),i=i||s!==void 0,s===void 0&&(s=a),s});return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(e&&typeof e=="object"&&!BW(e)){let i={},n=!1;for(let[a,o]of Object.entries(e))if(a!=="name"&&a!=="variableId"){let s=t[a];if(typeof s=="string"){if(r!==null)throw new Error("not supported");n=!0,a=s}let l=EM(o,t,ED(r,a));MD(r),n=n||l!==void 0,l===void 0&&(l=o),i[a]=l}else i[a]=o;return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else if(typeof e=="string"){let i=t[e];return i!==void 0&&xlt(r),i}else return}}var PD;(e=>{function t(r,i){let n=Ln.zoom(i,r.path);if(typeof n=="object"){let a={};for(let o of Object.keys(r.props))a[o]=n[o];return{...r,props:a}}else return{...r,props:{}}}e.replaceProps=t})(PD||(PD={}));var Jn;(e=>{function t(l,u){return{...l,path:l.path.slice(u)}}e.drop=t;function r(l,u){var c;return((c=i(l,u))==null?void 0:c.data)??l}e.applySimple=r;function i(l,u){var h,f;let c=u.path;for(var d=[];;){let g;if(l instanceof En&&u.type===0&&(g=l.runOp({...u,path:c.slice(d.length)}),g===null&&(g=void 0)),g===void 0&&d.length===c.length&&(l instanceof ya||l instanceof Ht||l instanceof Zt?g=l.runOp(u):g=CD.runOp(l,u)),g!==void 0)if(g!==null){let y=g.data;for(let b=d.length-1;b>=0;b--){let w=c[b],x=d[b];if(x instanceof ya){if(typeof w=="number")throw new Error("illegal arg");y=x.modifyById(w,y)}else if(x instanceof Ht){if(typeof w=="number")throw new Error("illegal arg");y=x.modifyById(w,y)}else if(x instanceof Zt){if(typeof w=="number")throw new Error("illegal arg");y=x.modifyById(w,y)}else if(x instanceof En){let S={...x,[w]:y};y=Object.setPrototypeOf(S,En.prototype)}else if(typeof x=="object")if(Array.isArray(x)){if(typeof w=="string"&&(w=parseInt(w),isNaN(w)))throw new Error("Invalid path");let S=y;y=[...x],y[w]=S}else y={...x,[w]:y};else return null}return{data:y,actual:{...g.actual,path:c},reverse:{...g.reverse,path:c}}}else return null;let p=c[d.length],m;if(l instanceof ya){if(typeof p=="number")throw new Error("");m=(h=l.get(p))==null?void 0:h.data}else if(l instanceof Ht){if(typeof p=="number")throw new Error("");m=(f=l.get(p))==null?void 0:f.data}else l!==null&&(m=l[p]);if(m!==void 0)d.push(l),l=m;else return null}}e.apply=i;function n(l,u){for(let c=0;c<l.length&&c<u.length;c++)if(l[c]!==u[c])return!0;return!1}e.pathDisjoint=n;function a(l,u){if(l.length!==u.length)return!1;for(let c=0;c<l.length;c++)if(l[c]!==u[c])return!1;return!0}e.pathEq=a;function o(l,u){return n(l.path,u.path)}e.commutative=o;function s(l,u){return l.type===0&&u.type===0&&a(l.path,u.path)?Object.keys(l.props).every(c=>u.props[c]!==void 0):!1}e.subsumed=s})(Jn||(Jn={}));var v6;(e=>{function t(){return[]}e.empty=t;function r(u,c){let d=[];for(let h of u){let[f,...g]=h.path;f===c&&d.push({...h,path:g})}return d}e.removePrefix=r;function i(u,c){return u.map(d=>({...d,path:[c,...d.path]}))}e.addPrefix=i;function n(u,c){return[...u,...c]}e.concat=n;function a(u,c){return[...u.filter(d=>!c.some(h=>Jn.subsumed(d,h))),...c]}e.compress=a;function o(u,c){return u.every(d=>c.every(h=>Jn.commutative(d,h)))}e.commutative=o;function s(u,c){for(let d of c){let h=l(u,d);h!==null&&(u=h.data)}return u}e.applyAll=s;function l(u,c){var d=u;let h=[],f=[];for(let g of c)try{if(g.type===3||g.type===5&&g.path[g.path.length-1]==="variables"){let p,m,y;if(g.type===3?(p=Ln.zoom(d,[...g.path,g.id]),y=Jn.apply(d,{...g,type:2})):(p=Ln.zoom(d,[...g.path,g.id,"value"]),y=Jn.apply(d,g)),y!==null){d=y.data;let[b,w]=wlt(d,{[g.id]:p});d=b;for(let x=0;x<w.length;x++){let S=w[x],C=S.pop();if(typeof C=="number"){let T=[C];for(let A=x+1;A<w.length;A++){let P=w[A],O=P[P.length-1];if(typeof O=="number"&&Ln.equal(S,P.slice(0,P.length-1)))T.push(O),w.splice(A,1);else break}let M=Ln.zoom(d,S);m=M.map((A,P)=>T.includes(P)?g.id:A),p=M,C=S.pop()}else{if(C==="alphaOverride"||C==="alpha"){p/=100;let T=p,M=Ln.zoom(d,S.slice(0,S.length-2)),A=M.layers.map(P=>P.id===S[S.length-1]?{...P,data:{...P.data,[C]:T}}:P);Object.setPrototypeOf(A,Object.getPrototypeOf(M.layers)),M.layers=A}m=g.id}h.push({type:0,path:S,props:{[C]:p}}),f.push({type:0,path:S,props:{[C]:m}})}f.push(y.reverse),h.push(y.actual)}}else{let p=Jn.apply(d,g);p!==null&&(h.push(p.actual),d=p.data,f.push(p.reverse))}}catch(p){if(p instanceof bwe)return null;throw p}return{data:d,actual:h,reverse:f.reverse()}}e.apply=l})(v6||(v6={}));var Swe=Symbol(),Clt=Symbol(),lI=Symbol(),xP=class{reportOp(e,t,r=[]){let i=this;if(t===null)return;i._current=t.data;let n=r;for(;!(i instanceof Ewe);){let a=i._path,o=i._current;if(a!==""&&n.splice(0,0,a),i=i._parent,i===null)return;i.update(a,o)}i.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[lI];r&&r(),delete this._children[e]}}}},Elt=class extends xP{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,CD.runOp(this._current,e),e.path)}},Mlt=class extends xP{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Zt.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},Cwe={get(e,t){if(t===lI)return()=>{e._parent=null};if(t===Swe)return e._current;if(t===Clt)return e;let{_current:r,_children:i}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let n=i===void 0?void 0:i[t];if(n!==void 0)return n;let a=r[t],o=uI(e,t,a);return o!==a?(i===void 0&&(i={},e._children=i),i[t]=o,o):a},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:r[t]}}},Plt={...Cwe,set(e,t,r){let i={type:0,props:{[t]:un(r)??r}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}},Tlt={...Cwe,set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},NW=class extends xP{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[lI]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,r)=>{e(t,this.data(t))})}data(e){var o;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(o=t.get(e))==null?void 0:o.data,a=uI(this,e,n);return a!==n?(r===void 0&&(r={},this._children=r),r[e]=a,a):n}add(e,t,r,i,n){this.runOp({type:7,parent:e,fi:t,id:r,data:i,children:n})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.add(e,i[n],a.id,a.data,a.children)}}insertBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.add(e,i[n],a.id,a.data,a.children)}}moveAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.move(e,i[n],a)}}moveBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let a=r[n];this.move(e,i[n],a)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},UW=class extends xP{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[lI]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id,n=this._current[r].fi;e(this.data(this._current[r].id),i,n)}}find(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id;if(e(this.data(i),i))return this.get(i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var o;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(o=t.get(e))==null?void 0:o.data,a=uI(this,e,n);return a!==n?(r===void 0&&(r={},this._children=r),r[e]=a,a):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function Jz(e,t,r){if(e.length>0){let i=e[e.length-1];if(i.type===0&&t.type===0&&Ln.equal(i.path,r)){Object.assign(i.props,t.props);return}}e.push({...t,path:r})}var Ewe=class extends xP{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,i){Jz(this.ts,t,e),Jz(this.actual,r,e),Jz(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function uI(e,t,r){return r instanceof ya?new NW(e,t,r):r instanceof Ht?new UW(e,t,r):r instanceof Zt?new Proxy(new Mlt(e,t,r),Tlt):r!==null&&typeof r=="object"?BW(r)?r:new Proxy(new Elt(e,t,r),Plt):r}function Mwe(e){let t=new Ewe(e);return[uI(t,"",e),t]}function MM(e,t){let[r,i]=Mwe(e);return t(r),i.result()}function un(e){return e instanceof NW||e instanceof UW?e._current:e!==null&&typeof e=="object"?e[Swe]:e}var Ln;(e=>{function t(a,o){if(o.length===a.length)for(var s=0;s<a.length;){if(a[s]!==o[s])return!1;s+=1}else return!1;return!0}e.equal=t;function r(a,o,s){let l=n(s,a);if(l!==void 0&&typeof l=="object"&&l!==null){let u={...o};return Object.keys(l).forEach(c=>{delete u[c]}),u}else return o}e.removeOverridden=r;function i(a,o){if((a instanceof ya||a instanceof NW)&&typeof o=="string"||(a instanceof Ht||a instanceof UW)&&typeof o=="string")return a.data(o);if(typeof o=="number"&&Array.isArray(a)||typeof o=="string"&&typeof a=="object"&&a!==null)return a[o]}e.zoomOnce=i;function n(a,o,s=0){for(;s<o.length&&a!==void 0;)a=i(a,o[s]),s+=1;return a}e.zoom=n})(Ln||(Ln={}));function Alt(e,t){let r=[];if(t.length===e.length)for(var i=0;i<e.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}function yi(e,t){let r=[];if(t.length<=e.length)for(var i=0;i<t.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}var Pwe=class{},eZ=class extends Pwe{constructor(e){super(),this.id=e}},tZ=class extends Pwe{constructor(e){super(),this.data=e}},y6;try{y6=new TextDecoder}catch{}var jt,dv,Qe=0,Eo={},ei,ev,Is=0,dp=0,Jo,Fm,co=[],si,rZ={useRecords:!1,mapsAsObjects:!0},Twe=class{},Awe=new Twe;Awe.name="MessagePack 0xC1";var X_=!1,TD=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(jt)return zwe(()=>(_6(),this?this.unpack(e,t):TD.prototype.unpack.call(rZ,e,t)));dv=t>-1?t:e.length,Qe=0,dp=0,ev=null,Jo=null,jt=e;try{si=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw jt=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof TD){if(Eo=this,this.structures)return ei=this.structures,NA();(!ei||ei.length>0)&&(ei=[])}else Eo=rZ,(!ei||ei.length>0)&&(ei=[]);return NA()}unpackMultiple(e,t){let r,i=0;try{X_=!0;let n=e.length,a=this?this.unpack(e,n):dI.unpack(e,n);if(t){for(t(a);Qe<n;)if(i=Qe,t(NA())===!1)return}else{for(r=[a];Qe<n;)i=Qe,r.push(NA());return r}}catch(n){throw n.lastPosition=i,n.values=r,n}finally{X_=!1,_6()}}_mergeStructures(e,t){e=e||[];for(let r=0,i=e.length;r<i;r++){let n=e[r];n&&(n.isShared=!0,r>=32&&(n.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function NA(){try{if(!Eo.trusted&&!X_){let t=ei.sharedLength||0;t<ei.length&&(ei.length=t)}let e=Ki();if(Qe==dv)ei.restoreStructures&&iZ(),ei=null,jt=null,Fm&&(Fm=null);else if(Qe>dv){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!X_)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw ei.restoreStructures&&iZ(),_6(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function iZ(){for(let e in ei.restoreStructures)ei[e]=ei.restoreStructures[e];ei.restoreStructures=null}function Ki(){let e=jt[Qe++];if(e<160)if(e<128){if(e<64)return e;{let t=ei[e&63]||Eo.getStructures&&Owe()[e&63];return t?(t.read||(t.read=VW(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,Eo.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[Dwe()]=Ki();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(Ki(),Ki());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=Ki();return t}else if(e<192){let t=e-160;if(dp>=Qe)return ev.slice(Qe-Is,(Qe+=t)-Is);if(dp==0&&dv<140){let r=t<16?kW(t):Rwe(t);if(r!=null)return r}return b6(t)}else{let t;switch(e){case 192:return null;case 193:return Jo?(t=Ki(),t>0?Jo[1].slice(Jo.position1,Jo.position1+=t):Jo[0].slice(Jo.position0,Jo.position0-=t)):Awe;case 194:return!1;case 195:return!0;case 196:return Zz(jt[Qe++]);case 197:return t=si.getUint16(Qe),Qe+=2,Zz(t);case 198:return t=si.getUint32(Qe),Qe+=4,Zz(t);case 199:return sy(jt[Qe++]);case 200:return t=si.getUint16(Qe),Qe+=2,sy(t);case 201:return t=si.getUint32(Qe),Qe+=4,sy(t);case 202:if(t=si.getFloat32(Qe),Eo.useFloat32>2){let r=qW[(jt[Qe]&127)<<1|jt[Qe+1]>>7];return Qe+=4,(r*t+(t>0?.5:-.5)>>0)/r}return Qe+=4,t;case 203:return t=si.getFloat64(Qe),Qe+=8,t;case 204:return jt[Qe++];case 205:return t=si.getUint16(Qe),Qe+=2,t;case 206:return t=si.getUint32(Qe),Qe+=4,t;case 207:return Eo.int64AsNumber?(t=si.getUint32(Qe)*4294967296,t+=si.getUint32(Qe+4)):t=si.getBigUint64(Qe),Qe+=8,t;case 208:return si.getInt8(Qe++);case 209:return t=si.getInt16(Qe),Qe+=2,t;case 210:return t=si.getInt32(Qe),Qe+=4,t;case 211:return Eo.int64AsNumber?(t=si.getInt32(Qe)*4294967296,t+=si.getUint32(Qe+4)):t=si.getBigInt64(Qe),Qe+=8,t;case 212:if(t=jt[Qe++],t==114)return lZ(jt[Qe++]&63);{let r=co[t];if(r)return r.read?(Qe++,r.read(Ki())):r.noBuffer?(Qe++,r()):r(jt.subarray(Qe,++Qe));throw new Error("Unknown extension "+t)}case 213:return t=jt[Qe],t==114?(Qe++,lZ(jt[Qe++]&63,jt[Qe++])):sy(2);case 214:return sy(4);case 215:return sy(8);case 216:return sy(16);case 217:return t=jt[Qe++],dp>=Qe?ev.slice(Qe-Is,(Qe+=t)-Is):Rlt(t);case 218:return t=si.getUint16(Qe),Qe+=2,dp>=Qe?ev.slice(Qe-Is,(Qe+=t)-Is):Dlt(t);case 219:return t=si.getUint32(Qe),Qe+=4,dp>=Qe?ev.slice(Qe-Is,(Qe+=t)-Is):Ilt(t);case 220:return t=si.getUint16(Qe),Qe+=2,aZ(t);case 221:return t=si.getUint32(Qe),Qe+=4,aZ(t);case 222:return t=si.getUint16(Qe),Qe+=2,oZ(t);case 223:return t=si.getUint32(Qe),Qe+=4,oZ(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var Olt=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function VW(e,t){function r(){if(r.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(a=>Olt.test(a)?a+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}}")(Ki);return e.highByte===0&&(e.read=nZ(t,e.read)),n()}let i={};for(let n=0,a=e.length;n<a;n++){let o=e[n];i[o]=Ki()}return i}return r.count=0,e.highByte===0?nZ(t,r):r}var nZ=(e,t)=>function(){let r=jt[Qe++];if(r===0)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=ei[i]||Owe()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=VW(n,e)),n.read()};function Owe(){let e=zwe(()=>(jt=null,Eo.getStructures()));return ei=Eo._mergeStructures(e,ei)}var b6=cI,Rlt=cI,Dlt=cI,Ilt=cI;function cI(e){let t;if(e<16&&(t=kW(e)))return t;if(e>64&&y6)return y6.decode(jt.subarray(Qe,Qe+=e));let r=Qe+e,i=[];for(t="";Qe<r;){let n=jt[Qe++];if((n&128)===0)i.push(n);else if((n&224)===192){let a=jt[Qe++]&63;i.push((n&31)<<6|a)}else if((n&240)===224){let a=jt[Qe++]&63,o=jt[Qe++]&63;i.push((n&31)<<12|a<<6|o)}else if((n&248)===240){let a=jt[Qe++]&63,o=jt[Qe++]&63,s=jt[Qe++]&63,l=(n&7)<<18|a<<12|o<<6|s;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(n);i.length>=4096&&(t+=$n.apply(String,i),i.length=0)}return i.length>0&&(t+=$n.apply(String,i)),t}function aZ(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=Ki();return t}function oZ(e){if(Eo.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[Dwe()]=Ki();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(Ki(),Ki());return t}}var $n=String.fromCharCode;function Rwe(e){let t=Qe,r=new Array(e);for(let i=0;i<e;i++){let n=jt[Qe++];if((n&128)>0){Qe=t;return}r[i]=n}return $n.apply(String,r)}function kW(e){if(e<4)if(e<2){if(e===0)return"";{let t=jt[Qe++];if((t&128)>1){Qe-=1;return}return $n(t)}}else{let t=jt[Qe++],r=jt[Qe++];if((t&128)>0||(r&128)>0){Qe-=2;return}if(e<3)return $n(t,r);let i=jt[Qe++];if((i&128)>0){Qe-=3;return}return $n(t,r,i)}else{let t=jt[Qe++],r=jt[Qe++],i=jt[Qe++],n=jt[Qe++];if((t&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){Qe-=4;return}if(e<6){if(e===4)return $n(t,r,i,n);{let a=jt[Qe++];if((a&128)>0){Qe-=5;return}return $n(t,r,i,n,a)}}else if(e<8){let a=jt[Qe++],o=jt[Qe++];if((a&128)>0||(o&128)>0){Qe-=6;return}if(e<7)return $n(t,r,i,n,a,o);let s=jt[Qe++];if((s&128)>0){Qe-=7;return}return $n(t,r,i,n,a,o,s)}else{let a=jt[Qe++],o=jt[Qe++],s=jt[Qe++],l=jt[Qe++];if((a&128)>0||(o&128)>0||(s&128)>0||(l&128)>0){Qe-=8;return}if(e<10){if(e===8)return $n(t,r,i,n,a,o,s,l);{let u=jt[Qe++];if((u&128)>0){Qe-=9;return}return $n(t,r,i,n,a,o,s,l,u)}}else if(e<12){let u=jt[Qe++],c=jt[Qe++];if((u&128)>0||(c&128)>0){Qe-=10;return}if(e<11)return $n(t,r,i,n,a,o,s,l,u,c);let d=jt[Qe++];if((d&128)>0){Qe-=11;return}return $n(t,r,i,n,a,o,s,l,u,c,d)}else{let u=jt[Qe++],c=jt[Qe++],d=jt[Qe++],h=jt[Qe++];if((u&128)>0||(c&128)>0||(d&128)>0||(h&128)>0){Qe-=12;return}if(e<14){if(e===12)return $n(t,r,i,n,a,o,s,l,u,c,d,h);{let f=jt[Qe++];if((f&128)>0){Qe-=13;return}return $n(t,r,i,n,a,o,s,l,u,c,d,h,f)}}else{let f=jt[Qe++],g=jt[Qe++];if((f&128)>0||(g&128)>0){Qe-=14;return}if(e<15)return $n(t,r,i,n,a,o,s,l,u,c,d,h,f,g);let p=jt[Qe++];if((p&128)>0){Qe-=15;return}return $n(t,r,i,n,a,o,s,l,u,c,d,h,f,g,p)}}}}}function Zz(e){return Eo.copyBuffers?Uint8Array.prototype.slice.call(jt,Qe,Qe+=e):jt.subarray(Qe,Qe+=e)}function sy(e){let t=jt[Qe++];if(co[t])return co[t](jt.subarray(Qe,Qe+=e));throw new Error("Unknown extension type "+t)}var sZ=new Array(4096);function Dwe(){let e=jt[Qe++];if(e>=160&&e<192){if(e=e-160,dp>=Qe)return ev.slice(Qe-Is,(Qe+=e)-Is);if(!(dp==0&&dv<180))return b6(e)}else return Qe--,Ki();let t=(e<<5^(e>1?si.getUint16(Qe):e>0?jt[Qe]:0))&4095,r=sZ[t],i=Qe,n=Qe+e-3,a,o=0;if(r&&r.bytes==e){for(;i<n;){if(a=si.getUint32(i),a!=r[o++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(a=jt[i++],a!=r[o++]){i=1879048192;break}if(i===n)return Qe=i,r.string;n-=3,i=Qe}for(r=[],sZ[t]=r,r.bytes=e;i<n;)a=si.getUint32(i),r.push(a),i+=4;for(n+=3;i<n;)a=jt[i++],r.push(a);let s=e<16?kW(e):Rwe(e);return s!=null?r.string=s:r.string=b6(e)}var lZ=(e,t)=>{var r=Ki();let i=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=ei[e];return n&&n.isShared&&((ei.restoreStructures||(ei.restoreStructures=[]))[e]=n),ei[e]=r,r.read=VW(r,i),r.read()},Iwe=typeof self=="object"?self:global;co[0]=()=>{};co[0].noBuffer=!0;co[101]=()=>{let e=Ki();return(Iwe[e[0]]||Error)(e[1])};co[105]=e=>{let t=si.getUint32(Qe-4);Fm||(Fm=new Map);let r=jt[Qe],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};Fm.set(t,n);let a=Ki();return n.used?Object.assign(i,a):(n.target=a,a)};co[112]=e=>{let t=si.getUint32(Qe-4),r=Fm.get(t);return r.used=!0,r.target};co[115]=()=>new Set(Ki());var jwe=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");co[116]=e=>{let t=e[0],r=jwe[t];if(!r)throw new Error("Could not find typed array for code "+t);return new Iwe[r](Uint8Array.prototype.slice.call(e,1).buffer)};co[120]=()=>{let e=Ki();return new RegExp(e[0],e[1])};co[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=Qe;Qe+=t-4,Jo=[Ki(),Ki()],Jo.position0=0,Jo.position1=0;let i=Qe;Qe=r;try{return Ki()}finally{Qe=i}};co[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function zwe(e){let t=dv,r=Qe,i=Is,n=dp,a=ev,o=Fm,s=Jo,l=new Uint8Array(jt.slice(0,dv)),u=ei,c=ei.slice(0,ei.length),d=Eo,h=X_,f=e();return dv=t,Qe=r,Is=i,dp=n,ev=a,Fm=o,Jo=s,jt=l,X_=h,ei=u,ei.splice(0,ei.length,...c),Eo=d,si=new DataView(jt.buffer,jt.byteOffset,jt.byteLength),f}function _6(){jt=null,Fm=null,ei=null}function jlt(e){e.unpack?co[e.type]=e.unpack:co[e.type]=e}var qW=new Array(147);for(let e=0;e<256;e++)qW[e]=+("1e"+Math.floor(45.15-e*.30103));var dI=new TD({useRecords:!1});dI.unpack;dI.unpackMultiple;dI.unpack;var zlt=new Float32Array(1);new Uint8Array(zlt.buffer,0,4);var cR;try{cR=new TextEncoder}catch{}var AD,WW,hI=typeof Buffer<"u",eB=hI?Buffer.allocUnsafeSlow:Uint8Array,Bwe=hI?Buffer:Uint8Array,uZ=hI?4294967296:2144337920,ct,an,it=0,Wf,Gf=null,Blt=/[\u0080-\uFFFF]/,qx=Symbol("record-id"),Lwe=class extends TD{constructor(e){super(e),this.offset=0;let t,r,i,n,a,o=0,s=Bwe.prototype.utf8Write?function(C,T,M){return ct.utf8Write(C,T,M)}:cR&&cR.encodeInto?function(C,T){return cR.encodeInto(C,ct.subarray(T)).written}:!1,l=this;e||(e={});let u=e&&e.sequential,c=e.structures||e.saveStructures,d=e.maxSharedStructures;if(d==null&&(d=c?32:0),d>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=e.maxOwnStructures;h==null&&(h=c?32:64),u&&!e.saveStructures&&(this.structures=[]);let f=d>32||h+d>64,g=d+64,p=d+h+64;if(p>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let m=[],y=0,b=0;this.pack=this.encode=function(C,T){if(ct||(ct=new eB(8192),an=new DataView(ct.buffer,0,8192),it=0),Wf=ct.length-10,Wf-it<2048?(ct=new eB(ct.length),an=new DataView(ct.buffer,0,ct.length),Wf=ct.length-10,it=0):it=it+7&2147483640,t=it,a=l.structuredClone?new Map:null,l.bundleStrings?(Gf=["",""],ct[it++]=214,ct[it++]=98,Gf.position=it-t,it+=4):Gf=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let M=r.sharedLength||0;if(M>d)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let A=0;A<M;A++){let P=r[A];if(!P)continue;let O,j=r.transitions;for(let D=0,I=P.length;D<I;D++){let q=P[D];O=j[q],O||(O=j[q]=Object.create(null)),j=O}j[qx]=A+64}o=M}u||(r.nextId=M+64)}i&&(i=!1),n=r||[];try{if(w(C),Gf){an.setUint32(Gf.position+t,it-Gf.position-t);let M=Gf;Gf=null,w(M[0]),w(M[1])}if(l.offset=it,a&&a.idsToInsert){it+=a.idsToInsert.length*6,it>Wf&&S(it),l.offset=it;let M=Flt(ct.subarray(t,it),a.idsToInsert);return a=null,M}return T&Nlt?(ct.start=t,ct.end=it,ct):ct.subarray(t,it)}finally{if(r){if(b<10&&b++,y>1e4)r.transitions=null,b=0,y=0,m.length>0&&(m=[]);else if(m.length>0&&!u){for(let M=0,A=m.length;M<A;M++)m[M][qx]=0;m=[]}if(i&&l.saveStructures){let M=r.sharedLength||d;r.length>M&&(r=r.slice(0,M));let A=ct.subarray(t,it);return l.saveStructures(r,o)===!1?(l._mergeStructures(l.getStructures()),l.pack(C)):(o=M,A)}}T&Ult&&(it=t)}};let w=C=>{it>Wf&&(ct=S(it));var T=typeof C,M;if(T==="string"){let A=C.length;if(Gf&&A>=8&&A<4096){let j=Blt.test(C);Gf[j?0:1]+=C,ct[it++]=193,w(j?-A:A);return}let P;A<32?P=1:A<256?P=2:A<65536?P=3:P=5;let O=A*3;if(it+O>Wf&&(ct=S(it+O)),A<64||!s){let j,D,I,q=it+P;for(j=0;j<A;j++)D=C.charCodeAt(j),D<128?ct[q++]=D:D<2048?(ct[q++]=D>>6|192,ct[q++]=D&63|128):(D&64512)===55296&&((I=C.charCodeAt(j+1))&64512)===56320?(D=65536+((D&1023)<<10)+(I&1023),j++,ct[q++]=D>>18|240,ct[q++]=D>>12&63|128,ct[q++]=D>>6&63|128,ct[q++]=D&63|128):(ct[q++]=D>>12|224,ct[q++]=D>>6&63|128,ct[q++]=D&63|128);M=q-it-P}else M=s(C,it+P,O);M<32?ct[it++]=160|M:M<256?(P<2&&ct.copyWithin(it+2,it+1,it+1+M),ct[it++]=217,ct[it++]=M):M<65536?(P<3&&ct.copyWithin(it+3,it+2,it+2+M),ct[it++]=218,ct[it++]=M>>8,ct[it++]=M&255):(P<5&&ct.copyWithin(it+5,it+3,it+3+M),ct[it++]=219,an.setUint32(it,M),it+=4),it+=M}else if(T==="number")if(C>>>0===C)C<64?ct[it++]=C:C<256?(ct[it++]=204,ct[it++]=C):C<65536?(ct[it++]=205,ct[it++]=C>>8,ct[it++]=C&255):(ct[it++]=206,an.setUint32(it,C),it+=4);else if(C>>0===C)C>=-32?ct[it++]=256+C:C>=-128?(ct[it++]=208,ct[it++]=C+256):C>=-32768?(ct[it++]=209,an.setInt16(it,C),it+=2):(ct[it++]=210,an.setInt32(it,C),it+=4);else{let A;if((A=this.useFloat32)>0&&C<4294967296&&C>=-2147483648){ct[it++]=202,an.setFloat32(it,C);let P;if(A<4||(P=C*qW[(ct[it]&127)<<1|ct[it+1]>>7])>>0===P){it+=4;return}else it--}ct[it++]=203,an.setFloat64(it,C),it+=8}else if(T==="object")if(!C)ct[it++]=192;else{if(a){let P=a.get(C);if(P){if(!P.id){let O=a.idsToInsert||(a.idsToInsert=[]);P.id=O.push(P)}ct[it++]=214,ct[it++]=112,an.setUint32(it,P.id),it+=4;return}else a.set(C,{offset:it-t})}let A=C.constructor;if(A===Object)x(C,!0);else if(A===Array){M=C.length,M<16?ct[it++]=144|M:M<65536?(ct[it++]=220,ct[it++]=M>>8,ct[it++]=M&255):(ct[it++]=221,an.setUint32(it,M),it+=4);for(let P=0;P<M;P++)w(C[P])}else if(A===Map){M=C.size,M<16?ct[it++]=128|M:M<65536?(ct[it++]=222,ct[it++]=M>>8,ct[it++]=M&255):(ct[it++]=223,an.setUint32(it,M),it+=4);for(let[P,O]of C)w(P),w(O)}else{for(let P=0,O=AD.length;P<O;P++){let j=WW[P];if(C instanceof j){let D=AD[P];if(D.write){D.type&&(ct[it++]=212,ct[it++]=D.type,ct[it++]=0),w(D.write.call(this,C));return}let I=ct,q=an,$=it;ct=null;let X;try{X=D.pack.call(this,C,N=>(ct=I,I=null,it+=N,it>Wf&&S(it),{target:ct,targetView:an,position:it-N}),w)}finally{I&&(ct=I,an=q,it=$,Wf=ct.length-10)}X&&(X.length+it>Wf&&S(X.length+it),it=Llt(X,ct,it,D.type));return}}x(C,!C.hasOwnProperty)}}else if(T==="boolean")ct[it++]=C?195:194;else if(T==="bigint"){if(C<BigInt(1)<<BigInt(63)&&C>=-(BigInt(1)<<BigInt(63)))ct[it++]=211,an.setBigInt64(it,C);else if(C<BigInt(1)<<BigInt(64)&&C>0)ct[it++]=207,an.setBigUint64(it,C);else if(this.largeBigIntToFloat)ct[it++]=203,an.setFloat64(it,Number(C));else throw new RangeError(C+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");it+=8}else if(T==="undefined")this.encodeUndefinedAsNil?ct[it++]=192:(ct[it++]=212,ct[it++]=0,ct[it++]=0);else if(T==="function")w(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+T)},x=this.useRecords===!1?this.variableMapSize?C=>{let T=Object.keys(C),M=T.length;M<16?ct[it++]=128|M:M<65536?(ct[it++]=222,ct[it++]=M>>8,ct[it++]=M&255):(ct[it++]=223,an.setUint32(it,M),it+=4);let A;for(let P=0;P<M;P++)w(A=T[P]),w(C[A])}:(C,T)=>{ct[it++]=222;let M=it-t;it+=2;let A=0;for(let P in C)(T||C.hasOwnProperty(P))&&(w(P),w(C[P]),A++);ct[M+++t]=A>>8,ct[M+t]=A&255}:C=>{let T=Object.keys(C),M,A=n.transitions||(n.transitions=Object.create(null)),P=0;for(let j=0,D=T.length;j<D;j++){let I=T[j];M=A[I],M||(M=A[I]=Object.create(null),P++),A=M}let O=A[qx];if(O)O>=96&&f?(ct[it++]=((O-=96)&31)+96,ct[it++]=O>>5):ct[it++]=O;else{O=n.nextId,O||(O=64),O<g&&this.shouldShareStructure&&!this.shouldShareStructure(T)?(O=n.nextOwnId,O<p||(O=g),n.nextOwnId=O+1):(O>=p&&(O=g),n.nextId=O+1);let j=T.highByte=O>=96&&f?O-96>>5:-1;A[qx]=O,n[O-64]=T,O<g?(T.isShared=!0,n.sharedLength=O-63,i=!0,j>=0?(ct[it++]=(O&31)+96,ct[it++]=j):ct[it++]=O):(j>=0?(ct[it++]=213,ct[it++]=114,ct[it++]=(O&31)+96,ct[it++]=j):(ct[it++]=212,ct[it++]=114,ct[it++]=O),P&&(y+=b*P),m.length>=h&&(m.shift()[qx]=0),m.push(A),w(T))}for(let j=0,D=T.length;j<D;j++)w(C[T[j]])},S=C=>{let T;if(C>16777216){if(C-t>uZ)throw new Error("Packed buffer would be larger than maximum buffer size");T=Math.min(uZ,Math.round(Math.max((C-t)*(C>67108864?1.25:2),4194304)/4096)*4096)}else T=(Math.max(C-t<<2,ct.length-1)>>12)+1<<12;let M=new eB(T);return an=new DataView(M.buffer,0,T),ct.copy?ct.copy(M,0,t,C):M.set(ct.slice(t,C)),it-=t,t=0,Wf=M.length-10,ct=M}}useBuffer(e){ct=e,an=new DataView(ct.buffer,ct.byteOffset,ct.byteLength),it=0}};WW=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Twe];AD=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:a,position:o}=t(6);n[o++]=214,n[o++]=255,a.setUint32(o,i)}else if(i>0&&i<17179869184){let{target:n,targetView:a,position:o}=t(10);n[o++]=215,n[o++]=255,a.setUint32(o,e.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),a.setUint32(o+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:n,targetView:a,position:o}=t(3);n[o++]=212,n[o++]=255,n[o++]=255}else{let{target:n,targetView:a,position:o}=t(15);n[o++]=199,n[o++]=12,n[o++]=255,a.setUint32(o,e.getMilliseconds()*1e6),a.setBigInt64(o+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){let i=Array.from(e),{target:n,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(n[a++]=212,n[a++]=115,n[a++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?cZ(e,16,t):dZ(hI?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==Bwe&&this.structuredClone?cZ(e,jwe.indexOf(r.name),t):dZ(e,t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];function cZ(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:a,position:o}=r(4+n);a[o++]=199,a[o++]=n+1}else if(n+1<65536){var{target:a,position:o}=r(5+n);a[o++]=200,a[o++]=n+1>>8,a[o++]=n+1&255}else{var{target:a,position:o,targetView:s}=r(7+n);a[o++]=201,s.setUint32(o,n+1),o+=4}a[o++]=116,a[o++]=t,a.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function dZ(e,t){let r=e.byteLength;var i,n;if(r<256){var{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:a}=t(r+5);i[n++]=198,a.setUint32(n,r),n+=4}i.set(e,n)}function Llt(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):n<65536?(t[r++]=200,t[r++]=n>>8,t[r++]=n&255):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255,t[r++]=n&255)}return t[r++]=i,t.set(e,r),r+=n,r}function Flt(e,t){let r,i=t.length*6,n=e.length-i;for(t.sort((a,o)=>a.offset>o.offset?1:-1);r=t.pop();){let a=r.offset,o=r.id;e.copyWithin(a+i,a,n),i-=6;let s=a+i;e[s++]=214,e[s++]=105,e[s++]=o>>24,e[s++]=o>>16&255,e[s++]=o>>8&255,e[s++]=o&255,n=a}return e}function Ow(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");WW.unshift(e.Class),AD.unshift(e)}jlt(e)}var Fwe=new Lwe({useRecords:!1});Fwe.pack;Fwe.pack;var Nlt=512,Ult=1024,hZ=new Lwe({structuredClone:!0});Ow({Class:Zt.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Zt.prototype),e}});Ow({Class:Ht.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Ht.prototype),e}});Ow({Class:ya.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,ya.prototype),e}});Ow({Class:eZ.prototype.constructor,type:4,write(e){return e.id},read(e){return new eZ(e)}});Ow({Class:tZ.prototype.constructor,type:5,write(e){return e.data},read(e){return new tZ(e)}});Ow({Class:En.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,En.prototype),e}});function Vlt(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let i=e[r];t=(t<<5)-t+i,t=t&t}return t}function w6(e){if(BW(e))return e;if(Array.isArray(e))return e.map(w6);if(typeof e=="object"&&e!==null){let t={};for(let r of Object.keys(e).sort())t[r]=w6(e[r]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var x6;(e=>{function t(n){return hZ.pack(n)}e.serialize=t;function r(n){return hZ.unpack(n)}e.deserialize=r;function i(n){return Vlt(t(w6(n))).toString()}e.checksum=i})(x6||(x6={}));var fZ;(e=>{function t(i){return i.type==="Conditional"?i.condition.type==="Distance"?"Distance":"StateChange":i.type}e.toEventUIType=t;function r(i){return i==="Distance"||i==="StateChange"?"Conditional":i}e.fromEventUIType=r})(fZ||(fZ={}));function pZ(e){return e==="MouseDown"||e==="MouseUp"||e==="KeyDown"||e==="KeyUp"||e==="Collision"||e==="Trigger"}var Aa={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],API:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],WEBHOOK:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],AIAssistantListener:["SetVariable"],AIAssistantTrigger:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"]},mZ;(e=>{function t(i){return i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"}e.is=t;function r(i){return i==="MouseDown"||i==="MouseUp"||i==="MousePress"?{type:i,mode:"Object",disabled:!1,actions:new Ht}:{type:i,disabled:!1,key:void 0,actions:new Ht}}e.defaultData=r})(mZ||(mZ={}));var OD;(e=>{function t(r){return{type:"Property",value:[r??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(OD||(OD={}));var S6;(e=>{function t(n){return{type:"Comparison",operator:"==",lOperand:OD.propertyDefaultData(n),rOperand:{...OD.valueDefaultData}}}e.comparisonDefaultData=t;function r(n){return{type:"Distance",toObject:n??null,fromObject:n??null,distance:200}}e.distanceDefaultData=r;function i(n,a){return{type:"State",object:n??null,state:a??null}}e.stateDefaultData=i})(S6||(S6={}));var gZ;(e=>{function t(r){return r.find(i=>i==="ifActions"||i==="elseActions")!==void 0}e.isConditionalSubActions=t})(gZ||(gZ={}));var vZ;(e=>{function t(i){return i.type==="Conditional"}e.is=t;function r(i){return{type:"Conditional",disabled:!1,inActions:new Ht,outActions:new Ht,condition:S6.distanceDefaultData(i)}}e.defaultData=r})(vZ||(vZ={}));var yZ;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Ht,drop:new Ht}})(yZ||(yZ={}));var C6;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Ht})(C6||(C6={}));var E6;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(E6||(E6={}));var bZ;(e=>{function t(i){return i.type==="MouseHover"}e.is=t;function r(){return{type:"MouseHover",disabled:!1,actions:new Ht}}e.defaultData=r})(bZ||(bZ={}));var _Z;(e=>{function t(i){return i.type==="Scroll"}e.is=t;function r(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Ht}}e.defaultData=r})(_Z||(_Z={}));var wZ;(e=>{function t(i){return i.type==="Start"}e.is=t;function r(){return{type:"Start",disabled:!1,actions:new Ht}}e.defaultData=r})(wZ||(wZ={}));var xZ;(e=>{function t(i){return i.type==="Collision"}e.is=t;function r(){return{type:"Collision",disabled:!1,target:"character",actions:new Ht}}e.defaultData=r})(xZ||(xZ={}));var SZ;(e=>{function t(i){return i.type==="Trigger"}e.is=t;function r(i,n){return{type:"Trigger",disabled:!1,target:"all",triggeringObjects:[],actions:new Ht,triggerZone:"box",position:n.toArray(),rotation:[0,0,0],size:i.toArray(),radius:i.length()/2,helperVisible:!0}}e.defaultData=r})(SZ||(SZ={}));var M6;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(o){return o.type==="Resize"}e.is=t;function r(o){return typeof o=="string"?o:"custom"}e.sizeToDevice=r;function i(o){return typeof o=="string"?[...e.defaultSizes[o]]:[...o]}e.deviceToSize=i;function n(){let o={size:"mobile",operator:"<",actions:new Ht},s={size:"tablet",operator:"<",actions:new Ht},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new Ht},u=new Ht;return u.push({id:Ot.generateUUID(),fi:0,data:o},{id:Ot.generateUUID(),fi:1,data:s},{id:Ot.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:u}}e.defaultData=n;function a(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Ht}}e.defaultBreakpointData=a})(M6||(M6={}));var P6;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function t(i){return i.type==="VariableChange"}e.is=t;function r(){return{disabled:!1,type:"VariableChange",actions:new Ht,variableId:"",objectId:null,property:"Position X"}}e.defaultData=r})(P6||(P6={}));var CZ;(e=>{function t(i){return i.type==="API"}e.is=t;function r(){return{disabled:!1,type:"API",successActions:new Ht,errorActions:new Ht,userAPIId:""}}e.defaultData=r})(CZ||(CZ={}));var EZ;(e=>{function t(i){return i.type==="WEBHOOK"}e.is=t;function r(){return{disabled:!1,type:"WEBHOOK",actions:new Ht,userWebhookId:""}}e.defaultData=r})(EZ||(EZ={}));var MZ;(e=>{function t(i){return i.type==="AIAssistantListener"}e.is=t;function r(){return{disabled:!1,type:"AIAssistantListener",actions:new Ht,analysis:"average",analysisRange:[0,71],analysisSingle:0}}e.defaultData=r})(MZ||(MZ={}));var PZ;(e=>{function t(i){return i.type==="AIAssistantTrigger"}e.is=t;function r(){return{disabled:!1,description:"",type:"AIAssistantTrigger",actions:new Ht}}e.defaultData=r})(PZ||(PZ={}));var Rw="personal camera",RE="a218fcc3-276b-49b9-b485-49037fd14f5f",klt=2960946,us=5526619,jm;(e=>{function t(g,p){return g[0]===p[0]&&g[1]===p[1]}e.isEqual=t;function r(g,p,m){return[g[0]+(p[0]-g[0])*m,g[1]+(p[1]-g[1])*m]}e.lerp=r;function i(g,p){return[g[0]+p[0],g[1]+p[1]]}e.add=i;function n(g,p){return[g[0]-p[0],g[1]-p[1]]}e.sub=n;function a(g,p){return[g[0]*p[0],g[1]*p[1]]}e.multiply=a;function o(g,p){return[g[0]/p[0],g[1]/p[1]]}e.divide=o;function s(g,p){return Math.pow(p[0]-g[0],2)+Math.pow(p[1]-g[1],2)}e.distanceSquared=s;function l(g,p){return Math.sqrt(s(g,p))}e.distance=l;function u(g,p){return g[0]*p[0]+g[1]*p[1]}e.dot=u;function c(g,p){return[g[0]*p,g[1]*p]}e.scalarMultiply=c;function d(g,p,m){let y=e.sub(p,g),b=e.sub(m,g),w=e.dot(y,b)/e.dot(y,y),x=e.scalarMultiply(y,w);return e.add(g,x)}e.projectionOnto=d;function h(g,p,m){return l(g,d(g,p,m))}e.projectionOntoDistance=h;function f(g,p){return[(g[0]+p[0])*.5,(g[1]+p[1])*.5]}e.center=f})(jm||(jm={}));var J0;(e=>{function t(l,u){return l[0]===u[0]&&l[1]===u[1]&&l[2]===u[2]}e.isEqual=t;function r(l,u){return[l[0]+u[0],l[1]+u[1],l[2]+u[2]]}e.add=r;function i(l,u){return[l[0]-u[0],l[1]-u[1],l[2]-u[2]]}e.sub=i;function n(l,u){return[l[0]/u[0],l[1]/u[1],l[2]/u[2]]}e.div=n;function a(l,u){return[l[0]*u[0],l[1]*u[1],l[2]*u[2]]}e.mul=a;function o(l,u){return Math.hypot(l[0]-u[0],l[1]-u[1],l[2]-u[2])}e.dist=o;function s(l,u,c){return[l[0]+(u[0]-l[0])*c,l[1]+(u[1]-l[1])*c,l[2]+(u[2]-l[2])*c]}e.lerp=s})(J0||(J0={}));var RD;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]}e.isEqual=t;function r(i,n,a){return[i[0]+(n[0]-i[0])*a,i[1]+(n[1]-i[1])*a,i[2]+(n[2]-i[2])*a,i[3]+(n[3]-i[3])*a]}e.lerp=r})(RD||(RD={}));var TZ;(e=>{let t=180/Math.PI,r=Math.PI/180;function i(s){return typeof s=="number"?s*t:s}function n(s){return typeof s=="number"?s*r:s}function a(s){return[i(s[0]),i(s[1]),i(s[2])]}e.radToDeg=a;function o(s){return[n(s[0]),n(s[1]),n(s[2])]}e.degToRad=o})(TZ||(TZ={}));var Y_;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,a){for(let o=0;o<16;o++)if(n[o]!==a[o])return!1;return!0}e.isEqual=t;function r(n){return n??e.identity}e.simplify=r;function i(n,a){let o=a.slice(0);for(var s=0,l=a.length;s<l;s+=3){let u=n[3]*a[s]+n[7]*a[s+1]+n[11]*a[s+2]+n[15];o[s]=(n[0]*a[s]+n[4]*a[s+1]+n[8]*a[s+2]+n[12])/u,o[s+1]=(n[1]*a[s]+n[5]*a[s+1]+n[9]*a[s+2]+n[13])/u,o[s+2]=(n[2]*a[s]+n[6]*a[s+1]+n[10]*a[s+2]+n[14])/u}return o}e.applyMatrix4=i})(Y_||(Y_={}));var ga;(e=>{function t(u){return typeof u=="object"&&typeof u.r=="number"&&typeof u.g=="number"&&typeof u.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function r(u){return{r:Math.round(u.r*255),g:Math.round(u.g*255),b:Math.round(u.b*255),a:1}}e.toRgb255a1=r;function i(u){return{r:u.r,g:u.g,b:u.b}}e.clone=i;function n(u){return u=Math.floor(u),{r:(u>>16&255)/255,g:(u>>8&255)/255,b:(u&255)/255}}e.fromHex=n;function a(u){return Math.round(u.r*255)*65536+Math.round(u.g*255)*256+Math.round(u.b*255)}e.toHex=a;function o(u,c){return u.r===c.r&&u.g===c.g&&u.b===c.b}e.equals=o;function s(u,c){return u.r.toFixed(2)===c.r.toFixed(2)&&u.g.toFixed(2)===c.g.toFixed(2)&&u.b.toFixed(2)===c.b.toFixed(2)}e.equalsFixed=s;function l(u,c,d){return{r:u.r+(c.r-u.r)*d,g:u.g+(c.g-u.g)*d,b:u.b+(c.b-u.b)*d}}e.lerp=l})(ga||(ga={}));var hi;(e=>{e.white={...ga.white,a:1},e.transparent={...ga.white,a:0};function t(l){return{r:l[0],g:l[1],b:l[2],a:l[3]}}e.from0to1=t;function r(l,u){return{...ga.fromHex(l),a:u}}e.fromHexAndA=r;function i(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:l.a}}e.toRgb255a1=i;function n(l,u){return ga.equals(l,u)&&l.a===u.a}e.equals=n;function a(l,u){return ga.equalsFixed(l,u)&&l.a.toFixed(2)===u.a.toFixed(2)}e.equalsFixed=a;function o(l,u,c){return{r:l.r+(u.r-l.r)*c,g:l.g+(u.g-l.g)*c,b:l.b+(u.b-l.b)*c,a:l.a+(u.a-l.a)*c}}e.lerp=o;function s({r:l,g:u,b:c,a:d}=e.white){return`rgba(${l*255}, ${u*255}, ${c*255}, ${d})`}e.toStyle=s})(hi||(hi={}));var T6;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(T6||(T6={}));var AZ;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(AZ||(AZ={}));var OZ;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(OZ||(OZ={}));var Vg;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Vg||(Vg={}));function RZ(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var hb;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(hb||(hb={}));var K_;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){var i,n;return r.type==="PerspectiveCamera"?((i=r.perspective)==null?void 0:i.zoom)??1:((n=r.orthographic)==null?void 0:n.zoom)??1}e.getZoom=t})(K_||(K_={}));var tv;(e=>{function t(i,n=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*n,0,0]},grid:{count:[2,2,2],size:i.map(a=>a*(1+n)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function r(i,n){let a={...i};if(Nwe.forEach(o=>{Object.assign(a,{[o]:n[o]??i[o]})}),a.radial={...i.radial},n.radial){let o=i.radial,s=n.radial;Uwe.forEach(l=>{Object.assign(a.radial,{[l]:s[l]??o[l]})})}if(a.linear={...i.linear},n.linear){let o=i.linear,s=n.linear;Vwe.forEach(l=>{Object.assign(a.linear,{[l]:s[l]??o[l]})})}if(a.grid={...i.grid},n.grid){let o=i.grid,s=n.grid;kwe.forEach(l=>{Object.assign(a.grid,{[l]:s[l]??o[l]})})}if(a.toObject={...i.toObject},n.toObject){let o=i.toObject,s=n.toObject;qwe.forEach(l=>{Object.assign(a.toObject,{[l]:s[l]??o[l]})})}if(a.randomnessObject={...i.randomnessObject},n.randomnessObject){let o=i.randomnessObject,s=n.randomnessObject;Wwe.forEach(l=>{Object.assign(a.randomnessObject,{[l]:s[l]??o[l]})})}return a}e.merge=r})(tv||(tv={}));var A6;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function r(i,n){let a=[];i.count!==void 0&&a.push({type:0,path:n,props:{count:i.count}});for(let o of t){let s=i[o];s&&Object.keys(s).length>0&&a.push({type:0,path:[...n,o],props:s})}return a}e.toOps=r})(A6||(A6={}));var Nwe=["count"],Uwe=["radius","start","end","position","scale","rotation"],Vwe=["position","scale","rotation"],kwe=["count","size"],qwe=["count","position","scale","rotation"],Wwe=["strength","scale","rotation","position","movement","seed","freqScale"],O6;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(O6||(O6={}));var R6;(e=>{function t(i){return r(i)}e.defaultData=t;function r(i){if(i==="PointLight")return{type:i,color:hi.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(i==="SpotLight")return{type:i,color:hi.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:hi.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(R6||(R6={}));var DD;(e=>(e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeDuration:1,...e.defaultCollisionData}))(DD||(DD={}));var Q_;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Q_||(Q_={}));var D6;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,i){return r.castShadow===i.castShadow&&r.receiveShadow===i.receiveShadow}e.equals=t})(D6||(D6={}));var I6;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,i){return r.flatShading===i.flatShading&&r.side===i.side&&r.wireframe===i.wireframe}e.equals=t})(I6||(I6={}));var j6;(e=>e.defaultData={...I6.defaultData,...D6.defaultData})(j6||(j6={}));var DZ;(e=>{function t(r,i){var a,o;let n=[];if("material"in r){let s=typeof r.material=="string"?i.materials[r.material]??((a=i.lib.materials[r.material])==null?void 0:a.asset):r.material;s&&n.push(s)}else if("materials"in r)for(let s of r.materials){let l=typeof s=="string"?i.materials[s]??((o=i.lib.materials[s])==null?void 0:o.asset):s;l&&n.push(l)}return n}e.getMaterialData=t})(DZ||(DZ={}));var ID;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(ID||(ID={}));var IZ;(e=>{function t(r){return r==="texture"||r==="video"||r==="color"||r==="depth"||r==="normal"||r==="gradient"||r==="noise"||r==="fresnel"||r==="rainbow"||r==="toon"||r==="outline"||r==="particle"||r==="transmission"||r==="matcap"||r==="displace"||r==="pattern"||r==="light"}e.is=t})(IZ||(IZ={}));function qlt(e){return e.type!=="displace"}var jZ;(e=>{function t(r){return r==="phong"||r==="toon"||r==="lambert"||r==="physical"}e.is=t})(jZ||(jZ={}));var Gwe=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Wlt=["wrapping","image","video","name","minFilter","magFilter"],Yn;(e=>{function t(a,o){let{texture:s,...l}=o;if(Object.assign(a,l),s){let u=a.texture;u&&Object.assign(u,s)}}e.patch=t;function r(a,o){return a==="light"&&o?i(o):n(a)}e.defaultData=r;function i(a){let o={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(a){case"phong":return{...o,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...o,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...o,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...o,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function n(a){let o={alpha:1,mode:0,isMask:!1,visible:!0};switch(a){case"texture":return{...o,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"video":return{...o,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:ID.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"color":return{...o,type:"color",color:ga.fromHex(us)};case"depth":return{...o,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...o,type:"normal",cnormal:[1,1,1]};case"gradient":return{...o,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...o,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...ga.fromHex(6710886),a:1},colorB:{...ga.fromHex(6710886),a:1},colorC:{...ga.fromHex(16777215),a:1},colorD:{...ga.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...o,type:"fresnel",color:hi.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...o,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...o,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:hi.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...o,type:"outline",outlineColor:hi.fromHexAndA(0,1),contourColor:hi.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...o,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006}};case"transmission":return{...o,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...o,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...ga.fromHex(0),a:1},colorB:{...ga.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(Yn||(Yn={}));var Zn;(e=>{function t(c){return!c.layers.some(d=>d.data.type==="texture"&&d.data.projection!==0||d.data.type==="depth"&&!d.data.isWorldSpace||d.data.type==="noise"||d.data.type==="displace")}e.isMergable=t;function r(c){let d="";return c.layers.forEach(h=>{Object.entries(h.data).forEach(([f,g])=>{d+=`${f}${g}`,Array.isArray(g)?g.forEach(p=>d+=`${p}`):typeof g=="object"?Object.values(g).forEach(p=>{typeof p=="number"?d+=`${p.toFixed(4)}`:d+=`${p}`}):d+=`${g}`})}),d}e.getHash=r;function i(){return{layers:new Ht}}e.defaultEmptyData=i;function n(c="layer1",d="layer2"){return o("phong",c,d)}e.defaultData=n;function a(c,d){return{...c,name:d}}e.withName=a;function o(c,d="layer1",h="layer2"){let f=new Ht;return f.push({fi:0,data:Yn.defaultData("light",c),id:d}),f.push({fi:1,data:Yn.defaultData("color"),id:h}),{layers:f}}e.defaultTwoLayerData=o;function s(c){let d=Yn.defaultData("texture");c&&Object.assign(d.texture,{image:c});let h=new Ht;return h.push({fi:0,data:d,id:"layer1"}),h.push({fi:1,data:{...Yn.defaultData("transmission"),alpha:1},id:"layer2"}),h.push({fi:2,data:{...Yn.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:h}}e.defaultUIObjectMaterial=s;function l(c,d="phong",h="layer1",f="layer2"){let g=Yn.defaultData("texture");Object.assign(g.texture,{image:c});let p=new Ht;return p.push({fi:0,data:g,id:h}),p.push({fi:1,data:Yn.defaultData("light",d),id:f}),{layers:p}}e.defaultTwoLayerTextureData=l;function u(c,d="phong",h="layer1",f="layer2"){let g=Yn.defaultData("video");Object.assign(g.texture,{video:c});let p=new Ht;return p.push({fi:0,data:g,id:h}),p.push({fi:1,data:Yn.defaultData("light",d),id:f}),{layers:p}}e.defaultTwoLayerVideoTextureData=u})(Zn||(Zn={}));var jD;(e=>{function t(){return{points:new Ht,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(jD||(jD={}));var zD;(e=>{function t(){return{points:new Ht,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(zD||(zD={}));var Hwe={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},z6;(e=>{function t(r,i){let n={...r};return Xwe.forEach(a=>{Object.assign(n,{[a]:i[a]??r[a]})}),n}e.merge=t})(z6||(z6={}));var $we={shape:Hwe,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},Xwe=["depth","offset","angle","twist","startScale","endScale"],BD;(e=>{function t(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="UIGeometry"}e.is2DParametricMesh=t;function r(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"||i==="InputGeometry"}e.isParametricMesh=r})(BD||(BD={}));var B6;(e=>{function t(r,i){let n={...r};return Object.assign(n,i),n.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(n.extrusion={...r.extrusion},Object.assign(n.extrusion,z6.merge(n.extrusion,i.extrusion))),n}e.merge=t})(B6||(B6={}));var Hg;(e=>{function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="UIGeometry")return{type:r,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if(r==="PathGeometry")return{type:r,width:1,height:1,depth:1,path:zD.defaultData(),extrusion:$we};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:jD.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};if(r==="ShapeBlendGeometry")return{type:r,width:0,height:0,depth:0,resolutionLevel:6,blendRange:100,useChildrenColors:!1};if(r==="TextGeometry")return{type:r,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",editable:!1,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="InputGeometry")return{...e.defaultData("TextGeometry"),type:r,editable:!0};if(r==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=t})(Hg||(Hg={}));var tB=["width","height","depth"],L6;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:ga.white,near:.1,far:2e3})(L6||(L6={}));var LD;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focusDistance:100,focalLength:20,bokehScale:5},noise:{...t,blendFunction:16}}})(LD||(LD={}));var F6;(e=>e.defaultData={softShadowQuality:"low"})(F6||(F6={}));var N6;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(N6||(N6={}));var U6;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(U6||(U6={}));var J_;(e=>e.defaultData={usePhysics:!1,gravity:-10})(J_||(J_={}));var V6;(e=>e.defaultData={playCamera:Rw,gameControlObject:null})(V6||(V6={}));var k6;(e=>e.defaultData={backgroundColor:hi.fromHexAndA(klt,1),postprocessing:LD.defaultData,fog:L6.defaultData,globalPhysics:J_.defaultData,ambient:N6.defaultData,ao:U6.defaultData,shadow:F6.defaultData,publish:V6.defaultData})(k6||(k6={}));var q6;(e=>e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95})(q6||(q6={}));var zZ;(e=>{function t(i){return i==="Component"||i==="Instance"}e.isComponentRelated=t;function r(i){return i==="Empty"||i==="Instance"}e.isEmptyOrComponent=r})(zZ||(zZ={}));var Z_;(e=>{e.identity={...T6.identity,hiddenMatrix:Y_.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function r(n,a){return{position:(a==null?void 0:a.position)||n.position,rotation:(a==null?void 0:a.rotation)||n.rotation,scale:(a==null?void 0:a.scale)||n.scale,hiddenMatrix:(a==null?void 0:a.hiddenMatrix)||n.hiddenMatrix}}e.merge=r;function i(n,a){return cwe({position:J0.isEqual(n.position,a.position)?void 0:a.position,rotation:J0.isEqual(n.rotation,a.rotation)?void 0:a.rotation,scale:J0.isEqual(n.scale,a.scale)?null:a.scale,hiddenMatrix:Y_.isEqual(n.hiddenMatrix,a.hiddenMatrix)?void 0:a.hiddenMatrix})}e.diff=i})(Z_||(Z_={}));var Fn;(e=>e.defaultData={states:new Ht,events:new Ht,visible:!0,raycastLock:!1,physics:Q_.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...Z_.identity,cloner:null})(Fn||(Fn={}));var W6;(e=>e.defaultData={type:"Empty",...Fn.defaultData})(W6||(W6={}));var BZ;(e=>e.defaultData={type:"ParticleCollider",...q6.defaultData,...Fn.defaultData})(BZ||(BZ={}));var LZ;(e=>e.defaultData={type:"Component",...Fn.defaultData})(LZ||(LZ={}));var FZ;(e=>e.defaultData={type:"Particle",...Fn.defaultData,...DD.defaultData})(FZ||(FZ={}));var $g;(e=>e.defaultData={type:"Mesh",...Fn.defaultData,...j6.defaultData})($g||($g={}));var PM;(e=>e.defaultData={...Fn.defaultData,...Z_.identity,position:[0,0,K_.DefaultTargetOffset],...K_.defaultData})(PM||(PM={}));var G6;(e=>{function t(r){return{...Fn.defaultData,...R6.defaultData(r)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(G6||(G6={}));var FD;(e=>{function t(i,n,a=0){for(;a<n.length;){let o=i?i[n[a]]:void 0;if(n.length===a+1)return o;if(o)i=o.descendants,a+=1;else return}}e.resolveWithDes=t;function r(i,n,a=0){let o=t(i,n,a);if(o){let s=Object.keys(o);if(s.length===1&&s[0]==="descendants")return}return o}e.resolve=r})(FD||(FD={}));var rv;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(i,n){return{...Fn.defaultData,...n,component:i,overrides:new En,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function r(i){let n=Z_.fromObject(i.data);return t(i.id,n)}e.fromComponentData=r})(rv||(rv={}));var ew;(e=>{e.defaultData={type:"Page",...Fn.defaultData,physics:{...Q_.defaultData,fusedBody:!1},...k6.defaultData,camera:PM.defaultData};function t(r){return r.uiScene!==void 0}e.isUIPage=t})(ew||(ew={}));var H6;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Y_.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Q_.defaultData,states:new Ht,events:new Ht,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...K_.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Fn.defaultData,...$g.defaultData,geometry:Hg.defaultData("RectangleGeometry"),material:Zn.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Fn.defaultData,...$g.defaultData,geometry:Hg.defaultData("BooleanGeometry"),material:Zn.defaultTwoLayerData("phong","layer1","layer2")},e.defaultShapeBlendObject={name:"Shape Blend",...Fn.defaultData,...$g.defaultData,geometry:Hg.defaultData("ShapeBlendGeometry"),material:Zn.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Fn.defaultData,...$g.defaultData,geometry:Hg.defaultData("TextGeometry"),material:Zn.defaultTwoLayerData("phong","layer1","layer2")},e.defaultInputObject={name:"Input",...Fn.defaultData,...$g.defaultData,geometry:Hg.defaultData("InputGeometry"),material:Zn.defaultTwoLayerData("phong","layer1","layer2")}))(H6||(H6={}));var L0;(e=>{function t(a,o){let s={name:o};return a.type==="Mesh"?(s.geometry={},"material"in a&&(s.material={layers:new En}),"materials"in a&&(s.materials=a.materials.map(l=>({layers:new En})))):hb.is(a.type)&&(s.perspective={},s.orthographic={}),s}e.newEmpty=t;function r(a,o){if(o===void 0)return a;let s={...a};return"material"in s&&"material"in o&&o.material&&(s.material=MM(s.material,l=>{if(typeof l!="string")for(let[u,c]of Object.entries(o.material.layers)){let d=l.layers.data(u);d&&Yn.patch(d,c)}}).data),s.materials&&o.materials&&(s.materials=MM(s.materials,l=>{var u,c;for(let d=0;d<s.materials.length;d++){let h=o.materials[d];if(typeof h!="string")for(let[f,g]of Object.entries(h.layers)){let p=(c=(u=l[d])==null?void 0:u.layers)==null?void 0:c.data(f);p&&Yn.patch(p,g)}}}).data),s}function i(a,o){let s,l=[],u={orthographic:0,perspective:0,geometry:0};function c(d,h){for(let[f,g]of Object.entries(h.layers)){let{texture:p,...m}=g;if(p!==void 0&&Object.keys(p).length>0){let y={path:[...d,"layers",f,"texture"],props:p,type:0};l.push(y)}if(Object.keys(m).length>0){let y={path:[...d,"layers",f],props:m,type:0};l.push(y)}}}for(let[d,h]of Object.entries(o))if(d!=="name")if(d==="cloner")l.push(...A6.toOps(h,["cloner"]));else if(d==="pathSnapping")l.push({path:[d],props:{slide:h.slide,offset:h.offset},type:0});else if(d==="material")c(["material"],h);else if(d==="materials")for(let[f,g]of Object.entries(h))c(["materials",f],g);else if(u[d]===0){if(d==="geometry"&&h.extrusion!==void 0){let f={path:[d,"extrusion"],props:h.extrusion,type:0};l.push(f),h={...h},delete h.extrusion}if(Object.keys(h).length>0){let f={path:[d],props:h,type:0};l.push(f)}}else s===void 0&&(s={path:[],props:{},type:0},l.push(s)),s.props[d]=h;return l}e.toOps=i;function n(a,o){var l,u,c,d,h,f;if(o===void 0)return a;let s={...a};if(Object.assign(s,Z_.merge(s,o)),Object.assign(s,{pathSnapping:Object.assign({},s.pathSnapping,{slide:((l=o.pathSnapping)==null?void 0:l.slide)??((u=s.pathSnapping)==null?void 0:u.slide)??0,offset:((c=o.pathSnapping)==null?void 0:c.offset)??((d=s.pathSnapping)==null?void 0:d.offset)??0})}),hb.is(a.type)){s.orthographic={...s.orthographic},s.perspective={...s.perspective};let g=o;((h=g.orthographic)==null?void 0:h.zoom)!==void 0&&(s.orthographic.zoom=g.orthographic.zoom),((f=g.perspective)==null?void 0:f.zoom)!==void 0&&(s.perspective.zoom=g.perspective.zoom),g.isUpVectorFlipped!==void 0&&(s.isUpVectorFlipped=g.isUpVectorFlipped),g.targetOffset!==void 0&&(s.targetOffset=g.targetOffset)}else if(a.type==="Mesh")"geometry"in o&&Object.assign(s,{geometry:B6.merge(s.geometry,o.geometry)}),(o.material||o.materials)&&(s=r(s,o)),s.cloner&&"cloner"in o&&Object.assign(s,{cloner:tv.merge(s.cloner,o.cloner)});else if(a.type==="Empty")s.cloner&&"cloner"in o&&Object.assign(s,{cloner:tv.merge(s.cloner,o.cloner)});else if(O6.is(a.type)){let g=o;g.intensity!==void 0&&(s.intensity=g.intensity),g.color!==void 0&&(typeof g.color=="string"?s.color=g.color:s.color=ga.clone(g.color))}return s}e.patch=n})(L0||(L0={}));var ND;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(ND||(ND={}));var iv;(e=>e.defaultData={orbitControls:ND.defaultData,playPage:RE,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,r)=>{let i=0,n=0;return r<5?n=-30:r<10&&(n=30),r===0||r===10||r===5?i=30:(r===4||r===11||r===9)&&(i=-30),[120,[i,n],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1,imageQuality:70}},stopRaycast:!0,hdTransmission:!1})(iv||(iv={}));var $6;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})($6||($6={}));var X6;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(X6||(X6={}));var F0;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...$6.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:X6.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(F0||(F0={}));var TM;(e=>{function t(i){return i.find(n=>n.data.type==="Page"&&n.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function r(i,n,a){i.scene.objects.traverseFrom(n,(o,s)=>{var l;if(s.type==="Instance"){let u=(l=kD.getComponentData(i,s.component))==null?void 0:l.data;u&&a(o,s,u.events)}else a(o,s,s.events)})}e.traverseModuleInstances=r})(TM||(TM={}));var N0;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultLight={fi:-1,data:G6.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]};function t(n=!0,a=[]){let o=[],s=H6.defaultMeshObject;n&&(o.push({...e.defaultLight}),o.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:s,children:[]})),o.push(...a);let l=new ya;return l.push({fi:1,id:RE,data:{...ew.defaultData,name:"Scene 1"},children:o}),l}e.createDefaultObjectTreeWithPage=t,e.defaultData={objects:t(),publish:iv.defaultData,styles:F0.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new ya,publish:iv.defaultData,styles:F0.defaultData()}},e.emptyDataWithPage=function(n=!0){return{objects:t(n),publish:iv.defaultData,styles:F0.defaultData()}},e.emptyData=function(){return{objects:new ya,publish:{...iv.defaultData},styles:F0.defaultData()}};function r(n){return{...e.defaultData,objects:Qs(n,ya.prototype)}}e.withObjs=r;function i(n,a){return r([{id:n,data:a,children:[],fi:0}])}e.withObj=i})(N0||(N0={}));var DE;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(DE||(DE={}));var Y6;(e=>(e.defaultData=t=>({url:t,name:"New Webhook",parametersSchemas:new Ht}),e.defaultParameterValueByType=t=>t==="number"?0:t==="boolean"?!1:""))(Y6||(Y6={}));var NZ;(e=>e.defaultData=(t,r="GET")=>({url:t,method:r,name:"New API",headers:new Ht,queries:new Ht,autoStart:!0}))(NZ||(NZ={}));var ba;(e=>{function t(o){return o.textValue!==void 0}e.isTextValue=t;function r(o){return typeof o=="number"}e.isNumber=r;function i(o){return typeof o=="boolean"}e.isBoolean=i;function n(o){return t(o)?"string":i(o)?"boolean":"number"}e.typeOfVariable=n;function a(o){return e.isTextValue(o)?Array.isArray(o.textValue)?o.textValue.map(s=>s.toString().padStart(o.padding??2,"0")).join(o.deliminator??":")+(o.suffix!==void 0?" "+o.suffix:""):o.textValue.toString():e.isBoolean(o)?o?"True":"False":e.isNumber(o)?parseFloat(o.toFixed(3)).toString():o.toString()}e.getDisplayedValue=a})(ba||(ba={}));var K6;(e=>e.all=["images","videos","colors","audios","particles","fonts","materials","variables"])(K6||(K6={}));var UZ;(e=>e.all=[...K6.all,"components"])(UZ||(UZ={}));var VZ;(e=>{function t(){return{images:new Zt,videos:new Zt,colors:new Zt,audios:new Zt,particles:new Zt,fonts:new Zt,materials:new Zt,components:new Zt,variables:new Zt,userAPIs:new Zt,userWebhooks:new Zt}}e.defaultData=t})(VZ||(VZ={}));var Xm;(e=>{function t(){return{images:new Zt,videos:new Zt,colors:new Zt,audios:new Zt,particles:new Zt,fonts:new Zt,materials:new Zt,components:new Zt,variables:new Zt,userAPIs:new Zt,userWebhooks:new Zt}}e.defaultData=t})(Xm||(Xm={}));var Bs;(e=>{function t(){let o={};return o["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Qs(o,Zt.prototype)}e.defaultColors=t;function r(){return Qs({},Zt.prototype)}e.defaultImages=r;function i(){return{catelogs:new Zt,materials:new Zt,images:new Zt,videos:new Zt,colors:new Zt,audios:new Zt,particles:new Zt,fonts:new Zt,variables:new Ht,userAPIs:new Zt,userWebhooks:new Zt,lib:Xm.defaultData()}}e.emptyData=i;function n(o){switch(o){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let s=[0,0,0];return{name:"Time",value:{textValue:s,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:s,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",o)}}e.defaultVariables=n;function a(o,s){if(s.format==="HH:mm:ss"){let l=Math.floor(o/3600),u=Math.floor((o-l*3600)/60),c=Math.round(o-l*3600-u*60);return{textValue:[l,u,c]}}else if(s.format==="mm:ss"){let l=Math.floor(o/60),u=Math.round(o-l*60);return{textValue:[l,u]}}else return s.format==="number"?o=Math.round(o):o=Math.round(o*1e3)/1e3,o}e.getFormattedTimerTime=a})(Bs||(Bs={}));var UD;(e=>e.list=["idle","move","jump","run"])(UD||(UD={}));var VD;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX",""],["rotPosY",""],["rotNegX",""],["rotNegY",""],["jump","Space"],["run",""],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Ht,move:new Ht,jump:new Ht,run:new Ht},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:hi.fromHexAndA(3728051,1)}}))(VD||(VD={}));function kZ(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let r=t.colorA,i=t.colorB,n=[[r.r,r.g,r.b,r.a],[i.r,i.g,i.b,i.a]],a=[0,1];for(let s=2;s<10;s++)n.push(n[1]),a.push(1);let o={...Ep(un(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:a,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,o)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let r={...un(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,r)}})}function Xg(e,t){Object.values(e.shared.materials).forEach(r=>t(r))}function Yg(e,t){e.scene.objects.traverse((r,i)=>{"materials"in i?i.materials.forEach((n,a)=>{n===void 0&&(i.materials[a]=Zn.defaultData(),n=i.materials[a]),typeof n!="string"&&t(n)}):"material"in i?typeof i.material!="string"&&(i.material===void 0&&(i.material=Zn.defaultData()),t(i.material)):i.type==="Mesh"&&(i.material===void 0&&(i.material=Zn.defaultData()),t(i.material)),"overrides"in i&&Object.values(i.overrides).forEach(n=>{n.material&&typeof n.material!="string"&&Object.getPrototypeOf(n.material)!==En.prototype&&t(n.material)})})}function Glt(e){Object.assign(e.scene.publish,{orbitControls:{...ND.defaultData,...un(e.scene.publish.orbitControls)}})}function Hlt(e){Object.assign(e.scene.publish.settings,{video:{...iv.defaultData.settings.video,...un(e.scene.publish.settings.video)}})}function $lt(e){function t(r){if(r.layers){for(let i of Object.values(r.layers))if(i){for(let[n,a]of Object.entries(i))if((Gwe.includes(n)||typeof a=="boolean")&&delete i[n],n==="texture")for(let[o,s]of Object.entries(a))(Wlt.includes(o)||typeof s=="boolean")&&delete a[o]}}}e.scene.objects.traverse((r,i)=>{i.states.forEach(n=>{let a=n;a.material?t(a.material):a.materials&&a.materials.forEach(o=>{t(o)})})})}function Xlt(e){e.scene.publish.withBackground=!0}function Ylt(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Klt(e){e.scene.objects.traverse((t,r)=>{let i=r.cloner;i&&(i.radial.scale=i.radial.scale.map(n=>n+1),i.linear.scale=i.linear.scale.map(n=>n+1))})}function Qlt(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function Jlt(e){e.scene.objects.traverse((t,r)=>{let i=e.scene.objects.unproxy().parent(t);if(i){let n=un(e.scene.objects.data(i));n&&n.type==="Mesh"&&n.geometry.type==="BooleanGeometry"&&r.type==="Mesh"&&(r.visible=un(r).booleanExclude!==!0)}})}function Zlt(e){e.scene.objects.traverse((t,r)=>{if(r.type==="Mesh"){let i=r;r.geometry.type==="NonParametricGeometry"?i.material!==void 0&&delete i.material:i.materials!==void 0&&delete i.materials}})}function eut(e){function t(i){Object.setPrototypeOf(i,En.prototype),i.texture&&Object.setPrototypeOf(i.texture,En.prototype)}function r(i){Object.setPrototypeOf(i,En.prototype);for(let n in i)t(i[n])}e.scene.objects.traverse((i,n)=>{n.states.forEach(a=>{let o=a;if(o.material){let s=un(o.material).layers;r(s),o.material.layers=s}if(o.materials)for(let s=0;s<o.materials.length;s++){let l=o.materials[s],u=un(l).layers;r(u),l.layers=u}})})}function qZ(e){e.layers===void 0&&Object.assign(e,Zn.defaultTwoLayerData("lambert"))}function rB(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let r=[...t.colors];r.push(t.colors[9]);let i=[...t.steps];i.push(t.steps[9]);let n={...un(t),colors:r,steps:i};Object.assign(t,n)}})}function tut(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&(r.geometry.type==="BooleanGeometry"||r.geometry.type==="SubdivGeometry")&&(r.geometry.phongAngle=35)})}function WZ(e){e.scene.objects.traverse((t,r)=>{"materials"in r?r.materials.forEach(i=>{typeof i!="string"&&rB(i)}):"material"in r&&typeof r.material!="string"&&rB(r.material)}),Object.values(e.shared.materials).forEach(t=>rB(t))}function rut(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,r)=>{(r.type==="DirectionalLight"||r.type==="SpotLight")&&(r.shadowResolution=1024,r.shadowRadius=1,r.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function iut(e){e.shared.audios=Qs({},Zt.prototype)}function nut(e){e.shared.videos=Qs({},Zt.prototype)}function aut(e){let t=e.shared.materials;Object.entries(t).forEach(([r,i])=>{if(!i.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[r]:n})}})}function out(e){Object.entries(un(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(un(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function sut(e){e.scene.publish.settings.web.preload=!1}function GZ(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function HZ(e){e.layers&&e.layers.forEach(t=>{qlt(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function lut(e){e.shared.fonts=Qs({},Zt.prototype)}function uut(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function cut(e){let t=[];e.scene.objects.traverse((r,i)=>{let n=i;if(n.type==="TextFrame"){let a=Zn.defaultTwoLayerData("phong"),o=typeof n.color=="string"?e.shared.colors[n.color]:n.color;a.layers[1].data.color={r:o.r,g:o.g,b:o.b},a.layers[1].data.alpha=n.alpha;let s=uut(n.font);e.shared.fonts[s]===void 0&&(e.shared.fonts[s]={name:s});let l={name:n.name,...Fn.defaultData,...$g.defaultData,flatShading:!1,wireframe:!1,geometry:{...Hg.defaultData("TextGeometry"),width:n.width,height:n.height,font:s,depth:0,horizontalAlign:n.horizontalAlign,verticalAlign:n.verticalAlign,fontSize:n.fontSize*1.40625,lineHeight:n.lineHeight/1.40625,letterSpacing:n.letterSpacing-1,text:n.text,textTransform:n.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:a,states:un(n.states),events:un(n.events),visible:n.visible,raycastLock:n.raycastLock,position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix},u=un(e.scene.objects).parent(r);e.scene.objects.insertAfter(u??null,r,[{id:r+"new",data:l,children:[]}]),t.push(r)}}),t.forEach(r=>{e.scene.objects.delete(r)})}function dut(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((r,i)=>{i.events.forEach(n=>{if(t[Number(n.type)])if(Object.assign(n,{type:t[Number(n.type)]}),n.type==="Audio"&&"audioEvent"in n&&(Object.assign(n,{playAudio:n.audioEvent}),delete n.audioEvent),n.type==="GameControl")Object.assign(n,{gameActions:{idle:new Ht,move:new Ht,jump:new Ht}});else{let a=new Ht;Object.assign(n,{actions:a}),(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp")&&"url"in n&&a.push({fi:0,id:Ot.generateUUID(),data:{type:"Link",url:n.url,delay:0}}),"targets"in n&&(n.targets.forEach((o,s,l)=>{let u={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},c={easing:o.easing,duration:o.duration};o.easing===6?Object.assign(c,Ep(o,"mass","stiffness","damping","velocity")):o.easing===5&&Object.assign(c,{control1:{...o.control1},control2:{...o.control2}});let d={repeat:o.repeat?-1:0,delay:o.delay,delayDirection:o.delayDirection,direction:o.cycle&&o.rewind?"pingpong-rewind":o.cycle?"pingpong":"normal"},h={state:o.state,...d,...c},f={allowSlerp:!0,type:"Transition",object:o.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Ht({fi:0,id:Ot.generateUUID(),data:u},{fi:1,id:Ot.generateUUID(),data:h})};a.push({fi:l,id:s,data:f})}),delete n.targets)}})})}function hut(e){e.scene.objects.traverse((t,r)=>{function i(n,a){var l;let o=new Ht,s=[];if(r.events.forEach((u,c,d)=>{if(u.type==="Audio"&&u.trigger===a){let h;s.push(c),u.interaction==="play"?h={...Ep(u,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in u?u.after:void 0,toggle:"after"in u?u.toggle:void 0,type:"Audio"}:(u.interaction==="pause"||u.interaction==="stop")&&(h={...Ep(u,"interaction","delay","object","playAudio"),type:"Audio"}),h&&o.push({fi:d,id:c,data:h})}}),s.forEach(u=>r.events.delete(u)),o.length){let u=(l=r.events.find(c=>c.type===n))==null?void 0:l.data;u?"actions"in u&&u.actions.insertBefore(null,o):r.events.insertBefore(null,[{id:Ot.generateUUID(),data:{type:n,actions:o}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}function $Z(e){var r;let t=(r=e.layers.find(i=>i.type==="light"))==null?void 0:r.data;if((t==null?void 0:t.category)==="basic"){let i=Yn.defaultData("light","phong"),n=t;Object.assign(n,i),n.visible=!1}}function XZ(e){Xg(e,$Z),Yg(e,$Z)}function fut(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(r.geometry.scaleBaked||(r.geometry.scaleBaked=[1,1,1]))})}function put(e){e.scene.objects.traverse((t,r)=>{(r.type==="Empty"||r.type==="Mesh")&&r.cloner&&!r.cloner.randomnessObject&&!r.cloner.toObject&&!r.cloner.randomness&&(r.cloner={...r.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function mut(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&!("material"in r)&&!("materials"in r)&&(r.material=Zn.defaultTwoLayerData("phong"))})}function gut(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,r)=>{(r.type==="OrthographicCamera"||r.type==="PerspectiveCamera")&&(r.orthographic.autoZoom===void 0&&(r.orthographic.autoZoom=!1),r.orthographic.autoZoomFrustumSize===void 0&&(r.orthographic.autoZoomFrustumSize=790))})}function vut(e){e.scene.objects.traverse((t,r)=>{r.pathSnapping===void 0&&(r.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),r.pathSnapping.offset===void 0&&(r.pathSnapping.offset=0)})}function yut(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function but(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function _ut(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.resetYPosition=Math.abs(i.resetYPosition-r.position[1]))})})}function wut(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((r,i)=>{t&&i.physics===null?i.collision=!1:i.collision="visibility"})}function xut(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.navmesh=VD.defaultDataThirdPerson.navmesh)})})}function Sut(e){e.scene.styles||(e.scene.styles=F0.defaultData())}function YZ(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function Cut(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),Yg(e,YZ),Xg(e,YZ)}function Eut(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&Object.assign(i.gameActions,{run:new Ht})})})}function Mut(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.keyAssignments=[...i.keyAssignments,["run",""],["none","Ctrl"]])})})}function KZ(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function Put(e,t){if(t<1&&(Yg(e,kZ),Xg(e,kZ),e.schema=1),t<2&&(Glt(e),e.schema=2),t<3&&($lt(e),e.schema=3),t<4&&(Xlt(e),e.schema=4),t<5&&(Ylt(e),e.schema=5),t<6&&(Klt(e),e.schema=6),t<7&&(Qlt(e),e.schema=7),t<8&&(e.schema=8),t<9&&(WZ(e),e.schema=9),t<10&&(tut(e),e.schema=10),t<11&&(rut(e),e.schema=11),t<12&&(WZ(e),e.schema=12),t<13&&(iut(e),e.schema=13),t<14&&(aut(e),e.schema=14),t<15&&(out(e),e.schema=15),t<16&&(sut(e),e.schema=16),t<17&&(Yg(e,GZ),Xg(e,GZ),e.schema=17),t<18&&(Yg(e,qZ),Xg(e,qZ),e.schema=18),t<19&&(Hlt(e),e.schema=19),t<20&&(lut(e),cut(e),e.schema=20),t<21&&(dut(e),hut(e),e.schema=21),t<22&&(XZ(e),e.schema=22),t<23&&(fut(e),e.schema=23),t<24&&(put(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(nut(e),t<25&&(e.schema=25)),t<26&&(Jlt(e),e.schema=26),t<27&&(Zlt(e),e.schema=27),t<28&&(XZ(e),e.schema=28),t<29&&(eut(e),e.schema=29),t<30&&(mut(e),e.schema=30),t<31&&(gut(e),e.schema=31),t<33&&(vut(e),e.schema=33),t<34&&(yut(e),e.schema=34),t<35&&(but(e),e.schema=35),t<36&&(_ut(e),e.schema=36),t<37&&(wut(e),e.schema=37),t<38&&(Yg(e,HZ),Xg(e,HZ),e.schema=38),t<39&&(xut(e),e.schema=39),t<40&&(Sut(e),e.schema=40),t<41&&(Cut(e),e.schema=41),t<42&&(Eut(e),e.schema=42),t<43&&(Mut(e),e.schema=43),t<99){Yg(e,KZ),Xg(e,KZ),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=Rw);let r=un(e.scene.objects),i=e.scene.objects;e.scene.publish.playPage=RE,i.insertBefore(null,null,[{id:RE,data:{...ew.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:Ep(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:Ep(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...J_.defaultData,...Ep(e.scene.environment,"usePhysics","gravity")},camera:un(e.scene.ownerCamera)??ew.defaultData.camera,name:"Scene"},children:[]}]);for(let o of r)o.id!==N0.TRASH_CAN_ID&&i.move(RE,o.fi,o.id);let n=0,a=0;e.shared.penumbraSize&&e.scene.objects.traverse((o,s)=>{s.type==="DirectionalLight"?(s.penumbraSize=e.shared.penumbraSize[Math.min(n,2)],n+=1):s.type==="SpotLight"&&(s.penumbraSize=e.shared.penumbraSize[3+Math.min(a,1)],a+=1),(s.physics===void 0||s.physics===null)&&s.type!=="Instance"&&(s.physics={},Object.assign(s.physics,Q_.defaultData)),s.physics!==void 0&&s.physics!==null&&(s.physics.enabled=s.collision??"visibility",delete s.collision)}),e.schema=99}}function QZ(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function Tut(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&i.type==="PathGeometry"&&(i.extrusion.capType="flat",i.extrusion.bevel=50,i.extrusion.bevelSides=6,i.extrusion.shape.type==="Custom"&&(i.extrusion.shape.shapeQuality="low"))})}function Aut(e){var t;Array.isArray(un(e.events))&&((t=e.events)==null||t.forEach(r=>{"disabled"in r||(r.disabled=!1),(r.type==="MouseDown"||r.type==="MouseUp"||r.type==="MousePress")&&(r.mode=r.mode||"Object")}))}var N1=180/Math.PI;function JZ(e){e.rotation=e.rotation.slice(0,3).map(t=>t*N1)}function Ywe(e){var r,i;JZ(e),e.type==="Page"&&JZ(e.camera),(r=e.states)==null||r.forEach(n=>{n.rotation===void 0||n.rotation===null||(n.rotation=n.rotation.slice(0,3).map(a=>a*N1))});let t=e.geometry;t&&t.type==="SphereGeometry"&&(t.thetaLength=(t.thetaLength??180)*N1),t&&t.type==="TorusGeometry"&&(t.arc=t.arc*N1),t&&t.type==="PathGeometry"&&(t.extrusion.angle*=N1,t.extrusion.twist*=N1),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(un(e.events))&&((i=e.events)==null||i.forEach(n=>{(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="MousePress"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="KeyPress"||n.type==="Collision"||n.type==="Trigger")&&(n.runMode=n.toggle?"Toggle":"Repeat")}))}function Out(e){e.shared.variables=Qs({},Zt.prototype)}function Rut(e){let t=un(e.shared.variables);e.shared.variables=Qs(Object.entries(t??{}).map(([r,i],n)=>({fi:n,id:r,data:i})),Ht.prototype)}var wm=115;function Kwe(e,t){t(e.data);for(let r of e.children)Kwe(r,t)}function Dut(e){let t=e.schema??104;t!==wm&&t<105&&(Kwe(e.asset,Ywe),e.schema=105)}function Iut(e){e.shared.particles=Qs({},Zt.prototype),e.shared.lib&&(e.shared.lib.particles=Xm.defaultData().particles)}function jut(e){e.scene.objects.traverse((t,r)=>{r.type==="Particle"&&typeof r.renderMaterial.size=="number"&&Object.assign(r.renderMaterial,{size:[r.renderMaterial.size,r.renderMaterial.size]})})}function zut(e){e.scene.objects.traverse((t,r)=>{r.type==="Page"&&(r.postprocessing.depthOfField.focusDistance=100,r.postprocessing.depthOfField.focalLength=20,r.postprocessing.depthOfField.bokehScale=5)})}function But(e){e.scene.objects.traverse((t,r)=>{var i;Array.isArray(un(r.events))!==!1&&((i=r.events)==null||i.forEach(n=>{var o,s,l,u,c,d,h,f,g,p,m;let a=n.runMode;n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp"||n.type==="Collision"||n.type==="Trigger"?(o=n.actions)==null||o.forEach(y=>{y.type==="Transition"&&(y.runMode=a??"Repeat"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode=a==="Toggle"?"Toggle":"Normal")}):n.type==="MouseHover"||n.type==="MousePress"||n.type==="KeyPress"?(s=n.actions)==null||s.forEach(y=>{(y.type==="Transition"||y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Toggle")}):n.type==="GameControl"?(delete n.actions,Object.keys(n.gameActions).forEach(y=>{var b;(b=n.gameActions[y])==null||b.forEach(w=>{w.type==="Transition"&&(w.runMode="Repeat"),w.type==="Animation"&&(w.runMode="Normal")})})):n.type==="DragDrop"?(delete n.actions,(u=(l=n.dragDropActions)==null?void 0:l.drag)==null||u.forEach(y=>{(y.type==="Transition"||y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Toggle")}),(d=(c=n.dragDropActions)==null?void 0:c.drop)==null||d.forEach(y=>{(y.type==="Transition"||y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Toggle")})):n.type==="Resize"?(delete n.actions,(h=n.breakpoints)==null||h.forEach(y=>{var b;(b=y.actions)==null||b.forEach(w=>{(w.type==="Transition"||w.type==="Animation"||w.type==="SwitchCamera")&&(w.runMode="Toggle")})})):n.type==="Start"?(f=n.actions)==null||f.forEach(y=>{y.type==="Transition"&&(y.runMode="Once"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Normal")}):n.type==="VariableChange"||n.type==="Scroll"?(g=n.actions)==null||g.forEach(y=>{y.type==="Transition"&&(y.runMode="Repeat"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Normal")}):n.type==="Conditional"&&(delete n.actions,(p=n.inActions)==null||p.forEach(y=>{y.type==="Transition"&&(y.runMode="Repeat"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Normal")}),(m=n.outActions)==null||m.forEach(y=>{y.type==="Transition"&&(y.runMode="Repeat"),(y.type==="Animation"||y.type==="SwitchCamera")&&(y.runMode="Normal")}))}))})}function Lut(e){e.shared.userAPIs=Qs({},Zt.prototype),e.shared.userWebhooks=Qs({},Zt.prototype),e.shared.lib&&(e.shared.lib.userAPIs=Xm.defaultData().userAPIs,e.shared.lib.userWebhooks=Xm.defaultData().userWebhooks)}function Qwe(e){let t=e.schema??0;if(t!==wm){console.warn("updating from ",t,"to ",wm),Put(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=iv.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(Yg(e,QZ),Xg(e,QZ),e.schema=101),t<102&&(Tut(e),e.schema=102),t<104&&(e.shared.catelogs=new Zt,e.shared.lib=Xm.defaultData(),e.schema=104),t<105&&(Out(e),e.scene.objects.traverse((r,i)=>{Ywe(i)}),e.schema=105);for(let r of Object.values(e.shared.lib.components))Dut(r);t<106&&(Rut(e),e.schema=106),t<107&&(e.shared.lib.variables=Xm.defaultData().variables,e.schema=107),t<109&&(Iut(e),e.schema=109),t<110&&(jut(e),e.schema=110),t<111&&(e.scene.objects.traverse((r,i)=>{Aut(i)}),e.schema=111),t<112&&(zut(e),e.schema=112),t<113&&(But(e),e.schema=113),t<114&&(e.scene.publish.settings.web.imageQuality===void 0&&(e.scene.publish.settings.web.imageQuality=70),e.schema=114),t<115&&(Lut(e),e.schema=115)}}var kD;(e=>{e.defaultData={schema:wm,scene:N0.defaultData,frames:new Zt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",DE.defaultData),shared:{...Bs.emptyData(),colors:Bs.defaultColors()}},e.emptyDataForImports=function(){let a=N0.emptyDataWithPage();return{schema:wm,scene:a,frames:new Zt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",DE.defaultData),shared:{...Bs.emptyData(),colors:Bs.defaultColors(),images:Bs.defaultImages()}}},e.emptyData=function(){return{schema:wm,scene:N0.emptyDataWithPage(),frames:new Zt().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",DE.defaultData),shared:Bs.emptyData()}},e.clipboard2dData=function(){return{schema:wm,scene:N0.emptyData(),frames:new Zt,shared:Bs.emptyData()}},e.collabHelper={...v6,updateSchema(a){return(a.schema??0)<wm?MM(a,Qwe):(a.schema??0)-wm}};function t(a){let o=e.collabHelper.updateSchema(a);return typeof o=="number"?o===0?a:null:o.data}e.updateSchemaDirectly=t;function r(a){return{...a,shared:{...a.shared,lib:Xm.defaultData()}}}e.withoutLib=r;function i(a,o){let s=a.scene.objects.get(o);if(s&&s.data.type==="Component")return s;{let l=a.shared.lib.components[o];if(l)return l.asset}}e.getComponentData=i;function n(a){let o=Object.values(a.shared.userAPIs);for(let s of o){let l=s.headers;for(let u of l)if(u.data.key.toLowerCase()==="authorization"&&u.data.value!=="")return!0}return!1}e.hasSensitiveData=n})(kD||(kD={}));var Q6;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(Q6||(Q6={}));var ZZ;(e=>{function t(r){return!0}e.is=t})(ZZ||(ZZ={}));var qD;(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0,shear:[0,0]};function t(i,n){return{position:(n==null?void 0:n.position)??i.position,rotation:(n==null?void 0:n.rotation)??i.rotation,scale:(n==null?void 0:n.scale)??i.scale,shear:(n==null?void 0:n.shear)??i.shear}}e.merge=t;function r(i,n){return cwe({position:jm.isEqual(i.position,n.position)?void 0:n.position,rotation:i.rotation===n.rotation?void 0:n.rotation,scale:jm.isEqual(i.scale,n.scale)?void 0:n.scale,shear:i.shear&&n.shear&&jm.isEqual(i.shear,n.shear)?void 0:n.shear})}e.diff=r})(qD||(qD={}));var J6;(e=>e.defaultData={horizontalConstraint:0,verticalConstraint:0})(J6||(J6={}));var eee;(e=>e.defaultData={direction:"row",wrap:"unwrap",align:"top-left",gap:10,rowGap:10,autoGap:!1,autoRowGap:!1,leftPadding:8,rightPadding:8,topPadding:8,bottomPadding:8})(eee||(eee={}));var WD;(e=>e.defaultData={opacity:1,fill:{color:hi.fromHexAndA(us,1),enabled:!0},stroke:{color:hi.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:hi.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:hi.from0to1([0,0,0,1]),enabled:!1,spread:0}})(WD||(WD={}));var U0;(e=>{function t(o,s){return{name:s}}e.newEmpty=t;function r(o,s){if(s===void 0)return o;let l={...o},u=["width","height","cornerRadius"];for(let c of u)c in l&&c in s&&s[c]!==void 0&&Object.assign(l,{[c]:s[c]});return l}function i(o,s){if(s===void 0)return o;let l={...o};return"fill"in l&&"fill"in s&&s.fill!==void 0&&Object.assign(l,{fill:{...l.fill,...s.fill}}),"stroke"in l&&"stroke"in s&&s.stroke!==void 0&&Object.assign(l,{stroke:{...l.stroke,...s.stroke}}),"layerBlur"in l&&"layerBlur"in s&&s.layerBlur!==void 0&&Object.assign(l,{layerBlur:{...l.layerBlur,...s.layerBlur}}),"backgroundBlur"in l&&"backgroundBlur"in s&&s.backgroundBlur!==void 0&&Object.assign(l,{backgroundBlur:{...l.backgroundBlur,...s.backgroundBlur}}),"dropShadow"in l&&"dropShadow"in s&&s.dropShadow!==void 0&&Object.assign(l,{dropShadow:{...l.dropShadow,...s.dropShadow}}),"innerShadow"in l&&"innerShadow"in s&&s.innerShadow!==void 0&&Object.assign(l,{innerShadow:{...l.innerShadow,...s.innerShadow}}),l}function n(o,s){if(s===void 0)return o;let l={...o};return Object.assign(l,qD.merge(l,s)),l=r(l,s),l=i(l,s),l}e.patch=n;function a(o,s){let l,u=[];for(let[c,d]of Object.entries(s))c!=="name"&&(l===void 0&&(l={path:[],props:{},type:0},u.push(l)),l.props[c]=d);return u}e.toOps=a})(U0||(U0={}));var AM;(e=>e.defaultData={...qD.defaultData,...J6.defaultData,states:new Ht,events:new Ht,visible:!0,raycastLock:!1})(AM||(AM={}));var tw;(e=>e.defaultData={...AM.defaultData,...WD.defaultData})(tw||(tw={}));var GD;(e=>e.defaultData={cornerRadius:[0,0,0,0]})(GD||(GD={}));var Z6;(e=>e.defaultData={...tw.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"})(Z6||(Z6={}));var OM;(e=>e.defaultData={...tw.defaultData,...GD.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"})(OM||(OM={}));var ek;(e=>e.defaultData={...tw.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})(ek||(ek={}));var tk;(e=>e.defaultData={...tw.defaultData,type:"path2d",path:"",name:"Path"})(tk||(tk={}));var tee;(e=>{function t(r){return r.type==="ellipse2d"||r.type==="rectangle2d"||r.type==="text2d"||r.type==="vector2d"||r.type==="path2d"}e.is=t})(tee||(tee={}));var HD;(e=>e.defaultData={...AM.defaultData,name:"Group",type:"group2d"})(HD||(HD={}));var rk;(e=>e.defaultData=()=>({...AM.defaultData,...GD.defaultData,...WD.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:hi.fromHexAndA(4737101,1),enabled:!0},stroke:{color:hi.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}}))(rk||(rk={}));var Z0;(e=>{function t(o){switch(o){case"rectangle2d":return{...OM.defaultData};case"ellipse2d":return{...Z6.defaultData};case"text2d":return{...ek.defaultData};case"vector2d":return{...OM.defaultData};case"path2d":return{...tk.defaultData};case"frame2d":return{...rk.defaultData()};case"group2d":return{...HD.defaultData}}}e.defaultData=t;function r(o){return"width"in o&&"height"in o?[typeof o.width=="number"?o.width*.5:0,typeof o.height=="number"?o.height*.5:0]:[0,0]}e.getPivot=r;function i(o){return o.type==="rectangle2d"||o.type==="ellipse2d"||o.type==="text2d"||o.type==="frame2d"}e.isResizeable=i;function n(o){return o.type==="frame2d"&&o.autoLayout!==void 0}e.isAutoLayoutable=n;function a(o){return o.type==="rectangle2d"||o.type==="frame2d"}e.hasCorners=a})(Z0||(Z0={}));var ik;(e=>(e.defaultData={name:"UI",type:"scene2d",objects:new ya},e.emptyData=function(){return{type:"scene2d",objects:new ya}}))(ik||(ik={}));function V0(e,t=!1){let r=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),a={},o={},s=e[0].morphTargetsRelative,l=new Wt,u=0;for(let c=0;c<e.length;++c){let d=e[c],h=0;if(r!==(d.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let f in d.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;a[f]===void 0&&(a[f]=[]),a[f].push(d.attributes[f]),h++}if(h!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let f in d.morphAttributes){if(!n.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;o[f]===void 0&&(o[f]=[]),o[f].push(d.morphAttributes[f])}if(t){let f;if(r)f=d.index.count;else if(d.attributes.position!==void 0)f=d.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,f,c),u+=f}}if(r){let c=0,d=[];for(let h=0;h<e.length;++h){let f=e[h].index;for(let g=0;g<f.count;++g)d.push(f.getX(g)+c);c+=e[h].attributes.position.count}l.setIndex(d)}for(let c in a){let d=ree(a[c]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,d)}for(let c in o){let d=o[c][0].length;if(d===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let h=0;h<d;++h){let f=[];for(let p=0;p<o[c].length;++p)f.push(o[c][p][h]);let g=ree(f);if(!g)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(g)}}return l}function ree(e){let t,r,i,n=0;for(let s=0;s<e.length;++s){let l=e[s];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let a=new t(n),o=0;for(let s=0;s<e.length;++s)a.set(e[s].array,o),o+=e[s].array.length;return new tr(a,r,i)}var Fut=Math.pow(2,-24),UA=class{constructor(){}};function hp(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function iee(e){let t=-1,r=-1/0;for(let i=0;i<3;i++){let n=e[i+3]-e[i];n>r&&(r=n,t=i)}return t}function nee(e,t){t.set(e)}function aee(e,t,r){let i,n;for(let a=0;a<3;a++){let o=a+3;i=e[a],n=t[a],r[a]=i<n?i:n,i=e[o],n=t[o],r[o]=i>n?i:n}}function VA(e,t,r){for(let i=0;i<3;i++){let n=t[e+2*i],a=t[e+2*i+1],o=n-a,s=n+a;o<r[i]&&(r[i]=o),s>r[i+3]&&(r[i+3]=s)}}function Wx(e){let t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return 2*(t*r+r*i+i*t)}function Nut(e,t){if(!e.index){let r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;r>65535?n=new Uint32Array(new i(4*r)):n=new Uint16Array(new i(2*r)),e.setIndex(new tr(n,1));for(let a=0;a<r;a++)n[a]=a}}function Uut(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],r=new Set;for(let n of e.groups)r.add(n.start),r.add(n.start+n.count);let i=Array.from(r.values()).sort((n,a)=>n-a);for(let n=0;n<i.length-1;n++){let a=i[n],o=i[n+1];t.push({offset:a/3,count:(o-a)/3})}return t}function iB(e,t,r,i,n=null){let a=1/0,o=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0,d=1/0,h=1/0,f=1/0,g=-1/0,p=-1/0,m=-1/0,y=n!==null;for(let b=t*6,w=(t+r)*6;b<w;b+=6){let x=e[b+0],S=e[b+1],C=x-S,T=x+S;C<a&&(a=C),T>l&&(l=T),y&&x<d&&(d=x),y&&x>g&&(g=x);let M=e[b+2],A=e[b+3],P=M-A,O=M+A;P<o&&(o=P),O>u&&(u=O),y&&M<h&&(h=M),y&&M>p&&(p=M);let j=e[b+4],D=e[b+5],I=j-D,q=j+D;I<s&&(s=I),q>c&&(c=q),y&&j<f&&(f=j),y&&j>m&&(m=j)}i[0]=a,i[1]=o,i[2]=s,i[3]=l,i[4]=u,i[5]=c,y&&(n[0]=d,n[1]=h,n[2]=f,n[3]=g,n[4]=p,n[5]=m)}function Vut(e,t,r,i){let n=1/0,a=1/0,o=1/0,s=-1/0,l=-1/0,u=-1/0;for(let c=t*6,d=(t+r)*6;c<d;c+=6){let h=e[c+0];h<n&&(n=h),h>s&&(s=h);let f=e[c+2];f<a&&(a=f),f>l&&(l=f);let g=e[c+4];g<o&&(o=g),g>u&&(u=g)}i[0]=n,i[1]=a,i[2]=o,i[3]=s,i[4]=l,i[5]=u}function kut(e,t,r,i,n){let a=r,o=r+i-1,s=n.pos,l=n.axis*2;for(;;){for(;a<=o&&t[a*6+l]<s;)a++;for(;a<=o&&t[o*6+l]>=s;)o--;if(a<o){for(let u=0;u<3;u++){let c=e[a*3+u];e[a*3+u]=e[o*3+u],e[o*3+u]=c;let d=t[a*6+u*2+0];t[a*6+u*2+0]=t[o*6+u*2+0],t[o*6+u*2+0]=d;let h=t[a*6+u*2+1];t[a*6+u*2+1]=t[o*6+u*2+1],t[o*6+u*2+1]=h}a++,o--}else return a}}var gm=32,qut=(e,t)=>e.candidate-t.candidate,Tg=new Array(gm).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),kA=new Float32Array(6);function Wut(e,t,r,i,n,a){let o=-1,s=0;if(a===0)o=iee(t),o!==-1&&(s=(t[o]+t[o+3])/2);else if(a===1)o=iee(e),o!==-1&&(s=Gut(r,i,n,o));else if(a===2){let l=Wx(e),u=1.25*n,c=i*6,d=(i+n)*6;for(let h=0;h<3;h++){let f=t[h],g=(t[h+3]-f)/gm;if(n<gm/4){let p=[...Tg];p.length=n;let m=0;for(let b=c;b<d;b+=6,m++){let w=p[m];w.candidate=r[b+2*h],w.count=0;let{bounds:x,leftCacheBounds:S,rightCacheBounds:C}=w;for(let T=0;T<3;T++)C[T]=1/0,C[T+3]=-1/0,S[T]=1/0,S[T+3]=-1/0,x[T]=1/0,x[T+3]=-1/0;VA(b,r,x)}p.sort(qut);let y=n;for(let b=0;b<y;b++){let w=p[b];for(;b+1<y&&p[b+1].candidate===w.candidate;)p.splice(b+1,1),y--}for(let b=c;b<d;b+=6){let w=r[b+2*h];for(let x=0;x<y;x++){let S=p[x];w>=S.candidate?VA(b,r,S.rightCacheBounds):(VA(b,r,S.leftCacheBounds),S.count++)}}for(let b=0;b<y;b++){let w=p[b],x=w.count,S=n-w.count,C=w.leftCacheBounds,T=w.rightCacheBounds,M=0;x!==0&&(M=Wx(C)/l);let A=0;S!==0&&(A=Wx(T)/l);let P=1+1.25*(M*x+A*S);P<u&&(o=h,u=P,s=w.candidate)}}else{for(let y=0;y<gm;y++){let b=Tg[y];b.count=0,b.candidate=f+g+y*g;let w=b.bounds;for(let x=0;x<3;x++)w[x]=1/0,w[x+3]=-1/0}for(let y=c;y<d;y+=6){let b=~~((r[y+2*h]-f)/g);b>=gm&&(b=gm-1);let w=Tg[b];w.count++,VA(y,r,w.bounds)}let p=Tg[gm-1];nee(p.bounds,p.rightCacheBounds);for(let y=gm-2;y>=0;y--){let b=Tg[y],w=Tg[y+1];aee(b.bounds,w.rightCacheBounds,b.rightCacheBounds)}let m=0;for(let y=0;y<gm-1;y++){let b=Tg[y],w=b.count,x=b.bounds,S=Tg[y+1].rightCacheBounds;w!==0&&(m===0?nee(x,kA):aee(x,kA,kA)),m+=w;let C=0,T=0;m!==0&&(C=Wx(kA)/l);let M=n-m;M!==0&&(T=Wx(S)/l);let A=1+1.25*(C*m+T*M);A<u&&(o=h,u=A,s=b.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${a} used.`);return{axis:o,pos:s}}function Gut(e,t,r,i){let n=0;for(let a=t,o=t+r;a<o;a++)n+=e[a*6+i*2];return n/r}function Hut(e,t){let r=e.attributes.position,i=e.index.array,n=i.length/3,a=new Float32Array(n*6),o=r.normalized,s=r.array,l=r.offset||0,u=3;r.isInterleavedBufferAttribute&&(u=r.data.stride);let c=["getX","getY","getZ"];for(let d=0;d<n;d++){let h=d*3,f=d*6,g,p,m;o?(g=i[h+0],p=i[h+1],m=i[h+2]):(g=i[h+0]*u+l,p=i[h+1]*u+l,m=i[h+2]*u+l);for(let y=0;y<3;y++){let b,w,x;o?(b=r[c[y]](g),w=r[c[y]](p),x=r[c[y]](m)):(b=s[g+y],w=s[p+y],x=s[m+y]);let S=b;w<S&&(S=w),x<S&&(S=x);let C=b;w>C&&(C=w),x>C&&(C=x);let T=(C-S)/2,M=y*2;a[f+M+0]=S+T,a[f+M+1]=T+(Math.abs(S)+T)*Fut,S<t[y]&&(t[y]=S),C>t[y+3]&&(t[y+3]=C)}}return a}function $ut(e,t){function r(y){h&&h(y/f)}function i(y,b,w,x=null,S=0){if(!g&&S>=l&&(g=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),w<=c||S>=l)return r(b+w),y.offset=b,y.count=w,y;let C=Wut(y.boundingData,x,o,b,w,d);if(C.axis===-1)return r(b+w),y.offset=b,y.count=w,y;let T=kut(s,o,b,w,C);if(T===b||T===b+w)r(b+w),y.offset=b,y.count=w;else{y.splitAxis=C.axis;let M=new UA,A=b,P=T-b;y.left=M,M.boundingData=new Float32Array(6),iB(o,A,P,M.boundingData,a),i(M,A,P,a,S+1);let O=new UA,j=T,D=w-P;y.right=O,O.boundingData=new Float32Array(6),iB(o,j,D,O.boundingData,a),i(O,j,D,a,S+1)}return y}Nut(e,t);let n=new Float32Array(6),a=new Float32Array(6),o=Hut(e,n),s=e.index.array,l=t.maxDepth,u=t.verbose,c=t.maxLeafTris,d=t.strategy,h=t.onProgress,f=e.index.count/3,g=!1,p=[],m=Uut(e);if(m.length===1){let y=m[0],b=new UA;b.boundingData=n,Vut(o,y.offset,y.count,a),i(b,y.offset,y.count,a),p.push(b)}else for(let y of m){let b=new UA;b.boundingData=new Float32Array(6),iB(o,y.offset,y.count,b.boundingData,a),i(b,y.offset,y.count,a),p.push(b)}return p}function Xut(e,t){let r=$ut(e,t),i,n,a,o=[],s=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<r.length;c++){let d=r[c],h=l(d),f=new s(32*h);i=new Float32Array(f),n=new Uint32Array(f),a=new Uint16Array(f),u(0,d),o.push(f)}return o;function l(c){return c.count?1:1+l(c.left)+l(c.right)}function u(c,d){let h=c/4,f=c/2,g=!!d.count,p=d.boundingData;for(let m=0;m<6;m++)i[h+m]=p[m];if(g){let m=d.offset,y=d.count;return n[h+6]=m,a[f+14]=y,a[f+15]=65535,c+32}else{let m=d.left,y=d.right,b=d.splitAxis,w;if(w=u(c+32,m),w/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[h+6]=w/4,w=u(w,y),n[h+7]=b,w}}}var Ym=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let n=0,a=e.length;n<a;n++){let o=e[n][t];r=o<r?o:r,i=o>i?o:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let n=0,a=t.length;n<a;n++){let o=t[n],s=e.dot(o);r=s<r?s:r,i=s>i?s:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}};Ym.prototype.setFromBox=function(){let e=new k;return function(t,r){let i=r.min,n=r.max,a=1/0,o=-1/0;for(let s=0;s<=1;s++)for(let l=0;l<=1;l++)for(let u=0;u<=1;u++){e.x=i.x*s+n.x*(1-s),e.y=i.y*l+n.y*(1-l),e.z=i.z*u+n.z*(1-u);let c=t.dot(e);a=Math.min(c,a),o=Math.max(c,o)}this.min=a,this.max=o}}();var Yut=function(){let e=new k,t=new k,r=new k;return function(i,n,a){let o=i.start,s=e,l=n.start,u=t;r.subVectors(o,l),e.subVectors(i.end,i.start),t.subVectors(n.end,n.start);let c=r.dot(u),d=u.dot(s),h=u.dot(u),f=r.dot(s),g=s.dot(s)*h-d*d,p,m;g!==0?p=(c*d-f*h)/g:p=0,m=(c+p*d)/h,a.x=p,a.y=m}}(),GW=function(){let e=new ze,t=new k,r=new k;return function(i,n,a,o){Yut(i,n,e);let s=e.x,l=e.y;if(s>=0&&s<=1&&l>=0&&l<=1){i.at(s,a),n.at(l,o);return}else if(s>=0&&s<=1){l<0?n.at(0,o):n.at(1,o),i.closestPointToPoint(o,!0,a);return}else if(l>=0&&l<=1){s<0?i.at(0,a):i.at(1,a),n.closestPointToPoint(a,!0,o);return}else{let u;s<0?u=i.start:u=i.end;let c;l<0?c=n.start:c=n.end;let d=t,h=r;if(i.closestPointToPoint(c,!0,t),n.closestPointToPoint(u,!0,r),d.distanceToSquared(c)<=h.distanceToSquared(u)){a.copy(d),o.copy(c);return}else{a.copy(u),o.copy(h);return}}}}(),Kut=function(){let e=new k,t=new k,r=new So,i=new Gs;return function(n,a){let{radius:o,center:s}=n,{a:l,b:u,c}=a;if(i.start=l,i.end=u,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o||(i.start=l,i.end=c,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o)||(i.start=u,i.end=c,i.closestPointToPoint(s,!0,e).distanceTo(s)<=o))return!0;let d=a.getPlane(r);if(Math.abs(d.distanceToPoint(s))<=o){let h=d.projectPoint(s,t);if(a.containsPoint(h))return!0}return!1}}(),Qut=1e-15;function b1(e){return Math.abs(e)<Qut}var Km=class extends va{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new k),this.satBounds=new Array(4).fill().map(()=>new Ym),this.points=[this.a,this.b,this.c],this.sphere=new Lo,this.plane=new So,this.needsUpdate=!0}intersectsSphere(e){return Kut(e,this)}update(){let e=this.a,t=this.b,r=this.c,i=this.points,n=this.satAxes,a=this.satBounds,o=n[0],s=a[0];this.getNormal(o),s.setFromPoints(o,i);let l=n[1],u=a[1];l.subVectors(e,t),u.setFromPoints(l,i);let c=n[2],d=a[2];c.subVectors(t,r),d.setFromPoints(c,i);let h=n[3],f=a[3];h.subVectors(r,e),f.setFromPoints(h,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}};Km.prototype.closestPointToSegment=function(){let e=new k,t=new k,r=new Gs;return function(i,n=null,a=null){let{start:o,end:s}=i,l=this.points,u,c=1/0;for(let d=0;d<3;d++){let h=(d+1)%3;r.start.copy(l[d]),r.end.copy(l[h]),GW(r,i,e,t),u=e.distanceToSquared(t),u<c&&(c=u,n&&n.copy(e),a&&a.copy(t))}return this.closestPointToPoint(o,e),u=o.distanceToSquared(e),u<c&&(c=u,n&&n.copy(e),a&&a.copy(o)),this.closestPointToPoint(s,e),u=s.distanceToSquared(e),u<c&&(c=u,n&&n.copy(e),a&&a.copy(s)),Math.sqrt(c)}}();Km.prototype.intersectsTriangle=function(){let e=new Km,t=new Array(3),r=new Array(3),i=new Ym,n=new Ym,a=new k,o=new k,s=new k,l=new k,u=new Gs,c=new Gs,d=new Gs;return function(h,f=null,g=!1){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);let p=this.plane,m=h.plane;if(Math.abs(p.normal.dot(m.normal))>1-1e-10){let y=this.satBounds,b=this.satAxes;r[0]=h.a,r[1]=h.b,r[2]=h.c;for(let S=0;S<4;S++){let C=y[S],T=b[S];if(i.setFromPoints(T,r),C.isSeparated(i))return!1}let w=h.satBounds,x=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let S=0;S<4;S++){let C=w[S],T=x[S];if(i.setFromPoints(T,t),C.isSeparated(i))return!1}for(let S=0;S<4;S++){let C=b[S];for(let T=0;T<4;T++){let M=x[T];if(a.crossVectors(C,M),i.setFromPoints(a,t),n.setFromPoints(a,r),i.isSeparated(n))return!1}}return f&&(g||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}else{let y=this.points,b=!1,w=0;for(let D=0;D<3;D++){let I=y[D],q=y[(D+1)%3];u.start.copy(I),u.end.copy(q),u.delta(o);let $=b?c.start:c.end,X=b1(m.distanceToPoint(I));if(b1(m.normal.dot(o))&&X){c.copy(u),w=2;break}if((m.intersectLine(u,$)||X)&&!b1($.distanceTo(q))){if(w++,b)break;b=!0}}if(w===1&&h.containsPoint(c.end))return f&&(f.start.copy(c.end),f.end.copy(c.end)),!0;if(w!==2)return!1;let x=h.points,S=!1,C=0;for(let D=0;D<3;D++){let I=x[D],q=x[(D+1)%3];u.start.copy(I),u.end.copy(q),u.delta(s);let $=S?d.start:d.end,X=b1(p.distanceToPoint(I));if(b1(p.normal.dot(s))&&X){d.copy(u),C=2;break}if((p.intersectLine(u,$)||X)&&!b1($.distanceTo(q))){if(C++,S)break;S=!0}}if(C===1&&this.containsPoint(d.end))return f&&(f.start.copy(d.end),f.end.copy(d.end)),!0;if(C!==2)return!1;if(c.delta(o),d.delta(s),o.dot(s)<0){let D=d.start;d.start=d.end,d.end=D}let T=c.start.dot(o),M=c.end.dot(o),A=d.start.dot(o),P=d.end.dot(o),O=M<A,j=T<P;return T!==P&&A!==M&&O===j?!1:(f&&(l.subVectors(c.start,d.start),l.dot(o)>0?f.start.copy(c.start):f.start.copy(d.start),l.subVectors(c.end,d.end),l.dot(o)<0?f.end.copy(c.end):f.end.copy(d.end)),!0)}}}();Km.prototype.distanceToPoint=function(){let e=new k;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Km.prototype.distanceToTriangle=function(){let e=new k,t=new k,r=["a","b","c"],i=new Gs,n=new Gs;return function(a,o=null,s=null){let l=o||s?i:null;if(this.intersectsTriangle(a,l))return(o||s)&&(o&&l.getCenter(o),s&&l.getCenter(s)),0;let u=1/0;for(let c=0;c<3;c++){let d,h=r[c],f=a[h];this.closestPointToPoint(f,e),d=f.distanceToSquared(e),d<u&&(u=d,o&&o.copy(e),s&&s.copy(f));let g=this[h];a.closestPointToPoint(g,e),d=g.distanceToSquared(e),d<u&&(u=d,o&&o.copy(g),s&&s.copy(e))}for(let c=0;c<3;c++){let d=r[c],h=r[(c+1)%3];i.set(this[d],this[h]);for(let f=0;f<3;f++){let g=r[f],p=r[(f+1)%3];n.set(a[g],a[p]),GW(i,n,e,t);let m=e.distanceToSquared(t);m<u&&(u=m,o&&o.copy(e),s&&s.copy(t))}}return Math.sqrt(u)}}();var Ip=class{constructor(e,t,r){this.isOrientedBox=!0,this.min=new k,this.max=new k,this.matrix=new dt,this.invMatrix=new dt,this.points=new Array(8).fill().map(()=>new k),this.satAxes=new Array(3).fill().map(()=>new k),this.satBounds=new Array(3).fill().map(()=>new Ym),this.alignedSatBounds=new Array(3).fill().map(()=>new Ym),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Ip.prototype.update=function(){return function(){let e=this.matrix,t=this.min,r=this.max,i=this.points;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let c=0;c<=1;c++){let d=1*l|2*u|4*c,h=i[d];h.x=l?r.x:t.x,h.y=u?r.y:t.y,h.z=c?r.z:t.z,h.applyMatrix4(e)}let n=this.satBounds,a=this.satAxes,o=i[0];for(let l=0;l<3;l++){let u=a[l],c=n[l],d=1<<l,h=i[d];u.subVectors(o,h),c.setFromPoints(u,i)}let s=this.alignedSatBounds;s[0].setFromPointsField(i,"x"),s[1].setFromPointsField(i,"y"),s[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Ip.prototype.intersectsBox=function(){let e=new Ym;return function(t){this.needsUpdate&&this.update();let r=t.min,i=t.max,n=this.satBounds,a=this.satAxes,o=this.alignedSatBounds;if(e.min=r.x,e.max=i.x,o[0].isSeparated(e)||(e.min=r.y,e.max=i.y,o[1].isSeparated(e))||(e.min=r.z,e.max=i.z,o[2].isSeparated(e)))return!1;for(let s=0;s<3;s++){let l=a[s],u=n[s];if(e.setFromBox(l,t),u.isSeparated(e))return!1}return!0}}();Ip.prototype.intersectsTriangle=function(){let e=new Km,t=new Array(3),r=new Ym,i=new Ym,n=new k;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);let o=this.satBounds,s=this.satAxes;t[0]=a.a,t[1]=a.b,t[2]=a.c;for(let d=0;d<3;d++){let h=o[d],f=s[d];if(r.setFromPoints(f,t),h.isSeparated(r))return!1}let l=a.satBounds,u=a.satAxes,c=this.points;for(let d=0;d<3;d++){let h=l[d],f=u[d];if(r.setFromPoints(f,c),h.isSeparated(r))return!1}for(let d=0;d<3;d++){let h=s[d];for(let f=0;f<4;f++){let g=u[f];if(n.crossVectors(h,g),r.setFromPoints(n,t),i.setFromPoints(n,c),r.isSeparated(i))return!1}}return!0}}();Ip.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Ip.prototype.distanceToPoint=function(){let e=new k;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Ip.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Gs),r=new Array(12).fill().map(()=>new Gs),i=new k,n=new k;return function(a,o=0,s=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(s||l)&&(a.getCenter(n),this.closestPointToPoint(n,i),a.closestPointToPoint(i,n),s&&s.copy(i),l&&l.copy(n)),0;let u=o*o,c=a.min,d=a.max,h=this.points,f=1/0;for(let p=0;p<8;p++){let m=h[p];n.copy(m).clamp(c,d);let y=m.distanceToSquared(n);if(y<f&&(f=y,s&&s.copy(m),l&&l.copy(n),y<u))return Math.sqrt(y)}let g=0;for(let p=0;p<3;p++)for(let m=0;m<=1;m++)for(let y=0;y<=1;y++){let b=(p+1)%3,w=(p+2)%3,x=m<<b|y<<w,S=1<<p|m<<b|y<<w,C=h[x],T=h[S];t[g].set(C,T);let M=e[p],A=e[b],P=e[w],O=r[g],j=O.start,D=O.end;j[M]=c[M],j[A]=m?c[A]:d[A],j[P]=y?c[P]:d[A],D[M]=d[M],D[A]=m?c[A]:d[A],D[P]=y?c[P]:d[A],g++}for(let p=0;p<=1;p++)for(let m=0;m<=1;m++)for(let y=0;y<=1;y++){n.x=p?d.x:c.x,n.y=m?d.y:c.y,n.z=y?d.z:c.z,this.closestPointToPoint(n,i);let b=n.distanceToSquared(i);if(b<f&&(f=b,s&&s.copy(i),l&&l.copy(n),b<u))return Math.sqrt(b)}for(let p=0;p<12;p++){let m=t[p];for(let y=0;y<12;y++){let b=r[y];GW(m,b,i,n);let w=i.distanceToSquared(n);if(w<f&&(f=w,s&&s.copy(i),l&&l.copy(n),w<u))return Math.sqrt(w)}}return Math.sqrt(f)}}();var _1=new k,w1=new k,x1=new k,qA=new ze,WA=new ze,GA=new ze,oee=new k,see=new k,lee=new k,HA=new k;function Jut(e,t,r,i,n,a){let o;return a===ea?o=e.intersectTriangle(i,r,t,!0,n):o=e.intersectTriangle(t,r,i,a!==Fa,n),o===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function Zut(e,t,r,i,n,a,o,s,l){_1.fromBufferAttribute(t,a),w1.fromBufferAttribute(t,o),x1.fromBufferAttribute(t,s);let u=Jut(e,_1,w1,x1,HA,l);if(u){i&&(qA.fromBufferAttribute(i,a),WA.fromBufferAttribute(i,o),GA.fromBufferAttribute(i,s),u.uv=va.getInterpolation(HA,_1,w1,x1,qA,WA,GA,new ze)),n&&(qA.fromBufferAttribute(n,a),WA.fromBufferAttribute(n,o),GA.fromBufferAttribute(n,s),u.uv1=va.getInterpolation(HA,_1,w1,x1,qA,WA,GA,new ze)),r&&(oee.fromBufferAttribute(r,a),see.fromBufferAttribute(r,o),lee.fromBufferAttribute(r,s),u.normal=va.getInterpolation(HA,_1,w1,x1,oee,see,lee,new k),u.normal.dot(e.direction)>0&&u.normal.multiplyScalar(-1));let c={a,b:o,c:s,normal:new k,materialIndex:0};va.getNormal(_1,w1,x1,c.normal),u.face=c,u.faceIndex=a}return u}function Jwe(e,t,r,i,n){let a=i*3,o=e.index.getX(a),s=e.index.getX(a+1),l=e.index.getX(a+2),{position:u,normal:c,uv:d,uv1:h}=e.attributes,f=Zut(r,u,c,d,h,o,s,l,t);return f?(f.faceIndex=i,n&&n.push(f),f):null}function ect(e,t,r,i,n,a){for(let o=i,s=i+n;o<s;o++)Jwe(e,t,r,o,a)}function tct(e,t,r,i,n){let a=1/0,o=null;for(let s=i,l=i+n;s<l;s++){let u=Jwe(e,t,r,s);u&&u.distance<a&&(o=u,a=u.distance)}return o}function lp(e,t,r,i){let n=e.a,a=e.b,o=e.c,s=t,l=t+1,u=t+2;r&&(s=r.getX(t),l=r.getX(t+1),u=r.getX(t+2)),n.x=i.getX(s),n.y=i.getY(s),n.z=i.getZ(s),a.x=i.getX(l),a.y=i.getY(l),a.z=i.getZ(l),o.x=i.getX(u),o.y=i.getY(u),o.z=i.getZ(u)}function uee(e,t,r,i,n,a,o){let s=r.index,l=r.attributes.position;for(let u=e,c=t+e;u<c;u++)if(lp(o,u*3,s,l),o.needsUpdate=!0,i(o,u,n,a))return!0;return!1}var Zwe=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function Kg(e,t){return t[e+15]===65535}function v_(e,t){return t[e+6]}function RM(e,t){return t[e+14]}function DM(e){return e+8}function IM(e,t){return t[e+6]}function rct(e,t){return t[e+7]}var t_=new dn,$D=new k,ict=["x","y","z"];function nk(e,t,r,i,n){let a=e*2,o=Dw,s=hv,l=fv;if(Kg(a,s)){let u=v_(e,l),c=RM(a,s);ect(t,r,i,u,c,n)}else{let u=DM(e);XD(u,o,i,$D)&&nk(u,t,r,i,n);let c=IM(e,l);XD(c,o,i,$D)&&nk(c,t,r,i,n)}}function ak(e,t,r,i){let n=e*2,a=Dw,o=hv,s=fv;if(Kg(n,o)){let l=v_(e,s),u=RM(n,o);return tct(t,r,i,l,u)}else{let l=rct(e,s),u=ict[l],c=i.direction[u]>=0,d,h;c?(d=DM(e),h=IM(e,s)):(d=IM(e,s),h=DM(e));let f=XD(d,a,i,$D)?ak(d,t,r,i):null;if(f){let p=f.point[u];if(c?p<=a[h+l]:p>=a[h+l+3])return f}let g=XD(h,a,i,$D)?ak(h,t,r,i):null;return f&&g?f.distance<=g.distance?f:g:f||g||null}}var nct=function(){let e,t,r=[],i=new Zwe(()=>new dn);return function(...a){e=i.getPrimitive(),t=i.getPrimitive(),r.push(e,t);let o=n(...a);i.releasePrimitive(e),i.releasePrimitive(t),r.pop(),r.pop();let s=r.length;return s>0&&(t=r[s-1],e=r[s-2]),o};function n(a,o,s,l,u=null,c=0,d=0){function h(b){let w=b*2,x=hv,S=fv;for(;!Kg(w,x);)b=DM(b),w=b*2;return v_(b,S)}function f(b){let w=b*2,x=hv,S=fv;for(;!Kg(w,x);)b=IM(b,S),w=b*2;return v_(b,S)+RM(w,x)}let g=a*2,p=Dw,m=hv,y=fv;if(Kg(g,m)){let b=v_(a,y),w=RM(g,m);return hp(a,p,e),l(b,w,!1,d,c+a,e)}else{let b=DM(a),w=IM(a,y),x=b,S=w,C,T,M,A;if(u&&(M=e,A=t,hp(x,p,M),hp(S,p,A),C=u(M),T=u(A),T<C)){x=w,S=b;let $=C;C=T,T=$,M=A}M||(M=e,hp(x,p,M));let P=Kg(x*2,m),O=s(M,P,C,d+1,c+x),j;if(O===2){let $=h(x),X=f(x)-$;j=l($,X,!0,d+1,c+x,M)}else j=O&&n(x,o,s,l,u,c,d+1);if(j)return!0;A=t,hp(S,p,A);let D=Kg(S*2,m),I=s(A,D,T,d+1,c+S),q;if(I===2){let $=h(S),X=f(S)-$;q=l($,X,!0,d+1,c+S,A)}else q=I&&n(S,o,s,l,u,c,d+1);return!!q}}}(),act=function(){let e=new Km,t=new Km,r=new dt,i=new Ip,n=new Ip;return function a(o,s,l,u,c=null){let d=o*2,h=Dw,f=hv,g=fv;if(c===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,u),c=i),Kg(d,f)){let p=s,m=p.index,y=p.attributes.position,b=l.index,w=l.attributes.position,x=v_(o,g),S=RM(d,f);if(r.copy(u).invert(),l.boundsTree)return hp(o,h,n),n.matrix.copy(r),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:C=>n.intersectsBox(C),intersectsTriangle:C=>{C.a.applyMatrix4(u),C.b.applyMatrix4(u),C.c.applyMatrix4(u),C.needsUpdate=!0;for(let T=x*3,M=(S+x)*3;T<M;T+=3)if(lp(t,T,m,y),t.needsUpdate=!0,C.intersectsTriangle(t))return!0;return!1}});for(let C=x*3,T=S+x*3;C<T;C+=3){lp(e,C,m,y),e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let M=0,A=b.count;M<A;M+=3)if(lp(t,M,b,w),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let p=o+8,m=g[o+6];return hp(p,h,t_),!!(c.intersectsBox(t_)&&a(p,s,l,u,c)||(hp(m,h,t_),c.intersectsBox(t_)&&a(m,s,l,u,c)))}}}();function XD(e,t,r,i){return hp(e,t,t_),r.intersectBox(t_,i)}var ok=[],dR,Dw,hv,fv;function tE(e){dR&&ok.push(dR),dR=e,Dw=new Float32Array(e),hv=new Uint16Array(e),fv=new Uint32Array(e)}function $A(){dR=null,Dw=null,hv=null,fv=null,ok.length&&tE(ok.pop())}var nB=Symbol("skip tree generation"),aB=new dn,oB=new dn,S1=new dt,ly=new Ip,Gx=new Ip,Hx=new k,XA=new k,oct=new k,sct=new k,lct=new k,cee=new dn,Hf=new Zwe(()=>new Km),IE=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),IE.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let r=e.geometry,i=e._roots,n=r.getIndex(),a;return t.cloneBuffers?a={roots:i.map(o=>o.slice()),index:n.array.slice()}:a={roots:i,index:n.array},a}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),IE.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};let{index:i,roots:n}=e,a=new IE(t,{...r,[nB]:!0});if(a._roots=n,r.setIndex){let o=t.getIndex();if(o===null){let s=new tr(e.index,1,!1);t.setIndex(s)}else o.array!==i&&(o.array.set(i),o.needsUpdate=!0)}return a}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[nB]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[nB]||(this._roots=Xut(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new dn))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,r=t.index.array,i=t.attributes.position,n,a,o,s,l=0,u=this._roots;for(let d=0,h=u.length;d<h;d++)n=u[d],a=new Uint32Array(n),o=new Uint16Array(n),s=new Float32Array(n),c(0,l),l+=n.byteLength;function c(d,h,f=!1){let g=d*2;if(o[g+15]===65535){let p=a[d+6],m=o[g+14],y=1/0,b=1/0,w=1/0,x=-1/0,S=-1/0,C=-1/0;for(let T=3*p,M=3*(p+m);T<M;T++){let A=r[T],P=i.getX(A),O=i.getY(A),j=i.getZ(A);P<y&&(y=P),P>x&&(x=P),O<b&&(b=O),O>S&&(S=O),j<w&&(w=j),j>C&&(C=j)}return s[d+0]!==y||s[d+1]!==b||s[d+2]!==w||s[d+3]!==x||s[d+4]!==S||s[d+5]!==C?(s[d+0]=y,s[d+1]=b,s[d+2]=w,s[d+3]=x,s[d+4]=S,s[d+5]=C,!0):!1}else{let p=d+8,m=a[d+6],y=p+h,b=m+h,w=f,x=!1,S=!1;e?w||(x=e.has(y),S=e.has(b),w=!x&&!S):(x=!0,S=!0);let C=w||x,T=w||S,M=!1;C&&(M=c(p,h,w));let A=!1;T&&(A=c(m,h,w));let P=M||A;if(P)for(let O=0;O<3;O++){let j=p+O,D=m+O,I=s[j],q=s[j+3],$=s[D],X=s[D+3];s[d+O]=I<$?I:$,s[d+O+3]=q>X?q:X}return P}}}traverse(e,t=0){let r=this._roots[t],i=new Uint32Array(r),n=new Uint16Array(r);a(0);function a(o,s=0){let l=o*2,u=n[l+15]===65535;if(u){let c=i[o+6],d=n[l+14];e(s,u,new Float32Array(r,o*4,6),c,d)}else{let c=o+8,d=i[o+6],h=i[o+7];e(s,u,new Float32Array(r,o*4,6),h)||(a(c,s+1),a(d,s+1))}}}raycast(e,t=Pf){let r=this._roots,i=this.geometry,n=[],a=t.isMaterial,o=Array.isArray(t),s=i.groups,l=a?t.side:t;for(let u=0,c=r.length;u<c;u++){let d=o?t[s[u].materialIndex].side:l,h=n.length;if(tE(r[u]),nk(0,i,d,e,n),$A(),o){let f=s[u].materialIndex;for(let g=h,p=n.length;g<p;g++)n[g].face.materialIndex=f}}return n}raycastFirst(e,t=Pf){let r=this._roots,i=this.geometry,n=t.isMaterial,a=Array.isArray(t),o=null,s=i.groups,l=n?t.side:t;for(let u=0,c=r.length;u<c;u++){let d=a?t[s[u].materialIndex].side:l;tE(r[u]);let h=ak(0,i,d,e);$A(),h!=null&&(o==null||h.distance<o.distance)&&(o=h,a&&(h.face.materialIndex=s[u].materialIndex))}return o}intersectsGeometry(e,t){let r=this.geometry,i=!1;for(let n of this._roots)if(tE(n),i=act(0,r,e,t),$A(),i)break;return i}shapecast(e,t,r){let i=this.geometry;if(e instanceof Function){if(t){let d=t;t=(h,f,g,p)=>{let m=f*3;return d(h,m,m+1,m+2,g,p)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=Hf.getPrimitive(),{boundsTraverseOrder:a,intersectsBounds:o,intersectsRange:s,intersectsTriangle:l}=e;if(s&&l){let d=s;s=(h,f,g,p,m)=>d(h,f,g,p,m)?!0:uee(h,f,i,l,g,p,n)}else s||(l?s=(d,h,f,g)=>uee(d,h,i,l,f,g,n):s=(d,h,f)=>f);let u=!1,c=0;for(let d of this._roots){if(tE(d),u=nct(0,i,o,s,a,c),$A(),u)break;c+=d.byteLength}return Hf.releasePrimitive(n),u}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:n}=r,a=this.geometry.index,o=this.geometry.attributes.position,s=e.geometry.index,l=e.geometry.attributes.position;S1.copy(t).invert();let u=Hf.getPrimitive(),c=Hf.getPrimitive();if(n){let h=function(f,g,p,m,y,b,w,x){for(let S=p,C=p+m;S<C;S++){lp(c,S*3,s,l),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let T=f,M=f+g;T<M;T++)if(lp(u,T*3,a,o),u.needsUpdate=!0,n(u,c,T,S,y,b,w,x))return!0}return!1};if(i){let f=i;i=function(g,p,m,y,b,w,x,S){return f(g,p,m,y,b,w,x,S)?!0:h(g,p,m,y,b,w,x,S)}}else i=h}e.getBoundingBox(oB),oB.applyMatrix4(t);let d=this.shapecast({intersectsBounds:h=>oB.intersectsBox(h),intersectsRange:(h,f,g,p,m,y)=>(aB.copy(y),aB.applyMatrix4(S1),e.shapecast({intersectsBounds:b=>aB.intersectsBox(b),intersectsRange:(b,w,x,S,C)=>i(h,f,b,w,p,m,S,C)}))});return Hf.releasePrimitive(u),Hf.releasePrimitive(c),d}intersectsBox(e,t){return ly.set(e.min,e.max,t),ly.needsUpdate=!0,this.shapecast({intersectsBounds:r=>ly.intersectsBox(r),intersectsTriangle:r=>ly.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},n=0,a=1/0){e.boundingBox||e.computeBoundingBox(),ly.set(e.boundingBox.min,e.boundingBox.max,t),ly.needsUpdate=!0;let o=this.geometry,s=o.attributes.position,l=o.index,u=e.attributes.position,c=e.index,d=Hf.getPrimitive(),h=Hf.getPrimitive(),f=XA,g=oct,p=null,m=null;i&&(p=sct,m=lct);let y=1/0,b=null,w=null;return S1.copy(t).invert(),Gx.matrix.copy(S1),this.shapecast({boundsTraverseOrder:x=>ly.distanceToBox(x),intersectsBounds:(x,S,C)=>C<y&&C<a?(S&&(Gx.min.copy(x.min),Gx.max.copy(x.max),Gx.needsUpdate=!0),!0):!1,intersectsRange:(x,S)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:C=>Gx.distanceToBox(C),intersectsBounds:(C,T,M)=>M<y&&M<a,intersectsRange:(C,T)=>{for(let M=C*3,A=(C+T)*3;M<A;M+=3){lp(h,M,c,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let P=x*3,O=(x+S)*3;P<O;P+=3){lp(d,P,l,s),d.needsUpdate=!0;let j=d.distanceToTriangle(h,f,p);if(j<y&&(g.copy(f),m&&m.copy(p),y=j,b=P/3,w=M/3),j<n)return!0}}}});{let C=c?c.count:u.count;for(let T=0,M=C;T<M;T+=3){lp(h,T,c,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let A=x*3,P=(x+S)*3;A<P;A+=3){lp(d,A,l,s),d.needsUpdate=!0;let O=d.distanceToTriangle(h,f,p);if(O<y&&(g.copy(f),m&&m.copy(p),y=O,b=A/3,w=T/3),O<n)return!0}}}}}),Hf.releasePrimitive(d),Hf.releasePrimitive(h),y===1/0?null:(r.point?r.point.copy(g):r.point=g.clone(),r.distance=y,r.faceIndex=b,i&&(i.point?i.point.copy(m):i.point=m.clone(),i.point.applyMatrix4(S1),g.applyMatrix4(S1),i.distance=g.sub(i.point).length(),i.faceIndex=w),r)}closestPointToPoint(e,t={},r=0,i=1/0){let n=r*r,a=i*i,o=1/0,s=null;if(this.shapecast({boundsTraverseOrder:u=>(Hx.copy(e).clamp(u.min,u.max),Hx.distanceToSquared(e)),intersectsBounds:(u,c,d)=>d<o&&d<a,intersectsTriangle:(u,c)=>{u.closestPointToPoint(e,Hx);let d=e.distanceToSquared(Hx);return d<o&&(XA.copy(Hx),o=d,s=c),d<n}}),o===1/0)return null;let l=Math.sqrt(o);return t.point?t.point.copy(XA):t.point=XA.clone(),t.distance=l,t.faceIndex=s,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{hp(0,new Float32Array(t),cee),e.union(cee)}),e}},sk=Av(s$e()),uct=.5*(Math.sqrt(3)-1),$x=(3-Math.sqrt(3))/6,cct=1/3,$f=1/6,jE=e=>Math.floor(e)|0,dee=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),sB=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function dct(e=Math.random){let t=exe(e),r=new Float64Array(t).map(n=>dee[n%12*2]),i=new Float64Array(t).map(n=>dee[n%12*2+1]);return function(n,a){let o=0,s=0,l=0,u=(n+a)*uct,c=jE(n+u),d=jE(a+u),h=(c+d)*$x,f=c-h,g=d-h,p=n-f,m=a-g,y,b;p>m?(y=1,b=0):(y=0,b=1);let w=p-y+$x,x=m-b+$x,S=p-1+2*$x,C=m-1+2*$x,T=c&255,M=d&255,A=.5-p*p-m*m;if(A>=0){let j=T+t[M],D=r[j],I=i[j];A*=A,o=A*A*(D*p+I*m)}let P=.5-w*w-x*x;if(P>=0){let j=T+y+t[M+b],D=r[j],I=i[j];P*=P,s=P*P*(D*w+I*x)}let O=.5-S*S-C*C;if(O>=0){let j=T+1+t[M+1],D=r[j],I=i[j];O*=O,l=O*O*(D*S+I*C)}return 70*(o+s+l)}}function hct(e=Math.random){let t=exe(e),r=new Float64Array(t).map(a=>sB[a%12*3]),i=new Float64Array(t).map(a=>sB[a%12*3+1]),n=new Float64Array(t).map(a=>sB[a%12*3+2]);return function(a,o,s){let l,u,c,d,h=(a+o+s)*cct,f=jE(a+h),g=jE(o+h),p=jE(s+h),m=(f+g+p)*$f,y=f-m,b=g-m,w=p-m,x=a-y,S=o-b,C=s-w,T,M,A,P,O,j;x>=S?S>=C?(T=1,M=0,A=0,P=1,O=1,j=0):x>=C?(T=1,M=0,A=0,P=1,O=0,j=1):(T=0,M=0,A=1,P=1,O=0,j=1):S<C?(T=0,M=0,A=1,P=0,O=1,j=1):x<C?(T=0,M=1,A=0,P=0,O=1,j=1):(T=0,M=1,A=0,P=1,O=1,j=0);let D=x-T+$f,I=S-M+$f,q=C-A+$f,$=x-P+2*$f,X=S-O+2*$f,N=C-j+2*$f,Q=x-1+3*$f,F=S-1+3*$f,L=C-1+3*$f,Y=f&255,ae=g&255,re=p&255,H=.6-x*x-S*S-C*C;if(H<0)l=0;else{let J=Y+t[ae+t[re]];H*=H,l=H*H*(r[J]*x+i[J]*S+n[J]*C)}let se=.6-D*D-I*I-q*q;if(se<0)u=0;else{let J=Y+T+t[ae+M+t[re+A]];se*=se,u=se*se*(r[J]*D+i[J]*I+n[J]*q)}let le=.6-$*$-X*X-N*N;if(le<0)c=0;else{let J=Y+P+t[ae+O+t[re+j]];le*=le,c=le*le*(r[J]*$+i[J]*X+n[J]*N)}let ee=.6-Q*Q-F*F-L*L;if(ee<0)d=0;else{let J=Y+1+t[ae+1+t[re+1]];ee*=ee,d=ee*ee*(r[J]*Q+i[J]*F+n[J]*L)}return 32*(l+u+c+d)}}function exe(e){let t=new Uint8Array(512);for(let r=0;r<512/2;r++)t[r]=r;for(let r=0;r<512/2-1;r++){let i=r+~~(e()*(256-r)),n=t[r];t[r]=t[i],t[i]=n}for(let r=256;r<512;r++)t[r]=t[r-256];return t}var ml=new va,fct=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let n=1;ml.a.fromBufferAttribute(e,i),ml.b.fromBufferAttribute(e,i+1),ml.c.fromBufferAttribute(e,i+2),n*=ml.getArea(),t[i/3]=n}this.distribution=new Float32Array(e.count/3);let r=0;for(let i=0;i<t.length;i++)r+=t[i],this.distribution[i]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let r=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*r);return this.sampleFace(i,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,r=0,i=t.length-1,n=-1;for(;r<=i;){let a=Math.ceil((r+i)/2);if(a===0||t[a-1]<=e&&t[a]>e){n=a;break}else e<t[a]?i=a-1:r=a+1}return n}sampleFace(e,t,r){let i=this.randomFunction(),n=this.randomFunction();return i+n>1&&(i=1-i,n=1-n),ml.a.fromBufferAttribute(this.positionAttribute,e*3),ml.b.fromBufferAttribute(this.positionAttribute,e*3+1),ml.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(ml.a,i).addScaledVector(ml.b,n).addScaledVector(ml.c,1-(i+n)),ml.getNormal(r),this}},pct=Av(j1e()),mct=new dt,gct=new dt,vct=new dt,fb;(e=>{function t(r){return r&&r.__isSPEObject}e.is=t})(fb||(fb={}));var HW=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new dt,this.copyPreviousMatrix=!0,this.hiddenMatrix=new dt,this.matrixWorldRigid=new dt,this.shearScale=new dt,this.shearScaleInv=new dt}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof li&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseChildren(t,r=0){for(let i of this.children)fb.is(i)&&i.traverseObject(t,r+1)}traverseObject(t,r=0){if(t(this,r)!==!0)for(let i of this.children)fb.is(i)&&i.traverseObject(t,r+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,r=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:i,v:n,q:a}=(0,pct.SVD)(r),o=mct.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),s=gct.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),l=vct.copy(s).transpose();this.shearScale.makeScale(a[0],a[1],a[2]).multiply(l).premultiply(s),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,l).copyPosition(this.matrixWorld),a.every(u=>Math.abs(a[0]-u)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,r){this.updateWorldMatrix(!0,!1);let i=new dt().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof dt?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!1){return super.copy(t,r),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,r,i,n,a,o){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},yct=class extends HW(li){},bct=e=>e.type==="Mesh",_a=class extends yct{constructor(t){super(),this.object=t,this.matrixAutoUpdate=!1,this.hasNonUniformScale=t.hasNonUniformScale}raycast(t,r){}expand(){let t=0,r=this.object.entityChildren(t);for(;r;){let i=this.children[t];(i==null?void 0:i.object)!==r&&(i&&this.remove(i),i=new _a(r),this.add(i),this.children.splice(t,0,this.children.pop()),i.matrixWorldNeedsUpdate=!0,i.matrixAutoUpdate=!1,i.matrix=r.matrix,i.hiddenMatrix=r.hiddenMatrix),i.expand(),t+=1,r=this.object.entityChildren(t)}for(;this.children.length>t;)this.remove(this.children[t])}get visible(){var t;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((t=this.object.dataPatched.cloner)==null?void 0:t.hideBase)===!0}set visible(t){}get castShadow(){return this.object.castShadow}set castShadow(t){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(t){}get isMesh(){return bct(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(t){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},C0=new k,E0=new k,y_=new dt,txe=[new k(-1,1,1),new k(-1,-1,1),new k(1,-1,1),new k(1,1,1),new k(-1,1,-1),new k(-1,-1,-1),new k(1,-1,-1),new k(1,1,-1)],_ct=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],wct=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],hee=(e,t,r)=>{e.updateEntityBoxSize(C0,E0),y_.copy(t).multiply(e.matrixWorld),E0.x===0&&E0.y===0&&E0.z===0?r.push(new k(C0.x,C0.y,C0.z).applyMatrix4(y_)):txe.forEach(i=>{r.push(i.clone().multiply(E0).add(C0).applyMatrix4(y_))})},fee=class extends dn{constructor(){super(...arguments),this.matrix=new dt,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new dt().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];return r===!0?e.traverseEntity(n=>{if(n.visible||n.cloner&&n.data.visible){if(!("geometry"in n)){i.push(new k);return}hee(n,t,i)}}):hee(e,t,i),this.setFromPoints(i)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(y_.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(E0).multiplyScalar(.5),this.getCenter(C0),y_.copy(this.matrix).setPosition(C0),this.vertices=txe.map(e=>e.clone().multiply(E0).applyMatrix4(y_))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=_ct.map(([e,t])=>new Gs(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new k))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=wct.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},nv={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},xct=class extends c_e{constructor(){super()}getPoints(e=12){let t=[],r,i=this.getCurveLengths(),n=i[i.length-1]/i.length;for(let a=0,o=this.curves;a<o.length;a++){let s=o[a],l=a===0?i[a]:i[a]-i[a-1],u=Math.ceil(e*l/n),c=s.getPoints(u);for(let d=0;d<c.length;d++){let h=c[d];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},lk=.001;function uk(e,t,r){return t.clone().sub(e).cross(t.clone().sub(r)).length()<=lk}function lB(e,t){let r=new k(...e.position),i=new k(...e.controlNext.position),n=new k(...t.controlPrevious.position),a=new k(...t.position);return uk(r,i,a)&&uk(r,n,a)}function rxe(e){let t=e.points.map(c=>new k(...c.data.position)),r=[e.points[0]],i=new k(...r[0].data.position);for(let c=0;c<e.points.length-1;c++)uk(i,t[c],t[c+1])||(r.push(e.points[c]),i=t[c]);r.push(e.points[e.points.length-1]);let n=e.isClosed,a=r.length-(n?0:1),o=r.length,s=[];for(let c=0;c<o;c++){let d=r[c].data,h=new k(...d.position),f=new k(...d.controlPrevious.position),g=new k(...d.controlNext.position),p={position:h,baseRoundness:d.roundness,controlPrevious:f,controlNext:g};if(d.roundness===0||!e.isClosed&&(c===0||c===o-1)){s[c]={...p,removedLength:0};continue}let m=n&&c==0?o-1:c-1,y=n&&c==o-1?0:c+1,b=r[m].data,w=r[y].data,x=new k(...b.position),S=new k(...w.position),C=x.clone().sub(h).normalize(),T=S.clone().sub(h).normalize();Object.assign(p,{prevDir:C,nextDir:T});let M=lB(b,d),A=lB(d,w);if(!M||!A)s[c]={...p,removedLength:0};else{let P=C.clone().add(T).normalize(),O=P.clone().cross(C).length()/C.dot(P);s[c]={...p,tan:O,removedLength:d.roundness/O}}}for(let c=0;c<a;c++){let d=c,h=n&&c===o-1?0:c+1,f=s[d],g=s[h];if(f.removedLength!==0||g.removedLength!==0){let p=f.position.distanceTo(g.position);f.removedLength=Math.min(f.removedLength,p/2),g.removedLength=Math.min(g.removedLength,p/2)}}let l=[];for(let c=0;c<a;c++){let d=c,h=n&&c===o-1?0:c+1,f=s[d],g=s[h],p=null;if(!lB(r[d].data,r[h].data))f.position.distanceTo(g.position)>lk&&(p=new oR(f.position,f.controlNext,g.controlPrevious,g.position));else{let m=f.position.clone(),y=g.position.clone();(f.removedLength!==0||g.removedLength!==0)&&(f.nextDir&&m.add(f.nextDir.clone().setLength(f.removedLength)),g.prevDir&&y.add(g.prevDir.clone().setLength(g.removedLength))),m.distanceTo(y)>lk&&(p=new oR(m,m.clone().lerp(y,.3),y.clone().lerp(m,.3),y))}l[2*c+1]=p}for(let c=0;c<o;c++){let d=s[c];if(d.removedLength===0){l[2*c]=null;continue}let h=d.position,f=d.prevDir.clone().multiplyScalar(d.removedLength).add(h),g=d.nextDir.clone().multiplyScalar(d.removedLength).add(h),p=d.tan*d.removedLength,m=d.prevDir.clone().add(d.nextDir).normalize(),y=f.clone().lerp(g,.5),b=f.distanceTo(g)/2,w=m.clone().multiplyScalar(Math.sqrt(Math.pow(p,2)-Math.pow(b,2))).add(y),x=m.clone().multiplyScalar(-p).add(w),S=h.distanceTo(x)/h.distanceTo(y),C=d.prevDir.clone().multiplyScalar(S*h.distanceTo(f)).add(h),T=C.clone().lerp(x,2),M=f.clone().lerp(C,4/3),A=g.clone().lerp(T,4/3);l[2*c]=new oR(f,M,A,g)}let u=new xct;return l.forEach(c=>{c&&u.add(c)}),u}var Vr;(e=>{function t(r){return r&&r.__isEntity}e.is=t})(Vr||(Vr={}));var xm=e=>Vr.is(e),Sct={type:"completeState",isfromEntity:!0},Cct=["x","y","z"],uB=new k,Ect=new k().set(0,1,0),$W=e=>class extends HW(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new fee,this._recursiveBBox=new fee,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let r=this.children[t];if(Vr.is(r))return r}entityChildrenCount(){let t=this.children.length;for(;t--;)if(Vr.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let r=t.parent;if(Vr.is(r))t=r;else return}return t}forInstancesRec(t){this.instances.forEach(r=>{r.disposed||t(r),r.forInstancesRec(t)})}super_Entity(t,r){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=r,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,r,i=!1){if(!(this.data.states.length===0&&!i)){for(let n of this.data.states)L0.toOps(this.data,n.data).forEach(a=>{let o=PD.replaceProps(a,this.data);this.dataPatched=this.data,this.updateByPatchedOp(o,this.data,r)});if(t!==null){let n=this.data.states.data(t);n&&(this.dataPatched=L0.patch(this.data,n),L0.toOps(this.data,n).forEach(a=>{this.updateByPatchedOp(a,this.dataPatched,r)}))}i&&this.updateTransformState(this.dataPatched,r),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,r){t.setScalar(0),r.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{xm(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let r;return this.traverseEntity(i=>{i.uuid===t&&(r=i)}),r}traverseSortNextHelper(){let t=this.parent;if(t){let r=t.children,i=r.indexOf(this)+1;if(Vr.is(r[i]))return r[i];if(Vr.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&Vr.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let r=this;for(;t>0&&r!==null;)r=r.parent,t-=1;return r}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let r=this.parent;for(;r;){if(t===r)return!0;r=r.parent}return!1}countToAccestor(t){let r=0,i=this;for(;i!==t;){if(i===null)return-1;i=i.parent,r+=1}return r}forEachEntity(t){for(let r of this.children)xm(r)&&t(r)}traverseEntityAncestors(t){this.traverseAncestors(r=>{Vr.is(r)&&t(r)})}traverseConcreteEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)xm(i)&&i.isConcreteEntity&&i.traverseEntity(t,r+1)}traverseEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)xm(i)&&i.traverseEntity(t,r+1)}traverseVisibleEntity(t){t(this);for(let r of this.children)xm(r)&&r.visible&&r.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,r=!1){return super.copy(t,r),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>xm(t))}isAncestorOf(t){if(this.uuid===t)return!1;let r=!1;return this.traverseEntity(i=>{i.uuid===t&&(r=!0)}),r}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x*Ot.RAD2DEG,this.rotation.y*Ot.RAD2DEG,this.rotation.z*Ot.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return g6(r,t)}getTransformValues(t,r,i){return r[t].map((n,a)=>(i==null?void 0:i.shared.getVariable(n,[this.uuid,t,Cct[a]]))??n)}updateTransformState(t,r){let i=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,r)),i=!0),t.rotation&&(uB.fromArray(this.getTransformValues("rotation",t,r)).multiplyScalar(Ot.DEG2RAD),this.rotation.setFromVector3(uB),i=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,r)),i=!0),t.hiddenMatrix!==void 0&&(i=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Y_.identity)),i&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(n=>{n.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),i}onVariableUpdate(t=!1){if(t){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(r=>{r.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)Vr.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{Vr.is(t)&&t.disposeRecursively()})}toState(t=[]){let r={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return g6(r,t)}updateByObjUpdateOp(t,r){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},r,!1)}updateByOp(t,r,i,n){let a=this.data;this.data=r;let o=t,s=yi(t.path,["states","*"]);if(s!==null){if(t.type===0){let[l]=s;if((this==null?void 0:this.stateSelection)===l){let u={...t.props};if(delete u.name,Object.values(t.props).some(c=>c===void 0)){let c=this.data;if(c!==void 0){let d=Ln.zoom(c,t.path.slice(2));if(d)for(let h in t.props)t.props[h]===void 0&&h in d&&(u[h]=d[h])}}o={...t,props:u,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:c,...d}=l;l=d}if(t.props.material!==void 0&&"material"in l){let{material:c,...d}=l;l=d}let u=Ln.removeOverridden(t.path,t.props,l);o={...t,props:u}}}if(this.updateByPatchedOpBase(o,L0.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),yi(t.path,["overrides"])){let l=[],u=[...t.path];for(l.push(u[1]),u.splice(0,2);u.length>0&&u[0]==="descendants";)l.push(u[1]),u.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let c of Object.keys(t.props)){l[l.length-1]=c;let d=i.scene.findInstance([this.uuid,...l]);d&&(d.overrideData=t.props[c],d.updateState(cv.apply(d.component.data,d.overrideData),i))}}else{let c=i.scene.findInstance([this.uuid,...l]);if(c){let d=Ln.zoom(c.component.data,u);if(t={...t,path:u},t.type===0){let h=t.props;if(d)for(let[f,g]of Object.entries(t.props))g===void 0&&(h===t.props&&(h={...t.props}),h[f]=d[f]);t={...t,props:h}}c.overrideData=FD.resolve(r.overrides,l),c.updateByOp(t,Jn.applySimple(c.data,t),i,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let u;for(let c of rv.rootOverrideProps)c in t.props&&(u===void 0&&(u={}),u[c]=t.props[c]);u&&(l={...t,props:u})}else for(let u of rv.rootOverrideProps)if(yi(t.path,[u])){l=t;break}l!==void 0&&this.instances.forEach(u=>{if(u.isInstanceRoot){let c=cv.filterOp(u.overrideData,l);c&&u.updateByOp(c,Jn.applySimple(u.data,c),i,!0)}}),this.instances.forEach(u=>{if(!u.isInstanceRoot){let c=cv.filterOp(u.overrideData,t);if(c){let d;a===u.data&&t===c?d=r:d=Jn.applySimple(u.data,c),u.updateByOp(c,d,i,!0)}}})}}updateByPatchedOpBase(t,r,i){if(this.dataPatched=r,t.path.length===0&&t.type===0)t.props.type!==void 0&&!hb.is(t.props.type)&&nv.changeEntityProptotype(this,r,i);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){nv.changeEntityProptotype(this,r,i);for(let n of this.children)Vr.is(n)&&n.updateVisible(i.scene)}this.updateByPatchedOp(t,r,i)}updateByPatchedOp(t,r,i){var n;if(t.path.length===0&&t.type===0?this.updateState(t.props,i):t.type===0&&("resolutionLevel"in t.props||"useChildrenColors"in t.props)&&this.updateState(r,i),t.path[0]==="morphTargetInfluences"&&t.type===0){let a=(n=r.morphTargetInfluences.get(t.path[1]))==null?void 0:n.data.name;a&&this.updateMorphInfluences(a,i.shared.getVariable(t.props.value,[this.uuid,"morphTargetInfluences",a]))}if(yi(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(r.pathSnapping),yi(t.path,["cloner"])!==null){let a=Jn.drop(t,1);a.path.length===0&&a.type===0&&a.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(r.cloner,i.scene):(this.setFromClonerState(r.cloner,i),this.expandCloner(i.scene)),this.updateVisible(i.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var g,p,m,y,b;let r=((g=this._updatedPathSnapping)==null?void 0:g.pathId)??this.dataPatched.pathSnapping.pathId,i=((p=this._updatedPathSnapping)==null?void 0:p.slide)??this.dataPatched.pathSnapping.slide??0,n=((m=this._updatedPathSnapping)==null?void 0:m.offset)??this.dataPatched.pathSnapping.offset??0,a=((y=this._updatedPathSnapping)==null?void 0:y.orientation)??this.dataPatched.pathSnapping.orientation;if(r===null)return;let o=t.find(r);if(!o||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let s=o.data;if(s.geometry.path.points.length<=1)return;let l=rxe(s.geometry.path),u=(i+n)%1;i+n===1&&u===0&&(u=1);let c=null;try{c=l.curves.length?l.getPointAt(u):null}catch{}if(c===null)return;let d=this.parent?(b=this.parent)==null?void 0:b.matrixWorld:new dt;o.updateMatrixWorld();let h=new dt().multiplyMatrices(d.clone().invert(),o.matrixWorld);c.applyMatrix4(h);let f={position:c.toArray(),rotation:s.rotation};if(a==="tangential"){let w=new dt().extractRotation(o.matrixWorld),x=l.getTangentAt(u).applyMatrix4(w).add(c),S=new dt().lookAt(c,x,Ect),C=uB.setFromEuler(new Bn().setFromRotationMatrix(S)).multiplyScalar(Ot.RAD2DEG);f={...f,rotation:C.toArray()}}this.updateTransformState(f),this.traverseEntity(w=>{w._cameraType&&w.dispatchEvent(Sct)})}updateVisible(t){var i;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((i=this.dataPatched.cloner)==null?void 0:i.hideBase)!==!0),!t)return;let r=!1;this.traverseEntity(n=>{if(n.data.type==="Splat")return r=!0,!0}),r&&t.reloadSplats()}updateState_Entity(t,r){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(r==null?void 0:r.scene),this.resetBBoxNeedsUpdate()),r&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,r),this.updateVisible(r.scene)),this.updateTransformState(t,r)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof nv.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,r){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new nv.Cloner(this,t),r.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,r.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}requestRender(){this.dispatchEvent({type:"requestRender"})}},ixe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var l,u;let r=(l=e.parameters)==null?void 0:l.radiusTop,i=(u=e.parameters)==null?void 0:u.radiusBottom,n=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);n.thetaLength=Ot.clamp(n.thetaLength,0,360);let a=n.width/2,o=n.radiusTop??a,s=n.radiusBottom??a;if(o===s?(o=a,s=a):o>s?(o=a,s=s*a/o):(o=o*a/s,s=a),n.shapeBlendNode){o=r??a,s=i??a;let c=Math.max(o,s)*2;n.width=c,n.depth=c}return{parameters:Object.assign(n,{width:Math.abs(n.width),height:Math.abs(n.height??n.width),depth:Math.abs(n.depth??n.width),radiusTop:o,radiusBottom:s})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l,radiusTop:u,radiusBottom:c,cornerRadius:d,cornerSegments:h,hollow:f}=e.parameters,g;return l===0?(g=new Wt,g.setAttribute("position",new Pt([],3))):d||f?g=new nxe(u,c,i,n,a,o,s,l*Math.PI/180,d,d,h,f):g=new dW(u,c,i,n,a,o,s,l*Math.PI/180),g.scale(1,1,r/t),Object.assign(g,{userData:{...e,type:"CylinderGeometry"}})}};function Ag(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function pee(e){return new ze(e.y,-e.x)}var nxe=class extends Wt{constructor(e,t,r,i,n,a,o,s,l,u,c,d,h=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,a=a!==void 0?a:!1,o=o!==void 0?o:0,s=s!==void 0?s:Math.PI*2,a&&(l=0,u=0);let f=[],g=[],p=[],m=[],y=0,b=r/2,w=new k,x=new k;h&&e==0&&(e=l),h&&t==0&&(t=u);let S=new ze(e,b),C=new ze(t,-b),T=null,M=null,A=null,P=null,O=S.clone().sub(C),j=0,D=0,I=0;d>0&&(j=Math.min(e,t)*(1-d),D=e-j,I=t-j);let q=S.clone();q.x-=j;let $=Math.PI-O.angle(),X=O.angle(),N=Math.tan(X/2),Q=Math.tan($/2),F=N+Q,L=d?F:Q,Y=d?F:N;if(l=Math.min(l,(e-D)/L,O.length()/F),u=Math.min(u,(t-I)/Y,O.length()/F),l>0){let ee=l/N;T=S.clone().sub(new ze(ee,l)),d&&(A=T.clone(),A.x-=j-F*l),S.sub(O.clone().setLength(ee))}if(u>0){let ee=u/Q;M=C.clone().sub(new ze(ee,-u)),C.add(O.clone().setLength(ee)),d&&(P=M.clone(),P.x-=j-F*u,q.sub(O.clone().setLength(ee)))}O=S.clone().sub(C);let ae=O.length()<.5,re=[];for(let ee=0;ee<=i;ee++){let J=[],oe=ee/i,me=oe*s+o,be=new ze(Math.sin(me),Math.cos(me));P&&M?(H(J,oe,be,$,u,P,-1,!0),H(J,oe,be,X,u,M,-1,!1)):M?(se(J,be,M.x,0,-1),H(J,oe,be,X,u,M,-1,!1)):a||se(J,be,t,I,-1);let de=pee(O).normalize();if(Ag(de,be,w),!ae)for(let ge=0;ge<=n;ge++){let ce=ge/n,Ce=O.clone().multiplyScalar(ce).add(C);Ag(Ce,be,x),g.push(x.x,x.y,x.z),p.push(w.x,w.y,w.z),m.push(oe,.5+x.y/r),J.push(y++)}if(A&&T?(H(J,oe,be,$,l,T,1,!1),H(J,oe,be,X,l,A,1,!0)):T?(H(J,oe,be,$,l,T,1,!1),se(J,be,T.x,0,1)):a||se(J,be,e,D,1),d&&!ae){let ge=pee(O).multiplyScalar(-1).normalize();Ag(ge,be,w);for(let ce=0;ce<=n;ce++){let Ce=ce/n,Ee=O.clone().multiplyScalar(-Ce).add(q);Ag(Ee,be,x),g.push(x.x,x.y,x.z),p.push(w.x,w.y,w.z),m.push(oe,.5+x.y/r),J.push(y++)}}d&&!a&&J.push(J[0]),re.push(J)}for(let ee=0;ee<re.length-1;ee++)for(let J=0;J<re[0].length-1;J++){if(a&&d&&J==n)continue;let oe=re[ee][J],me=re[ee+1][J],be=re[ee+1][J+1],de=re[ee][J+1],ge=g[be*3+0],ce=g[be*3+2];f.push(oe,me,de),(ge!=0||ce!=0)&&f.push(me,be,de)}s<Math.PI*2&&(le(-1,re[0],o),le(1,re[re.length-1],o+s)),this.setIndex(f),this.setAttribute("position",new Pt(g,3)),this.setAttribute("normal",new Pt(p,3)),this.setAttribute("uv",new Pt(m,2));function H(ee,J,oe,me,be,de,ge,ce){for(let Ce=0;Ce<c+1;Ce++){let Ee=Ce/c,Me=ge<0?Ee:1-Ee;ce&&(Me-=1),Me*=me;let he=new ze(Math.sin(Me),Math.cos(Me)*ge),Ae=he.clone().multiplyScalar(be).add(de);Ag(Ae,oe,x),g.push(x.x,x.y,x.z),Ag(he,oe,w),p.push(w.x,w.y,w.z),m.push(J,.5+x.y/r),ee.push(y++)}}function se(ee,J,oe,me,be){let de=new k,ge=new ze,ce=[oe,me];be<0&&ce.reverse();for(let Ce of ce)ge.set(Ce,b*be),Ag(ge,J,de),g.push(de.x,de.y,de.z),p.push(0,be,0),m.push(.5,.5),ee.push(y++)}function le(ee,J,oe){let me=new ze(Math.sin(oe),Math.cos(oe)),be=new ze(-Math.cos(oe),Math.sin(oe)),de=new k,ge=ee<0?(Ee,Me,he)=>f.push(Ee,Me,he):(Ee,Me,he)=>f.push(Ee,he,Me),ce=new ze((e+t+D+I)/4,0);Ag(ce,me,de),g.push(de.x,de.y,de.z),p.push(be.x,0,be.y),m.push(.5,.5);let Ce=y++;for(let Ee of J){let Me=g.slice(Ee*3,Ee*3+3);g.push(...Me),p.push(be.x,0,be.y);let he=m.slice(Ee*2,Ee*2+2);m.push(...he),y++}for(let Ee=Ce+1;Ee<y-1;Ee++)ge(Ce,Ee,Ee+1);ge(Ce,y-1,Ce+1)}}},Mct=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return r.thetaLength=Ot.clamp(r.thetaLength,0,360),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l,cornerRadiusTop:u,cornerRadiusBottom:c,cornerSegments:d}=e.parameters,h;return l===0?(h=new Wt,h.setAttribute("position",new Pt([],3))):u>0||c>0||l<360?h=new nxe(0,t/2,i,n,a,o,s,l*Math.PI/180,u,c,d,0,!0):h=new hW(t/2,i,n,a,o),h.scale(1,1,r/t),Object.assign(h,{userData:{...e,type:"ConeGeometry"}})}},Pct=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,widthSegments:n,heightSegments:a,depthSegments:o,cornerRadius:s,cornerSegments:l}=e.parameters,u;return s===0?u=new Af(t,r,i,n,a,o):u=new Tct(t,r,i,n,a,o,s,l),Object.assign(u,{userData:{...e,type:"CubeGeometry"}})}},cB=Math.PI/2,Tct=class extends Wt{constructor(e=1,t=1,r=1,i=1,n=1,a=1,o=0,s=4){super(),this.type="BoxGeometry",i=Math.floor(i),n=Math.floor(n),a=Math.floor(a),s=Math.floor(s),o=Math.min(o,e/2,t/2,r/2);let l=[],u=[],c=[],d=[],h=0;f("z","y","x",-1,-1,r,t,e,a,n),f("z","y","x",1,-1,r,t,-e,a,n),f("x","z","y",1,1,e,r,t,i,a),f("x","z","y",1,-1,e,r,-t,i,a),f("x","y","z",1,-1,e,t,r,i,n),f("x","y","z",-1,-1,e,t,-r,i,n),o>0&&(g("z","y","x",-1,-1,1,r,t,e,a),g("z","y","x",1,-1,-1,r,t,e,a),g("z","y","x",-1,1,-1,r,t,e,a),g("z","y","x",1,1,1,r,t,e,a),g("x","y","z",-1,-1,-1,e,t,r,i),g("x","y","z",1,-1,1,e,t,r,i),g("x","y","z",-1,1,1,e,t,r,i),g("x","y","z",1,1,-1,e,t,r,i),g("y","x","z",-1,-1,1,t,e,r,n),g("y","x","z",1,-1,-1,t,e,r,n),g("y","x","z",1,1,1,t,e,r,n),g("y","x","z",-1,1,-1,t,e,r,n),p(1,1,1),p(-1,1,1),p(1,-1,1),p(-1,-1,1),p(1,1,-1),p(-1,1,-1),p(1,-1,-1),p(-1,-1,-1)),this.setIndex(l),this.setAttribute("position",new Pt(u,3)),this.setAttribute("normal",new Pt(c,3)),this.setAttribute("uv",new Pt(d,2));function f(m,y,b,w,x,S,C,T,M,A){let P=(S-2*o)/M,O=(C-2*o)/A,j=S/2-o,D=C/2-o,I=T/2,q=M+1,$=A+1,X=0,N=new k;for(let Q=0;Q<$;Q++){let F=Q*O-D;for(let L=0;L<q;L++){let Y=L*P-j;N[m]=Y*w,N[y]=F*x,N[b]=I,u.push(N.x,N.y,N.z),N[m]=0,N[y]=0,N[b]=T>0?1:-1,c.push(N.x,N.y,N.z),d.push(L/M),d.push(1-Q/A),X+=1}}for(let Q=0;Q<A;Q++)for(let F=0;F<M;F++){let L=h+F+q*Q,Y=h+F+q*(Q+1),ae=h+(F+1)+q*(Q+1),re=h+(F+1)+q*Q;l.push(L,Y,re),l.push(Y,ae,re)}h+=X}function g(m,y,b,w,x,S,C,T,M,A){let P=(C-2*o)/A,O=C/2-o,j=T/2-o,D=M/2,I=A+1,q=0,$=new k,X=new k;for(let N=0;N<s+1;N++){let Q=N/s*cB,F=Math.sin(Q)*o,L=(1-Math.cos(Q))*o,Y=Math.sin(Q),ae=Math.cos(Q);$[y]=(j+F)*x,$[b]=(D-L)*S,X[m]=0,X[y]=Y*Math.sign($[y]),X[b]=ae*Math.sign($[b]);for(let re=0;re<I;re++){let H=re*P-O;$[m]=H*w,u.push($.x,$.y,$.z),c.push(X.x,X.y,X.z),d.push(re/A),d.push(0),q+=1}}for(let N=0;N<s;N++)for(let Q=0;Q<A;Q++){let F=h+Q+I*N,L=h+Q+I*(N+1),Y=h+(Q+1)+I*(N+1),ae=h+(Q+1)+I*N;l.push(F,L,ae),l.push(L,Y,ae)}h+=q}function p(m,y,b){let w=new k,x=new k(e/2,t/2,r/2);x.subScalar(o);let S=[],C=m*y*b>0?(M,A,P)=>l.push(M,A,P):(M,A,P)=>l.push(M,P,A);for(let M=0;M<=s;M++){let A=[],P=cB*(1-M/s),O=Math.cos(P),j=Math.sin(P),D=0;for(let I=0;I<=M;I++){let q=Math.cos(D),$=Math.sin(D);w.x=O*q,w.y=j,w.z=O*$;let X=x.clone().addScaledVector(w,o);u.push(m*X.x,y*X.y,b*X.z),c.push(m*w.x,y*w.y,b*w.z),d.push(0,0),A.push(h++),D+=cB/M}S.push(A)}let T=S.length-1;for(let M=0;M<T;M++){let A=S[M],P=S[M+1],O=A.length-1;C(A[0],P[1],P[0]);for(let j=1;j<=O;j++)C(A[j-1],A[j],P[j]),C(A[j],P[j+1],P[j])}}}},XW=class extends Wt{constructor(e=[],t=[],r="",i=1,n=.2,a=4){super(),this.type="PolyhedronGeometryRound";let o=[],s=[],l=[];u(),c(),this.setAttribute("position",new Pt(o,3)),this.setAttribute("normal",new Pt(l,3)),this.setAttribute("uv",new Pt(s,2));return;function u(){var X;n=Math.min(1-1e-5,n),n==0&&(a=0);let d={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],h=new k,f=h.clone(),g=new va,p=n*i,m=i-p,y=a+1,b=new k,w=(N,Q)=>b.subVectors(N,Q).normalize(),x=(N,Q)=>Array(N).fill(void 0).map(Q),S=x(e.length/3,(N,Q)=>new k().fromArray(e,Q*3).setLength(i)),C=[],T=1e6;for(let N=0;N<S.length;N++){let Q=S[N],F=[],L,Y,ae,re=1e10,H=-1;for(;(H=t.indexOf(N,H+1))!=-1;){let J=H-H%3;L=t[J+(H+1)%3],Y=t[J+(H+2)%3],ae=Q.distanceToSquared(S[L]),re=Math.min(re,ae),F.push([L,Y,ae])}re+=1e-6;let se=[],le=0,ee=F.length;for(let J=0;J<ee;J++){[L,Y,ae]=F[le];let oe=((X=C[L])==null?void 0:X.includes(N))==!0;ae<=re&&se.push(L+ +oe*T),le=F.findIndex(me=>me[0]==Y)}C.push(se)}let M=[];{let N=0,Q=0,F,L,Y=d==3;for(let ae=0;ae<=a;ae++){F=ae*(ae+1)/2,L=(ae+1)*(ae+2)/2;for(let re=0;re<a-ae;re++)[N,Q]=[F+re+ae+2,L+re+ae+3],M.push(F,L,...Y?[Q,F]:[N,L],Q,N),[F,L]=[N,Q];M.push(F,L,F+a+2)}}let A=h.clone(),P=h.clone(),O=h.clone(),j=h.clone(),D=h.clone(),I=[],q=x(S.length,()=>x(d,()=>h.clone()));for(let N=0;N<S.length;N++){h.copy(S[N]).normalize(),A.copy(h).multiplyScalar(m);let Q=C[N];for(let se=0;se<Q.length;se++){let le=Q[se],ee=Q[(se+1)%d];g.setFromPointsAndIndices(S,N,le%T,ee%T),g.b.sub(g.a).setLength(1e10).add(g.a),g.c.sub(g.a).setLength(1e10).add(g.a),g.closestPointToPoint(A,q[N][se])}let F=[],L=[],Y=[],ae=new k;a==0&&[...q[N]].reduce((se,le)=>se.add(le),ae).multiplyScalar(1/d);for(let se=0;se<d;se++){let le=[],ee=(se-1+d)%d,J=q[N][ee],oe=q[N][se];h.copy(J).sub(A),f.copy(oe).sub(A);let me=A.angleTo(h),be=h.angleTo(f),de=Math.cos(me)*p;a==0?P.copy(ae):P.copy(A).setLength(m+de),L.push(de);let ge=[P,J,oe];for(let ce=0;ce<2;ce++){let Ce=ge[ce],Ee=ge[ce+1];j.subVectors(Ce,A),D.subVectors(Ee,A),O.crossVectors(j,D).normalize();for(let Me=0;Me<y;Me++){let he=[me,be][ce]*Me/y;h.copy(j).applyAxisAngle(O,he).add(A),F.push(h.clone()),ce&&(w(h,A),le.push([Me==0?Ce:h.clone(),b.clone()]))}ce&&(w(Ee,A),le.push([Ee,b.clone()]))}Y.push(le)}I.push(Y);let re=2*y,H=2;for(let se=0;se<d;se++){let le=re*se,ee=re*((se+1)%d),J=[F[le]];for(let me=1;me<y;me++){j=F[le+me],D=F[ee+me],J.push(j);for(let be=1,de=me-H+1;be<=de;be++)h.lerpVectors(j,D,be/(de+1)),h.sub(A).setLength(L[se]).add(A),J.push(h.clone());J.push(D)}for(let me=0;me<y;me++)J.push(F[me+y+le]);J.push(F[ee+y]);let oe=M.map(me=>J[me]);o.push(...oe.map(me=>[me.x,me.y,me.z]).flat()),l.push(...oe.map(me=>(w(me,A),[b.x,b.y,b.z])).flat())}}let $=[];for(let N=0;N<C.length;N++)for(let Q=0;Q<d;Q++){let F=C[N][Q];if(F<T){let L=C[F].findIndex(re=>re%T==N),Y=I[N][Q],ae=I[F][L];for(let re=0;re<y;re++){let H=Y[re],se=ae[y-re],le=Y[re+1],ee=ae[y-(re+1)];[H,se,le,le,se,ee].forEach(J=>{o.push(J[0].x,J[0].y,J[0].z),l.push(J[1].x,J[1].y,J[1].z)})}$.push(Y[0][0],ae[y][0],Y[y][0],ae[0][0])}}for(;$.length;){let N,Q,F,L;[N,Q]=$.splice(0,2);let Y=[N];for(;N!=Q;)Y.push(Q),F=$.indexOf(Q),L=F%2,Q=$.splice(F-L,2)[1-L];b.subVectors(Y[0],Y[1]).cross(h.subVectors(Y[0],Y[2])).normalize();let ae=b.dot(Y[0])<0;ae&&b.negate();for(let re=1;re<=Y.length-2;re++)[Y[re+ +ae],Y[re+1-+ae],Y[0]].forEach(H=>{o.push(H.x,H.y,H.z),l.push(b.x,b.y,b.z)})}}function c(){let d=new k;for(let C=0;C<o.length;C+=3){d.x=o[C+0],d.y=o[C+1],d.z=o[C+2];let T=x(d)/2/Math.PI+.5,M=S(d)/Math.PI+.5;s.push(T,1-M)}let h=new k,f=new k,g=new k,p=new k,m=new ze,y=new ze,b=new ze,w=(C,T,M,A)=>{A<0&&C.x===1&&(s[T]=C.x-1),M.x===0&&M.z===0&&(s[T]=A/2/Math.PI+.5)};for(let C=0,T=0;C<o.length;C+=9,T+=6){h.set(o[C+0],o[C+1],o[C+2]),f.set(o[C+3],o[C+4],o[C+5]),g.set(o[C+6],o[C+7],o[C+8]),m.set(s[T+0],s[T+1]),y.set(s[T+2],s[T+3]),b.set(s[T+4],s[T+5]),p.copy(h).add(f).add(g).divideScalar(3);let M=x(p);w(m,T+0,h,M),w(y,T+2,f,M),w(b,T+4,g,M)}for(let C=0;C<s.length;C+=6){let T=s[C+0],M=s[C+2],A=s[C+4],P=Math.max(T,M,A),O=Math.min(T,M,A);P>.9&&O<.1&&(T<.2&&(s[C+0]+=1),M<.2&&(s[C+2]+=1),A<.2&&(s[C+4]+=1))}function x(C){return Math.atan2(C.z,-C.x)}function S(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}}static fromJSON(e){return new XW(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},Act=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:a,cornerSides:o}=e.parameters,s=n===0&&a!==0?new axe(t*.5,a,o):new h_e(t*.5,n);return s.scale(1,r/t,i/t),Object.assign(s,{userData:{...e,type:"DodecahedronGeometry"}})}},axe=class extends XW{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],s="DodecahedronGeometry";super(a,o,s,e,t,r),this.type=s}static fromJSON(e){return new axe(e.radius,e.corner,e.cornerSides)}},Xx=1e-12,YW=class{constructor(e){this.position=new ze,this.startPosition=new ze,this.uuid=Ot.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new YW(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},ck=class extends YW{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new ck(this.parent).copy(this)}},b_=class extends YW{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new ck(this),new ck(this))}static create(e,t){let r=new b_(e,new ze(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,i=this.controls.length;r<i;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new b_(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,i;let e=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),t=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[e,t]}computeNormals(e=new ze,t=new ze){let[r,i]=this.computeTangents();return r&&i&&(mee(r,e),mee(i,t)),[e,t]}computeTangent(e=new ze){let[t,r]=this.computeTangents();return t&&r&&e.copy(t).add(r).normalize(),e}computeNormal(e=new ze){let[t,r]=this.computeNormals();return e.copy(t).add(r).normalize(),e}};function mee(e,t=new ze){let r=e.length();return t.set(-e.y/r,e.x/r)}var KW=e=>e,Iw=new ze,fI=new ze,Oct=new ze,Rct=new ze,Dct=new ze,Ict=new ze,oxe=new k,sxe=new k;function jct(e){let t=new ze;t.addVectors(e.v0,Iw.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new ze;return r.addVectors(e.v2,fI.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new _f(e.v0,t,r,e.v2)}function rE(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function zct(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function Bct(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function lxe(e,t,r){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),a=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((n*n+i*i-a*a)/(2*n*i))}function Lct(e,t,r){return vee(e,t)&&vee(t,r)&&dk(e.position,t.position,r.position)}function dk(e,t,r){return Iw.copy(t).sub(e).cross(fI.copy(r).sub(e))===0}function Fct(e,t,r,i,n){let a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=(e.y+t.y)/2,s=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(e.y-t.y)/a,u=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(t.x-e.x)/a;return i.set(s+l,o+u),n.set(s-l,o-u),[i,n]}function Nct(e,t,r){let i=e.distanceTo(r),n=t.distanceTo(r);return i<n?t:e}function Uct(e,t,r,i,n,a){let o=t.x-e.x,s=t.y-e.y,l=r.x-e.x,u=r.y-e.y,c=Math.sqrt((o+l)*(o+l)+(s+u)*(s+u)),d;return lxe(t,e,r)>Math.PI&&(c*=-1),rE(u,s)?d=(s+u)*(i/c-.5)*8/3/(o-l):d=(o+l)*(i/c-.5)*8/3/(u-s),n.set(t.x-d*s,t.y+d*o),a.set(r.x+d*u,r.y-d*l),[n,a]}function gee(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function vee(e,t){return dk(e.position,e.controls[1].position,t.position)&&dk(e.position,t.controls[0].position,t.position)}function Vct(e,t,r,i,n=.5){let a=Iw.subVectors(t,e).multiplyScalar(n).add(e),o=fI.subVectors(r,t).multiplyScalar(n).add(t),s=Oct.subVectors(i,r).multiplyScalar(n).add(r),l=a,u=Rct.subVectors(o,a).multiplyScalar(n).add(a),c=Dct.subVectors(s,o).multiplyScalar(n).add(o),d=s,h=Ict.subVectors(c,u).multiplyScalar(n).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,h.x,h.y,c.x,c.y,d.x,d.y,i.x,i.y]}function kct(e,t,r=12,i=!0){let n=sxe.set(0,0,0),a,o=0;for(let s=0;s<t.length;s++){let l=KW(t[s]),u=Iw,c=eb(l,r);for(let d=0;d<=c;d++)if(l instanceof _f||l instanceof bv||l instanceof Cf){if(l.getPoint(d/c,u),n.set(u.x,u.y,0),a!==void 0&&Bct(a,n))continue;a===void 0&&(a=oxe),a.copy(n),e.setXYZ(o,n.x,n.y,n.z),o++}}return i&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),e}function qct(e,t,r,i=12,n=!0){let a=sxe.set(0,0,0),o=0,s=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let u,c=KW(t[l]),d=Iw,h=eb(c,i);s.push(h);for(let f=0;f<=h;f++)if(c instanceof _f||c instanceof bv||c instanceof Cf){if(c.getPoint(f/h,d),a.set(d.x,d.y,0),u==null?void 0:u.equals(a))continue;u===void 0?u=oxe:(e.setXYZ(o,u.x,u.y,u.z),o++,e.setXYZ(o,a.x,a.y,a.z),o++),u.copy(a)}}return n&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),s}function yee(e,t=12,r=!1){let i=[];for(let n=0,a=e.length;n<a;n++){let o=e[n],s=0;if(r&&o.roundedCurveCorner!==void 0){let l=eb(o.roundedCurveCorner,t)*.5;n>0&&(i[n-1]+=l),s+=l}o.curveAfter!==void 0&&(s+=eb(o.curveAfter,t)),i.push(s)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(i[e.length-1]+=eb(e[0].roundedCurveCorner,t)*.5),i}function eb(e,t=12){return e&&e instanceof J2?t*2:e&&(e instanceof Cf||e instanceof u_e)?1:e&&e instanceof cW?t*e.points.length:t}function Wct(e,t,r=12,i=!0){let n,a=0;for(let o=0;o<t.length;o++){let s=KW(t[o]),l=eb(s,r),u=Iw;for(let c=0;c<=l;c++)if(s instanceof _f||s instanceof bv||s instanceof Cf){if(s.getPoint(c/l,u),n!==void 0&&zct(n,u,Xx))continue;n===void 0&&(n=fI),n.copy(u),e.push(u.x,u.y),a++}}return rE(e[0],e[e.length-2],Xx)&&rE(e[1],e[e.length-1],Xx)&&(e.pop(),e.pop()),i&&a>1&&!(rE(e[a-1],e[1],Xx)&&rE(e[a-2],e[0],Xx))&&(e.push(e[0],e[1]),a++),e}var dB=new ze,Gct=new ze,Hct=new ze,$ct=new ze,Xct=new ze,Yct=new ze,Qi=class extends hD{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new So(new k(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Ot.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let i=new Qi;return i.isClosed=e.isClosed,i.points=e.points.map(n=>b_.create(n.id,n.data)),typeof e.roundness=="number"&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(n=>Qi.createFromState(n)),t!==void 0&&r!==void 0&&i.applySize(t,r),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,r=this.points.findIndex(i=>i.uuid===e);if(r<0){let i=t;for(let n=0,a=this.shapeHoles.length;n<a;n++){let o=this.shapeHoles[n],s=o.points.length,l=o.getPointIndexById(e);if(l<0)i+=s;else return l+i}}return r}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],a=e-t;if(a<=n.points.length-1)return n.points[a];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],a=n.points.indexOf(e);if(a>=0)return t+a;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=dB.set(e,t);for(let i=0,n=this.points.length;i<n;i++){let a=this.points[i];a.position.multiply(r),a.controls[0].position.multiply(r),a.controls[1].position.multiply(r)}for(let i=0,n=this.shapeHoles.length;i<n;i++)this.shapeHoles[i].applyScale(e,t);this._update()}createPoint(e,t=0,r=Ot.generateUUID()){let i;e instanceof ze?i=e:i=new ze(e,t);let n=new b_(r,i);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,r=this.shapeHoles.length;t<r;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let i=r?this.roundedCurveDivisions:this.curveDivisions;return kct(e,r?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((n,a)=>n+a,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=yee(this.points,e,!1),this.roundedCurveDivisions=yee(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return qct(e,this.curves,t,r,this.autoClose).reduce((i,n)=>i+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),Wct(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=eb(this.points[0].roundedCurveCorner,this.subdivision)*.5);let a=e-n;a<0&&(a+=i.reduce((o,s)=>o+s,0));for(let o=0,s=i.length;o<s;o++){let l=i[o];if(a<r+l)return[o,(a-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let i=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],a=this.curveDivisions,o=a[e];if(gee(i,n)){let l=i.position.distanceTo(n.position);return i.position.distanceTo(dB.set(r.x,r.y))/l}let s=0;for(let l=0;l<e;l++)s+=a[l];return(t-s)/o}dispose(){}_applyCurveForPoint(e,t){gee(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let i=r.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(t===0)this.moveTo(i.position.x,i.position.y);else{let n=this.points[t-1];this._applyCurveForPoint(i,n)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],r=this.points[this.points.length-1];this._applyCurveForPoint(t,r)}if(this.points.length>2){let t=0;for(let r=0,i=this.points.length;r<i;r++){let n=this.points[r],a=this.points[r-1]??this.points[this.points.length-1],o=this.points[r+1]??this.points[0],s=n.roundness,l=a&&o&&Lct(a,n,o);if(!n.controlsMoved()&&s>0&&!l){let u=n.curveBefore,c=n.curveAfter;if(u===void 0||c===void 0)continue;let d=n.roundedCurveBefore,h=n.roundedCurveAfter,f=u.getLength(),g=c.getLength(),p=Math.min(s,f*.499),m=Math.min(s,g*.499),y=Math.min(p,m),b=1-y/f,w=y/g,x=u.getPointAt(b,dB),S=c.getPointAt(w,Gct);this._subSplitCurve(u,d,b,x,void 0),this._subSplitCurve(c,h,w,void 0,S);let C;if(this.useCubicForRoundedCorners){let T=lxe(x,n.position,S)/2,M=Math.tan(T)*x.distanceTo(n.position),[A,P]=Fct(x,S,M,Hct,$ct),O=Nct(A,P,n.position),[j,D]=Uct(O,x,S,M,Xct,Yct);C=new _f(x.clone(),j.clone(),D.clone(),S.clone())}else C=new bv(x.clone(),n.position.clone(),S.clone());n.roundedCurveCorner=C,this.roundedCurves.splice(r+t,0,C),t++}}}}_subSplitCurve(e,t,r,i,n){if(e instanceof Cf)i!==void 0&&t.v2.copy(i),n!==void 0&&t.v1.copy(n);else{let a=e,o=t,s=a.getUtoTmapping(r,0),l=Vct(a.v0,a.v1,a.v2,a.v3,s);return i!==void 0&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),n!==void 0&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return t}clone(){let e=new Qi(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var r;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let i=0;i<t;i++){let n=i*7,a=e.points[n+0],o=e.points[n+1],s=e.points[n+2],l=e.points[n+3],u=e.points[n+4],c=e.points[n+5],d=e.points[n+6],h=new b_(Ot.generateUUID(),new ze(a,o));h.controls[0].position.set(s,l),h.controls[1].position.set(u,c),h.roundness=d,this.points.push(h)}return this.shapeHoles=(r=e.shapeHoles)!=null&&r.length?e.shapeHoles.map(i=>{let n=new Qi;return n.fromJSON(i),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let r=(n,a)=>{a instanceof _f&&a.v3.equals(n.position)&&n.controls[0].position.copy(a.v2)},i=n=>{let a=[],o,s;for(o=0,s=n.length;o<s;o++)n[o]instanceof bv&&(n[o]=jct(n[o]));for(o=0,s=n.length;o<s;o++){let c=n[o],d=o>0?n[o-1]:null,h;c instanceof _f?(h=this.createPoint(c.v0),h.controls[1].position.copy(c.v1)):c instanceof Cf&&(h=this.createPoint(c.v1)),h!==void 0&&(d!==null&&r(h,d),a.push(h))}let l=n[n.length-1],u=!1;return l instanceof _f?l.v3.equals(a[0].position)&&(a[0].controls[0].position.copy(l.v2),u=!0):l instanceof Cf&&l.v2.equals(a[0].position)&&(u=!0),this.isClosed=u,a};return this.points=i(e.curves),e instanceof hD&&(this.shapeHoles=e.holes.map(n=>{let a=new Qi;return a.fromShape(n),a})),this.update(),this}updatePoint(e,t){let r=this.getPointByUuid(e);r&&(t.position!==void 0&&r.position.fromArray(t.position),t.roundness!==void 0&&(r.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},uxe=Math.PI*2;function hB({x:e,y:t},r,i,n,a){return{x:e*r+n,y:t*i+a}}function Kct(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),n=Math.sin(e),a=Math.cos(e+t),o=Math.sin(e+t);return[{x:i-n*r,y:n+i*r},{x:a+o*r,y:o-a*r},{x:a,y:o}]}function bee(e,t,r,i){let n=e*i-t*r<0?-1:1,a=Math.min(1,Math.max(-1,e*r+t*i));return n*Math.acos(a)}function Qct(e,t,r,i,n,a,o,s,l,u){let c=Math.pow(n,2),d=Math.pow(a,2),h=Math.pow(o,2),f=Math.pow(s,2),g=c*d-c*f-d*h;g<0&&(g=0),g/=c*f+d*h,g=Math.sqrt(g)*(l===u?-1:1);let p=g*n/a*s,m=g*-a/n*o,y=p+(e+r)/2,b=m+(t+i)/2,w=(o-p)/n,x=(s-m)/a,S=(-o-p)/n,C=(-s-m)/a,T=bee(1,0,w,x),M=bee(w,x,S,C);return M<0&&(M+=uxe),{centerx:y,centery:b,ang1:T,ang2:M}}function Jct({px:e,py:t,cx:r,cy:i,rx:n,ry:a,largeArcFlag:o,sweepFlag:s}){let l=[];if(n===0||a===0)return[];let u=(e-r)/2,c=(t-i)/2;if(u===0&&c===0)return[];n=Math.abs(n),a=Math.abs(a);let d=Math.pow(u,2)/Math.pow(n,2)+Math.pow(c,2)/Math.pow(a,2);d>1&&(n*=Math.sqrt(d),a*=Math.sqrt(d));let h=Qct(e,t,r,i,n,a,u,c,o,s),{ang1:f,ang2:g}=h,{centerx:p,centery:m}=h,y=Math.abs(g)/(uxe/4);Math.abs(1-y)<1e-7&&(y=1);let b=Math.max(Math.ceil(y),1);g/=b;for(let w=0;w<b;w++)l.push(Kct(f,g)),f+=g;return l.map(w=>{let{x,y:S}=hB(w[0],n,a,p,m),{x:C,y:T}=hB(w[1],n,a,p,m),{x:M,y:A}=hB(w[2],n,a,p,m);return{x1:x,y1:S,x2:C,y2:T,x:M,y:A}})}var di;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(di||(di={}));var wn;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(wn||(wn={}));function lr(e,t){if(!e)throw t||"Assertion Failed!"}var Jt=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,i){lr(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,a=i.s-r.s;return n+a>0?n<a?r.t-t.t+(t.t-i.t)*(n/(n+a)):r.t-i.t+(i.t-t.t)*(a/(n+a)):0},e.edgeSign=function(t,r,i){lr(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,a=i.s-r.s;return n+a>0?(r.t-i.t)*n+(r.t-t.t)*a:0},e.transEval=function(t,r,i){lr(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,a=i.t-r.t;return n+a>0?n<a?r.s-t.s+(t.s-i.s)*(n/(n+a)):r.s-i.s+(i.s-t.s)*(a/(n+a)):0},e.transSign=function(t,r,i){lr(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,a=i.t-r.t;return n+a>0?(r.s-i.s)*n+(r.s-t.s)*a:0},e.vertCCW=function(t,r,i){return t.s*(r.t-i.t)+r.s*(i.t-t.t)+i.s*(t.t-r.t)>=0},e.interpolate=function(t,r,i,n){return t=t<0?0:t,i=i<0?0:i,t<=i?i===0?(r+n)/2:r+(n-r)*(t/(t+i)):n+(r-n)*(i/(t+i))},e.intersect=function(t,r,i,n,a){var o,s,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(i,n)||(l=i,i=n,n=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.vertLeq(i,r)?e.vertLeq(r,n)?(o=e.edgeEval(t,i,r),s=e.edgeEval(i,r,n),o+s<0&&(o=-o,s=-s),a.s=e.interpolate(o,i.s,s,r.s)):(o=e.edgeSign(t,i,r),s=-e.edgeSign(t,n,r),o+s<0&&(o=-o,s=-s),a.s=e.interpolate(o,i.s,s,n.s)):a.s=(i.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(i,n)||(l=i,i=n,n=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.transLeq(i,r)?e.transLeq(r,n)?(o=e.transEval(t,i,r),s=e.transEval(i,r,n),o+s<0&&(o=-o,s=-s),a.t=e.interpolate(o,i.t,s,r.t)):(o=e.transSign(t,i,r),s=-e.transSign(t,n,r),o+s<0&&(o=-o,s=-s),a.t=e.interpolate(o,i.t,s,n.t)):a.t=(i.t+r.t)/2},e}(),Yx=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),YA=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),U1=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),_ee=function(){function e(){var t=new U1,r=new Yx,i=new YA(0),n=new YA(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=t,this.fHead=r,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var r=new YA(0),i=new YA(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return i.next=n,n.Sym.next=r,r.next=t,t.Sym.next=i,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r},e.prototype.splice_=function(t,r){var i=t.Onext,n=r.Onext;i.Sym.Lnext=r,n.Sym.Lnext=t,t.Onext=n,r.Onext=i},e.prototype.makeVertex_=function(t,r,i){var n=t;lr(n,"Vertex can't be null!");var a=i.prev;n.prev=a,a.next=n,n.next=i,i.prev=n,n.anEdge=r;var o=r;do o.Org=n,o=o.Onext;while(o!==r)},e.prototype.makeFace_=function(t,r,i){var n=t;lr(n,"Face can't be null");var a=i.prev;n.prev=a,a.next=n,n.next=i,i.prev=n,n.anEdge=r,n.trail=null,n.marked=!1,n.inside=i.inside;var o=r;do o.Lface=n,o=o.Lnext;while(o!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,i=t.Sym.next;r.Sym.next=i,i.Sym.next=r},e.prototype.killVertex_=function(t,r){var i=t.anEdge,n=i;do n.Org=r,n=n.Onext;while(n!==i);var a=t.prev,o=t.next;o.prev=a,a.next=o},e.prototype.killFace_=function(t,r){var i=t.anEdge,n=i;do n.Lface=r,n=n.Lnext;while(n!==i);var a=t.prev,o=t.next;o.prev=a,a.next=o},e.prototype.makeEdge=function(){var t=new U1,r=new U1,i=new Yx,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(r,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(t,r){var i=!1,n=!1;if(t!==r){if(r.Org!==t.Org&&(n=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!n){var a=new U1;this.makeVertex_(a,r,t.Org),t.Org.anEdge=t}if(!i){var o=new Yx;this.makeFace_(o,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var n=new Yx;this.makeFace_(n,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),i=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var n=new U1;return this.makeVertex_(n,i,r.Org),r.Lface=i.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),i=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,r){var i=!1,n=this.makeEdge_(t),a=n.Sym;if(r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(a,r),n.Org=t.Dst,a.Org=r.Org,n.Lface=a.Lface=t.Lface,t.Lface.anEdge=a,!i){var o=new Yx;this.makeFace_(o,n,t.Lface)}return n},e.prototype.zapFace=function(t){var r=t.anEdge,i,n,a,o,s;n=r.Lnext;do i=n,n=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),a=i.Sym,a.Onext===a?this.killVertex_(a.Org,null):(a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev)),this.killEdge_(i));while(i!=r);o=t.prev,s=t.next,s.prev=o,o.next=s},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,i=0;do i++,r=r.Lnext;while(r!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var r,i,n,a,o,s,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(i=r.anEdge,o=i.Org;n=i.Lnext,a=i.Sym,a&&a.Lface&&a.Lface.inside&&(s=this.countFaceVerts_(r),l=this.countFaceVerts_(a.Lface),s+l-2<=t&&Jt.vertCCW(i.Lprev.Org,i.Org,a.Lnext.Lnext.Org)&&Jt.vertCCW(a.Lprev.Org,a.Org,i.Lnext.Lnext.Org)&&(n=a.Lnext,this.delete(a),i=null,a=null)),!(i&&i.Lnext.Org===o);)i=n;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,i=this.eHead,n,a,o,s,l,u;for(a=t,a=t;(n=a.next)!==t;a=n){lr(n.prev===a),l=n.anEdge;do lr(l.Sym!==l),lr(l.Sym.Sym===l),lr(l.Lnext.Onext.Sym===l),lr(l.Onext.Sym.Lnext===l),lr(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(lr(n.prev===a&&n.anEdge===null),s=r,s=r;(o=s.next)!==r;s=o){lr(o.prev===s),l=o.anEdge;do lr(l.Sym!==l),lr(l.Sym.Sym===l),lr(l.Lnext.Onext.Sym===l),lr(l.Onext.Sym.Lnext===l),lr(l.Org===o),l=l.Onext;while(l!==o.anEdge)}for(lr(o.prev===s&&o.anEdge===null),u=i,u=i;(l=u.next)!==i;u=l)lr(l.Sym.next===u.Sym),lr(l.Sym!==l),lr(l.Sym.Sym===l),lr(l.Org!==null),lr(l.Dst!==null),lr(l.Lnext.Onext.Sym===l),lr(l.Onext.Sym.Lnext===l);lr(l.Sym.next===u.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),wee=function(){function e(){this.handle=null}return e}(),xee=function(){function e(){this.key=null,this.node=0}return e}(),Zct=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new wee,this.handles[i]=new xee;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,i=this.handles,n,a,o;for(n=r[t].handle;;){if(o=t<<1,o<this.size&&this.leq(i[r[o+1].handle].key,i[r[o].handle].key)&&++o,lr(o<=this.max),a=r[o].handle,o>this.size||this.leq(i[n].key,i[a].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=a,i[a].node=t,t=o}},e.prototype.floatUp_=function(t){var r=this.nodes,i=this.handles,n,a,o;for(n=r[t].handle;;){if(o=t>>1,a=r[o].handle,o===0||this.leq(i[a].key,i[n].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=a,i[a].node=t,t=o}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,i;if(r=++this.size,r*2>this.max){this.max*=2;var n,a;for(a=this.nodes.length,this.nodes.length=this.max+1,n=a;n<this.nodes.length;n++)this.nodes[n]=new wee;for(a=this.handles.length,this.handles.length=this.max+1,n=a;n<this.handles.length;n++)this.handles[n]=new xee}return this.freeList===0?i=r:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[r].handle=i,this.handles[i].node=r,this.handles[i].key=t,this.initialized&&this.floatUp_(r),i},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,i=t[1].handle,n=r[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[i].key=null,r[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var r=this.nodes,i=this.handles,n;lr(t>=1&&t<=this.max&&i[t].key!==null),n=i[t].node,r[n].handle=r[this.size].handle,i[r[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(i[r[n>>1].handle].key,i[r[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),fB=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),See=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),edt=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new See,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var i=new See;return i.key=r,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),tdt=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,i){var n=t.event,a=r.eUp,o=i.eUp;if(a.Dst===n)return o.Dst===n?Jt.vertLeq(a.Org,o.Org)?Jt.edgeSign(o.Dst,a.Org,o.Org)<=0:Jt.edgeSign(a.Dst,o.Org,a.Org)>=0:Jt.edgeSign(o.Dst,n,o.Org)<=0;if(o.Dst===n)return Jt.edgeSign(a.Dst,n,a.Org)>=0;var s=Jt.edgeEval(a.Dst,n,a.Org),l=Jt.edgeEval(o.Dst,n,o.Org);return s>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&lr(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,i){lr(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=i,i.activeRegion=r},e.topLeftRegion=function(t,r){var i=r.eUp.Org,n;do r=e.regionAbove(r);while(r.eUp.Org===i);if(r.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,i){var n=new fB;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(t,r){switch(t.windingRule){case di.ODD:return(r&1)!==0;case di.NONZERO:return r!==0;case di.POSITIVE:return r>0;case di.NEGATIVE:return r<0;case di.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var i=r.eUp,n=i.Lface;n.inside=r.inside,n.anEdge=i,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,i){for(var n,a=null,o=r,s=r.eUp;o!==i;){if(o.fixUpperEdge=!1,a=e.regionBelow(o),n=a.eUp,n.Org!=s.Org){if(!a.fixUpperEdge){e.finishRegion(t,o);break}n=t.mesh.connect(s.Lprev,n.Sym),e.fixUpperEdge(t,a,n)}s.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(s,n)),e.finishRegion(t,o),s=a.eUp,o=a}return s},e.addRightEdges=function(t,r,i,n,a,o){var s,l,u,c,d=!0;u=i;do lr(Jt.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,r,u.Sym),u=u.Onext;while(u!==n);for(a===null&&(a=e.regionBelow(r).eUp.Rprev),l=r,c=a;s=e.regionBelow(l),u=s.eUp.Sym,u.Org===c.Org;)u.Onext!==c&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(c.Oprev,u)),s.windingNumber=l.windingNumber-u.winding,s.inside=e.isWindingInside(t,s.windingNumber),l.dirty=!0,!d&&e.checkForRightSplice(t,l)&&(e.addWinding(u,c),e.deleteRegion(t,l),t.mesh.delete(c)),d=!1,l=s,c=u;l.dirty=!0,lr(l.windingNumber-u.winding===s.windingNumber),o&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,i){t.mesh.splice(r,i)},e.vertexWeights=function(t,r,i){var n=Jt.vertL1dist(r,t),a=Jt.vertL1dist(i,t),o=.5*a/(n+a),s=.5*n/(n+a);t.coords[0]+=o*r.coords[0]+s*i.coords[0],t.coords[1]+=o*r.coords[1]+s*i.coords[1],t.coords[2]+=o*r.coords[2]+s*i.coords[2]},e.getIntersectData=function(t,r,i,n,a,o){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,i,n),e.vertexWeights(r,a,o)},e.checkForRightSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp;if(Jt.vertLeq(n.Org,a.Org)){if(Jt.edgeSign(a.Dst,n.Org,a.Org)>0)return!1;Jt.vertEq(n.Org,a.Org)?n.Org!==a.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,a.Oprev,n)):(t.mesh.splitEdge(a.Sym),t.mesh.splice(n,a.Oprev),r.dirty=i.dirty=!0)}else{if(Jt.edgeSign(n.Dst,a.Org,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Oprev,n)}return!0},e.checkForLeftSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp,o;if(lr(!Jt.vertEq(n.Dst,a.Dst)),Jt.vertLeq(n.Dst,a.Dst)){if(Jt.edgeSign(n.Dst,a.Dst,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,o=t.mesh.splitEdge(n),t.mesh.splice(a.Sym,o),o.Lface.inside=r.inside}else{if(Jt.edgeSign(a.Dst,n.Dst,a.Org)>0)return!1;r.dirty=i.dirty=!0,o=t.mesh.splitEdge(a),t.mesh.splice(n.Lnext,a.Sym),o.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var i=e.regionBelow(r),n=r.eUp,a=i.eUp,o=n.Org,s=a.Org,l=n.Dst,u=a.Dst,c,d,h=new U1,f,g;if(lr(!Jt.vertEq(u,l)),lr(Jt.edgeSign(l,t.event,o)<=0),lr(Jt.edgeSign(u,t.event,s)>=0),lr(o!==t.event&&s!==t.event),lr(!r.fixUpperEdge&&!i.fixUpperEdge),o===s||(c=Math.min(o.t,l.t),d=Math.max(s.t,u.t),c>d))return!1;if(Jt.vertLeq(o,s)){if(Jt.edgeSign(u,o,s)>0)return!1}else if(Jt.edgeSign(l,s,o)<0)return!1;return e.debugEvent(t),Jt.intersect(l,o,u,s,h),lr(Math.min(o.t,l.t)<=h.t),lr(h.t<=Math.max(s.t,u.t)),lr(Math.min(u.s,l.s)<=h.s),lr(h.s<=Math.max(s.s,o.s)),Jt.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),f=Jt.vertLeq(o,s)?o:s,Jt.vertLeq(f,h)&&(h.s=f.s,h.t=f.t),Jt.vertEq(h,o)||Jt.vertEq(h,s)?(e.checkForRightSplice(t,r),!1):!Jt.vertEq(l,t.event)&&Jt.edgeSign(l,t.event,h)>=0||!Jt.vertEq(u,t.event)&&Jt.edgeSign(u,t.event,h)<=0?u===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Sym,n),r=e.topLeftRegion(t,r),n=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),i),e.addRightEdges(t,r,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(n.Lnext,a.Oprev),i=r,r=e.topRightRegion(r),g=e.regionBelow(r).eUp.Rprev,i.eUp=a.Oprev,a=e.finishLeftRegions(t,i,null),e.addRightEdges(t,r,a.Onext,n.Rprev,g,!0),!0):(Jt.edgeSign(l,t.event,h)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),Jt.edgeSign(u,t.event,h)<=0&&(r.dirty=i.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(a.Sym),t.mesh.splice(a.Oprev,n),n.Org.s=h.s,n.Org.t=h.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,o,l,s,u),e.regionAbove(r).dirty=r.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var i=e.regionBelow(r),n,a;;){for(;i.dirty;)r=i,i=e.regionBelow(i);if(!r.dirty&&(i=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,n=r.eUp,a=i.eUp,n.Dst!==a.Dst&&e.checkForLeftSplice(t,r)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(a),i=e.regionBelow(r),a=i.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i),n=r.eUp)),n.Org!==a.Org)if(n.Dst!==a.Dst&&!r.fixUpperEdge&&!i.fixUpperEdge&&(n.Dst===t.event||a.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);n.Org===a.Org&&n.Dst===a.Dst&&(e.addWinding(a,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i))}},e.connectRightVertex=function(t,r,i){var n,a=i.Onext,o=e.regionBelow(r),s=r.eUp,l=o.eUp,u=!1;if(s.Dst!==l.Dst&&e.checkForIntersect(t,r),Jt.vertEq(s.Org,t.event)&&(t.mesh.splice(a.Oprev,s),r=e.topLeftRegion(t,r),a=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),o),u=!0),Jt.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,o,null),u=!0),u){e.addRightEdges(t,r,i.Onext,a,a,!0);return}Jt.vertLeq(l.Org,s.Org)?n=l.Oprev:n=s,n=t.mesh.connect(i.Lprev,n),e.addRightEdges(t,r,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,i){var n,a,o,s,l;if(n=r.eUp,Jt.vertEq(n.Org,i)){lr(!1),e.spliceMergeVertices(t,n,i.anEdge);return}if(!Jt.vertEq(n.Dst,i)){t.mesh.splitEdge(n.Sym),r.fixUpperEdge&&(t.mesh.delete(n.Onext),r.fixUpperEdge=!1),t.mesh.splice(i.anEdge,n),e.sweepEvent(t,i);return}lr(!1),r=e.topRightRegion(r),l=e.regionBelow(r),o=l.eUp.Sym,a=s=o.Onext,l.fixUpperEdge&&(lr(a!==o),e.deleteRegion(t,l),t.mesh.delete(o),o=a.Oprev),t.mesh.splice(i.anEdge,o),Jt.edgeGoesLeft(a)||(a=null),e.addRightEdges(t,r,o.Onext,s,a,!0)},e.connectLeftVertex=function(t,r){var i,n,a,o,s,l,u=new fB;if(u.eUp=r.anEdge.Sym,i=t.dict.search(u).key,n=e.regionBelow(i),!!n){if(o=i.eUp,s=n.eUp,Jt.edgeSign(o.Dst,r,o.Org)===0){e.connectLeftDegenerate(t,i,r);return}if(a=Jt.vertLeq(s.Dst,o.Dst)?i:n,i.inside||a.fixUpperEdge){if(a===i)l=t.mesh.connect(r.anEdge.Sym,o.Lnext);else{var c=t.mesh.connect(s.Dnext,r.anEdge);l=c.Sym}a.fixUpperEdge?e.fixUpperEdge(t,a,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,i,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var i=r.anEdge;i.activeRegion===null;)if(i=i.Onext,i===r.anEdge){e.connectLeftVertex(t,r);return}var n=e.topLeftRegion(t,i.activeRegion);lr(n!==null);var a=e.regionBelow(n),o=a.eUp,s=e.finishLeftRegions(t,a,null);s.Onext===o?e.connectRightVertex(t,n,s):e.addRightEdges(t,n,s.Onext,o,o,!0)},e.addSentinel=function(t,r,i,n){var a=new fB,o=t.mesh.makeEdge();o.Org.s=i,o.Org.t=n,o.Dst.s=r,o.Dst.t=n,t.event=o.Dst,a.eUp=o,a.windingNumber=0,a.inside=!1,a.fixUpperEdge=!1,a.sentinel=!0,a.dirty=!1,a.nodeUp=t.dict.insert(a)},e.initEdgeDict=function(t){t.dict=new edt(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],n=t.bmin[0]-r,a=t.bmax[0]+r,o=t.bmin[1]-i,s=t.bmax[1]+i;e.addSentinel(t,n,a,o),e.addSentinel(t,n,a,s)},e.doneEdgeDict=function(t){for(var r,i=0;(r=t.dict.min().key)!==null;)r.sentinel||(lr(r.fixUpperEdge),lr(++i===1)),lr(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,i,n,a=t.mesh.eHead;for(r=a.next;r!==a;r=i)i=r.next,n=r.Lnext,Jt.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,n,r),t.mesh.delete(r),r=n,n=r.Lnext),n.Lnext===r&&(n!==r&&((n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n)),(r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,i,n,a=0;for(n=t.mesh.vHead,i=n.next;i!==n;i=i.next)a++;for(a+=8,r=t.pq=new Zct(a,Jt.vertLeq),n=t.mesh.vHead,i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);return i!==n?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var i,n,a;for(i=r.fHead.next;i!==r.fHead;i=n)n=i.next,a=i.anEdge,lr(a.Lnext!==a),a.Lnext.Lnext===a&&(e.addWinding(a.Onext,a),t.mesh.delete(a));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var i,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(i=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!Jt.vertEq(n,i));)n=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,n.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),rdt=function(){function e(){this.mesh=new _ee,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=di.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,i,n,a,o,s,l=[0,0,0],u=[0,0,0],c=[0,0,0],d=[0,0,0],h=[0,0,0],f=[null,null,null],g=[null,null,null],p=this.mesh.vHead;r=p.next;for(var m=0;m<3;++m)a=r.coords[m],u[m]=a,g[m]=r,l[m]=a,f[m]=r;for(r=p.next;r!==p;r=r.next)for(var y=0;y<3;++y)a=r.coords[y],a<u[y]&&(u[y]=a,g[y]=r),a>l[y]&&(l[y]=a,f[y]=r);var b=0;if(l[1]-u[1]>l[0]-u[0]&&(b=1),l[2]-u[2]>l[b]-u[b]&&(b=2),u[b]>=l[b]){t[0]=0,t[1]=0,t[2]=1;return}for(s=0,i=g[b],n=f[b],c[0]=i.coords[0]-n.coords[0],c[1]=i.coords[1]-n.coords[1],c[2]=i.coords[2]-n.coords[2],r=p.next;r!==p;r=r.next)d[0]=r.coords[0]-n.coords[0],d[1]=r.coords[1]-n.coords[1],d[2]=r.coords[2]-n.coords[2],h[0]=c[1]*d[2]-c[2]*d[1],h[1]=c[2]*d[0]-c[0]*d[2],h[2]=c[0]*d[1]-c[1]*d[0],o=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],o>s&&(s=o,t[0]=h[0],t[1]=h[1],t[2]=h[2]);s<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(c)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,i=this.mesh.vHead,n,a=0,o=t.next;o!==t;o=o.next)if(n=o.anEdge,!(n.winding<=0))do a+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==o.anEdge);if(a<0){for(r=i.next;r!==i;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],i,n,a=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),a=!0),i=this.sUnit,n=this.tUnit;var o=this.longAxis_(r);i[o]=0,i[(o+1)%3]=1,i[(o+2)%3]=0,n[o]=0,n[(o+1)%3]=0,n[(o+2)%3]=r[o]>0?1:-1;for(var s=t.next;s!==t;s=s.next)s.s=this.dot_(s.coords,i),s.t=this.dot_(s.coords,n);a&&this.checkOrientation_();for(var l=!0,u=t.next;u!==t;u=u.next)l?(this.bmin[0]=this.bmax[0]=u.s,this.bmin[1]=this.bmax[1]=u.t,l=!1):(u.s<this.bmin[0]&&(this.bmin[0]=u.s),u.s>this.bmax[0]&&(this.bmax[0]=u.s),u.t<this.bmin[1]&&(this.bmin[1]=u.t),u.t>this.bmax[1]&&(this.bmax[1]=u.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var i,n;if(i=r.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;Jt.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;Jt.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(var a=void 0;i.Lnext!==n;)if(Jt.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(Jt.edgeGoesLeft(n.Lnext)||Jt.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)a=t.connect(n.Lnext,n),n=a.Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(Jt.edgeGoesRight(i.Lprev)||Jt.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)a=t.connect(i,i.Lprev),i=a.Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)a=t.connect(n.Lnext,n),n=a.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)if(r=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,r,i){for(var n,a=t.eHead.next;a!==t.eHead;a=n)n=a.next,a.Rface.inside!==a.Lface.inside?a.winding=a.Lface.inside?r:-r:i?t.delete(a):a.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,i,n){var a,o=0,s=0,l;i>3&&t.mergeConvexFaces(i);for(var u=t.vHead.next;u!==t.vHead;u=u.next)u.n=-1;for(var c=t.fHead.next;c!==t.fHead;c=c.next)if(c.n=-1,!!c.inside){a=c.anEdge,l=0;do{var u=a.Org;u.n===-1&&(u.n=s,s++),l++,a=a.Lnext}while(a!==c.anEdge);if(l>i)throw"Face vertex greater that support polygon";c.n=o,++o}this.elementCount=o,r===wn.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*i,this.vertexCount=s,this.vertices=[],this.vertices.length=s*n,this.vertexIndices=[],this.vertexIndices.length=s;for(var u=t.vHead.next;u!==t.vHead;u=u.next)if(u.n!==-1){var d=u.n*n;this.vertices[d+0]=u.coords[0],this.vertices[d+1]=u.coords[1],n>2&&(this.vertices[d+2]=u.coords[2]),this.vertexIndices[u.n]=u.idx}for(var h=0,c=t.fHead.next;c!==t.fHead;c=c.next)if(c.inside){a=c.anEdge,l=0;do{var u=a.Org;this.elements[h++]=u.n,l++,a=a.Lnext}while(a!==c.anEdge);for(var f=l;f<i;++f)this.elements[h++]=-1;if(r===wn.CONNECTED_POLYGONS){a=c.anEdge;do this.elements[h++]=this.getNeighbourFace_(a),a=a.Lnext;while(a!==c.anEdge);for(var g=l;g<i;++g)this.elements[h++]=-1}}},e.prototype.outputContours_=function(t,r){var i,n,a=0,o=0;this.vertexCount=0,this.elementCount=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){n=i=s.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,u=0,c=0;a=0;for(var s=t.fHead.next;s!==t.fHead;s=s.next)if(s.inside){o=0,n=i=s.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],r>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[u++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,o++,i=i.Lnext;while(i!==n);this.elements[c++]=a,this.elements[c++]=o,a+=o}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new _ee),t<2&&(t=2),t>3&&(t=3);for(var i=null,n=0;n<r.length;n+=t)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=r[n+0],i.Org.coords[1]=r[n+1],t>2?i.Org.coords[2]=r[n+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,r,i,n,a,o){if(t===void 0&&(t=di.ODD),r===void 0&&(r=wn.POLYGONS),o===void 0&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,a&&(this.normal[0]=a[0],this.normal[1]=a[1],this.normal[2]=a[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),tdt.computeInterior(this,o);var s=this.mesh;return r===wn.BOUNDARY_CONTOURS?this.setWindingNumber_(s,1,!0):this.tessellateInterior_(s),o&&s.check(),r===wn.BOUNDARY_CONTOURS?this.outputContours_(s,n):this.outputPolymesh_(s,r,i,n),!0},e}();function av(e){var t=e.windingRule,r=t===void 0?di.ODD:t,i=e.elementType,n=i===void 0?wn.POLYGONS:i,a=e.polySize,o=a===void 0?3:a,s=e.vertexSize,l=s===void 0?2:s,u=e.normal,c=u===void 0?[0,0,1]:u,d=e.contours,h=d===void 0?[]:d,f=e.strict,g=f===void 0?!0:f,p=e.debug,m=p===void 0?!1:p;if(!h&&g)throw new Error("Contours can't be empty");if(h){var y=new rdt;e.edgeCreateCallback&&(y.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(y.vertexIdCallback=e.vertexIdCallback);for(var b=0;b<h.length;b++)y.addContour(l||2,h[b]);return y.tesselate(r,n,o,l,c,g),{vertices:y.vertices,vertexIndices:y.vertexIndices,vertexCount:y.vertexCount,elements:y.elements,elementCount:y.elementCount,mesh:m?y.mesh:void 0}}}di.ODD;di.NONZERO;di.POSITIVE;di.NEGATIVE;di.ABS_GEQ_TWO;wn.POLYGONS;wn.CONNECTED_POLYGONS;wn.BOUNDARY_CONTOURS;var hk=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*hk.eSize;this.buffer=new ArrayBuffer(r);let i=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity}  ${e}`);let r=e*hk.eSize,i=new ArrayBuffer(r),n=Float32Array.BYTES_PER_ELEMENT,a=0,o=new Float32Array(i,a*n,3*e);a+=3*e;let s=new Float32Array(i,a*n,3*e);a+=3*e;let l=new Float32Array(i,a*n,2*e);t?(o.set(this.positions.subarray(0,this.size*3)),s.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(o.set(this.positions),s.set(this.normals),l.set(this.uvs)),this.buffer=i,this.positions=o,this.normals=s,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity}  ${this.size}`),this.realloc(this.size,!0)}},cxe=hk;cxe.eSize=8*Float32Array.BYTES_PER_ELEMENT;var idt=class{constructor(e=[],t=(r,i)=>r<i?-1:r>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;let e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:t,compare:r}=this,i=t[e];for(;e>0;){let n=e-1>>1,a=t[n];if(r(i,a)>=0)break;t[e]=a,e=n}t[e]=i}_down(e){let{data:t,compare:r}=this,i=this.length>>1,n=t[e];for(;e<i;){let a=(e<<1)+1,o=a+1;if(o<this.length&&r(t[o],t[a])<0&&(a=o),r(t[a],n)>=0)break;t[e]=t[a],e=a}t[e]=n}};function ndt(e,t,r=1,i=!1){let n=1/0,a=1/0,o=-1/0,s=-1/0;for(let[b,w]of e[0])b<n&&(n=b),w<a&&(a=w),b>o&&(o=b),w>s&&(s=w);let l=o-n,u=s-a,c=Math.max(r,Math.min(l,u));if(c===r){let b=[n,a];return b.distance=0,b.distance}let d=new idt([],(b,w)=>w.max-b.max),h=odt(e),f=new YD(n+l/2,a+u/2,0,e);f.d>h.d&&(h=f);let g=2;function p(b,w,x){let S=new YD(b,w,x,e);if(g++,S.max>h.d+r&&d.push(S),S.d>h.d&&(h=S,i&&console.log(`found best ${Math.round(1e4*S.d)/1e4} after ${g} probes`),h.d>t))return t}let m=c/2;for(let b=n;b<o;b+=c)for(let w=a;w<s;w+=c)p(b+m,w+m,m);for(;d.length;){let{max:b,x:w,y:x,h:S}=d.pop();if(b-h.d<=r)break;m=S/2,p(w-m,x-m,m),p(w+m,x-m,m),p(w-m,x+m,m),p(w+m,x+m,m)}i&&console.log(`num probes: ${g}
best distance: ${h.d}`);let y=[h.x,h.y];return y.distance=h.d,y.distance}function YD(e,t,r,i){this.x=e,this.y=t,this.h=r,this.d=adt(e,t,i),this.max=this.d+this.h*Math.SQRT2}function adt(e,t,r){let i=!1,n=1/0;for(let a of r)for(let o=0,s=a.length,l=s-1;o<s;l=o++){let u=a[o],c=a[l];u[1]>t!=c[1]>t&&e<(c[0]-u[0])*(t-u[1])/(c[1]-u[1])+u[0]&&(i=!i),n=Math.min(n,sdt(e,t,u,c))}return n===0?0:(i?1:-1)*Math.sqrt(n)}function odt(e){let t=0,r=0,i=0,n=e[0];for(let o=0,s=n.length,l=s-1;o<s;l=o++){let u=n[o],c=n[l],d=u[0]*c[1]-c[0]*u[1];r+=(u[0]+c[0])*d,i+=(u[1]+c[1])*d,t+=d*3}let a=new YD(r/t,i/t,0,e);return t===0||a.d<0?new YD(n[0][0],n[0][1],0,e):a}function sdt(e,t,r,i){let n=r[0],a=r[1],o=i[0]-n,s=i[1]-a;if(o!==0||s!==0){let l=((e-n)*o+(t-a)*s)/(o*o+s*s);l>1?(n=i[0],a=i[1]):l>0&&(n+=o*l,a+=s*l)}return o=e-n,s=t-a,o*o+s*s}var QW={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},dxe={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},hxe={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},pB=(e,t)=>([r,i])=>(i<r&&(i+=t),(e>=r?e:e+t)<=i),JW=class extends Wt{constructor(e,t,r=0,i=12,n=3,a=di.ODD,o=!1){super(),this.forPathBevel=o,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=i,this._bevelSegmentsInput=n;let s=this._shape.extractShapePointsToFlatArray([],i),l=this._shape.shapeHoles.map(A=>{let P=A.extractShapePointsToFlatArray([],i),O=[];for(let j=P.length-1;j>=1;j-=2){let D=P[j-1],I=P[j-0];O.push(D,I)}return O}),u=[],c=[];for(let A=0;A<s.length;A+=2)c.push([s[A],s[A+1]]);u.push(c);for(let A=0;A<l.length;A++){let P=l[A],O=[];for(let j=0;j<P.length;j+=2)O.push([P[j],P[j+1]]);u.push(O)}let d;e.isText?d=new vW().setFromPoints(e.points.map(A=>A.position)).getSize(new ze).length()*.1:u[0].length===0?d=r:r>0?d=ndt(u,r):d=1e-5,r<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(r,d,t/2),this._bevelSegments=Math.floor(n));let h;try{h=av({windingRule:a,elementType:wn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[s]})}catch{h=QW}let f;try{f=av({windingRule:di.ODD,elementType:wn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{f=dxe}if(!h)throw new Error("error generating geometry");let g=h.elementCount;if(f){h.elementCount+=f.elementCount;for(let A=0;A<f.elements.length;A++){let P=f.elements[A],O=A%2===0?h.vertexCount:0;h.elements.push(P+O)}for(let A=0;A<f.vertexIndices.length;A++){let P=f.vertexIndices[A],O=h.vertexCount;h.vertexIndices.push(P+O)}for(let A=0;A<f.vertices.length;A++){let P=f.vertices[A];h.vertices.push(P)}}let p=1/0,m=-1/0,y=1/0,b=-1/0;for(let A=0,P=h.vertexCount;A<P;A++){let O=A*2,j=h.vertices[O+0],D=h.vertices[O+1];j<p&&(p=j),j>m&&(m=j),D<y&&(y=D),D>b&&(b=D)}this._minX=p,this._minY=y,this._width=m-p,this._height=b-y,this._buffer=new cxe(this._computeBufferEstimatedSize(h));let w=[],x=[];for(let A=h.elementCount-1;A>=0;A--){let P=A>=g,O=A*2,j=h.elements[O+0],D=h.elements[O+1],I=j+D,q={start:j,count:D,normals:[],continuous:[],concave:[]},$=j,X=I-1,N=j+1,Q=this._shape.roundedCurves.length;do{let re=$-j,H=h.vertices[X*2+0],se=h.vertices[X*2+1],le=h.vertices[$*2+0],ee=h.vertices[$*2+1],J=h.vertices[N*2+0],oe=h.vertices[N*2+1],me=le-H,be=ee-se,de=Math.sqrt(me*me+be*be);me/=de,be/=de;let ge=le-J,ce=ee-oe,Ce=Math.sqrt(ge*ge+ce*ce);ge/=Ce,ce/=Ce,q.normals[re*2+0]=-ce,q.normals[re*2+1]=ge,q.concave[re]=me*ce-be*ge>0;let Ee=h.vertexIndices[$];if(Array.isArray(Ee))q.continuous[re]=!1;else{let[Me,he]=this._shape.getCurveIndexFromVertexId(Ee-1,!0);if(he>0&&he<1)q.continuous[re]=!0;else{let Ae=he===1?Me+1:Me-1;Ae=(Ae+Q)%Q;let De=he===1?0:1,Z=this._shape.roundedCurves[Me].getTangent(he),ie=this._shape.roundedCurves[Ae].getTangent(De);q.continuous[re]=Z.dot(ie)>.95}}P&&(q.normals[re*2+0]*=-1,q.normals[re*2+1]*=-1),[X,$,N]=[$,N,N+1],N>=I&&(N-=D)}while(N!==j+1);let F=[];F.push({bevelI:0,angle:0,size:0,boundary:{vertices:h.vertices.slice(j*2,I*2),vertexCount:D,vertexIndices:new Array(D).fill(!0).map((re,H)=>[H,H]),elements:[0,D],elementCount:1,mesh:null},reverseMap:[],insetPoints:h.vertices.slice(j*2,I*2)});let L=0;for(let re=1;re<=this._bevelSegments;re++){let H=re/this._bevelSegments*Math.PI/2,se=(1-Math.cos(H))*this._bevel,le=[],ee=[],J=0;for(let me=0;me<D;me++){let be=me*2,de=(me-1+D)%D*2,ge=h.vertices[q.start*2+be+0],ce=h.vertices[q.start*2+be+1],Ce=-q.normals[de+0]*se,Ee=-q.normals[de+1]*se,Me=-q.normals[be+0]*se,he=-q.normals[be+1]*se;if(q.concave[me]||!q.concave[me]&&P){let Ae=Math.atan2(Ee,Ce),De=Math.atan2(he,Me);De>Ae&&(De-=Math.PI*2);let Z=De-Ae;if(q.continuous[me]||P){let ie=Ae+Z/2,Te=Math.cos(ie)*se,Ue=Math.sin(ie)*se;le[2*J+0]=ge+Te*(P?-1:1),le[2*J+1]=ce+Ue*(P?-1:1),ee[J]=me,J++}else{let ie=Math.max(1,Math.floor(i/4*Math.abs(Z)/Math.PI));for(let Te=0;Te<=ie;Te++){let Ue=Ae+Z*(Te/ie),ne=Math.cos(Ue)*se,K=Math.sin(Ue)*se;le[2*J+0]=ge+ne,le[2*J+1]=ce+K,ee[J]=me,J++}}}else le[2*J+0]=ge+Ce,le[2*J+1]=ce+Ee,ee[J]=me,J++,le[2*J+0]=ge,le[2*J+1]=ce,ee[J]=me,J++,le[2*J+0]=ge+Me,le[2*J+1]=ce+he,ee[J]=me,J++}let oe=av({windingRule:di.POSITIVE,elementType:wn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[le],edgeCreateCallback:me=>{let be=me.Org.idx,de=ee[be],ge=ee[(be+1)%ee.length];me.idx=[de,ge],me.Sym.idx=[ge,de]},vertexIdCallback:me=>{let be=me.Lprev.idx;return[be?be[1]:0,me.idx?me.idx[0]:0]}});if(!oe)throw console.log("Error"),new Error(`error generating bevel geometry for ${re}'th loop`);if(!oe.vertexCount){let me=(re-1)/this._bevelSegments*Math.PI/2;L=(1-Math.sin(me))*this._bevel;break}for(let me=0;me<oe.vertexIndices.length;me++){let[be,de]=oe.vertexIndices[me];if(be===de)continue;let ge=de;de<be&&(ge+=D);for(let ce=be;ce<ge;ce++){let Ce=ce%D,Ee=(ce+1)%D;if(!q.continuous[Ce]||!q.continuous[Ee]){oe.vertexIndices[me]=[be,Ce],oe.vertexIndices.splice(me+1,0,[Ee,de]),oe.vertices.splice((me+1)*2,0,oe.vertices[me*2],oe.vertices[me*2+1]);break}}}F.push({bevelI:re,angle:H,size:se,boundary:oe,reverseMap:ee,insetPoints:le})}let Y=(re,H,se)=>{let le=0,ee=re.boundary.vertexIndices.length;for(;le<ee&&se(re.boundary.vertexIndices[H]);)H=(H+1)%ee,le++;return le},ae=w.length;for(let re=1;re<F.length;re++){let H=F[re-1],se=F[re],le=H.boundary.vertexIndices.length,ee=se.boundary.vertexIndices.length;if(!le||!ee)break;let J=q.concave.length,oe=0,me=pB(oe,D);for(;!H.boundary.vertexIndices.filter(me).length||!se.boundary.vertexIndices.filter(me).length;)oe++,me=pB(oe,D);let be=H.boundary.vertexIndices.findIndex(me),de=se.boundary.vertexIndices.findIndex(me);do be=(be+1)%le;while(me(H.boundary.vertexIndices[be]));do de=(de+1)%ee;while(me(se.boundary.vertexIndices[de]));oe=(oe+1)%D;let ge=oe,ce=0,Ce=this._buildBevelVert(q,H,(be-1+le)%le,void 0,ce),Ee=this._buildBevelVert(q,se,(de-1+ee)%ee,void 0,ce),Me=Ce,he=Ee,Ae,De,Z=!1;do{ce=(oe||J)/J,me=pB(oe,D);let ie=Y(H,be,me),Te=Y(se,de,me),Ue=Z;if(Z=!1,ie&&!Te){for(let ne=0;ne<ie;ne++)Ae=this._buildBevelVert(q,H,(be+ne)%le,ne/(ie-1),ce),w.push(Me.topN,Ae.topP,he.topN),o===!1&&w.push(Ae.bottomP,Me.bottomN,he.bottomN),Me=Ae;Z=!0}else if(!ie&&Te)for(let ne=0;ne<Te;ne++)De=this._buildBevelVert(q,se,(de+ne)%ee,ne/(Te-1),ce),w.push(he.topN,Me.topP,De.topP),o===!1&&w.push(Me.bottomP,he.bottomN,De.bottomP),he=De;else if(ie&&Te)if(Ae=this._buildBevelVert(q,H,be,0,ce),De=this._buildBevelVert(q,se,de,0,ce),Ue?(w.push(Me.topN,De.topP,he.topN),w.push(Me.topN,Ae.topP,De.topP),o===!1&&(w.push(De.bottomP,Me.bottomN,he.bottomN),w.push(De.bottomP,Ae.bottomP,Me.bottomN))):(w.push(he.topN,Me.topN,Ae.topP),w.push(he.topN,Ae.topP,De.topP),o===!1&&(w.push(Ae.bottomP,Me.bottomN,he.bottomN),w.push(Ae.bottomP,he.bottomN,De.bottomP))),Me=Ae,he=De,ie===Te)for(let ne=1;ne<ie;ne++)Ae=this._buildBevelVert(q,H,(be+ne)%le,ne/(ie-1),ce),De=this._buildBevelVert(q,se,(de+ne)%ee,ne/(Te-1),ce),w.push(Me.topN,Ae.topP,he.topN),w.push(he.topN,Ae.topP,De.topP),o===!1&&(w.push(Ae.bottomP,Me.bottomN,he.bottomN),w.push(Ae.bottomP,he.bottomN,De.bottomP)),Me=Ae,he=De;else if(ie>Te){let ne=ie/Te,K=0;for(let B=1;B<ie;B++)Ae=this._buildBevelVert(q,H,(be+B)%le,B/(ie-1),ce),w.push(Me.topN,Ae.topP,he.topN),o===!1&&w.push(Ae.bottomP,Me.bottomN,he.bottomN),Me=Ae,B>(K+1)*ne&&(K++,De=this._buildBevelVert(q,se,(de+K)%ee,K/(Te-1),ce),w.push(he.topN,Ae.topP,De.topP),o===!1&&w.push(Ae.bottomP,he.bottomN,De.bottomP),he=De)}else{let ne=Te/ie,K=0;for(let B=1;B<Te;B++)De=this._buildBevelVert(q,se,(de+B)%ee,B/(Te-1),ce),w.push(he.topN,Ae.topP,De.topP),o===!1&&w.push(Ae.bottomP,he.bottomN,De.bottomP),he=De,B>(K+1)*ne&&(K++,Ae=this._buildBevelVert(q,H,(be+K)%le,K/(ie-1),ce),w.push(Me.topN,Ae.topP,he.topN),o===!1&&w.push(Ae.bottomP,Me.bottomN,he.bottomN),Me=Ae)}be=(be+ie)%le,de=(de+Te)%ee,oe=(oe+1)%J}while(oe!==ge)}if(o===!1&&this._depth>this._bevel*2&&this._buildWall(F,q,w),P){let re=[];for(let H=w.length-1;H>=ae+2;H-=3){let se=w[H-2],le=w[H-1],ee=w[H-0];re.push(ee,le,se)}w.splice(ae,w.length-ae,...re)}if(P){let re=[];for(let H=F[F.length-1].boundary.vertices.length-1;H>=1;H-=2){let se=F[F.length-1].boundary.vertices[H-1],le=F[F.length-1].boundary.vertices[H-0];re.push(se,le)}x.push(re)}if(!P){let re=F[F.length-1],H;try{H=av({windingRule:F.length>1?di.POSITIVE:di.ODD,elementType:wn.POLYGONS,vertexSize:2,strict:!0,contours:[re.insetPoints,...x]})}catch{H=hxe}if(!H)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<d&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let se=0;se<H.elementCount*3;se+=3){let le=this._buildSurfaceVert(H,H.elements[se+0],L),ee=this._buildSurfaceVert(H,H.elements[se+1],L),J=this._buildSurfaceVert(H,H.elements[se+2],L);w.push(le.top,ee.top,J.top),o===!1&&w.push(J.bottom,ee.bottom,le.bottom)}}this.vertexCache={}}this._buffer.shrink();let S=new tr(Uint32Array.from(w),1),C=new tr(this._buffer.positions,3),T=new tr(this._buffer.normals,3),M=new tr(this._buffer.uvs,2);C.needsUpdate=!0,T.needsUpdate=!0,M.needsUpdate=!0,S.needsUpdate=!0,this.setAttribute("position",C),this.setAttribute("normal",T),this.setAttribute("uv",M),this.setIndex(S)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,a=i.boundary.vertexCount;n<a;n++){let o=this._buildBevelVert(t,i,n),s=this._buildBevelVert(t,i,(n+1)%a);r.push(s.topP,o.topN,o.bottomN),r.push(s.topP,o.bottomN,s.bottomP)}}_buildSurfaceVert(e,t,r){let i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];let n=e.vertices[t*2+0],a=e.vertices[t*2+1],o=(n-this._minX)/this._width,s=(a-this._minY)/this._height;this.forPathBevel&&(s=1);let l=this._buffer.get(this.forPathBevel?1:2),u=l*3,c=l*2,d={top:l+0,bottom:l+1};return this._buffer.positions[u+0]=n,this._buffer.positions[u+1]=a,this._buffer.positions[u+2]=this.forPathBevel?this._bevel:this._depth-r,this._buffer.normals[u+0]=0,this._buffer.normals[u+1]=0,this._buffer.normals[u+2]=1,this._buffer.uvs[c+0]=o,this._buffer.uvs[c+1]=s,this.forPathBevel===!1&&(this._buffer.positions[u+3]=n,this._buffer.positions[u+4]=a,this._buffer.positions[u+5]=r,this._buffer.normals[u+3]=0,this._buffer.normals[u+4]=0,this._buffer.normals[u+5]=-1,this._buffer.uvs[c+2]=o,this._buffer.uvs[c+3]=s),this.vertexCache[i]=d,d}_buildBevelVert(e,t,r,i=1,n){let a=`${t.bevelI}:${r}`;if(a in this.vertexCache&&n!==0&&n!==1&&(!n||n===this.vertexCache[a].pathBevelUCoord))return this.vertexCache[a];let[o,s]=t.boundary.vertexIndices[r],l,u,c,d;o!==s?(u=o,l=s,d=!1,c=e.continuous[u]&&e.continuous[l]):(l=o,u=(l-1+e.count)%e.count,d=e.concave[l]&&t.bevelI>0,c=e.continuous[l]||d);let h=Math.cos(t.angle),f=Math.sin(t.angle),g=r*2,p=l*2,m=u*2,y=t.boundary.vertices[g+0],b=t.boundary.vertices[g+1],w=(1-f)*this._bevel,x=(y-this._minX)/this._width,S=(b-this._minY)/this._height;this.forPathBevel&&(n!==void 0&&(x=n),S=1);let C=e.normals[p+0],T=e.normals[p+1],M=e.normals[m+0],A=e.normals[m+1];if(d){let I=M-C,q=A-T;C=C+I*(1-i),T=T+q*(1-i);let $=Math.sqrt(C*C+T*T);C/=$,T/=$}let P=this.forPathBevel?this._buffer.get(c?1:2):this._buffer.get(c?2:4),O=P*3,j=P*2,D={i:r,fi:l,topP:P+0,topN:P+0,bottomP:P+1,bottomN:P+1,pathBevelUCoord:n};return this._buffer.positions[O+0]=y,this._buffer.positions[O+1]=b,this._buffer.positions[O+2]=(this.forPathBevel?this._bevel:this._depth)-w,this._buffer.normals[O+0]=C*h,this._buffer.normals[O+1]=T*h,this._buffer.normals[O+2]=f,this._buffer.uvs[j+0]=x,this._buffer.uvs[j+1]=S,this.forPathBevel===!1&&(this._buffer.positions[O+3]=y,this._buffer.positions[O+4]=b,this._buffer.positions[O+5]=w,this._buffer.normals[O+3]=C*h,this._buffer.normals[O+4]=T*h,this._buffer.normals[O+5]=-f,this._buffer.uvs[j+2]=S,this._buffer.uvs[j+3]=x),c||(this.forPathBevel?(P+=1,O+=3,j+=2):(P+=2,O+=6,j+=4),D.topP=P+0,D.bottomP=P+1,this._buffer.positions[O+0]=y,this._buffer.positions[O+1]=b,this._buffer.positions[O+2]=(this.forPathBevel?this._bevel:this._depth)-w,this._buffer.normals[O+0]=M*h,this._buffer.normals[O+1]=A*h,this._buffer.normals[O+2]=f,this._buffer.uvs[j+0]=x,this._buffer.uvs[j+1]=S,this.forPathBevel===!1&&(this._buffer.positions[O+3]=y,this._buffer.positions[O+4]=b,this._buffer.positions[O+5]=w,this._buffer.normals[O+3]=M*h,this._buffer.normals[O+4]=A*h,this._buffer.normals[O+5]=-f,this._buffer.uvs[j+2]=S,this._buffer.uvs[j+3]=x)),this.vertexCache[a]=D,D}clone(){let e=new JW(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=oI(this.userData),e}},fxe=class extends Wt{constructor(e,t=12,r={}){super(),this.type="ShapeGeometry",this.windingRule=di.ODD,this.elementType=wn.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:di.ODD,elementType:wn.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(h=>h.extractShapePointsToFlatArray([],this._curveSegments)),a,o=!0,s=!0,l,u;for(let h=0,f=i.length/2;h<f;h++){let g=h*2,p=i[g+0],m=i[g+1];if(l!==void 0&&p!==l&&(o=!1),u!==void 0&&m!==u&&(s=!1),l=p,u=m,!o&&!s)break}if(!o&&!s)try{a=av({contours:[i,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{a=QW}let c=(a==null?void 0:a.vertexCount)??1,d=(a==null?void 0:a.elementCount)??1;if(this._positionAttribute=new tr(new Float32Array(c*3),3),this._normalAttribute=new tr(new Float32Array(c*3),3),this._uvAttribute=new tr(new Float32Array(c*2),2),this._indexAttribute=new tr(new Uint32Array(d*3),1),a){let h=1/0,f=-1/0,g=1/0,p=-1/0;for(let b=0,w=c;b<w;b++){let x=b*2,S=a.vertices[x+0],C=a.vertices[x+1];S<h&&(h=S),S>f&&(f=S),C<g&&(g=C),C>p&&(p=C)}let m=f-h,y=p-g;for(let b=0,w=c;b<w;b++){let x=b*2,S=a.vertices[x+0],C=a.vertices[x+1],T=(S-h)/m,M=(C-g)/y;this._positionAttribute.setXYZ(b,S,C,0),this._normalAttribute.setXYZ(b,0,0,1),this._uvAttribute.setXY(b,T,M)}for(let b=0,w=d;b<w;b++){let x=b*3,S=a.elements[x+0],C=a.elements[x+1],T=a.elements[x+2];this._indexAttribute.setX(x+0,S),this._indexAttribute.setX(x+1,C),this._indexAttribute.setX(x+2,T)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((a==null?void 0:a.elementCount)??1)*3)}clone(){let e=new fxe(this._shape,this._curveSegments);return e.userData=oI(this.userData),e}},pxe=class extends JW{constructor(e,t,r=0,i=12,n=3,a=di.ODD){super(e,t,r,i,n,a),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,a=i.boundary.vertexCount;n<a;n++){let o=this._buildBevelVert(t,i,n),s=this._buildBevelVert(t,i,(n+1)%a);r.push(s.topP,o.topN,o.bottomN),r.push(s.topP,o.bottomN,s.bottomP)}}clone(){let e=new pxe(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=oI(this.userData),e}},Eb=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var u,c;let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:di.ODD},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.abs(r.depth??0),o=e.shape??(t==null?void 0:t.shape),s=(o==null?void 0:o.roundness)??r.roundness;o!==void 0&&(o instanceof Qi?(o.width!==i||o.height!==n)&&o.applySize(i,n):o=new Qi(i,n).fromJSON(o),((u=e.parameters)==null?void 0:u.roundness)!==void 0&&((c=e.parameters)==null?void 0:c.roundness)>0&&o.update());let l=o??new Qi(i,n);return{parameters:Object.assign(r,{width:i,height:n,depth:a,roundness:s}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:n,roundness:a,windingRule:o}=e.parameters;e.shape.roundness=a;let s;return t<=0?s=new fxe(e.shape,n,{windingRule:o}):s=new pxe(e.shape,t,r,n,i,o),Object.assign(s,{userData:{...e,type:"VectorGeometry"}})}},mxe=Math.PI*2,ZW=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return r.angle=Ot.clamp(r.angle,0,360),{shape:e.shape&&e.shape instanceof Qi?e.shape:new Qi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,angle:n,innerRadius:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u=e.shape,c=t*.5,d=r*.5,h=ldt(u,c,d,n*Math.PI/180,i,a);u.isClosed=!0,u.update();let f;return n===0?(f=new Wt,f.setAttribute("position",new Pt([],3))):f=Eb.create({shape:u,parameters:{subdivisions:h,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}}),Object.assign(f,{userData:{...e,type:"EllipseGeometry"}})}};function ldt(e,t,r,i,n,a){if(i>=mxe)return n>30||n%4===0?(cdt(e,t,r,a),Math.round(n/4)):Cee(e,i,n,t,r,a);i=Math.max(i,.001);let o={x:0,y:r},s=i+Math.PI*.5,l={x:Math.cos(s)*t,y:Math.sin(s)*r},u=Jct({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:i>Math.PI,sweepFlag:!0});return n>30||n%u.length===0?udt(e,o.x,o.y,u,n,t,r,a):Cee(e,i,n,t,r,a)}function udt(e,t,r,i,n,a,o,s){let l=Math.round(n/i.length);e.addPoint(__(t,r));for(let u=0,c=i.length;u<c;u++){let d=i[u],h=e.points[u],f=__(d.x,d.y);h.controls[1].position.set(d.x1,d.y1),f.controls[0].position.set(d.x2,d.y2),e.addPoint(f)}return s>0?gxe(e,a,o,s):e.addPoint(__(0,0)),l}function Cee(e,t,r,i,n,a){let o=-t/r;for(let s=0;s<=r;s++){let l=o*s,u=Math.sin(l)*i,c=Math.cos(l)*n;e.addPoint(__(u,c))}return t<mxe?a>0?gxe(e,i,n,a):e.addPoint(__(0,0)):(e.removePoint(e.points[e.points.length-1]),a>0&&vxe(e,i,n,a)),1}function cdt(e,t,r,i=0,n=0,a=0){let o=.5522847498,s=t*o,l=r*o;e.addPoint(KA(n-t,a,n-t,a-l,n-t,a+l)),e.addPoint(KA(n,a+r,n-s,a+r,n+s,a+r)),e.addPoint(KA(n+t,a,n+t,a+l,n+t,a-l)),e.addPoint(KA(n,a-r,n+s,a-r,n-s,a-r)),i>0&&vxe(e,t,r,i)}function __(e,t){return new b_(Ot.generateUUID(),new ze(e,t))}function KA(e,t,r,i,n,a){let o=__(e,t);return o.controls[0].position.set(r,i),o.controls[1].position.set(n,a),o}function gxe(e,t,r,i){yxe(e,t,r,i).forEach(n=>e.addPoint(n))}function vxe(e,t,r,i){let n=yxe(e,t,r,i),a=new Qi;n.forEach(o=>a.addPoint(o)),a.isClosed=!0,e.shapeHoles.push(a)}function yxe(e,t,r,i){let n=i*t/100,a=n*(Math.abs(r)/Math.abs(t)),o=new ze(n/t,a/r),s=e.points.map(l=>{let u=l.clone();return u.uuid=Ot.generateUUID(),u}).reverse();return s.forEach(l=>{l.position.multiply(o);let u=l.controls[0].position.clone().multiply(o),c=l.controls[1].position.clone().multiply(o);l.controls[0].position.copy(c),l.controls[1].position.copy(u)}),s}var ddt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??i),a=Math.abs(r.depth??i),o=Math.abs(Math.min(i,a))/2;return{parameters:Object.assign(r,{width:i,height:n,depth:a,radius:o,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(e){let{width:t,height:r,depth:i,radius:n,revolutions:a,segments:o,pathRadius:s,pathType:l,pathSegments:u,cornerRadius:c,cornerSegments:d}=e.parameters,h=new bxe(!1,t,r,i,n,a,o,s,l,u,c,d);return Object.assign(h,{userData:{...e,type:"HelixGeometry"}})}},mB=new p_([0,0,0],1),bxe=class extends Wt{constructor(e=!0,t=1,r=1,i=1,n=1,a=1,o=1,s=1,l=1,u=1,c=1,d=1){if(super(),a===0)return;let h=e&&a===1;h&&(d=0),c>100&&(c=100),c===0&&(d=0);let f=()=>new k,g=new k,p=f(),m=f(),y=f(),b,w,x,S,C,T,M,A,P=f(),O=f(),j=f(),D=f(),I=f(),q=f(),$=f(),X=f(),N=r-2*s+.001,Q=N/a,F=Math.ceil(o*a),L=F+1,Y=N/F,ae=-N/2,re=u+1,H=2*Math.PI/u,se=Math.PI/2/d,le=.01,ee=Math.min((1-c/100)*s,s-le),J=s-ee,oe=0,me=2,be=d*me+me,de=re*be/me,ge=de+re*L,ce=Math.max(0,re*(L+be)),[Ce,Ee,Me]=[3,3,2].map(te=>Array(ce*te).fill(0)),he=[],Ae=n-s;function De(te,ve){let Re=Math.PI/2;T=ve*Y,A=2*Math.PI*(T%Q)/Q+Re,T+=ae,M=Math.sin(A)*Ae,C=Math.cos(A)*Ae,e?te.set(C,M,T):te.set(C,T,M)}De(g,-1e-10),De(p,0),P.copy(g),De(g,1);let Z=g.distanceTo(p),ie=h?0:J+ee,Te=Z*F+2*ie,Ue=ee,ne=Te-ie;for(let te=0;te<=F;te++){De(m,te),X.subVectors(m,P).normalize(),P.copy(m),q.copy(m).setComponent(+e+1,0).normalize(),$.crossVectors(X,q).normalize();let ve=te===0,Re=te===F,Fe=ve?3*Math.PI/2:se,et=ve?Ue:ne,Ze=ve?re:ge,Pe=ve?0:ce-re,Le=X.clone().multiplyScalar(ve?-J:J).add(m),ht=X.clone().multiplyScalar(ve?-1:1).normalize();for(let Be=0;Be<re;Be++){let Ye=Be*H;if(O.addVectors(g.copy(q).multiplyScalar(s*Math.cos(Ye)),p.copy($).multiplyScalar(s*Math.sin(Ye))),j.copy(O).normalize(),ve||Re){h||(oe=Pe+Be,[0,1,2].forEach($e=>{Ce[oe*3+$e]=Le.getComponent($e),Ee[oe*3+$e]=ht.getComponent($e)}),Me[oe*2]=+Re,Me[oe*2+1]=Be/u),p.copy(j).multiplyScalar(ee),y.addVectors(m,p);for(let $e=0;$e<d;$e++){let mt=$e*se+Fe;D.addVectors(g.copy(X).multiplyScalar(J*Math.sin(mt)),p.copy(j).multiplyScalar(J*Math.cos(mt))),I.copy(D).normalize(),p.addVectors(y,D),D.normalize(),oe=Ze+$e*re+Be,[0,1,2].forEach(qt=>{Ce[oe*3+qt]=p.getComponent(qt),Ee[oe*3+qt]=I.getComponent(qt)});let It=+ve+Math.sin(mt);Me[oe*2]=(et+J*It)/Te,Me[oe*2+1]=Be/u}}p.addVectors(m,O),oe=de+te*re+Be,[0,1,2].forEach($e=>{Ce[oe*3+$e]=p.getComponent($e),Ee[oe*3+$e]=j.getComponent($e)}),Me[oe*2]=(ie+te*Z)/Te,Me[oe*2+1]=Be/u}}let K=L+2*d+me,[B,U]=[+h,K-1];for(let te=B;te<=U-1;te++){let ve=h&&te===U-1;for(let Re=0;Re<re-1;Re++)b=te*re+Re,w=b+1,x=(ve?Re:b)+re,S=(ve?Re+1:w)+re,te===0?he.push(w,S,x):te===K-2?he.push(b,w,x):he.push(b,w,x,w,S,x)}this.setIndex(he),this.setAttribute("position",new Pt(Ce,3)),this.setAttribute("normal",new Pt(Ee,3)),this.setAttribute("uv",new Pt(Me,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),r=e.radialSegments+1,i=Array.from(this.getIndex().array),n,a,o,s,l=6*(t-1)*e.radialSegments,u=t,c=u===t;for(let d=0;d<e.radialSegments;d++)n=u*r+d,a=n+1,o=(c?d:n)+r,s=(c?d+1:a)+r,i[l++]=n,i[l++]=a,i[l++]=o,i[l++]=a,i[l++]=s,i[l++]=o;return i.length=l,mB.array=i,mB.count=i.length,mB}},hdt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:a,cornerSides:o}=e.parameters,s=n===0&&a!==0?new _xe(t*.5,a,o):new v_e(t*.5,n);return s.scale(1,r/t,i/t),Object.assign(s,{userData:{...e,type:"IcosahedronGeometry"}})}},_xe=class extends XW{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],o="IcosahedronGeometry";super(n,a,o,e,t,r),this.type=o}static fromJSON(e){return new _xe(e.radius,e.corner,e.cornerSides)}},fdt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i;(((i=e.parameters)==null?void 0:i.points)??[]).forEach(n=>{Array.isArray(n)&&(n.x=n[0],n.y=n[1])});let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{points:t,segments:r,verticalSegments:i}=e.parameters,n=new hD;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let a=new d_e(n.extractPoints(i).shape,r);return a.rotateZ(Math.PI),Object.assign(a,{userData:{...e,type:"LatheGeometry"}})}},Xf=new dt,gB=new li,QA=new k,KD=class extends xa{constructor(){super(),this.uuid=Ot.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new xn().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(let a=0,o=n.vertexNormals.length;a<o;a++)n.vertexNormals[a].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Xf.makeRotationX(e),this.applyMatrix4(Xf),this}rotateY(e){return Xf.makeRotationY(e),this.applyMatrix4(Xf),this}rotateZ(e){return Xf.makeRotationZ(e),this.applyMatrix4(Xf),this}translate(e,t,r){return Xf.makeTranslation(e,t,r),this.applyMatrix4(Xf),this}scale(e,t,r){return Xf.makeScale(e,t,r),this.applyMatrix4(Xf),this}lookAt(e){return gB.lookAt(e),gB.updateMatrix(),this.applyMatrix4(gB.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=i.position,a=i.normal,o=i.color,s=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let d=0;d<n.count;d++)t.vertices.push(new k().fromBufferAttribute(n,d)),o!==void 0&&t.colors.push(new er().fromBufferAttribute(o,d));function u(d,h,f,g){let p=o===void 0?[]:[t.colors[d].clone(),t.colors[h].clone(),t.colors[f].clone()],m=a===void 0?[]:[new k().fromBufferAttribute(a,d),new k().fromBufferAttribute(a,h),new k().fromBufferAttribute(a,f)],y=new fk(d,h,f,m,p,g);t.faces.push(y),s!==void 0&&t.faceVertexUvs[0].push([new ze().fromBufferAttribute(s,d),new ze().fromBufferAttribute(s,h),new ze().fromBufferAttribute(s,f)]),l!==void 0&&t.faceVertexUvs[1].push([new ze().fromBufferAttribute(l,d),new ze().fromBufferAttribute(l,h),new ze().fromBufferAttribute(l,f)])}let c=e.groups;if(c.length>0)for(let d=0;d<c.length;d++){let h=c[d],f=h.start,g=h.count;for(let p=f,m=f+g;p<m;p+=3)r!==void 0?u(r.getX(p),r.getX(p+1),r.getX(p+2),h.materialIndex):u(p,p+1,p+2,h.materialIndex)}else if(r!==void 0)for(let d=0;d<r.count;d+=3)u(r.getX(d),r.getX(d+1),r.getX(d+2));else for(let d=0;d<n.count;d+=3)u(d,d+1,d+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(QA).negate(),this.translate(QA.x,QA.y,QA.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new dt;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new k,t=new k;for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],a=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new k;if(e){let r=new k,i=new k;for(let n=0,a=this.faces.length;n<a;n++){let o=this.faces[n],s=this.vertices[o.a],l=this.vertices[o.b],u=this.vertices[o.c];r.subVectors(u,l),i.subVectors(s,l),r.cross(i),t[o.a].add(r),t[o.b].add(r),t[o.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],a=n.vertexNormals;a.length===3?(a[0].copy(t[n.a]),a[1].copy(t[n.b]),a[2].copy(t[n.c])):(a[0]=t[n.a].clone(),a[1]=t[n.b].clone(),a[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let n=0,a=i.vertexNormals.length;n<a;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}let e=new KD;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,a=this.morphNormals[t].vertexNormals;for(let o=0,s=this.faces.length;o<s;o++){let l=new k,u={a:new k,b:new k,c:new k};n.push(l),a.push(u)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,a=this.faces.length;n<a;n++){let o=this.faces[n],s=i.faceNormals[n],l=i.vertexNormals[n];s.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new dn),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Lo),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i,n=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;t!==void 0&&(i=new xn().getNormalMatrix(t));for(let d=0,h=o.length;d<h;d++){let f=o[d].clone();t!==void 0&&f.applyMatrix4(t),a.push(f)}for(let d=0,h=c.length;d<h;d++)u.push(c[d].clone());for(let d=0,h=l.length;d<h;d++){let f=l[d],g,p,m=f.vertexNormals,y=f.vertexColors,b=new fk(f.a+n,f.b+n,f.c+n);b.normal.copy(f.normal),i!==void 0&&b.normal.applyMatrix3(i).normalize();for(let w=0,x=m.length;w<x;w++)g=m[w].clone(),i!==void 0&&g.applyMatrix3(i).normalize(),b.vertexNormals.push(g);b.color.copy(f.color);for(let w=0,x=y.length;w<x;w++)p=y[w],b.vertexColors.push(p.clone());b.materialIndex=f.materialIndex+r,s.push(b)}for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let f=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let g=0,p=f.length;g<p;g++){let m=f[g],y=[];for(let b=0,w=m.length;b<w;b++)y.push(m[b].clone());this.faceVertexUvs[d].push(y)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],i=[],n=Math.pow(10,e);for(let s=0,l=this.vertices.length;s<l;s++){let u=this.vertices[s],c=Math.round(u.x*n)+"_"+Math.round(u.y*n)+"_"+Math.round(u.z*n);t[c]===void 0?(t[c]=s,r.push(this.vertices[s]),i[s]=r.length-1):i[s]=i[t[c]]}let a=[];for(let s=0,l=this.faces.length;s<l;s++){let u=this.faces[s];u.a=i[u.a],u.b=i[u.b],u.c=i[u.c];let c=[u.a,u.b,u.c];for(let d=0;d<3;d++)if(c[d]===c[(d+1)%3]){a.push(s);break}}for(let s=a.length-1;s>=0;s--){let l=a[s];this.faces.splice(l,1);for(let u=0,c=this.faceVertexUvs.length;u<c;u++)this.faceVertexUvs[u].splice(l,1)}let o=this.vertices.length-r.length;return this.vertices=r,o}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let i=e[t];this.vertices.push(new k(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let s=0;s<t;s++)e[s]._id=s;function r(s,l){return s.materialIndex-l.materialIndex}e.sort(r);let i=this.faceVertexUvs[0],n=this.faceVertexUvs[1],a,o;i&&i.length===t&&(a=[]),n&&n.length===t&&(o=[]);for(let s=0;s<t;s++){let l=e[s]._id;a&&a.push(i[l]),o&&o.push(n[l])}a&&(this.faceVertexUvs[0]=a),o&&(this.faceVertexUvs[1]=o)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let f=this.parameters;for(let g in f)f[g]!==void 0&&(e[g]=f[g]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let g=this.vertices[f];t.push(g.x,g.y,g.z)}let r=[],i=[],n={},a=[],o={},s=[],l={};for(let f=0;f<this.faces.length;f++){let g=this.faces[f],p=!0,m=!1,y=this.faceVertexUvs[0][f]!==void 0,b=g.normal.length()>0,w=g.vertexNormals.length>0,x=g.color.r!==1||g.color.g!==1||g.color.b!==1,S=g.vertexColors.length>0,C=0;if(C=u(C,0,0),C=u(C,1,p),C=u(C,2,m),C=u(C,3,y),C=u(C,4,b),C=u(C,5,w),C=u(C,6,x),C=u(C,7,S),r.push(C),r.push(g.a,g.b,g.c),r.push(g.materialIndex),y){let T=this.faceVertexUvs[0][f];r.push(h(T[0]),h(T[1]),h(T[2]))}if(b&&r.push(c(g.normal)),w){let T=g.vertexNormals;r.push(c(T[0]),c(T[1]),c(T[2]))}if(x&&r.push(d(g.color)),S){let T=g.vertexColors;r.push(d(T[0]),d(T[1]),d(T[2]))}}function u(f,g,p){return p?f|1<<g:f&~(1<<g)}function c(f){let g=f.x.toString()+f.y.toString()+f.z.toString();return n[g]!==void 0||(n[g]=i.length/3,i.push(f.x,f.y,f.z)),n[g]}function d(f){let g=f.r.toString()+f.g.toString()+f.b.toString();return o[g]!==void 0||(o[g]=a.length,a.push(f.getHex())),o[g]}function h(f){let g=f.x.toString()+f.y.toString();return l[g]!==void 0||(l[g]=s.length/2,s.push(f.x,f.y)),l[g]}return e.data={},e.data.vertices=t,e.data.normals=i,a.length>0&&(e.data.colors=a),s.length>0&&(e.data.uvs=[s]),e.data.faces=r,e}clone(){return new KD().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let d=0,h=t.length;d<h;d++)this.vertices.push(t[d].clone());let r=e.colors;for(let d=0,h=r.length;d<h;d++)this.colors.push(r[d].clone());let i=e.faces;for(let d=0,h=i.length;d<h;d++)this.faces.push(i[d].clone());for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let f=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let g=0,p=f.length;g<p;g++){let m=f[g],y=[];for(let b=0,w=m.length;b<w;b++){let x=m[b];y.push(x.clone())}this.faceVertexUvs[d].push(y)}}let n=e.morphTargets;for(let d=0,h=n.length;d<h;d++){let f={};if(f.name=n[d].name,n[d].vertices!==void 0){f.vertices=[];for(let g=0,p=n[d].vertices.length;g<p;g++)f.vertices.push(n[d].vertices[g].clone())}if(n[d].normals!==void 0){f.normals=[];for(let g=0,p=n[d].normals.length;g<p;g++)f.normals.push(n[d].normals[g].clone())}this.morphTargets.push(f)}let a=e.morphNormals;for(let d=0,h=a.length;d<h;d++){let f={};if(a[d].vertexNormals!==void 0){f.vertexNormals=[];for(let g=0,p=a[d].vertexNormals.length;g<p;g++){let m=a[d].vertexNormals[g],y={};y.a=m.a.clone(),y.b=m.b.clone(),y.c=m.c.clone(),f.vertexNormals.push(y)}}if(a[d].faceNormals!==void 0){f.faceNormals=[];for(let g=0,p=a[d].faceNormals.length;g<p;g++)f.faceNormals.push(a[d].faceNormals[g].clone())}this.morphNormals.push(f)}let o=e.skinWeights;for(let d=0,h=o.length;d<h;d++)this.skinWeights.push(o[d].clone());let s=e.skinIndices;for(let d=0,h=s.length;d<h;d++)this.skinIndices.push(s[d].clone());let l=e.lineDistances;for(let d=0,h=l.length;d<h;d++)this.lineDistances.push(l[d]);let u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new pdt().fromGeometry(this),t=new Wt,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",JA.call(new tr(r,3),e.vertices)),e.normals.length>0){let i=new Float32Array(e.normals.length*3);t.setAttribute("normal",JA.call(new tr(i,3),e.normals))}if(e.colors.length>0){let i=new Float32Array(e.colors.length*3);t.setAttribute("color",Eee.call(new tr(i,3),e.colors))}if(e.uvs.length>0){let i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",Mee.call(new tr(i,2),e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",Mee.call(new tr(i,2),e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let n=[],a=e.morphTargets[i];for(let o=0,s=a.length;o<s;o++){let l=a[o],u=new Pt(l.data.length*3,3);u.name=l.name,n.push(JA.call(u,l.data))}t.morphAttributes[i]=n}if(e.skinIndices.length>0){let i=new Pt(e.skinIndices.length*4,4);t.setAttribute("skinIndex",Pee.call(i,e.skinIndices))}if(e.skinWeights.length>0){let i=new Pt(e.skinWeights.length*4,4);t.setAttribute("skinWeight",Pee.call(i,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Wt,r=e.geometry;if(e.isPoints||e.isLine){let i=new Pt(r.vertices.length*3,3),n=new Pt(r.colors.length*3,3);if(t.setAttribute("position",JA.call(i,r.vertices)),t.setAttribute("color",Eee.call(n,r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let a=new Pt(r.lineDistances.length,1);t.setAttribute("lineDistance",mdt.call(a,r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};KD.prototype.isGeometry=!0;var pdt=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,i,n,a=e.faces;for(i=0;i<a.length;i++){let o=a[i];o.materialIndex!==n&&(n=o.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:n})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,i=e.faceVertexUvs,n=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,o=e.morphTargets,s=o.length,l;if(s>0){l=[];for(let m=0;m<s;m++)l[m]={name:o[m].name,data:[]};this.morphTargets.position=l}let u=e.morphNormals,c=u.length,d;if(c>0){d=[];for(let m=0;m<c;m++)d[m]={name:u[m].name,data:[]};this.morphTargets.normal=d}let h=e.skinIndices,f=e.skinWeights,g=h.length===r.length,p=f.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let m=0;m<t.length;m++){let y=t[m];this.vertices.push(r[y.a],r[y.b],r[y.c]);let b=y.vertexNormals;if(b.length===3)this.normals.push(b[0],b[1],b[2]);else{let x=y.normal;this.normals.push(x,x,x)}let w=y.vertexColors;if(w.length===3)this.colors.push(w[0],w[1],w[2]);else{let x=y.color;this.colors.push(x,x,x)}if(n===!0){let x=i[0][m];x!==void 0?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new ze,new ze,new ze))}if(a===!0){let x=i[1][m];x!==void 0?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new ze,new ze,new ze))}for(let x=0;x<s;x++){let S=o[x].vertices;l[x].data.push(S[y.a],S[y.b],S[y.c])}for(let x=0;x<c;x++){let S=u[x].vertexNormals[m];d[x].data.push(S.a,S.b,S.c)}g&&this.skinIndices.push(h[y.a],h[y.b],h[y.c]),p&&this.skinWeights.push(f[y.a],f[y.b],f[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},fk=class{constructor(e,t,r,i,n,a=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new k,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new er,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=a}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function mdt(e){return this.array.set(e),this}function Eee(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new er),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this}function Mee(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new ze),t[r++]=a.x,t[r++]=a.y}return this}function JA(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new k),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this}function Pee(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let a=e[i];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new hr),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z,t[r++]=a.w}return this}var gdt=["a","b","c"];function vdt(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function vB(e,t,r){let i=Math.min(e,t),n=Math.max(e,t),a=i+"_"+n;return r.get(a)}function yB(e,t,r,i,n,a){let o=Math.min(e,t),s=Math.max(e,t),l=o+"_"+s,u;if(i.has(l))u=i.get(l);else{let c=r[o],d=r[s];u={a:c,b:d,newEdge:null,faces:[]},i.set(l,u)}u.faces.push(n),a[e].edges.push(u),a[t].edges.push(u)}function ydt(e,t,r,i){let n,a,o;for(n=0,a=e.length;n<a;n++)r[n]={edges:[]};for(n=0,a=t.length;n<a;n++)o=t[n],yB(o.a,o.b,e,i,o,r),yB(o.b,o.c,e,i,o,r),yB(o.c,o.a,e,i,o,r)}function ZA(e,t,r,i,n){e.push(new fk(t,r,i,void 0,void 0,n))}function C1(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function eO(e,t,r,i){e.push([t.clone(),r.clone(),i.clone()])}var bdt=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Wt?e=new KD().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new k,r,i,n,a,o,s=e.vertices,l=e.faces,u=e.faceVertexUvs[0],c=u!==void 0&&u.length>0,d=[],h=new Map;ydt(s,l,d,h);let f=[],g,p,m,y,b,w,x;for(let le of Array.from(h.keys())){for(p=h.get(le),m=new k,b=3/8,w=1/8,x=p.faces.length,x!=2&&(b=.5,w=0,x!=1),m.addVectors(p.a,p.b).multiplyScalar(b),t.set(0,0,0),a=0;a<x;a++){for(y=p.faces[a],o=0;o<3&&(g=s[vdt(y,gdt[o])],!(g!==p.a&&g!==p.b));o++);g&&t.add(g)}t.multiplyScalar(w),m.add(t),p.newEdge=f.length,f.push(m)}let S,C,T,M,A,P,O,j=[];for(i=0,n=s.length;i<n;i++){for(P=s[i],A=d[i].edges,r=A.length,r==3?S=3/16:r>3&&(S=3/(8*r)),C=1-r*Number(S),T=S,r<=2&&(r==2?(C=3/4,T=1/8):r==1||r==0),O=P.clone().multiplyScalar(C),t.set(0,0,0),a=0;a<r;a++)M=A[a],g=M.a!==P?M.a:M.b,t.add(g);t.multiplyScalar(Number(T)),O.add(t),j.push(O)}let D=j.concat(f),I=j.length,q,$,X,N=[],Q=[],F,L,Y,ae,re=new ze,H=new ze,se=new ze;for(i=0,n=l.length;i<n;i++)y=l[i],q=Number(vB(y.a,y.b,h).newEdge)+I,$=Number(vB(y.b,y.c,h).newEdge)+I,X=Number(vB(y.c,y.a,h).newEdge)+I,ZA(N,q,$,X,y.materialIndex),ZA(N,y.a,q,X,y.materialIndex),ZA(N,y.b,$,q,y.materialIndex),ZA(N,y.c,X,$,y.materialIndex),c&&(F=u[i],L=F[0],Y=F[1],ae=F[2],re.set(C1(L.x,Y.x),C1(L.y,Y.y)),H.set(C1(Y.x,ae.x),C1(Y.y,ae.y)),se.set(C1(L.x,ae.x),C1(L.y,ae.y)),eO(Q,re,H,se),eO(Q,L,re,se),eO(Q,Y,H,re),eO(Q,ae,se,H));e.vertices=D,e.faces=N,c&&(e.faceVertexUvs[0]=Q)}},Rn=new k,_dt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=e.geometry??(t==null?void 0:t.geometry)??new Wt().copy(new Af(100,100,100)),i;t===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(Rn),i={width:Rn.x,height:Rn.y,depth:Rn.z,subdivisions:0}):i=t.parameters;let n={...i,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:r}}static build(e){let{width:t,height:r,depth:i,subdivisions:n}=e.parameters,a=e.geometry??new Wt().copy(new Af(100,100,100)),o=a.userData.parameters;o===void 0?(a.computeBoundingBox(),a.boundingBox.getSize(Rn)):Rn.set(o.width,o.height,o.depth),(t!==Rn.x||r!==Rn.y||i!==Rn.z)&&a.scale(Rn.x===0?1:t/Rn.x,Rn.y===0?1:r/Rn.y,Rn.z===0?1:i/Rn.z);let s=a.originalGeometry;try{n>0?(s===void 0||(o==null?void 0:o.subdivisions)!==n)&&(s===void 0&&(s=a),a=new bdt(n).modify(s).toBufferGeometry()):(s!==void 0&&(a=s),s=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals())}catch{s!==void 0&&(a=s),s=void 0,a.getAttribute("normal")===void 0&&a.computeVertexNormals()}return s!==void 0&&Object.assign(a,{originalGeometry:s}),delete e.geometry,Object.assign(a,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,r){new M_e(r).load(e,i=>{let n=this.normalizeInputs({geometry:i});i.boundingBox.getSize(Rn);let a=100/Rn.x;Object.assign(n.parameters,{width:100,height:Rn.y*a,depth:Rn.z*a}),t(this.build(n))})}},wxe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Qi?e.shape:new Qi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,cornerRadius:n,depth:a,extrudeBevelSize:o,extrudeBevelSegments:s}=e.parameters,l=e.shape,u=t*.5,c=r*.5,d=0,h=0,f=2*Math.PI/i;for(let p=0;p<i;p++){let m=f*p,y=d+Math.sin(m)*u,b=h+Math.cos(m)*c;l.addPoint(l.createPoint(y,b))}l.isClosed=!0;for(let p=0,m=l.points.length;p<m;p++)l.points[p].roundness=n;l.roundness=n,l.update();let g=Eb.create({shape:l,parameters:{roundness:n,depth:a,extrudeBevelSize:o,extrudeBevelSegments:s}});return Object.assign(g,{userData:{...e,type:"PolygonGeometry"}})}},wdt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,heightSegments:a,openEnded:o,cornerRadius:s,cornerSegments:l}=e.parameters,u=new Sdt(t*.5,r,n,a,o,s,l);return u.scale(1,1,i/t),Object.assign(u,{userData:{...e,type:"PyramidGeometry"}})}};function Kx(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function bB(e,t,r,i,n,a){let o=t.clone().sub(e),s=r.clone().sub(e),l=o.angleTo(s);if(o.normalize(),s.normalize(),i===n){let u=o.add(s).normalize();a.copy(e).addScaledVector(u,i/Math.sin(l/2))}else{let u=o.angleTo(s);a.copy(e),a.addScaledVector(o,n/Math.sin(u)),a.addScaledVector(s,i/Math.sin(u))}}function xdt(e,t,r){let i=e.clone().sub(t),n=r.clone().sub(t);return i.projectOnVector(n),i.add(t)}var Sdt=class extends Wt{constructor(e=.5,t=1,r=4,i=1,n=!1,a=0,o=4){super(),r=Math.floor(Math.max(3,r)),i=Math.floor(i),o=Math.floor(o);let s=[],l=[],u=[],c=[],d=0,h=t/2,f=Math.PI/r,g=e*Math.cos(Math.PI/r),p=2*Math.PI/r,m=(r-2)*Math.PI/r,y=Math.PI-m,b=new k(0,-h,0),w=new k(0,h,0),x=new ze(e,-h),S=new ze(g,-h),C=new ze(0,w.y).sub(S),T=new ze(0,w.y).sub(x),M=new ze(C.y,-C.x).normalize(),A=new ze(T.y,-T.x).normalize(),P=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-C.angle())/2)-1e-8;a=Math.min(a,P);let O;{let X=new k(M.x,M.y,0),N=new k(Math.cos(p)*X.x,X.y,Math.sin(p)*X.x);O=X.angleTo(N)}let j=a/Math.tan((Math.PI-C.angle())/2),D=a/Math.tan((Math.PI-O)/2),I=new k;if(!n){l.push(b.x,b.y,b.z),u.push(0,-1,0),c.push(0,0);let X=d++,N=[],Q=x.clone(),F=j/Math.cos(Math.PI/r);Q.x-=F;for(let L=0;L<r;L++){let Y=L/r*Math.PI*2+f,ae=new ze(Math.sin(Y),Math.cos(Y));Kx(Q,ae,I),l.push(I.x,I.y,I.z),u.push(0,-1,0),c.push(0,0),N.push(d++)}for(let L=0;L<N.length;L++)s.push(N[L],X,N[(L+1)%N.length])}{let X=new k,N=new k,Q=new k,F=new k,L=new k,Y=new k;for(let ae=0;ae<r;ae++){let re=ae/r*Math.PI*2+f,H=(ae+.5)/r*Math.PI*2+f,se=(ae+1)/r*Math.PI*2+f,le=new ze(Math.sin(re),Math.cos(re)),ee=new ze(Math.sin(H),Math.cos(H)),J=new ze(Math.sin(se),Math.cos(se));Kx(x,le,N),Kx(x,J,Q),Kx(M,ee,X),bB(w,N,Q,D,D,F),l.push(F.x,F.y,F.z),bB(N,w,Q,D,j,L),l.push(L.x,L.y,L.z),bB(Q,N,w,j,D,Y),l.push(Y.x,Y.y,Y.z),u.push(X.x,X.y,X.z),u.push(X.x,X.y,X.z),u.push(X.x,X.y,X.z),c.push(0,0),c.push(0,0),c.push(0,0);let oe=d++,me=d++,be=d++;if(s.push(oe,me,be),a>0){{let ce=N.clone().add(Q).multiplyScalar(.5),Ce=w.clone().sub(ce).normalize(),Ee=b.clone().sub(ce).normalize().add(Ce).normalize().multiplyScalar(-1),Me=Y.clone().sub(L);q(ce,Me,Ee,C.angle())}let de,ge;{let ce=new k;Kx(A,J,ce);let Ce=Y.clone().add(F).multiplyScalar(.5);Ce=xdt(Ce,Q,w);let Ee=Y.clone().sub(F);[de,ge]=q(Ce,Ee,ce,O,F.y)}{let ce=de,Ce=ce.clone().setY(0).normalize(),Ee=new k(0,-1,0),Me=Ce.clone().cross(Ee);$(ce,Ce,Ee,Me)}{let ce=C.angle(),Ce=Math.PI-ce,Ee=w.clone();Ee.y-=a/Math.sin(ce-Math.PI/2);let Me=new k,he=[];for(let De=0;De<o;De++){let Z=[],ie=Math.PI/2-Ce*De/o,Te=Math.cos(ie),Ue=Math.sin(ie),ne=H;for(let K=0;K<=De;K++){let B=Math.cos(ne),U=Math.sin(ne);X.x=Te*U,X.y=Ue,X.z=Te*B,Me.copy(Ee).addScaledVector(X,a),l.push(Me.x,Me.y,Me.z),u.push(X.x,X.y,X.z),c.push(0,0),Z.push(d++),ne+=Math.PI*2/De/r}he.push(Z)}ge.reverse(),he.push(ge);let Ae=he.length-1;for(let De=0;De<Ae;De++){let Z=he[De],ie=he[De+1],Te=Z.length-1;s.push(ie[1],Z[0],ie[0]);for(let Ue=1;Ue<=Te;Ue++)s.push(Z[Ue],Z[Ue-1],ie[Ue]),s.push(ie[Ue+1],Z[Ue],ie[Ue])}}}}}this.setIndex(s),this.setAttribute("position",new Pt(l,3)),this.setAttribute("normal",new Pt(u,3)),this.setAttribute("uv",new Pt(c,2));function q(X,N,Q,F,L){let Y=-F/2,ae=(Math.PI-F)/2,re=N.clone().normalize().cross(Q);X.addScaledVector(Q,-a/Math.sin(ae));let H=new k,se=new k,le=1,ee=d,J=[];for(let oe=0;oe<=o;oe++){let me=Y+oe/o*F;se.set(0,0,0),se.addScaledVector(re,Math.sin(me)),se.addScaledVector(Q,Math.cos(me));for(let be=0;be<=le;be++){let de=be/le-.5;if(H.copy(X),H.addScaledVector(N,de),H.addScaledVector(se,a),L!=null){let ge=Math.max(0,H.y-L);H.addScaledVector(N,-ge/N.y)}l.push(H.x,H.y,H.z),u.push(se.x,se.y,se.z),c.push(0,0),be===0&&J.push(d),d++}}for(let oe=0;oe<o;oe++)for(let me=0;me<le;me++){let be=ee+me+(le+1)*oe,de=be+(le+1),ge=de+1,ce=be+1;s.push(be,de,ce),s.push(de,ge,ce)}return[X.clone().addScaledVector(N,.5),J]}function $(X,N,Q,F){let L=Math.PI/2,Y=T.angle()-L,ae=[],re=new k,H=new k;for(let le=0;le<=o;le++){let ee=[],J=le/o;for(let oe=0;oe<=le;oe++){let me=((le?oe/le:0)-.5)*y,be=Math.cos(me),de=Math.sin(me),ge=Math.atan(Math.tan(Y)*be),ce=(L+ge)*J,Ce=Math.cos(ce),Ee=Math.sin(ce);re.set(0,0,0),re.addScaledVector(N,Ee*be),re.addScaledVector(Q,Ce),re.addScaledVector(F,Ee*de),H.copy(X).addScaledVector(re,a),l.push(H.x,H.y,H.z),u.push(re.x,re.y,re.z),c.push(0,0),ee.push(d++)}ae.push(ee)}let se=ae.length-1;for(let le=0;le<se;le++){let ee=ae[le],J=ae[le+1],oe=ee.length-1;s.push(ee[0],J[1],J[0]);for(let me=1;me<=oe;me++)s.push(ee[me-1],ee[me],J[me]),s.push(ee[me],J[me+1],J[me])}}}},eG=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),i=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Qi?e.shape:new Qi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)}),ui:i}}static build(e){let t=e.shape,{width:r,height:i,cornerRadius:n,cornerType:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,u={x:r*.5,y:i*.5},c={x:-u.x,y:-u.y},d={x:u.x,y:u.y};function h(x,S,C){return S>r&&C>i?Math.min(x*r/S,x*i/C):S>r?x*r/S:C>i?x*i/C:x}let f=[];f[0]=n[0]===0?0:h(n[0],n[0]+n[3],n[0]+n[1]),f[1]=n[1]===0?0:h(n[1],n[1]+n[2],n[1]+n[0]),f[2]=n[2]===0?0:h(n[2],n[2]+n[1],n[2]+n[3]),f[3]=n[3]===0?0:h(n[3],n[3]+n[0],n[3]+n[2]);let g=c.x,p=d.x,m=d.y,y=c.y;t.addPoint(t.createPoint(g,m)),t.addPoint(t.createPoint(p,m)),t.addPoint(t.createPoint(p,y)),t.addPoint(t.createPoint(g,y)),t.isClosed=!0;let b=!0;for(let x=0,S=t.points.length;x<S;x++)t.points[x].roundness=f[x],x>0&&f[x]!==f[x-1]&&(b=!1);b&&(t.roundness=f[0]),t.useCubicForRoundedCorners=a!==1,t.update();let w=Eb.create({shape:t,parameters:{depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(w,{userData:{...e,type:"RectangleGeometry"}})}},Cdt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return r.thetaLength=Ot.clamp(r.thetaLength,0,180),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t=100,height:r=t,depth:i=t,widthSegments:n=64,heightSegments:a=64,phiStart:o,phiLength:s,thetaStart:l,thetaLength:u}=e.parameters,c;return u===0?(c=new Wt,c.setAttribute("position",new Pt([],3))):c=new m_(.5*t,n,a,o,s,l,u*Ot.DEG2RAD),c.scale(1,r/t,i/t),Object.assign(c,{userData:{...e,type:"SphereGeometry"}})}},Edt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:i=8,heightSegments:n=8}=e.parameters,a=new Rp(t,r,i,n);return a.scale(1,1,1),Object.assign(a,{userData:{...e,type:"PlaneGeometry"}})}},Mdt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,angle:n,cornerRadius:a,cornerSegments:o}=e.parameters,s=new Pdt(t,r,i,n,a,o);return Object.assign(s,{userData:{...e,type:"BackdropGeometry"}})}},Pdt=class extends Wt{constructor(e=1,t=1,r=1,i=90,n=10,a=24){super(),this.type="BackdropGeometry";let o=[],s=[],l=[],u=.001;n==0&&(a=1),a=Math.max(1,Math.floor(a)),n=Math.min(n,100),i=Math.min(180-u,i),i*=Math.PI/180;let c=[],d=Math.PI/2,h=(le=0,ee=0,J=0)=>new k(le,ee,J),f=h(),g=h(),[p,m,y]=[t/2,e/2,r/2],b=-m,w=+m,[x,S,C]=[h(b,-p,+y),h(b,-p,-y),h(b,+p,-y)],T=(le,ee=!1)=>Math.sin(le-Math.PI/(1+ +ee)),M=(le,ee=!1)=>Math.cos(le-Math.PI/(1+ +ee));C.y=Math.sin(i)*t-p;let A=Math.cos(i)*t-y,P=x.z-u;i<=d?(C.z=Math.min(A,P),C.z==P&&(C.y-=(A-P)/Math.tan(d-i))):S.z=Math.min(S.z-A-y,x.z-u),f.subVectors(x,S),g.subVectors(C,S);let O=Math.min(f.length(),g.length())*n/100,j=O*Math.tan(i/2),D=O/Math.cos(i/2),I=f.clone().normalize().add(g.normalize()).setLength(D).add(S);f.set(0,T(i,!0),M(i,!0)),c.push([C,f.clone()]);let q=(Math.PI-i)/a;for(let le=0;le<=a;le++){let ee=d+i+le*q;f.set(0,Math.sin(ee)*j,Math.cos(ee)*j),f.add(I),g.set(0,T(ee),M(ee)),c.push([f.clone(),g.clone()])}c.push([x,h(0,1,0)]);let $=Math.sin(q/2)*j*2,X=c.length-1,N=c[0][0].distanceTo(c[1][0]),Q=c[X-1][0].distanceTo(c[X][0]),F=N+$*a+Q;c[0].push(1);for(let le=0;le<=a;le++)c[le+1].push(1-(N+le*$)/F);c[X].push(0);let[L,Y,ae]=c[0],re,H,se;for(let le=1;le<c.length;le++)[re,H,se]=c[le],o.push(b,L.y,L.z,b,re.y,re.z,w,L.y,L.z,w,L.y,L.z,b,re.y,re.z,w,re.y,re.z),s.push(0,Y.y,Y.z,0,H.y,H.z,0,Y.y,Y.z,0,Y.y,Y.z,0,H.y,H.z,0,H.y,H.z),l.push(0,ae,0,se,1,ae,1,ae,0,se,1,se),[L,Y,ae]=[re,H,se];this.setAttribute("position",new Pt(o,3)),this.setAttribute("normal",new Pt(s,3)),this.setAttribute("uv",new Pt(l,2))}},xxe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Qi?e.shape:new Qi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:i,spikes:n,cornerRadius:a,angle:o,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}=e.parameters,c=e.shape,d=t*.5,h=r*.5,f=0,g=0,p=o*Math.PI/360/n,m=Math.PI/2*3*-1,y=d*i/100,b=h*i/100;if(n===3&&i===50){p=2*Math.PI/n;for(let x=0;x<n;x++){let S=p*x,C=f+Math.sin(S)*d,T=g+Math.cos(S)*h;c.addPoint(c.createPoint(C,T))}}else for(let x=0;x<n;x++){let S=f+Math.cos(m)*d,C=g+Math.sin(m)*h;c.addPoint(c.createPoint(S,C)),m+=p,S=f+Math.cos(m)*y,C=g+Math.sin(m)*b,c.addPoint(c.createPoint(S,C)),m+=p}c.isClosed=!0;for(let x=0,S=c.points.length;x<S;x++)c.points[x].roundness=a;c.roundness=a,c.update();let w=Eb.create({shape:c,parameters:{roundness:a,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(w,{userData:{...e,type:"StarGeometry"}})}},Tdt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r}=e.parameters,i=new Rp(t,r);return Object.assign(i,{userData:{...e,type:"TextFrameGeometry"}})}},Adt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width);r.shapeBlendNode&&(n=i);let a=Math.round(Math.abs(r.depth??r.width*.25));return{parameters:Object.assign(r,{width:i,height:n,depth:a})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,tubularSegments:a,arc:o,cornerRadius:s,cornerSegments:l}=e.parameters,u=Odt(t,r,i,t*.5,o,a,0,0,n,s,l);return u.scale(1,r/t,1),Object.assign(u,{userData:{...e,type:"TorusGeometry"}})}};function Odt(e,t,r,i,n,a,o,s,l,u,c){[t,r]=[r,t],o=t/2;let d=Ot.clamp(n/360,0,1);if(d===0){let h=new Wt;return h.setAttribute("position",new Pt([],3)),h}return d===1&&(u=0),new bxe(!0,e,t,r,i,d,a,o,s,l,u,c)}var Rdt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),tube:r.tube??r.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:i,radialSegments:n,p:a,q:o}=e.parameters,s=t*.5;s!==r&&(s-=r);let l=new b_e(s,r,i,n,a,o);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},Ddt=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Qi?e.shape:new Qi,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t=100,height:r,cornerRadius:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:o,isRect:s}=e.parameters,l=e.shape,u=t*.5,c=r*.5;s?(l.addPoint(l.createPoint(-u,c)),l.addPoint(l.createPoint(u,-c)),l.addPoint(l.createPoint(-u,-c))):(l.addPoint(l.createPoint(0,c)),l.addPoint(l.createPoint(u,-c)),l.addPoint(l.createPoint(-u,-c))),l.isClosed=!0;for(let h=0,f=l.points.length;h<f;h++)l.points[h].roundness=i;l.roundness=i,l.update();let d=Eb.create({shape:l,parameters:{roundness:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(d,{userData:{...e,type:"TriangleGeometry"}})}};function Idt(e,t){let r=2*Math.PI;return(e%r+r)%r===(t%r+r)%r}function jdt(e){return/^(rgba)?\(\s*(\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase())}function zdt(e,t,r){let i,n,a,o=Math.floor(e*6),s=e*6-o,l=r*(1-t),u=r*(1-s*t),c=r*(1-(1-s)*t);switch(o%6){case 0:i=r,n=c,a=l;break;case 1:i=u,n=r,a=l;break;case 2:i=l,n=r,a=c;break;case 3:i=l,n=u,a=r;break;case 4:i=c,n=l,a=r;break;case 5:default:i=r,n=l,a=u;break}return{r:i*255,g:n*255,b:a*255}}function Bdt(e,t,r){e/=255,t/=255,r/=255;let i=Math.max(e,t,r),n=Math.min(e,t,r),a=i,o=i-n,s=i==0?0:o/i,l;if(i==n)l=0;else{switch(i){case e:l=(t-r)/o+(t<r?6:0);break;case t:l=(r-e)/o+2;break;case r:default:l=(e-t)/o+4;break}l/=6}return{h:l,s,v:a}}function Ldt(e){return e=Math.floor(e),{r:e>>16&255,g:e>>8&255,b:e&255}}function Fdt(e,t,r){return(e<<16)+(t<<8)+r}function Ndt(e,t,r){return e=Math.round(e),t=Math.round(t),r=Math.round(r),"#"+[e,t,r].map(i=>i.toString(16).padStart(2,"0")).join("").toUpperCase()}function Udt(e){let t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(i,n,a,o)=>String(n+n+a+a+o+o));let r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}var Vdt={parseRgba:jdt,hsvToRgb:zdt,rgbToHsv:Bdt,hexToRgb:Ldt,rgbToHex:Fdt,rgbToHexString:Ndt,hexStringToRgb:Udt},kdt=class{add(e,t,r){if(typeof arguments[0]!="string")for(let i in arguments[0])this.add(i,arguments[0][i],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(i){this[i]=this[i]||[],t&&this[i][r?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(r){r.call(t&&t.context?t.context:t,t)})}},qdt=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if(typeof t!="object"||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}},at=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+at.version}static addUnaryOp(t){return at.max_unop_len=Math.max(t.length,at.max_unop_len),at.unary_ops[t]=1,at}static addBinaryOp(t,r,i){return at.max_binop_len=Math.max(t.length,at.max_binop_len),at.binary_ops[t]=r,i?at.right_associative.add(t):at.right_associative.delete(t),at}static addIdentifierChar(t){return at.additional_identifier_chars.add(t),at}static addLiteral(t,r){return at.literals[t]=r,at}static removeUnaryOp(t){return delete at.unary_ops[t],t.length===at.max_unop_len&&(at.max_unop_len=at.getMaxKeyLen(at.unary_ops)),at}static removeAllUnaryOps(){return at.unary_ops={},at.max_unop_len=0,at}static removeIdentifierChar(t){return at.additional_identifier_chars.delete(t),at}static removeBinaryOp(t){return delete at.binary_ops[t],t.length===at.max_binop_len&&(at.max_binop_len=at.getMaxKeyLen(at.binary_ops)),at.right_associative.delete(t),at}static removeAllBinaryOps(){return at.binary_ops={},at.max_binop_len=0,at}static removeLiteral(t){return delete at.literals[t],at}static removeAllLiterals(){return at.literals={},at}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new at(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(r=>r.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return at.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!at.binary_ops[String.fromCharCode(t)]||at.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return at.isIdentifierStart(t)||at.isDecimalDigit(t)}throwError(t){let r=new Error(t+" at character "+this.index);throw r.index=this.index,r.description=t,r}runHook(t,r){if(at.hooks[t]){let i={context:this,node:r};return at.hooks.run(t,i),i.node}return r}searchHook(t){if(at.hooks[t]){let r={context:this};return at.hooks[t].find(function(i){return i.call(r.context,r),r.node}),r.node}}gobbleSpaces(){let t=this.code;for(;t===at.SPACE_CODE||t===at.TAB_CODE||t===at.LF_CODE||t===at.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let t=this.gobbleExpressions(),r=t.length===1?t[0]:{type:at.COMPOUND,body:t};return this.runHook("after-all",r)}gobbleExpressions(t){let r=[],i,n;for(;this.index<this.expr.length;)if(i=this.code,i===at.SEMCOL_CODE||i===at.COMMA_CODE)this.index++;else if(n=this.gobbleExpression())r.push(n);else if(this.index<this.expr.length){if(i===t)break;this.throwError('Unexpected "'+this.char+'"')}return r}gobbleExpression(){let t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,at.max_binop_len),r=t.length;for(;r>0;){if(at.binary_ops.hasOwnProperty(t)&&(!at.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!at.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=r,t;t=t.substr(0,--r)}return!1}gobbleBinaryExpression(){let t,r,i,n,a,o,s,l,u;if(o=this.gobbleToken(),!o||(r=this.gobbleBinaryOp(),!r))return o;for(a={value:r,prec:at.binaryPrecedence(r),right_a:at.right_associative.has(r)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+r),n=[o,a,s];r=this.gobbleBinaryOp();){if(i=at.binaryPrecedence(r),i===0){this.index-=r.length;break}a={value:r,prec:i,right_a:at.right_associative.has(r)},u=r;let c=d=>a.right_a&&d.right_a?i>d.prec:i<=d.prec;for(;n.length>2&&c(n[n.length-2]);)s=n.pop(),r=n.pop().value,o=n.pop(),t={type:at.BINARY_EXP,operator:r,left:o,right:s},n.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+u),n.push(a,t)}for(l=n.length-1,t=n[l];l>1;)t={type:at.BINARY_EXP,operator:n[l-1].value,left:n[l-2],right:t},l-=2;return t}gobbleToken(){let t,r,i,n;if(this.gobbleSpaces(),n=this.searchHook("gobble-token"),n)return this.runHook("after-token",n);if(t=this.code,at.isDecimalDigit(t)||t===at.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===at.SQUOTE_CODE||t===at.DQUOTE_CODE)n=this.gobbleStringLiteral();else if(t===at.OBRACK_CODE)n=this.gobbleArray();else{for(r=this.expr.substr(this.index,at.max_unop_len),i=r.length;i>0;){if(at.unary_ops.hasOwnProperty(r)&&(!at.isIdentifierStart(this.code)||this.index+r.length<this.expr.length&&!at.isIdentifierPart(this.expr.charCodeAt(this.index+r.length)))){this.index+=i;let a=this.gobbleToken();return a||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:at.UNARY_EXP,operator:r,argument:a,prefix:!0})}r=r.substr(0,--i)}at.isIdentifierStart(t)?(n=this.gobbleIdentifier(),at.literals.hasOwnProperty(n.name)?n={type:at.LITERAL,value:at.literals[n.name],raw:n.name}:n.name===at.this_str&&(n={type:at.THIS_EXP})):t===at.OPAREN_CODE&&(n=this.gobbleGroup())}return n?(n=this.gobbleTokenProperty(n),this.runHook("after-token",n)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let r=this.code;for(;r===at.PERIOD_CODE||r===at.OBRACK_CODE||r===at.OPAREN_CODE||r===at.QUMARK_CODE;){let i;if(r===at.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==at.PERIOD_CODE)break;i=!0,this.index+=2,this.gobbleSpaces(),r=this.code}this.index++,r===at.OBRACK_CODE?(t={type:at.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},this.gobbleSpaces(),r=this.code,r!==at.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):r===at.OPAREN_CODE?t={type:at.CALL_EXP,arguments:this.gobbleArguments(at.CPAREN_CODE),callee:t}:(r===at.PERIOD_CODE||i)&&(i&&this.index--,this.gobbleSpaces(),t={type:at.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),i&&(t.optional=!0),this.gobbleSpaces(),r=this.code}return t}gobbleNumericLiteral(){let t="",r,i;for(;at.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===at.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);at.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(r=this.char,r==="e"||r==="E"){for(t+=this.expr.charAt(this.index++),r=this.char,(r==="+"||r==="-")&&(t+=this.expr.charAt(this.index++));at.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);at.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}return i=this.code,at.isIdentifierStart(i)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):(i===at.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===at.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:at.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t="",r=this.index,i=this.expr.charAt(this.index++),n=!1;for(;this.index<this.expr.length;){let a=this.expr.charAt(this.index++);if(a===i){n=!0;break}else if(a==="\\")switch(a=this.expr.charAt(this.index++),a){case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=a}else t+=a}return n||this.throwError('Unclosed quote after "'+t+'"'),{type:at.LITERAL,value:t,raw:this.expr.substring(r,this.index)}}gobbleIdentifier(){let t=this.code,r=this.index;for(at.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,at.isIdentifierPart(t));)this.index++;return{type:at.IDENTIFIER,name:this.expr.slice(r,this.index)}}gobbleArguments(t){let r=[],i=!1,n=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let a=this.code;if(a===t){i=!0,this.index++,t===at.CPAREN_CODE&&n&&n>=r.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}else if(a===at.COMMA_CODE){if(this.index++,n++,n!==r.length){if(t===at.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===at.CBRACK_CODE)for(let o=r.length;o<n;o++)r.push(null)}}else if(r.length!==n&&n!==0)this.throwError("Expected comma");else{let o=this.gobbleExpression();(!o||o.type===at.COMPOUND)&&this.throwError("Expected comma"),r.push(o)}}return i||this.throwError("Expected "+String.fromCharCode(t)),r}gobbleGroup(){this.index++;let t=this.gobbleExpressions(at.CPAREN_CODE);if(this.code===at.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:at.SEQUENCE_EXP,expressions:t}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:at.ARRAY_EXP,elements:this.gobbleArguments(at.CBRACK_CODE)}}},Wdt=new kdt;Object.assign(at,{hooks:Wdt,plugins:new qdt(at),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});at.max_unop_len=at.getMaxKeyLen(at.unary_ops);at.max_binop_len=at.getMaxKeyLen(at.binary_ops);var rw=e=>new at(e).parse(),Gdt=Object.getOwnPropertyNames(at);Gdt.forEach(e=>{rw[e]===void 0&&e!=="prototype"&&(rw[e]=at[e])});rw.Jsep=at;var Hdt="ConditionalExpression",$dt={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let r=t.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let n=this.gobbleExpression();if(n||this.throwError("Expected expression"),t.node={type:Hdt,test:r,consequent:i,alternate:n},r.operator&&e.binary_ops[r.operator]<=.9){let a=r;for(;a.right.operator&&e.binary_ops[a.right.operator]<=.9;)a=a.right;t.node.test=a.right,a.right=t.node,t.node=r}}else this.throwError("Expected :")}})}};rw.plugins.register($dt);function pI(e){return{all:e=e||new Map,on:function(t,r){var i=e.get(t);i?i.push(r):e.set(t,[r])},off:function(t,r){var i=e.get(t);i&&(r?i.splice(i.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var i=e.get(t);i&&i.slice().map(function(n){n(r)}),(i=e.get("*"))&&i.slice().map(function(n){n(t,r)})}}}var Sxe=class{constructor(e,t,r){var i;this.id=e,this.userAPI=t,this.result=void 0,this.error="null",this.isPrefetched=!1,this.isLoading=!1,this.isLoaded=!1,this.prefetchPromise=new Promise(n=>n()),this.emitter=pI(),this._innerCallUserAPI=async n=>{var a,o,s;this.emitter.emit("start",{userAPIId:this.id}),this.isLoading=!0,this.isLoading=!1;try{this.result=await Jdt(this.userAPI,n),this.error="null",this.emitter.emit("success",{userAPIId:this.id})}catch(l){let u=((s=(o=(a=l.message)==null?void 0:a.split("_:_"))==null?void 0:o[0])==null?void 0:s.replace("status:",""))??"null";this.error=u,this.result=null,this.emitter.emit("error",{userAPIId:this.id})}this.isLoading=!1,this.isPrefetched=!0,this.isLoaded=!0},((i=t==null?void 0:t.integration)==null?void 0:i.type)==="OpenAI"?this.result={content:""}:t.method==="GET"&&t.url!==""&&(this.prefetchPromise=this.prefetch(r)),this._debouncedCallUserAPI=this._innerCallUserAPI,this._updateDebouncedCallUserAPI(),this._debouncedPrefetch=SM(this.prefetch,1e3,{trailing:!0})}_updateDebouncedCallUserAPI(){this._debouncedCallUserAPI=this.userAPI.debounce!==void 0&&this.userAPI.debounce>0?SM(this._innerCallUserAPI,this.userAPI.debounce,{leading:!0,trailing:!0}):this._innerCallUserAPI}async prefetch(e){await this.callUserAPI(e)}async callUserAPI(e){await this._debouncedCallUserAPI(e)}update(e,t,r=!0){this.userAPI=e,this._updateDebouncedCallUserAPI(),this.userAPI.url!==""&&this.userAPI.method==="GET"&&r&&this._debouncedPrefetch(t)}retrieveValue(e){if(this.result)try{return Ln.zoom(this.result,e)}catch(t){console.error(t)}}retrieveZoomedKeyValues(e){if(this.result){let t=e&&e.length?Ln.zoom(this.result,e):this.result;if(Qdt(t))return Object.entries(t);if(Kdt(t))return t.map((r,i)=>[i.toString(),r]);throw Ydt(t)?new Error("This path points to a value, use retrieveValue() instead. "+(e==null?void 0:e.join("."))):new Error("Path error"+(e==null?void 0:e.join(".")))}}dispose(){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}get autostart(){return this.userAPI.autoStart}};function Xdt(e){let t=new Headers;return e.headers.forEach(r=>{r.data.key!==""&&t.append(r.data.key,r.data.value)}),t}function Ydt(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null}function Kdt(e){return Array.isArray(e)}function Qdt(e){return typeof e=="object"&&e!==null}async function Jdt(e,t,r=new AbortController){var l,u,c,d;let i,n=e.url,a=((l=e.proxy)==null?void 0:l.enabled)??!1,o;if(((u=e.integration)==null?void 0:u.type)==="OpenAI"){let h=iE(e.integration.prompt===""?[]:JSON.parse(e.integration.prompt),t),f=e.integration.behavior===""?[]:iE(JSON.parse(e.integration.behavior),t);o=`{
		"model": "${e.integration.model}",
		"messages": [${e.integration.useBehavior?`
		{
			"role": "system",
			"content": "${f}"
		},`:""}
		{
			"role": "user",
			"content": "${h}"
		}
		]
	}`}if(a){n=`https://apis.spline.design/file/${e.proxy.fileId}/external-api/request?uuidexternalapi=${e.proxy.proxyId}`;let h;o!==void 0?h=o:e.method==="POST"&&e.body&&(h=iE(JSON.parse(e.body),t)),h!==void 0&&(n+=`&data=${encodeURIComponent(h.replace(/(\r\n|\n|\r|\t)/gm,""))}`)}else((c=e.integration)==null?void 0:c.type)==="OpenAI"?i=o:e.method==="POST"&&e.body&&(i=iE(JSON.parse(e.body),t));let s=await fetch(n,{method:a?"GET":e.method,headers:a?void 0:Xdt(e),signal:r.signal,body:i});if(!s.ok)throw new Error("status:"+s.status+"_:_"+s.statusText);if(((d=e.integration)==null?void 0:d.type)==="OpenAI"){let h=await s.json();return a&&(h=h.response),{content:h.choices[0].message.content}}else{let h=await s.json();return a&&(h=h.response),h}}var Cxe=(e,t)=>{if(typeof e=="string"){let r=t.getVariable(e);if(r)return Cxe(r,t)}return ba.isBoolean(e)?ba.getDisplayedValue(e).toLowerCase():ba.getDisplayedValue(e)},iE=(e,t)=>e.map((r,i)=>{if("text"in r)return r.text;if("type"in r){if(r.type==="paragraph")return(i>0?`
`:"")+iE(r.children,t);if(r.type==="variable"){let n=t.getVariable(r.variableId);if(n!==void 0)return Cxe(n,t)}}return""}).join(""),Zdt=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],eht=["0","1","2","3","4","5","6","7","8","9","."],tht=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function rht(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}rw.addBinaryOp("^",11,!0);function Exe(e,t,r="number"){let i="";for(let o=0;o<e.length;o++){let s=e[o];if("objType"in s&&s.objType==="api"){let l=JSON.parse(s.id),u=l[0],c=t.getUserAPI(u);if(c!==void 0&&c instanceof Sxe){let d=c.retrieveValue(l.slice(1));d!==void 0&&(i+=d)}continue}if("objType"in s&&s.objType==="webhook"){let l=JSON.parse(s.id),[u,c]=l,d=t.getUserWebhook(u);if(d!==void 0){let h=d.getParameterValue(c);h!==void 0&&(i+=h)}continue}if("objType"in s&&s.objType==="aiAssistant"){let l=t.openAIRealtime;if("objId"in s&&s.objId!==void 0){let u;if(t.scene.data.objects.traverse((c,d)=>{var f;let h=(f=d.events)==null?void 0:f.find(g=>g.id===s.objId);h&&(u=h)}),u!==void 0&&u.data.type==="AIAssistantListener"){let c=l==null?void 0:l.computeAnalysisForListenerEvent(u.data);if(c!==void 0){i+=c;continue}}}i+=(l==null?void 0:l.voice)??0;continue}if("id"in s){let l=e[o-1];if(o>0&&"id"in l){console.error("Two variables in a row",e);return}let u=t.getVariable(s.id),c=ba.getDisplayedValue(u);r==="number"&&ba.isTextValue(u)&&Array.isArray(u.textValue)&&u.textValue.length===1?c=parseFloat(c).toString():r==="boolean"&&ba.isBoolean(u)?c=u?"true":"false":r==="boolean"&&ba.isTextValue(u)&&!Array.isArray(u.textValue)&&(c='"'+c+'"'),i+=c;continue}else if(r==="string"){s.name!=='"'&&(s.name!=="+"||s.escaped)&&(i+=s.name),s.name==="+"&&!s.escaped&&i[i.length-1]==="\\"&&(i=i.slice(0,-1)+s.name);continue}if(s.name==="and"){i+="&&";continue}if(s.name==="or"){i+="||";continue}if(s.name==="True"){i+="true";continue}if(s.name==="False"){i+="false";continue}if(r==="boolean"&&!rht(s.name)&&!eht.includes(s.name)&&!Zdt.includes(s.name)&&!tht.includes(s.name.replace(/\($/g,""))){i+='"'+s.name+'"';continue}i+=s.name}if(r==="string")return i;if(e.length===0){if(r==="number")return 0;if(r==="boolean")return!1}let n;try{n=rw(i)}catch(o){console.error(i,o);return}let a;try{a=Kr(n)}catch(o){console.error(i,n,o)}return a}function Kr(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(Kr(e.left)===Kr(e.right));case"!=":return+(Kr(e.left)!==Kr(e.right));case">":return+(Kr(e.left)>Kr(e.right));case">=":return+(Kr(e.left)>=Kr(e.right));case"<":return+(Kr(e.left)<Kr(e.right));case"<=":return+(Kr(e.left)<=Kr(e.right));case"+":return Kr(e.left)+Kr(e.right);case"-":return Kr(e.left)-Kr(e.right);case"*":return Kr(e.left)*Kr(e.right);case"/":return Kr(e.left)/Kr(e.right);case"%":return Kr(e.left)%Kr(e.right);case"&&":return Kr(e.left)&&Kr(e.right);case"||":return Kr(e.left)||Kr(e.right);case"^":return Math.pow(Kr(e.left),Kr(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-Kr(e.argument);case"!":return+!Kr(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let t=0,r=1;if(e.arguments.length>=1)try{t=Kr(e.arguments[0])}catch(i){console.warn(i)}if(e.arguments.length>=2)try{r=Kr(e.arguments[1])}catch(i){console.warn(i)}return t=Math.min(r,t),r=Math.max(r,t),t+Math.random()*(r-t)}return Math[e.callee.name].apply(null,e.arguments.map(Kr))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var iht=new dt,nht=new dt;function aht(e,t,r){let i=[new k,new k,new k],n=[new k,new k,new k];return e.extractBasis(i[0],i[1],i[2]),t.extractBasis(n[0],n[1],n[2]),i.forEach((a,o)=>{let s=n[o],l=Ot.lerp(a.length(),s.length(),r);a.lerp(s,r).setLength(l)}),new dt().makeBasis(i[0],i[1],i[2])}var oht=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),a=Math.abs(r.depth??0),o=(t==null?void 0:t.shapeData)??ZW.create({parameters:Hwe}).userData.shape;return{path:e.path??zD.defaultData(),parameters:Object.assign(r,{width:i,height:n,depth:a,extrusion:{...$we,...r.extrusion}}),shapeData:o}}static build(e){if(e.path.points.length>=2){let t=new sht(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Wt,{userData:{...e,type:"PathGeometry"}})}},sht=class extends Wt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!Idt(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:r,offset:i}=this.inputs.parameters.extrusion;r=Math.max(0,Math.min(r,1)),i=Math.max(0,Math.min(i,1));let n=this.inputs.path.isClosed?e.length:e.length-1,a=Math.floor(i*n),o=this.inputs.path.isClosed?Math.ceil((r+i)*n):Math.ceil(Math.min(1,r+i)*n),s=Math.min(Math.max(2,o-a+1),n+2),l=[],u=[];for(let X=0;X<s;X++){let N=this.inputs.path.isClosed?(X+a)%e.length:Math.min(X+a,e.length-1);l.push(e[N].clone()),u.push(t[N].clone())}let c=(X,N,Q)=>{l[X]=l[X].clone().lerp(l[N],Q),u[X]=aht(u[X],u[N],Q)},d=0,h=i*n%1;(!this.inputs.path.isClosed||r<=1)&&(h||i===0)&&(d=h,c(0,1,d));let f=0,g=(i+r)*n%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&i+r<1)&&g&&(f=g,c(l.length-1,l.length-2,1-f)),r===0){let X=l.length-1;l[X].copy(l[0]),u[X].copy(u[0])}this._applyPathModifiers(u,d,f);let{bevel:p,bevelSides:m}=this.inputs.parameters.extrusion,y=p>0?this.inputs.parameters.extrusion.capType:"flat",b=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(b=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:w,infos:x,vertices:S}=this._computeShapePoints(b),C=0,T;y==="round"&&(T=new JW(this.inputs.shapeData,2*p,p,b,m,void 0,!0),C=T.getAttribute("position").count);let M=0,A=0;x.sort((X,N)=>X.start-N.start),x.forEach(X=>{X.verticesStart=M,X.verticesCount=X.continuous.reduce((N,Q,F)=>N+(F===0||!Q?2:1),0),A+=X.verticesCount,M=A});let P=A*s,O,j=0;if(this._isOpenEnded()&&y==="flat"){try{O=av({windingRule:di.ODD,elementType:wn.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:w})}catch{O=hxe}j=O.vertexCount}let D=P+2*j+C*2,I=P+2*j,q={positions:new Float32Array(D*3),normals:new Float32Array(D*3),uvs:new Float32Array(D*2)},$=[];if(x.forEach(X=>{this._extrudeRegion(X,S,u,l,q,$,this._isGeometryClosed()&&!this._isOpenEnded())}),O&&(this._closeEnd(O,P,$,q,u[0],l[0],!1),this._closeEnd(O,P+j,$,q,u[u.length-1],l[l.length-1],!0)),T){q.positions.set(T.getAttribute("position").array,I*3),q.normals.set(T.getAttribute("normal").array,I*3),q.uvs.set(T.getAttribute("uv").array,I*2);for(let F=I;F<I+C;F++)q.uvs[F*2+1]=1e-4;let X=$.length;$.push(...T.getIndex().array.map(F=>F+I)),I+=C,q.positions.set(T.getAttribute("position").array,I*3),q.normals.set(T.getAttribute("normal").array,I*3),q.uvs.set(T.getAttribute("uv").array,I*2);let N=$.length;$.push(...T.getIndex().array.map(F=>F+I)),this.setAttribute("position",new tr(q.positions,3)),this.setAttribute("normal",new tr(q.normals,3)),this.setAttribute("uv",new tr(q.uvs,2)),this.setIndex($);let Q=iht;Q.copy(u[u.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(Q,I,D),Q.copy(u[0]).setPosition(l[0]).multiply(nht.makeScale(1,1,-1)),this.applyMatrix4OnRange(Q,I-C,I),this.reverseIndicesOnRange(X,N)}else this.setAttribute("position",new tr(q.positions,3)),this.setAttribute("normal",new tr(q.normals,3)),this.setAttribute("uv",new tr(q.uvs,2)),this.setIndex($)}_extractPathPoints(){let e=rxe(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(r=>{t[t.length-1].distanceToSquared(r)>.001&&t.push(r)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],r=e.length,i=this.inputs.path.isClosed,n=new k,a=new k,o=new k,s=new k,l=new k(0,1,0);for(let g=0;g<r;g++){let p=e[g],m;g===0?m=i?e[e.length-2]:p.clone().multiplyScalar(2).sub(e[1]):m=e[g-1];let y;g===r-1?y=i?e[1]:p.clone().multiplyScalar(2).sub(e[g-1]):y=e[g+1];let b=p.clone().sub(m).normalize(),w=y.clone().sub(p).normalize(),x=b.clone().add(w).normalize();o.copy(x),g===0&&(x.equals(l)||x.clone().negate().equals(l))&&l.set(0,0,1);let S=l.clone().cross(x).normalize(),C=x.clone().cross(S).normalize();l.copy(C),s.copy(S),g===0&&(n.copy(C),a.copy(x));let T=new dt().makeBasis(S,C,x);t.push(T)}let u=i?a:o,c=i?n:new k(0,1,0),d=u.clone().cross(s).normalize(),h=Math.acos(c.dot(d));if(isNaN(h))return t;let f=c.clone().cross(d);u.dot(f)>0&&(h*=-1);for(let g=1;g<t.length;g++){let p=new dt().makeRotationZ(h*g/t.length);t[g].multiply(p)}return t}_applyPathModifiers(e,t,r){let i=e.length,{angle:n,twist:a,startScale:o,endScale:s}=this.inputs.parameters.extrusion,l=new dt,u=new dt;return e.forEach((c,d)=>{let h=d===0?0:d===i-1?1:(d-t)/(i-(r===0?0:1)-(t+(1-r)));l.makeRotationZ(Ot.lerp(n,n+a,h)*Ot.DEG2RAD);let f=Ot.lerp(o,s,h);u.makeScale(f,f,f),c.multiply(l).multiply(u)}),e}_computeShapePoints(e=12,t=di.ODD){let r=this.inputs.shapeData,i=r.extractShapePointsToFlatArray([],e),n=r.shapeHoles.map(u=>{let c=u.extractShapePointsToFlatArray([],e),d=[];for(let h=c.length-1;h>=1;h-=2){let f=c[h-1],g=c[h-0];d.push(f,g)}return d}),a;try{a=av({windingRule:t,elementType:wn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{a=QW}let o;try{o=av({windingRule:di.ODD,elementType:wn.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...n]})}catch{o=dxe}if(!a)throw new Error("error generating geometry");let s=a.elementCount;if(o){a.elementCount+=o.elementCount;for(let u=0;u<o.elements.length;u++){let c=o.elements[u],d=u%2===0?a.vertexCount:0;a.elements.push(c+d)}for(let u=0;u<o.vertexIndices.length;u++){let c=o.vertexIndices[u],d=a.vertexCount;a.vertexIndices.push(c+d)}for(let u=0;u<o.vertices.length;u++){let c=o.vertices[u];a.vertices.push(c)}}for(let u=0,c=a.vertexCount;u<c;u++){let d=u*2;a.vertices[d+0],a.vertices[d+1]}let l=[];for(let u=a.elementCount-1;u>=0;u--){let c=u>=s,d=u*2,h=a.elements[d+0],f=a.elements[d+1],g=h+f,p={start:h,count:f,normals:[],isHole:c,continuous:[],verticesStart:0,verticesCount:0};l.push(p);let m=h,y=g-1,b=h+1,w=r.roundedCurves.length;do{let x=m-h;a.vertices[y*2+0],a.vertices[y*2+1];let S=a.vertices[m*2+0],C=a.vertices[m*2+1],T=a.vertices[b*2+0],M=a.vertices[b*2+1],A=S-T,P=C-M,O=Math.sqrt(A*A+P*P);A/=O,P/=O,p.normals[x*2+0]=-P,p.normals[x*2+1]=A;let j=a.vertexIndices[m];if(Array.isArray(j))p.continuous[x]=!1;else{let[D,I]=r.getCurveIndexFromVertexId(j-1,!0);if(I>0&&I<1)p.continuous[x]=!0;else{let q=I===1?D+1:D-1;q=(q+w)%w;let $=I===1?0:1,X=r.roundedCurves[D].getTangent(I),N=r.roundedCurves[q].getTangent($);p.continuous[x]=X.dot(N)>.95}}c&&(p.normals[x*2+0]*=-1,p.normals[x*2+1]*=-1),[y,m,b]=[m,b,b+1],b>=g&&(b-=f)}while(b!==h+1)}return{regions:[i,...n],infos:l,vertices:a.vertices}}_insertVertex(e,t,r,i,n){let a=t*2,o=t*3;e.positions[o+0]=r.x,e.positions[o+1]=r.y,e.positions[o+2]=r.z,e.normals[o+0]=i.x,e.normals[o+1]=i.y,e.normals[o+2]=i.z,e.uvs[a+0]=n.x,e.uvs[a+1]=n.y}_extrudeRegion(e,t,r,i,n,a,o){let s=new k,l=new k,u=new k,c=new k,d=new ze;r.forEach((f,g)=>{let p=i[g],m=e.verticesStart*r.length+e.verticesCount*g;for(let y=0;y<e.count;y++){let b=(e.start+y)*2;if(s.set(t[b+0],t[b+1],0),u.copy(s).applyMatrix4(f).add(p),e.continuous[y])c.set(e.normals[y*2+0],e.normals[y*2+1],0);else{let w=y===0?(e.start+e.count-1)*2:b-2;l.set(t[w+0],t[w+1],0),c.copy(s).sub(l),c.set(-c.y,c.x,0),e.isHole||c.negate()}if(c.applyMatrix4(f).normalize(),d.set(y===0?1:y/e.count,g/(r.length-1)),this._insertVertex(n,m,u,c,d),m++,!e.continuous[y]||y===0){if(y===0)c.set(e.normals[y*2+0],e.normals[y*2+1],0),d.set(0,g/(r.length-1));else{let w=y===e.count-1?e.start*2:b+2;l.set(t[w+0],t[w+1],0),c.copy(l).sub(s),c.set(-c.y,c.x,0),e.isHole||c.negate()}c.applyMatrix4(f).normalize(),this._insertVertex(n,m,u,c,d),m++}}});let h=r.length-1;for(let f=0;f<h;f++){let g=e.verticesStart*r.length+e.verticesCount*f,p=e.verticesStart*r.length+e.verticesCount*(f+1),m=0;for(let y=0;y<e.count;y++){(!e.continuous[y]||y===0)&&m++;let b=y===e.count-1?0:m+1,w=g+m,x=g+b,S=p+b,C=p+m;e.isHole?a.push(w,S,x,w,C,S):a.push(w,x,S,w,S,C),m++}}}_closeEnd(e,t,r,i,n,a,o){let s=e.vertexCount,l=new k(0,0,o?-1:1).applyMatrix4(n),u=new k,c=new ze;for(let h=0;h<s;h++){let f=2*h;u.set(e.vertices[f+0],e.vertices[f+1],0).applyMatrix4(n).add(a),this._insertVertex(i,t+h,u,l,c)}let d=e.elements;for(let h=0;h<e.elementCount;h++){let f=3*h,g=d[f+0]+t,p=d[f+(o?1:2)]+t,m=d[f+(o?2:1)]+t;r.push(g,p,m)}}applyMatrix4OnRange(e,t,r){let i=e.elements,n=new xn().getNormalMatrix(e).elements,a,o,s,l,u=this.attributes.position,c=this.attributes.normal;if(!u||!c)return;let d=u.array,h=c.array,f=u.itemSize;for(let g=t*f,p=r*f;g<p;g+=f){if(g===t)debugger;a=d[g+0],o=d[g+1],s=d[g+2],l=1/(i[3]*a+i[7]*o+i[11]*s+i[15]),d[g+0]=(i[0]*a+i[4]*o+i[8]*s+i[12])*l,d[g+1]=(i[1]*a+i[5]*o+i[9]*s+i[13])*l,d[g+2]=(i[2]*a+i[6]*o+i[10]*s+i[14])*l,a=h[g+0],o=h[g+1],s=h[g+2],h[g+0]=n[0]*a+n[3]*o+n[6]*s,h[g+1]=n[1]*a+n[4]*o+n[7]*s,h[g+2]=n[2]*a+n[5]*o+n[8]*s}u.needsUpdate=!0,c.needsUpdate=!0}reverseIndicesOnRange(e,t){let r=this.index;if(r){for(let i=e;i<t;i+=3){let n=r.getX(i),a=r.getX(i+1),o=r.getX(i+2);r.setXYZ(i,o,a,n)}r.needsUpdate=!0}}};function Mxe(){let e=new Wt;return e.setAttribute("position",new tr(new Float32Array([]),3)),e.setIndex(new tr(new Uint16Array([]),1)),e}var lht=Mxe().attributes,uht=12,cht=1,pk=class extends Wt{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,lht),this.userData={parameters:e,type:"TextGeometry"};let r=t.getFont(e.font);r!=null&&r.isLoaded?(this.font=r,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let r=t.getFont(e);r&&(this.font=r,await r.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:i,depth:n,extrudeBevelSize:a,extrudeBevelSegments:o,text:s,textTransform:l}=e,u=ba.getDisplayedValue(s),c=l===2?u.toUpperCase():l===3?u.toLowerCase():u,d=dht(e,t,c),{shapes:h,charWidths:f,charCoords:g}=t.generateShapes(d,e),p=(typeof r=="number"?r:1)*.5,m=(typeof i=="number"?i:1)*.5,y=h.map(x=>new Qi().fromShape(x,!0));this.vectorShapes=y;let b=y.map(x=>Eb.create({shape:x,parameters:{depth:n,extrudeBevelSegments:o,extrudeBevelSize:a,windingRule:n<=0?di.NONZERO:di.ODD,subdivisions:this.isLowResolution&&n>0?cht:uht}})),w=b.length?V0(b):Mxe();w.translate(-p,m,0),this.dispose(),this.wrappedText=d,this.charCoords=g,this.charWidths=f,this.deleteAttribute("extrudeNormal"),Object.entries(w.attributes).forEach(([x,S])=>{this.setAttribute(x,S)}),this.setIndex(w.index),this.computeBoundingSphere()}clone(){let e=Qs(new Wt,pk.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,r])=>{this.setAttribute(t,r)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:{textValue:e}})}get text(){return this.userData.parameters.text??""}};function dht(e,t,r){let i=[""],n="";for(let a of r)n+=a,a===" "||a===`
`?(i[i.length-1]+=n,n="",a===`
`&&i.push("")):t.getTextWidth(i[i.length-1]+n,e)>e.width&&(i[i.length-1].length&&i.push(""),t.getTextWidth(i[i.length-1]+n,e)>e.width&&(n.length===1?(i[i.length-1]+=n,n=""):(i[i.length-1]+=n.slice(0,-1),n=n[n.length-1],i.push(""))));return i[i.length-1]+=n,i}var Pxe,Txe=new Promise(e=>{Pxe=e}),Tee=!1,tO;function hht(){if(Tee)return;if(tO)return tO;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@1.9.82/build",r=tl(()=>import("./process-DLQUZ-E7.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/process.wasm`).then(s=>s.arrayBuffer())]),a=i.default,o=await a({wasmBinary:n});Pxe(o),Tee=!0}return tO=e(),tO}var fht=["font"];function jM(e,t,r,i){var u,c;let n,a,o;e.type==="PathGeometry"?(a=JSON.parse(JSON.stringify(e)),o=[[],["extrusion"]]):(a={...e},o=[[]]);for(let d of o){let h=a;for(let f of d)h=h[f];for(n in h){let f=h[n];RZ(f)&&!fht.includes(n)&&(h[n]=t.getVariable(f,[i.uuid,"geometry",...d,n]),RZ(h[n])&&(h[n]=1))}}let s={parameters:a,type:a.type};if(a.type==="PathGeometry")s.path=a.path;else if(a.type==="VectorGeometry"){let d=Qi.createFromState(a.shape,a.width,a.height);s.shape=d}else if(a.type==="NonParametricGeometry"){if(a.data.groups&&((u=a.data.groups)==null||u.forEach(d=>d.materialIndex=Math.max(d.materialIndex??0,0))),s.geometry=new M_e().parse(a),s.geometry.groups.length===0){let d=s.geometry;d.addGroup(0,Math.max(((c=d.getIndex())==null?void 0:c.count)??0,d.getAttribute("position").count),0)}}else if(a.type==="SubdivGeometry"){let d=new io(a,r);return d.data=e,d}else{if(a.type==="TextGeometry")return new pk(a,t);if(a.type==="InputGeometry")return new pk(a,t);if(a.type==="UIGeometry")return eG.create({parameters:{width:a.width,height:a.height,cornerRadius:a.cornerRadius,cornerType:a.cornerType}})}let l;try{l=Iee(s)}catch(d){console.error(d)}if(!l){let d=Qi.createFromState(jD.defaultData(),100,100);s.shape=d,l=Iee(s)}return l}var pht=new dt;function mk(e,t,r,i){let n=e.position.array,a=e.normal.array,o=pht.makeScale(t,r,i).invert().elements,s,l,u;for(var c=0,d=n.length;c<d;c+=3)n[c]*=t,n[c+1]*=r,n[c+2]*=i,s=a[c],l=a[c+1],u=a[c+2],a[c]=o[0]*s+o[4]*l+o[8]*u,a[c+1]=o[1]*s+o[5]*l+o[9]*u,a[c+2]=o[2]*s+o[6]*l+o[10]*u;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var rO=new dn,E1=new k,rr;Txe.then(e=>{rr=e});var Aee=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),Oee=new Uint32Array([0,1,2,3]),Ree=new Uint8Array([4]),io=class extends Wt{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let r=this.data.scaleBaked,i=J0.div(t,r);this.subdividedGeometry&&mk(this.subdividedGeometry.attributes,...i),this.originalGeometry&&mk(this.originalGeometry.attributes,...i),this.data=e;let n=this.userData.parameters;this.userData.parameters={width:n.width*i[0],height:n.height*i[1],depth:n.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(E1.fromArray(i));let a=E1.set(n.width,n.height,n.depth).length();this.originalGeometry.boundingSphere.radius=a/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,r;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:r}=io.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Af(100,100,100),r=0}this.subdivPointer=r,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(io.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Lo,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;rO.setFromBufferAttribute(t),rO.getCenter(r),e.boundingSphere.radius=r.distanceTo(rO.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),rO.getSize(E1);let i={width:E1.x,height:E1.y,depth:E1.z};return this.userData.parameters=i,i}static build(e,t,r,i){let n,a,o,s=(e==null?void 0:e.phongAngle)??35;r===!1&&(s=-1),t&&(rr.free_bvh(t),rr.free_subdivision_surface(t));try{n=io.allocate(e,i)}catch(l){console.error(l,e),n=io.allocate({positionWASM:Aee,indexWASM:Oee,verticesPerFaceWASM:Ree},i)}if(rr.set_destination_refinement_level(n,0),a=io.buildLevel(n,!0,s),e.subdivisions>0)try{rr.set_destination_refinement_level(n,e.subdivisions),o=io.buildLevel(n,!1,s)}catch{try{rr.set_destination_refinement_level(n,e.subdivisions-1),o=io.buildLevel(n,!1,s)}catch{o=null}}else o=null;return{subdivPointer:n,originalGeometry:a,subdividedGeometry:o}}static primitiveToQuads(e,t,r){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let i=e.shape!==void 0||e.path!==void 0?t.geometry:jM(e,r,!1),n;e.type==="TorusGeometry"&&e.arc===Math.PI*2?n=i.getClosedTorusIndicesForBooleanOrSubdiv():n=i.getIndex();let a,o,s,l;({positions:a,triIndices:l}=mI(i.getAttribute("position"),n));let u;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let c=e.radialSegments*e.heightSegments*3*2,d=c+e.radialSegments*3;u=[c,d]}return{indices:o,verticesPerFace:s}=Axe(a,l,i,u),{positions:a,indices:o,verticesPerFace:s}}static allocate(e,t){var w;let r,i,n,a=[],o=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,i=e.indexWASM,n=e.verticesPerFaceWASM):(r=Aee,i=Oee,n=Ree);let s=r.length,l=i.length,u=n.length,c=r.length+a.length+o.length,d=i.length+n.length,h=c*Float32Array.BYTES_PER_ELEMENT+d*Uint32Array.BYTES_PER_ELEMENT,f=c*Float32Array.BYTES_PER_ELEMENT,g=rr._malloc(h),p=new Float32Array(rr.HEAPF32.buffer,g,c),m=new Uint32Array(rr.HEAPU32.buffer,g+f,d);p.set(r,0),p.set(a,r.length),p.set(o,r.length+a.length),m.set(i,0),m.set(n,i.length);let y;(w=e==null?void 0:e.scaleBaked)!=null&&w.some(x=>x!==1)&&(y=new dt().makeScale(...e.scaleBaked)),t&&(y?y.premultiply(t):y=t);let b=y?rr.alloc_subdivision_surface2(g,s,g+f,l,g+f+i.length*Uint32Array.BYTES_PER_ELEMENT,u,y.elements):rr.alloc_subdivision_surface(g,s,g+f,l,g+f+i.length*Uint32Array.BYTES_PER_ELEMENT,u);return rr._free(g),b}static buildLevel(e,t,r,i,n){let a=n?rr.get_mesh_data2(e,t?rr.Level.CONTROL:rr.Level.REFINED,r,n.elements):rr.get_mesh_data(e,t?rr.Level.CONTROL:rr.Level.REFINED,r),o=8,s=rr.HEAPU32.subarray(a>>2,(a>>2)+o),l=s.subarray(4,8),u=0,c=rr.HEAPU32[s[u]>>2],d=rr.HEAPF32.subarray(c>>2,(c>>2)+l[u]);u++;let h=rr.HEAPU32[s[u]>>2],f=rr.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let g=rr.HEAPU32[s[u]>>2],p=rr.HEAPU32.subarray(g>>2,(g>>2)+l[u]);u++;let m=rr.HEAPU32[s[u]>>2],y=rr.HEAPU32.subarray(m>>2,(m>>2)+l[u]);if(u++,i===void 0){let b=new Wt;if(b.setIndex(new p_(y,1)),b.setAttribute("position",new Pt(d,3)),b.setAttribute("normal",new Pt(f,3)),t){b.setAttribute("faceMap",new p_(p,1));let w=new Float32Array(f.length/3*4).fill(0);b.setAttribute("color",new tr(w,4))}return rr.free_mesh_data(a),b.userData.type="SubdivGeometry",b}i.getAttribute("position").copyArray(d),i.getAttribute("normal").copyArray(f),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,rr.free_mesh_data(a)}static freeSubdivPointer(e){rr.free_bvh(e),rr.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,r){let i=rr.get_wireframe_data_for_base_level(e),n=4,a=rr.HEAPU32.subarray(i>>2,(i>>2)+n),o=a.subarray(2,4),s=0,l=rr.HEAPU32[a[s]>>2],u=rr.HEAPF32.subarray(l>>2,(l>>2)+o[s]);s++;let c=rr.HEAPU32[a[s]>>2],d=rr.HEAPU32.subarray(c>>2,(c>>2)+o[s]);if(t===void 0){let h=new Wt;h.setAttribute("position",new Pt(u,3));let f=new Float32Array(u.length);for(let g=0,p=u.length;g<p;)f[g++]=r.r,f[g++]=r.g,f[g++]=r.b;return h.setAttribute("color",new tr(f,3)),h.setIndex(new p_(d,1)),rr.free_wireframe_data_for_base_level(i),h}t.getAttribute("position").copyArray(u),t.attributes.position.needsUpdate=!0,rr.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,r){let i=t===0;i||rr.set_destination_refinement_level(e,t);let n=r?rr.get_topological_data2(e,i?rr.Level.CONTROL:rr.Level.REFINED,r.elements):rr.get_topological_data(e,i?rr.Level.CONTROL:rr.Level.REFINED),a=6,o=rr.HEAPU32.subarray(n>>2,(n>>2)+a),s=o.subarray(3,6),l=0,u=rr.HEAPU32[o[l]>>2],c=new Float32Array(rr.HEAPF32.subarray(u>>2,(u>>2)+s[l]));l++;let d=rr.HEAPU32[o[l]>>2],h=new Uint32Array(rr.HEAPU32.subarray(d>>2,(d>>2)+s[l]));l++;let f=rr.HEAPU32[o[l]>>2],g=new Uint8Array(rr.HEAPU32.subarray(f>>2,(f>>2)+s[l]));return rr.free_topological_data(n),{positions:c,indices:h,verticesPerFace:g}}},Dee=["getX","getY","getZ"];function mI(e,t){let r={},i=t?t.count:e.count,n=0,a=[],o=[],s=1e4;for(let u=0;u<i;u++){let c=t?t.getX(u):u,d="";for(let h=0;h<3;h++)d+=`${~~(e[Dee[h]](c)*s)},`;if(d in r)a.push(r[d]);else{for(let h=0;h<3;h++)o.push(e[Dee[h]](c));r[d]=n,a.push(n),n++}}let l=[];for(let u=0;u<a.length;u+=3)a[u]===a[u+1]||a[u]===a[u+2]||a[u+1]===a[u+2]||l.push(a[u],a[u+1],a[u+2]);return{positions:o,triIndices:l}}var iO=new k,_B=new k,wB=new k,xB=new k;function Axe(e,t,r,i){let n=[],a=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let l=r.userData.shape.extractShapePointsToFlatArray([]),u=r.userData.parameters.spikes;if(r.userData.type==="EllipseGeometry"&&u<=24&&u%4===0&&r.userData.parameters.angle>=360){let h=l.length/2/u;l=l.filter((f,g)=>Math.floor(g/2)%h===0)}let c=0;for(let h=0;h<l.length;h+=2)c+=(l[h]-l[(h===0?l.length:h)-2])*(l[h+1]+l[(h===0?l.length:h)-1]);e.length=0;let d=0;if(c<0)for(let h=0;h<l.length;h+=2)e.push(l[h],l[h+1],0),n.push(d++);else for(let h=l.length-2;h>=0;h-=2)e.push(l[h],l[h+1],0),n.push(d++);return a.push(d),{indices:n,verticesPerFace:a}}let o=new Float32Array([r.userData.parameters.depth])[0],s=0;for(;s<t.length;){if(r.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[s]*3+2]===o||e[t[s]*3+2]===0)&&l++,(e[t[s+1]*3+2]===o||e[t[s+1]*3+2]===0)&&l++,(e[t[s+2]*3+2]===o||e[t[s+2]*3+2]===0)&&l++,l===3)break}if(t[s+1]===t[s+3]&&t[s+2]===t[s+5]||t[s+0]===t[s+3]&&t[s+2]===t[s+4]){iO.set(e[t[s]*3],e[t[s]*3+1],e[t[s]*3+2]),_B.set(e[t[s+1]*3],e[t[s+1]*3+1],e[t[s+1]*3+2]),wB.set(e[t[s+4]*3],e[t[s+4]*3+1],e[t[s+4]*3+2]),xB.set(e[t[s+5]*3],e[t[s+5]*3+1],e[t[s+5]*3+2]),_B.sub(iO).normalize(),wB.sub(iO).normalize(),xB.sub(iO).normalize();let l=_B.cross(wB).dot(xB);Math.abs(l)>.005||i&&i.some((u,c)=>c%2===1?!1:s>=i[c]&&s<i[c+1])?(n.push(t[s],t[s+1],t[s+2]),a.push(3),s+=3):(n.push(t[s],t[s+1],t[s+4],t[s+5]),a.push(4),s+=6)}else n.push(t[s],t[s+1],t[s+2]),a.push(3),s+=3}if(r.useNgonForTopBottomFaceDuringBake){let l=[],u=[],c=0;for(let d=0,h=0;d<e.length;d+=3,h++)e[d+2]===0&&(l.push(h),c++),e[d+2]===o&&u.push(h);if(r.userData.parameters.extrudeBevelSize===0){let d=u[0];u[0]=u[1],u[1]=d}l.reverse(),n.push(...l,...u),a.push(c,c)}return{indices:n,verticesPerFace:a}}var bm={};a$e(bm,{calcBoolean:()=>bht,calcBooleanTopological:()=>yht,freeMeshSet:()=>Sht,getMeshSet:()=>_ht,hasOpenEdges:()=>wht,transformMeshSet:()=>xht});var Oxe,mht=new Promise(e=>{Oxe=e}),nO;function ght(){if(nO)return nO;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@1.9.82/build",r=tl(()=>import("./boolean-CynEgfvK.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/boolean.wasm`).then(s=>s.arrayBuffer())]),a=i.default,o=await a({wasmBinary:n});Oxe(o)}return nO=e(),nO}var Ur,w_;mht.then(e=>Ur=e);function vht(e,t,r){let i,n;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?n=e.getClosedTorusIndicesForBooleanOrSubdiv():n=e.getIndex();let{positions:a,triIndices:o}=mI(e.getAttribute("position"),n),s;if(t&&r){let{indices:l,verticesPerFace:u}=Axe(a,o,e);s=u.length,i=[];for(let c=0,d=0;c<s;c++){i.push(u[c]);for(let h=0;h<u[c];h++)i.push(l[d++])}}else{let l=o.length;i=Array(l+l/3),s=0;for(let u=0,c=0;c<i.length;)i[c++]=3,s++,i[c++]=o[u++],i[c++]=o[u++],i[c++]=o[u++]}return{positions:a,faceIndices:i,nFaces:s}}function Rxe(e){let t=e.length,r=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?r:i,a=Ur._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(Ur.HEAPU32.buffer,a,t):new Float32Array(Ur.HEAPF32.buffer,a,t)).set(e,0),a}function Dxe(e){switch(e){case 0:return Ur.OP.UNION;case 1:return Ur.OP.INTERSECTION;case 2:return Ur.OP.A_MINUS_B;default:throw new Error("Unknown boolean operation "+e)}}function yht(e,t){w_===void 0&&(w_=Ur.init_csg());let r=Rxe(e),i=Ur.csg_calc_topological(w_,r,e.length,Dxe(t));Ur._free(r);let n=6,a=Ur.HEAPU32.subarray(i>>2,(i>>2)+n),o=a.subarray(3,6),s=0,l=Ur.HEAPU32[a[s]>>2],u=new Float32Array(Ur.HEAPF32.subarray(l>>2,(l>>2)+o[s]));s++;let c=Ur.HEAPU32[a[s]>>2],d=new Uint32Array(Ur.HEAPU32.subarray(c>>2,(c>>2)+o[s]));s++;let h=Ur.HEAPU32[a[s]>>2],f=new Uint8Array(Ur.HEAPU32.subarray(h>>2,(h>>2)+o[s]));return Ur.free_mesh_data(i),{positions:u,indices:d,verticesPerFace:f}}function bht(e,t,r,i){w_===void 0&&(w_=Ur.init_csg());let n=Rxe(e),a=Ur.csg_calc(w_,n,e.length,i,Dxe(t));Ur._free(n);let o=5,s=Ur.HEAPU32.subarray(a>>2,(a>>2)+o),l=s.subarray(2,5),u=0,c=Ur.HEAPU32[s[u]>>2],d=Ur.HEAPF32.subarray(c>>2,(c>>2)+l[u]);u++;let h=Ur.HEAPU32[s[u]>>2],f=Ur.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let g=l[u];r.setAttribute("position",new Pt(d,3)),r.setAttribute("normal",new Pt(f,3));let p=Ur.HEAPF32.subarray((a>>2)+5,(a>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new Lo),r.boundingSphere.center.set(p[0],p[1],p[2]),r.boundingSphere.radius=(p[3]**2+p[4]**2+p[5]**2)**.5,r.userData.parameters={width:p[3]*2,height:p[4]*2,depth:p[5]*2},Ur.free_mesh_data(a),g}function _ht(e,t,r){if(Ur===void 0)return-1;let i,n,a;if(t&&e.userData.positions!==void 0){let m=e.userData;a=m.verticesPerFace.length,i=m.positions,n=Array(m.verticesPerFace.reduce((y,b)=>y+b,0)+a);for(let y=0,b=0,w=0;y<m.verticesPerFace.length;y++){n[w++]=m.verticesPerFace[y];for(let x=0;x<m.verticesPerFace[y];x++)n[w++]=m.indices[b++]}}else({positions:i,faceIndices:n,nFaces:a}=vht(e,t,r));let o=i.length,s=n.length,l=i.length,u=n.length,c=l*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,d=l*Float32Array.BYTES_PER_ELEMENT,h=Ur._malloc(c),f=new Float32Array(Ur.HEAPF32.buffer,h,l),g=new Uint32Array(Ur.HEAPU32.buffer,h+d,u);f.set(i,0),g.set(n,0);let p=Ur.get_csg_mesh(h,o,h+d,s,a);return Ur._free(h),p}function wht(e){return Ur.has_open_edges(e)}function xht(e,t){Ur.transform_csg_mesh(e,t.elements)}function Sht(e){Ur.free_csg_mesh(e)}var Cht={ConeGeometry:Mct,CubeGeometry:Pct,CylinderGeometry:ixe,DodecahedronGeometry:Act,EllipseGeometry:ZW,HelixGeometry:ddt,IcosahedronGeometry:hdt,LatheGeometry:fdt,NonParametricGeometry:_dt,PolygonGeometry:wxe,PyramidGeometry:wdt,RectangleGeometry:eG,SphereGeometry:Cdt,PlaneGeometry:Edt,BackdropGeometry:Mdt,StarGeometry:xxe,TextFrameGeometry:Tdt,TorusGeometry:Adt,TorusKnotGeometry:Rdt,TriangleGeometry:Ddt,PathGeometry:oht,VectorGeometry:Eb},Iee=e=>Cht[e.type].create(e);function M1(e){return e!==null&&"booleanOp"in e}var Ixe=class extends $W(Ci){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new dt}updateVisible(e){super.updateVisible(e),this.visible=!M1(this.parent)&&this.visible,M1(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(bm.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),M1(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof Ixe&&(e.freeBooleanPointer(),M1(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let r=super.updateTransformState(e,t);return r&&M1(this.parent)&&this.invalidateDownstreamBooleanData(!0),r}onVariableUpdate(e=!1){super.onVariableUpdate(e),M1(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},aO=new dn;function tG(e,t=0,r=e.count,i,n){let a=1/0,o=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0;for(let d=t;d<r;d++){let h=e.getX(d),f=e.getY(d),g=e.getZ(d);h<a&&(a=h),f<o&&(o=f),g<s&&(s=g),h>l&&(l=h),f>u&&(u=f),g>c&&(c=g)}aO.min.set(a,o,s),aO.max.set(l,u,c),aO.getCenter(i),aO.getSize(n).multiplyScalar(.5)}var Eht=new Wt,Mht=new Hm,ho=class extends Ixe{constructor(t,r){super(Eht,Mht),this.super_Entity(t,r)}updateState(t,r){this.updateState_Entity(t,r)}updateEntityBoxSize(t,r){let i=this.geometry.getAttribute("position");i!==void 0?tG(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,t,r):super.updateEntityBoxSize(t,r)}},kg=class{constructor(e){if(this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},kg.uuidContext===null)throw new Error("plz startContext");kg.uuidContext===kg.globalContext?this.uuid="_gid"+kg.uuidContext.nodeContextUuid++:this.uuid="_uid"+kg.uuidContext.nodeContextUuid++,this.type=e,this.name=""}static startContext(e){this.uuidContext===null||this.uuidContext===kg.globalContext?this.uuidContext=e:console.error("Can't start context twice")}static endContext(e){this.uuidContext!==e&&console.error("Can't end context twice"),this.uuidContext=null}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r??{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r??{},e.addFlow(r.slot,r.cache,r.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,r){t=t??this.getType(e,t);let i=e.getNodeData(r??this);return e.analyzing&&this.appendDepsNode(e,i,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,i,n,a){return""}generate(e,t,r,i,n){return""}parse(e,t,r,i){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let i=e.getTypeLength(r);(i>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=i,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}},zn=kg;zn.globalContext={nodeContextUuid:0},zn.uuidContext=kg.globalContext;var jee=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Pht=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},Mo=new Pht,fi=class extends zn{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,i){if(t=t??this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=Ot.generateUUID()),r=e.getUUID(r??this.getUUID(),!n);let a=e.getNodeData(r),o=a.output||this.getType(e);if(e.analyzing)return(a.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,a,t),this.generate(e,t,r)):super.build(e,t,r);if(n)return a.name=a.name||super.build(e,t,r),a.name;if(!this.getLabel()&&(!this.getShared(e,o)||e.context.ignoreCache||a.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let s=this.getTemp(e,r);if(s)return e.format(s,o,t);{s=super.generate(e,t,r,a.output,i);let l=this.generate(e,o,r);return e.addNodeCode(s+" = "+l+";"),e.format(s,o,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,i,n){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r??this.uuid,e.getTempVar(r,i??this.getType(e),n,this.getLabel()).name}},No=class extends fi{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,r,i,n,a){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let o=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,i,n,a):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,n,a,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,n,a,this.getLabel())),e.format(o.fragment.name,i,t))}},fa=class extends No{constructor(t=0,r){super("v2"),this.nodeType="Vector2",this.value=t instanceof ze?t:new ze(t,r)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}generateReadonly(t,r,i,n,a,o){return t.format("vec2("+this.value.x+", "+this.value.y+")",n,r)}},Rs=class extends No{constructor(e=0,t,r){super("v3"),this.nodeType="Vector3",this.value=e instanceof k?e:new k(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,i,n,a){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",i,t)}},wa=class extends er{constructor(e,t,r,i){super(e,t,r),this.isColorA=!0,this.a=i}setRGBA(e,t,r,i){super.setRGB(e,t,r),this.a=i}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(e){return super.equals(e)&&this.a===e.a}setStyle(e,t="srgb"){let r;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(r=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let i,n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="rgba"?parseFloat(i[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.a=n==="hsla"?parseFloat(i[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},_m=class extends No{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof wa?e:new wa(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,i,n,a){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}},Tht=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,zee=/[a-z_0-9]+/gi,Mt=class extends fi{constructor(e,t,r,i,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,r,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,i,n){let a,o=0,s=this.src;if(this.includes)for(let u=0;u<this.includes.length;u++)e.include(this.includes[u],this);for(let u in this.extensions)e.extensions[u]=!0;let l=[];for(;a=zee.exec(this.src);)l.push(a);for(let u=0;u<l.length;u++){let c=l[u],d=c[0],h=this.isMethod?!this.getInputByName(d):!0,f=d;if(this.keywords[d]||this.useKeywords&&h&&Mo.containsKeyword(d)){let g=this.keywords[d];if(!g){let p=Mo.getKeywordData(d);p.cache&&(g=e.keywords[d]),g=g||Mo.getKeyword(d,e),p.cache&&(e.keywords[d]=g)}f=g.build(e)}d!==f&&s[c.index+o-1]!=="."&&(s=s.substring(0,c.index+o)+f+s.substring(c.index+d.length+o),o+=f.length-d.length),this.getIncludeByName(f)===void 0&&Mo.contains(f)&&e.include(Mo.get(f))}return t==="source"?s:this.isMethod?(this.isInterface||e.include(this,void 0,s),this.name):e.format("( "+s+" )",this.getType(e),t)}parse(e,t,r,i){if(this.src=e||"",this.includes=t??[],this.extensions=r??{},this.keywords=i??{},this.isMethod){let n=Tht.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let a=n[3].match(zee);if(a){let o=0;for(;o<a.length;){let s=a[o++],l;s==="in"||s==="out"||s==="inout"?l=a[o++]:(l=s,s="");let u=a[o++];this.inputs.push({name:u,type:l,qualifier:s})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},Aht=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,jxe=class extends fi{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||jxe.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,i,n){this.src=e||"";let a,o,s="",l=Aht.exec(e);this.useDefine=n??this.src.charAt(0)==="#",l&&l.length>1?(o=l[1],a=l[2],s=l[3]):(a=this.src,o="f"),this.name=a,this.type=o,this.value=s}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,i,n){return e.format(this.name,this.getType(e),t)}},ai=jxe;ai.PI="PI",ai.PI2="PI2",ai.RECIPROCAL_PI="RECIPROCAL_PI",ai.RECIPROCAL_PI2="RECIPROCAL_PI2",ai.LOG2="LOG2",ai.EPSILON="EPSILON";var Oht=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),Rht=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),zxe=class extends fi{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,i,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=Oht.exec(e);if(t){let r=t[2],i;for(;i=Rht.exec(r);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}},rG=class extends fi{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(i,this.getType(e),t)}};Mo.addKeyword("uv",function(){return new rG});Mo.addKeyword("uv2",function(){return new rG(1)});var V1=class extends fi{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??V1.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Tf:return["Linear"];case Er:return["sRGB"];default:return[]}}generate(e,t){var o;let r=this.input.build(e,"v4"),i=this.getType(e),n=V1.Nodes[this.method],a=e.include(n);if(a===V1.LINEAR_TO_LINEAR)return e.format(r,i,t);if(((o=n.inputs)==null?void 0:o.length)===2){let s=this.factor.build(e,"f");return e.format(a+"( "+r+", "+s+" )",i,t)}else return e.format(a+"( "+r+" )",i,t)}fromEncoding(e){let t=V1.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=V1.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},mp=V1;mp.Nodes={LinearToLinear:new Mt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Mt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Mt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},mp.LINEAR_TO_LINEAR="LinearToLinear",mp.SRGB_TO_LINEAR="sRGBToLinear",mp.LINEAR_TO_SRGB="LinearTosRGB";var Pi=class extends Mt{constructor(e="",t,r,i,n){super(e,n,i,r,t),this.nodeType="Expression"}},Pm=class extends No{constructor(e=new Vi,t,r,i){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new rG,this.bias=r,this.project=i!==void 0?i:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let r=this.getTexture(e,t),i=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let a,o;this.project?a="texture2DProj":a=n?"tex2DBias":"tex2D",n?o=a+"( "+r+", "+i+", "+n+" )":o=a+"( "+r+", "+i+" )";let s={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace??new mp(new Pi("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(o),o=this.colorSpace.build(e,l),e.removeContext(),e.format(o,l,t)}},Dt=class extends No{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,r,i,n,a){return e.format(this.value+(this.value%1?"":".0"),i,t)}},Bee=class extends fi{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,i,n){i=this.getType(e);let a=this.value,o=a.build(e,t)+"( ",s=[];if(a.inputs){for(let l=0;l<a.inputs.length;l++){let u=a.inputs[l],c=this.inputs[l]||this.inputs[u.name];s.push(c.build(e,e.getTypeByFormat(u.type)))}o+=s.join(", ")+" )"}return e.format(o,i,t)}},Bxe=class extends fi{constructor(e,t,r=Bxe.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let i=this.a.build(e,r),n=this.b.build(e,r);return e.format("( "+i+" "+this.op+" "+n+" )",r,t)}},xo=Bxe;xo.ADD="+",xo.SUB="-",xo.MUL="*",xo.DIV="/";var ui=class extends fi{constructor(e,t=ui.ABS,r,i){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:i=t,typeof r!="string"?this.c=r:i=r,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case ui.MIX:case ui.CLAMP:case ui.REFRACT:case ui.SMOOTHSTEP:case ui.FACEFORWARD:return 3;case ui.MIN:case ui.MAX:case ui.MOD:case ui.STEP:case ui.REFLECT:case ui.DISTANCE:case ui.DOT:case ui.CROSS:case ui.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>i?this.a.getType(e):r>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case ui.LENGTH:case ui.DISTANCE:case ui.DOT:return"f";case ui.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,i,n,a=this.a?e.getTypeLength(this.a.getType(e)):0,o=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.type=u,this.method){case ui.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case ui.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case ui.CROSS:r=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case ui.STEP:r=this.a.build(e,a===1?"f":l),i=this.b.build(e,l);break;case ui.MIN:case ui.MAX:case ui.MOD:r=this.a.build(e,l),i=this.b.build(e,o===1?"f":l);break;case ui.REFRACT:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,"f");break;case ui.MIX:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,s===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let c=[];c.push(r),i&&c.push(i),n&&c.push(n);let d=this.getNumInputs(e);if(c.length!==d)throw Error(`Arguments not match used in "${this.method}". Require ${d}, currently ${c.length}.`);return e.format(this.method+"( "+c.join(", ")+" )",u,t)}},xr=ui;xr.RAD="radians",xr.DEG="degrees",xr.EXP="exp",xr.EXP2="exp2",xr.LOG="log",xr.LOG2="log2",xr.SQRT="sqrt",xr.INV_SQRT="inversesqrt",xr.FLOOR="floor",xr.CEIL="ceil",xr.NORMALIZE="normalize",xr.FRACT="fract",xr.SATURATE="saturate",xr.SIN="sin",xr.COS="cos",xr.TAN="tan",xr.ASIN="asin",xr.ACOS="acos",xr.ARCTAN="atan",xr.ABS="abs",xr.SIGN="sign",xr.LENGTH="length",xr.NEGATE="negate",xr.INVERT="invert",xr.MIN="min",xr.MAX="max",xr.MOD="mod",xr.STEP="step",xr.REFLECT="reflect",xr.DISTANCE="distance",xr.DOT="dot",xr.CROSS="cross",xr.POW="pow",xr.MIX="mix",xr.CLAMP="clamp",xr.REFRACT="refract",xr.SMOOTHSTEP="smoothstep",xr.FACEFORWARD="faceforward";var nE=class extends fi{constructor(e,t,r){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,i){let n=new Bee(nE.Nodes.bilinearCubeUV,[t,r,i]);this.colorSpaceTL=this.colorSpaceTL??new mp(new Pi("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new mp(new Pi("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new mp(new Pi("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new mp(new Pi("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let a={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(a),this.colorSpaceTLExp=new Pi(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Pi(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Pi(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Pi(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let o=new Pi("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return o.keywords.cubeUV_TL=this.colorSpaceTLExp,o.keywords.cubeUV_TR=this.colorSpaceTRExp,o.keywords.cubeUV_BL=this.colorSpaceBLExp,o.keywords.cubeUV_BR=this.colorSpaceBRExp,o.keywords.cubeUV=n,o}generate(e,t){if(e.isShader("fragment")){let r=this.uv,i=this.bias||e.context.roughness,n=new Bee(nE.Nodes.roughnessToMip,[i]),a=new xr(n,nE.Nodes.m0,nE.Nodes.cubeUV_maxMipLevel,xr.CLAMP),o=new xr(a,xr.FLOOR),s=new xr(a,xr.FRACT),l=this.bilinearCubeUV(e,this.value,r,o),u=this.bilinearCubeUV(e,this.value,r,new xo(o,new Dt(1).setReadonly(!0),xo.ADD)),c=new xr(l,u,s,xr.MIX);return e.format(c.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},gk=nE;gk.Nodes=function(){let e=new zxe(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new ai("float cubeUV_maxMipLevel 8.0",!0),r=new ai("float cubeUV_minMipLevel 4.0",!0),i=new ai("float cubeUV_maxTileSize 256.0",!0),n=new ai("float cubeUV_minTileSize 16.0",!0),a=new Mt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);a.useKeywords=!1;let o=new Mt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);o.useKeywords=!1;let s=new Mt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,a,o,t,r,i,n]);s.useKeywords=!1;let l=new ai("float r0 1.0",!0),u=new ai("float v0 0.339",!0),c=new ai("float m0 -2.0",!0),d=new ai("float r1 0.8",!0),h=new ai("float v1 0.276",!0),f=new ai("float m1 -1.0",!0),g=new ai("float r4 0.4",!0),p=new ai("float v4 0.046",!0),m=new ai("float m4 2.0",!0),y=new ai("float r5 0.305",!0),b=new ai("float v5 0.016",!0),w=new ai("float m5 3.0",!0),x=new ai("float r6 0.21",!0),S=new ai("float v6 0.0038",!0),C=new ai("float m6 4.0",!0),T=[l,u,c,d,h,f,g,p,m,y,b,w,x,S,C],M=new Mt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,T);return{bilinearCubeUV:s,roughnessToMip:M,m0:c,cubeUV_maxMipLevel:t}}();var k1=class extends fi{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??k1.VIEW}getShared(){return this.scope===k1.WORLD}build(e,t,r,i){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,r,i):super.build(e,t,r)}generate(e,t,r,i,n){let a;switch(this.scope){case k1.VIEW:e.isShader("vertex")?a="transformedNormal":a="geometryNormal";break;case k1.LOCAL:e.isShader("vertex")?a="objectNormal":(e.requires.normal=!0,a="vObjectNormal");break;case k1.WORLD:e.isShader("vertex")?a="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,a="vWNormal");break}return e.format(a,this.getType(e),t)}},Po=k1;Po.LOCAL="local",Po.WORLD="world",Po.VIEW="view",Po.NORMAL="normal";Mo.addKeyword("viewNormal",function(){return new Po(Po.VIEW)});Mo.addKeyword("localNormal",function(){return new Po(Po.NORMAL)});Mo.addKeyword("worldNormal",function(){return new Po(Po.WORLD)});var vm=class extends fi{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??vm.LOCAL}getType(){switch(this.scope){case vm.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case vm.LOCAL:case vm.WORLD:return!1}return!0}generate(e,t,r,i,n){let a;switch(this.scope){case vm.LOCAL:e.isShader("vertex")?a="transformed":(e.requires.position=!0,a="vPosition");break;case vm.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,a="vWPosition";break;case vm.VIEW:a=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case vm.PROJECTION:a=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(a,this.getType(),t)}},wf=vm;wf.LOCAL="local",wf.WORLD="world",wf.VIEW="view",wf.PROJECTION="projection";Mo.addKeyword("position",function(){return new wf});Mo.addKeyword("worldPosition",function(){return new wf(wf.WORLD)});Mo.addKeyword("viewPosition",function(){return new wf(wf.VIEW)});var rp=class extends fi{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??rp.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case rp.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case rp.VECTOR:{let n=new Po(Po.VIEW),a=e.context.roughness,o=n.build(e,"v3"),s=new wf(wf.VIEW).build(e,"v3"),l=a?a.build(e,"f"):void 0,u=`reflect( -normalize( ${s} ), ${o} )`;l&&(u=`normalize( mix( ${u}, ${o}, ${l} * ${l} ) )`);let c=`inverseTransformDirection( ${u}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${c};`),i="reflectVec"):i=c;break}case rp.CUBE:{let n=new rp(rp.VECTOR).build(e,"v3"),a="vec3( -"+n+".x, "+n+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${a};`),i="reflectCubeVec"):i=a;break}case rp.SPHERE:{let n="normalize( ( viewMatrix * vec4( "+new rp(rp.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${n};`),i="reflectSphereVec"):i=n;break}}return e.format(i,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},x_=rp;x_.CUBE="cube",x_.SPHERE="sphere",x_.VECTOR="vector";var Dht=class extends fi{constructor(e=new Pm,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new gk(this.value,t??new x_(x_.VECTOR),r),this.irradianceNode=new gk(this.value,new Po(Po.WORLD),new Dt(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},Iht=class extends No{constructor(e=new aW,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new x_,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),i=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let a;n?a="texCubeBias( "+r+", "+i+", "+n+" )":a="texCube( "+r+", "+i+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},s=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new mp(new Pi("",s)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,s),e.removeContext(),e.format(a,s,t)}},jht=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,zht=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,Bht=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,Lht=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,Fht=`
layout(location = 1) out vec4 gVelocity;
`,Nht=`
    // Discard fully transparent pixels 
    if (gl_FragColor.a <= 0.0) discard;

    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);
`,Lee=["x","y","z","w"],Uht=["float","vec2","vec3","vec4"],Vht={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},kht={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Lxe=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let i=this.getIncludes(t,r);if(!i)return"";let n="";i=i.sort(e);for(let a=0;a<i.length;a++)i[a].src&&(n+=i[a].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(jht),this.addFragmentParsCode(zht),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let i=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode(`
				#ifndef SHAPEBLEND 
					vObjectNormal = normal;
				#else
					vObjectNormal = objectNormal;
				#endif
			`)),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(Bht),this.addFragmentFinalCode(Lht)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,i="varying",n="V",a=""){let o=this.getVars(i),s=o[e];if(!s){let l=o.length;s={name:r||"node"+n+l+(a?"_"+a:""),type:t},o.push(s),o[e]=s}return s}getTempVar(e,t,r,i){return this.getVar(e,t,r,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let r="";for(let i=0,n=e.length;i<n;++i){let a=e[i],o=a.type,s=a.name,l=a.size,u=this.getFormatByType(o);if(u===void 0)throw new Error("Node pars "+u+" not found.");u.includes("[]")?r+=t+" "+u.substring(0,u.length-2)+" "+s+`[${l}];
`:r+=t+" "+u+" "+s+`;
`}return r}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof zn?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,i,n,a){if(t.includes("[]")){let o=this.inputs.arrayUniforms,s=o.list.length,l=new jee({type:t,size:r.size,name:i||"nodeUA"+s+(a?"_"+a:""),node:r,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}else{let o=this.inputs.uniforms,s=o.list.length,l=new jee({type:t,name:i||"nodeU"+s+(a?"_"+a:""),node:r,needsUpdate:n});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,i,n){return this.createUniform("vertex",e,t,r,i,n)}createFragmentUniform(e,t,r,i,n){return this.createUniform("fragment",e,t,r,i,n)}include(e,t,r){var a;let i;if(e=typeof e=="string"?Mo.get(e):e,this.context.include===!1)return e.name;e instanceof Mt?i=this.includes.functions:e instanceof ai?i=this.includes.consts:e instanceof zxe&&(i=this.includes.structs);let n=i[this.shader]=i[this.shader]||[];if(e){let o=n[e.name];if(o||(o=n[e.name]={node:e,deps:[]},n.push(o),o.src=e.build(this,"source")),e instanceof Mt&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(a=e.includes)==null?void 0:a.length)){let s=0;do this.include(e.includes[s++],t);while(s<e.includes.length)}return r&&(o.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return Uht[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case lb:case ub:return new Iht(r);case fP:return new Dht(new Pm(r));default:return new Pm(r)}else{if(r.isVector2)return new fa(r);if(r.isVector3)return new Rs(r);if(r.isVector4)return new _m(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return Vht[e]||e}getFormatByType(e){return kht[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return Lee[e]}getIndexByElement(e){return Lee.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Tf,t===Tf&&this.context.gamma&&(t=Er),t}},Ji=class extends No{constructor(e=0,t,r,i){super("c"),this.nodeType="Color",this.value=e instanceof wa?e:new wa(e||0,t,r,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,i,n,a){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let o=e.getNodeData(r),s=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return s?this.generateReadonly(e,t,r,i,n,a):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(i,this,n,a,this.getLabel())),e.format(o.vertex.name,i,t)):(o.fragment||(o.fragment=e.createFragmentUniform(i,this,n,a,this.getLabel())),e.format(o.fragment.name,i,t))}generateReadonly(e,t,r,i,n,a){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},vi=class extends No{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,r,i,n,a){return e.format(this.value.toString(),i,t)}},no=class extends No{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,r,i){return e.format(this.value?"true":"false",i,t)}},b0=class extends No{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},iG=class extends No{},qht=class extends iG{constructor(e){super("v3"),this.image=e,this._value=new k}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},vk=class extends iG{constructor(e,t,r=1008,i=1006){super("t"),this.image=e,this.wrap=t,this.minFilter=r,this.magFilter=i}get value(){return this.image.getTexture(this.wrap,this.minFilter,this.magFilter)}},Fxe=class extends No{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new xn}generateReadonly(e,t,r,i,n,a){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},jp=class extends No{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new dt}generateReadonly(e,t,r,i,n,a){return e.format("mat4("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function Fee(e,t,r,i=0){e.setUvTransform(r[0],r[1],t[0],t[1],0,0,0).premultiply(new xn().makeRotation(i*Ot.DEG2RAD))}var Wht=class extends Fxe{constructor(e,t,r=0){super(new xn),this.repeat=e,this.offset=t,this.rotation=r,Fee(this.value,e,t,r)}updateMatrix(){Fee(this.value,this.repeat,this.offset,this.rotation)}},_0=class extends No{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof hr?new Array(e).fill(t):new Array(e).fill(new hr(0))}},Nee=class extends fi{constructor(e,t,r,i){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=i}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Nxe=class extends fi{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(Nxe.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.color.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},yk=Nxe;yk.Nodes=function(){return{customColor:new Mt(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var Uxe=class extends fi{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(Uxe.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Vxe=Uxe;Vxe.Nodes=function(){return{customNormal:new Mt(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var aE=class extends fi{constructor(e,t,r,i,n,a,o,s,l,u,c,d){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=r,this.projection=i,this.axis=n,this.side=a,this.size=o,this.blending=s,this.mat=l,this.isMask=d,this.alpha=u,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=e.include(aE.Nodes.cylindrical);break;case 2:i=e.include(aE.Nodes.spherical);break;case 1:let a=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],o=["zy","xz","xy"][this.axis.value],s=new Mt(`
		vec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${o})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${a}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);i=e.include(s);break;case 4:i=e.include(aE.Nodes.triplanar);break;default:i=e.include(aE.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let n=[];if(n.push("normal"),n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.blending.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.projection.value===4){let a=`${r}_writeUvs`,o=a+"0",s=a+"1",l=a+"2",u=`${r}_triplanarWeights`;e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(s,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(u,"vec3"),n.push(o),n.push(s),n.push(l),n.push(u)}else{let a=`${r}_writeUvs`;e.addFragmentVariable(a,"vec2"),n.push(a)}return e.format(i+"("+n.join(",")+")",this.getType(e),t)}},nG=aE;nG.Nodes=function(){let e=new Mt(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new Mt(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),r=new Mt(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),i=new Mt(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:r,triplanar:i}}();var oE=class extends fi{constructor(e,t,r,i,n,a,o,s,l,u,c,d){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=i,this.isVector=n,this.isWorldSpace=a,this.origin=o,this.direction=s,this.colors=l,this.steps=u,this.isMask=d,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,i=new Mt(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[oE.Nodes.vectorLinearWorldSpaceDepth,oE.Nodes.vectorLinearObjectSpaceDepth,oE.Nodes.vectorSphericalObjectSpaceDepth,oE.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(i),a=[];return a.push(this.near.build(e,"f")),a.push(this.far.build(e,"f")),a.push(this.origin.build(e,"v3")),a.push(this.direction.build(e,"v3")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(n+"("+a.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},kxe=oE;kxe.Nodes=function(){let e=new Mt(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new Mt(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new Mt(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new Mt(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:i}}();var Ght=class extends fi{constructor(e,t,r,i,n,a,o,s){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=i,this.factor=n,this.isMask=s,this.alpha=a,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=new Mt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),i=e.include(r),n=[];return n.push(this.color.build(e,"c")),n.push(this.bias.build(e,"f")),n.push(this.scale.build(e,"f")),n.push(this.intensity.build(e,"f")),n.push(this.factor.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},qxe=class extends fi{constructor(e,t,r,i,n,a,o,s,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=i,this.offset=n,this.morph=a,this.angle=o,this.isMask=l,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(qxe.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Wxe=qxe;Wxe.Nodes=function(){return{gradient:new Mt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var Gxe=class extends fi{constructor(e,t,r,i,n){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=i,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`,this.rotation=n}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(Gxe.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.texture.generate(e,"t")),i.push("normal"),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),i.push(this.rotation.build(e,"f")),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Hxe=Gxe;Hxe.Nodes=function(){return{matcap:new Mt(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha, float rotation) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) );
					uv = mat2( cos(rotation), sin(rotation), -sin(rotation), cos(rotation) ) * uv;
					uv = uv * 0.495 + 0.5;
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var Co=function(){let e=new Mt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new Mt(`float simplexFast(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 mediump vec3 x = p - s + dot(s, vec3(G3));
			 mediump vec3 hs = s;
			 
			 mediump vec3 e = step(vec3(0.0), x - x.yzx);
			 mediump vec3 i1 = e*(1.0 - e.zxy);
			 mediump vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 mediump vec3 x1 = x - i1 + G3;
			 mediump vec3 x2 = x - i2 + 2.0*G3;
			 mediump vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 mediump vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(hs), x);
			 d.y = dot(random3(hs + i1), x1);
			 d.z = dot(random3(hs + i2), x2);
			 d.w = dot(random3(hs + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new ai("float F3 0.3333333"),t.keywords.G3=new ai("float G3 0.1666667");let r=new Mt(`float simplexPrecise(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);r.keywords.F3=new ai("float F3 0.3333333"),r.keywords.G3=new ai("float G3 0.1666667");let i=new Mt(`float simplexFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplexFast(m * rot1)
				 + 0.2666667 * simplexFast(2.0 * m * rot2)
				 + 0.1333333 * simplexFast(4.0 * m * rot3)
				 + 0.0666667 * simplexFast(8.0 * m);
		}`,[t]),n=new Mt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),a=new Mt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),o=new Mt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[n,a]),s=new Mt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),l=new Mt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[s]),u=new Mt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[l]),c=new Mt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[u]);c.keywords.NUM_OCTAVES=new ai("int NUM_OCTAVES 5");let d=new Mt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),h=new Mt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[n,a,d]),f=new Mt(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),g=new Mt(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),p=new Mt(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),m=new Mt(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),y=new Mt(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),b=new Mt(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),w=new Mt(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			// Second pass for edge distance  
			// skip for styles don't need
			if (style != 0 &&  style != 5 && style != 7)
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[f,g,p,m,y,b]);return{simplexFast:t,simplexPrecise:r,simplexFractal:i,simplexAshima:o,fbm:c,perlin:h,voronoi:w}}(),$xe=class extends fi{constructor(e,t,r,i,n,a,o,s,l,u,c,d,h,f,g,p,m,y,b){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=i,this.fB=n,this.distortion=a,this.colorA=o,this.colorB=s,this.colorC=l,this.colorD=u,this.noiseType=d,this.voronoiStyle=f,this.highCut=g,this.lowCut=p,this.smoothness=m,this.seed=y,this.quality=b,this.isMask=h,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,i,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=["simplexFast","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseType.value],o=a=="voronoi"?`
		float v = ${a}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${a}(st),
					   ${a}(st + vec3(1.0)),
					   ${a}(st + vec3(1.0)));
		vec3 r = vec3(${a}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${a}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${a}(st * q));
		float f = ${a}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,s=new Mt(`vec3 ${a}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${o}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[Co.simplexFast,Co.simplexFractal,Co.simplexAshima,Co.fbm,Co.perlin,Co.voronoi]),l=e.include(s),u=[];return u.push(this.scale.build(e,"f")),u.push(this.size.build(e,"v3")),u.push(this.move.build(e,"f")),u.push(this.fA.build(e,"v2")),u.push(this.fB.build(e,"v2")),u.push(this.distortion.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.colorC.build(e,"v4")),u.push(this.colorD.build(e,"v4")),u.push(this.voronoiStyle.build(e,"i")),u.push(this.highCut.build(e,"f")),u.push(this.lowCut.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.seed.build(e,"f")),u.push(this.quality.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}};$xe.numOctaves=5;var Xxe=class extends fi{constructor(e,t,r,i,n,a,o,s,l,u,c,d,h,f,g,p){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=r,this.contourWidth=i,this.contourThreshold=n,this.outlineThreshold=a,this.contourFrequency=o,this.outlineSmoothing=s,this.contourDirection=l,this.positionalLines=u,this.compensation=c,this.resolution=d,this.normalMap=h,this.depthMap=f,this.pixelRatio=g,this.alpha=p,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${r}_offset`),this.firstTime){let i=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),a=this.compensation.build(e,"b"),o=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(a,"uniform bool"),e.addVertexParsVariable(o,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${r}_offset = vec2(0.0);
                if (${a}) {
                    vec4 ${r}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${r}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${r}_offset = normalize(${r}_clipNormal.xy) / ${n} * (${i} / 2.0) * ${r}_clipPosition.w * 2.0 * ${o};
                    ${r}_clipPosition.xy += ${r}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${r}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(Xxe.Nodes.outline),n=[];return n.push(this.outlineColor.build(e,"c")),n.push(this.contourColor.build(e,"c")),n.push(this.outlineWidth.build(e,"f")),n.push(this.contourWidth.build(e,"f")),n.push(this.contourThreshold.build(e,"f")),n.push(this.outlineThreshold.build(e,"f")),n.push(this.contourFrequency.build(e,"f")),n.push(this.outlineSmoothing.build(e,"f")),n.push(this.contourDirection.build(e,"v3")),n.push(this.positionalLines.build(e,"b")),n.push(this.resolution.build(e,"v2")),n.push(this.normalMap.getTexture(e,"t")),n.push(this.depthMap.getTexture(e,"t")),n.push(this.pixelRatio.build(e,"f")),n.push(this.compensation.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},Yxe=Xxe;Yxe.Nodes=function(){let e=new Mt(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Mt(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var ym=class extends fi{constructor(e,t,r,i,n,a,o,s,l,u,c,d,h,f,g,p,m,y){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=r,this.blending=i,this.offset=n,this.colorA=a,this.colorB=o,this.frequency=s,this.size=l,this.variation=u,this.smoothness=c,this.zigzag=d,this.rotation=h,this.vertical=f,this.horizontal=g,this.sides=p,this.isMask=y,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let r;switch(this.style.value){case 0:r="circle";break;case 1:r="ring";break;case 2:r="polygon";break;case 3:r="xcross";break;case 4:r="diamond";break;case 5:r="checkerboard";break;case 6:r="line";break;case 7:r="wave";break;default:r="circle";break}let i=`g${this.uuid.toString().replace(/-/g,"")}`,n=new Mt(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),a=new Mt(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),o="";if(this.projection.value===4){let c=this.style.value===2?`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d=this.style.value===2?`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h=this.style.value===2?`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;o=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${c};
				float d1 = ${d};
				float d2 = ${h};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let c=this.style.value===2?`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d="";this.axis.value===0?d=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?d=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,d=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let h="";switch(this.projection.value){case 0:h="custom_uv = vUv.st;";break;case 1:break;case 2:h=`
							vec3 p = position;
							${d}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}o=`
				vec2 custom_uv;
				${h}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${c};
				`}let s=new Mt(`vec3 ${i}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${o}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[a,n,ym.DrawFunctions.circle,ym.DrawFunctions.ring,ym.DrawFunctions.polygon,ym.DrawFunctions.cross,ym.DrawFunctions.diamond,ym.DrawFunctions.checkerboard,ym.DrawFunctions.line,ym.DrawFunctions.wave]),l=e.include(s),u=[];return u.push("normal"),u.push(this.blending.build(e,"f")),u.push(this.style.build(e,"i")),u.push(this.offset.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.frequency.build(e,"v2")),u.push(this.size.build(e,"f")),u.push(this.variation.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.zigzag.build(e,"f")),u.push(this.rotation.build(e,"f")),u.push(this.vertical.build(e,"v2")),u.push(this.horizontal.build(e,"v2")),u.push(this.sides.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},Kxe=ym;Kxe.DrawFunctions=function(){let e=new Mt(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new Mt(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),r=new Mt(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),i=new Mt(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),n=new Mt(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),a=new Mt(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),o=new Mt(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),s=new Mt(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new Mt(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),u=new Mt(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:r,ring:i,polygon:n,cross:a,diamond:o,checkerboard:s,line:l,wave:u}}();var Qxe=class extends fi{constructor(e,t,r,i,n,a,o,s){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=i,this.noiseScale=n,this.offset=a,this.isMask=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(Qxe.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},Jxe=Qxe;Jxe.Nodes=function(){let e=new Mt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
				float f = 0.0;
				
				if (noiseStrength != 0.0) {
					vec3 st = position / noiseScale;
					float noise = simplexFast(1.6 * st + vec3(1.8, 1.5, 1.9) * simplexFast(st) + vec3(1.7, 9.2, 1.0));
					f = noise * noiseStrength;
				}

				vec3 waves = wavelengths * vec3(1.0, 0.8, 0.6) + 1.0;
				float angle = dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal));

				mediump vec3 color = cos((((filmThickness + f) / waves) * angle) + movement);
				return .5 + .5 * color;
			 }`,[Co.simplexFast]);return{rainbow:new Mt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				mediump vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
			 }`,[e])}}();var Zxe=class extends fi{constructor(e,t,r,i,n,a,o,s,l,u){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=r,this.source=i,this.isWorldSpace=n,this.noiseStrength=a,this.noiseScale=o,this.shadowColor=s,this.offset=l,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let r=e.include(Zxe.Nodes.toon),i=[];return i.push(this.positioning.build(e,"i")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.source.build(e,"v3")),i.push(this.isWorldSpace.build(e,"b")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.shadowColor.build(e,"v4")),i.push(this.offset.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},eSe=Zxe;eSe.Nodes=function(){let e=new Mt(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new Mt(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new Mt(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),i=new Mt(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new Mt(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new Mt(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplexFast(st),
					// 	simplexFast(st + vec3(111.1, 143.89, 217.19)),
					// 	simplexFast(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Co.simplexFast,e,r,n])}}();var Hht=function(){return{textureBicubic:new Mt(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function $ht(e,t){return e>=t?new ze(t/e,1):new ze(1,e/t)}var tSe=class extends fi{constructor(e,t,r,i,n,a,o,s){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=i,this.transmissionSamplerMap=n,this.transmissionDepthMap=a,this.aspectRatio=o,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,ir.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(tSe.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},rSe=tSe;rSe.Nodes=function(){let e=new Mt(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new Mt(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new Mt(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),i=new Mt(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[Hht.textureBicubic,r,e]),n=new Mt(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[i,t]);return{transmission:new Mt(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[n])}}();var bk=(e=>(e.NOISE="noise",e.MAP="map",e))(bk||{}),iSe=class extends fi{constructor(e,t,r,i,n,a,o,s,l,u,c){super("v3"),this.displacementTypeIndex=new vi(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(bk)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Fxe(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=u,this.noiseFunctionIndex=c,this.voronoiStyle=i,this.smoothness=n,this.seed=a,this.highCut=o,this.lowCut=s,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(bk)[this.displacementTypeIndex.value]){case"map":{r=e.include(iSe.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break}case"noise":{let n=["simplexPrecise","simplexFractal","simplexAshima","fbm","perlin","voronoi"][this.noiseFunctionIndex.value],a=new Mt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),o=n=="voronoi"?`
					float v = ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,s=new Mt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${o}
						}`,[Co.simplexPrecise,Co.simplexFractal,Co.simplexAshima,Co.fbm,Co.perlin,Co.voronoi]),l=new Mt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[s,a]);r=e.include(l),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f")),i.push(this.voronoiStyle.build(e,"i")),i.push(this.smoothness.build(e,"f")),i.push(this.seed.build(e,"f")),i.push(this.highCut.build(e,"f")),i.push(this.lowCut.build(e,"f")),i.push(this.quality.build(e,"i"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},nSe=iSe;nSe.Nodes=function(){let e=new Mt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new Mt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Mt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var ir={normalRenderTarget:new Pm,normalRenderTargetDepth:new Pm,transmissionRenderTarget:new Pm,aspectRatio:new fa,transmissionSize:new fa(2048,2048),transmissionRenderTargetDepth:new Pm,aoRenderTarget:new Pm,aoEnabled:new no,pixelRatioNode:new Dt(1),resolution:new fa,penumbraSize:new b0(5,.5),frameIndex:new vi(0),transmissionLod:new vi(2)};for(let e of Object.values(ir))e.isRenderGlobal=!0;var aSe={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.9.82/build/ui.wasm"},aG=class extends zn{constructor(){super("basic"),this.nodeType="Basic",this.color=new Ji(us),this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0),this.previousModelViewMatrix=new jp,this.previouseProjectionMatrix=new jp}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ir.frameIndex}),e.mergeUniform({resolution:ir.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ww.merge([Et.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Ji(us)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,a=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=i!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let o=["#include <normal_fragment_begin>",r.code];i&&o.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),a?o.push(a.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${a.result}, 1.0, SPE_BLENDING_NORMAL);`):o.push(`vec3 finalColor = ${r.result};`);let s="1.0";this.mask&&(this.mask.analyze(e),s=`luminance(${this.mask.flow(e,"v3").result})`),i?o.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} * ${s} );`):o.push("gl_FragColor = vec4("+r.result+", 1.0 );"),n&&o.push(`gl_FragColor.a *= ${n.result};`),o.push("#include <fog_fragment>","#include <dithering_fragment>"),t=o.join(`
`)}return t}},Xht=class extends zn{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Ji(us),this.emissive=new Ji(0),this.emissiveIntensity=new Dt(1),this.previousModelViewMatrix=new jp,this.previouseProjectionMatrix=new jp,this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0),this.occlusion=new no(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ir.frameIndex}),e.mergeUniform({resolution:ir.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ww.merge([Et.fog,Et.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),i.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:ir.penumbraSize}),e.mergeUniform({frameIndex:ir.frameIndex}),e.mergeUniform({aoMap:ir.aoRenderTarget}),e.mergeUniform({aoEnabled:ir.aoEnabled}),this.color===void 0&&(this.color=new Ji(us)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),a=this.occlusion.flow(e,"b",{slot:"occlusion"}),o=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];d.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),u&&d.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),d.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&d.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+n.result+";"),d.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${h}, ${s.result} );

					outgoingLight *= ao;
				}
				`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&d.push(`gl_FragColor.a *= ${c.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},iw=function(){let e=new Mt(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new Mt(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),Yht=class extends zn{constructor(){super("phong"),this.nodeType="Phong",this.color=new Ji(us),this.specular=new Ji(1118481),this.shininess=new Dt(30),this.previousModelViewMatrix=new jp,this.previouseProjectionMatrix=new jp,this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0),this.occlusion=new no(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ir.frameIndex}),e.mergeUniform({resolution:ir.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ww.merge([Et.fog,Et.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:ir.penumbraSize}),e.mergeUniform({frameIndex:ir.frameIndex}),e.mergeUniform({aoMap:ir.aoRenderTarget}),e.mergeUniform({aoEnabled:ir.aoEnabled}),this.color===void 0&&(this.color=new Ji(us)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),a=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(iw.dHdxy),e.include(iw.perturbNormalArb);let f=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),p=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",m="";this.bumpMap.projection.value===4?m=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${f.result}, uv0, ${p});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${f.result}, uv1, ${p});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${f.result}, uv2, ${p});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:m=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${f.result}, bumpMapCachedUv, ${p});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,d.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};
					${m}
					`)}d.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",n.code,"	vec3 specular = "+n.result+";",a.code,"	float shininess = max( 0.0001, "+a.result+" );","	float specularStrength = 1.0;"),u&&d.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),d.push("material.diffuseColor = diffuseColor;"),d.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${h}, ${s.result} );
					
					outgoingLight *= ao;
				}
				`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result});`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&d.push(`gl_FragColor.a *= ${c.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},Kht=class extends zn{constructor(){super("standard"),this.nodeType="Standard",this.color=new Ji(us),this.roughness=new Dt(.3),this.metalness=new Dt(0),this.reflectivity=new Dt(.5),this.previousModelViewMatrix=new jp,this.previouseProjectionMatrix=new jp,this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0),this.occlusion=new no(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ir.frameIndex}),e.mergeUniform({resolution:ir.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ww.merge([Et.fog,Et.lights])),Et.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:ir.penumbraSize}),e.mergeUniform({frameIndex:ir.frameIndex}),e.mergeUniform({aoMap:ir.aoRenderTarget}),e.mergeUniform({aoEnabled:ir.aoEnabled});let r={gamma:!0};this.color===void 0&&(this.color=new Ji(us)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let n=this.color.flow(e,"c",{slot:"color",context:r}),a=this.roughness.flow(e,"f"),o=this.metalness.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),u=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let f=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(iw.dHdxy),e.include(iw.perturbNormalArb);let p=this.bumpMap.texture.flow(e,"t"),m=this.bumpMap.flow(e,"v3"),y=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",b="";this.bumpMap.projection.value===4?b=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${p.result}, uv0, ${y});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${p.result}, uv1, ${y});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${p.result}, uv2, ${y});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:b=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${p.result}, bumpMapCachedUv, ${y});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};
					${b}
					`)}if(f.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",o.code,"	float metalnessFactor = "+o.result+";"),this.roughnessMap){let p=this.roughnessMap.texture.flow(e,"t"),m=this.roughnessMap.flow(e,"v3"),y="";this.roughnessMap.projection.value===4?y=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${p.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${p.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${p.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${a.result};
					`:y=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${p.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${a.result};
					`,f.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};

					const float roughnessScale = 1.0;

					${y}
				`)}else f.push(a.code,"	float roughnessFactor = "+a.result+";");c&&f.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),f.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),f.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?f.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):f.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),f.push("#include <lights_fragment_begin>"),f.push("#include <lights_fragment_end>"),f.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let g="1.0";this.mask&&(this.mask.analyze(e),g=`luminance(${this.mask.flow(e,"v3").result})`),f.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${g} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${g}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),u&&f.push(u.code,`outgoingLight = spe_blend(outgoingLight, ${u.result}, 1.0, SPE_BLENDING_NORMAL);`),c?f.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):f.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&f.push(`gl_FragColor.a *= ${d.result};`),f.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=f.join(`
`)}return t}},Qht=class extends zn{constructor(){super("toon"),this.nodeType="Toon",this.color=new Ji(us),this.specular=new Ji(1118481),this.shininess=new Dt(30),this.previousModelViewMatrix=new jp,this.previouseProjectionMatrix=new jp,this.shadingAlpha=new Dt(1),this.shadingBlend=new vi(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ir.frameIndex}),e.mergeUniform({resolution:ir.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(ww.merge([Et.fog,Et.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <morphtarget_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <morphtarget_vertex>","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:ir.penumbraSize}),e.mergeUniform({frameIndex:ir.frameIndex}),e.mergeUniform({aoMap:ir.aoRenderTarget}),e.mergeUniform({aoEnabled:ir.aoEnabled}),this.color===void 0&&(this.color=new Ji(us)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(iw.dHdxy),e.include(iw.perturbNormalArb);let h=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),g=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",p="";this.bumpMap.projection.value===4?p=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${h.result}, uv0, ${g});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${h.result}, uv1, ${g});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${h.result}, uv2, ${g});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:p=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${h.result}, bumpMapCachedUv, ${g});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,c.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${p}
					`)}c.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${d}, ${o.result} );
				}
				`),s&&c.push(s.code,`outgoingLight = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&c.push(`gl_FragColor.a *= ${u.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},Jht=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),r=this.cache.get(e);return r===void 0?(r={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,r)):(r.time=t,r.prev.next=r.next,r.next.prev=r.prev),r.prev=this.tail.prev,r.next=this.tail,this.tail.prev.next=r,this.tail.prev=r,this.scheduleCleanup(),r.data}},Zht=class extends Jht{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},SB;function eft(e){return typeof e=="string"?e:(SB||(SB=new Zht),SB.load(e))}var tft=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},rft=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},oSe=class extends tft{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isBuffer=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo=e.type==="video",this.isBuffer=e.isWebGLRenderTarget===!0,this.loadPromise=this.updateSrc(this.isBuffer?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;for(let i of Object.values(this._cache))for(let n of Object.values(i))for(let a of Object.values(n))a&&(a.image=this.img,a.needsUpdate=!0);this.shared.requestRender()};if(this.isBuffer)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var r=new FileReader;r.readAsDataURL(new Blob([e],{type:"video/mp4"}));let i;await new Promise(n=>{r.onloadend=a=>{var o;i=(o=a.target)==null?void 0:o.result,n(null)}}),this.img.src=i}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=eft(e),this.img.onload=t,await new Promise(i=>{this.img.onload=()=>{t(),i(null)}})}getTexture(e,t=1008,r=1006){var n,a;let i=(a=(n=this._cache[e])==null?void 0:n[t])==null?void 0:a[r];if(i)return i;{let o;return this.isBuffer?o=this.img.texture:this.isVideo?o=new _Je(this.img,void 0,e,e):o=new Vi(this.img,void 0,e,e,r,t),this.loaded&&(o.needsUpdate=!0),this._cache[e]===void 0&&(this._cache[e]={}),this._cache[e][t]===void 0&&(this._cache[e][t]={}),this._cache[e][t][r]=o,o}}setNeedsUpdate(e){for(let t of Object.values(this._cache))for(let r of Object.values(t))for(let i of Object.values(r))i&&(i.needsUpdate=e)}disposeTextures(){for(let[e,t]of Object.entries(this._cache))for(let[r,i]of Object.entries(t))for(let[n,a]of Object.entries(i))a==null||a.dispose(),this._cache[e]!==void 0&&this._cache[e][r]!==void 0&&(this._cache[e][r][n]=void 0)}dispose(){super.dispose(),this.disposeTextures()}},Qg=class extends oSe{};function ift(e,t){var r=sft(t);return r.formatToParts?aft(r,e):oft(r,e)}var nft={year:0,month:1,day:2,hour:3,minute:4,second:5};function aft(e,t){try{for(var r=e.formatToParts(t),i=[],n=0;n<r.length;n++){var a=nft[r[n].type];a>=0&&(i[a]=parseInt(r[n].value,10))}return i}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function oft(e,t){var r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[i[3],i[1],i[2],i[4],i[5],i[6]]}var CB={};function sft(e){if(!CB[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),r=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";CB[e]=r?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return CB[e]}function sSe(e,t,r,i,n,a,o){var s=new Date(0);return s.setUTCFullYear(e,t,r),s.setUTCHours(i,n,a,o),s}var Uee=36e5,lft=6e4,EB={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function lSe(e,t,r){var i,n;if(!e||(i=EB.timezoneZ.exec(e),i))return 0;var a;if(i=EB.timezoneHH.exec(e),i)return a=parseInt(i[1],10),Vee(a)?-(a*Uee):NaN;if(i=EB.timezoneHHMM.exec(e),i){a=parseInt(i[1],10);var o=parseInt(i[2],10);return Vee(a,o)?(n=Math.abs(a)*Uee+o*lft,a>0?-n:n):NaN}if(dft(e)){t=new Date(t||Date.now());var s=r?t:uft(t),l=_k(s,e),u=r?l:cft(t,l,e);return-u}return NaN}function uft(e){return sSe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function _k(e,t){var r=ift(e,t),i=sSe(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime(),n=e.getTime(),a=n%1e3;return n-=a>=0?a:1e3+a,i-n}function cft(e,t,r){var i=e.getTime(),n=i-t,a=_k(new Date(n),r);if(t===a)return t;n-=a-t;var o=_k(new Date(n),r);return a===o?a:Math.max(a,o)}function Vee(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var kee={};function dft(e){if(kee[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),kee[e]=!0,!0}catch{return!1}}var hft=Av(l$e(),1),qee=Av(u$e(),1),fft=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,pft=fft,MB=36e5,Wee=6e4,mft=2,ao={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:pft};function gft(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var r={},i=r.additionalDigits==null?mft:(0,hft.default)(r.additionalDigits);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=vft(e),a=yft(n.date,i),o=a.year,s=a.restDateString,l=bft(s,o);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),c=0,d;if(n.time&&(c=_ft(n.time),isNaN(c)))return new Date(NaN);if(n.timeZone||r.timeZone){if(d=lSe(n.timeZone||r.timeZone,new Date(u+c)),isNaN(d))return new Date(NaN)}else d=(0,qee.default)(new Date(u+c)),d=(0,qee.default)(new Date(u+c+d));return new Date(u+c+d)}else return new Date(NaN)}function vft(e){var t={},r=ao.dateTimePattern.exec(e),i;if(r?(t.date=r[1],i=r[3]):(r=ao.datePattern.exec(e),r?(t.date=r[1],i=r[2]):(t.date=null,i=e)),i){var n=ao.timeZone.exec(i);n?(t.time=i.replace(n[1],""),t.timeZone=n[1].trim()):t.time=i}return t}function yft(e,t){var r=ao.YYY[t],i=ao.YYYYY[t],n;if(n=ao.YYYY.exec(e)||i.exec(e),n){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=ao.YY.exec(e)||r.exec(e),n){var o=n[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}return{year:null}}function bft(e,t){if(t===null)return null;var r,i,n,a;if(e.length===0)return i=new Date(0),i.setUTCFullYear(t),i;if(r=ao.MM.exec(e),r)return i=new Date(0),n=parseInt(r[1],10)-1,Hee(t,n)?(i.setUTCFullYear(t,n),i):new Date(NaN);if(r=ao.DDD.exec(e),r){i=new Date(0);var o=parseInt(r[1],10);return Sft(t,o)?(i.setUTCFullYear(t,0,o),i):new Date(NaN)}if(r=ao.MMDD.exec(e),r){i=new Date(0),n=parseInt(r[1],10)-1;var s=parseInt(r[2],10);return Hee(t,n,s)?(i.setUTCFullYear(t,n,s),i):new Date(NaN)}if(r=ao.Www.exec(e),r)return a=parseInt(r[1],10)-1,$ee(t,a)?Gee(t,a):new Date(NaN);if(r=ao.WwwD.exec(e),r){a=parseInt(r[1],10)-1;var l=parseInt(r[2],10)-1;return $ee(t,a,l)?Gee(t,a,l):new Date(NaN)}return null}function _ft(e){var t,r,i;if(t=ao.HH.exec(e),t)return r=parseFloat(t[1].replace(",",".")),PB(r)?r%24*MB:NaN;if(t=ao.HHMM.exec(e),t)return r=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")),PB(r,i)?r%24*MB+i*Wee:NaN;if(t=ao.HHMMSS.exec(e),t){r=parseInt(t[1],10),i=parseInt(t[2],10);var n=parseFloat(t[3].replace(",","."));return PB(r,i,n)?r%24*MB+i*Wee+n*1e3:NaN}return null}function Gee(e,t,r){t=t||0,r=r||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var n=i.getUTCDay()||7,a=t*7+r+1-n;return i.setUTCDate(i.getUTCDate()+a),i}var wft=[31,28,31,30,31,30,31,31,30,31,30,31],xft=[31,29,31,30,31,30,31,31,30,31,30,31];function uSe(e){return e%400===0||e%4===0&&e%100!==0}function Hee(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;var i=uSe(e);if(i&&r>xft[t]||!i&&r>wft[t])return!1}return!0}function Sft(e,t){if(t<1)return!1;var r=uSe(e);return!(r&&t>366||!r&&t>365)}function $ee(e,t,r){return!(t<0||t>52||r!=null&&(r<0||r>6))}function PB(e,t,r){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}function Cft(e,t,r){var i=gft(e,r),n=lSe(t,i,!0),a=new Date(i.getTime()-n),o=new Date(0);return o.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),o.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),o}function lo(e,t){return t.color(e)}function Xee(e=new Date,t){let r=t.format,i=e.getSeconds(),n=e;t&&t.timeZone!==null&&(n=Cft(new Date,t.timeZone));let a=n.getHours(),o=n.getMinutes(),s;t.format12h24h==="12ampm"&&(s=a>=12?"PM":"AM");let l=a;t.format12h24h!=="24"&&(l=a%12,l===0&&(l=12));let u,c;switch(r){case"HH:mm:ss":u=[l,o,i];break;case"HH:mm":u=[l,o];break;case"HH":u=[l],s=void 0;break;case"mm":u=[o],s=void 0;break;case"ss":u=[i],s=void 0;break;case"year":c=n.getFullYear();break;case"month":c=n.getMonth()+1;break;case"dayOfYear":c=Math.floor((n.getTime()-new Date(n.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":c=n.getDate();break;case"secondOfDay":c=a*60*60+o*60+i;break;default:console.error("Unknown time format",r),c=0;break}return u!==void 0?{textValue:u,suffix:s}:c}function Eft(e,t){switch(e.type){case"fresnel":return Tft(e,t);case"gradient":return Aft(e,t);case"depth":return Oft(e,t);case"normal":return Rft(e,t);case"noise":return Dft(e,t);case"rainbow":return Ift(e,t);case"toon":return jft(e,t);case"outline":return zft(e,t);case"transmission":return Bft(e,t);case"color":return Pft(e,t);case"pattern":return Lft(e,t)}}function Mft(e){return{type:e.type}}function jf(e,t){let{alpha:r,mode:i,isMask:n}=e,a=typeof r=="string"?(Number(t.getVariable(r))??100)/100:r;return{...Mft(e),alpha:a,mode:i,isMask:n}}function Pft(e,t){return{...jf(e,t),color:lo(e.color,t)}}function Tft(e,t){let{bias:r,scale:i,intensity:n,factor:a,color:o}=e;return{...jf(e,t),color:lo(o,t),bias:r,scale:i,intensity:n,factor:a}}function Aft(e,t){let{gradientType:r,smooth:i,colors:n,steps:a,angle:o,offset:s,morph:l}=e;return{...jf(e,t),gradientType:r,smooth:i,colors:n.map(u=>new hr(u[0],u[1],u[2],u[3])),num:n.length,steps:a,offset:new ze(...s),morph:new ze(...l),angle:o}}function Oft(e,t){let{gradientType:r,near:i,far:n,isVector:a,isWorldSpace:o,origin:s,direction:l,colors:u,steps:c,smooth:d}=e;return{...jf(e,t),gradientType:r,near:i,far:n,isVector:a,isWorldSpace:o,origin:new k(...s),direction:l?new k(...l):new k(1,0,0),colors:u.map(h=>h!==void 0?new hr(h[0],h[1],h[2],h[3]):new hr(0,0,0,0)),steps:c.slice(0,u.length),smooth:d}}function Rft(e,t){let{cnormal:r}=e;return{...jf(e,t),cnormal:new k(r[0],r[1],r[2])}}function Dft(e,t){return{...jf(e,t),scale:e.scale,move:e.move,fA:new ze(...e.fA),fB:new ze(...e.fB),size:new k(...e.size),distortion:new ze(...e.distortion),colorA:lo(e.colorA,t),colorB:lo(e.colorB,t),colorC:lo(e.colorC,t),colorD:lo(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function Ift(e,t){return{...jf(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new k(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new k(...e.offset)}}function jft(e,t){return{...jf(e,t),positioning:e.positioning,colors:e.colors.map(r=>new hr(r[0],r[1],r[2],r[3])),num:e.colors.length,steps:e.steps,source:new k(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:lo(e.shadowColor,t),offset:new k(...e.offset)}}function zft(e,t){return{...jf(e,t),outlineColor:lo(e.outlineColor,t),contourColor:lo(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new k(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function Bft(e,t){return{...jf(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function Lft(e,t){return{...jf(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new ze(...e.offset),colorA:lo(e.colorA,t),colorB:lo(e.colorB,t),frequency:new ze(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new ze(...e.vertical),horizontal:new ze(...e.horizontal),sides:e.sides}}var QD=class extends wa{},Fft={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},Nft={depth:["colors"]};function Uft(e,t,r){var a,o;if(t==="isMask")return!0;let i=Fft[e.type],n=Nft[e.type];if(n!==void 0){let s=e.color;if(n.includes(t)){let l=(o=(a=s[t])==null?void 0:a.value)==null?void 0:o.length;if(l!==void 0&&l!==r.length)return!0}}return i!==void 0?i.includes(t):!1}function cSe(e,t,r){let i=r.uniforms[`f${r.id}_texture`];if(!i)return!1;let n=!1,a=e;if("image"in a){let o=a.image,s=t.image(o),l=i;l.image instanceof Qg||l.image.deref(),l.image=s}if("video"in a){let o=a.video,s=t.video(o),l=i;l.image instanceof Qg||l.image.deref(),l.image=s}if("wrapping"in a){let o=i;o.wrap=a.wrapping}if("minFilter"in a){let o=i;o.minFilter=a.minFilter}if("magFilter"in a){let o=i;o.magFilter=a.magFilter}if("rotation"in a&&r.uniforms[`f${r.id}_rotation`])return r.uniforms[`f${r.id}_rotation`].value=(a.rotation??0)*Ot.DEG2RAD,n;if("repeat"in a||"offset"in a||"rotation"in a){let o="mat",s=r.uniforms[`f${r.id}_${o}`];"repeat"in a&&(s.repeat=a.repeat),"offset"in a&&(s.offset=a.offset),"rotation"in a&&(s.rotation=a.rotation??0),s.updateMatrix()}return n}function Vft(e,t,r,i){let n=!1;for(let[a,o]of Object.entries(e)){if(a==="bumpMap"||a==="roughnessMap"){n=!0;continue}if(!a||o===void 0)continue;if(hSe(a,r,i,t)){a==="visible"&&r.type==="light"&&(n=!0);continue}r.visible=i.visible;let s=r.uniforms[`f${r.id}_${a}`];if(s&&!(s instanceof iG))switch(n=n||Uft(r,a,o),s.constructor){case Ji:if(typeof o=="string"){let l=t.getColor(o);l&&(s.value=l);break}else{let l=o;s.value instanceof QD?s.value=new wa(l.r,l.g,l.b,l.a):s.setRGBA(l);break}case _m:if(typeof o=="string"){let l=t.getColor(o);l&&(s.value=l);break}else{let l=o;s.value instanceof QD?s.value=new wa(l.r,l.g,l.b,l.a):s.value.setRGBA(l.r,l.g,l.b,l.a);break}case fa:{let l=o;s.value.setX(l[0]),s.value.setY(l[1]);break}case Rs:{let l=o;s.value.setX(l[0]),s.value.setY(l[1]),s.value.setZ(l[2]);break}case Pm:{cSe(o,t,r);break}case _0:{s.value=o.map(l=>new hr(...l));break}default:{s.value=o;break}}}return n}var pb=(e,t,r)=>Math.max(0,Math.min(1,Number(t.getVariable(typeof e=="number"?e*100:e,r)??100)/100))??1,SP=class{constructor(e,t,r,i,n){this.id=e,this.uuid=t,this.data=r,this.uniforms={};for(let a in i)this.uniforms[`f${this.id}_${a}`]=i[a];for(let a in r)hSe(a,this,r,n)}get type(){return this.data.type}static create(e,t,r,i){if(r.type==="light")return np.createLightLayer(e,t,r,i);if(r.type==="texture"||r.type==="video"){let n=r.type==="texture"?i.uiBuffer(r.texture.image)??i.image(r.texture.image):i.video(r.texture.video),a=new vk(n,r.texture.wrapping,r.texture.minFilter??1008,r.texture.magFilter??1006),o=new qht(n),s=new Wht(r.texture.repeat,r.texture.offset,r.texture.rotation??0),l=new Dt(r.crop?1:0),u=new vi(r.projection??0),c=new vi(["x","y","z"].indexOf(r.axis)??0),d=new vi(r.side??0),h=new fa(r.size?new ze(r.size[0],r.size[1]):new ze(100,100)),f=new Dt(r.blending??0),g=new Dt(pb(r.alpha,i)),p=new vi(r.mode??0),m=new no(r.isMask??!1),y=new nG(a,o,l,u,c,d,h,f,s,g,p,m),b=new Pi(y.calpha,"f");return new Xi(e,t,r,{texture:a,textureSize:o,crop:l,projection:u,axis:c,side:d,size:h,blending:f,mat:s,alpha:g,mode:p,isMask:m},y,p,b,m,i)}else if(r.type==="matcap"){let n=i.image(r.texture.image),a=new vk(n,r.texture.wrapping,r.texture.minFilter??1008,r.texture.magFilter??1006),o=new Dt(pb(r.alpha,i)),s=new vi(r.mode??0),l=new no(r.isMask??!1),u=new Dt((r.texture.rotation??0)*Ot.DEG2RAD),c=new Hxe(a,o,s,l,u),d=new Pi(c.calpha,"f");return new Xi(e,t,r,{texture:a,alpha:o,mode:s,isMask:l,rotation:u},c,s,d,l,i)}else if(r.type==="displace")if(r.displacementType==="noise"){let n=new Rs(new k(...r.offset)),a=new Dt(r.scale??10),o=new Dt(r.intensity??8),s=new Dt(r.movement??1),l=new vi(r.noiseType??0),u=new vi(r.voronoiStyle??0),c=new Dt(r.smoothness??.5),d=new Dt(r.seed??0),h=new Dt(r.highCut??1),f=new Dt(r.lowCut??0),g=new vi(r.quality??1),p=new nSe(o,s,n,u,c,d,h,f,g,a,l);return new dSe(e,t,r,{offset:n,scale:a,intensity:o,movement:s,noiseType:l,voronoiStyle:u,smoothness:c,seed:d,highCut:h,lowCut:f,quality:g},p,i)}else throw new Error;else return Wft(e,t,r,i)}updateByOp(e,t,r){let i=e;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props||"visible"in i.props||"noiseType"in i.props?(r.scene.markNeedsUpdateRendererDirty(),!0):Vft(i.props,r.shared,this,t)}else if(i.path[0]==="texture")return"texture"in t||"video"in t?cSe(i.props,r.shared,this):!0;return!1}dispose(){if(kft(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof Qg||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}},Xi=class extends SP{constructor(e,t,r,i,n,a,o,s,l){super(e,t,r,i,l),this.params=i,this.color=n,this.mode=a,this.alpha=o,this.isMask=s}},dSe=class extends SP{constructor(e,t,r,i,n,a){super(e,t,r,i,a),this.position=n}},np=class extends SP{constructor(e,t,r,i,n,a){super(e,t,r,n,a),this.node=i}static createLightLayer(e,t,r,i){let n,a=new Dt(pb(r.alpha,i)),o=new vi(r.mode),s=new Dt(r.bumpMapIntensity),l=new Dt(pb(r.alphaOverride,i)),u;if(!r.visible)n=new aG,u={};else if(r.category==="lambert"){n=new Xht;let c=new Ji(i.color(r.emissive)??0),d=new no(r.occlusion??!0);u={emissive:c,occlusion:d},n.emissive=c,n.occlusion=d}else if(r.category==="toon"){n=new Qht;let c=new Dt(r.shininess??30),d=new Ji(i.color(r.specular)??1118481);u={shininess:c,specular:d},n.shininess=c,n.specular=d}else if(r.category==="physical"){n=new Kht;let c=new Dt(r.roughness??.3),d=new Dt(r.metalness??0),h=new Dt(r.reflectivity??.5),f=new no(r.occlusion??!0);u={roughness:c,metalness:d,reflectivity:h,occlusion:f},n.roughness=c,n.metalness=d,n.reflectivity=h,n.occlusion=f}else{n=new Yht;let c=new Dt(r.shininess??30),d=new Ji(r.specular!==void 0?i.color(r.specular)??1118481:1118481),h=new no(r.occlusion??!0);u={shininess:c,specular:d,occlusion:h},n.shininess=c,n.specular=d,n.occlusion=h}return n.alpha=new Dt(1),n.shadingAlpha=a,n.shadingBlend=o,n.bumpMapIntensity=s,n.alphaOverride=l,u.alpha=n.shadingAlpha,u.mode=n.shadingBlend,u.bumpMapIntensity=n.bumpMapIntensity,u.alphaOverride=n.alphaOverride,new np(e,t,r,n,u,i)}get category(){return this.node.category}};function kft(e){let t=e instanceof SP?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function Ms(e){return{alpha:new Dt(e.alpha??1),mode:new vi(e.mode??0),isMask:new no(e.isMask??!1)}}function qft(e,t,r,i,n){switch(e.type){case"color":{let a=new Ji(i.color??us),o=Ms(i),s=new yk(a,o.alpha),l=new Pi(s.calpha,"f");return new Xi(t,r,e,{color:a,...o},s,o.mode,l,o.isMask,n)}case"fresnel":{let a=new Ji(i.color??16777215),o=new Dt(i.bias??.1),s=new Dt(i.scale??1),l=new Dt(i.intensity??2),u=new Dt(i.factor??1),c=Ms(i),d=new Ght(a,o,s,l,u,c.alpha,c.mode,c.isMask),h=new Pi(d.calpha,"f");return new Xi(t,r,e,{color:a,bias:o,scale:s,intensity:l,factor:u,...c},d,c.mode,h,c.isMask,n)}case"rainbow":{let a=new Dt(i.filmThickness??30),o=new Dt(i.movement??0),s=new Rs(i.wavelengths??new k(0,0,0)),l=new Dt(i.noiseStrength??0),u=new Dt(i.noiseScale??1),c=new Rs(i.offset??new k(0,0,0)),d=Ms(i),h=new Jxe(a,o,s,l,u,c,d.alpha,d.isMask),f=new Pi(h.calpha,"f");return new Xi(t,r,e,{filmThickness:a,movement:o,wavelengths:s,noiseStrength:l,noiseScale:u,offset:c,...d},h,d.mode,f,d.isMask,n)}case"transmission":{let a=new Dt(i.thickness??10),o=new Dt(i.ior??1.5),s=new Dt(i.roughness??.5),l=ir.transmissionSize,u=ir.transmissionRenderTarget,c=ir.transmissionRenderTargetDepth,d=window.innerWidth,h=window.innerHeight,f=d>=h?new fa(h/d,1):new fa(1,d/h),g=Ms(i),p=new rSe(a,o,s,l,u,c,f,g.alpha),m=new Pi(p.calpha,"f");return new Xi(t,r,e,{thickness:a,ior:o,roughness:s,aspectRatio:f,...g},p,g.mode,m,g.isMask,n)}case"toon":{let a=new vi(i.positioning??0),o;i.colors?o=new _0(i.colors.length,i.colors):(o=new _0(10,new hr(0,0,0,1)),o.value[1]=new hr(1,1,1,1));let s;i.steps?s=new b0(i.steps.length,i.steps):(s=new b0(10,1),s.value[0]=0);let l=new Rs(i.source??new k(0,0,0)),u=new no(i.isWorldSpace??!0),c=new Dt(i.noiseStrength??0),d=new Dt(i.noiseScale??1),h=new _m(i.shadowColor),f=new Rs(i.offset??new k(0,0,0)),g=Ms(i),p=new eSe(a,o,s,l,u,c,d,h,f,g.alpha),m=new Pi(p.calpha,"f");return new Xi(t,r,e,{positioning:a,colors:o,steps:s,source:l,isWorldSpace:u,noiseStrength:c,noiseScale:d,shadowColor:h,offset:f,...g},p,g.mode,m,g.isMask,n)}case"outline":{let a=new Ji(i.outlineColor??16777215),o=new Ji(i.contourColor??16777215),s=new Dt(i.outlineWidth??.1),l=new Dt(i.contourWidth??.1),u=new Dt(i.outlineThreshold??.1),c=new Dt(i.contourThreshold??.1),d=new Dt(i.outlineSmoothing??.1),h=new Dt(i.contourFrequency??.1),f=new Rs(i.contourDirection??new k(0,1,0)),g=new no(i.positionalLines??!1),p=new no(i.compensation??!0),m=ir.normalRenderTarget,y=ir.normalRenderTargetDepth,b=ir.pixelRatioNode,w=ir.resolution,x=Ms(i),S=new Yxe(a,o,s,l,u,c,d,h,f,g,p,w,m,y,b,x.alpha),C=new Pi(S.calpha,"f");return new Xi(t,r,e,{outlineColor:a,contourColor:o,outlineWidth:s,contourWidth:l,outlineThreshold:u,contourThreshold:c,outlineSmoothing:d,contourFrequency:h,contourDirection:f,positionalLines:g,compensation:p,...x},S,x.mode,C,x.isMask,n)}case"depth":{let a=new vi(i.gradientType??0),o=new no(i.smooth??!1),s=new Dt(i.near??50),l=new Dt(i.far??200),u=new Dt(i.isVector??1),c=new Dt(i.isWorldSpace??0),d=new Rs(i.origin??new k),h=new Rs(i.direction??new k),f;i.colors?f=new _0(i.colors.length,i.colors):(f=new _0(2,new hr(0,0,0,1)),f.value[1]=new hr(1,1,1,1));let g;i.steps?g=new b0(i.steps.length,i.steps):(g=new b0(2,1),g.value[0]=0);let p=Ms(i),m=new kxe(a,o,s,l,u,c,d,h,f,g,p.alpha,p.isMask),y=new Pi(m.calpha,"f");return new Xi(t,r,e,{gradientType:a,smooth:o,near:s,far:l,isVector:u,isWorldSpace:c,origin:d,direction:h,colors:f,steps:g,...p},m,p.mode,y,p.isMask,n)}case"noise":{let a=new Dt(i.scale??1),o=new Rs(i.size??new k(100,100,100)),s=new Dt(i.move??1),l=new fa(i.fA??new ze(1.7,9.2)),u=new fa(i.fB??new ze(8.3,2.8)),c=new fa(i.distortion??new ze(1,1)),d=new _m(i.colorA),h=new _m(i.colorB),f=new _m(i.colorC),g=new _m(i.colorD),p=new vi(i.noiseType??0),m=new vi(i.voronoiStyle??0),y=new Dt(i.highCut??1),b=new Dt(i.lowCut??0),w=new Dt(i.smoothness??.5),x=new Dt(i.seed??.5),S=new vi(i.quality??1),C=Ms(i),T=new $xe(a,o,s,l,u,c,d,h,f,g,C.alpha,p,C.isMask,m,y,b,w,x,S),M=new Pi(T.calpha,"f");return new Xi(t,r,e,{scale:a,size:o,move:s,fA:l,fB:u,distortion:c,colorA:d,colorB:h,colorC:f,colorD:g,noiseType:p,...C,voronoiStyle:m,highCut:y,lowCut:b,smoothness:w,seed:x,quality:S},T,C.mode,M,C.isMask,n)}case"normal":{let a=new Rs(i.cnormal??new k(1,1,1)),o=Ms(i),s=new Vxe(a,o.alpha),l=new Pi(s.calpha,"f");return new Xi(t,r,e,{cnormal:a,...o},s,o.mode,l,o.isMask,n)}case"gradient":{let a=new vi(i.gradientType??0),o=new no(i.smooth??!1),s;i.colors?s=new _0(i.colors.length,i.colors):(s=new _0(10,new hr(0,0,0,1)),s.value[1]=new hr(1,1,1,1));let l;i.steps?l=new b0(i.steps.length,i.steps):(l=new b0(10,1),l.value[0]=0);let u=new fa(i.offset??new ze(0,0)),c=new fa(i.morph??new ze(0,0)),d=new Dt(i.angle??0),h=Ms(i),f=new Wxe(a,o,s,l,u,c,d,h.alpha,h.isMask),g=new Pi(f.calpha,"f");return new Xi(t,r,e,{gradientType:a,smooth:o,colors:s,steps:l,offset:u,morph:c,angle:d,...h},f,h.mode,g,h.isMask,n)}case"pattern":{let a=new vi(i.style??0),o=new vi(i.projection??0),s=new vi(["x","y","z"].indexOf(i.axis)??0),l=new Dt(i.blending??0),u=new fa(i.offset??new ze(0,0)),c=new _m(i.colorA),d=new _m(i.colorB),h=new fa(i.frequency??new ze(10,10)),f=new Dt(i.size??.5),g=new Dt(i.variation??0),p=new Dt(i.smoothness??.5),m=new Dt(i.zigzag??0),y=new Dt(i.rotation??0),b=new fa(i.vertical??new ze(0,1)),w=new fa(i.horizontal??new ze(0,1)),x=new vi(i.sides??6),S=Ms(i),C=new Kxe(a,o,s,l,u,c,d,h,f,g,p,m,y,b,w,x,S.alpha,S.isMask),T=new Pi(C.calpha,"f");return new Xi(t,r,e,{style:a,projection:o,axis:s,blending:l,offset:u,colorA:c,colorB:d,frequency:h,size:f,variation:g,smoothness:p,zigzag:m,rotation:y,vertical:b,horizontal:w,sides:x,...S},C,S.mode,T,S.isMask,n)}default:{let a=new Ji(1,0,0,1),o=Ms(i),s=new yk(a,o.alpha),l=new Pi(s.calpha,"f");return new Xi(t,r,e,{color:a,...o},s,o.mode,l,o.isMask,n)}}}function Wft(e,t,r,i){let n=Eft(r,i);return qft(r,e,t,n,i)}function hSe(e,t,r,i){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let n=t.uniforms[`f${t.id}_intensity`];return n?(n.value=r.intensity*(r.visible?1:0),n):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let n=t.uniforms[`f${t.id}_alpha`];if(!n)return;if(n.value=pb(r.alpha,i)*(r.visible?1:0),r.type==="outline"&&e==="visible"){let a=t.uniforms[`f${t.id}_compensation`];a&&(a.value=r.compensation&&r.visible)}return n}}function r_(e,t){let r=0,i=e.layers.find(n=>n.data.type==="light");if(i){let n=i.data,a=Number(t.getVariable(n.alphaOverride));if((typeof n.alphaOverride=="string"?a/100:n.alphaOverride)<1)return!0}for(let n of e.layers){if(n.data.type!=="displace"&&n.data.isMask)return!0;if(n.data.type!=="displace"&&"alpha"in n.data&&n.data.type!=="light"&&n.data.type!=="fresnel"&&n.data.type!=="texture"&&n.data.type!=="matcap"&&n.data.type!=="rainbow"&&n.data.type!=="outline"&&n.data.type!=="pattern"){let a=n.data.visible?n.data.alpha:0;if(typeof a=="string"&&(a=Math.max(0,Math.min(1,Number(t.getVariable(a)??100)/100))),a===1&&n.data.type==="depth"||n.data.type==="gradient"){for(let o of n.data.colors)if(o[3]<1){a=o[3];break}}else if(a===1&&n.data.type==="noise"){let o=t.color(n.data.colorA).a,s=t.color(n.data.colorB).a,l=t.color(n.data.colorC).a,u=t.color(n.data.colorD).a,c=Math.min(o,Math.min(s,Math.min(l,u)));c<1&&(a=c)}r+=(1-r)*a}}return r<1}var wv=class extends qr{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.shadersPatchedForShapeBlend=!1,this.nodeContextUuid=0,this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return""}},Gft=class extends wv{constructor(e,t,r,i){super(),this.flatShading=e,this.side=t,this.wireframe=r,this.root=i}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,Object.assign(this.defines,e.defines),Object.assign(this.uniforms,e.uniforms),this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,r,i){return this.root.getFlavor(e,t,r,i)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,r){this.root.updateByOp(e,t,r)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},oG=class extends wv{constructor(e,t,r=!0){super(),this.data=e,this.allowVariableSaves=r,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.needsJitter=t.shared.needsJitter,zn.startContext(this),this.reset0(e,t),zn.endContext(this)}get nodeMaterial(){return this}getFlavor(e,t,r,i){let n=r?6:(e?3:0)+t;if(n+=(((i==null?void 0:i.resolutionLevel)??0)-(i!=null&&i.useChildrenColors?4:0))*7,n===0)return this;this.flavors===void 0&&(this.flavors=[]),n-=1;let a=this.flavors[n];return a===void 0&&(a=new Gft(e,t,r,this),a.needsJitter=this.needsJitter,this.flavors[n]=a,a.flatShading=e,a.side=t,a.updateAfterBuild(),i&&(a.defines.SHAPEBLEND=i.resolutionLevel,a.defines.SHAPEBLEND_C=i.useChildrenColors?1:0)),a}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t,r=!1){zn.startContext(this),(this.data!==e||r)&&this.reset0(e,t),zn.endContext(this)}reset0(e,t){this.data=e;let r=e.layers??Zn.defaultTwoLayerData("phong").layers;try{this.layers=r.map(i=>SP.create(this.layerIdGen++,i.id,i.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=r_(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,r){if(e[0]==="alphaOverride")this.transparent=r_(this.data,r.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if(e[0]==="layer"){let i=e[1],n=e[2];if(i&&n){let a=this.layers.find(o=>o.uuid===i);a!=null&&a.hasValue(n)&&(n==="alpha"?(this.transparent=r_(this.data,r.shared),a.setValue(n,Math.max(0,Math.min(Number(t)/100,1)))):a.setValue(n,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(r=>r.data.type==="light");t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(r=>{"alpha"in r.data&&typeof r.data.alpha=="string"&&e.shared.getVariable(r.data.alpha,["material",this.uuid,"layer",r.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(t=>t instanceof np),this.lightLayer===void 0&&(this.lightLayer=new np(0,"",{...Yn.defaultData("light","phong"),visible:!1},new aG,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.build(),this.nodeContextUuid=0}applyTextureMaps(){let e=this.layers.find(n=>n instanceof np);if(!e)return;let t=e.data,r=t.bumpMap,i=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let n=0;n<this.layers.length;++n){let a=this.layers[n];a instanceof Xi&&a.color instanceof nG&&(a.uuid===r&&(e.node.bumpMap=a.color),a.uuid===i&&(e.node.roughnessMap=a.color))}}updateByOp(e,t,r){if(zn.startContext(this),t!==void 0?this.data=t:t=this.data,this.transparent=r_(t,r.shared),e.path[0]==="layers"){let i=r.shared,n=e.path[1];if(n===void 0)r.scene.markNeedsUpdateRendererDirty(),this.reset0(t,r);else{e.type===0&&e.props.occlusion!==void 0&&r.scene.markNeedsUpdateRendererDirty();let a=this.layers.find(o=>o.uuid===n);if(a){let o=t.layers.data(n),s;e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?s={...e.props,alpha:pb(e.props.alpha,i,["material",this.uuid,"layer",n,"alpha"])}:s={...e.props,alphaOverride:pb(e.props.alphaOverride,i,["material",this.uuid,"alphaOverride"])}),a.updateByOp({...e,...s?{props:s}:{},path:e.path.slice(2)},o,r)&&this.reset0(t,r)}}}else this.reset0(t,r);zn.endContext(this)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof Xi?t.color.mask=void 0:t instanceof np&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof Xi&&t.isMask.value&&t.data.visible&&e>0){let r=e-1,i=this.layers[r];i instanceof np?i.node.mask=new xo(t.color,t.alpha,xo.MUL):i instanceof Xi&&(i.isMask.value||(i.color.mask=new xo(t.color,t.alpha,xo.MUL)))}}}blendColors(){let e=this.layers.findIndex(r=>r instanceof Xi),t=this.layers.findIndex(r=>r instanceof np);if(e!==-1&&e<t){let r=this.layers[e].color;for(let i=e+1;i<t;++i){let n=this.layers[i];if(n instanceof Xi){if(n.isMask.value)continue;r=new Nee(r,n.color,n.alpha,n.mode)}}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let e=new Pi("outgoingLight","f"),t=this.layers.findIndex(r=>r instanceof np);if(this.layers.length>t+1){for(let r=t+1;r<this.layers.length;++r){let i=this.layers[r];if(i instanceof Xi){if(i.isMask.value)continue;e=new Nee(e,i.color,i.alpha,i.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof dSe);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new xo(t,e[r].position,xo.ADD),t=new xo(t,new Dt(.5).setReadonly(!0),xo.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.shapeBlendhack&&this.shapeBlendhack(this),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let r=(i,n,a)=>Math.min(Math.max(i,n),a);for(let i of this.layers)if(i.type==="displace"){let n=r(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=n}}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new Lxe;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this.shadersPatchedForShapeBlend=!1,this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof Xi){let t=e.params.texture;if(t instanceof vk&&!t.image.loaded)return!1}return!0}};Object.defineProperties(wv.prototype,{properties:{get:function(){return this.fragment.properties}}});var wk=class extends oG{constructor(e,t,r){super(e,t,!1),this.uuid=r,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},Yee=new Map;function Hft(e){if(typeof e=="string")return e;let t=Yee.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},Yee.set(e,t)),t.url}var fSe,$ft=new Promise(e=>{fSe=e}),Kee=!1,oO;function Xft(){if(Kee)return;if(oO)return oO;async function e(){await tl(()=>import("./howler-CYy4vB20.js").then(t=>t.h),[]),fSe(window!==void 0?window:global),Kee=!0}return oO=e(),oO}var pSe;$ft.then(e=>pSe=e);function Yft(e){let t=!1;return e.scene.objects.traverse((r,i)=>{if(i.events===void 0||Array.isArray(i.events)===!1)return!0;let n=[];i.events.forEach(a=>{"dragDropActions"in a.data?(n.push(...a.data.dragDropActions.drag),n.push(...a.data.dragDropActions.drop)):"inActions"in a.data?(n.push(...a.data.inActions),n.push(...a.data.outActions)):"gameActions"in a.data?(n.push(...a.data.gameActions.idle),n.push(...a.data.gameActions.move),n.push(...a.data.gameActions.jump),n.push(...a.data.gameActions.run)):"breakpoints"in a.data?a.data.breakpoints.forEach(o=>{n.push(...o.data.actions)}):"actions"in a.data&&n.push(...a.data.actions),t=t||n.some(o=>o.data.type==="Audio")})}),t}var sE=class{constructor({src:e,volume:t,delay:r,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let n;typeof e=="string"?n={src:e}:n={src:Hft(e),format:"wav"},this.sound=new pSe.Howl(n),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),r!==void 0&&(this.delay=r),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,r){this.sound.on(e,t,r)}off(e,t,r){this.sound.off(e,t,r)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},Kft=class{constructor(){this.type="ShapePath",this.color=new er,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new dD,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var r;return(r=this.currentPath)==null||r.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){var n;return(n=this.currentPath)==null||n.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,a){var o;return(o=this.currentPath)==null||o.bezierCurveTo(e,t,r,i,n,a),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function r(f,g,p,m){let y=f.x,b=g.x,w=p.x,x=m.x,S=f.y,C=g.y,T=p.y,M=m.y,A=(x-w)*(S-T)-(M-T)*(y-w),P=(b-y)*(S-T)-(C-S)*(y-w),O=(M-T)*(b-y)-(x-w)*(C-S),j=A/O,D=P/O;if(O===0&&A!==0||j<=0||j>=1||D<0||D>1)return null;if(A===0&&O===0){for(let I=0;I<2;I++)if(i(I===0?p:m,f,g),t.loc===e.ORIGIN){let q=I===0?p:m;return{x:q.x,y:q.y,t:t.t}}else if(t.loc===e.BETWEEN){let q=+(y+t.t*(b-y)).toPrecision(10),$=+(S+t.t*(C-S)).toPrecision(10);return{x:q,y:$,t:t.t}}return null}else{for(let $=0;$<2;$++)if(i($===0?p:m,f,g),t.loc===e.ORIGIN){let X=$===0?p:m;return{x:X.x,y:X.y,t:t.t}}let I=+(y+j*(b-y)).toPrecision(10),q=+(S+j*(C-S)).toPrecision(10);return{x:I,y:q,t:j}}}function i(f,g,p){let m=p.x-g.x,y=p.y-g.y,b=f.x-g.x,w=f.y-g.y,x=m*w-b*y;if(f.x===g.x&&f.y===g.y){t.loc=e.ORIGIN,t.t=0;return}if(f.x===p.x&&f.y===p.y){t.loc=e.DESTINATION,t.t=1;return}if(x<-Number.EPSILON){t.loc=e.LEFT;return}if(x>Number.EPSILON){t.loc=e.RIGHT;return}if(m*b<0||y*w<0){t.loc=e.BEHIND;return}if(Math.sqrt(m*m+y*y)<Math.sqrt(b*b+w*w)){t.loc=e.BEYOND;return}let S;m!==0?S=b/m:S=w/y,t.loc=e.BETWEEN,t.t=S}function n(f,g){let p=[],m=[];for(let y=1;y<f.length;y++){let b=f[y-1],w=f[y];for(let x=1;x<g.length;x++){let S=g[x-1],C=g[x],T=r(b,w,S,C);T!==null&&p.find(M=>M.t<=T.t+Number.EPSILON&&M.t>=T.t-Number.EPSILON)===void 0&&(p.push(T),m.push(new ze(T.x,T.y)))}}return m}function a(f,g,p){let m=new ze;g.getCenter(m);let y=[];return p.forEach(b=>{b.boundingBox.containsPoint(m)&&n(f,b.points).forEach(w=>{y.push({identifier:b.identifier,isCW:b.isCW,point:w})})}),y.sort((b,w)=>b.point.x-w.point.x),y}function o(f,g,p,m,y){(y==null||y==="")&&(y="nonzero");let b=new ze;f.boundingBox.getCenter(b);let w=[new ze(p,b.y),new ze(m,b.y)],x=a(w,f.boundingBox,g);x.sort((P,O)=>P.point.x-O.point.x);let S=[],C=[];x.forEach(P=>{P.identifier===f.identifier?S.push(P):C.push(P)});let T=S[0].point.x,M=[],A=0;for(;A<C.length&&C[A].point.x<T;)M.length>0&&M[M.length-1]===C[A].identifier?M.pop():M.push(C[A].identifier),A++;if(M.push(f.identifier),y==="evenodd"){let P=M.length%2===0,O=M[M.length-2];return{identifier:f.identifier,isHole:P,for:O}}else if(y==="nonzero"){let P=!0,O=null,j=null;for(let D=0;D<M.length;D++){let I=M[D];g[I]&&(P?(j=g[I].isCW,P=!1,O=I):j!==g[I].isCW&&(j=g[I].isCW,P=!0))}return{identifier:f.identifier,isHole:P,for:O}}else console.warn('fill-rule: "'+y+'" is currently not implemented.')}let s=0,l=999999999,u=-999999999,c=[];this.subPaths.forEach(f=>{let g=f.getPoints(),p=-999999999,m=999999999,y=-999999999,b=999999999;for(let w=0;w<g.length;w++){let x=g[w];x.y>p&&(p=x.y),x.y<m&&(m=x.y),x.x>y&&(y=x.x),x.x<b&&(b=x.x)}u<=y&&(u=y+1),l>=b&&(l=b-1),g.length&&c.push({curves:f.curves,points:g,isCW:g_e.isClockWise(g),identifier:s++,boundingBox:new vW(new ze(b,m),new ze(y,p))})});let d=c.map(f=>{var g;return o(f,c,l,u,(g=this.userData)==null?void 0:g.style.fillRule)}),h=[];return c.forEach(f=>{let g=d[f.identifier];if(g&&!g.isHole){let p=new hD;p.curves=f.curves,d.filter(m=>(m==null?void 0:m.isHole)&&m.for===f.identifier).forEach(m=>{if(m){let y=c[m.identifier],b=new dD;b.curves=y.curves,p.holes.push(b)}}),h.push(p)}}),h}},mSe=!1,gSe,Qee=new Promise(e=>{gSe=e}),Jee=!1,sO;function Qft(){if(mSe=!0,Jee)return;if(sO)return sO;async function e(){let t=await tl(()=>import("./opentype-LDE648lb.js"),[]);gSe(t),Jee=!0}return sO=e(),sO}var Jft=class{async load(e,t,r=()=>{}){let{load:i}=await Qee;i(e,(n,a)=>{n||!a?r(n??"Something went wrong"):t(a)})}async parse(e){let{parse:t,Bidi:r}=await Qee;try{let i=t(e),n=new r,a=o=>i.charToGlyphIndex(o.char);return n.registerModifier("glyphIndex",null,a),n.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:n}}catch(i){console.error(i)}}};async function Zft(e){return await(await fetch(e)).arrayBuffer()}var ept=new Jft;async function Zee(e){let t,r,i=!1;if(e.url?(t=await Zft(e.url),r=e.url,i=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t)if(mSe){let n=await ept.parse(t);if(n)return{font:n.font,url:r,intercepted:i,arr:t,bidi:n.bidi}}else return{font:void 0,url:r,intercepted:i,arr:t,bidi:null}}function tpt(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var rpt=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=Zee(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=Zee(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,r){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(t);let n=i.tokenizer.tokens,a=[],o=0,s=r.length===n.length;for(let l=0;l<r.length;l++){let u=r[l].index,c=String.fromCharCode(r[l].unicode),d=n[o];if(tpt(u,d)||s)a.push({char:c,index:u,replacements:[d.state.glyphIndex],replacementChars:[d.char]}),o++;else{let h=d.char,f="",g=[d.state.glyphIndex],p=[],m=!1;for(;!m;)o++,f=t.charAt(o),h+=f,g.push(e.charToGlyphIndex(f)),p=e.stringToGlyphs(h),p.length===1&&p[0].index===u&&(m=!0),o>t.length&&(m=!0);a.push({char:c,index:u,replacements:g,replacementChars:Array.from(h)}),o++}}return a}generateShapes(e,t){if(!this._isLoaded)return;let r=this.font,i=t.fontSize/this.unitsPerEm,n=t.fontSize*t.lineHeight,a=e.map(y=>this.getTextWidth(y,t)),o=t.width,s=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?s:0,u=this.computeSpaceWidthForLine(e,0,t),c=this.getLineInitialOffsetX(a[0],o,t.horizontalAlign,e[0],s),d=this.getLineInitialOffsetY(n,e.length,t.height,i,t.verticalAlign),h=[],f=e.map(y=>[]),g=e.map(y=>[]),p;for(let y=0;y<e.length;y++){let b=e[y],w={features:{liga:!0}},x=[];try{x=r.stringToGlyphs(b,w)}catch(C){console.warn(C)}c=this.getLineInitialOffsetX(a[y],o,t.horizontalAlign,b,s);let S=[];try{S=this.reverseLigaturesTable(r,b,x)}catch(C){console.warn(C)}u=this.computeSpaceWidthForLine(e,y,t);for(let C=0;C<x.length;C++){let T=x[C],M=T.index===0?`
`:T.unicode?String.fromCharCode(T.unicode):void 0,A=S[C],P=0,O=0;C===0&&t.horizontalAlign===2&&T.leftSideBearing!==void 0&&(O=-T.leftSideBearing*i),p&&(P=r.getKerningValue(T,p)*i),c+=O+P;let j=0;if(M===`
`)j=l;else if(M===" ")j=u;else{let D=this.createPath(T,i,c,d,t);D&&(j=D.offsetX-(P+O),h.push(D.path))}if(A.replacements.length===1)g[y].push([c,d]),f[y].push(j);else{let D=A.replacements.map(X=>(r.glyphs.get(X).advanceWidth??0)*i),I=D.reduce((X,N)=>X+=N,0),q=D.map(X=>X/I),$=c;for(let X=0;X<q.length;X++){let N=j*q[X];g[y].push([$,d]),f[y].push(N),$+=N}}c+=j,p=T}d-=n}let m=[];for(let y=0,b=h.length;y<b;y++)m.push(...h[y].toShapes());return{shapes:m,charWidths:f,lineWidths:a,charCoords:g}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,r,i,n){return(r===3||r===2)&&i.indexOf(`
`)>=0&&(e-=n),r===3?t*.5-e*.5:r===2?t-e:0}getLineInitialOffsetY(e,t,r,i,n){let a=t*e,o=Math.abs(this.ascender-this.descender)*i,s=e-o,l=-this.ascender*i-s/2;return n===3?-(r-a-l):n===2?-(r*.5-a*.5-l):l}createPath(e,t,r,i,n){var l;let a=e.getPath(r,-i,n.fontSize,{kerning:!1,letterSpacing:n.letterSpacing});if(!a){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let o=new Kft,s=(e.advanceWidth??1)*t;if(e)for(let u of a.commands){let c=(l=o.currentPath)==null?void 0:l.currentPoint;if(!(c&&u.type!=="Z"&&c.x===u.x&&-c.y===u.y))switch(u.type){case"M":o.moveTo(u.x,-u.y);break;case"L":o.lineTo(u.x,-u.y);break;case"Q":o.quadraticCurveTo(u.x1,-u.y1,u.x,-u.y);break;case"C":o.bezierCurveTo(u.x1,-u.y1,u.x2,-u.y2,u.x,-u.y);break}}return o.subPaths.forEach(u=>{let c=ipt(u.curves);c!==void 0&&u.currentPoint.distanceTo(c)>0&&u.lineTo(c.x,c.y)}),{offsetX:s+n.fontSize*n.letterSpacing,path:o}}getCharWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,r){let i=this.getCharWidth(" ",r),n=e[t];if(n){let a=this.countSpaces(n.trimEnd());if(r.horizontalAlign===4&&t<e.length-1&&a){let o=r.width,s=this.getTextWidth(n,r);return(o-(s-a*i))/a}}return i}countSpaces(e){return(e.match(/ /g)||[]).length}};function ipt(e){if(e.length){let t=e[0];if(t instanceof Cf)return t.v1;if(t instanceof _f||t instanceof bv)return t.v0}}var npt=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,r){let i=this.objects.get(e);return i===void 0?(i=this.createObject(e,t,r),this.objects.set(e,i)):i.isShared=!0,i}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let r=this.objects.get(e);if(r&&r.isShared!==!0)return this.objects.delete(e),this.objects.set(t,r),r}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let r=this.objects.get(e);t===r&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},ete=class extends npt{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,r){let i=jM(e,t,this.flatShading,r);return i.computeBoundingSphere(),i}},apt={markNeedsUpdateRendererDirty:()=>{}},hR=1e3,tte=512*hR;function opt(e,t){let r=typeof e;return!!((t==="string"||t==="number")&&r===t||t==="boolean"&&(e==="true"||e==="false"||e===!0||e===!1)||t==="image"&&r==="string"&&e.startsWith("http"))}var spt="https://hooks.spline.design",lpt=`${spt}/events?hashFile=`,upt=class{constructor(e,t){this.id=e,this.userWebhook=t,this.result=void 0,this._connected=!1,this.emitter=pI(),this.reconnectWaitFor=hR,this._onError=r=>{var i,n,a;(i=this.eventSource)==null||i.removeEventListener("message",this._onMessage),(n=this.eventSource)==null||n.removeEventListener("error",this._onError),(a=this.eventSource)==null||a.removeEventListener("open",this._onConnected),this._scheduleReconnect()},this._onConnected=r=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=hR,this._connected=!0},this._onDisconnected=()=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=hR,this._connected=!1},this._onMessage=r=>{let i=r.data,n;try{n=JSON.parse(i)}catch(a){console.error("Error parsing webhook message",a)}if(n){let a=!1;this.userWebhook.parametersSchemas.forEach(({data:o})=>{n[o.name]!==void 0&&opt(n[o.name],o.type)&&(this.result===void 0&&(this.result={}),this.result[o.name]=n[o.name],a=!0)}),a&&this.emitter.emit("message",{userWebhookId:this.id})}}}connect(){clearTimeout(this.scheduledReconnectHandle),this.userWebhook.url&&(this.eventSource=new EventSource(lpt+this.userWebhook.url),this.eventSource.addEventListener("message",this._onMessage),this.eventSource.addEventListener("error",this._onError),this.eventSource.addEventListener("open",this._onConnected))}disconnect(){var e,t,r,i;(e=this.eventSource)==null||e.removeEventListener("message",this._onMessage),(t=this.eventSource)==null||t.removeEventListener("error",this._onError),(r=this.eventSource)==null||r.removeEventListener("open",this._onConnected),(i=this.eventSource)==null||i.close(),this._onDisconnected(),clearTimeout(this.scheduledReconnectHandle)}_scheduleReconnect(){this.reconnectWaitFor*=2,this.reconnectWaitFor>tte&&(this.reconnectWaitFor=tte),clearTimeout(this.scheduledReconnectHandle),this.scheduledReconnectHandle=setTimeout(()=>{this.scheduledReconnectHandle=void 0,this.connect()},this.reconnectWaitFor)}update(e){this.userWebhook=e}dispose(){this._connected&&this.disconnect()}get connected(){return this._connected}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}getParametersKeys(){return this.userWebhook.parametersSchemas.map(e=>e.data.name)}getParameterValue(e){var t;if(this.getParametersKeys().includes(e)){if(this.result)return(t=this.result)==null?void 0:t[e];for(let r of this.userWebhook.parametersSchemas)if(r.data.name===e)return Y6.defaultParameterValueByType(r.data.type)}}},rte=[4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],cpt=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],pv=[],sG=[];for(let e=1;e<=8;e++)for(let t=0;t<rte.length;t++){let r=rte[t];pv.push(r/Math.pow(2,8-e)),sG.push(cpt[t]+e)}var JD=[32,2e3],ite=pv.filter((e,t)=>pv[t]>JD[0]&&pv[t]<JD[1]),dpt=sG.filter((e,t)=>pv[t]>JD[0]&&pv[t]<JD[1]),hpt=class{static getFrequencies(e,t,r,i="frequency",n=-100,a=-30){r||(r=new Float32Array(e.frequencyBinCount),e.getFloatFrequencyData(r));let o=t/2,s=1/r.length*o,l,u,c;if(i==="music"||i==="voice"){let h=i==="voice"?ite:pv,f=Array(h.length).fill(n);for(let g=0;g<r.length;g++){let p=g*s,m=r[g];for(let y=h.length-1;y>=0;y--)if(p>h[y]){f[y]=Math.max(f[y],m);break}}l=f,u=i==="voice"?ite:pv,c=i==="voice"?dpt:sG}else l=Array.from(r),u=l.map((h,f)=>s*f),c=u.map(h=>`${h.toFixed(2)} Hz`);let d=l.map(h=>Math.max(0,Math.min((h-n)/(a-n),1)));return{values:new Float32Array(d),frequencies:u,labels:c}}},fpt="gpt-4o-realtime-preview-2024-12-17",ppt=()=>"https://relayserver.spline.design/";async function mpt(e){try{return(await(await fetch(ppt()+"session?uuidfile="+e)).json()).token}catch(t){console.error("Token generation error:",t)}}var gpt=class{constructor(e){this.value=0,this.frequencies=new Float32Array(0);let t=new AudioContext;this.source=t.createMediaStreamSource(e),this.analyser=t.createAnalyser(),this.source.connect(this.analyser),this.analyser.fftSize=8192,this.analyser.smoothingTimeConstant=.1}getFrequencies(e=-100,t=-30){if(!this.analyser)throw new Error("Not connected, please call .connect() first");return hpt.getFrequencies(this.analyser,44100,void 0,"voice",e,t)}update(){let e=this.getFrequencies(),t=e.values.reduce((r,i)=>r+i,0)/e.values.length;this.value=t,this.frequencies=e.values}disconnect(){this.source.disconnect(),this.analyser.disconnect()}},nte=class{constructor(e,t,r){this.data=e,this.id=t,this.shared=r,this.emitter=pI(),this.rafId=0,this.voice=0,this.frequencies=new Float32Array([0]),this.events=[],this.isConnected=!1,this.isToolsAdded=!1,this.tools=[],this.onMessage=i=>{var a;let n=JSON.parse(i.data);if(this.appendEvent(n),n.type==="session.created"&&this.onSessionCreated(),n.type==="response.done"&&((a=n.response)==null?void 0:a.output)){for(let o of n.response.output)if(o.type==="function_call")for(let[s,l]of this.tools)o.name===s.name&&(l(JSON.parse(o.arguments)),setTimeout(()=>{this.sendClientEvent({type:"response.create",response:{instructions:"notice the user about what you just did"}})}))}},this.onSessionCreated=()=>{this.isToolsAdded||this.registerTools()},this.onOpen=()=>{this.events=[],this.isConnected=!0,this.sendClientEvent({type:"response.create",response:{instructions:"Say hi"}})},this.animate=()=>{if(this.rafId=requestAnimationFrame(this.animate),this.isConnected&&this.analyser){this.analyser.update();let i=this.analyser.value,n=this.analyser.frequencies;this.voice=i,this.frequencies=n,this.emitter.emit("voice",{value:i,frequencies:n})}}}update(e){this.data=e}setColorByName(e,t){let r=this.shared.getColorByName(e);if(r){let{id:i}=r,{r:n,g:a,b:o}=Vdt.hexStringToRgb(t)??{r:0,g:0,b:0};this.shared.updateColor(i,{r:n/255,g:a/255,b:o/255})}}async connect(){if(this.isConnected)return;let e=await mpt(this.data.integration.hash);this.pc=new RTCPeerConnection,this.audioElement=document.createElement("audio"),this.audioElement.autoplay=!0,this.pc.ontrack=n=>{let a=n.streams[0];this.audioElement.srcObject=a,this.analyser=new gpt(a)};let t=await navigator.mediaDevices.getUserMedia({audio:!0});this.pc.addTrack(t.getTracks()[0]),this.dc=this.pc.createDataChannel("oai-events"),this.dc.addEventListener("message",this.onMessage),this.dc.addEventListener("open",this.onOpen);let r=await this.pc.createOffer();await this.pc.setLocalDescription(r);let i={type:"answer",sdp:await(await fetch(`https://api.openai.com/v1/realtime?model=${fpt}`,{method:"POST",body:r.sdp,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/sdp"}})).text()};await this.pc.setRemoteDescription(i),this.animate()}appendEvent(e){this.events=[e,...this.events]}sendClientEvent(e){this.dc?(e.event_id=e.event_id||crypto.randomUUID(),this.dc.send(JSON.stringify(e)),this.appendEvent(e)):console.error("Failed to send message - no data channel available",e)}registerTools(){this.isToolsAdded=!0,this.registerTool({type:"function",name:"set_personality_color",description:"returns a color based on the voice personality of the ai assistant. This should be called by the voice assistant each time it is asks to speak differently. If a color cannot be associated to the personality, the color should be a neutral color.",parameters:{type:"object",properties:{color:{type:"string",description:"css hex color string, reflecting the personality"},personality:{type:"string",description:"the personality of the voice assistant"}},required:["color","personality"]}},({color:n})=>{this.setColorByName("Voice Assistant Color",n)});let e=this.shared.getVariablesNames().join(", ");this.registerTool({type:"function",name:"set_variable",description:"Sets a Spline variable value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the variable that needs to be set. Here's a list of available variables: ${e}. It the variable does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"The new value for this variable, should always be a string even for number and boolean variables, assume that the value will be cast to the proper type afterwards."}},required:["name","value","type"]}},({name:n,value:a})=>{let o=this.shared.getVariableByName(n);if(o){let s=this.shared.getVariable(o.id),l;typeof s=="number"?l=parseFloat(a):typeof s=="boolean"?l=a.toLowerCase()==="true":l={textValue:a},this.shared.updateVariable(o.id,l)}});let t=this.shared.getColorNames().join(", ");this.registerTool({type:"function",name:"set_color",description:"Sets a Spline color asset value when asked by the user.",parameters:{type:"object",properties:{name:{type:"string",description:`The name of the color asset that needs to be set. Here's a list of available color assets: ${t}. It the color asset does not exist, don't call the function and warn the user about it.`},value:{type:"string",description:"css hex color string"}},required:["name","value"]}},({name:n,value:a})=>{this.setColorByName(n,a)});let r=this.shared.scene,i=[];r.traverseEntity(n=>{n.data.events.forEach(a=>{if(a.data.type==="AIAssistantTrigger"){let{description:o}=a.data;i.push(o)}})}),this.registerTool({type:"function",name:"trigger_event",description:"Trigger an event by name, here are the available events, please match what the user is asking for to one of these if it applies, otherwise don't call the function and warn the user.",parameters:{type:"object",properties:{description:{type:"string",description:`The name of the event that needs to be triggered. Here's a list of available events: ${JSON.stringify(i)}.`},direction:{type:"string",description:"default is forward, but can be forward or backward. Always set to forward unless the user ask to reverse or cancel the event, then set to backward."}},required:["description","direction"]}},({description:n,direction:a})=>{this.emitter.emit("trigger_event",{description:n,direction:a})}),this.sendClientEvent({type:"session.update",session:{tools:this.tools.map(([n])=>n)}})}registerTool(e,t){this.tools.push([e,t])}disconnect(){var e,t,r,i,n,a;cancelAnimationFrame(this.rafId),(e=this.analyser)==null||e.disconnect(),this.voice=0,this.isConnected=!1,this.isToolsAdded=!1,(t=this.dc)==null||t.removeEventListener("message",this.onMessage),(r=this.dc)==null||r.removeEventListener("open",this.onOpen),(i=this.dc)==null||i.close(),(n=this.pc)==null||n.getSenders().forEach(o=>{o.track&&o.track.stop()}),(a=this.pc)==null||a.close(),this.pc=void 0}computeAnalysisForListenerEvent(e){if(e.analysis==="range"){let t=this.frequencies.slice(...e.analysisRange);return t.reduce((r,i)=>r+i,0)/t.length}return e.analysis==="single"?this.frequencies[e.analysisSingle]:this.voice}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}};function xk(e){return"variable_"+e}var vpt=class extends rft{constructor(e){super(),this.shared=e}create(e){return new oSe(e,this.shared)}},lG=class{constructor(e,t={},r=!0,i=!1){if(this.data=e,this.needsJitter=r,this.enableLocalStorageForPersistentVariables=i,this.geometryCache=new ete(!0),this.geometryCache2=new ete(!1),this.imageHolderCache=new vpt(this),this.thisContext={scene:apt,shared:this},this.deletedMaterial=new wk(Zn.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new Qg(Q6.emptyImage,this),this.deletedVideo=new Qg(ID.defaultVideo,this),this.materials={},this.images={},this.uiBuffers={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.userAPIs={},this.userWebhooks={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[n,a]of Object.entries(t.images))this.addImage(n,a);if(t.videos)for(let[n,a]of Object.entries(t.videos))this.addVideo(n,a);if(t.audios)for(let[n,a]of Object.entries(t.audios))this.addAudio(n,a);if(t.particles)for(let[n,a]of Object.entries(t.particles))this.addParticle(n,a);this.reset(e)}setRequestRender(e){this._requestRender=e}getImageLoadPromises(){return Object.values(this.images).map(e=>e.loadPromise)}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.data=e,this.resetLib(e.lib);for(let{id:r,data:i}of e.variables)this.addVariableHolder(r,i),t&&this.updateVariableHolder(r,i);for(let[r,i]of Object.entries(e.userAPIs))this.addUserAPI(r,i);for(let[r,i]of Object.entries(e.userWebhooks))this.addUserWebhook(r,i);for(let[r,i]of Object.entries(e.images))this.addImage(r,i);for(let[r,i]of Object.entries(e.videos))this.addVideo(r,i);for(let[r,i]of Object.entries(e.colors))this.addColor(r,i);for(let[r,i]of Object.entries(e.materials))this.addMaterial(r,i);for(let[r,i]of Object.entries(e.audios))this.addAudio(r,i);for(let[r,i]of Object.entries(e.particles))this.addParticle(r,i);for(let[r,i]of Object.entries(e.fonts))this.addFont(r,i)}addMaterial(e,t){if(this.materials[e]){let r=this.materials[e];r.reset(t,this.thisContext),r.dispose()}else{let r=new wk(t,this.thisContext,e);this.materials[e]=r}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new oG(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Qg(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addUIBuffer(e,t){return this.uiBuffers[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.uiBuffers[e].updateSrc(t),!0):(this.uiBuffers[e]=new Qg(t,this),!1)}uiBuffer(e){return this.uiBuffers[e]}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Qg(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new QD(t.r,t.g,t.b,t.a):this.colors[e]=new QD(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let r=this.colors[e];return this.colors[e].r=t.r??r.r,this.colors[e].g=t.g??r.g,this.colors[e].b=t.b??r.b,this.colors[e].a=t.a??r.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}getColorNames(){return Object.values(this.data.colors).map(e=>e.name)}getColorByName(e){for(let t in this.data.colors)if(this.data.colors[t].name===e)return{color:this.colors[t],id:t}}color(e){let t;if(typeof e=="string"){let r=this.getColor(e);r?t=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new wa(0,0,0,0))}else return"a"in e?new wa(e.r,e.g,e.b,e.a):new wa(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof sE)return t;{let r=new sE({src:t.data});return this.audios[e]=r,r}}addParticle(e,t){this.particles[e]=t}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let t=this.audios[e];t&&(t instanceof sE&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new rpt(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof sE&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){if(this.variables[e]===void 0){let r=t.value;if(this.enableLocalStorageForPersistentVariables&&t.persistent){let i=localStorage.getItem(xk(e));r=i!==null?JSON.parse(i):t.value}return this.variables[e]={value:r,locations:[],persistent:t.persistent},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0}return this.variables[e].value=t.value,!1}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(this.variables[e]===void 0)return!1;this.variables[e].value=t,this.enableLocalStorageForPersistentVariables&&this.variables[e].persistent&&localStorage.setItem(xk(e),JSON.stringify(t));let r=t;for(;typeof r=="string";)r=this.variables[r].value;let i=this.entityOpContext.scene;for(let n=this.variables[e].locations.length-1;n>=0;n--){let a=this.variables[e].locations[n];if(a[0]==="material"){let o=a[1],s=r,l={scene:i,shared:this},u=a.slice(2);i.traverseMaterial(d=>{let h=d.root??d;h.uuid===o&&h.onVariableUpdate(u,s,l)});let c=this.materials[o];c&&c.onVariableUpdate(u,s,l)}else{let o=i.find(a[0]);if(o===void 0){this.variables[e].locations.splice(n,1);continue}if(a[1]!=="geometry"&&a[1]!=="particles"){for(let s=1;s<a.length-1;s++)o=o[a[s]];a[1]==="rotation"?o[a[a.length-1]]=r*Ot.DEG2RAD:o[a[a.length-1]]=r}if(o=i.find(a[0]),o.type==="ParticleEmitter"&&o.updateVariableState(r,a),Vr.is(o))if(a[1]==="position"||a[1]==="rotation"||a[1]==="scale")o.onVariableUpdate();else if(a[1]==="geometry"){let s=o;o.component&&(s=o.component);let l=s.dataPatched;s.chooseGeoemtryCache(this).forceDelete(l.geometry),s.createGeometryDelayed(this.entityOpContext),s.onVariableUpdate(!0),s.invalidateDownstreamBooleanData(),s.instances.forEach(u=>{let c=u.dataPatched;u.chooseGeoemtryCache(this).forceDelete(c.geometry),u.createGeometryDelayed(this.entityOpContext),u.onVariableUpdate(!0),u.invalidateDownstreamBooleanData()})}else a[1]==="morphTargetInfluences"&&o.updateMorphInfluences(a[2],r)}}return this.requestRender(),!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){var r,i,n;if(Array.isArray(e)){if(e[0]==="mouse")return((r=this.mouseProperty)==null?void 0:r[e[1]])??0;if(e[0]==="raycast")return((i=this.raycastProperty)==null?void 0:i[e[1]])??0;let a=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return a.geometry.userData.parameters[e[1]];for(let o=1;o<e.length;o++)a=a[e[o]];return e[1]==="rotation"&&(a*=Ot.RAD2DEG),a}for(let a in this.variables){if(t===void 0)break;let o=this.variables[a],s=(n=o.locations)==null?void 0:n.findIndex(l=>Ln.equal(l,t));s!==void 0&&s!==-1&&o.locations.splice(s,1)}if(typeof e=="string"){let a=e,o=e;do{if(o=a,this.variables[a]===void 0)break;let s=this.variables[a].value;t&&this.variables[o]!==void 0&&this.variables[o].locations.push(t),a=s}while(typeof a=="string");return a}else return e}getVariables(){return this.variables}getVariablesNames(){return this.data.variables.map(e=>e.data.name)}getVariableByName(e){for(let t of this.data.variables)if(t.data.name===e)return{variable:t.data,id:t.id}}getDynamicVariablePlayState(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.asset);for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r.asset);for(let[t,r]of Object.entries(e.particles))this.addParticle(t,r.asset);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r.asset);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r.asset);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,r.asset);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r.asset);for(let[t,r]of Object.entries(e.variables))this.addVariableHolder(t,r.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===1&&e.type===1?this.addParticle(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,r){var i;if(this.data=t,e.path[0]==="images")e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id);else if(e.path[0]==="videos")e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id);else if(e.path[0]==="audios")e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id);else if(e.path[0]==="particles")e.path.length===2&&e.type===0?e.props.data&&this.addParticle(e.path[1],t.particles[e.path[1]]):e.path.length===1&&e.type===1?this.addParticle(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteParticle(e.id);else if(e.path[0]==="colors")e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id);else if(e.path[0]==="materials")e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(Jn.drop(e,2),t.materials[e.path[1]],{shared:this,scene:r});else if(e.path[0]==="fonts")e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,r):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id);else if(e.path[0]==="variables")e.path.length===2&&e.type===0?"value"in e.props?this.updateVariable(e.path[1],e.props.value):"persistent"in e.props&&(this.variables[e.path[1]].persistent=e.props.persistent):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id);else if(e.path[0]==="userAPIs"){if(e.path.length===1&&e.type===1)this.addUserAPI(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserAPI(e.id);else if(typeof e.path[1]=="string"){let n=t.userAPIs[e.path[1]];if(n){let a=e.type===0&&e.props.debounce===void 0,o=this.getUserAPI(e.path[1]);o instanceof nte?o.update(n):o==null||o.update(n,this,a)}}}else if(e.path[0]==="userWebhooks"){if(e.path.length===1&&e.type===1)this.addUserWebhook(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserWebhook(e.id);else if(typeof e.path[1]=="string"){let n=t.userWebhooks[e.path[1]];n&&((i=this.getUserWebhook(e.path[1]))==null||i.update(n))}}else e.path[0]==="lib"&&this.updateLibByOp(Jn.drop(e,1),r)}updateFont(e,t,r){if(t.props.url){let i=this.getFont(e),n={...this.data.fonts[e],url:t.props.url};i.update(n),i.loadingPromise.then(()=>this.requestRender()),r.updateFont(e,this)}}addUserAPI(e,t){var r,i;return this.userAPIs[e]?(this.userAPIs[e].update(t,this),!0):((r=this.openAIRealtime)==null?void 0:r.id)===e?(this.openAIRealtime.update(t),!0):((i=t.integration)==null?void 0:i.type)==="VoiceAssistant"?(this.openAIRealtime=new nte(t,e,this),!1):(this.userAPIs[e]=new Sxe(e,t,this),!1)}getUserAPI(e){var t;return((t=this.openAIRealtime)==null?void 0:t.id)===e?this.openAIRealtime:this.userAPIs[e]}getUserAPIs(){return this.userAPIs}deleteUserAPI(e){let t=this.userAPIs[e];t&&(t.dispose(),delete this.userAPIs[e])}addUserWebhook(e,t){return this.userWebhooks[e]?(this.userWebhooks[e].update(t),!0):(this.userWebhooks[e]=new upt(e,t),!1)}getUserWebhook(e){return this.userWebhooks[e]}getUserWebhooks(){return this.userWebhooks}deleteUserWebhook(e){let t=this.userWebhooks[e];t&&(t.dispose(),delete this.userWebhooks[e])}get scene(){return this.entityOpContext.scene}};new lG(Bs.emptyData());var jw=class extends ho{updateByPatchedOp(e,t,r){if(super.updateByPatchedOp(e,t,r),Alt(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[i,n]of Object.entries(e.props)){let a=r.shared.material(n);this.material[Number(i)]=a}else if(yi(e.path,["material"])&&this.material instanceof wv)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(Jn.drop(e,1),t.material,r);else if(yi(e.path,["materials","*"])&&Array.isArray(this.material)){let i=e.path[1];if("materials"in t&&i<this.material.length){let n=t.materials[i];typeof n!="string"&&this.material[i].updateByOp(Jn.drop(e,2),n,r)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var n,a;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let r=this.dataPatched;this.dataPatched.type==="Mesh"&&this.dataPatched.geometry.shapeBlendNode&&this.layers.set(9);let i;if(this.dataPatched.type==="Mesh"&&this.dataPatched.geometry.type==="ShapeBlendGeometry"&&(i={resolutionLevel:this.dataPatched.geometry.resolutionLevel,useChildrenColors:this.dataPatched.geometry.useChildrenColors}),((n=e.geometry)==null?void 0:n.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe,i),t.scene.markNeedsUpdateRendererDirty()),(((a=e.geometry)==null?void 0:a.type)==="NonParametricGeometry"||"materials"in e)&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(o=>t.shared.material(o).getFlavor(r.flatShading,r.side,r.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let o=0;o<this.material.length;o++)this.material[o]=this.material[o].getFlavor(r.flatShading,r.side,r.wireframe);else this.material=this.material.getFlavor(r.flatShading,r.side,r.wireframe,i)}disposeMaterial(){this.material&&hwe(this.material).forEach(e=>{e instanceof wv&&(e instanceof wk||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},ate=new k,ote=new hr,ste=new hr,ypt=new k,lte=new dt,Sn=class extends jw{constructor(e,t,r){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=new dt().fromArray(t.bindMatrix),this.bindMatrixInverse=new dt)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Wt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof lG){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return BD.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return BD.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),yi(e.path,["geometry"])&&this.updateByPatchedOpGeometry(Jn.drop(e,1),t.geometry,r)}removeInteractionGeometry(e){var t;(t=this.localGeometry)==null||t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var i;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let n=e;if(this.localGeometry===void 0){let u={...this.data.geometry,...n};this.localGeometry=jM(u,t,this.data.flatShading,this)}let a,o,s;n.scaleBaked?[a,o,s]=n.scaleBaked:{width:a,height:o,depth:s}=n;let l=this.localGeometry.userData;l.sxPrev!==void 0&&mk(this.localGeometry.attributes,a/l.sxPrev,o/l.syPrev,s/l.szPrev),l.sxPrev=a,l.syPrev=o,l.szPrev=s}else{let n={...this.data.geometry,...e};(i=this.localGeometry)==null||i.dispose(),this.localGeometry=jM(n,t,this.data.flatShading,this)}}refreshAttachedClonersInteractions(){for(let e of this.attachedSurfaceCloners)e.update()}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,r){var n;let i=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof io&&this.chooseGeoemtryCache(r.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(r),this.refreshAttachedPaths(r)),i||((n=r.scene)==null||n.markGeometryCacheDirty(),this.createGeometryDelayed(r)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t);let r=e.morphTargetInfluences;if(r){this.updateMorphTargets(),this.geometry.morphTargetsRelative=!0;for(let{data:{name:i,value:n}}of r)this.updateMorphInfluences(i,t.shared.getVariable(n,[this.uuid,"morphTargetInfluences",i]))}super.updateState(e,t)}updateMorphInfluences(e,t){if(this.morphTargetDictionary===void 0)return;let r=this.morphTargetDictionary[e];r!==void 0&&(this.morphTargetInfluences[r]=t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,r.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)):r.centerOffset?e.fromArray(r.centerOffset):e.setScalar(0),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new hr,r=this.geometry.attributes.skinWeight;for(let i=0,n=r.count;i<n;i++){t.fromBufferAttribute(r,i);let a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),r.setXYZW(i,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let r=this.skeleton;if(r===void 0)return;let i=this.geometry;ote.fromBufferAttribute(i.attributes.skinIndex,e),ste.fromBufferAttribute(i.attributes.skinWeight,e),ate.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){let a=ste.getComponent(n);if(a!==0){let o=ote.getComponent(n);lte.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(ypt.copy(ate).applyMatrix4(lte),a)}}return t.applyMatrix4(this.bindMatrixInverse)}};function bpt(e){var o,s;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,r=e.geometry.attributes,i=r.position.array,n=r.normal.array,a=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let u=`${i[l]}_${i[l+1]}_${i[l+2]}`,c=new k(n[l],n[l+1],n[l+2]);t.has(u)?(o=t.get(u))==null||o.normals.push(c):t.set(u,{normals:[c],result:new k})}t.forEach((l,u)=>{for(let c of l.normals)l.result.add(c);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let u=`${i[l]}_${i[l+1]}_${i[l+2]}`,c=(s=t.get(u))==null?void 0:s.result;c&&(a[l]=c.x,a[l+1]=c.y,a[l+2]=c.z)}e.geometry.setAttribute("extrudeNormal",new Pt(a,3))}function _pt(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=new k;for(let n=0;n<t.length;n+=3)i.set(t[n],t[n+1],t[n+2]).normalize(),r[n]=i.x,r[n+1]=i.y,r[n+2]=i.z;e.geometry.setAttribute("extrudeNormal",new Pt(r,3))}function uG(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof wv)||e.material.getLayersOfType("outline").length===0)return;e instanceof Sn&&e.is2DAndNoDepth?_pt(e):bpt(e)}function cG(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),n=[Ot.seededRandom(i),Ot.seededRandom(i+1e4),Ot.seededRandom(i+2e4)];for(let a=0;a<t.length;a++)r[a]=n[a%3];e.geometry.setAttribute("randomColor",new tr(r,3))}var Yf=new dn,Qx=new k;function wpt(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var zM=class extends Sn{constructor(e,t,r){super(e,t,r),this.data=t,this.hiddenMatrixOld=new dt,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var a,o,s;if(this.skipReactionUpdate===!0)return;let t=(a=this.localGeometry)==null?void 0:a.uuid,{originalGeometry:r,subdividedGeometry:i,subdivPointer:n}=io.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=n,r!==void 0&&((o=this.originalGeometry)==null||o.dispose(),this.originalGeometry=r),i!==void 0&&((s=this.subdividedGeometry)==null||s.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,uG(this),cG(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let r=this.material;this.material=Array.isArray(r)?r.map(i=>i.getFlavor(!1,i.side,i.wireframe)):r.getFlavor(!1,r.side,r.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){io.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&io.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=io.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=io.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let r=this.localGeometry;this.localGeometry=this.originalGeometryNew,ho.prototype.raycast.call(this,e,t),this.localGeometry=r}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Lo,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;Yf.setFromBufferAttribute(t),Yf.getCenter(r),e.boundingSphere.radius=r.distanceTo(Yf.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Yf.getSize(Qx),this.hasNonUniformScale&&Qx.divide(this.scale);let i={width:Qx.x,height:Qx.y,depth:Qx.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(e){let t=this.originalGeometry;Yf.min.set(e[0],e[2],e[4]),Yf.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Yf.min.applyMatrix4(this.shearScaleInv),Yf.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new Lo);let r=t.boundingSphere.center;Yf.getCenter(r),t.boundingSphere.radius=r.distanceTo(Yf.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(io.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,r){super.updateByPatchedOpGeometry(e,t,r),this.localGeometry&&this.createGeometryByControls(t)}},ute=-1,xpt=1,Spt={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},Cpt={polygon_center:0,edge:1,vertex:2},lO=(e,t)=>(r,i)=>!t||r===0||e===0?0:e*i/100,Cr=(e,t)=>{let r=Math.abs(t),i=r*-1;return(e-ute)*(r-i)/(xpt-ute)+i},Ept=new k,uO=new k,Mpt=new k,Ppt=new k;function S_(e,t){let r=Mpt.fromArray(e),i=Ppt.fromArray(t);uO.copy(i).sub(r);let n=uO.length();return uO.normalize().multiplyScalar(n*.5),Ept.copy(r).add(uO).toArray()}var Fs=new va,cO=new k,ZD=new k,M0=new k;function Tpt(e){let t=[];for(let r=0;r<=e.index.count;r++)if(cO.fromArray(e.index.array,r*3),Fs.setFromAttributeAndIndices(e.attributes.position,cO.x,cO.y,cO.z),Fs.getNormal(ZD),Fs.getMidpoint(M0),!(isNaN(M0.x)||isNaN(M0.y)||isNaN(M0.z))){let{a:i,b:n,c:a}=Fs,o=i.toArray(),s=n.toArray(),l=a.toArray(),u=i.distanceTo(n),c=n.distanceTo(a),d=a.distanceTo(i),h=S_(o,s),f=S_(s,l),g=S_(l,o),p=[u,c,d],m=Math.max(...p),y=p.filter(x=>Math.round(x)===Math.round(m)).length>1,b=[],w=Fs.getMidpoint(M0).toArray();m===u&&!y&&(b=[f,g,g],w=h),m===c&&!y&&(b=[h,g,g],w=f),m===d&&!y&&(b=[h,f,f],w=g),y&&(b=[h,f,g]),t.push({vertices:[o,s,l],faceCenters:b,midpoint:w,norm:Fs.getNormal(ZD).toArray()})}return t}function Apt(e){let t=[],{position:r}=e.attributes;for(let i=0;i<r.count;i++){Fs.setFromAttributeAndIndices(r,i*3,i*3+1,i*3+2),Fs.getNormal(ZD),Fs.getMidpoint(M0);let n=Fs.a.toArray(),a=Fs.b.toArray(),o=Fs.c.toArray();t.push({vertices:[n,a,o],faceCenters:[S_(n,a),S_(a,o),S_(o,n)],midpoint:M0.toArray(),norm:ZD.toArray()})}return t}var Opt=4,Rpt=.5,TB=e=>.5*(1-Math.cos(e*Math.PI)),Dpt=class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,r=0){if(this.perlin==null){this.perlin=new Array(4096);for(let m=0;m<4096;m++)this.perlin[m]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);let i=Math.floor(e),n=Math.floor(t),a=Math.floor(r),o=e-i,s=t-n,l=r-a,u,c,d=0,h=.5,f,g,p;for(let m=0;m<Opt;m++){let y=i+(n<<4)+(a<<8);u=TB(o),c=TB(s),f=this.perlin[y&4095],f+=u*(this.perlin[y+1&4095]-f),g=this.perlin[y+16&4095],g+=u*(this.perlin[y+16+1&4095]-g),f+=c*(g-f),y+=256,g=this.perlin[y&4095],g+=u*(this.perlin[y+1&4095]-g),p=this.perlin[y+16&4095],p+=u*(this.perlin[y+16+1&4095]-p),g+=c*(p-g),f+=TB(l)*(g-f),d+=f*h,h*=Rpt,i<<=1,o*=2,n<<=1,s*=2,a<<=1,l*=2,o>=1&&(i++,o--),s>=1&&(n++,s--),l>=1&&(a++,l--)}return d}noiseSeed(e){let t=(()=>{let r,i;return{setSeed(n){i=r=(n??Math.random()*4294967296)>>>0},getSeed(){return r},rand(){return i=(1664525*i+1013904223)%4294967296,i/4294967296}}})();t.setSeed(e),this.perlin=new Array(4096);for(let r=0;r<4096;r++)this.perlin[r]=t.rand()}},Ipt=Dpt,cte=new k,dte=new dt,hte=new _w;function fte(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&(i.geometry.type==="TextGeometry"||i.geometry.type==="InputGeometry")&&(t=!0)}),t}var dG=class extends Sn{constructor(e,t,r){super(e,t,r),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:r}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(dte.copy(r).invert(),hte.copy(e.ray).applyMatrix4(dte),hte.intersectBox(this.singleBBox,cte))){let i=cte.applyMatrix4(r),n=e.ray.origin.distanceTo(i);t.push({distance:n,point:i.clone(),object:this})}}},$a=1e-4,Kf,vSe,ySe,bSe,pte=new k,mte=new k;Txe.then(e=>{Kf=e,vSe=[Kf.get_face_center,Kf.get_edge_midpoint,Kf.get_vertex_position],ySe=[Kf.get_face_normal,Kf.get_edge_normal,Kf.get_vertex_normal],bSe=[Kf.face_count,Kf.edge_count,Kf.vertex_count]});var jpt=new dt,zpt=new dt,Og=new k,dO=new k,Jx=new k,AB=new k,Bpt=new k,Lpt=new k,Fpt=class{constructor(e,t){this.data=e,this.is3D=t,this.perlin=new Ipt,e.noiseType==="perlin"?(this.perlin.noiseSeed(e.seed),t?this.noise=(r,i,n)=>this.perlin.noise(r,i,n):this.noise=r=>this.perlin.noise(r)):t?this.noise=hct((0,sk.default)(e.seed)):this.noise=dct((0,sk.default)(e.seed))}},Us=class extends HW(li){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.random=null,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof _a&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof _a&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"){if(!this.parameters.toObject.object)t=0;else if(e===void 0&&this.parameters.toObject.spreadType!=="random")return}if(this.parameters.type==="toObject"&&this.objectForSample){let r=this.children;if(r.length===t)return;if(r.length<t)for(let i=0,n=t-r.length;i<n;++i){let a=new _a(this.object);a.expand(),this.add(a)}else for(let i=0,n=r.length-t;i<n;++i)this.remove(r[i])}else{if(this.children.length===t)return;if(this.children.length<t)for(let r=0,i=t-this.children.length;r<i;++r){let n=new _a(this.object);n.expand(),this.add(n)}else for(let r=0,i=this.children.length-t;r<i;++r)this.remove(this.children[r])}}getRandom(e,t=!1){return(this.random===null||this.random.data.seed!==e.seed||this.random.is3D!==t)&&(this.random=new Fpt(e,t)),this.random}_updateRadial(e){let t=e.radial,r=t.start*Ot.DEG2RAD,i=t.end*Ot.DEG2RAD,n=r-i,a=new Bn(t.rotation[0],t.rotation[1],t.rotation[2]),o;switch(t.axis){case"z":o=new k(0,0,1);break;case"y":o=new k(0,1,0);break;default:case"x":o=new k(1,0,0);break}let s=e.randomnessObject??tv.defaultData([1,1,1]).randomnessObject,l=this.getRandom(s),u=lO(s.strength,this.parameters.randomness);for(let[c,d]of this.children.entries()){let h=c*(s.freqScale/10)+s.movement,f=l.noise(h,h,h),g=c+1;d.scale.x=t.scale[0]+u(g,Cr(f,s.scale[0]))||$a,d.scale.y=t.scale[1]+u(g,Cr(f,s.scale[1]))||$a,d.scale.z=t.scale[2]+u(g,Cr(f,s.scale[2]))||$a,d.position.setScalar(0);let p=n/e.count*c-r;switch(t.axis){case"x":d.rotation.set(0,p,0);break;case"y":d.rotation.set(0,0,p);break;case"z":d.rotation.set(p,0,0);break}d.translateOnAxis(o,t.radius),d.position.x+=t.position[0]+u(g,Cr(f,s.position[0])),d.position.y+=t.position[1]+u(g,Cr(f,s.position[1])),d.position.z+=t.position[2]+u(g,Cr(f,s.position[2]));let m=u(g,Cr(f,s.rotation[0])),y=u(g,Cr(f,s.rotation[1])),b=u(g,Cr(f,s.rotation[2]));t.alignment===!0?(d.rotation.x+=a.x+m,d.rotation.y+=a.y+y,d.rotation.z+=a.z+b):d.rotation.set(a.x+m,a.y+y,a.z+b)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,r=new Bn(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??tv.defaultData([1,1,1]).randomnessObject,n=this.getRandom(i),a=lO(i.strength,this.parameters.randomness);for(let[o,s]of this.children.entries()){let l=o*(i.freqScale/10)+i.movement,u=n.noise(l,l,l),c=o+1,d=a(c,Cr(u,i.rotation[0])),h=a(c,Cr(u,i.rotation[1])),f=a(c,Cr(u,i.rotation[2]));s.scale.x=1+(t.scale[0]-1)*o+a(c,Cr(u,i.scale[0]))||$a,s.scale.y=1+(t.scale[1]-1)*o+a(c,Cr(u,i.scale[1]))||$a,s.scale.z=1+(t.scale[2]-1)*o+a(c,Cr(u,i.scale[2]))||$a,s.rotation.x=r.x*o+d,s.rotation.y=r.y*o+h,s.rotation.z=r.z*o+f,s.position.x=t.position[0]*o+a(c,Cr(u,i.position[0])),s.position.y=t.position[1]*o+a(c,Cr(u,i.position[1])),s.position.z=t.position[2]*o+a(c,Cr(u,i.position[2]))}}_updateGrid(e){let t=0,r=e.grid,i=e.randomnessObject??tv.defaultData([1,1,1]).randomnessObject,n=this.getRandom(i,!0),a=lO(i.strength,this.parameters.randomness);if(r.useCenter===!0){let o={x:r.count[0]%2===0?2:1,y:r.count[1]%2===0?2:1,z:r.count[2]%2===0?2:1},s=new k(r.size[0]*(r.count[0]-o.x)*.5,r.size[1]*(r.count[1]-o.y)*.5,r.size[2]*(r.count[2]-o.z)*.5);for(let l=0;l<r.count[0];l++)for(let u=0;u<r.count[1];u++)for(let c=0;c<r.count[2];c++){let d=n.noise((l+1)*(i.freqScale/10)+i.movement,(u+1)*(i.freqScale/10)+i.movement,(c+1)*(i.freqScale/10)+i.movement),h=this.children[t++];h.scale.x=1+a(t,Cr(d,i.scale[0]))||$a,h.scale.y=1+a(t,Cr(d,i.scale[1]))||$a,h.scale.z=1+a(t,Cr(d,i.scale[2]))||$a;let f=a(t,Cr(d,i.rotation[0])),g=a(t,Cr(d,i.rotation[1])),p=a(t,Cr(d,i.rotation[2]));h.rotation.set(f,g,p),h.position.x=r.size[0]*l-s.x+a(t,Cr(d,i.position[0])),h.position.y=r.size[1]*u-s.y+a(t,Cr(d,i.position[1])),h.position.z=r.size[2]*c-s.z+a(t,Cr(d,i.position[2]))}}else for(let o=0;o<r.count[0];o++)for(let s=0;s<r.count[1];s++)for(let l=0;l<r.count[2];l++){let u=n.noise((o+1)*(i.freqScale/10)+i.movement,(s+1)*(i.freqScale/10)+i.movement,(l+1)*(i.freqScale/10)+i.movement),c=this.children[t++];c.scale.x=1+a(t,Cr(u,i.scale[0]))||$a,c.scale.y=1+a(t,Cr(u,i.scale[1]))||$a,c.scale.z=1+a(t,Cr(u,i.scale[2]))||$a;let d=a(t,Cr(u,i.rotation[0])),h=a(t,Cr(u,i.rotation[1])),f=a(t,Cr(u,i.rotation[2]));c.rotation.set(d,h,f),c.position.x=r.size[0]*o+a(t,Cr(u,i.position[0])),c.position.y=-r.size[1]*s+a(t,Cr(u,i.position[1])),c.position.z=-r.size[2]*l+a(t,Cr(u,i.position[2]))}}_updateToObject(e){var c;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,r=new Bn(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??tv.defaultData([1,1,1]).randomnessObject,n=this.getRandom(i),a=lO(i.strength,this.parameters.randomness);if(!t.object){for(let[,d]of this.children.entries())d.position.set(0,0,0),d.scale.setScalar(1),d.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof dG)if(!((c=this.objectForSample.font)!=null&&c.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let o=this.getSubdivData();if(o.length>0){let d=Math.round(o.length*t.count/100);this._updateCount(d)}else{let d=this.objectForSample.geometry.getAttribute("position");if(!d||isNaN(d.count)||d.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let s=new fct(this.objectForSample).build(),l=Spt[t.axis],u=this.children;s.setRandomGenerator((0,sk.default)(this.object.uuid+t.seed));for(let[d,h]of u.entries()){let f=d*(i.freqScale/10)+i.movement,g=n.noise(f,f,f),p=d+1,m=a(p,Cr(g,i.rotation[0])),y=a(p,Cr(g,i.rotation[1])),b=a(p,Cr(g,i.rotation[2]));t.spreadType==="random"?s.sample(Jx,AB):(o.length&&(Jx.fromArray(o[d].pos),AB.fromArray(o[d].norm)),this.objectForSample instanceof zM&&Jx.applyMatrix4(jpt.copy(this.objectForSample.matrixWorld).invert())),Jx.applyMatrix4(this.object.hiddenMatrix.clone().invert()),h.position.copy(Jx),Og.fromArray(l);let w=t.align==="normal"?AB:this.object.getWorldDirection(Lpt),x=dO.fromArray(t.position);dO.x+=a(p,Cr(g,i.position[0])),dO.y+=a(p,Cr(g,i.position[1])),dO.z+=a(p,Cr(g,i.position[2]));let S=Math.acos(w.dot(Og)),C=Bpt.crossVectors(Og,w).normalize(),T=zpt.makeRotationAxis(C,S),M=w.clone().cross(this.object.up).normalize(),A=M.clone().cross(w).normalize(),P=new dt().makeBasis(M,w,A),O=new k(Og.y,Og.z,Og.x).normalize(),j=O.clone().cross(Og).normalize(),D=new dt().makeBasis(O,Og,j).invert(),I=new dt().multiplyMatrices(P,D);h.rotation.setFromRotationMatrix(I),x.applyMatrix4(T),h.position.add(x),h.rotation.x=h.rotation.x+r.x+m,h.rotation.y=h.rotation.y+r.y+y,h.rotation.z=h.rotation.z+r.z+b,h.scale.setScalar(1),h.scale.x=h.scale.x+t.scale[0]+a(p,Cr(g,i.scale[0]))||$a,h.scale.y=h.scale.y+t.scale[1]+a(p,Cr(g,i.scale[1]))||$a,h.scale.z=h.scale.z+t.scale[2]+a(p,Cr(g,i.scale[2]))||$a,h.scale.multiply(this.object.scale),h.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType,t=new Map,r=(n,a)=>{let o=Math.round(n[0]*1e4)+"_"+Math.round(n[1]*1e4)+"_"+Math.round(n[2]*1e4),s=t.get(o);s?(s.pos[0]+=n[0],s.pos[1]+=n[1],s.pos[2]+=n[2],s.norm[0]+=a[0],s.norm[1]+=a[1],s.norm[2]+=a[2],s.count+=1):t.set(o,{pos:[...n],norm:[...a],count:1})};if(e==="random")return[];if(this.objectForSample instanceof zM){let n=this.objectForSample,a=Cpt[e],o=bSe[a],s=vSe[a],l=ySe[a],u=o(n.subdivPointerNew);for(let c=0;c<=u-1;c++){let d=s(n.subdivPointerNew,c),h=l(n.subdivPointerNew,c);pte.fromArray(d).applyMatrix4(n.matrixWorld),mte.fromArray(h),r(pte.toArray(),mte.toArray())}}else(this.objectForSample.geometry.index?Tpt(this.objectForSample.geometry):Apt(this.objectForSample.geometry)).forEach((n,a)=>{e==="polygon_center"&&r(n.midpoint,n.norm),e==="vertex"&&(r(n.vertices[0],n.norm),r(n.vertices[1],n.norm),r(n.vertices[2],n.norm)),e==="edge"&&(r(n.faceCenters[0],n.norm),r(n.faceCenters[1],n.norm),r(n.faceCenters[2],n.norm))});let i=Array.from(t.values());for(let n of i)n.pos[0]/=n.count,n.pos[1]/=n.count,n.pos[2]/=n.count,n.norm[0]/=n.count,n.norm[1]/=n.count,n.norm[2]/=n.count;return i}updateState(e,t){var r;if(this.parameters=oI(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(r=this.object.parent)==null||r.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let i=t.find(this.parameters.toObject.object);i instanceof ho?this.objectForSample=i:this.objectForSample=void 0,this.matrix=new dt,this.hiddenMatrix=new dt,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,i&&i.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},CP=e=>{var t;return t=class extends e{},t.geometryHelper=new Af(30,30,30),t},hO=new _w,OB=new Lo,gte=new dt,EP=(e,t,r,i,n=!1,a=e)=>{let o=t,s=a.matrixWorld;if(o.boundingSphere===null&&o.computeBoundingSphere(),OB.copy(o.boundingSphere),OB.applyMatrix4(s),r.ray.intersectsSphere(OB)===!1||(gte.copy(s).invert(),hO.copy(r.ray).applyMatrix4(gte),o.boundingBox!==null&&hO.intersectsBox(o.boundingBox)===!1))return;let l,u,c,d,h=o.index,f=o.attributes.position,g=o.drawRange,p,m;if(n===!1){let b=Math.max(0,g.start),w=Math.min(h.count,g.start+g.count);for(p=b,m=w;p<m;p+=3)if(u=h.getX(p),c=h.getX(p+1),d=h.getX(p+2),l=y(e,r,hO,f,u,c,d),l){l.faceIndex=Math.floor(p/3),i.push(l);return}}else{let b=o.attributes.position,w=new k,x=new k,S=new k,C=new k,T=2,M=1/((a.scale.x+a.scale.y+a.scale.z)/3),A=M*M,P=Math.max(0,g.start),O=Math.min(b.count,g.start+g.count);for(let j=P,D=O-1;j<D;j+=T){if(w.fromBufferAttribute(b,j),x.fromBufferAttribute(b,j+1),hO.distanceSqToSegment(w,x,C,S)>A)continue;C.applyMatrix4(a.matrixWorld);let I=r.ray.origin.distanceTo(C);I<r.near||I>r.far||i.push({distance:I,point:S.clone().applyMatrix4(a.matrixWorld),object:e})}}function y(b,w,x,S,C,T,M){let A=new k,P=new k,O=new k,j=new k,D=new k;if(A.fromBufferAttribute(S,C),P.fromBufferAttribute(S,T),O.fromBufferAttribute(S,M),x.intersectTriangle(A,P,O,!1,j)===null)return null;D.copy(j),D.applyMatrix4(b.matrixWorld);let I=w.ray.origin.distanceTo(D);return I<w.near||I>w.far?null:{faceIndex:1,distance:I,point:D.clone(),object:b}}},fO=new k,Ps=new Ov,Npt=class extends mP{constructor(e){let t=new Wt,r=new Rv({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],a={},o=new er(15711266),s=new er(15711266),l=new er(2857471);u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l);function u(d,h,f){c(d,f),c(h,f)}function c(d,h){i.push(0,0,0),n.push(h.r,h.g,h.b),a[d]===void 0&&(a[d]=[]),a[d].push(i.length/3-1)}t.setAttribute("position",new Pt(i,3)),t.setAttribute("color",new Pt(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){let e=this.geometry,t=this.pointMap;Ps.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,i=1,n=.8;gl("n1",t,e,Ps,-1,-1,n),gl("n2",t,e,Ps,r,-1,n),gl("n3",t,e,Ps,-1,i,n),gl("n4",t,e,Ps,r,i,n);let a=n;gl("f1",t,e,Ps,-1,-1,a),gl("f2",t,e,Ps,r,-1,a),gl("f3",t,e,Ps,-1,i,a),gl("f4",t,e,Ps,r,i,a);let o=a,s=.5;gl("u1",t,e,Ps,r*.7*s,i*1.1,o),gl("u2",t,e,Ps,-1*.7*s,i*1.1,o),gl("u3",t,e,Ps,0,i*(1.1+.9*s),o),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function gl(e,t,r,i,n,a,o){fO.set(n,a,o).unproject(i);let s=t[e];if(s!==void 0){let l=r.getAttribute("position");for(let u=0,c=s.length;u<c;u++)l.setXYZ(s[u],fO.x,fO.y,fO.z)}}var Upt=class extends CP(Npt){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){EP(this.object,this.geometry,e,t,!0)}},Sk;(e=>e.is=t=>"objectHelper"in t)(Sk||(Sk={}));var zw=(e,t)=>class extends $W(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(r,i){this.objectHelper.raycast(r,i)}showGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof vD&&(i.visible=!0)}}updateEntityBoxSize(r,i){this.objectHelper.visible&&this.geometryHelper instanceof Af?(r.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(r,i)}hideGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof vD&&(i.visible=!1)}}},vte=790,P1=new k,RB=new k,DB=new ur,IB=new k,Zx=new k,jB=new k,Ua=class extends zw(Ov,Upt){constructor(e="",t={...PM.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=K_.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new dt,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let r=this.width,i=this.height;this.orthoCamera=new K2(r*-.5,r*.5,i*.5,i*-.5,-5e4,1e4),this.perspCamera=new Ia(45,r/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,r){typeof e=="number"&&(e=new k(e,t,r)),super.lookAt(e),this.getWorldPosition(P1),this.targetOffset=P1.distanceTo(e)}getTarget(e=new k){return this.getWorldDirection(RB),this.getWorldPosition(P1),RB.multiplyScalar(this.targetOffset),e.copy(P1).add(RB),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(P1),P1.distanceTo(e)}updateUp(){this.getWorldQuaternion(DB),IB.set(0,0,1).applyQuaternion(DB),Zx.copy(li.DEFAULT_UP),this.isUpVectorFlipped&&Zx.negate(),Zx.applyQuaternion(DB),jB.copy(li.DEFAULT_UP).projectOnPlane(IB),this.angleOffsetFromUp=jB.angleTo(Zx),this.angleOffsetFromUp*=jB.cross(Zx).dot(IB)>=0?1:-1}updateTransformState(e,t){let r=super.updateTransformState(e,t);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),r}getViewFrontToObject(e){let t=e.getWorldPosition(new k),r=e.getWorldDirection(new k).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new k).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new k;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,r=!1){if(this.aspect=e/t,r){let i=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-790*.5*i,this.right=vte*.5*i,this.top=vte*.5*(1/n),this.bottom=-790*.5*(1/n)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,i,n,a){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,i,n,a):this.orthoCamera.setViewOffset(e,t,r,i,n,a)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return g6(t,e)}updateCameraSubtype(e,t){let r=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(r,t.zoom),t.near!==void 0&&this.setNear(r,t.near),t.fov!==void 0&&r==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},T1=new dt,Vpt=new dt;function yte(e){let t=!1;return e.scene.objects.traverse((r,i)=>{var n;((n=i.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var mb=class extends jw{constructor(e,t,r){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Wt,this.onAfterRender=(i,n,a,o,s,l)=>{super.onAfterRender(i,n,a,o,s,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var i;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let n=0;n<this.children.length;n++){let a=this.children[n];a instanceof mb&&a.dataPatched.visible===!0&&a.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let a=this.children[n];if(a instanceof ho&&a.dataPatched.visible===!0&&((i=a.geometry.attributes.position)==null?void 0:i.count)>0&&a.geometry.drawRange.count>0&&a.booleanMeshSetAddress!==0){T1.multiplyMatrices(a.hiddenMatrix,a.matrix);try{if(a.booleanMeshSetAddress===-1){if((a.geometry.index??a.geometry.getAttribute("position")).count/3<15e5&&(a.booleanMeshSetAddress=bm.getMeshSet(a.geometry,e===!0,t)),a.booleanMeshSetAddress===-1)return;bm.transformMeshSet(a.booleanMeshSetAddress,T1),a.booleanMatrixInvOld.copy(T1).invert(),a.booleanWasTransformed=!1}else a instanceof mb&&a.needsTransformForDownstream===!0?(bm.transformMeshSet(a.booleanMeshSetAddress,T1),a.needsTransformForDownstream=!1):a.booleanWasTransformed===!0&&(bm.transformMeshSet(a.booleanMeshSetAddress,Vpt.multiplyMatrices(T1,a.booleanMatrixInvOld)),a.booleanMatrixInvOld.copy(T1).invert(),a.booleanWasTransformed=!1)}catch(o){console.error(o),a.booleanMeshSetAddress=0,a.geometry.userData.booleanOperationDidFail=!0;continue}bm.hasOpenEdges(a.booleanMeshSetAddress)===!1||n===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(a.booleanMeshSetAddress),a.geometry.userData.booleanOperationDidFail=!1):a.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Pt([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return bm.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new Wt,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=bm.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,uG(this),cG(this)}dispose(){super.dispose(),this.geometry.dispose()}},Ck;(e=>{function t(r){return Vr.is(r)&&r instanceof yP}e.is=t})(Ck||(Ck={}));var hG=(e,t)=>class extends zw(e,t){updateState_Light(r,i){this.updateState_Entity(r,i),r.color!==void 0&&(this.color=i.shared.color(r.color)),r.intensity!==void 0&&(this.intensity=r.intensity),r.depth!==void 0&&(this.shadow.camera.far=r.depth,this.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}},gf=e=>e instanceof ho,zm=e=>e!==null&&e instanceof mb,kpt=e=>e instanceof Ua,qpt=e=>Ck.is(e),Ek=e=>Sk.is(e),Wpt=new k(1,1,1),bte=new k,Gpt=new k,_te=new ur,MP=class extends CP(RZe){constructor(e,t=15){super(t),this.object=e,this.dummy=new Im,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=this.dummy.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){EP(this.object,MP.geometryHelper,e,t,!1,this.dummy)}update(){}updateMatrix(){}updateMatrixWorld(e){this.object.matrixWorld.decompose(bte,_te,Gpt),this.matrix.compose(bte,_te,Wpt),super.updateMatrixWorld(e)}updateWorldMatrix(e,t){}},C_=class extends zw(Im,MP){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&Object.keys(e).length===1&&t.scene.reloadSplats()}},zE=class extends zw(Im,MP){constructor(e,t,r){super(),this.super_Entity(e,t),this.context=r,this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},_Se={RED:0,GREEN:1},PP="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Hpt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;uniform vec4 kernel64[32];varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;}}`,pO=class extends qr{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new lt(null),kernel16:new lt(null),inputBuffer:new lt(null),cocBuffer:new lt(null),texelSize:new lt(new ze),scale:new lt(1)},blending:Cn,depthWrite:!1,depthTest:!1,fragmentShader:Hpt,vertexShader:PP}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),i=0,n=0;for(let s=0;s<80;++s){let l=s*e,u=Math.sqrt(s)/Math.sqrt(80),c=u*Math.cos(l),d=u*Math.sin(l);s%5===0?(r[n++]=c,r[n++]=d):(t[i++]=c,t[i++]=d)}let a=[],o=[];for(let s=0;s<128;)a.push(new hr(t[s++],t[s++],t[s++],t[s++]));for(let s=0;s<32;)o.push(new hr(r[s++],r[s++],r[s++],r[s++]));this.uniforms.kernel64.value=a,this.uniforms.kernel16.value=o}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function wte(e,t,r){return e*(t-r)-t}function Mk(e,t,r){return Math.min(Math.max((e+t)/(t-r),0),1)}var $pt=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,Xpt=class extends qr{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new lt(null),focusDistance:new lt(0),focusRange:new lt(0),cameraNear:new lt(.3),cameraFar:new lt(1e3)},blending:Cn,depthWrite:!1,depthTest:!1,fragmentShader:$pt,vertexShader:PP}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Zm){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-wte(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=Mk(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-wte(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=Mk(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Ia?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Ypt=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,Kpt="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",xte=class extends qr{constructor(e=new ze){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new lt(null),texelSize:new lt(new ze),halfTexelSize:new lt(new ze),kernel:new lt(0),scale:new lt(1)},blending:Cn,depthWrite:!1,depthTest:!1,fragmentShader:Ypt,vertexShader:Kpt}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},Qpt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,Jpt=class extends qr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new lt(null),opacity:new lt(1)},blending:Cn,depthWrite:!1,depthTest:!1,fragmentShader:Qpt,vertexShader:PP}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},Zpt=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,emt=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,gI={COLOR:2},tmt={DISABLED:0},rmt=class extends qr{constructor(e=new ze,t=gI.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:bw.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new lt(null),depthBuffer:new lt(null),predicationBuffer:new lt(null),texelSize:new lt(e)},blending:Cn,depthWrite:!1,depthTest:!1,fragmentShader:Zpt,vertexShader:emt}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Zm){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},imt=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,nmt="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",vl={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Pk=class extends qr{constructor(e,t,r,i,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:bw.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new lt(null),depthBuffer:new lt(null),resolution:new lt(new ze),texelSize:new lt(new ze),cameraNear:new lt(.3),cameraFar:new lt(1e3),aspect:new lt(1),time:new lt(0)},blending:Cn,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.adoptCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Zm){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=imt.replace(vl.FRAGMENT_HEAD,e.get(vl.FRAGMENT_HEAD)).replace(vl.FRAGMENT_MAIN_UV,e.get(vl.FRAGMENT_MAIN_UV)).replace(vl.FRAGMENT_MAIN_IMAGE,e.get(vl.FRAGMENT_MAIN_IMAGE)),this.vertexShader=nmt.replace(vl.VERTEX_HEAD,e.get(vl.VERTEX_HEAD)).replace(vl.VERTEX_MAIN_SUPPORT,e.get(vl.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Ia?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return vl}},amt=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,omt=class extends qr{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:bw.replace(/\D+/g,"")},uniforms:{inputBuffer:new lt(null),threshold:new lt(0),smoothing:new lt(1),range:new lt(null)},blending:Cn,depthWrite:!1,depthTest:!1,fragmentShader:amt,vertexShader:PP}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},smt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,wSe={DISCARD:0,MULTIPLY:1},lmt=class extends qr{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new lt(e),inputBuffer:new lt(null),strength:new lt(1)},blending:Cn,depthWrite:!1,depthTest:!1,fragmentShader:smt,vertexShader:PP}),this.toneMapped=!1,this.setColorChannel(_Se.RED),this.setMaskFunction(wSe.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Va&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},umt=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,cmt="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",dmt=class extends qr{constructor(e=new ze,t=new ze){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new lt(null),searchTexture:new lt(null),areaTexture:new lt(null),resolution:new lt(t),texelSize:new lt(e)},blending:Cn,depthWrite:!1,depthTest:!1,fragmentShader:umt,vertexShader:cmt}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.resolution.value.set(e,t)}},hmt=new Ov,Rg=null;function fmt(){if(Rg===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);Rg=new Wt,Rg.setAttribute!==void 0?(Rg.setAttribute("position",new tr(e,3)),Rg.setAttribute("uv",new tr(t,2))):(Rg.addAttribute("position",new tr(e,3)),Rg.addAttribute("uv",new tr(t,2)))}return Rg}var fo=class{constructor(e="Pass",t=new Io,r=hmt){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Ci(fmt(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Io),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Zm){}render(e,t,r,i,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof Io||t===this.renderer)continue;this[e].dispose()}}}},Tk=class extends fo{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new Jpt,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new kr(1,1,{minFilter:Ar,magFilter:Ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,i,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==Va?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===Er&&(this.renderTarget.texture.encoding=Er))}},pmt=class extends fo{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,i,n){let a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},zB=new er,fG=class extends fo{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,i,n){let a=this.overrideClearColor,o=this.overrideClearAlpha,s=e.getClearAlpha(),l=a!==null,u=o>=0;l?(zB.copy(e.getClearColor(zB)),e.setClearColor(a,u?o:s)):u&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(zB,s):u&&e.setClearAlpha(s)}},Dg=-1,To=class extends xa{constructor(e,t=Dg,r=Dg,i=1){super(),this.resizable=e,this.base=new ze(1,1),this.preferred=new ze(t,r),this.target=this.preferred,this.s=i}get width(){let{base:e,preferred:t,scale:r}=this,i;return t.width!==Dg?i=t.width:t.height!==Dg?i=Math.round(t.height*(e.width/Math.max(e.height,1))):i=Math.round(e.width*r),i}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:r}=this,i;return t.height!==Dg?i=t.height:t.width!==Dg?i=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):i=Math.round(e.height*r),i}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Dg),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Dg}},BB=!1,Ste=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case Fa:r=this.materialsFlatShadedDoubleSide;break;case ea:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case Fa:r=this.materialsDoubleSide;break;case ea:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=Pf;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=ea,i}),this.materialsDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=Fa,i}),this.materialsFlatShaded=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=ea,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Fa,i})}}render(e,t,r){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,BB){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let a of n)a[0].material=a[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return BB}static set workaroundEnabled(e){BB=e}},mmt=class extends fo{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new fG,this.overrideMaterialManager=r===null?null:new Ste(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new Ste(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,i,n){let a=this.scene,o=this.camera,s=this.selection,l=o.layers.mask,u=a.background,c=e.shadowMap.autoUpdate,d=this.renderToScreen?null:t;s!==null&&o.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,a,o):e.render(a,o),o.layers.mask=l,a.background=u,e.shadowMap.autoUpdate=c}},Cte=class extends fo{constructor(e,t,{resolutionScale:r=1,width:i=To.AUTO_SIZE,height:n=To.AUTO_SIZE,renderTarget:a}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new mmt(e,t,new a_e({depthPacking:W1e}));let o=this.renderPass;o.skipShadowMapUpdate=!0,o.ignoreBackground=!0;let s=o.getClearPass();s.overrideClearColor=new er(16777215),s.overrideClearAlpha=1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new kr(1,1,{minFilter:Dr,magFilter:Dr,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new To(this,i,n,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}},$r={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},gmt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",vmt="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",ymt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",bmt="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",_mt="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",wmt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",xmt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Smt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Cmt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Emt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Mmt="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Pmt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Tmt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Amt="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Omt="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Rmt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Dmt="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Imt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",jmt=new Map([[$r.SKIP,null],[$r.ADD,gmt],[$r.ALPHA,vmt],[$r.AVERAGE,ymt],[$r.COLOR_BURN,bmt],[$r.COLOR_DODGE,_mt],[$r.DARKEN,wmt],[$r.DIFFERENCE,xmt],[$r.EXCLUSION,Smt],[$r.LIGHTEN,Cmt],[$r.MULTIPLY,Emt],[$r.DIVIDE,Mmt],[$r.NEGATION,Pmt],[$r.NORMAL,Tmt],[$r.OVERLAY,Amt],[$r.REFLECT,Omt],[$r.SCREEN,Rmt],[$r.SOFT_LIGHT,Dmt],[$r.SUBTRACT,Imt]]),zmt=class extends xa{constructor(e,t=1){super(),this.f=e,this.opacity=new lt(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return jmt.get(this.blendFunction)}},Mp={NONE:0,DEPTH:1,CONVOLUTION:2},Up=class extends xa{constructor(e,t,{attributes:r=Mp.NONE,blendFunction:i=$r.SCREEN,defines:n=new Map,uniforms:a=new Map,extensions:o=null,vertexShader:s=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=s,this.defines=n,this.uniforms=a,this.extensions=o,this.blendMode=new zmt(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Zm){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof Io||t===this.renderer)continue;this[e].dispose()}}}};function Ete(e,t,r){for(let i of t){let n="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),a=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let o of r.entries())o[1]!==null&&r.set(o[0],o[1].replace(a,n))}}function Bmt(e,t,r,i,n,a,o){let s=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=s.get("fragment")!==void 0&&/mainImage/.test(s.get("fragment")),u=s.get("fragment")!==void 0&&/mainUv/.test(s.get("fragment")),c=[],d=[],h=!1,f=!1;if(s.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(u&&(o&Mp.CONVOLUTION)!==0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!u)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let g=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,p=Pk.Section;if(u){let y=`	${e}MainUv(UV);
`;r.set(p.FRAGMENT_MAIN_UV,r.get(p.FRAGMENT_MAIN_UV)+y),h=!0}if(s.get("vertex")!==null&&/mainSupport/.test(s.get("vertex"))){let y=`	${e}MainSupport(`;y+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s.get("vertex"))?`vUv);
`:`);
`,r.set(p.VERTEX_MAIN_SUPPORT,r.get(p.VERTEX_MAIN_SUPPORT)+y),c=c.concat([...s.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(b=>b[1])),d=d.concat(c).concat([...s.get("vertex").matchAll(g)].map(b=>b[1]))}d=d.concat([...s.get("fragment").matchAll(g)].map(y=>y[1])),d=d.concat([...t.defines.keys()].map(y=>y.replace(/\([\w\s,]*\)/g,""))),d=d.concat([...t.uniforms.keys()]),t.uniforms.forEach((y,b)=>a.set(e+b.charAt(0).toUpperCase()+b.slice(1),y)),t.defines.forEach((y,b)=>n.set(e+b.charAt(0).toUpperCase()+b.slice(1),y)),Ete(e,d,n),Ete(e,d,s);let m=t.blendMode;if(i.set(m.blendFunction,m),l){let y=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,b=`${e}MainImage(color0, UV, `;(o&Mp.DEPTH)!==0&&y.test(s.get("fragment"))&&(b+="depth, ",f=!0),b+=`color1);
	`;let w=e+"BlendOpacity";a.set(w,m.opacity),b+=`color0 = blend${m.blendFunction}(color0, color1, ${w});

	`,r.set(p.FRAGMENT_MAIN_IMAGE,r.get(p.FRAGMENT_MAIN_IMAGE)+b),b=`uniform float ${w};

`,r.set(p.FRAGMENT_HEAD,r.get(p.FRAGMENT_HEAD)+b)}r.set(p.FRAGMENT_HEAD,r.get(p.FRAGMENT_HEAD)+s.get("fragment")+`
`),s.get("vertex")!==null&&r.set(p.VERTEX_HEAD,r.get(p.VERTEX_HEAD)+s.get("vertex")+`
`)}return{varyings:c,transformedUv:h,readDepth:f}}var e2=class extends fo{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new Pk(null,null,null,e),this.effects=t.sort((r,i)=>i.attributes-r.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=Pk.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),r=new Map,i=new Map,n=new Map,a=new Set,o=0,s=0,l=0,u=!1,c=!1;for(let h of this.effects)if(h.blendMode.blendFunction===$r.SKIP)l|=h.getAttributes()&Mp.DEPTH;else if((l&h.getAttributes()&Mp.CONVOLUTION)!==0)console.error("Convolution effects cannot be merged",h);else{l|=h.getAttributes();let f="e"+o++,g=Bmt(f,h,t,r,i,n,l);if(s+=g.varyings.length,u=u||g.transformedUv,c=c||g.readDepth,h.extensions!==null)for(let p of h.extensions)a.add(p)}let d=/\bblend\b/g;for(let h of r.values()){let f=h.getShaderCode().replace(d,`blend${h.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+f+`
`)}(l&Mp.DEPTH)!==0?(c&&t.set(e.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+t.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,u?(t.set(e.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+t.get(e.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")):i.set("UV","vUv"),t.forEach((h,f,g)=>g.set(f,h.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=s,this.skipRendering=o===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(a).setUniforms(n).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Zm){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,i,n){for(let a of this.effects)a.update(e,t,i);if(!this.skipRendering||this.renderToScreen){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,a.time+=i,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(let i of this.effects)i.initialize(e,t,r),i.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),r!==void 0&&r!==Va&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},Lmt=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],pG=class extends fo{constructor({resolutionScale:e=.5,width:t=To.AUTO_SIZE,height:r=To.AUTO_SIZE,kernelSize:i=vI.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new kr(1,1,{minFilter:Ar,magFilter:Ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new To(this,t,r,e);n.addEventListener("change",a=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new xte,this.ditheredBlurMaterial=new xte,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let a=this.scene,o=this.camera,s=this.renderTargetA,l=this.renderTargetB,u=Lmt[this.kernelSize],c=this.blurMaterial,d=t,h,f;for(this.fullscreenMaterial=c,h=0,f=u.length-1;h<f;++h){let g=(h&1)===0?s:l;c.kernel=u[h],c.inputBuffer=d.texture,e.setRenderTarget(g),e.render(a,o),d=g}this.dithering&&(c=this.ditheredBlurMaterial,this.fullscreenMaterial=c),c.kernel=u[h],c.inputBuffer=d.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(a,o)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height;this.renderTargetA.setSize(i,n),this.renderTargetB.setSize(i,n),this.blurMaterial.setSize(i,n),this.ditheredBlurMaterial.setSize(i,n)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==Va?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===Er&&(this.renderTargetA.texture.encoding=Er,this.renderTargetB.texture.encoding=Er))}static get AUTO_SIZE(){return To.AUTO_SIZE}},Fmt=class extends fo{constructor({width:e=To.AUTO_SIZE,height:t=To.AUTO_SIZE,renderTarget:r,luminanceRange:i,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new omt(n,i),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new kr(1,1,{minFilter:Ar,magFilter:Ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let a=this.resolution=new To(this,e,t);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,i,n){let a=this.fullscreenMaterial;a.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==Va&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Nmt=class extends fo{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new fG(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,i,n){let a=e.getContext(),o=e.state.buffers,s=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,d=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.stencil.setFunc(a.ALWAYS,c,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(r),e.render(s,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(a.EQUAL,1,4294967295),o.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.stencil.setLocked(!0)}},Ns=class extends fo{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,r,i,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){r!==void 0&&r!==Va&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},LB=1/1e3,Umt=1e3,Vmt=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*LB}getFixedDelta(){return this.fixedDelta*LB}setFixedDelta(e){return this.fixedDelta=e*Umt,this}getElapsed(){return this.elapsed*LB}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},vI={MEDIUM:2,LARGE:3,HUGE:5},kmt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,qmt=class extends Up{constructor({blendFunction:e=$r.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:i=.5,intensity:n=1,width:a=To.AUTO_SIZE,height:o=To.AUTO_SIZE,kernelSize:s=vI.LARGE}={}){super("BloomEffect",kmt,{blendFunction:e,uniforms:new Map([["map",new lt(null)],["intensity",new lt(n)]])}),this.renderTarget=new kr(1,1,{minFilter:Ar,magFilter:Ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new Fmt({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new pG({resolutionScale:i,width:a,height:o,kernelSize:s});let l=this.blurPass.getResolution();l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(e,t,r){this.blurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e.outputEncoding===Er&&(this.renderTarget.texture.encoding=Er))}},Wmt="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",Gmt=class extends Up{constructor({blendFunction:e=$r.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",Wmt,{blendFunction:e,uniforms:new Map([["brightness",new lt(t)],["contrast",new lt(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},Hmt="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",$mt=class extends Up{constructor(e=$r.NORMAL){super("ColorAverageEffect",Hmt,{blendFunction:e})}},Xmt="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",Ymt="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",Kmt=class extends Up{constructor({blendFunction:e=$r.NORMAL,offset:t=new ze(.001,5e-4)}={}){super("ChromaticAberrationEffect",Xmt,{vertexShader:Ymt,blendFunction:e,attributes:Mp.CONVOLUTION,uniforms:new Map([["offset",new lt(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},Qmt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,Jmt=class extends Up{constructor(e,{blendFunction:t=$r.NORMAL,worldFocusDistance:r,worldFocusRange:i,focusDistance:n=0,focalLength:a=.1,focusRange:o=a,bokehScale:s=1,width:l=To.AUTO_SIZE,height:u=To.AUTO_SIZE}={}){super("DepthOfFieldEffect",Qmt,{blendFunction:t,attributes:Mp.DEPTH,uniforms:new Map([["nearColorBuffer",new lt(null)],["farColorBuffer",new lt(null)],["nearCoCBuffer",new lt(null)],["scale",new lt(1)]])}),this.camera=e,this.renderTarget=new kr(1,1,{minFilter:Ar,magFilter:Ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Ns(new Xpt(e));let c=this.cocMaterial;c.focusDistance=n,c.focusRange=o,r!==void 0&&(c.worldFocusDistance=r),i!==void 0&&(c.worldFocusRange=i),this.blurPass=new pG({kernelSize:vI.MEDIUM,width:l,height:u});let d=this.blurPass.getResolution();d.addEventListener("change",f=>this.setSize(d.getBaseWidth(),d.getBaseHeight())),this.maskPass=new Ns(new lmt(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=wSe.MULTIPLY,h.colorChannel=_Se.GREEN,this.bokehNearBasePass=new Ns(new pO(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Ns(new pO(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Ns(new pO(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Ns(new pO(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=s}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of t)r.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,r=t.position.distanceTo(e);return Mk(-r,t.near,t.far)}setDepthTexture(e,t=Zm){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,r){let i=this.renderTarget,n=this.renderTargetCoC,a=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){let s=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=s}this.cocPass.render(e,null,n),this.blurPass.render(e,n,a),this.maskPass.render(e,t,o),this.bokehFarBasePass.render(e,o,i),this.bokehFarFillPass.render(e,i,this.renderTargetFar),this.bokehNearBasePass.render(e,t,i),this.bokehNearFillPass.render(e,i,this.renderTargetNear)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height,a=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];a.push(this.renderTargetCoC,this.renderTargetMasked),a.forEach(o=>o.setSize(e,t)),a=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],a.forEach(o=>o.setSize(i,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(o=>o.fullscreenMaterial.setSize(i,n))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,r)),this.blurPass.initialize(e,t,Va),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,e.outputEncoding===Er&&(this.renderTarget.texture.encoding=Er,this.renderTargetNear.texture.encoding=Er,this.renderTargetFar.texture.encoding=Er,this.renderTargetMasked.texture.encoding=Er))}};new k;new dt;var Zmt="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",egt=class extends Up{constructor({blendFunction:e=$r.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",Zmt,{blendFunction:e,uniforms:new Map([["hue",new lt(new k)],["saturation",new lt(r)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new er;var tgt=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,rgt=class extends Up{constructor({blendFunction:e=$r.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",tgt,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},igt="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",ngt=class extends Up{constructor(e=30){super("PixelationEffect",igt,{uniforms:new Map([["active",new lt(!1)],["d",new lt(new ze)]])}),this.resolution=new ze,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new k;new k;var Mte="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",Pte="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",agt="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",ogt="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",P0={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},xSe=class extends Up{constructor({preset:e=P0.MEDIUM,edgeDetectionMode:t=gI.COLOR,predicationMode:r=tmt.DISABLED}={}){super("SMAAEffect",agt,{vertexShader:ogt,blendFunction:$r.NORMAL,attributes:Mp.CONVOLUTION|Mp.DEPTH,uniforms:new Map([["weightMap",new lt(null)]])});let i,n;arguments.length>1&&(i=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new kr(1,1,{minFilter:Ar,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new fG(!0,!1,!1),this.clearPass.overrideClearColor=new er(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Ns(new rmt),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new Ns(new dmt);let a=new C_e;a.onLoad=()=>{let o=new Vi(i);o.name="SMAA.Search",o.magFilter=Dr,o.minFilter=Dr,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0,this.weightsMaterial.searchTexture=o;let s=new Vi(n);s.name="SMAA.Area",s.magFilter=Ar,s.minFilter=Ar,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!1,this.weightsMaterial.areaTexture=s,this.dispatchEvent({type:"load"})},a.itemStart("search"),a.itemStart("area"),i!==void 0&&n!==void 0?(a.itemEnd("search"),a.itemEnd("area")):typeof Image<"u"&&(i=new Image,n=new Image,i.addEventListener("load",()=>a.itemEnd("search")),n.addEventListener("load",()=>a.itemEnd("area")),i.src=Mte,n.src=Pte),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case P0.LOW:t.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case P0.MEDIUM:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case P0.HIGH:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case P0.ULTRA:t.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break}}setDepthTexture(e,t=Zm){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return Mte}static get areaImageDataURL(){return Pte}},sgt=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,mO={DEFAULT:0,ESKIL:1},lgt=class extends Up{constructor({blendFunction:e=$r.NORMAL,technique:t=mO.DEFAULT,eskil:r=!1,offset:i=.5,darkness:n=.5}={}){super("VignetteEffect",sgt,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new lt(i)],["darkness",new lt(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===mO.ESKIL}set eskil(e){this.technique=e?mO.ESKIL:mO.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},eg=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=$r.NORMAL}},ugt=class extends eg{constructor(){super(qmt),this.blendFunction=$r.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},cgt=class extends eg{constructor(){super(Gmt)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},dgt=class extends eg{constructor(){super(Kmt),this.effect.offset=new ze(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},hgt=class extends eg{constructor(){super($mt)}},fgt=class extends eg{constructor(){super(egt),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},pgt=class extends eg{constructor(){super(rgt),this.blendFunction=$r.OVERLAY}},mgt=class extends eg{constructor(){super(lgt)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},ggt=class extends eg{constructor(e){super(Jmt)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e/2e3}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=this.isPerspectiveCamera?e/2e3:(e+992)/2e3}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}setCamera(e){let t=!1;(e.isPerspectiveCamera&&this.isPerspectiveCamera===!1||!e.isPerspectiveCamera&&this.isPerspectiveCamera===!0)&&(t=!0),e.isPerspectiveCamera?(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e.perspCamera),this.isPerspectiveCamera=!0):(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e),this.isPerspectiveCamera=!1),t&&this.effect.setChanged()}},vgt=class extends eg{constructor(){super(ngt)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},ygt=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,bgt=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,_gt=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,wgt=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,Ak=class extends qr{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new lt(null)},blending:Cn,depthWrite:!1,depthTest:!1,vertexShader:_gt,fragmentShader:wgt})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},xgt=class extends fo{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new Ak,this.resolutionVector=new ze,this.resolveMaterial=new qr({name:"TAAResolveMaterial",uniforms:{inputBuffer:new lt(null),historyBuffer:new lt(null),velocityBuffer:new lt(null),depthBuffer:new lt(null),resolution:new lt(new ze)},blending:Cn,depthWrite:!1,depthTest:!1,vertexShader:ygt,fragmentShader:bgt}),this.historyRenderTarget=new kr(1024,1024,{minFilter:Ar,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new kr(1024,1024,{minFilter:Ar,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let r=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(r),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},Sgt=class extends fo{constructor(e,t,r){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new Cte(e,t,{renderTarget:r.transmissionDepthTarget}),this.passThroughMaterial=new Ak,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new Ak,this.depthPass=new Cte(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,r){let i=this.camera.layers.mask,n=e;n.setRenderTarget(n.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],n.clear(),n.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,r),n.shadowMap.needsUpdate=!1,n.shadowMap.autoUpdate=!1;let a=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(a),e.render(this.splineScene,this.camera),this.camera.layers.mask=i}},Tte=new Io,Cgt=new qr({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),Ok=class extends fo{constructor(e,t,r){super("OpaquePass",t??Tte,r),this.MRTCompatible=!0,this.originalMaterials=[],this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??Tte}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.length=0,this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof ho&&(this.originalMaterials.push([i,i.material]),i.material=Cgt)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let r=this.renderToScreen?null:t;e.setRenderTarget(r),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach(i=>{i[0].material=i[1]})}},Egt=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:n=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new Tk,this.depthTexture=null,this.timer=new Vmt,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,r,n,i,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,r,n,i,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,r,n,i,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,e!==null){let r=e.getSize(new ze),i=((t=e.getContext().getContextAttributes())==null?void 0:t.alpha)??!1,n=this.inputBuffer.texture[0].type;n===Va&&e.outputEncoding===Er&&(this.inputBuffer.texture[0].encoding=Er,this.outputBuffer.texture[0].encoding=Er,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(r.width,r.height,!1);for(let a of this.passes)a.initialize(e,i,n)}}replaceRenderer(e,t=!0){let r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){let e=this.depthTexture=new G_(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.stencilBuffer?(e.format=cb,e.type=Y0):e.type=Rm,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i,n,a){let o=this.renderer,s=o===null?new ze:o.getDrawingBufferSize(new ze),l={minFilter:Ar,magFilter:Ar,wrapS:Di,wrapT:Di,stencilBuffer:t,depthBuffer:e},u;return i>0?(u=new kr(s.width,s.height,l),u.samples=i):(n?(u=new Q1e(s.width,s.height,2,l),u.texture[1].type=Gm):u=new kr(s.width,s.height,l),u.depthTexture=new G_(2048,2048),u.depthTexture.type=ci),r===Va&&o!==null&&o.outputEncoding===Er&&(Array.isArray(u.texture)?u.texture.forEach(c=>c.encoding=Er):u.texture.encoding=Er),Array.isArray(u.texture)?u.texture.forEach((c,d)=>{c.name=`EffectComposer.Buffer ${n} ${d}`,c.generateMipmaps=!1}):(u.texture.name=`EffectComposer.Buffer ${n}`,u.texture.generateMipmaps=!1),u.name=a,u}addPass(e,t){var s;let r=this.passes,i=this.renderer,n=i.getDrawingBufferSize(new ze),a=((s=i.getContext().getContextAttributes())==null?void 0:s.alpha)??!1,o;if(e.MRTCompatible&&(o=this.inputBuffer.texture[0].type),e.MRTCompatible||(o=this.inputBuffer.texture.type),e.setRenderer(i),e.setSize(n.width,n.height),e.initialize(i,a,o),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let i=(n,a)=>n||a.needsDepthTexture;t.reduce(i,!1)||e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null)}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,i=this.inputBuffer,n=this.outputBuffer,a=this.inputBufferSingle,o=this.outputBufferSingle,s=!1,l,u,c,d;e===void 0&&(e=this.timer.update().getDelta());for(let h of this.passes)h.enabled&&(h.MRTCompatible?h.render(t,i,n,e,s):h.render(t,a,o,e,s),h.needsSwap&&(s&&(r.renderToScreen=h.renderToScreen,l=t.getContext(),u=t.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),r.render(t,i,n,e,s),u.setFunc(l.EQUAL,1,4294967295)),c=i,d=a,i=n,a=o,n=c,o=d),h instanceof Nmt?s=!0:h instanceof pmt&&(s=!1))}setSize(e,t,r){let i=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let a=i.getSize(new ze);e=a.width,t=a.height}i.setSize(e,t,r);let n=i.getDrawingBufferSize(new ze);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height),this.inputBufferSingle.setSize(n.width,n.height),this.outputBufferSingle.setSize(n.width,n.height);for(let a of this.passes)a.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Mgt=new qr({name:"CombineMaterial",uniforms:{inputBufferA:new lt(null),inputBufferB:new lt(null)},blending:Cn,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),Pgt=class extends fo{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=Mgt,this.helperPass=new Ok(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new Ok(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new xSe({preset:P0.LOW,edgeDetectionMode:gI.COLOR});this.effectPass=new e2(this.camera,t),this.rt=new kr(10,10,{minFilter:Ar,magFilter:Ar,wrapS:Di,wrapT:Di,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,r){this.rt.depthTexture=t.depthTexture;let i=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,r),this.fullscreenMaterial.uniforms.inputBufferA.value=r.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(i),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},Tgt=`#define GLSLIFY 1
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,Agt=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,Ogt=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,Rgt=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,Dgt=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,Igt=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,eS=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],jgt=new qr({vertexShader:Tgt,fragmentShader:Agt}),A1=new qr({vertexShader:Dgt,fragmentShader:Igt,uniforms:{texture_ao_lrez:new lt(null),texture_depth_lrez:new lt(null),texture_depth_hrez:new lt(null),near:new lt(null),far:new lt(null)}}),zgt=class extends fo{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let r=1024,i=1024;this.gBuffer=new kr(r,i,{type:wP?Gm:ci,depthTexture:new G_(r,i),minFilter:Ar,magFilter:Ar}),this.depthBufferHighRes=new kr(r,i,{depthTexture:new G_(r,i)}),this.aoBuffer=new kr(r,i,{minFilter:Ar,magFilter:Ar}),this.splineScene=e,this.splineCamera=t;let n=new Float32Array(eS.length*2);for(let o=0;o<eS.length;o++){let s=o*2;n[s+0]=eS[o][0],n[s+1]=eS[o][1]}this.blueNoiseInDiskTexture=new so(n,eS.length,1,nD,ci),this.blueNoiseInDiskTexture.wrapS=Om,this.blueNoiseInDiskTexture.wrapT=Om,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new qr({vertexShader:Ogt,fragmentShader:Rgt,uniforms:{near:new lt(null),far:new lt(null),fov:new lt(null),proj_info:new lt(new hr),is_ortho:new lt(!1),resolution:new lt(new ze),radius_of_influence:new lt(8),radius_in_screen_space:new lt(1),exponent:new lt(1),ao_color:new lt(new k),bias:new lt(.5),texture_depth:new lt(null),texture_normals:new lt(null),texture_blue_noise:new lt(null),texture_blue_noise_in_disk:new lt(this.blueNoiseInDiskTexture),frame_index:new lt(0),fog_enabled:new lt(!1),fog_near:new lt(1),fog_far:new lt(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new kr(r,i,{minFilter:Ar,magFilter:Ar,wrapS:Di,wrapT:Di,depthBuffer:!1,type:ci});let a=new xSe({preset:P0.ULTRA,edgeDetectionMode:gI.COLOR});this.effectPass=new e2(this.camera,a)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let r=this._runHalfRes?.5:1,i=e*r,n=t*r;this.gBuffer.setSize(i,n),this.aoBuffer.setSize(i,n),this.hbaoMaterial.uniforms.resolution.value.set(i,n),this.aaBuffer.setSize(i,n),this.effectPass.setSize(i,n)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}setDepthTexture(e){this.depthBufferHighRes.depthTexture=e,A1.uniforms.texture_depth_hrez.value=e,A1.needsUpdate=!0}render(e,t,r){this.splineScene.overrideMaterial=jgt;let i=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=i,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let n=this.splineCamera.perspCamera.projectionMatrix.elements,a=2/n[0],o=2/n[5],s=-(1-n[8])/n[0],l=-(1+n[9])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,o,s,l);let u=this.splineCamera.perspCamera.fov*(Math.PI/180),c=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(u*.5)*2),d=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=d,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let n=this.splineCamera.orthoCamera.projectionMatrix.elements,a=2/n[0],o=2/n[5],s=-(1+n[12])/n[0],l=-(1-n[13])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(a,o,s,l);let u=.5*(this.hbaoMaterial.uniforms.resolution.value.y/o),c=this.hbaoMaterial.uniforms.radius_of_influence.value*u;this.hbaoMaterial.uniforms.radius_in_screen_space.value=c,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=A1,A1.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,A1.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,A1.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},Bgt=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Lgt=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,Fgt=class extends Ns{constructor(){super(new qr({vertexShader:Bgt,fragmentShader:Lgt,uniforms:{tInput:new lt(null),tMap:new lt(null),uResolution:new lt(new ze),uSize:new lt(new ze),uCoords:new lt(new ze),uScale:new lt(1),uSceneColor:new lt(new er(16711680)),uDPR:new lt(1),uCurrent:new lt(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},Ngt=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ugt=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,Vgt=[],kgt=class extends Ns{constructor(){super(new qr({vertexShader:Ngt,fragmentShader:Ugt,uniforms:{toScene:new lt(null),fromScene:new lt(null),uResolution:new lt(new ze),uDPR:new lt(1),mixRatio:new lt(0),threshold:new lt(.1),useTexture:new lt(0),tMixTexture:{value:Vgt[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},qgt=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Wgt=`
uniform sampler2D inputBuffer;
uniform sampler2D blurredInputBuffer;
uniform sampler2D overlay;
uniform float blurIntensity;

uniform vec2 uResolution;
uniform float uDPR;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( overlay, screenUv );
	vec4 texel2 = texture2D( inputBuffer, screenUv );
	vec4 texel3 = texture2D( blurredInputBuffer, screenUv );

	float blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;
    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );
}
`,Ggt=class extends Ns{constructor(){super(new qr({vertexShader:qgt,fragmentShader:Wgt,uniforms:{inputBuffer:new lt(null),blurredInputBuffer:new lt(null),overlay:new lt(null),uResolution:new lt(new ze),uDPR:new lt(1),blurIntensity:new lt(0)}})),this._blurEnabled=!1,this.blurTarget=new kr(1,1,{minFilter:Ar,magFilter:Ar,wrapS:Di,wrapT:Di}),this.blurPass=new pG({width:window.innerWidth,height:window.innerHeight,kernelSize:vI.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,t,r=1){this.uniforms.uResolution.value.set(e,t),this.uniforms.uDPR.value=r,this.blurPass.setSize(e,t),this.blurTarget.setSize(e,t),this.blurPass.setSize(e,t)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let t=e.frame;if(t){let r=t.data.backgroundBlur,i=r.radius;this._blurEnabled=r.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=i/3}}render(e,t,r,i,n){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,t,this.blurTarget,i,n)),super.render(e,t,r,i,n)}},Hgt=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$gt=`
uniform sampler2D tInput;
uniform sampler2D tOverlayImage;
varying vec2 vUv;
uniform vec2 uResolution;
uniform vec2 uRightBottom;
uniform vec2 uImageSize;
uniform float uScale;
uniform float uDPR;

vec3 blendNormal(vec3 base, vec3 blend) {
	return blend;
}

vec3 blendNormal(vec3 base, vec3 blend, float opacity) {
	return (blendNormal(base, blend) * opacity + base * (1.0 - opacity));
}

vec4 drawFixedSizeImage(sampler2D image, vec2 screenUV, vec2 imageSize, vec2 imageCoords, vec2 screenSize, float dpr) {
	vec2 uv = (screenUV * screenSize * dpr - imageCoords) / (imageSize * dpr);
	if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
		return vec4(0.0);
	}
	return texture2D(image, uv);
}

void main() {
    vec2 screenUV = gl_FragCoord.xy / (uResolution.xy * uDPR);
	vec2 imageCoords = vec2(uResolution.x * uDPR - uImageSize.x * uScale * uDPR - uRightBottom.x * uDPR, uRightBottom.y * uDPR);
    vec4 background = texture2D(tInput, screenUV);
    vec4 image = drawFixedSizeImage(tOverlayImage, screenUV, uImageSize * uScale, imageCoords, uResolution, uDPR);
    gl_FragColor = vec4(blendNormal(background.rgb, image.rgb, image.a), max(background.a, image.a));
}
`,Xgt=class extends Ns{constructor(){super(new qr({vertexShader:Hgt,fragmentShader:$gt,uniforms:{tInput:new lt(null),tOverlayImage:new lt(null),uResolution:new lt(new ze),uImageSize:new lt(new ze),uRightBottom:new lt(new ze(20,20)),uScale:new lt(.25),uDPR:new lt(1)}}),"tInput")}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tOverlayImage.value}set texture(e){this.uniforms.tOverlayImage.value=e,this.uniforms.uImageSize.value.set(e.image.width,e.image.height)}};function Ate(e,t){return t&&t.enabled&&e.push(t.effect),e}var Ygt=e=>Object.values($r).includes(e)?e:$r.NORMAL,Kgt=class extends xa{constructor(e,t){super(),this._needsDOFResize=t,this.postprocessingState=LD.defaultData,this._scene=new Io,this._camera=new Ua,this.effects=new Map,this.blueNoiseTexture=new so,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new pZe,this.renderer=e,this.debug=!1,this.effects.set("bloom",new ugt),this.effects.set("chromaticAberration",new dgt),this.effects.set("vignette",new mgt),this.effects.set("noise",new pgt),this.effects.set("colorAverage",new hgt),this.effects.set("hueSaturation",new fgt),this.effects.set("brightnessContrast",new cgt),this.effects.set("depthOfField",new ggt),this.effects.set("pixelation",new vgt),this.effectComposer=new Egt(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new Ok(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new Sgt(this.scene,this.camera,this.renderer),this.aoPass=new zgt(this.scene,this.camera),this.taaPass=new xgt,this.taaPass.renderToScreen=!1,this.helperPass=new Pgt(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new Fgt,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new Ggt,this.uiOverlayPass.enabled=!1,this.logoOverlayPass=new Xgt,this.logoOverlayPass.enabled=!1,this.sceneTransitionPass=new kgt,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){let t=this._camera!==e;this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),t&&this.transmissionPass.updatePasses(this.renderer),this.aoPass.setCamera(e),this.helperPass.setCamera(e),this.effects.get("depthOfField").setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let r=this.effectComposer.passes[t];if(r.enabled===!0&&!e&&this._renderToScreen){r.renderToScreen=!0,e=!0;continue}r.renderToScreen=!1}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new so(e,128,128),this.blueNoiseTexture.wrapS=Om,this.blueNoiseTexture.wrapT=Om,this.blueNoiseTexture.minFilter=Dr,this.blueNoiseTexture.magFilter=Dr,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,r,i,n,a,o,s){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=r,this.aoPass.aoColor=i,this.aoPass.fogEnabled=n,this.aoPass.fogNear=a,this.aoPass.fogFar=o,this.aoPass.runHalfRes!==!s&&(this.aoPass.runHalfRes=!s)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t,r;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let i=[this.effects.get("pixelation")].reduce(Ate,[]);i.length>0&&(this.uvEffectPass=new e2(this.camera,...i),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let n=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("depthOfField"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(Ate,[]);if(n.length>0&&(this.effectPass=new e2(this.camera,...n),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass),this._needsDOFResize&&((r=this.effects.get("depthOfField"))==null?void 0:r.enabled)&&window!==void 0)){let a=this.renderer.viewportWidth,o=this.renderer.viewportHeight;this.renderer.setSize(a-1,o-1),this.renderer.setSize(a,o)}}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.logoOverlayPass)}_initCopyPass(){if(this._savePass)return;let e=new ze;this.renderer.getDrawingBufferSize(e),this._rt=new kr(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Om,wrapT:Om}),this._rt.samples=0,this._savePass=new Tk(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new Tk(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}setWatermark(e){this.logoOverlayPass.enabled=e!==null,e&&(this.logoOverlayPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...r}=e,i=!1;t!==this.postprocessingState.enabled&&(i=!0);for(let n of Object.entries(r)){let a=n[1],o=this.effects.get(n[0]);if(o){o.enabled!==a.enabled&&(i=!0),o.enabled=a.enabled;for(let[s,l]of Object.entries(a))s==="blendFunction"?o.blendFunction=Ygt(l):o[s]=l}}this.postprocessingState=e,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,r,i){e instanceof hr?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,i),this.effectComposer.outputBuffer.scissor.set(e,t,r,i));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,r,i)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,r,i){e instanceof hr?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,i),this.effectComposer.outputBuffer.viewport.set(e,t,r,i))}resize(e,t,r){if(this.effectComposer.setSize(e,t,r),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},Qgt=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,Jgt=Tr.lights_fragment_begin,Zgt=Tr.shadowmask_pars_fragment,Ote=null,evt=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},tvt=(e="medium")=>{if(Ote===e)return!1;Ote=e;let t=evt(e);Tr.shadowmap_pars_fragment=Qgt(t);let r=Jgt.slice();r=r.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),r=r.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),Tr.lights_fragment_begin=r;let i=Zgt.slice();return i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),Tr.shadowmask_pars_fragment=i,!0},rvt=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;
#include <skinning_pars_vertex>
#include <morphtarget_pars_vertex>
	
void main()
{
#include <beginnormal_vertex>
#include <morphnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
vec3 transformed = vec3(position);
#include <morphtarget_vertex>
#include <skinning_vertex>

vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
}
`,ivt=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,FB=new qr({vertexShader:rvt,fragmentShader:ivt,uniforms:{depthContrast:{value:1}}}),Rte=new Vi,Dte=new ze,nvt=class extends o_e{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new ze,this.dummyCamera=new Ua,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(n=!0,a=!0,o=!0)=>{let s=this.getContext(),l=0;n&&(l|=s.COLOR_BUFFER_BIT),a&&(l|=s.DEPTH_BUFFER_BIT),o&&(l|=s.STENCIL_BUFFER_BIT),s.clear(l),s.clearBufferfv(s.COLOR,1,[0,0,0,1])},this.pipeline=new Kgt(this,(e==null?void 0:e.needsDOFResize)??!1),this.autoClear=!1;let t=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=eW,this.dummyCamera.matrixAutoUpdate=!1,this.domElement.removeAttribute("data-engine");let i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(n){console.warn(n)}this.setPixelRatio=n=>{this._pixelRatio!==n&&(this._pixelRatio=n,t(n))},this.setSize=(n,a,o=!0)=>{var s,l;(this.viewportWidth!==n||this.viewportHeight!==a)&&(this.viewportWidth=n,this.viewportHeight=a,r(n,a,o),(s=this.normalRenderTarget)==null||s.setSize(n*this._pixelRatio,a*this._pixelRatio),this._resizeTransmission(n,a),(l=this.transmissionDepthTarget)==null||l.setSize(n*this._pixelRatio/2,a*this._pixelRatio/2),this.pipeline.resize(n,a,o))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new kr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Ar,magFilter:Ar,wrapS:Di,wrapT:Di,depthBuffer:!1}))}_resizeTransmission(e,t){var r,i;(r=this.transmissionRenderTarget)==null||r.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(i=this.aoRenderTarget)==null||i.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return ir.transmissionLod.value===1}set hdTransmission(e){ir.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new kr(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:q_,magFilter:Ar,wrapS:Di,wrapT:Di,depthBuffer:!1}),this.transmissionDepthTarget=new kr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Dr,magFilter:Dr,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new kr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Dr,magFilter:Dr,type:ci,depthTexture:new G_(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,r){this.normalRenderTarget&&(this.setClearColor(0),r.layers.enable(8),r.layers.disable(0),r.layers.disable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),r instanceof Ua?FB.uniforms.depthContrast.value=(r.far-r.near)/1e4:FB.uniforms.depthContrast.value=1,t.overrideMaterial=FB,this.render(t,r),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?Lk:null,r.layers.enable(0),r.layers.enable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,r=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let i=t.height,n=t.width,a=this.viewportWidth/this.viewportHeight;n<i?n=i*a:i=n/a,this.dummyCamera.setViewplaneSize(n,i);for(let o=0;o<r;o++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:r=this.sceneHelpers,sceneHelpersOnTop:i=this.sceneHelpersOnTop,overrideTransmission:n=void 0,overrideNormal:a=void 0}={}){var h;let o=e instanceof xG?e.activePage:e,s=o.visible;o.visible=!0;let l=o.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(o.bgColor,o.bgColor.a),o.penumbraSizeArray.forEach((f,g)=>{ir.penumbraSize.value[g]=f}),ir.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?ir.resolution.value.set(this.resolution.x,this.resolution.y):ir.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),a!==void 0?(ir.normalRenderTarget.value=a,ir.normalRenderTargetDepth.value=Rte):l.needsNormal()&&(this.createNormalRenderTarget(),ir.normalRenderTarget.value=this.normalRenderTarget.texture,ir.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,o,t));let u=o.data.ao,c=u.occlusion;if(c&&(this.createAORenderTarget(),ir.aoRenderTarget.value=this.aoRenderTarget.texture),ir.aoEnabled.value=c,this.pipeline.setAmbientOcclusionParams(u.occlusion,u.radius,u.bias,o.aoColor,o.fog!==null,o.backupFog.near,o.backupFog.far,u.aoFullRes&&!wP),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&((h=o.uiCanvas)==null?void 0:h.enabled)&&o.uiCanvas.texture&&o.uiCanvas.texture.image.width>0){let f=this.getSize(Dte),g=this.getPixelRatio();(o.uiCanvas.width!==this.viewportWidth||o.uiCanvas.height!==this.viewportHeight||o.uiCanvas.dpr!==g)&&o.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight},g),o.uiCanvas.render(this),this.pipeline.uiOverlayPass.uiCanvas=o.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(f.x,f.y,g),this.pipeline.updateRenderToScreen()}else this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen();if(this.pipeline.logoOverlayPass.enabled){let f=this.getSize(Dte),g=this.getPixelRatio();this.pipeline.logoOverlayPass.uniforms.uResolution.value.set(f.x,f.y),this.pipeline.logoOverlayPass.uniforms.uDPR.value=g}let d=!1;if(n!==void 0)ir.transmissionRenderTarget.value=n,ir.transmissionRenderTargetDepth.value=Rte,this.pipeline.setTransmissionPassEnabled(!1);else{let f=l.needsTransmission();f&&(this.transmissionRenderTarget===void 0&&(d=!0),this.createTransmissionRenderTarget(),ir.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,ir.aspectRatio.value=$ht(this.viewportWidth,this.viewportHeight),ir.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(f)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=i,this.pipeline.scene=o,this.pipeline.camera=t,d&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==o.postprocessing&&(this.pipeline.updatePostprocessing(o.postprocessing),!r&&!i&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),l.shapeBlendIntances.forEach(f=>{f.onBeforeShadowPass(this)}),o.overrideMaterial=l.wireframeState?Lk:null,this.pipeline.render(),ir.frameIndex.value=(ir.frameIndex.value+1)%16,t instanceof Ua&&t.copyHistory(),o.visible=s}renderFromSceneForSceneTransitionPass(e,t,r){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=r,this.sceneTransitionTimeRemaining=r,this.pipeline.renderToScreen=!0;let i=this.pipeline.sceneTransitionPass.uniforms;i.uDPR.value=window.devicePixelRatio,i.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,r,i,n,a;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(r=this.transmissionDepthTarget)==null||r.dispose(),(i=this.normalRenderTarget)==null||i.dispose(),(a=(n=this.normalRenderTarget)==null?void 0:n.depthTexture)==null||a.dispose()}},SSe=class extends CP(OZe){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){EP(this.object,SSe.geometryHelper,e,t)}},CSe=class extends CP(AZe){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){EP(this.object,CSe.geometryHelper,e,t)}},Rk=class extends CP(TZe){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){EP(this.object,Rk.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=Rk._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,a=this.cone.material.length;n<a;n++)this.cone.material[n].color.set(i);else this.cone.material.color.set(i)}}},ESe=Rk;ESe._vector=new k;var MSe=class extends Im{constructor(){super(),this.caretIndex=0,this._caretVisibleAlpha=1,this._selectionVisibleAlpha=.3,this.current={start:0,end:void 0},this.matrixAutoUpdate=!1,this.caretMesh=new Ci(new Rp(1,1),new Hm({transparent:!0,opacity:0,side:Fa})),this.add(this.caretMesh),this.selectionMesh=new Ci(new Rp(1,1),new Hm({color:2857471,transparent:!0,depthTest:!1,depthWrite:!1,opacity:0,side:Fa})),this.add(this.selectionMesh),this.hide()}get caretHeight(){var e;return((e=this.object)==null?void 0:e.AD)??0}show(e){this.visible=!0,this.object=e,this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.y=-this.caretHeight*.5,this.setCaretPosition(this.caretIndex),this.update()}hide(){this.visible=!1}update(){if(this.object===void 0)return;this.updateHelperMatrix();let{depth:e}=this.object.geometry.userData.parameters;this.caretMesh.position.z=e,this.selectionMesh.position.z=e}updateHelperMatrix(){if(this.object===void 0)return;let e=this.object,t=e.parent;t!==null&&t.updateWorldMatrix(!0,!1),e.matrixAutoUpdate&&e.updateMatrix(),t!==null?(this.matrixWorld.multiplyMatrices(t.matrixWorld,e.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,e.matrix)):this.matrixWorld.multiplyMatrices(e.hiddenMatrix,e.matrix),this.matrix.copy(this.matrixWorld);for(let r of this.children)r.matrixWorld.copy(this.matrixWorld);e.updateWorldMatrix(!0,!0)}setCaretColor(e){let t=this.caretMesh.material;t.color.setRGB(e.r,e.g,e.b);let r=this._caretVisibleAlpha===t.opacity;this._caretVisibleAlpha=e.a,r&&(t.opacity=this._caretVisibleAlpha)}setSelectionColor(e){this.selectionMesh.material.color.setRGB(e.r,e.g,e.b)}setCaretPosition(e,t={}){if(this.object===void 0)return;this.caretIndex=e;let r=this.object.wrappedText,[i,n]=t2(r,e),[a,o]=e>0?t2(r,e-1):[null,null];(e>0&&r.length?r[a].charAt(o):null)===`
`&&(i++,n=0),this.current.start=e,this.current.end=void 0;let[s,l]=NB(this.object,i,n),{AD:u,descender:c}=this.object,d=c+u*.5,{width:h,height:f,depth:g}=this.object.geometry.userData.parameters,p=typeof h=="string"?0:h,m=typeof f=="string"?0:f;this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.set(s-p*.5,l+d+m*.5,g),this.hideSelectionMesh(),this.showCaretMesh()}setSelection(e,t){if(this.object===void 0)return;let r=this.object.wrappedText;this.current.start=e,this.current.end=t;let i=[],n=[],a=avt(r,e,t),{lineHeight:o,AD:s,descender:l}=this.object,u=l+s*.5-o*.5;for(let[m,y,b]of a)if(y!==b){let[w,x]=NB(this.object,m,y),[S,C]=NB(this.object,m,b);x+=u,C+=u,C+=o;let T=i.length/3;i.push(w,x,0),i.push(S,x,0),i.push(S,C,0),i.push(w,C,0),n.push(T+0,T+1,T+2),n.push(T+2,T+3,T+0)}let c=new Wt;c.setIndex(n),c.setAttribute("position",new Pt(i,3));let{width:d,height:h,depth:f}=this.object.geometry.userData.parameters,g=typeof d=="string"?0:d,p=typeof h=="string"?0:h;this.selectionMesh.geometry.dispose(),this.selectionMesh.geometry=c,this.selectionMesh.position.x=-g*.5,this.selectionMesh.position.y=p*.5,this.selectionMesh.position.z=f,this.showSelectionMesh(),this.hideCaretMesh()}getSelectionFromPosition(e,t,r="previous"){if(this.object===void 0||this.object.font===void 0)return;let i=this.object.wrappedText,n=i.length,a=this.object.lineHeight,o=n*a,{height:s,verticalAlign:l}=this.object.geometry.userData.parameters,u=typeof s=="string"?0:s,c=0;l===3?c=u-o:l===2&&(c=u*.5-o*.5);let d=Math.min(Math.floor(Math.max(Math.min(-t-c,o),0)/a),n-1),h=this.object.charCoords[d],f=this.object.charWidths[d],g=0,p=!1;if(r==="previous"){for(let m=0;m<h.length;m++)if(h[m][0]+f[m]*.5-e>0){g=m,p=!0;break}}else if(r==="closest"){let m=1/0;for(let y=0;y<h.length;y++){let b=h[y][0]+f[y]*.5,w=Math.abs(b-e);w<m&&(m=w,g=y,p=!0)}}else for(let m=0;m<h.length;m++){let y=h[m][0],b=h[m][0]+f[m];if(e>=y&&e<b){g=m,p=!0;break}}return p||(g=h.length),{index:this.getGlobalIndexFromLineAndCharIndexes(i,d,g),lineIndex:d,characterIndex:g}}getGlobalIndexFromLineAndCharIndexes(e,t,r){return e.slice(0,t).reduce((i,n)=>i+=n.length,0)+r}showSelectionMesh(){this.selectionMesh.material.opacity=this._selectionVisibleAlpha}hideSelectionMesh(){this.selectionMesh.material.opacity=0}showCaretMesh(){this.caretMesh.material.opacity=this._caretVisibleAlpha}hideCaretMesh(){this.caretMesh.material.opacity=0}};function NB(e,t,r){let{charCoords:i,charWidths:n,initialOffsetY:a,lineHeight:o}=e;if(i[t]&&i[t].length===0||i.length===0){let c=0,{horizontalAlign:d}=e.data.geometry,h=e.wrappedText,{width:f}=e.geometry.userData.parameters;return h.length===1&&h[0].length===0&&(d===3?c=f*.5:d===2&&(c=f)),[c,a-o*t]}let s=i[t];if(s===void 0||s.length===0)return[0,0];let[l,u]=s[Math.min(r,s.length-1)];return r>=s.length&&(l+=n[t][r-1]),[l,u]}function t2(e,t){var i;let r=0;for(let n=0;n<e.length;n++){let a=e[n],o=t-r;if(o<=a.length)return[n,o];r+=a.length}return[Math.max(0,e.length-1),((i=e[e.length-1])==null?void 0:i.length)??0]}function avt(e,t,r){let[i,n]=t2(e,t),[a,o]=t2(e,r),s=[];n>=e[i].length&&(i++,n=0);for(let l=i;l<=a;l++){let u=e[l],c=l===i?n:0,d=l===a?o:u.length;s.push([l,c,d])}return s}function ovt(e,t){let r=ga.fromHex(3223857),i=.8;for(let n of e.layers){if(n.data.type==="light"||n.data.type==="displace"||n.data.type==="fresnel"||n.data.type==="matcap"||n.data.type==="texture"||n.data.type==="toon"||n.data.type==="outline"||n.data.type==="transmission"||n.data.type==="noise")continue;let a=typeof n.data.alpha=="string"?Number(t.getVariable(n.data.alpha)):n.data.alpha;if(n.data.type==="color"&&a>.3){r=svt(n.data.color,t),i=a;break}else if((n.data.type==="depth"||n.data.type==="gradient")&&a>.3){let o=lvt(n.data);r={r:o[0],g:o[1],b:o[2]},i=typeof n.data.alpha=="string"?1:n.data.alpha;break}}return{...r,a:i}}function svt(e,t){return typeof e=="string"?t.data.colors[e]:e}function lvt(e){return e.colors[0]}function uvt(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var PSe=class extends hG(fZe,SSe){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let n=new gD(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof gD&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&uvt(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),r&&this.update()}},Ite=new k,jte=new k,zte=new ur,TSe=class extends hG(uZe,ESe){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=Ot.RAD2DEG*2*this.angle,i.aspect=1,i.near=100,i.far=2500;let n=new gD(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof gD&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),jte.setFromMatrixPosition(this.matrixWorld),zte.setFromRotationMatrix(this.matrixWorld),Ite.copy(this.up).applyQuaternion(zte).negate().multiplyScalar(this.distance),this.target.position.copy(jte).add(Ite),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}};function cvt(e){let t=(e[0][0]+e[1][1])/2,r=(e[0][0]-e[1][1])/2,i=(e[1][0]+e[0][1])/2,n=(e[1][0]-e[0][1])/2,a=Math.sqrt(t*t+n*n),o=Math.sqrt(r*r+i*i),s=a+o,l=a-o,u=Math.atan2(i,r),c=Math.atan2(n,t),d=(c-u)/2,h=(c+u)/2,f=[[Math.cos(h),Math.sin(h)],[-Math.sin(h),Math.cos(h)]],g=[[s,0],[0,l]],p=[[Math.cos(d),Math.sin(d)],[-Math.sin(d),Math.cos(d)]];return f[0][0]*=-1,f[0][1]*=-1,p[0][0]*=-1,p[1][0]*=-1,[f,g,p]}function fR(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]]]}function Bte(e){return[[e[0][0],e[1][0]],[e[0][1],e[1][1]]]}function dvt(e){let[t,r,i]=cvt(e),n=fR(t,Bte(i)),a=fR(fR(i,r),Bte(i)),o=Math.atan2(n[1][0],n[0][0]),s=[a[0][0],a[1][1]],l=[a[0][1]/a[1][1],a[1][0]/a[0][0]];return{rotation:o,scale:s,shear:l}}function hvt({rotation:e,scale:t,shear:r}){let i=Math.cos(e),n=Math.sin(e),a=[[i,-n],[n,i]],o=[[t[0],r[0]*t[1]],[r[1]*t[0],t[1]]],s=fR(a,o);return[s[0][0],s[1][0],s[0][1],s[1][1]]}var Qr;(e=>{function t(){return[1,0,0,0,1,0,0,0,1]}e.identity=t;function r(C,T=e.identity()){for(let M=0,A=C.length;M<A;M++)T[M]=C[M];return T}e.copy=r;function i(C,T,M,A,P,O){return e.setAbcdef(e.identity(),C,T,M,A,P,O)}e.create=i;function n(C,T,M,A,P,O,j){return C[0]=T,C[1]=A,C[2]=O,C[3]=M,C[4]=P,C[5]=j,C}e.setAbcdef=n;function a(C,T){let[M,A,P,O,j,D]=s(C),[I,q,$,X,N,Q]=s(T),F=I*M+q*P,L=I*A+q*O,Y=$*M+X*P,ae=$*A+X*O,re=N*M+Q*P+j,H=N*A+Q*O+D;return e.create(F,L,Y,ae,re,H)}e.append=a;function o(C,T){let[M,A,P,O,j,D]=s(C),[I,q,$,X,N,Q]=s(T),F=M,L=A,Y=P,ae=O;(I!==1||q!==0||$!==0||X!==1)&&(F=M*I+A*$,L=M*q+A*X,Y=P*I+O*$,ae=P*q+O*X);let re=j*I+D*$+N,H=j*q+D*X+Q;return e.create(F,L,Y,ae,re,H)}e.prepend=o;function s(C){return[C[0],C[3],C[1],C[4],C[2],C[5]]}e.getAbcdef=s;function l(C){let[T,M,A,P,O,j]=e.getAbcdef(C),D=T*P-M*A,I=P/D,q=-M/D,$=-A/D,X=T/D,N=(A*j-P*O)/D,Q=-(T*j-M*O)/D;return e.create(I,q,$,X,N,Q)}e.invert=l;function u([C,T],M){let[A,P,O,j,D,I]=e.getAbcdef(M);return[A*C+O*T+D,P*C+j*T+I]}e.apply=u;function c(C,T){let[M,A,P,O,j,D]=e.getAbcdef(T),I=1/(M*O+P*-A),[q,$]=C;return[O*I*q+-P*I*$+(D*P-j*O)*I,M*I*$+-A*I*q+(-D*M+j*A)*I]}e.applyInverse=c;function d(C,T,M=T){let[A,P,O,j,D,I]=e.getAbcdef(C);return e.setAbcdef(C,A*T,P*M,O*T,j*M,D*T,I*M),C}e.scale=d;function h(C,T){let M=Math.cos(T),A=Math.sin(T),[P,O,j,D,I,q]=e.getAbcdef(C);return e.setAbcdef(C,P*M-O*A,P*A+O*M,j*M-D*A,j*A+D*M,I*M-q*A,I*A+q*M),C}e.rotate=h;function f(C,T,M){let[A,P]=M,O=e.translate(C,-A,-P);return O=e.rotate(O,T),O=e.translate(O,A,P),O}e.rotateAround=f;function g(C,T,M){let[A,P,O,j,D,I]=e.getAbcdef(C);return e.setAbcdef(C,A,P,O,j,D+T,I+M),C}e.translate=g;function p(C,T,M){let[A,P,O,j]=e.getAbcdef(C);return e.setAbcdef(C,A,P,O,j,T,M),C}e.setTranslate=p;function m(C,T,M){let[A,P,O,j]=e.getAbcdef(C);return e.setAbcdef(C,A,P,O,j,T,M),C}e.setPosition=m;function y(C){let[T,M,A,P]=e.getAbcdef(C),O=Math.sqrt(T*T+M*M),j=Math.sqrt(A*A+P*P);return[O,j]}e.getScale=y;function b(C){let[,,,,T,M]=e.getAbcdef(C);return[T,M]}e.getPosition=b;function w(C,T){return e.decompose(C,T).rotation}e.getRotation=w;function x(C,T){let[M,A,P,O,j,D]=e.getAbcdef(C),{rotation:I,scale:q,shear:$}=dvt([[M,P],[A,O]]);return{position:[j+(T[0]*M+T[1]*P)-T[0],D+(T[0]*A+T[1]*O)-T[1]],scale:q,rotation:I,shear:$,pivot:T}}e.decompose=x;function S(C,T,M,A,P=[0,0]){let[O,j]=C,[D,I]=A,[q,$,X,N]=hvt({rotation:M,scale:T,shear:P}),Q=O-(D*q+I*X)+D,F=j-(D*$+I*N)+I;return e.create(q,$,X,N,Q,F)}e.compose=S})(Qr||(Qr={}));var fvt=Math.PI/180;function pvt(e,t,r,i,n,a){let o=e-r,s=t-i;return o*o/(n*n)+s*s/(a*a)<=1}function mvt(e){return e*fvt}var ia=class{constructor(e,t,r){this.uuid=e,this.data=t,this.localMatrix=Qr.identity(),this.worldMatrix=Qr.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new Dk,this._recursiveBBox=new Dk,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.shear=[0,0],this.emitter=pI(),this.dpr=r.dpr??1,this.dataPatched=t}project(e,t){let r=this.worldMatrix;return t&&(r=Qr.append(t.worldMatrix,r)),Qr.applyInverse(e,r)}intersects(e,t,r,i=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,t],r),i)}intersectsInLocalSpace(e,t,r=!1){let{min:i,max:n}=r?this.recursiveBBox:this.singleBBox;return e>=i[0]&&e<=n[0]&&t>=i[1]&&t<=n[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=Qr.compose(this.position,this.scale,mvt(this.rotation),Z0.getPivot(this.dataPatched),this.shear)}updateWorldMatrix(e,t,r){let i=this.parent;t&&i!==null&&i!==void 0&&i.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=Qr.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=Qr.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return Z0.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let t=!1;e.position!==void 0&&(t=!0,this.position=e.position),e.rotation!==void 0&&(t=!0,this.rotation=e.rotation),e.scale!==void 0&&(t=!0,this.scale=e.scale),e.shear!==void 0&&(t=!0,this.shear=e.shear),t&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,t,r){e.type===0&&e.props.visible!==void 0&&(this.visible=e.props.visible),this.data=t,this.data=t;let i=e,n=yi(e.path,["states","*"]);if(n!==null){if(e.type===0){let[a]=n;if((this==null?void 0:this.stateSelection)===a){let o={...e.props};if(delete o.name,Object.values(e.props).some(s=>s===void 0)){let s=this.data;if(s!==void 0){let l=Ln.zoom(s,e.path.slice(2));if(l)for(let u in e.props)e.props[u]===void 0&&u in l&&(o[u]=l[u])}}i={...e,props:o,path:e.path.slice(2)}}}}else if(e.type===0){let a=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(a!==void 0){if(e.props.name!==void 0&&a.name){let{name:s,...l}=a;a=l}let o=Ln.removeOverridden(e.path,e.props,a);i={...e,props:o}}}this.updateByPatchedOpBase(i,U0.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),r)}changeSelectedState(e,t,r=!1){if(!(this.data.states.length===0&&!r)){for(let i of this.data.states)U0.toOps(this.data,i.data).forEach(n=>{let a=PD.replaceProps(n,this.data);this.dataPatched=this.data,this.updateByPatchedOp(a,this.data,t)});if(e!==null){let i=this.data.states.data(e);i&&(this.dataPatched=U0.patch(this.data,i),U0.toOps(this.data,i).forEach(n=>{this.updateByPatchedOp(n,this.dataPatched,t)}))}r&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,t){e.name!==void 0&&(this.name=e.name),e.visible!==void 0&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,t,r){this.dataPatched=t,this.updateByPatchedOp(e,t,r)}updateByPatchedOp(e,t,r){e.path.length===0&&e.type===0&&this.updateState(e.props,r),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(t=>{t.data.type==="frame2d"&&e(t)})}traverseAncestors(e){let t=this.parent;for(;t;)e(t),t=t.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let t=new ia(this.uuid,this.data,e);return t.parent=void 0,t}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children;if(t){let r=t.indexOf(this)+1;return t[r]?t[r]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof ia&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},vf=class extends ia{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.context=r,this.children=[]}add(e){e.parent&&e.parent instanceof vf&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=void 0)}traverse(e){let t=e(this);if(t!==!0)for(let r of this.children)r instanceof vf?r.traverse(e):t=e(r)}intersectsChildrenHelper(e,t,r,i,n){for(let a of this.children)if(a.intersects(e,t,r,!1)&&(n.push(a),i)||a instanceof vf&&a.intersectsChildrenHelper(e,t,r,i,n))return!0;return!1}intersectsChildren(e,t,r,i=!1,n=[],a=!1){return this.intersectsChildrenHelper(e,t,r,i,n),n}intersectsChildrenHelperReverse(e,t,r,i,n){for(let a of this.children)if(a instanceof vf&&a.intersectsChildrenHelperReverse(e,t,r,i,n)||a.intersects(e,t,r,!1)&&(n.push(a),i))return!0;return!1}intersectsChildrenReverse(e,t,r,i=!1,n=[],a=!1){return this.intersectsChildrenHelperReverse(e,t,r,i,n),n}updateWorldMatrix(e,t,r){if(super.updateWorldMatrix(e,t,r),r&&this.children)for(let i of this.children)i.updateWorldMatrix(e,!1,!0)}find(e){let t;return this.traverse(r=>{r.uuid===e&&(t=r)}),t}innerDrawChildren(e){for(let t=this.children.length-1;t>=0;t--)this.children[t].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let t=new vf(this.uuid,this.data,e);t.parent=void 0;for(let r of this.children)t.add(r.clone(e));return t}},xv=class extends vf{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.updateState(t,r)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let t=new xv(this.uuid,this.data,e);t.parent=void 0;for(let r of this.children)t.add(r.clone(e));return t}};function gvt(e,t){let[[r,i],[n,a]]=e,[[o,s],[l,u]]=t,c=(r-n)*(s-u)-(i-a)*(o-l);if(c===0)return!1;let d=((r-o)*(s-u)-(i-s)*(o-l))/c,h=-((r-n)*(i-s)-(i-a)*(r-o))/c;return d>=0&&d<=1&&h>=0&&h<=1}var ASe=[[-1,1],[-1,-1],[1,-1],[1,1]],Lte=(e,t,r)=>{let i=e.getCenter(),n=e.getHalfSize(),a=Qr.append(t,e.worldMatrix);n[0]===0&&n[1]===0?r.push(Qr.apply(i,a)):ASe.forEach(o=>{let s=[o[0]*n[0]+i[0],o[1]*n[1]+i[1]];r.push(Qr.apply(s,a))})},Dk=class{constructor(){this.matrix=Qr.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,t=!1){e.updateWorldMatrix(),this.makeEmpty(),Qr.copy(e.worldMatrix,this.matrix);let r=Qr.invert(e.worldMatrix);this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];r===!0&&e instanceof vf?e.traverse(n=>{n.visible&&Lte(n,t,i)}):Lte(e,t,i),this.setFromPoints(i)}setFromSize(e,t,r){this.makeEmpty(),Qr.copy(r,this.matrix),this.expandBySize(e,t,r)}expandBySize(e,t,r){[Qr.apply([0,0],r),Qr.apply([0,t],r),Qr.apply([e,t],r),Qr.apply([e,0],r)].forEach(i=>this.expandByPoint(i))}getCenter(){let[e,t]=this.min,[r,i]=this.getHalfSize();return Qr.apply([e+r,t+i],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[(this.max[0]-this.min[0])*.5,(this.max[1]-this.min[1])*.5]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let t of e)this.expandByPoint(t)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,t]=this.getHalfSize(),r=this.getCenter(),[i,n,a,o]=Qr.getAbcdef(this.matrix),s=Qr.create(i,n,a,o,r[0],r[1]);this.vertices=ASe.map(([l,u])=>Qr.apply([l*e,u*t],s))}computeEdges(){this.edges=[];for(let e=0,t=this.vertices.length;e<t;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%t]])}project(e,t){let r=this.matrix;return t&&(r=Qr.append(t.worldMatrix,r)),Qr.applyInverse(e,r)}intersects(e,t,r){return this.intersectsInLocalSpace(...this.project([e,t],r))}intersectsInLocalSpace(e,t){let{min:r,max:i}=this;return e>=r[0]&&e<=i[0]&&t>=r[1]&&t<=i[1]}containsPoint(e){let[t,r]=e,[i,n]=this.min,[a,o]=this.max;return t>=i&&t<=a&&r>=n&&r<=o}intersectsBBox2D(e){for(let t=0,r=this.edges.length;t<r;t++){let i=this.edges[t];for(let n=0,a=e.edges.length;n<a;n++){let o=e.edges[n];if(gvt(i,o))return!0}}for(let t=0,r=e.vertices.length;t<r;t++){let i=e.vertices[t];if(this.containsPoint(i))return!0}return!1}ensureMinMax(){let e=this.min,t=this.max;this.min=[Math.min(e[0],t[0]),Math.min(e[1],t[1])],this.max=[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],Qr.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new Dk;return e.copy(this),e}},OSe,vvt=new Promise(e=>{OSe=e}),Fte=!1,gO;function yvt(){if(Fte)return;if(gO)return gO;async function e(){let t=await tl(()=>import("./ui-Ds7EeOeb.js"),[]);OSe(t.default??t),Fte=!0}return gO=e(),gO}function Nte(e){let t=!1;return e.scene.objects.traverse((r,i)=>{(i.type==="Mesh"&&i.geometry.type==="UIGeometry"||i.type==="Page"&&i.uiFrame!==void 0)&&(t=!0)}),t}var vr,UB;async function bvt(e){let t=await vvt;vr||(UB||(UB=t({locateFile:()=>e})),vr=await UB)}var Ute=Qr.identity(),RSe=class{constructor(e,t=1){this.canvas=e,this._dpr=t,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=hi.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=hi.transparent,this._fonts=new Map,this._isSizeDirty=!1;try{let r=e.getBoundingClientRect();e.width=r.width*t,e.height=r.height*t}catch{console.log(e.width,t)}this._currentM3Transform=Ute,this._currentTransform=new Float32Array(Ute)}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this._isSizeDirty=!0}async init(){var e,t;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await bvt(this.wasmURL),this._surface=vr.MakeWebGLCanvasSurface(this.canvas),this.ctx=(e=this._surface)==null?void 0:e.getCanvas(),this._paint=new vr.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(vr.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(vr.PaintStyle.Stroke),(t=this.ctx)==null||t.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,t){let r=await(await fetch(e)).arrayBuffer();this.registerFont(r,t)}registerFont(e,t){if(this._fonts.has(t))return;let r=vr.FontMgr.FromData(e);if(r)this._fonts.set(t,r);else throw new Error("Invalid font data for "+t)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(vO(e),vr.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(vO(e),vr.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth(this._strokeMode==="center"?e:e*2)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;(e=this.ctx)==null||e.clear(vr.TRANSPARENT)}save(){var e;(e=this.ctx)==null||e.save()}restore(){var e;(e=this.ctx)==null||e.restore()}beginPath(){var e;(e=this._currentPath)==null||e.delete(),this._currentPath=new vr.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let t=e.getBounds();(t[3]-t[1]||t[2]-t[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,t,r,i,n=0,a=0,o=0,s=0){var u,c;let l=vr.XYWHRect(e,t,r,i);if(n===0&&a===0&&s===0&&o===0)(u=this.ctx)==null||u.clipRect(l,vr.ClipOp.Intersect,!0);else{let d=vr.RRectXY(l,n,n);d[4]=d[5]=n,d[6]=d[7]=a,d[8]=d[9]=o,d[10]=d[11]=s,(c=this.ctx)==null||c.clipRRect(d,vr.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=Qr.invert(this.currentTransform);this.ctx.concat(e);let t=Qr.translate(Qr.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(t),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,t,r=!0){var i,n,a,o;if(this.ctx&&this._currentPath){let s,l=!1;if(r&&this._hasDropShadow()){let u=e.copy();u.setColor(vO(this._dropShadowColor));let c;this._dropShadowBlur>0&&(c=vr.MaskFilter.MakeBlur(vr.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(((i=this.camera)==null?void 0:i.scale)??1),!1),u.setMaskFilter(c)),this.ctx.save(),this.ctx.clipPath(this._currentPath,vr.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),t(u),this.ctx.restore(),u.delete(),c==null||c.delete()}if(this._backgroundBlur>0&&r){this.ctx.save(),this.ctx.clipPath(this._currentPath,vr.ClipOp.Intersect,!0);let u=vr.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,vr.TileMode.Clamp,null),c=e.copy();c.setImageFilter(u),c.setAlphaf(1);let d=this._currentPath.computeTightBounds();this.ctx.saveLayer(c,d,null,vr.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),c.delete(),u.delete(),l=!0}if(this._layerBlur>0){let u=e.copy();s=vr.MaskFilter.MakeBlur(vr.BlurStyle.Normal,this._layerBlur*this.dpr*(((n=this.camera)==null?void 0:n.scale)??1),!1),u.setMaskFilter(s),t(u),u.delete(),s.delete(),l=!0}if(l||t(e),r&&this._hasInnerShadow()){let u=new vr.Paint;u.setAntiAlias(!0),u.setStyle(vr.PaintStyle.Fill),u.setColor(vO(this._innerShadowColor));let c;this._innerShadowBlur>0&&(c=vr.MaskFilter.MakeBlur(vr.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(((a=this.camera)==null?void 0:a.scale)??1),!1),u.setMaskFilter(c));let d=this._currentPath.computeTightBounds(),[h,f,g,p]=d,m=g-h,y=p-f;this.ctx.save(),this.ctx.clipPath(this._currentPath,vr.ClipOp.Intersect,!0),this.ctx.saveLayer(u,d,null,vr.SaveLayerInitWithPrevious),(o=this.ctx)==null||o.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(vr.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+m+Math.abs(this._innerShadowOffsetX*2),2e3+y+Math.abs(this._innerShadowOffsetY*2)),u),u.setBlendMode(vr.BlendMode.Clear),this.ctx.drawPath(this._currentPath,u),this.ctx.restore(),this.ctx.restore(),u.delete(),c==null||c.delete()}}}_paintInner(e,t=!0){if(this.ctx&&this._currentPath&&e){let r=this.ctx,i=this._currentPath;this._applyEffectsToPaint(e,n=>{let a=!1;!t&&this._strokeMode!=="center"&&(r.save(),r.clipPath(i,this._strokeMode==="outside"?vr.ClipOp.Difference:vr.ClipOp.Intersect,!0),a=!0),r.drawPath(i,n),a&&r.restore()},t)}}_hasDropShadow(){var e;return((e=this._dropShadowColor)==null?void 0:e.a)>0}_hasInnerShadow(){var e;return((e=this._innerShadowColor)==null?void 0:e.a)>0}path(e){var t;(t=this._currentPath)==null||t.addPath(vr.Path.MakeFromSVGString(e))}ellipse(e,t,r,i,n,a,o,s){var u;if(!Vte([e,t,r,i])||!this._currentPath)return;if(r<0||i<0)throw Error("radii cannot be negative");let l=vr.XYWHRect(e-r,t-i,r*2,i*2);(u=this._currentPath)==null||u.addOval(l)}rect(e,t,r,i,n=0,a=0,o=0,s=0){var u,c;let l=vr.XYWHRect(e,t,r,i);if(Vte(l))if(n===0&&a===0&&s===0&&o===0)(u=this._currentPath)==null||u.addRect(l);else{let d=vr.RRectXY(l,n,n);d[4]=d[5]=n,d[6]=d[7]=a,d[8]=d[9]=o,d[10]=d[11]=s,(c=this._currentPath)==null||c.addRRect(d)}}getHorizontalAlign(e){switch(e){case 2:return vr.TextAlign.Right;case 3:return vr.TextAlign.Center;case 4:return vr.TextAlign.Justify;case 1:default:return vr.TextAlign.Left}}drawTextInner(e,t,r,[i,n,a,o],s,l,u=!0){let c=0,{ctx:d}=this;if(!d)return c;let h=l.copy(),f=l.copy();return f.setAlphaf(0),this._applyEffectsToPaint(h,g=>{t.pushPaintStyle(r,g,f),t.addText(e);let p=t.build();p.layout(a);let m=n;s===2?m+=(o-p.getHeight())/2:s===3&&(m+=o-p.getHeight()),d.drawParagraph(p,i,m),c=p.getHeight(),t.reset(),p.delete()},u),h.delete(),f.delete(),c}drawText(e,t){let r=0,i=this._fonts.get(t.font),{ctx:n,_paintFill:a,_paintStroke:o}=this;if(i&&n){let s=new vr.TextStyle({fontFamilies:[t.font],fontSize:t.fontSize,heightMultiplier:t.lineHeight,letterSpacing:t.letterSpacing}),l=new vr.ParagraphStyle({textStyle:s,textAlign:this.getHorizontalAlign(t.horizontalAlign)}),u=vr.XYWHRect(t.x,t.y,t.width,t.height),c=vr.ParagraphBuilder.Make(l,i);a&&(r=this.drawTextInner(e,c,s,u,t.verticalAlign,a,!0)),o&&(r=this.drawTextInner(e,c,s,u,t.verticalAlign,o,!1)),c.delete()}return{height:r}}render(){var e;(e=this._surface)==null||e.flush()}moveTo(e,t){var r;(r=this._currentPath)==null||r.moveTo(e,t)}lineTo(e,t){var r;(r=this._currentPath)==null||r.lineTo(e,t)}bezierCurveTo(e,t,r,i,n,a){var o;(o=this._currentPath)==null||o.cubicTo(e,t,r,i,n,a)}quadraticCurveTo(e,t,r,i){var n;(n=this._currentPath)==null||n.quadTo(e,t,r,i)}setTransform(e,t=!1){var n,a,o,s,l;if(!this.ctx)return;let r=this.ctx.getTotalMatrix(),i=Qr.invert(r);if(i&&this.ctx.concat(i),(n=this.ctx)==null||n.scale(this.dpr,this.dpr),((a=this.camera)==null?void 0:a.enabled)&&((o=this.ctx)==null||o.concat(this.camera.worldMatrix),t)){let u=Qr.getScale(this.camera.worldMatrix);(s=this.ctx)==null||s.scale(1/u[0],1/u[1])}(l=this.ctx)==null||l.concat(e),this.currentTransform=e}transform(e){var t;(t=this.ctx)==null||t.concat(e)}setSize(e,t){var r;!this._isSizeDirty&&e===this._width&&t===this._height||(this._isSizeDirty=!1,this._width=e,this._height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e*this.dpr,this.canvas.height=t*this.dpr,this._surface&&(this._surface=vr.MakeWebGLCanvasSurface(this.canvas),this.ctx=(r=this._surface)==null?void 0:r.getCanvas()))}};function Vte(e){for(let t=0;t<e.length;t++)if(e[t]!==void 0&&!Number.isFinite(e[t]))return!1;return!0}function vO({r:e,g:t,b:r,a:i}){return vr.Color4f(e,t,r,i)}var kte=class{constructor(e,t,r){this.uuid=e,this.data=t,this.enabled=!1,this.color=hi.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(t)}update(e){e.color!==void 0&&(this.color=e.color),e.enabled!==void 0&&(this.enabled=e.enabled),e.blurRadius!==void 0&&(this.blurRadius=e.blurRadius),e.offset!==void 0&&(this.offset=e.offset),e.spread!==void 0&&(this.spread=e.spread)}},qte=class{constructor(e,t,r){this.uuid=e,this.data=t,this.enabled=!1,this.radius=0,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.radius!==void 0&&(this.radius=e.radius)}},_vt=class{constructor(e,t,r){this.uuid=e,this.data=t,this.enabled=!1,this.color=hi.transparent,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color)}},wvt=class{constructor(e,t,r){this.uuid=e,this.data=t,this.enabled=!1,this.color=hi.transparent,this.thickness=0,this.mode="inside",this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color),e.thickness!==void 0&&(this.thickness=e.thickness),e.mode!==void 0&&(this.mode=e.mode)}},Qn=class extends ia{constructor(t,r,i){super(t,r,i),this.uuid=t,this.data=r,this.autoClose=!0,this.fill=new _vt(t+"-fill",r.fill,i),this.stroke=new wvt(t+"-stroke",r.stroke,i),this.dropShadow=new kte(t+"-dropShadow",r.dropShadow,i),this.innerShadow=new kte(t+"-innerShadow",r.innerShadow,i),this.backgroundBlur=new qte(t+"-backgroundBlur",r.backgroundBlur,i),this.layerBlur=new qte(t+"-layerBlur",r.layerBlur,i)}applyFillStroke(t){t.fillColor=this.fill.enabled?this.fill.color:hi.transparent,t.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:hi.transparent,t.strokeMode=this.stroke.mode,t.lineWidth=this.stroke.thickness}applyFilters(t){this.layerBlur.enabled?t.layerBlur=this.layerBlur.radius*5:t.layerBlur=0,this.backgroundBlur.enabled?t.backgroundBlur=this.backgroundBlur.radius*5:t.backgroundBlur=0,this.dropShadow.enabled?(t.dropShadowBlur=this.dropShadow.blurRadius*5,t.dropShadowColor=this.dropShadow.color,t.dropShadowOffsetX=this.dropShadow.offset[0],t.dropShadowOffsetY=this.dropShadow.offset[1]):t.dropShadowColor=hi.transparent,this.innerShadow.enabled?(t.innerShadowSpread=this.innerShadow.spread,t.innerShadowBlur=this.innerShadow.blurRadius*5,t.innerShadowColor=this.innerShadow.color,t.innerShadowOffsetX=this.innerShadow.offset[0],t.innerShadowOffsetY=this.innerShadow.offset[1]):t.innerShadowColor=hi.transparent}innerDraw(t){}draw(t){!this.visible||(t.save(),this.applyTransforms(t),this.applyFilters(t),this.applyFillStroke(t),t.beginPath(),this.innerDraw(t),this.autoClose&&t.closePath(),this.fill.enabled&&t.fill(),this.stroke.enabled&&t.stroke(),t.restore())}updateByPatchedOp(t,r,i){super.updateByPatchedOp(t,r,i),t.type===0&&(yi(t.path,["fill"])?this.fill.update(t.props):yi(t.path,["stroke"])?this.stroke.update(t.props):yi(t.path,["dropShadow"])?this.dropShadow.update(t.props):yi(t.path,["innerShadow"])?this.innerShadow.update(t.props):yi(t.path,["layerBlur"])?this.layerBlur.update(t.props):yi(t.path,["backgroundBlur"])?this.backgroundBlur.update(t.props):this.resetBBoxNeedsUpdate())}updateState(t,r){super.updateState(t,r),t.fill!==void 0&&this.fill.update(t.fill),t.stroke!==void 0&&this.stroke.update(t.stroke),t.dropShadow!==void 0&&this.dropShadow.update(t.dropShadow),t.innerShadow!==void 0&&this.innerShadow.update(t.innerShadow),t.layerBlur!==void 0&&this.layerBlur.update(t.layerBlur),t.backgroundBlur!==void 0&&this.backgroundBlur.update(t.backgroundBlur)}clone(t){let r=new Qn(this.uuid,this.data,t);return r.parent=void 0,r}},mG=class extends Qn{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.width=0,this.height=0,this.updateState(t,r)}innerDraw(e){e.ellipse(this.width*.5,this.height*.5,this.width*.5,this.height*.5,0,0,Math.PI*2)}intersectsInLocalSpace(e,t){return pvt(e,t,this.width*.5,this.height*.5,this.width*.5,this.height*.5)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e)}clone(e){let t=new mG(this.uuid,this.data,e);return t.parent=void 0,t}},TP=class extends Qn{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(t,r)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let t=new TP(this.uuid,this.data,e);return t.parent=void 0,t}},gG=class extends Qn{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(t,r)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:hi.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:hi.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var a;(a=this._fontHolder)!=null&&a.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let t=this.data.textTransform,r=this.data.text.textValue.toString(),i=t===2?r.toUpperCase():t===3?r.toLowerCase():r,{height:n}=e.drawText(i,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=n}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:t}){e.font!==void 0&&(this._fontHolder=t.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateFontState(e,t)}clone(e){let t=new gG(this.uuid,this.data,e);return t.parent=void 0,t}},DSe=class extends Qn{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(t,r)}computeExtremas(){this.curves.length===0&&this.computeCurves();let e=this.curves.map(i=>r2.extremas(i)),t=[1/0,1/0],r=[-1/0,-1/0];for(let i=0,n=e.length;i<n;i++){let a=e[i];a[0][0]<t[0]&&(t[0]=a[0][0]),a[0][1]<t[1]&&(t[1]=a[0][1]),a[1][0]>r[0]&&(r[0]=a[1][0]),a[1][1]>r[1]&&(r[1]=a[1][1])}return this.extremasBBox.min=[t[0],t[1]],this.extremasBBox.max=[r[0],r[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let r=1,i=this.data.points.length;r<i;r++){let n=this.data.points[r].data,a=this.data.points[r-1].data,o={start:a.position,cp1:a.controlNext.position,cp2:n.controlPrevious.position,end:n.position};this.curves.push(o)}let e=this.data.points[0].data,t=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let r={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(r)}}getCenter(){let[e,t]=this.extremasBBox.min,[r,i]=this.getHalfSize();return[e+r,t+i]}getHalfSize(){let{min:e,max:t}=this.extremasBBox;return[(t[0]-e[0])*.5,(t[1]-e[1])*.5]}innerDraw(e){for(let i=0,n=this.data.points.length;i<n;i++){let a=this.data.points[i].data;if(i===0){let[o,s]=a.position;e.moveTo(o,s)}else{let o=this.data.points[i-1].data,[s,l]=o.controlNext.position,[u,c]=a.controlPrevious.position,[d,h]=a.position,f={start:o.position,cp1:o.controlNext.position,cp2:a.controlPrevious.position,end:a.position};r2.derive(f),e.bezierCurveTo(s,l,u,c,d,h)}}let t=this.data.points[0].data,r=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[i,n]=r.controlNext.position,[a,o]=t.controlPrevious.position,[s,l]=t.position;e.bezierCurveTo(i,n,a,o,s,l)}}updateState(e,t){super.updateState(e,t),this.computeExtremas()}clone(e){let t=new DSe(this.uuid,this.data,e);return t.parent=void 0,t}},r2;(e=>{function t(o){let s=o.start,l=o.cp1,u=o.cp2,c=o.end,d=[3*(l[0]-s[0]),3*(l[1]-s[1])],h=[3*(u[0]-l[0]),3*(u[1]-l[1])],f=[3*(c[0]-u[0]),3*(c[1]-u[1])],g={start:d,cp:h,end:f};return o.derivative=g,g.derivative=Ik.derive(g),g}e.derive=t;function r(o,s,l,u=!1){let c=o-2*s+l;if(c!==0){let d=-Math.sqrt(Math.abs(s*s-o*l)),h=-o+s,f=-(d+h)/c,g=-(-d+h)/c;return[f,g]}else if(s!==l&&c===0)return[(2*s-l)/(2*(s-l))];return[]}function i(o){let s=o.derivative??e.derive(o),l=s.start,u=s.cp,c=s.end;return[r(l[0],u[0],c[0]),r(l[1],u[1],c[1])]}e.droot=i;function n(o){let[s,l]=e.droot(o),u=[o.start[0],o.end[0]],c=[o.start[1],o.end[1]];for(let d of s)u.push(e.compute(o,Math.min(1,Math.max(0,d)))[0]);for(let d of l)c.push(e.compute(o,Math.min(1,Math.max(0,d)))[1]);return u.sort((d,h)=>d-h),c.sort((d,h)=>d-h),[[u[0],c[0]],[u[u.length-1],c[c.length-1]]]}e.extremas=n;function a(o,s){if(s===0)return[...o.start];if(s===1)return[...o.end];let l=1-s,u=l*l,c=s*s,d=u*l,h=u*s*3,f=l*c*3,g=s*c;return[d*o.start[0]+h*o.cp1[0]+f*o.cp2[0]+g*o.end[0],d*o.start[1]+h*o.cp1[1]+f*o.cp2[1]+g*o.end[1]]}e.compute=a})(r2||(r2={}));var Ik;(e=>{function t(n){let a=n.start,o=n.cp,s=n.end,l=[2*(o[0]-a[0]),2*(o[1]-a[1])],u=[2*(s[0]-o[0]),2*(s[1]-o[1])],c={start:l,end:u};return c.derivative=jk.derive(c),n.derivative=c,c}e.derive=t;function r(n){let a=n.derivative??e.derive(n),o=a.start,s=a.end;return[o[0]!==s[0]?o[0]/(o[0]-s[0]):0,o[1]!==s[1]?o[1]/(o[1]-s[1]):0]}e.droot=r;function i(n,a){if(a===0)return[...n.start];if(a===1)return[...n.end];let o=1-a,s=o*o,l=a*a,u=s,c=o*a*2,d=l;return[u*n.start[0]+c*n.cp[0]+d*n.end[0],u*n.start[1]+c*n.cp[1]+d*n.end[1]]}e.compute=i})(Ik||(Ik={}));var jk;(e=>{function t(i){let n=i.start,a=i.end,o=[a[0]-n[0],a[1]-n[1]];return i.derivative=o,i.derivative}e.derive=t;function r(i,n){if(n===0)return[...i.start];if(n===1)return[...i.end];let a=i.start,o=i.end;return[a[0]+(o[0]-a[0])*n,a[1]+(o[1]-a[1])*n]}e.compute=r})(jk||(jk={}));var Pp=class extends vf{constructor(e,t,r){super(e,t,r),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new TP(e+"-background",OM.defaultData,r),this.background.parent=this,this.updateState(t,r)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),(e=this.background)==null||e.updateLocalMatrix()}updateWorldMatrix(e,t,r){var i;super.updateWorldMatrix(e,t,r),(i=this.background)==null||i.updateWorldMatrix(e,t,r)}draw(e){if(!this.visible)return;e.save();let t=this.width,r=this.height;this.applyTransforms(e),this.background.width=t,this.background.height=r,this.background.draw(e),this.clipped&&e.clipRect(0,0,t,r,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur),e.clipped!==void 0&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.type===0&&(yi(e.path,["fill"])?this.fill.update(e.props):yi(e.path,["stroke"])?this.stroke.update(e.props):yi(e.path,["dropShadow"])?this.dropShadow.update(e.props):yi(e.path,["innerShadow"])?this.innerShadow.update(e.props):yi(e.path,["layerBlur"])?this.layerBlur.update(e.props):yi(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let t=new Pp(this.uuid,this.data,e);t.parent=void 0;for(let r of this.children)t.add(r.clone(e));return t}},xvt=Av(z1e(),1),yI=class extends Qn{constructor(e,t,r){super(e,t,r),this.uuid=e,this.data=t,this._pathBBox=new DOMRect,this.path="",this.updateState(t,r),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),t.setAttribute("d",this.path),e.appendChild(t),this._pathBBox=t.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,t){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&t>=this._pathBBox.y&&t<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,t){super.updateState(e,t),e.path!==void 0&&(this.path=e.path,this.computeSVGBBox())}clone(e){let t=new yI(this.uuid,this.data,e);return t.parent=void 0,t}};function Svt(e,t=1,r=1){if(t<=0||r<=0)return e;let i=(0,xvt.parseSVG)(e).map(n=>{let a={...n};return"x"in a&&(a.x=a.x*t),"y"in a&&(a.y=a.y*r),"x1"in a&&(a.x1=a.x1*t),"x2"in a&&(a.x2=a.x2*t),"y1"in a&&(a.y1=a.y1*r),"y2"in a&&(a.y2=a.y2*r),"rx"in a&&(a.rx=a.rx*t),"ry"in a&&(a.ry=a.ry*r),a});return Cvt(i)}function Cvt(e){let t=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"],r;return e.map(i=>{let n=[];t.forEach(o=>{if(o in i){let s=i[o]*1;n.length&&s>=0&&n.push(","),n.push(s)}});let a=(r===i.code?n[0]<0?"":",":i.code)+n.join("");return r=i.code,a}).join("")}function Evt(e,t,r){switch(t.type){case"ellipse2d":return new mG(e,t,r);case"rectangle2d":return new TP(e,t,r);case"text2d":return new gG(e,t,r);case"vector2d":return new DSe(e,t,r);case"path2d":return new yI(e,t,r);case"frame2d":return new Pp(e,t,r);case"group2d":default:return new xv(e,t,r)}}var ISe=class{constructor(e,t,r){this.uuid=e,this.data=t,this.group=new xv(ISe.GROUP_ID,{...HD.defaultData},r),this.createChildrenObjects(t.objects,this.group,r)}createObject(e,t,r,i,n,a){let o=Evt(e,t,a);o&&(i.add(o),i.children.splice(n,0,i.children.pop()),o.updateWorldMatrix(),r.length>0&&(o instanceof xv||o instanceof Pp)&&this.createChildrenObjects(r,o,a))}createChildrenObjects(e,t,r){let i=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,i,r),i+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,t,r,i){let n=this.find(e);if(n)try{n.updateByOp(t,r,{shared:i})}catch(a){console.error(a)}}updateTreeByOp(e,t){if(e.path.length===0&&e.type===7){let r=e.parent===null?this.group:this.find(e.parent);r!==void 0&&r instanceof vf&&(this.createObject(e.id,e.data,e.children,r,e.localIndex,t),r.requestRender())}else if(e.path.length===0&&e.type===8){let r=this.find(e.id);if(r!==void 0&&r.parent!==void 0&&r.parent instanceof vf){let i=r.parent;r.resetBBoxNeedsUpdate(),i==null||i.remove(r),i==null||i.requestRender()}}else if(e.path.length===0&&e.type===9){let r=this.find(e.id);if(r!==void 0){let i=r.parent,n=e.parent===null?this:this.find(e.parent);if(n instanceof vf||n===this){n.add(r);let a=e.localIndex;n.children.splice(a,0,n.children.pop()),r.updateWorldMatrix(!0,!1,!0),i==null||i.requestRender(),r.requestRender()}r.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(t=>{t!==this.group&&e(t)})}intersectsChildren(e,t,r,i=!1,n=[]){return this.group.intersectsChildren(e,t,r,i,n,!0)}intersectsChildrenReverse(e,t,r,i=!1,n=[]){return this.group.intersectsChildrenReverse(e,t,r,i,n,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,t){return this.group.project(e,t)}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],i=t;for(;i!==this.group;){let n=i;i=i.parent;let a=i.children.indexOf(n);r.splice(0,0,a)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(i)}return t.sort((r,i)=>fwe(r.sortKey,i.sortKey)),t.map(r=>r.entity)}},vG=ISe;vG.GROUP_ID="scene2d";function jSe({constraints:e,newParentWidth:t,newParentHeight:r,initialParentWidth:i,initialParentHeight:n,objectInitialWidth:a,objectInitialHeight:o,objectInitialPosition:s}){let{horizontalConstraint:l,verticalConstraint:u}=e,c=t-i,d=r-n,h=a,f=o,g=s[0],p=s[1];if(l!==0){if(l===1)g+=c;else if(l===3)g+=c/2;else if(l===2)h=Math.max(1,h+c);else if(l===4){let m=t/i;h*=m,g*=m}}if(u!==0){if(u===1)p+=d;else if(u===3)p+=d/2;else if(u===2)f=Math.max(1,f+d);else if(u===4){let m=r/n;f*=m,p*=m}}return{width:h,height:f,position:[g,p]}}Av(z1e(),1);var Mvt=`
	varying vec2 vUv;
	void main() {
		vUv = uv;
		gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
	}`,Pvt=`
	uniform sampler2D tDiffuse;
	varying vec2 vUv;
	void main() {
		vec4 texel = texture2D( tDiffuse, vUv );
		gl_FragColor = texel;
	}`,Tvt=new K2(-1,1,1,-1,0,1),Avt=class extends Wt{constructor(){super(),this.setAttribute("position",new Pt([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Pt([0,2,0,0,2,0],2))}},Ovt=new Avt,Rvt=class{constructor(e){this._mesh=new Ci(Ovt,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Tvt)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},zSe=new qr({defines:{},uniforms:{tDiffuse:new lt(null)},vertexShader:Mvt,fragmentShader:Pvt}),Dvt=new Rvt(zSe),VB=null,kB=null,Ivt=()=>(VB===null&&(VB=document.createElement("canvas")),VB),jvt=e=>(kB===null&&(kB=new RSe(e)),kB),zvt=Qr.identity(),BSe=class{constructor(e,t,r,i){this.uuid=e,this.width=t,this.height=r,this.context=i,this.enabled=!0,this.isScreenSpace=!1,this.dpr=window.devicePixelRatio,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this._innerApplySize=()=>{let n=this.width,a=this.height,o=this.dpr;this.renderer.dpr=this.isScreenSpace?o:Math.floor(2048/Math.max(n,a)),this.renderer.setSize(n,a)},this.onFrameOverrideObjectEvent=n=>{var a,o;if(((a=n.target)==null?void 0:a.uuid)!==void 0){let s=(o=this.frameRoot)==null?void 0:o.find(n.target.uuid);s&&s.dispatchEvent({...n,target:s})}},this.scene2d=new vG(Ot.generateUUID(),ik.defaultData,{dpr:window.devicePixelRatio,shared:i.shared}),this.canvas=Ivt(),this.renderer=jvt(this.canvas),this.promise=this.init(),this.renderTarget=new kr(1,1,{type:Gm,stencilBuffer:!1,depthBuffer:!1}),i.shared.addUIBuffer(this.uuid,this.renderTarget),this.textureHolder=i.shared.uiBuffer(this.uuid)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new wJe(this.canvas)),this._canvasTexture}async init(){this.renderer instanceof RSe&&(this.renderer.wasmURL=aSe.skiaWasmUrl),await this.renderer.init()}render(e){var t,r;if(this.isFrameDirty){this.isFrameDirty=!1,this._innerApplySize(),this.renderer.clear(),(t=this.frameOverride)==null||t.draw(this.renderer),this.renderer.render(),zSe.uniforms.tDiffuse.value=this.canvasTexture,this.canvasTexture.needsUpdate=!0;let i=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.clear(),Dvt.render(e),e.setRenderTarget(i),(r=this.textureHolder)==null||r.setNeedsUpdate(!0)}}updateEntity2DByOp(e,t,r,i){this.scene2d.updateEntityByOp(e,t,r,i),this.applySize()}updateTreeByOp(e,t){this.scene2d.updateTreeByOp(e,t),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let t=(e==null?void 0:e.width)??this.width,r=(e==null?void 0:e.height)??this.height;this.frameOverride.width=t,this.frameOverride.height=r,this.frameOverride.localMatrix=zvt,this.isScreenSpace&&(this.frameOverride.fill.color=hi.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:t,height:r},LSe({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e,t=window.devicePixelRatio){var s,l;let r=Math.max(1,(e==null?void 0:e.width)??this.width),i=Math.max(1,(e==null?void 0:e.height)??this.height);this.dpr=t,this.width=r,this.height=i,this._innerApplySize();let n=1,a=512,o=512;(r*t<a||i*t<o)&&(n=Math.max(a/(r*t),o/(i*t))),this.renderTarget.setSize(r*t*n,i*t*n),(s=this._canvasTexture)==null||s.dispose(),this._canvasTexture=void 0,this.applyOverrides(e),(l=this.frameOverride)==null||l.requestRender()}applyFrame(e){var r,i;let t=this.context.scene.find2D(e);if(!(!t||!(t instanceof Pp)))return this.disposeFrameOverride(),this.frameRoot=t,this.frameOverride=t.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),(r=this.frame)==null||r.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(n=>{n.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(n=>{n.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),(i=this.frame)==null||i.requestRender(),t}get frame(){return this.frameOverride}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return(e=this.textureHolder)==null?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,t,r;(e=this.frameOverride)==null||e.removeEventListener("render",this.onRenderRequestedDownstream),(t=this.frameOverride)==null||t.traverse(i=>{i.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),(r=this.frameOverride)==null||r.traverse(i=>{i.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function LSe({objectOverride:e,objectRoot:t,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a}){if(e instanceof Pp&&t instanceof Pp||e instanceof xv&&t instanceof xv)for(let o=0,s=e.children.length;o<s;o++){let l=e.children[o],u=t.children[o];l&&u&&l.uuid===u.uuid&&Lvt({objectOverride:l,objectRoot:u,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a})}}function Bvt(e){if(zk(e))return[e.width,e.height];if(e instanceof yI){let[t,r]=e.getHalfSize();return[t*2,r*2]}else if(e instanceof xv){let[t,r]=e.recursiveBBox.getHalfSize();return[t*2,r*2]}return[0,0]}function Lvt({objectOverride:e,objectRoot:t,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a}){let[o,s]=Bvt(t),{width:l,height:u,position:c}=jSe({constraints:e.data,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a,objectInitialWidth:o,objectInitialHeight:s,objectInitialPosition:t.position});if(e.position=c,e.data={...e.data,position:c},e.states)for(let d in e.states)Fvt({stateId:d,objectOverride:e,objectRoot:t,newParentWidth:r,newParentHeight:i,initialParentWidth:n,initialParentHeight:a});if(zk(e)||e instanceof xv)zk(e)&&(e.width=l,e.height=u,e.data={...e.data,width:l,height:u}),LSe({objectOverride:e,objectRoot:t,newParentWidth:l,newParentHeight:u,initialParentWidth:o,initialParentHeight:s});else if(e instanceof yI){let d=t,h=o!==0?l/o:1,f=s!==0?u/s:1;e.path=Svt(d.path,h,f),e.data={...e.data,path:e.path}}}function Fvt({stateId:e,objectOverride:t,objectRoot:r,newParentWidth:i,newParentHeight:n,initialParentWidth:a,initialParentHeight:o}){var u,c;let s=(u=t.states)==null?void 0:u[e],l=(c=r.states)==null?void 0:c[e];if(s&&l){let{width:d,height:h,position:f}=jSe({constraints:t.data,newParentWidth:i,newParentHeight:n,initialParentWidth:a,initialParentHeight:o,objectInitialWidth:Z0.isResizeable(l)?l.width:0,objectInitialHeight:Z0.isResizeable(l)?l.height:0,objectInitialPosition:l.position});Object.assign(t.states[e],{position:f}),Z0.isResizeable(s)&&Object.assign(t.states[e],{width:d,height:h})}}function zk(e){return e instanceof TP||e instanceof Pp||e instanceof mG||e instanceof gG}var Kn=class extends $W(Io){constructor(t,r,i){super(),this.data=r,this.bgColor=new wa(1,1,1,1),this.fog=null,this.backupFog=new s_e(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new er,this.penumbraSizeArrayCache=null,this.super_Entity(t,r),this.personalCamera=new Ua(Rw,{...PM.defaultData,...r.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new sZe(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),r.uiScene?this.uiScene=new vG((Array.isArray(t)?t[0]:t)+"-ui",r.uiScene,{dpr:window.devicePixelRatio,shared:i.shared}):r.uiFrame&&this.createUICanvas(r.uiFrame,i)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var t;return(t=this.uiCanvas)==null?void 0:t.frame}createUICanvas(t,r){this.uiCanvas=new BSe(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,r),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{var i,n;(i=this.uiCanvas)==null||i.applyFrame(t),(n=this.uiCanvas)==null||n.applySize()})}updateVisible(){}setBackgroundColor(t){this.bgColor=t,this.fogUseBGColor===!0&&(this.backupFog.color=t)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(t,r){t.color!==void 0&&(this.ambientLight.color=lo(t.color,r)),t.intensity!==void 0&&(this.ambientLight.intensity=t.intensity),t.enabled!==void 0&&(t.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(t){this.isActive=!0,t.fog=this.fog,this.traverseEntity(r=>{r instanceof mb&&r.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(t=>{if(t instanceof jw)if(Array.isArray(t.material))for(let r of t.material)r.needsUpdate=!0;else t.material.needsUpdate=!0,t.material.dispose()})}updateShadow(t){t.softShadowQuality!==void 0&&this.isActive&&tvt(t.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(t,r){if(t.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let i=this.scene;i.fog=this.fog}this.fogUseBGColor=t.useBackgroundColor,t.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=lo(t.color,r),this.backupFog.near=t.near,this.backupFog.far=t.far}updateAo(t,r){t.aoColor!==void 0&&(this.aoColor=lo(t.aoColor,r))}updateByOp(t,r,i,n){let a=this.data.uiFrame;super.updateByOp(t,r,i,n);let o=r;yi(t.path,["fog"])?this.updateFog(o.fog,i.shared):yi(t.path,["ao"])?this.updateAo(o.ao,i.shared):yi(t.path,["ambient"])?this.updateAmbientLight(o.ambient,i.shared):yi(t.path,["shadow"])?this.updateShadow(o.shadow):t.type===0&&t.path.length===0&&(t.props.uiFrame!==void 0||a!==o.uiFrame)&&this.updateUIFrame(t.props.uiFrame,i)}updateUIFrame(t,r){t?(this.uiCanvas||this.createUICanvas(t,r),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(t)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(t,r){this.updateState_Entity(t,r),t.backgroundColor!==void 0&&this.setBackgroundColor(lo(t.backgroundColor,r.shared)),t.fog!==void 0&&this.updateFog(t.fog,r.shared),t.ambient!==void 0&&this.updateAmbientLight(t.ambient,r.shared),t.ao!==void 0&&this.updateAo(t.ao,r.shared),t.shadow!==void 0&&this.updateShadow(t.shadow)}createFrame(t,r){}raycast(t,r){super.raycast(t,r)}switchActiveCamera(t){t&&t.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=t,t.objectHelper.visible=!1)}get playCamera(){var t;return((t=this.scene)==null?void 0:t.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let t=0,r=0;this.traverseEntity(i=>{if(!i.visible)return!0;i instanceof PSe&&i.visible&&t<3&&(this.penumbraSizeArrayCache[t]=i.data.penumbraSize??.5,t+=1),i instanceof TSe&&i.visible&&t<2&&(this.penumbraSizeArrayCache[3+r]=i.data.penumbraSize??.5,r+=1)})}raycastWithClones(t){let r=[],i=n=>{for(let a of n.children){let o=a.cloner;Vr.is(a)&&(a.visible||o!=null&&o.object.data.visible)&&((gf(a)||Ek(a)&&this.scene.enableHelpers&&a.objectHelper.visible)&&(t.intersectObject(a,!1,r),Bk(a,t,r,!0)),i(a))}};return i(this),r}updateEntity2DByOp(t,r,i,n){var a;(a=this.uiCanvas)==null||a.updateEntity2DByOp(t,r,i,n)}},Nvt=class extends hG(dZe,CSe){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let n=new k(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),a=new k(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),o=new dn(n,a),s=new vD(o,new er(16755200));s.visible=!1,this.gizmos.shadowmap=s,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof vD){let r=this.shadow.camera,i=new k(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new k(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Uvt=class extends Sn{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?tG(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},yG=class extends Sn{constructor(e,t,r){super(e,t,r),this._shapeId=null,this._context=r}updateState(e,t){super.updateState(e,t),this.updateShape(),this.refreshAttachedCloners(t)}updateShape(){var i;let e={...this.data.geometry.extrusion.shape};for(let n in e)typeof e[n]=="string"&&(e[n]=this._context.shared.getVariable(e[n],[this.uuid,"geometry","extrusion","shape",n]));let t;if(e.type==="Custom"){let n=e.shapeId;if(n!==this._shapeId&&this.detachShape(),n){this._shapeId=n;let a=this._context.scene.find(n);a!=null&&a.data&&(a.attachedPaths.add(this),t=(i=a.geometry.userData)==null?void 0:i.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let n;switch(e.type){case"Rectangle":n=eG;break;case"Ellipse":n=ZW;break;case"Polygon":n=wxe;break;case"Star":n=xxe;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=n.create({parameters:e}).userData.shape}let r=this.geometry;t&&r.inputs&&(r.inputs.shapeData=t,r.build())}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?tG(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},bG=class extends dG{constructor(e,t,r){super(e,t,r),this.data=t}},E_=class extends zw(Im,MP){constructor(e,t,r){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,r)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let r=kD.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(r){let i,n;for(let a of rv.rootOverrideProps)e[a]===void 0?(i===void 0&&(i={...e}),i[a]=r.data[a]):(n===void 0&&(n={}),n[a]=e[a],i===void 0&&(i={...e}),i[a]=cv.apply(r.data[a],e[a]));return this.overrideData=n,i}else return{...Fn.defaultData,...e,...Ep(Fn.defaultData,rv.rootOverrideProps)}}updateByOp(e,t,r,i){let n;if(this.isInstanceRoot&&!i){if(t=this.transformAssignData(t,r),e.type===0&&e.path.length===0&&this.component)for(let a of rv.rootOverrideProps)a in e.props&&e.props[a]===void 0&&(n===void 0&&(n={...e,props:{...e.props}}),n.props[a]=this.component.data[a]);else if(e.type===0&&e.path.length>0&&rv.rootOverrideProps.includes(e.path[0])){let a=e.path[0];n===void 0&&(n={...e,path:[],props:{[a]:t[a]}})}}super.updateByOp(n??e,t,r,i)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let r=e.scene.find(t.component)??null,i=!1;if(r!==this.oldComponent){if(this.oldComponent){let n=0;for(let a of this.children)if(Vr.is(a))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(a),_G(a),n+=1;else break;this.children.splice(0,n)}i=!0}if(r){let n={};FSe(e,[this.uuid],t.overrides,this,r,r,0,i,n);for(let a of this.children)if(Vr.is(a)){let o=a.data;o.type==="Empty"&&o.animations&&a.traverseEntity(s=>{let l=s.dataPatched;if(s instanceof Sn&&l.bones&&l.boneInverses){let u=s.dataPatched;if(u.bones&&u.boneInverses){let c=u.bones.map(f=>e.scene.find(n[f])),d=u.boneInverses.map(f=>new dt().fromArray(f)),h=new lW(c,d);s.bind(h,s.bindMatrix)}}else s.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function _G(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let r of e.children)Vr.is(r)&&_G(r)}}function Wte(e,t,r,i){return e.component===t&&jW(e.identity,i)?e.overrideData===r?2:1:0}function FSe(e,t,r,i,n,a,o,s,l){if(o>50)return!1;if(i.component!==n){if(i.component){let c=i.component.instances.indexOf(i);c>=0&&i.component.instances.splice(c,1)}n.instances.find(c=>c===i)||n.instances.push(i),i.component=n}n instanceof E_&&n.isInstanceRoot&&n.expandInstanceChildren(e);let u=0;for(let c of n.children)if(Vr.is(c)){let d=[...t,...typeof c.identity=="string"?[c.identity]:c.identity],h=FD.resolve(r,d,1);h!=null&&!(h instanceof En)&&(Object.setPrototypeOf(h,En.prototype),console.error("wrong prototype"));let f=null,g;if(!s){let p=i.children[u];if(f=Vr.is(p)?p:null,f!==null){let m=Wte(f,c,h,d);g=m>=1?f.stateSelection:void 0,m!==2&&(f=null)}if(f===null&&(f=e.scene.findInstance(d)??null,f!==null)){let m=Wte(f,c,h,d);if(g=m>=1?f.stateSelection:void 0,m!==2)f=null;else{let y=f.parent.children.indexOf(f);f.parent.children.splice(y,1),i.children.splice(u,0,f),f.parent===i?y<=u&&console.error("not possible"):(f.parent=i,f.matrixWorldNeedsUpdate=!0,f.resetBBoxNeedsUpdate(),f.updateVisible(),e.pendingDeletes.delete(f))}}}if(f===null){let p=h?cv.apply(c.data,h):c.data;hb.is(p.type)&&(p={...p,type:"Empty"}),f=nv.createEntity(d,p,e),f.overrideData=h,i.add(f),i.children.splice(i.children.length-1,1),i.children.splice(u,0,f),f.updateState(f.data,e),g&&f.changeSelectedState(g,e),e.scene.registerInstanceAndSetUuid(f)}if(f.isBone){let p=f.identity[f.identity.length-1];l[p]=f.uuid}u+=1,FSe(e,t,r,f,c,a,o+1,s,l)}if(!s){let c=u;for(;;){let d=i.children[u];if(Vr.is(d))e.pendingDeletes.add(d);else break;u+=1}i.children.splice(c,u-c)}return!0}var Vvt=class extends zw(l_e,MP){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}},Ba=class extends Sn{constructor(t,r,i){super(t,r,i),this.onBeforeRender=n=>{this.uiCanvas.render(n)},this.uiCanvas=new BSe(t+"-canvas",r.geometry.width,r.geometry.height,i),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,i.shared)})}updateByPatchedOpGeometry(t,r,i){super.updateByPatchedOpGeometry(t,r,i),t.type===0&&(t.props.frame!==void 0&&this.applyFrame(t.props.frame,i.shared),(t.props.width!==void 0||t.props.height!==void 0)&&this.applySize(t.props,i.shared))}applySize(t,r){let i=(t==null?void 0:t.width)??this.dataPatched.geometry.width,n=(t==null?void 0:t.height)??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:i,height:n}),this.applyGeometryParametersFromFrame(r)}applyFrame(t,r){this.uiCanvas.applyFrame(t),this.applyGeometryParametersFromFrame(r),this.applyMaterialParametersFromFrame({shared:r})}applyGeometryParametersFromFrame(t){var i;let r=this.frame;r&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:r.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:r.cornerRadius,cornerType:0})}),(i=this.localGeometry)==null||i.dispose(),this.localGeometry=jM(this.dataPatched.geometry,t,this.data.flatShading,this))}applyMaterialParametersFromFrame(t){let r=this.frame;if(r){let i=r.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),this.material.reset(this.dataPatched.material,t,!0)}}updateEntity2DByOp(t,r,i,n){this.uiCanvas.updateEntity2DByOp(t,r,i,n),t===this.frameId&&r.type===0&&(r.props.cornerRadius!==void 0?this.applyGeometryParametersFromFrame(n):yi(r.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:n}))}get frame(){return this.uiCanvas.frame}get frameId(){var t;return(t=this.frame)==null?void 0:t.uuid}removeInteractionGeometry(t){super.removeInteractionGeometry(t),this.applySize({},t)}updateGeometryInteractions(t,r){super.updateGeometryInteractions(t,r),this.applySize({width:t.width,height:t.height},r)}},kvt=class{constructor(e,t,r){this.variables=[],this.currentTextureIndex=0;let i=ci,n=new Io,a=new Ov;a.position.z=1;let o={passThruTexture:{value:null}},s=c(h(),o),l=new Ci(new Rp(2,2),s);n.add(l),this.setDataType=function(f){return i=f,this},this.addVariable=function(f,g,p){let m=this.createShaderMaterial(g),y={name:f,initialValueTexture:p,material:m,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:Dr,magFilter:Dr};return this.variables.push(y),y},this.setVariableDependencies=function(f,g){f.dependencies=g},this.init=function(){if(r.capabilities.isWebGL2===!1&&r.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(r.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let f=0;f<this.variables.length;f++){let g=this.variables[f];g.renderTargets[0]=this.createRenderTarget(e,t,g.wrapS,g.wrapT,g.minFilter,g.magFilter),g.renderTargets[1]=this.createRenderTarget(e,t,g.wrapS,g.wrapT,g.minFilter,g.magFilter),this.renderTexture(g.initialValueTexture,g.renderTargets[0]),this.renderTexture(g.initialValueTexture,g.renderTargets[1]);let p=g.material,m=p.uniforms;if(g.dependencies!==null)for(let y=0;y<g.dependencies.length;y++){let b=g.dependencies[y];if(b.name!==g.name){let w=!1;for(let x=0;x<this.variables.length;x++)if(b.name===this.variables[x].name){w=!0;break}if(!w)return"Variable dependency not found. Variable="+g.name+", dependency="+b.name}m[b.name]={value:null},p.fragmentShader=`
uniform sampler2D `+b.name+`;
`+p.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let f=this.currentTextureIndex,g=this.currentTextureIndex===0?1:0;for(let p=0,m=this.variables.length;p<m;p++){let y=this.variables[p];if(y.dependencies!==null){let b=y.material.uniforms;for(let w=0,x=y.dependencies.length;w<x;w++){let S=y.dependencies[w];b[S.name].value=S.renderTargets[f].texture}}this.doRenderTarget(y.material,y.renderTargets[g])}this.currentTextureIndex=g},this.getCurrentRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){l.geometry.dispose(),l.material.dispose();let f=this.variables;for(let g=0;g<f.length;g++){let p=f[g];p.initialValueTexture&&p.initialValueTexture.dispose();let m=p.renderTargets;for(let y=0;y<m.length;y++)m[y].dispose()}};function u(f){f.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}this.addResolutionDefine=u;function c(f,g){g=g||{};let p=new qr({uniforms:g,vertexShader:d(),fragmentShader:f});return u(p),p}this.createShaderMaterial=c,this.createRenderTarget=function(f,g,p,m,y,b){return f=f||e,g=g||t,p=p||Di,m=m||Di,y=y||Dr,b=b||Dr,new kr(f,g,{wrapS:p,wrapT:m,minFilter:y,magFilter:b,format:zi,type:i,depthBuffer:!1})},this.createTexture=function(){let f=new Float32Array(e*t*4),g=new so(f,e,t,zi,ci);return g.needsUpdate=!0,g},this.renderTexture=function(f,g){o.passThruTexture.value=f,this.doRenderTarget(s,g),o.passThruTexture.value=null},this.doRenderTarget=function(f,g){let p=r.getRenderTarget(),m=r.xr.enabled,y=r.shadowMap.autoUpdate,b=r.outputEncoding,w=r.toneMapping;r.xr.enabled=!1,r.shadowMap.autoUpdate=!1,r.outputEncoding=Tf,r.toneMapping=Cp,l.material=f,r.setRenderTarget(g),r.render(n,a),l.material=s,r.xr.enabled=m,r.shadowMap.autoUpdate=y,r.outputEncoding=b,r.toneMapping=w,r.setRenderTarget(p)};function d(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function h(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}},ua=new va,yO=new k,qvt=class{constructor(e){let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,t=this.weightAttribute,r=new Float32Array(e.count/3);for(let n=0;n<e.count;n+=3){let a=1;t&&(a=t.getX(n)+t.getX(n+1)+t.getX(n+2)),ua.a.fromBufferAttribute(e,n),ua.b.fromBufferAttribute(e,n+1),ua.c.fromBufferAttribute(e,n+2),a*=ua.getArea(),r[n/3]=a}this.distribution=new Float32Array(e.count/3);let i=0;for(let n=0;n<r.length;n++)i+=r[n],this.distribution[n]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,r){let i=this.distribution[this.distribution.length-1],n=this.binarySearch(this.randomFunction()*i);return this.sampleFace(n,e,t,r)}binarySearch(e){let t=this.distribution,r=0,i=t.length-1,n=-1;for(;r<=i;){let a=Math.ceil((r+i)/2);if(a===0||t[a-1]<=e&&t[a]>e){n=a;break}else e<t[a]?i=a-1:r=a+1}return n}sampleFace(e,t,r,i){let n=this.randomFunction(),a=this.randomFunction();return n+a>1&&(n=1-n,a=1-a),ua.a.fromBufferAttribute(this.positionAttribute,e*3),ua.b.fromBufferAttribute(this.positionAttribute,e*3+1),ua.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(ua.a,n).addScaledVector(ua.b,a).addScaledVector(ua.c,1-(n+a)),r!==void 0&&ua.getNormal(r),i!==void 0&&this.colorAttribute!==void 0&&(ua.a.fromBufferAttribute(this.colorAttribute,e*3),ua.b.fromBufferAttribute(this.colorAttribute,e*3+1),ua.c.fromBufferAttribute(this.colorAttribute,e*3+2),yO.set(0,0,0).addScaledVector(ua.a,n).addScaledVector(ua.b,a).addScaledVector(ua.c,1-(n+a)),i.r=yO.x,i.g=yO.y,i.b=yO.z),this}};function Wvt(e){let t=new Float32Array(e*e*2);for(let r=0;r<e;r++)for(let i=0;i<e;i++){let n=r*e+i;t[n*2+0]=r/(e-1),t[n*2+1]=i/(e-1)}return t}function Gvt(e){let t=Math.ceil(Math.sqrt(e));return Math.max(t,1)}function Hvt(e,t){let r=new Ci(e.geometry,e.material),i=[],n=[],a=new k,o=new k;r.geometry.index!==null&&(r.geometry=r.geometry.toNonIndexed());let s=new qvt(r).build();for(let c=0;c<t;c++)s.sample(a,o),i.push(a.x,a.y,a.z),n.push(o.x,o.y,o.z);let l=new Float32Array(i),u=new Float32Array(n);return{positions:l,normals:u}}function Gte(e,t){let r=e,i=new Float32Array(4*t*t);for(let a=0;a<t*t;a++)i[4*a]=r[3*a],i[4*a+1]=r[3*a+1],i[4*a+2]=r[3*a+2],i[4*a+3]=0;let n=new so(i,t,t,zi,ci);return n.needsUpdate=!0,n}function $vt({size:e}){let t=new Float32Array(4*e*e);for(let i=0;i<e*e;i++)t[4*i]=i,t[4*i+1]=0,t[4*i+2]=0,t[4*i+3]=0;let r=new so(t,e,e,zi,ci);return r.needsUpdate=!0,r}function Xvt(e){let t=new Float32Array(4*e*e);for(let i=0;i<e*e;i++)t[4*i]=0,t[4*i+1]=0,t[4*i+2]=0,t[4*i+3]=0;let r=new so(t,e,e,zi,ci);return r.needsUpdate=!0,r}var Yvt=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform float uTime;
uniform float uSpeed;     // update speed of the particles
uniform vec3 uWorldOffset;    
uniform vec4 uWorldQuaternion;
uniform float uMaxLifeTime;
uniform vec3 uEmitterSize;
uniform float uFPSRatio;     // 1  for 60 FPS

float random (vec2 st) {
    return fract(sin(dot(st.xy,
        vec2(12.9898,78.233)))*
        43758.5453123);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
    vec3 acceleration = force / mass;
    
    return acceleration;
  }
  

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted
    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided
    float lifeTime = uMaxLifeTime;

    // Calculate the position adjustment based on collision
    //     if (collisionFlag > .5) {  
    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0
    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise
    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);

    // Update position based on collision or normal movement
    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);
    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);

    // EMISSION RATE - BIRTH
    // if (isSpawning == 1.0) {
    // Better Approach to avoid If statement
    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;
    originalPosition = mix(originalPosition, newPosition, isSpawning);
    position = mix(position, originalPosition, isSpawning);;
    timeStart = mix(timeStart, uTime, isSpawning);

    // Calculate timeLeft for life normalization
    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);
    float life_Normalize = timeLeft / lifeTime;

    // Use isActive to blend between the calculated color and black
    vec4 activeColor = vec4(position, life_Normalize);
    // if (isActive == 1.0) {
    gl_FragColor = mix(vec4(0.0), activeColor, isActive);

}
`,Kvt=`

    vec3 mod289(vec3 x) {
      return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }
    
    vec4 taylorInvSqrt(vec4 r)
    {
    return 1.79284291400159 - 0.85373472095314 * r;
    }
    
    vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

    float snoise(vec3 v)
    {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
    
    // Permutations
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
    
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
    float n_ = 0.142857142857; // 1.0/7.0
    vec3  ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
    
    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);
    
    //Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                  dot(p2,x2), dot(p3,x3) ) );
    }
    
    vec3 snoiseVec3( vec3 x ){
    
      float s  = snoise(vec3( x ));
      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
      vec3 c = vec3( s , s1 , s2 );
      return c;
    
    }
    
      
    vec3 curlNoise( vec3 p, float seed){
      p += seed;
      const float e = .1;
      vec3 dx = vec3( e   , 0.0 , 0.0 );
      vec3 dy = vec3( 0.0 , e   , 0.0 );
      vec3 dz = vec3( 0.0 , 0.0 , e   );
    
      vec3 p_x0 = snoiseVec3( p - dx );
      vec3 p_x1 = snoiseVec3( p + dx );
      vec3 p_y0 = snoiseVec3( p - dy );
      vec3 p_y1 = snoiseVec3( p + dy );
      vec3 p_z0 = snoiseVec3( p - dz );
      vec3 p_z1 = snoiseVec3( p + dz );
    
      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;
    
      const float divisor = 1.0 / ( 2.0 * e );
      return normalize( vec3( x , y , z ) * divisor );
    
    }


// Classic Perlin noise
float cnoise(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
  return 2.2 * n_xyz;
}


vec3 fbm_vec3(vec3 p, float frequency, float offset)
{
  return vec3(
    cnoise((p+vec3(offset))*frequency),
    cnoise((p+vec3(offset+20.0))*frequency),
    cnoise((p+vec3(offset-30.0))*frequency)
  );
}

`,Qvt=`
  #ifdef USE_COLLIDER
    float restitution = max(uBounce * 2., .01); // Energy Loss
    // SPHERE COLLIDER
    // **************************************************************
    #ifdef USE_SPHERE_COLLIDER       
      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
      vec3 radii = uColliderSize;
      // Adjust position relative to collider
      vec3 relPos = position - uColliderPos;
      // Apply rotation of the collider to the relative position
      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
      // Scale relative position by radii (for ellipsoid collision detection)
      vec3 scaledPos = relPos / radii;
      // Calculate ellipsoidal distance
      float dist = length(scaledPos); // Distance in terms of ellipsoid
      
      // Check for collision
      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {
          // Compute the normal at the collision point, accounting for particle size
        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          
        // Compute the normal at the collision point
        vec3 normal = ellipsoidNormal(adjustedPos, radii);
        // Rotate the normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);
        // Reflect the velocity vector off the normal
        velocity = reflect(velocity, normal) * restitution;

        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif

    // BOX COLLIDER or PLANE COLLIDER 
    // **************************************************************
    #ifdef USE_BOX_COLLIDER
      // Box dimensions and repulsion variables
      vec3 boxHalfSize = uColliderSize / 2.0;
      // Convert world position to box's local space
      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
      // Collision detection
      vec3 localDistance = abs(localPos) - boxHalfSize;
      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    

      // Collision Detected
      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      
        // Find the nearest face normal for bounce direction
        vec3 normal;
        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {
            normal = vec3(sign(localPos.x), 0.0, 0.0);
        } else if (localDistance.y > localDistance.z) {
            normal = vec3(0.0, sign(localPos.y), 0.0);
        } else {
            normal = vec3(0.0, 0.0, sign(localPos.z));
        }            
        // Rotate normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);      
        // Reflect velocity and apply repulsion force
        velocity = reflect(velocity, normal) * restitution;
        
        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif      
  #endif      
  // END COLLIDER    
`,Jvt=`
  #ifdef USE_ATTRACTOR

      #ifdef USE_SPHERE_COLLIDER      
        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
        vec3 radii = uColliderSize;
        // Adjust position relative to collider
        vec3 relPos = position - uColliderPos;
        // Apply rotation of the collider to the relative position
        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
        // Scale relative position by radii (for ellipsoid collision detection)
        vec3 scaledPos = relPos / radii;
        // Calculate ellipsoidal distance
        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid
        float insideCheck = 1.0;

      #endif


      #ifdef USE_BOX_COLLIDER
        // Box dimensions
        vec3 boxHalfSize = uColliderSize / 2.0;
        // Convert world position to box's local space
        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
        vec3 localDistance = abs(localPos) - boxHalfSize;
        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));
        float insideCheck = particleSize;
      #endif      
  
      // Apply vortex force inside the Helper
      #ifdef USE_FORCE_LOCAL_SPACE
        if (distToSurface <= insideCheck ) {    
            // Define parameters for the attractor field
            #ifdef USE_SPHERE_COLLIDER      
              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed
            #endif

            #ifdef USE_BOX_COLLIDER
              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed
              #endif

            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)
          
            // Use the same radii calculation code as for the collider
            vec3 attractorRadii = uColliderSize;
            // Adjust position relative to attractor center
            vec3 relPos = position - uColliderPos;
            // Apply rotation of the collider to the relative position
            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
            // Scale relative position by radii (for ellipsoid attraction)
            vec3 scaledPos = relPos / attractorRadii;

            // Calculate ellipsoidal distance as attractor radius
            float attractorRadius = length(scaledPos);
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * attractorStrength;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= attractorDamping;
        }
      #else 
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= uForceDamping;
      #endif    
  #endif      
`,Zvt=`
  #ifdef USE_VORTEX
    // Box dimensions
    vec3 boxHalfSize = uColliderSize / 2.0;
    // Convert world position to box's local space
    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
    vec3 localDistance = abs(localPos) - boxHalfSize;
    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));

    // Apply vortex force inside the box
    if (distToSurface <= particleSize) {
      float vortexStrength = uForceIntensity;
      vec3 localTopCenter = vec3(0.0, 0., 0.0);

      // Transform the local top center to the world space
      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);
      // Calculate the vector from particle to vortex center
      vec3 vortexVector = vortexCenter - position;

      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector
      // Note: important to add a tiny z component to the up vector to avoid instability
      vec3 upVector = vec3(0.0, 1.0, 0.01);
      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));
      rotationAxis = normalize(rotationAxis);

      // Add rotational component to velocity
      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; 

      vec3 rotationVelocity = rotationAxis * rotationSpeed;
      // velocity += rotationVelocity * 0.005 ;
      velocity = rotationVelocity * 0.005 ;

      // Calculate vortex force
      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;
      // Apply the vortex force to the particle
      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);
      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);
    }
  #endif      
`,eyt=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform sampler2D uDirections;     
uniform vec3 uDirectionsAxis;
uniform vec4 uWorldQuaternion;
uniform vec3 uGravity;        
uniform float uNoiseStrength;     // Variation of the noise
uniform float uNoiseScale;        // Scale of the noise
uniform float uNoiseSeed;         // Seed of the noise
uniform float particleSize;
uniform float uSpeed;     // update speed of the particles
uniform float uRandomMassFactor;

// COLLIDER
uniform vec3 uColliderPos;                // Collider Position
uniform vec3 uColliderSize;               // Collider Dimension
uniform vec4 uColliderQuaternion;         // Collider Rotation
uniform vec4 uColliderQuaternionInvert;   // Collider Rotation
uniform float uBounce;                    // Bounce factor
uniform float uForceDamping;
uniform float uForceIntensity;


`+Kvt+`
float rand(vec2 co){
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
 } 
vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
  
  return acceleration;
}

vec4 conjugate(vec4 q) {
  return vec4(q.w, -q.x, -q.y, -q.z);
}

// Function to compute the normal of the ellipsoid at a given point
vec3 ellipsoidNormal(vec3 p, vec3 radii) {
  return normalize(p / (radii * radii));
}

float friction = .3;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    vec3 directions = texture2D( uDirections, vUv ).xyz;    
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float mass = rand(originalPosition.xy) * 0.5 + 0.5;
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active
    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision

    // Randomness Mass
    mass = (1.0 - (uRandomMassFactor * mass));
    
    if (isActive == 1.0) {
      // **************************************************************
      // FORCES NOISES
      // **************************************************************
      #ifdef USE_CURL_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {
          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;
        }
      #endif
      // **************************************************************
      #ifdef USE_SIMPLEX_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {
          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);
        }
      #endif
      // ************************************************************** 
      #ifdef USE_FBM_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), uNoiseSeed);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      
          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;
        }
      #endif

      // COLLIDER
      ${Qvt}
      // ATTRACTION
      ${Jvt}  
      // VORTEX
      ${Zvt}
    } 
    // End isActive

    // SPAWN BIRTH 
    // **************************************************************
    // if (isSpawning == 1.)
    #ifdef USE_NORMALS
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);
    #else
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    
    #endif
    
    // if (collisionFlag == 0.0)
    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);

    gl_FragColor = vec4(velocity, collisionFlag);
}
`,NSe=`

  // Linear Fade In
  float linearFadeIn(float t) {
    return t;
  }


  // linear fade out
  float linearFadeOut(float t) {
    return 1.0 - t;
  }
  
  float linearInOut(float t) {
    return t < 0.5 ? t :  (1.0 - t);  
  }

    // lerp
    float lerp(float a, float b, float t) {
      return a + (b - a) * t;
    }

  // Ease In Out Quart
  float exponentialInOut(float t) {
    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :
    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :
    1.0;
   }

  // constant
  float constant(float t) {
    return 1.0;
  } 
`,tyt=`

float rand(vec3 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

vec3 applyQuaternionToVector( vec4 q, vec3 v ){
  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
    
  return acceleration;
}
`,ryt=`
vec3 rgb2xyz (in vec3 rgb) {
    float r = rgb.r;
	float g = rgb.g;
	float b = rgb.b;

	r = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);
	g = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);
	b = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);

	float x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);
	float y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);
	float z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);
    
    vec3 xyz = vec3(
        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,
        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,
        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0
    );
    return(xyz);
}

vec3 xyz2lab (in vec3 xyz) {
	float x = xyz.x / 95.047;
	float y = xyz.y / 100.0;
	float z = xyz.z / 108.883;

	x = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);
	y = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);
	z = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);

    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));
    return(lab);
}

vec3 rgb2lab(in vec3 rgb) {
    vec3 xyz = rgb2xyz(rgb);
    vec3 lab = xyz2lab(xyz);
    return(lab);
}

vec3 xyz2rgb (in vec3 xyz) {
	float x = xyz.x / 100.0;
	float y = xyz.y / 100.0;
	float z = xyz.z / 100.0;
	
    
	float r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);
	float g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);
	float b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);

	r = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;
	g = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;
	b = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;

	r = min(max(0.0, r), 1.0);
	g = min(max(0.0, g), 1.0);
	b = min(max(0.0, b), 1.0);

	return(vec3(r, g, b));
}

vec3 lab2xyz (in vec3 lab) {
    float l = lab.x;
	float a = lab.y;
	float b = lab.z;

  	float y = (l + 16.0) / 116.0;
	float x = a / 500.0 + y;
	float z = y - b / 200.0;

	float y2 = pow(y, 3.0);
	float x2 = pow(x, 3.0);
	float z2 = pow(z, 3.0);

  	y = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;
	x = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;
	z = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;

	x *= 95.047;
	y *= 100.0;
	z *= 108.883;

	return(vec3(x, y, z));
}
vec3 lab2rgb (in vec3 lab) {
    vec3 xyz = lab2xyz(lab);
    vec3 rgb = xyz2rgb(xyz);
    return(rgb);
}

`,iyt=`
  uniform sampler2D uPosition;
  uniform float uSize;
  uniform float uSizeEnd;
  uniform vec3 uWorldOffset;
  uniform vec4 uWorldQuaternion;
  // Billboard Behavior - Currently at Zero, but we can change that
  uniform float uRotation;
  uniform float uRotationEnd;
  uniform vec2 center;

  // Randomness
  uniform float uRandScaleFactor;
  uniform float uRandRotationFactor;

  attribute vec2 ref;

  varying float v_LifeLeft;    // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  ${tyt}
  ${NSe}
`,nyt=({easeSize:e="linearFadeOut"})=>`
  vUv = uv;  
  vRef = ref;
  // Normalized LifeTime 1 to 0
  float lifeLeft = texture2D(uPosition, ref).w;
  v_LifeLeft = lifeLeft;
  // Position From DataTexture Simulation
  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;
  // Apply World Quaternion
  pos = applyQuaternionToVector(uWorldQuaternion, pos);  
            
  #ifdef  USE_SIZE_END
    // Scaled Over Time
    float t = 1. - lifeLeft;
    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd
    vec3 scaledPosition = position * vec3(currentSize);
  #else
    // Change Size Behavior over LifeTime
    float easeSize = ${e}(1. - lifeLeft);
    // Scaled Over Time
    vec3 scaledPosition = position * vec3(uSize * easeSize);
  #endif

  // Billboard Behavior
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    
  // Randomness 
  float randRef = rand(ref);
  scale *= (1.0 - (uRandScaleFactor * randRef));
  // Rotation
  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);
  float originalRotation = (1.0 - uRotation) * 2.0 * PI;
  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;
  // OverTime
  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);

  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;
  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;
  
  mat4 instanceMatrix = mat4(
    vec4(1.0, 0.0, 0.0, 0.0),
    vec4(0.0, 1.0, 0.0, 0.0),
    vec4(0.0, 0.0, 1.0, 0.0),
    vec4(pos.x, pos.y, pos.z, 1.0)
  );  

  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix  * mvPosition;   
`,ayt=`
  uniform vec4 uColor;                // start color
  uniform vec4 uColor2;               // end color
  uniform sampler2D uTexture;         // texture
  varying float v_LifeLeft;   // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  float random(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }
  `+NSe+`  
  ${ryt}

`,oyt=({easeOpacity:e="linearFadeOut"})=>`  
  // if Particle is dead, hide it
  if (v_LifeLeft <= 0.005 ) {
    discard;
  }

  #ifdef USE_RANDOM_COLORING
    float randVal = random(vRef); // Generate a random value based on the reference
    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors
  #else
    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);
  #endif

  // Opacity over Life Time
  float finalAlpha = ${e}(1. - v_LifeLeft);  
  vec4 textureColor = texture2D(uTexture, vUv).rgba; 
  finalColor = textureColor.rgb * color.rgb;
  finalAlpha = color.a * textureColor.a * finalAlpha;
  
  gl_FragColor = vec4(finalColor, finalAlpha);     

`,syt=class extends qr{constructor(e,t){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,t),this.context=t}reset(){}init(e,t){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],zn.startContext(zn.globalContext),this.lightLayer=new np(0,"",{...Yn.defaultData("light","phong"),visible:!1},new aG,{},t.shared),zn.endContext(zn.globalContext),this.build()}updateState(e){e.coloring!==void 0&&(this.isColoringRandom=e.coloring==="random"),e.color!==void 0&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),e.color2!==void 0&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),e.size!==void 0&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),e.ease!==void 0&&(this.easeOpacity=e.ease,this.build()),e.easeSize!==void 0&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new Lxe;return e.needsJitter=this.needsJitter,e.addFragmentParsCode(Fht),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode(Nht),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(iyt),e.addFragmentParsCode(ayt),e.addVertexFinalCode(nyt({easeSize:this.easeSize})),e.addFragmentFinalCode(oyt({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},qB=class{constructor(e,t,r,i){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=r,this.textureSize=Gvt(t);let n=1;this.targetMesh=(i==null?void 0:i.type)==="Mesh"&&i?i:this.getMesh(r,n);let{positions:a,dataTexture:o,dataTextureNormals:s}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(r,n));this.positionsTexture=o,this.positionsAttribute=a,this.directionsTexture=s}createPositions(e,t){let{positions:r,normals:i}=Hvt(t,e*e),n=Gte(r,e),a=Gte(i,e);return{dataTexture:n,positions:r,dataTextureNormals:a}}getMesh(e,t){let r=null;switch(e){case"SphereEmitterShape":{r=new m_(t*.5,32,32);break}case"TorusEmitterShape":{r=new y_e(t*.5,.3,15,40);break}case"ConeEmitterShape":{r=new hW(t,t,15);break}case"BoxEmitterShape":{r=new Af(t,t,t);break}case"PlaneEmitterShape":{r=new Rp(t,t),r.rotateX(-Math.PI/2);break}case"MeshEmitterShape":{r=new m_(t,32,32);break}default:{r=new m_(t,32,32);break}}return new Ci(r,new Hm({color:16711680}))}applyToShader(e,t){this.size=new k().fromArray(t.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function q1(e){let t={...e},r=DD.defaultData;t.forceFieldObjectId&&(t.colliderEntityId=t.forceFieldObjectId);let i={...r.shape,...t.shape},n={...r.renderMaterial,...t.renderMaterial};return{...r,...t,shape:i,renderMaterial:n}}var lyt=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU

uniform sampler2D uIndex; // Texture with corresponding index
uniform float uLastIndexEmitted; // Last emitted index
uniform float uParticlesToEmit; // Number of particles to emit on that frame
uniform float uTime;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    float particleIndex = texture(uIndex, vUv).x;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;


    // ********** Detect Colision to Create a flag and use it in position **********
    // We are doing this here, so

    // ********** Emit Particles **********
    // X = isSpawning 0.0 or 1.0
    // Y = isActive 0.0 or 1.0
    // Check if the vertex index is between the first value and the last value
    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {
    //     // Emit a particle by writing 1 to the red channel of the color output
    //     // r: 1. == emit the particle
    //     // g: 1. == particle is now active
    //     timeStart = uTime;
    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);
    // } else {
    //     // The Particle is either already emitted or not in the range of the particles to emit
    //     // Do not emit a particle by writing 0 to the red channel of the color output        
    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);
    // }
    // Determine if the particle is within the emission range
    float emitLowerBound = step(uLastIndexEmitted, particleIndex);
    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);
    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise

    // Set timeStart and color
    timeStart = mix(timeStart, uTime, emitParticle);
    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);


}
`,WB=10,uyt=class extends li{constructor(e,t){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new oZe,this.currentWorldPosition=new k,this.systemQuaternion=new ur,this.worldGravity=new k(0,0,0),this.directionAxis=new k(0,0,0),this.colliderV3=new k(0,0,0),this.colliderQuaternion=new ur(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=t,this.shared=t.context.shared;let r=t.data;this.material=new syt(r.renderMaterial,t.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:r.renderMaterial.color},uColor2:{value:r.renderMaterial.color2},uPosition:{value:new k(0,0,0)},uEmissionData:{value:new k(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new k(0,0,0)},uWorldQuaternion:{value:new hr(0,0,0,1)},uRandScaleFactor:{value:r.randomScale??0},uRandRotationFactor:{value:r.randomRotation??0},uRotation:{value:r.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:r.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,r.renderMaterial.texture),this.init(r)}setTexture(e,t){let r=t.data;if(typeof t=="string"){let i=this.shared.image(t),n=new Vi(i.img);n.needsUpdate=!0,e.uTexture.value=n;return}if(typeof r!="string"){let i=new Image;i.onload=()=>{let o=new Vi(i);o.needsUpdate=!0,e.uTexture.value=o};let n=new Blob([r],{type:"image/*"}),a=URL.createObjectURL(n);i.src=a}}updateGeometryAttributes(e,t){var i;let r=Wvt(t);!((i=this.emitterShape)!=null&&i.positionsAttribute)||e.geometry.setAttribute("ref",new gM(r,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,t){var o;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset){this.reset();return}this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let r=1e3/t,i=this.targetFPS/r,n=this.previousRatio+(i-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=n,this.previousRatio=n;let a=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=a,this.material.uniforms.uPosition.value=(o=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))==null?void 0:o.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0],t=this.simFeaturesDefinition.USE_COLLIDER||this.simFeaturesDefinition.USE_ATTRACTOR||this.simFeaturesDefinition.USE_VORTEX;if(e.destroyedInAction&&t&&this.init(q1({...this.system.data,colliderEntityId:null})),!e||e.destroyedInAction)return;e.getWorldPosition(this.colliderV3),this.colliderV3.y===0&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let r=e.data.size;this.colliderV3.fromArray(r),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,t){if(!this.velocitySimRT||!this.positionSimRT)return;t[2]==="size"&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),t[2]==="sizeEnd"&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let r=(i,n)=>{let a=[...this.system.data.shape.size];a[i]=n,this.updateParticleState({shape:{...this.system.data.shape,size:a}})};t[2]==="shape_size_0"&&r(0,e),t[2]==="shape_size_1"&&r(1,e),t[2]==="shape_size_2"&&r(2,e),t[2]==="speed"&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/WB),t[2]==="gravity"&&this.worldGravity.set(0,e/100,0),t[2]==="noiseStrength"&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),t[2]==="noiseScale"&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),t[2]==="direction_x"&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),t[2]==="direction_y"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),t[2]==="direction_z"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){var t,r,i;if(!(!this.positionSimRT||!this.velocitySimRT)){if(this.shouldReInitGPUCompute(e)&&this.init(q1(this.system.data)),e.life!==void 0&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),e.speed!==void 0&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/WB),e.collisionBounce!==void 0&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),e.noiseStrength!==void 0&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),e.noiseScale!==void 0&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),e.noiseSeed!==void 0&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),e.randomMass!==void 0&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),((t=e.renderMaterial)==null?void 0:t.size)!==void 0){let n=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(n)}if(((r=e.renderMaterial)==null?void 0:r.spriteRotation)!==void 0&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),e.shape!==void 0){let n=e.shape.size??this.system.data.shape.size,a=[Number(this.shared.getVariable(n[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(n[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(n[2],[this.uuid,"particles","shape_size_2"]))],o={...q1(this.system.data).shape,size:a};(i=this.emitterShape)==null||i.applyToShader(this.positionSimRT.material.uniforms,o)}if(e.gravity!==void 0&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),e.direction!==void 0){let n=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(n),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}e.randomRotation!==void 0&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),e.randomScale!==void 0&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(e.forceIntensity!==void 0&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),e.forceDambing!==void 0&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let t=[Number(e[0])*Ot.DEG2RAD,Number(e[1])*Ot.DEG2RAD,Number(e[2])*Ot.DEG2RAD],r=new Bn(t[0],t[1],t[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(r).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:t,rootObjectType:r,colliderEntityId:i,shape:n,emitTimeDuration:a,emitTimeCycle:o,life:s,directionMode:l,noiseType:u}=e;return t!==void 0||r!==void 0||i||i===null||o!==void 0||n!==void 0||s!==void 0||a!==void 0||l!==void 0||u!==void 0}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:e.emitTimeCycle==="infinity"?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let t=setInterval(()=>{if(this.emitterShape)if(isNaN(this.emitterShape.positionsTexture.source.data.data[0])){this.init(e);return}else clearInterval(t)},100);if(!this.emitterShape)return;let r=new kvt(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),i=this.updateSimulationDefinition(e),n=r.addVariable("uCurrentPosition",i+Yvt,this.emitterShape.positionsTexture),a=r.addVariable("uCurrentVelocity",i+eyt,this.emitterShape.directionsTexture),o=r.addVariable("uCurrentEmissionRate",lyt,Xvt(this.emitterShape.textureSize));r.setVariableDependencies(n,[n,a,o]),r.setVariableDependencies(a,[n,a,o]),r.setVariableDependencies(o,[n,a,o]);let s=$vt({size:this.emitterShape.textureSize}),l={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new k(0,0,0)},uWorldQuaternion:{value:new hr(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new k(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};n.material.uniforms=l;let u=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(u),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let c=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),d={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new hr(0,0,0,1)},uColliderPos:{value:new k(0,0,0)},uColliderSize:{value:new k(0,0,0)},uForceIntensity:{value:c?c.forceIntensity:0},uForceDamping:{value:c?c.forceDambing:0},uColliderQuaternion:{value:new hr(0,0,0,1)},uColliderQuaternionInvert:{value:new hr(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/WB}};a.material.uniforms=d;let h={uIndex:{value:s},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};o.material.uniforms=h;let f=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],g={...q1(this.system.data).shape,size:f};this.emitterShape.applyToShader(n.material.uniforms,g),r.init(),this.gpuCompute=r,this.positionSimRT=n,this.velocitySimRT=a,this.emissionRateSimRT=o,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){let t=Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),r=Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),i=Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]));return[t,r,i]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let r=this.system.getColliderData(e.colliderEntityId);switch(r==null?void 0:r.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0;break}let i=r==null?void 0:r.colliderType;i==="sphere"&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),i==="box"&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),(r==null?void 0:r.forceRange)==="helper"&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}e.directionMode==="normals"&&(this.simFeaturesDefinition.USE_NORMALS=!0),e.noiseType==="curl"&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),e.noiseType==="simplex"&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),e.noiseType==="fbm"&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let t="";for(let[r,i]of Object.entries(this.simFeaturesDefinition))i&&(t+=`#define ${r}
`);return t}createShape(e,t){this.emitterShape&&this.emitterShape.dispose();let r=new k(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if(e.type==="MeshEmitterShape"){let i=null;return this.system.context.scene.traverseEntity(n=>{n.uuid===e.fromMeshId&&(i=n)}),i?new qB(r,t,e.type,i):new qB(r,t,"SphereEmitterShape")}else return new qB(r,t,e.type)}createPrimaryEmitter(e){let t,r=e*e;return t=new bJe(new Rp(1,1,1),this.material,r),this.updateGeometryAttributes(t,e),this.material.needsUpdate=!0,t.onBeforeRender=()=>{this.applyWorldSpace()},t}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:t,loopDuration:r=0}){return Math.ceil(e*(t+r))}dispose(){var e,t,r;!this.gpuCompute||((t=(e=this.rootObject)==null?void 0:e.parent)==null||t.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),(r=this.emitterShape)==null||r.dispose())}GoEmitSomeParticles(e,t){let r=e-this.lastEmitTime,i=1/t;if(r>=i){let n=Math.max(1,Math.floor(r/i));return this.lastEmitTime=e,this.emittedParticlesAmount+n>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=n,n}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(q1(this.system.data))}startEmitting(e){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=e}stopEmitting(){this.isEmitting=!1}},BE=class extends ho{constructor(e,t,r){super(e,t),this.type="ParticleSystem",this.geometry=new Wt,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.timeoutId=void 0,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=i=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(i))},this.context=r,this.data={...t,...q1(t)},this.geometry.setAttribute("position",new Pt([],3)),this.material=new Hm({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new uyt(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let t=this.data.emitTimeCycle==="one_time";if((this.data.emitTimeCycle==="loop"||t)&&this.currentLoopTime>this.data.emitTimeDuration*1e3&&(this.stopped||(this.stop(),t||this.start(this.data.emitTimeDelay*1e3))),this.emitter&&this.started){let r=this.actualTime/1e3;this.emitter.update(r,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(t=>t.identity===e)}getColliderData(e){let t=this.colliderEntities.find(r=>r.identity===e);return t?t.data:null}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),yi(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...Jn.drop(e,1).props}}),yi(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...Jn.drop(e,1).props}})}updateState(e,t){super.updateState(e,t),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(e.colliderEntityId!==void 0&&e.colliderEntityId!==null){let t=this.context.scene.find(e.colliderEntityId);this.colliderEntities=t?[t]:[]}e.colliderEntityId===null&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){var t;if(this.currentLoopTime=0,e){this.timeoutId=window.setTimeout(()=>{this.start(0)},e);return}this.started=!0,this.stopped=!1,this.isFrozen=!1,(t=this.emitter)==null||t.startEmitting(this.actualTime/1e3)}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,(e=this.emitter)==null||e.stopEmitting(),clearTimeout(this.timeoutId)}reset(){var e;this.started=!1,this.stopped=!1,(e=this.emitter)==null||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};function cyt(){try{let e=window.location.href;if(e.includes("reducesubdiv=")){let t=e.indexOf("reducesubdiv=")+13;return parseInt(e.slice(t,t+1))}}catch{}}var GB=cyt();function dyt(e,t,r){var n;GB!==void 0&&(((n=t==null?void 0:t.geometry)==null?void 0:n.subdivisions)??0)>GB&&(console.log("reducing subdivisions",t.name,t.geometry.subdivisions),t.geometry.subdivisions=GB);let i;return t.geometry.type==="TextGeometry"?new dG(e,t,r):t.geometry.type==="InputGeometry"?new bG(e,t,r):(t.geometry.type==="SubdivGeometry"?i=new zM(e,t,r):t.geometry.type==="PathGeometry"?i=new yG(e,t,r):t.geometry.type==="VectorGeometry"?i=new Uvt(e,t,r):t.geometry.type==="BooleanGeometry"?i=new mb(e,t,r):t.geometry.type==="ShapeBlendGeometry"?i=new gb(e,t,r):t.geometry.type==="UIGeometry"?i=new Ba(e,t,r):i=new Sn(e,t,r),i)}function wG(e,t,r){return console.assert(t.type!==void 0),t.type==="Mesh"?dyt(e,t,r):t.type==="Empty"?new C_(e,t):t.type==="Particle"?new BE(e,t,r):t.type==="ParticleCollider"?new zE(e,t,r):t.type==="Splat"?new C_(e,t):t.type==="Bone"?new Vvt(e,t):t.type==="Page"?new Kn(e,t,r):t.type==="PointLight"?new Nvt(e,t,r):t.type==="SpotLight"?new TSe(e,t,r):t.type==="DirectionalLight"?new PSe(e,t,r):t.type==="Component"||t.type==="Instance"?new E_(e,t,r):hb.is(t.type)?new Ua(e,t):(console.error(t),new C_(e,t))}nv.createEntity=wG;function hyt(e,t,r){let i=wG(e.identity,t,r),n=e.children,a=e.attachedPaths,o=e.parent,s=e.component,l=e.instances,u=e.overrideData,c=e.uuid,d=e.stateSelection;e.dispose();for(let h of Object.keys(e))delete e[h];Object.setPrototypeOf(e,Object.getPrototypeOf(i));for(let h of Object.keys(i))e[h]=i[h];e.children=[...e.children,...n],e.attachedPaths=a,e.parent=o,e.component=s,e.instances=l,e.uuid=c,e.overrideData=u,e.updateState(e.data,r),d&&e.changeSelectedState(d,r),e.resetBBoxNeedsUpdate()}nv.changeEntityProptotype=hyt;nv.Cloner=Us;function fyt(e,t,r,i){e.updateByOp(t,r,i,!1)}var T0=5,LE=new Wt;LE.setAttribute("position",new tr(new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),3));var pR=class extends KJe{constructor(e){super({...e,depthTest:!1,depthWrite:!1,glslVersion:ZV,vertexShader:`
				precision highp float;
				in vec3 position;
				void main() {
					gl_Position = vec4(position, 1);
				}
			`})}customProgramCacheKey(){return""}};function pyt(){return{shapeInput:()=>`
			const float posRowCoord = ${.5/T0};  // vec4: px py pz opType
			const float quatRowCoord = ${1.5/T0};  // vec4: qx qy qz qw
			const float param1RowCoord = ${2.5/T0};// vec4: type param1 param2 param3
			const float param2RowCoord = ${3.5/T0};// vec4: blendRange roundness scale param4
			const float colorRowCoord = ${4.5/T0}; // vec4: r g b a
			uniform sampler2D shapesDataTexture;
			vec4 shapePos(float iin) { 
				vec4 r = texture(shapesDataTexture, vec2(iin, posRowCoord));
				return r;
			}
			vec4 shapeQuat(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, quatRowCoord));
				return r;
			}
			vec4 shapeParams1(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, param1RowCoord));
				return r;
			}
			vec4 shapeParams2(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, param2RowCoord));
				return r;
			}
			vec4 shapeColor(float iin) {
				vec4 r = texture(shapesDataTexture, vec2(iin, colorRowCoord));
				return r;
			}
		`,getxyzi:`
			// this code must complement lookup
			float xi = mod(gl_FragCoord.x - 0.5, VOXEL_RESOLUTION);
			float yi = mod(gl_FragCoord.y - 0.5, VOXEL_RESOLUTION);
			float zi = floor((gl_FragCoord.x - 0.5) * INV_VOXEL_RESOLUTION) + floor((gl_FragCoord.y - 0.5) * INV_VOXEL_RESOLUTION) * Z_LAYERS_PER_ROW;
		`,lookup:`
			uniform sampler2D potentialPassTexture;
			uniform sampler2D voxelPassTexture; // includes normal (in xyz) and key (in w)
			
			// box or marching cube lookup value in value texture, integer box coord inputs
			// this code must complement codebits.getxyzi
			vec4 look(float xi, float yi, float zi, sampler2D rt) {// range 0 .. numv etc
				vec2 uv = vec2(
					mod(zi, Z_LAYERS_PER_ROW) + (xi + 0.5) / VOXEL_RESOLUTION,
					floor(zi / Z_LAYERS_PER_ROW) + (yi + 0.5) / VOXEL_RESOLUTION
				); 
				uv /= Z_LAYERS_PER_ROW;
				return texture(rt, uv);
			}
		`,getpart:`
			float getpart(inout float a, float b) {
				float t = floor(a/b);
				float r = a - t*b;
				a = t;
				return r;
			}
		`,triTable:new Float32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,1,1,8,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,10,2,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,9,9,2,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,2,8,10,2,8,9,10,-1,-1,-1,-1,-1,-1,-1,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,0,0,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,11,3,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,1,11,9,1,11,8,9,-1,-1,-1,-1,-1,-1,-1,1,10,3,3,10,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,10,0,10,8,0,10,11,8,-1,-1,-1,-1,-1,-1,-1,0,9,3,9,11,3,9,10,11,-1,-1,-1,-1,-1,-1,-1,10,8,9,11,8,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,4,4,3,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,7,4,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,4,1,7,4,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,2,1,7,4,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,4,3,4,0,3,10,2,1,-1,-1,-1,-1,-1,-1,-1,10,2,9,2,0,9,7,4,8,-1,-1,-1,-1,-1,-1,-1,9,10,2,7,9,2,3,7,2,4,9,7,-1,-1,-1,-1,7,4,8,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,4,11,4,2,11,4,0,2,-1,-1,-1,-1,-1,-1,-1,1,0,9,7,4,8,11,3,2,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,9,2,11,9,1,2,9,-1,-1,-1,-1,1,10,3,10,11,3,4,8,7,-1,-1,-1,-1,-1,-1,-1,10,11,1,11,4,1,4,0,1,4,11,7,-1,-1,-1,-1,8,7,4,11,0,9,10,11,9,3,0,11,-1,-1,-1,-1,11,7,4,9,11,4,10,11,9,-1,-1,-1,-1,-1,-1,-1,4,5,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,9,3,8,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,0,0,5,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,5,8,5,3,8,5,1,3,-1,-1,-1,-1,-1,-1,-1,10,2,1,4,5,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,3,10,2,1,5,9,4,-1,-1,-1,-1,-1,-1,-1,10,2,5,2,4,5,2,0,4,-1,-1,-1,-1,-1,-1,-1,5,10,2,5,2,3,4,5,3,8,4,3,-1,-1,-1,-1,4,5,9,11,3,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,11,0,11,8,0,5,9,4,-1,-1,-1,-1,-1,-1,-1,4,5,0,5,1,0,11,3,2,-1,-1,-1,-1,-1,-1,-1,5,1,2,8,5,2,11,8,2,5,8,4,-1,-1,-1,-1,11,3,10,3,1,10,4,5,9,-1,-1,-1,-1,-1,-1,-1,5,9,4,1,8,0,1,10,8,10,11,8,-1,-1,-1,-1,0,4,5,11,0,5,10,11,5,3,0,11,-1,-1,-1,-1,8,4,5,10,8,5,11,8,10,-1,-1,-1,-1,-1,-1,-1,8,7,9,9,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,9,3,5,9,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,7,0,7,1,0,7,5,1,-1,-1,-1,-1,-1,-1,-1,3,5,1,7,5,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,7,9,7,5,9,2,1,10,-1,-1,-1,-1,-1,-1,-1,2,1,10,0,5,9,0,3,5,3,7,5,-1,-1,-1,-1,2,0,8,5,2,8,7,5,8,2,5,10,-1,-1,-1,-1,5,10,2,3,5,2,7,5,3,-1,-1,-1,-1,-1,-1,-1,5,9,7,9,8,7,2,11,3,-1,-1,-1,-1,-1,-1,-1,7,5,9,2,7,9,0,2,9,11,7,2,-1,-1,-1,-1,11,3,2,8,1,0,8,7,1,7,5,1,-1,-1,-1,-1,1,2,11,7,1,11,5,1,7,-1,-1,-1,-1,-1,-1,-1,8,5,9,7,5,8,3,1,10,11,3,10,-1,-1,-1,-1,0,7,5,9,0,5,0,11,7,10,0,1,0,10,11,-1,0,10,11,3,0,11,0,5,10,7,0,8,0,7,5,-1,5,10,11,5,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,6,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,0,9,6,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,1,8,9,1,6,10,5,-1,-1,-1,-1,-1,-1,-1,5,6,1,1,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,6,1,6,2,1,8,0,3,-1,-1,-1,-1,-1,-1,-1,5,6,9,6,0,9,6,2,0,-1,-1,-1,-1,-1,-1,-1,8,9,5,2,8,5,6,2,5,8,2,3,-1,-1,-1,-1,11,3,2,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,11,0,2,11,5,6,10,-1,-1,-1,-1,-1,-1,-1,9,1,0,11,3,2,6,10,5,-1,-1,-1,-1,-1,-1,-1,6,10,5,2,9,1,2,11,9,11,8,9,-1,-1,-1,-1,11,3,6,3,5,6,3,1,5,-1,-1,-1,-1,-1,-1,-1,11,8,0,5,11,0,1,5,0,6,11,5,-1,-1,-1,-1,6,11,3,6,3,0,5,6,0,9,5,0,-1,-1,-1,-1,9,5,6,11,9,6,8,9,11,-1,-1,-1,-1,-1,-1,-1,6,10,5,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,4,3,7,4,10,5,6,-1,-1,-1,-1,-1,-1,-1,0,9,1,6,10,5,7,4,8,-1,-1,-1,-1,-1,-1,-1,5,6,10,7,9,1,3,7,1,4,9,7,-1,-1,-1,-1,2,1,6,1,5,6,8,7,4,-1,-1,-1,-1,-1,-1,-1,5,2,1,6,2,5,4,0,3,7,4,3,-1,-1,-1,-1,7,4,8,5,0,9,5,6,0,6,2,0,-1,-1,-1,-1,9,3,7,4,9,7,9,2,3,6,9,5,9,6,2,-1,2,11,3,4,8,7,5,6,10,-1,-1,-1,-1,-1,-1,-1,6,10,5,2,7,4,0,2,4,11,7,2,-1,-1,-1,-1,9,1,0,8,7,4,11,3,2,6,10,5,-1,-1,-1,-1,1,2,9,2,11,9,11,4,9,4,11,7,6,10,5,-1,7,4,8,5,11,3,1,5,3,6,11,5,-1,-1,-1,-1,11,1,5,6,11,5,11,0,1,4,11,7,11,4,0,-1,9,5,0,5,6,0,6,3,0,3,6,11,7,4,8,-1,9,5,6,11,9,6,9,7,4,9,11,7,-1,-1,-1,-1,9,4,10,10,4,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,10,4,10,9,4,3,8,0,-1,-1,-1,-1,-1,-1,-1,1,0,10,0,6,10,0,4,6,-1,-1,-1,-1,-1,-1,-1,1,3,8,6,1,8,4,6,8,10,1,6,-1,-1,-1,-1,9,4,1,4,2,1,4,6,2,-1,-1,-1,-1,-1,-1,-1,8,0,3,9,2,1,9,4,2,4,6,2,-1,-1,-1,-1,4,2,0,6,2,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,4,2,8,6,2,4,-1,-1,-1,-1,-1,-1,-1,9,4,10,4,6,10,3,2,11,-1,-1,-1,-1,-1,-1,-1,2,8,0,11,8,2,10,9,4,6,10,4,-1,-1,-1,-1,2,11,3,6,1,0,4,6,0,10,1,6,-1,-1,-1,-1,1,4,6,10,1,6,1,8,4,11,1,2,1,11,8,-1,4,6,9,6,3,9,3,1,9,3,6,11,-1,-1,-1,-1,1,11,8,0,1,8,1,6,11,4,1,9,1,4,6,-1,6,11,3,0,6,3,4,6,0,-1,-1,-1,-1,-1,-1,-1,8,4,6,8,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,10,7,10,8,7,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,7,0,7,10,0,10,9,0,10,7,6,-1,-1,-1,-1,7,6,10,7,10,1,8,7,1,0,8,1,-1,-1,-1,-1,7,6,10,1,7,10,3,7,1,-1,-1,-1,-1,-1,-1,-1,6,2,1,8,6,1,9,8,1,7,6,8,-1,-1,-1,-1,9,6,2,1,9,2,9,7,6,3,9,0,9,3,7,-1,0,8,7,6,0,7,2,0,6,-1,-1,-1,-1,-1,-1,-1,2,3,7,2,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,3,2,8,6,10,9,8,10,7,6,8,-1,-1,-1,-1,7,0,2,11,7,2,7,9,0,10,7,6,7,10,9,-1,0,8,1,8,7,1,7,10,1,10,7,6,11,3,2,-1,1,2,11,7,1,11,1,6,10,1,7,6,-1,-1,-1,-1,6,9,8,7,6,8,6,1,9,3,6,11,6,3,1,-1,1,9,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,6,0,7,0,11,3,0,6,11,-1,-1,-1,-1,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,3,6,7,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,0,6,7,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,1,8,1,3,8,6,7,11,-1,-1,-1,-1,-1,-1,-1,2,1,10,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,2,1,8,0,3,7,11,6,-1,-1,-1,-1,-1,-1,-1,0,9,2,9,10,2,7,11,6,-1,-1,-1,-1,-1,-1,-1,7,11,6,3,10,2,3,8,10,8,9,10,-1,-1,-1,-1,3,2,7,7,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,0,7,0,6,7,0,2,6,-1,-1,-1,-1,-1,-1,-1,6,7,2,7,3,2,9,1,0,-1,-1,-1,-1,-1,-1,-1,2,6,1,6,8,1,8,9,1,6,7,8,-1,-1,-1,-1,6,7,10,7,1,10,7,3,1,-1,-1,-1,-1,-1,-1,-1,6,7,10,10,7,1,7,8,1,8,0,1,-1,-1,-1,-1,7,3,0,10,7,0,9,10,0,7,10,6,-1,-1,-1,-1,10,6,7,8,10,7,9,10,8,-1,-1,-1,-1,-1,-1,-1,4,8,6,6,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,6,3,6,0,3,6,4,0,-1,-1,-1,-1,-1,-1,-1,11,6,8,6,4,8,1,0,9,-1,-1,-1,-1,-1,-1,-1,6,4,9,3,6,9,1,3,9,6,3,11,-1,-1,-1,-1,4,8,6,8,11,6,1,10,2,-1,-1,-1,-1,-1,-1,-1,10,2,1,11,0,3,11,6,0,6,4,0,-1,-1,-1,-1,8,11,4,11,6,4,9,2,0,9,10,2,-1,-1,-1,-1,3,9,10,2,3,10,3,4,9,6,3,11,3,6,4,-1,3,2,8,2,4,8,2,6,4,-1,-1,-1,-1,-1,-1,-1,2,4,0,2,6,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,4,3,2,6,4,2,8,3,4,-1,-1,-1,-1,4,9,1,2,4,1,6,4,2,-1,-1,-1,-1,-1,-1,-1,3,1,8,1,6,8,6,4,8,1,10,6,-1,-1,-1,-1,0,1,10,6,0,10,4,0,6,-1,-1,-1,-1,-1,-1,-1,3,6,4,8,3,4,3,10,6,9,3,0,3,9,10,-1,4,9,10,4,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,9,4,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,8,0,5,9,4,6,7,11,-1,-1,-1,-1,-1,-1,-1,1,0,5,0,4,5,11,6,7,-1,-1,-1,-1,-1,-1,-1,6,7,11,4,3,8,4,5,3,5,1,3,-1,-1,-1,-1,4,5,9,2,1,10,11,6,7,-1,-1,-1,-1,-1,-1,-1,7,11,6,10,2,1,3,8,0,5,9,4,-1,-1,-1,-1,11,6,7,10,4,5,10,2,4,2,0,4,-1,-1,-1,-1,8,4,3,4,5,3,5,2,3,2,5,10,6,7,11,-1,3,2,7,2,6,7,9,4,5,-1,-1,-1,-1,-1,-1,-1,4,5,9,6,8,0,2,6,0,7,8,6,-1,-1,-1,-1,2,6,3,6,7,3,0,5,1,0,4,5,-1,-1,-1,-1,8,2,6,7,8,6,8,1,2,5,8,4,8,5,1,-1,4,5,9,6,1,10,6,7,1,7,3,1,-1,-1,-1,-1,10,6,1,6,7,1,7,0,1,0,7,8,4,5,9,-1,10,0,4,5,10,4,10,3,0,7,10,6,10,7,3,-1,10,6,7,8,10,7,10,4,5,10,8,4,-1,-1,-1,-1,5,9,6,9,11,6,9,8,11,-1,-1,-1,-1,-1,-1,-1,11,6,3,3,6,0,6,5,0,5,9,0,-1,-1,-1,-1,8,11,0,11,5,0,5,1,0,11,6,5,-1,-1,-1,-1,3,11,6,5,3,6,1,3,5,-1,-1,-1,-1,-1,-1,-1,10,2,1,11,5,9,8,11,9,6,5,11,-1,-1,-1,-1,3,11,0,11,6,0,6,9,0,9,6,5,10,2,1,-1,5,8,11,6,5,11,5,0,8,2,5,10,5,2,0,-1,3,11,6,5,3,6,3,10,2,3,5,10,-1,-1,-1,-1,9,8,5,8,2,5,2,6,5,2,8,3,-1,-1,-1,-1,6,5,9,0,6,9,2,6,0,-1,-1,-1,-1,-1,-1,-1,8,5,1,0,8,1,8,6,5,2,8,3,8,2,6,-1,6,5,1,6,1,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,3,1,10,6,1,6,8,3,9,6,5,6,9,8,-1,0,1,10,6,0,10,0,5,9,0,6,5,-1,-1,-1,-1,8,3,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,5,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,11,11,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,11,5,7,11,0,3,8,-1,-1,-1,-1,-1,-1,-1,7,11,5,11,10,5,0,9,1,-1,-1,-1,-1,-1,-1,-1,5,7,10,7,11,10,1,8,9,1,3,8,-1,-1,-1,-1,2,1,11,1,7,11,1,5,7,-1,-1,-1,-1,-1,-1,-1,3,8,0,7,2,1,5,7,1,11,2,7,-1,-1,-1,-1,5,7,9,7,2,9,2,0,9,7,11,2,-1,-1,-1,-1,2,5,7,11,2,7,2,9,5,8,2,3,2,8,9,-1,10,5,2,5,3,2,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,2,8,2,5,8,5,7,8,5,2,10,-1,-1,-1,-1,1,0,9,3,10,5,7,3,5,2,10,3,-1,-1,-1,-1,2,8,9,1,2,9,2,7,8,5,2,10,2,5,7,-1,5,3,1,5,7,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,1,7,0,5,7,1,-1,-1,-1,-1,-1,-1,-1,3,0,9,5,3,9,7,3,5,-1,-1,-1,-1,-1,-1,-1,7,8,9,7,9,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,5,8,10,5,8,11,10,-1,-1,-1,-1,-1,-1,-1,4,0,5,0,11,5,11,10,5,0,3,11,-1,-1,-1,-1,9,1,0,10,4,8,11,10,8,5,4,10,-1,-1,-1,-1,4,11,10,5,4,10,4,3,11,1,4,9,4,1,3,-1,1,5,2,5,8,2,8,11,2,8,5,4,-1,-1,-1,-1,11,4,0,3,11,0,11,5,4,1,11,2,11,1,5,-1,5,2,0,9,5,0,5,11,2,8,5,4,5,8,11,-1,5,4,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,2,2,5,3,5,4,3,4,8,3,-1,-1,-1,-1,2,10,5,4,2,5,0,2,4,-1,-1,-1,-1,-1,-1,-1,2,10,3,10,5,3,5,8,3,8,5,4,9,1,0,-1,2,10,5,4,2,5,2,9,1,2,4,9,-1,-1,-1,-1,5,4,8,3,5,8,1,5,3,-1,-1,-1,-1,-1,-1,-1,5,4,0,5,0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,4,8,3,5,8,5,0,9,5,3,0,-1,-1,-1,-1,5,4,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,11,4,11,9,4,11,10,9,-1,-1,-1,-1,-1,-1,-1,3,8,0,7,9,4,7,11,9,11,10,9,-1,-1,-1,-1,11,10,1,4,11,1,0,4,1,11,4,7,-1,-1,-1,-1,4,1,3,8,4,3,4,10,1,11,4,7,4,11,10,-1,7,11,4,4,11,9,11,2,9,2,1,9,-1,-1,-1,-1,4,7,9,7,11,9,11,1,9,1,11,2,3,8,0,-1,4,7,11,2,4,11,0,4,2,-1,-1,-1,-1,-1,-1,-1,4,7,11,2,4,11,4,3,8,4,2,3,-1,-1,-1,-1,10,9,2,9,7,2,7,3,2,9,4,7,-1,-1,-1,-1,7,10,9,4,7,9,7,2,10,0,7,8,7,0,2,-1,10,7,3,2,10,3,10,4,7,0,10,1,10,0,4,-1,2,10,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,4,7,1,4,3,1,7,-1,-1,-1,-1,-1,-1,-1,1,9,4,7,1,4,1,8,0,1,7,8,-1,-1,-1,-1,3,0,4,3,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,10,9,8,11,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,3,11,9,3,10,9,11,-1,-1,-1,-1,-1,-1,-1,10,1,0,8,10,0,11,10,8,-1,-1,-1,-1,-1,-1,-1,10,1,3,10,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,2,1,9,11,1,8,11,9,-1,-1,-1,-1,-1,-1,-1,9,0,3,11,9,3,9,2,1,9,11,2,-1,-1,-1,-1,11,2,0,11,0,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,2,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,10,8,2,9,8,10,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,10,8,2,8,1,0,8,10,1,-1,-1,-1,-1,2,10,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),numTrisTable:new Float32Array([0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,2,3,4,4,3,3,4,4,3,4,5,5,2,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,2,3,3,4,3,4,2,3,3,4,4,5,4,5,3,2,3,4,4,3,4,5,3,2,4,5,5,4,5,2,4,1,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,3,2,3,3,4,3,4,4,5,3,2,4,3,4,3,5,2,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,4,3,4,4,3,4,5,5,4,4,3,5,2,5,4,2,1,2,3,3,4,3,4,4,5,3,4,4,5,2,3,3,2,3,4,4,5,4,5,5,2,4,3,5,4,3,2,4,1,3,4,4,5,4,5,3,4,4,5,5,2,3,4,2,1,2,3,3,2,3,4,2,1,3,2,4,1,2,1,1,0])}}var mR=new Ov,myt=class{constructor(){this.pyramidPassScene=new Io,this.pyramidPassMaterial=new pR({name:"PyramidPass"}),this.pyramidPassUniforms={inputTexture:{value:void 0},inputWidth:{value:0},inputHeight:{value:0},inputShiftX:{value:0},outputShiftX:{value:0}},this.pyramidTopLevelReadPixelBuffer=new Float32Array(4);let e=`
			precision highp float;
			precision highp sampler2D;
			layout(location = 0) out vec4 pc_FragColor;
			uniform sampler2D inputTexture;
			uniform float inputWidth;
			uniform float inputHeight;
			uniform float inputShiftX;
			uniform float outputShiftX;
			const vec2 half_unit_coord = vec2(0.5);
			const vec4 one = vec4(1.0);
			void main() {
				vec2 inputSize = vec2(inputWidth, inputHeight);
				vec2 input_pixel_uv = 1. / inputSize;
				vec2 coord = gl_FragCoord.xy - half_unit_coord;
				coord.x -= outputShiftX;
				coord = coord * 2. + half_unit_coord;
				coord.x += inputShiftX;

				// sample bottom left corner
				vec2 input_uv = coord / inputSize;
				float bl = texture(inputTexture, input_uv).r;

				// sample bottom right corner
				input_uv.x += input_pixel_uv.x;
				float br = texture(inputTexture, input_uv).r;

				// sample top right corner
				input_uv.y += input_pixel_uv.y;
				float tr = texture(inputTexture, input_uv).r;

				// sample top left corner
				input_uv.x -= input_pixel_uv.x;
				float tl = texture(inputTexture, input_uv).r;

				pc_FragColor.a = bl;
				pc_FragColor.b = pc_FragColor.a + br;
				pc_FragColor.g = pc_FragColor.b + tr;
				pc_FragColor.r = pc_FragColor.g + tl; 
			}
		`;this.pyramidPassMaterial.fragmentShader=e,this.pyramidPassMaterial.uniforms=this.pyramidPassUniforms,this.pyramidPassMaterial.depthTest=!1,this.pyramidPassMaterial.depthWrite=!1;let t=new Ci(LE,this.pyramidPassMaterial);t.frustumCulled=!1,this.pyramidPassScene.add(t)}renderPyramid(e,t,r,i,n){new vW().min.setScalar(0);let a=t.length-1,o=new hr;r.getViewport(o),this.pyramidPassUniforms.inputShiftX.value=0,this.pyramidPassUniforms.outputShiftX.value=0;let s=a-1;for(let u=s;u>=0;u--){let c=u%2===s%2?n[0]:n[1],d=u===s?i:u%2===s%2?n[1]:n[0];this.pyramidPassUniforms.inputTexture.value=Array.isArray(d.texture)?d.texture[1]:d.texture,this.pyramidPassUniforms.inputWidth.value=d.width,this.pyramidPassUniforms.inputHeight.value=d.height,r.setRenderTarget(c);let h=t[u],f=r.getPixelRatio();r.setViewport(this.pyramidPassUniforms.outputShiftX.value/f,0,h/f,h/f),u===2&&e%2!==0&&r.setViewport(this.pyramidPassUniforms.outputShiftX.value/f,0,3/f,3/f),r.render(this.pyramidPassScene,mR);let g=this.pyramidPassUniforms.inputShiftX.value;this.pyramidPassUniforms.inputShiftX.value=this.pyramidPassUniforms.outputShiftX.value,this.pyramidPassUniforms.outputShiftX.value=g,u<s&&(this.pyramidPassUniforms.outputShiftX.value+=t[u+1])}r.setViewport(o);let l=t.length%2===0?0:1;return r.readRenderTargetPixelsAsync(n[l],n[l].width-1,0,1,1,this.pyramidTopLevelReadPixelBuffer).then(()=>this.pyramidTopLevelReadPixelBuffer[0])}},yl=24,ha=96,Qf=pyt(),om=2,USe=class extends Sn{constructor(e,t,r){super(e,t,r),this.data=t,this.needsRebuild=!0,this.customDepthMaterialNeedsUpdate=!1,this._npart=-1,this.spatialn=1,this.drawRangeNeedsForceUpdate=!0,this._resolutionLevel=-1,this.resolution=64,this.spatialDivisions=25,this.zLayersPerRow=8,this.basePyramidSize=512,this.pyramidTexture1Width=341,this.pyramidTexture1Height=256,this.pyramidTexture2Width=170,this.pyramidTexture2Height=128,this.numLevels=9,this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512],this.bboxSize=0,this.bboxOffset=0,this.shapesDataTexture={value:void 0},this.spatialscene=new Io,this.potentialPassScene=new Io,this.voxelPassScene=new Io,this._spatialPassRenderTargets=[],this._potentialPassRenderTargets=[],this._voxelPassRenderTargets=[],this._pyramidRenderTargets=[],this.geometry=new Wt,this.geometry.drawRange.count=0,this.spatialPassUniforms={span:{value:-1},shapesDataTexture:this.shapesDataTexture,npart:{value:this.npart},spatialn:{value:this.spatialn}},this.spatialMesh=new Ci(LE,this.spatialPassMaterial()),this.spatialMesh.frustumCulled=!1,this.spatialscene.add(this.spatialMesh);let i=new so(Qf.triTable,16,256,iR,ci);i.needsUpdate=!0;let n=new so(Qf.numTrisTable,256,1,iR,ci);n.needsUpdate=!0,this.voxelPassUniforms={potentialPassTexture:{value:void 0},numTrisTable:{value:n}},this.voxelMesh=new Ci(LE,this.voxelPassMaterial()),this.voxelMesh.frustumCulled=!1,this.voxelPassScene.add(this.voxelMesh),this.potentialPassUniforms={shapesDataTexture:this.shapesDataTexture,spatialPassTexture:{value:void 0},npart:{value:this.npart},spatialn:{value:this.spatialn}},this.potentialMesh=new Ci(LE,this.potentialPassMaterial()),this.potentialMesh.frustumCulled=!1,this.potentialPassScene.add(this.potentialMesh),this.marchPassUniforms={triTable:{value:i},potentialPassTexture:{value:void 0},voxelPassTexture:{value:void 0},pyramidTexture1:{value:void 0},pyramidTexture1Size:{value:void 0},pyramidTexture2:{value:void 0},pyramidTexture2Size:{value:void 0}},this.frustumCulled=!1,this.onBeforeShadowPass=a=>{if(_yt.call(this),this.npart===0){this.geometry.drawRange.count=0;return}let o=this.material.root;if(!o.shadersPatchedForShapeBlend)this.patchVertexShaderForShapeBlend(o),o.shadersPatchedForShapeBlend=!0,this.customDepthMaterialNeedsUpdate=!0;else if(this.customDepthMaterialNeedsUpdate){this.customDepthMaterialNeedsUpdate=!1,this.customDepthMaterial=new qr({vertexShader:o.vertexShader,fragmentShader:`
						#include <packing>
						void main()
						{
							gl_FragColor = packDepthToRGBA(gl_FragCoord.z);
						}
					`,uniforms:o.uniforms,defines:this.material.defines}),this.isMeshDepthMaterial=!0,this.customDistanceMaterial=new qr({vertexShader:o.vertexShader,fragmentShader:`
					#include <common>
					#include <packing>
					uniform vec3 referencePosition;
					uniform float nearDistance;
					uniform float farDistance;
					// World-space position
					varying vec3 vWPosition;
					void main()
					{
						float dist = length(vWPosition - referencePosition);
						dist = (dist - nearDistance) / (farDistance - nearDistance);
						dist = saturate(dist);
						// Required by Three.js for this to work
						gl_FragColor = packDepthToRGBA( dist );
					}`,uniforms:{nearDistance:{value:0},farDistance:{value:0},referencePosition:{value:new k},opacity:{value:0},...o.uniforms},defines:this.material.defines});let u=this.customDistanceMaterial;u.referencePosition=new k,u.nearDistance=0,u.farDistance=0,u.opacity=1,u.isMeshDistanceMaterial=!0}if(this.spatialPassUniforms.npart.value=this.npart,this.spatialPassUniforms.spatialn.value=this.spatialn,this.potentialPassUniforms.npart.value=this.npart,this.potentialPassUniforms.spatialn.value=this.spatialn,this.needsRebuild){this.needsRebuild=!1,this.spatialMesh.material.defines.RES=this.resolutionLevel,this.spatialMesh.material.needsUpdate=!0,this.potentialMesh.material.defines.RES=this.resolutionLevel,this.potentialPassUniforms.spatialPassTexture.value=this.spatialPassRenderTarget.texture,this.potentialMesh.material.needsUpdate=!0,this.voxelMesh.material.defines.RES=this.resolutionLevel,this.voxelMesh.material.needsUpdate=!0,this.voxelPassUniforms.potentialPassTexture.value=this.potentialPassRenderTarget.texture,this.marchPassUniforms.potentialPassTexture.value=this.potentialPassRenderTarget.texture,this.marchPassUniforms.voxelPassTexture.value=this.voxelPassRenderTarget.texture[0],this.material.defines.RES=this.resolutionLevel,this.material.defines.LEVELS=this.pyramidLevelSizes.length,this.material.defines.LOOP=this.pyramidLevelSizes.length%2===0?this.pyramidLevelSizes.length-3:this.pyramidLevelSizes.length-2,this.material.defines.HALF=this.pyramidLevelSizes.length%2===0?1:0,this.material.needsUpdate=!0;let u=this.pyramidLevelSizes.length%2===0?0:1,c=this.pyramidLevelSizes.length%2===0?1:0;this.marchPassUniforms.pyramidTexture2.value=this.pyramidRenderTarget[u].texture,this.marchPassUniforms.pyramidTexture2Size.value=new ze(this.pyramidRenderTarget[u].width,this.pyramidRenderTarget[u].height),this.marchPassUniforms.pyramidTexture1.value=this.pyramidRenderTarget[c].texture,this.marchPassUniforms.pyramidTexture1Size.value=new ze(this.pyramidRenderTarget[c].width,this.pyramidRenderTarget[c].height),Object.assign(this.material.uniforms,this.marchPassUniforms)}let s=a.shadowMap.enabled;a.shadowMap.enabled=!1;let l=a.getRenderTarget();a.setRenderTarget(this.spatialPassRenderTarget),a.render(this.spatialscene,mR),a.setRenderTarget(this.potentialPassRenderTarget),a.render(this.potentialPassScene,mR),a.setRenderTarget(this.voxelPassRenderTarget),a.render(this.voxelPassScene,mR),USe.streamCompaction.renderPyramid(this.resolutionLevel,this.pyramidLevelSizes,a,this.voxelPassRenderTarget,this.pyramidRenderTarget).then(u=>{this.material.wireframe&&(u*3>this.geometry.attributes.position.count||this.drawRangeNeedsForceUpdate)&&(this.geometry.dispose(),this.geometry=new Wt,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]},this.geometry.attributes.position=new tr(new Float32Array(u*3*2),3)),(u*3>this.geometry.drawRange.count||this.drawRangeNeedsForceUpdate)&&(this.geometry.drawRange.count=Math.floor(u*1.2)*3),this.drawRangeNeedsForceUpdate=!1}),a.shadowMap.enabled=s,a.setRenderTarget(l)}}set npart(e){e!==this._npart&&(this.drawRangeNeedsForceUpdate=!0,this._npart=e,this.spatialn=Math.ceil(e/(4*yl)))}get npart(){return this._npart}set resolutionLevel(e){let t=Math.min(8,Math.max(5,e));if(t!==this._resolutionLevel){switch(this._resolutionLevel=t,this.resolution=Math.pow(2,t),this.resolutionLevel){case 5:this.pyramidLevelSizes=[1,2,4,6,12,24,48,96,192],this.bboxSize=31*8*om,this.bboxOffset=8*om*-1/2;break;case 6:this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512],this.bboxSize=63*4*om,this.bboxOffset=4*om*-1/2;break;case 7:this.pyramidLevelSizes=[1,2,4,6,12,24,48,96,192,384,768,1536],this.bboxSize=127*2*om,this.bboxOffset=2*om*-1/2;break;case 8:this.pyramidLevelSizes=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096],this.bboxSize=255*om,this.bboxOffset=om*-1/2;break}this.pyramidTexture1Width=0,this.pyramidTexture2Width=0,this.pyramidTexture1Height=this.pyramidLevelSizes[this.pyramidLevelSizes.length-2],this.pyramidTexture2Height=this.pyramidLevelSizes[this.pyramidLevelSizes.length-3];for(let r=this.pyramidLevelSizes.length-2;r>=0;r--)(this.pyramidLevelSizes.length-2)%2===r%2?this.pyramidTexture1Width+=this.pyramidLevelSizes[r]:this.pyramidTexture2Width+=this.pyramidLevelSizes[r];this.basePyramidSize=this.pyramidLevelSizes[this.pyramidLevelSizes.length-1],this.zLayersPerRow=this.basePyramidSize/this.resolution,this.numLevels=this.pyramidLevelSizes.length-1,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]},this.needsRebuild=!0}}get resolutionLevel(){return this._resolutionLevel}get spatialPassRenderTarget(){let e=this._spatialPassRenderTargets[this.resolutionLevel];return e||(e=new kr(this.spatialDivisions*this.spatialn,this.spatialDivisions**2,{format:zi,type:ci,stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:Dr,magFilter:Dr}),this._spatialPassRenderTargets[this.resolutionLevel]=e),e}get potentialPassRenderTarget(){let e=this._potentialPassRenderTargets[this.resolutionLevel];return e||(e=new kr(this.basePyramidSize,this.basePyramidSize,{format:zi,type:ci,stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:Dr,magFilter:Dr}),this._potentialPassRenderTargets[this.resolutionLevel]=e),e}get voxelPassRenderTarget(){let e=this._voxelPassRenderTargets[this.resolutionLevel];return e||(e=new Q1e(this.basePyramidSize,this.basePyramidSize,2,{stencilBuffer:!1,depthBuffer:!1,generateMipmaps:!1,minFilter:Dr,magFilter:Dr}),e.texture[0].format=zi,e.texture[0].type=ci,e.texture[1].format=iR,e.texture[1].type=ci,this._voxelPassRenderTargets[this.resolutionLevel]=e),e}get pyramidRenderTarget(){let e=this._pyramidRenderTargets[this.resolutionLevel];if(!e){let t=new kr(this.pyramidTexture1Width,this.pyramidTexture1Height,{format:zi,type:ci,stencilBuffer:!1,depthBuffer:!1,magFilter:Dr,minFilter:Dr}),r=new kr(this.pyramidTexture2Width,this.pyramidTexture2Height,{format:zi,type:ci,stencilBuffer:!1,depthBuffer:!1,magFilter:Dr,minFilter:Dr});e=[t,r],this._pyramidRenderTargets[this.resolutionLevel]=e}return e}updateState(e,t){let r=this.material;super.updateState(e,t),r!==this.material&&(this.needsRebuild=!0),e.geometry&&(this.resolutionLevel=e.geometry.resolutionLevel,this.geometry.userData.parameters={width:this.bboxSize,height:this.bboxSize,depth:this.bboxSize,centerOffset:[this.bboxOffset,this.bboxOffset,this.bboxOffset]}),e.wireframe&&!this.geometry.getAttribute("position")?this.geometry.setAttribute("position",new tr(new Float32Array(this.geometry.drawRange.count*3),3)):!e.wireframe&&this.geometry.getAttribute("position")&&this.geometry.deleteAttribute("position")}spatialPassMaterial(){let e=`
			precision highp float;
			out vec4 pc_FragColor;
			const float spatialDivisions = ${this.spatialDivisions}.;
			uniform float span;
			uniform float npart;
			uniform float spatialn;
			${Qf.shapeInput()}

			vec3 low, high;     // range of current div; subset of -1 .. 1 with span border

			// lookup one element/channel's worth of spheres for current division
			// stating with low sphere number lowi
			// gives a key to which spheres from lowi..lowi+23 are active within given div (low..high)
			float spatialKey(float lowi) {
				float t = 0.;
				for (float ii = ${yl-1}.; ii >= 0.; ii--) {
					float i = ii + lowi;
					float iin = (i + 0.5) / ${ha}.;
					vec4 shape = shapePos(iin);
					vec3 d = shape.xyz;
					float op = shape.w;
	
					t *= 2.;
					t += (
						low.x < d.x && d.x < high.x &&
						low.y < d.y && d.y < high.y &&
						low.z < d.z && d.z < high.z &&
						i < npart || op == -2. // always include if op is -2, which is the intersection operation
					) ? 1. : 0.;
				}
				return t;
			}

			${Qf.getpart}

			void main() {               // spatialial fragment shader
				// find active div
				vec3 div;                               // which div is current
				// out holds x=> x, lowi faster moving and y=> z, y faster moving
				float yz = float(gl_FragCoord.y - 0.5);     // contains  z, y faster moving
				div.y = getpart(yz, spatialDivisions);
				div.z = yz; // getpart(yz, spatialDivisions.z); // what's left, should be the same as getpart

				float lx = float(gl_FragCoord.x - 0.5);     // contains x, lowi faster moving
				float lowi = getpart(lx, spatialn) * ${4*yl}.;
				div.x = lx;

				low = div / spatialDivisions * 2. - 1. - span;
				high = (div+1.) / spatialDivisions * 2. - 1. + span;

				// find active range of spheres
				pc_FragColor.x = spatialKey(lowi);
				pc_FragColor.y = spatialKey(lowi+${yl}.);
				pc_FragColor.z = spatialKey(lowi+${2*yl}.);
				pc_FragColor.w = spatialKey(lowi+${3*yl}.);
			}
		`;return new pR({name:"Spatial Pass",fragmentShader:e,uniforms:this.spatialPassUniforms})}potentialPassMaterial(){let e=`
			precision highp float;
			out vec4 pc_FragColor;

			${Qf.shapeInput()}
			uniform sampler2D spatialPassTexture;

			const float res = float(RES);
			const float VOXEL_RESOLUTION = pow(2., res);
			const float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));
			const float VOXEL_RESOLUTION_SUB1 = VOXEL_RESOLUTION - 1.;
			const float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;

			uniform float npart;
			uniform float spatialn;
			const float spatialDivisions = ${this.spatialDivisions}.;
			const float spatialDivisions2 = spatialDivisions * spatialDivisions;
			const float spatialDivisionsSub1 = spatialDivisions - 1.;

			${Qf.getpart}

			vec3 packRGBAToVec3(vec4 color) {
				uint r = uint(color.r * 255.);
				uint g = uint(color.g * 255.);
				uint combined = (r << 8) | g; 
				return vec3(float(combined) * 0.00001525902, color.b, color.a); // 1/65535
			}

			void applyQuaternionToVector(in vec4 q, inout vec3 v) {
				v += 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
			}

			/**
			 * SDF functions (reference: https://iquilezles.org/articles/distfunctions/)
			 */

			// branchless version of "Smooth Union, Subtraction and Intersection - bound, bound, bound" in above reference
			float smoothOperation(float op, float sdf, float d, float k) {
			  //        union: op =  1 => signSubtract =  1, signIntersection =  1
			  //     subtract: op = -1 => signSubtract = -1, signIntersection =  1
				// intersection: op = -2 => signSubtract = -1, signIntersection = -1

				float signSubtract = clamp(op, -1., 1.);
				float signIntersection = 2. * (op - signSubtract) + 1.;
				float h = clamp(
					0.5 + signSubtract * 0.5 * (sdf - signSubtract * signIntersection * d) / k,
					0.0,
					1.0
				);
				return mix(sdf, signSubtract * signIntersection * d, h) - 
							 signSubtract * k * h * (1.0 - h);
			}

			float sdSphere( vec3 p, float s )
			{
				return length(p)-s;
			}

			float sdEllipsoid( vec3 p, vec3 r )
			{
				float k0 = length(p/r);
				float k1 = length(p/(r*r));
				return k0*(k0-1.0)/k1;
			}

			float sdBox( vec3 p, vec3 b )
			{
				vec3 q = abs(p) - b;
				return length(max(q,0.0)) + min(max(q.x,max(q.y,q.z)),0.0);
			}

			float sdTorus( vec3 p, vec2 t )
			{
				vec2 q = vec2(length(p.xy)-t.x,p.z);
				return length(q)-t.y;
			}

			float sdCappedTorus( vec3 p, vec2 sc, float ra, float rb)
			{
				p.x = abs(p.x);
				float k = (sc.y*p.x>sc.x*p.y) ? dot(p.xy,sc) : length(p.xy);
				return sqrt( dot(p,p) + ra*ra - 2.0*ra*k ) - rb;
			}

			float dot2( in vec2 v ) { return dot(v,v); }
			float sdCappedCone( vec3 p, float h, float r1, float r2 )
			{
				vec2 q = vec2( length(p.xz), p.y );
				vec2 k1 = vec2(r2,h);
				vec2 k2 = vec2(r2-r1,2.0*h);
				vec2 ca = vec2(q.x-min(q.x,(q.y<0.0)?r1:r2), abs(q.y)-h);
				vec2 cb = q - k1 + k2*clamp( dot(k1-q,k2)/dot2(k2), 0.0, 1.0 );
				float s = (cb.x<0.0 && ca.y<0.0) ? -1.0 : 1.0;
				return s*sqrt( min(dot2(ca),dot2(cb)) );
			}

			float sdCappedCylinder( vec3 p, float h, float r )
			{
				vec2 d = abs(vec2(length(p.xz),p.y)) - vec2(r,h);
				return min(max(d.x,d.y),0.0) + length(max(d,0.0));
			}

			float maxBlend = 0.0;
			// compute potential from A (=24) spheres, using the bit flags in 'activeKey'
			// to avoid lookup/compute for inactive spheres
			// return field potential, side effect updates track,
			// compute and return +ve and -ve values separately
			void fillSpatialInner(
				float ii,
				float activeKey,
				vec3 corner,
				inout float sdf,
				inout float colorDivisor,
				inout vec4 trackColor
			) {
				for (float i = 0.; i < ${yl}.; i++) {
					if (activeKey < 1.) break; // activeKey exhausted, no more active spheres
					activeKey *= 0.5;
					if (fract(activeKey) < 0.5) continue;

					float iin = (i + ii + 0.5) * ${1/ha};
					vec4 shape = shapePos(iin);
					vec4 quat = shapeQuat(iin);
					vec4 params1 = shapeParams1(iin);
					vec4 params2 = shapeParams2(iin);

					vec3 p = corner - shape.xyz;
					applyQuaternionToVector(quat, p);
					p /= params2.z; // scale
					float d; // d in -1..1 coordinates
					switch (int(params1.x)) {
						case 0: d = sdSphere(p, params1.y); break;
						case 1: d = sdEllipsoid(p, params1.yzw); break;
						case 2: d = sdBox(p, params1.yzw); break;
						case 3: d = sdCappedCylinder(p, params1.y, params1.z); break;
						case 4: d = sdCappedCone(p, params1.y, params1.z, params1.w); break;
						case 5: d = sdTorus(p, params1.yz); break;
						case 6: d = sdCappedTorus(p, params1.yz, params1.w, params2.w); break;
					}
					d -= params2.y; // rounded edge
					d *= params2.z; // scale

					float k = params2.x;
					float op = shape.w;

					sdf = smoothOperation(shape.w, sdf, d, k);

					float isNegativeOne = step(-1.5, op) * step(op, -0.5); // 1 when op == -1, 0 otherwise
					float colorCull = smoothstep(maxBlend, 0., -d);
					float cullFactor = mix(1.0, colorCull, isNegativeOne);
					trackColor *= cullFactor;
					colorDivisor *= cullFactor;

					maxBlend = max(maxBlend, k);

					k += 2. * INV_VOXEL_RESOLUTION; // avoid division by zero, and other color artifacts with very small k
					float nearness = smoothstep(k, 0., d);

					vec4 color = shapeColor(iin);
					nearness *= float(color.a >= 0.);

					colorDivisor += nearness;
					trackColor += color * nearness;
				}
			}

			vec3 div;
			// compute potential from all spheres; collect +ve and =ve values separately
			// work in blocks of A*4 (=96) spheres, using the bit flags in 4 float channel 'activeKey' values
			// TODO check if extra vec3 output useful, not really used at present
			float fillSpatial(vec3 corner, inout vec4 trackColor) {
				float sdf = 1e3; // hack: initialize to large value
				float colorDivisor = 0.;
				// spatialPassTexture holds x=> lowi, x faster moving and y=> z, y faster moving
				float divyz = (div.y + div.z * spatialDivisions + 0.5) / (spatialDivisions2);
				for (float ii = 0.; ii < spatialn; ii++) {
					float i = ii * ${4*yl}.;

					vec4 activeKey = texture(spatialPassTexture, vec2((div.x * spatialn + ii + 0.5)/(spatialn * spatialDivisions), divyz));
					fillSpatialInner(i, activeKey.x, corner, sdf, colorDivisor, trackColor);
					fillSpatialInner(i+${yl}., activeKey.y, corner, sdf, colorDivisor, trackColor);
					fillSpatialInner(i+${2*yl}., activeKey.z, corner, sdf, colorDivisor, trackColor);
					fillSpatialInner(i+${3*yl}., activeKey.w, corner, sdf, colorDivisor, trackColor);
				}

				trackColor /= colorDivisor;
				return mix(sdf, 0.0, step(1e20 - 0.1, sdf));
			}

			void main() {
				${Qf.getxyzi}    // get xi yi zi from 2d position

				vec3 xyzi = vec3(xi,yi,zi);
				vec3 corner = xyzi / VOXEL_RESOLUTION_SUB1 * 2. - 1.;  // -1..1 coords

				div = floor(xyzi / VOXEL_RESOLUTION_SUB1 * spatialDivisionsSub1);

				vec4 c = vec4(0.);
				float t = fillSpatial(corner, c);

				pc_FragColor = vec4(t, packRGBAToVec3(c)); // RGB texture
			}
		`;return new pR({name:"PotentialPass",fragmentShader:e,uniforms:this.potentialPassUniforms})}voxelPassMaterial(){let e=`
			precision highp float;
			layout(location = 0) out vec4 pc_FragColor;
			layout(location = 1) out vec4 numTris;

			const float res = float(RES);
			const float VOXEL_RESOLUTION = pow(2., res);
			const float VOXEL_RESOLUTION_SUB1 = VOXEL_RESOLUTION - 1.; 
			const float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));
			const float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;
			uniform sampler2D numTrisTable; // 256 x 1

			float keyi(float f000, float f100, float f010, float f110, float f001, float f101, float f011, float f111) {
				return (float(f000 < 0.) * 1.) +
							 (float(f100 < 0.) * 2.) +
							 (float(f010 < 0.) * 8.) +
							 (float(f110 < 0.) * 4.) +
							 (float(f001 < 0.) * 16.) +
							 (float(f101 < 0.) * 32.) +
							 (float(f011 < 0.) * 128.) +
							 (float(f111 < 0.) * 64.);
			}

			${Qf.lookup}

			vec3 compNormi(float xi, float yi, float zi) {
				float dx = look(xi + 1., yi, zi, potentialPassTexture).r - look(xi - 1., yi, zi, potentialPassTexture).r;
				float dy = look(xi, yi + 1., zi, potentialPassTexture).r - look(xi, yi - 1., zi, potentialPassTexture).r;
				float dz = look(xi, yi, zi + 1., potentialPassTexture).r - look(xi, yi, zi - 1., potentialPassTexture).r;
				// if we allow (common) 0,0,0 case through then NaN can spread
				// eg r = vec4(compNorm i(???), 1.) will pollute r.w
				if (dx == 0.0 && dy == 0.0 && dz == 0.0) {
					return vec3(0.199, 0.299, 0.399);
				}
				return normalize(vec3(dx, dy, dz));
			}

			void main() {
				${Qf.getxyzi}    // get xi yi zi from 2d

				vec3 normal = compNormi(xi, yi, zi);  // even if our key is -1 this may be needed by a neighbouring voxel

				if (xi >= VOXEL_RESOLUTION_SUB1 || yi >= VOXEL_RESOLUTION_SUB1 || zi >= VOXEL_RESOLUTION_SUB1) {
					pc_FragColor = vec4(normal, 0.);
					numTris = vec4(0.);
					return;
				}

				float
					f000 = look(xi, yi, zi, potentialPassTexture).r,
					f100 = look(xi+1., yi, zi, potentialPassTexture).r,
					f010 = look(xi, yi+1., zi, potentialPassTexture).r,
					f110 = look(xi+1., yi+1., zi, potentialPassTexture).r,
					f001 = look(xi, yi, zi+1., potentialPassTexture).r,
					f101 = look(xi+1., yi, zi+1., potentialPassTexture).r,
					f011 = look(xi, yi+1., zi+1., potentialPassTexture).r,
					f111 = look(xi+1., yi+1., zi+1., potentialPassTexture).r;
				float key = keyi(f000, f100, f010, f110, f001, f101, f011, f111);

				pc_FragColor = vec4(normal, key);

				numTris = texture(numTrisTable, vec2((key + 0.5) / 256., 0.5));
			}
		`;return new pR({name:"VoxelPass",fragmentShader:e,uniforms:this.voxelPassUniforms})}patchVertexShaderForShapeBlend(e){let t=`
		#ifdef SHAPEBLEND 
			precision highp sampler2D;

			uniform float isol;

			uniform sampler2D triTable;     // 256 x 16
			uniform sampler2D pyramidTexture1;
			uniform vec2 pyramidTexture1Size;
			uniform sampler2D pyramidTexture2;
			uniform vec2 pyramidTexture2Size;

			const vec2 halfPixelOffset = vec2(0.5, 0.5);

			const vec2 rShift = vec2(0., 1.);
			const vec2 gShift = vec2(1., 1.);
			const vec2 bShift = vec2(1., 0.);

			const float res = float(RES);
			const float VOXEL_RESOLUTION = pow(2., res);
			const float Z_LAYERS_PER_ROW = ceil(pow(2., res / 2.));
			const float INV_VOXEL_RESOLUTION = 1.0 / VOXEL_RESOLUTION;

			const float scale_factor = ${om}.;

			#if SHAPEBLEND == 5
				const float levelShiftX[7] = float[7](4., 6., 12., 24., 48., 96., 192.);
				const float scale = 8. * scale_factor;
				const vec3 originOffset = vec3(16.);
			#elif SHAPEBLEND == 7
				const float levelShiftX[10] = float[10](4., 6., 12., 24., 48., 96., 192., 384., 768., 1536.); 
				const float scale = 2. * scale_factor;
				const vec3 originOffset = vec3(64.);
			#elif SHAPEBLEND == 8
				const float levelShiftX[11] = float[11](4., 8., 16., 32., 64., 128., 256., 512., 1024., 2048., 4096.);
				const float scale = scale_factor;
				const vec3 originOffset = vec3(128.);
			#else
				const float levelShiftX[8] = float[8](4., 8., 16., 32., 64., 128., 256., 512.);
				const float scale = 4. * scale_factor;
				const vec3 originOffset = vec3(32.);
			#endif

			${Qf.lookup}

			const vec3 offsets[24] = vec3[](
				vec3(0., 0., 0.), vec3(1., 0., 0.),
				vec3(1., 0., 0.), vec3(1., 1., 0.),
				vec3(0., 1., 0.), vec3(1., 1., 0.),
				vec3(0., 0., 0.), vec3(0., 1., 0.),
				vec3(0., 0., 1.), vec3(1., 0., 1.),
				vec3(1., 0., 1.), vec3(1., 1., 1.),
				vec3(0., 1., 1.), vec3(1., 1., 1.),
				vec3(0., 0., 1.), vec3(0., 1., 1.),
				vec3(0., 0., 0.), vec3(0., 0., 1.),
				vec3(1., 0., 0.), vec3(1., 0., 1.),
				vec3(1., 1., 0.), vec3(1., 1., 1.),
				vec3(0., 1., 0.), vec3(0., 1., 1.)
			);

			vec2 computeShiftedPosition1(vec2 xy, float levelOriginX) {
				vec2 xyShifted = xy;
				xyShifted.x += levelOriginX;
				return (xyShifted + halfPixelOffset) / pyramidTexture1Size;
			}

			vec2 computeShiftedPosition2(vec2 xy, float levelOriginX) {
				vec2 xyShifted = xy;
				xyShifted.x += levelOriginX;
				return (xyShifted + halfPixelOffset) / pyramidTexture2Size;
			}

			vec4 unpackVec3ToRGBA(vec3 vec) {
				uint combined = uint(vec.x * 65535.0 + 0.5); // Add 0.5 for rounding
				float g = float(combined & uint(0xFF)) * 0.00392156862; // 1/255
				float r = float((combined >> 8) & uint(0xFF)) * 0.00392156862; 
		
				return vec4(r, g, vec.y, vec.z);
			}

			out vec4 marchColor;
			// end of marchvertPre
		#endif
		`,r=`
		#ifdef SHAPEBLEND
			float triIndex = floor(float(gl_VertexID/3));
			float vertexIndex = float(gl_VertexID);
			
			// Initial pyramid lookup
			float levelOriginX1 = pyramidTexture1Size.x - 2.;
			float levelOriginX2 = pyramidTexture2Size.x - 1.;
			vec2 xy = vec2(0.);
			vec4 lookUp = texture(pyramidTexture2, computeShiftedPosition2(xy, levelOriginX2));
			
			// Early exit check
			if (triIndex >= lookUp.r) return;
			
			// Optimize loop variables
			float start = 0.;
			vec4 triIndexVec = vec4(triIndex);
			
			// Main position computation loop
			for (int i = 0; i < LOOP;) {
				// Compute boundaries
				vec4 ends = lookUp + vec4(start);
				vec4 starts = vec4(ends.gba, start);
				vec4 check = vec4(greaterThanEqual(triIndexVec, starts)) * 
											vec4(lessThan(triIndexVec, ends));
				
				// Update position
				xy *= 2.;
				xy += check.r * rShift + check.g * gShift + check.b * bShift;
				
				// Update loop variables
				start = dot(check, starts);
				levelOriginX2 -= levelShiftX[i];
				
				// Update lookup
				lookUp = texture(pyramidTexture1, computeShiftedPosition1(xy, levelOriginX1));
				i++;

				ends = lookUp + vec4(start);
				starts = vec4(ends.gba, start);
				check = vec4(greaterThanEqual(triIndexVec, starts)) * 
											vec4(lessThan(triIndexVec, ends));
				
				// Update position
				xy *= 2.;
				xy += check.r * rShift + check.g * gShift + check.b * bShift;
				
				// Update loop variables
				start = dot(check, starts);
				levelOriginX1 -= levelShiftX[i];
				
				// Update lookup
				lookUp = texture(pyramidTexture2, computeShiftedPosition2(xy, levelOriginX2));

				i++;
			}

			#if HALF == 1
				vec4 ends = lookUp + vec4(start);
				vec4 starts = vec4(ends.gba, start);
				vec4 check = vec4(greaterThanEqual(triIndexVec, starts)) * vec4(lessThan(triIndexVec, ends));
			
				// Update position
				xy *= 2.;
				xy += check.r * rShift + check.g * gShift + check.b * bShift;
			
				// Update loop variables
				start = dot(check, starts);
			#endif
			
			// Compute final coordinates
			vec3 gridPos;
			gridPos.x = mod(xy.x, VOXEL_RESOLUTION);
			gridPos.y = mod(xy.y, VOXEL_RESOLUTION);
			gridPos.z = floor(xy.x * INV_VOXEL_RESOLUTION) + 
									floor(xy.y * INV_VOXEL_RESOLUTION) * Z_LAYERS_PER_ROW;
			
			// Vertex key computation
			vertexIndex -= start * 3.;
			float vk = vertexIndex * 0.0625 + 0.03125; // Optimized division by 16 and addition of 1/32
			
			// Voxel lookup and edge computation
			vec4 voxel = look(gridPos.x, gridPos.y, gridPos.z, voxelPassTexture);
			float key = (voxel.w + 0.5) * 0.00390625; // Optimized division by 256
			
			// Edge lookup and offset computation
			float edgeNum = texture(triTable, vec2(vk, key)).x;
			int edgeIndex = int(edgeNum) * 2;
			
			// Compute edge positions
			vec3 p1 = gridPos + offsets[edgeIndex];
			vec3 p2 = gridPos + offsets[edgeIndex + 1];
			
			// Compute potentials and normals
			vec4 potential1 = look(p1.x, p1.y, p1.z, potentialPassTexture);
			vec4 potential2 = look(p2.x, p2.y, p2.z, potentialPassTexture);
			
			// Final position and normal computation
			float mu = potential1.r / (potential1.r - potential2.r);

			marchColor = mix(
				unpackVec3ToRGBA(potential1.gba),
				unpackVec3ToRGBA(potential2.gba),
				mu
			);

			transformed = p1 + (p2 - p1) * mu;
			transformed -= originOffset;
			transformed *= scale;
			vec4 data1 = look(p1.x, p1.y, p1.z, voxelPassTexture);
			vec4 data2 = look(p2.x, p2.y, p2.z, voxelPassTexture);
			objectNormal = normalize(mix(data1.xyz, data2.xyz, mu));
			transformedNormal = normalMatrix * objectNormal;
			#ifndef FLAT_SHADED
				vNormal = transformedNormal;
			#endif
		#endif
		`;e.vertexShader=t+e.vertexShader.replace("#include <project_vertex>",r+`
#include <project_vertex>`);let i=e.fragmentShader.match(/vec3 diffuseColor[^\n]*\n/);if(!i)return;let n=`
		#ifdef SHAPEBLEND_C
			#if SHAPEBLEND_C == 1
				${i[0].replace(/nodeU0,/g,"marchColor.rgb,").replace(/nodeU\d+(?=,g_uid\d+_calpha\))/g,"marchColor.a")}
			#else
				${i[0]}
			#endif
		#else
			${i[0]}
		#endif
		`;e.fragmentShader=`in vec4 marchColor;
`+e.fragmentShader.replace(i[0],n),Object.assign(e.uniforms,this.marchPassUniforms)}initDebugPass(e){console.log("fboToDebug.width",e.width,e.height),this.geometry=new Rp(e.width,e.height),this.geometry.userData={parameters:{width:4,height:4}};let t={inputTexture:{value:Array.isArray(e.texture)?e.texture[1]:e.texture},pyramidTextureSize:{value:void 0}},r=i=>{i.vertexShader=`
				precision highp float;

				varying vec2 vUv;

				void main() {
						gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
						vUv = uv;
				}
			`,i.fragmentShader=`
				layout(location = 1) out vec4 gVelocity;

				precision highp float;
				
				uniform sampler2D inputTexture;
				varying vec2 vUv;

				uniform vec2 pyramidTextureSize;

				void main() {
						// Sample the input texture using UV coordinates
						gl_FragColor = texture(inputTexture, vUv);
						gVelocity = vec4(0.0);
				}
			`,t.pyramidTextureSize.value=new ze(this.pyramidRenderTarget.width,this.pyramidRenderTarget.height),Object.assign(i.uniforms,t)};this.material.shapeBlendhack=r,this.material.root.shapeBlendhack=r}},gb=USe;gb.streamCompaction=new myt;var gyt=new dt,vyt=new dt,O1=new ur,Ig=new k,bO=new k,yyt=new ur;function byt(e,t=0){let r=this.children.length;for(;r--;){let i=this.children[r];fb.is(i)&&VSe.call(i,e,t+1)}}function VSe(e,t=0){if(e(this,t)!==!0){let r=this.children.length;for(;r--;){let i=this.children[r];fb.is(i)&&VSe.call(i,e,t+1)}}}function _yt(){if(this.shapesDataTexture.value===void 0){let o=new so(new Float32Array(4*ha*T0),ha,T0,zi,ci);this.shapesDataTexture.value=o}let e=this.shapesDataTexture.value,t=e.image.data;e.needsUpdate=!0;let r=0,i=this.data.geometry.blendRange,n=gyt.copy(this.matrixWorld).invert(),a=0;byt.call(this,o=>{var y;if(o.visible===!1)return!0;let s;if(o instanceof Us||o instanceof zE||o instanceof BE)return;o instanceof _a?s=o.object:s=o;let l=(y=o.data)==null?void 0:y.cloner;if(Vr.is(o)&&l&&!l.hideBase&&l.type!=="radial"&&l.disabled!==!0||!(s instanceof Sn))return;let u=s.geometry.userData.parameters,c=u.shapeBlendNode;if(c===void 0)return;if(vyt.multiplyMatrices(n,o.matrixWorld).decompose(bO,O1,Ig),u.type==="TorusGeometry"&&u.arc!==360){let b=u.arc*Math.PI/180;b=b/4,O1.multiply(yyt.set(0,0,Math.sin(b),Math.cos(b)))}let d=c.overrideGlobalBlend?c.blendRange:i;d=d/this.bboxSize*2,t[a*4]=(bO.x-this.bboxOffset)/this.bboxSize*2,t[a*4+1]=(bO.y-this.bboxOffset)/this.bboxSize*2,t[a*4+2]=(bO.z-this.bboxOffset)/this.bboxSize*2,t[a*4+3]=c.operation===0?1:c.operation===2?-1:-2,t[ha*4+a*4]=-O1.x,t[ha*4+a*4+1]=-O1.y,t[ha*4+a*4+2]=-O1.z,t[ha*4+a*4+3]=O1.w;let h=new Float32Array(4),f=0;if(u.type==="SphereGeometry")u.width===u.height&&u.width===u.depth?h[0]=0:h[0]=1,h[1]=u.width/this.bboxSize,h[2]=u.height/this.bboxSize,h[3]=u.depth/this.bboxSize,r=Math.max(r,h[1]*Ig.x+d,h[2]*Ig.x+d,h[3]*Ig.x+d);else if(u.type==="CubeGeometry"){f=u.cornerRadius;let b=u.width,w=u.height,x=u.depth;h[0]=2,h[1]=(b-2*f)/this.bboxSize,h[2]=(w-2*f)/this.bboxSize,h[3]=(x-2*f)/this.bboxSize,r=Math.max(r,Math.sqrt(b**2+w**2+x**2)/this.bboxSize*Ig.x+d)}else if(u.type==="CylinderGeometry"){f=u.cornerRadius;let b=u.height,w=u.radiusBottom,x=u.radiusTop;if(x>=w){let S=Math.atan2(x-w,b),C=(Math.PI/2-S)/2;x-=f/Math.tan(C),w-=f*Math.tan(C)}else if(w>x){let S=Math.atan2(w-x,b),C=(Math.PI/2-S)/2;x-=f*Math.tan(C),w-=f/Math.tan(C)}h[1]=(u.height-2*f)/this.bboxSize,w===x?(h[0]=3,h[2]=w/this.bboxSize*2):(h[0]=4,h[2]=w/this.bboxSize*2,h[3]=x/this.bboxSize*2),r=Math.max(r,h[1]*4*Ig.x+d)}else if(u.type==="TorusGeometry"){if(h[0]=5,h[1]=(u.width-u.depth)/this.bboxSize,h[2]=u.depth/this.bboxSize,u.arc!==360){h[0]=6,h[3]=h[1],t[ha*12+a*4+3]=h[2];let b=2*Math.atan2(h[2]/2,h[1]),w=u.arc*Math.PI/180/2-b;h[1]=Math.sin(w),h[2]=Math.cos(w)}r=Math.max(r,u.width*Ig.x/this.bboxSize+d)}t.set(h,ha*8+a*4),t[ha*12+a*4]=d,t[ha*12+a*4+1]=f/this.bboxSize*2,t[ha*12+a*4+2]=Ig.x;let g=s.material,p=g.uniforms.nodeU0.node.value,m=g.uniforms.nodeU1.value;c.operation!==0&&!c.useColor&&(m=-1),t[ha*16+a*4]=p.r,t[ha*16+a*4+1]=p.g,t[ha*16+a*4+2]=p.b,t[ha*16+a*4+3]=m,m<1&&this.material.defines.SHAPEBLEND_C===1&&(this.material.transparent=!0),a++}),this.npart=a,this.spatialPassUniforms.span.value=r*1.4}var kSe=512;function Hte(e,t){let r=!1,i=e.layers.mask&kSe,n=t.getLayersOfType("transmission"),a=t.getLayersOfType("outline");return a.length>0&&(e.layers.set(8),n.length>0&&e.layers.enable(3),r=!0,cG(e),uG(e)),n.length===0&&a.length===0&&e.layers.set(0),i&&e.layers.set(9),e instanceof jw&&e.needsAO&&e.layers.enable(5),r}function $te(e,t){if(!t.layers)return!1;let r=e.layers.mask&kSe,i=!1,n=t.getLayersOfType("transmission").filter(o=>o.data.visible),a=t.getLayersOfType("outline").filter(o=>o.data.visible);return n.length>0&&(e.layers.set(3),a.length>0&&e.layers.enable(8),i=!0),n.length===0&&a.length===0&&e.layers.set(0),r&&e.layers.set(9),e.needsAO&&e.layers.enable(5),i}function wyt(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof jw)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)Hte(r,r.material[i])&&(t=!0);else Hte(r,r.material)&&(t=!0)}),t}function xyt(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof jw)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)$te(r,r.material[i])&&(t=!0);else $te(r,r.material)&&(t=!0)}),t}var Syt=new P_e,Cyt=new dt,Eyt=new _w;function Bk(e,t,r,i=!1){let n=e.cloner;if(n)for(let a of n.children){let o=Cyt.copy(a.matrixWorld).invert(),s=Eyt.copy(t.ray).applyMatrix4(o),l=e.matrixWorld;s.applyMatrix4(l);let u=Syt;u.set(s.origin,s.direction),u.near=t.near,u.far=t.far;let c=u.intersectObject(e,!1);c.length>0&&r.push({...c[0],object:i?a:e})}}var Myt=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((r,i)=>{let n=[i,r],a=r;for(;this._constraints.has(a);){if(a=this._constraints.get(a),n.includes(a)){console.warn(`circular dependency detected: ${n.join(" -> ")}`);break}t.has(a)||n.push(a)}for(let o=n.length-2;o>=0;o--)if(!t.has(n[o])){let s=e.find(n[o]);s?s.applyPathSnapping(e):console.warn(`missing entity ${n[o]}`),t.add(n[o])}})}findDependency(e,t){let r=e;for(;this._constraints.has(r);)if(r=this._constraints.get(r),r===t)return!0;return!1}},Pyt="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",ov=class{};QC(ov,"DepthMapRange",65536),QC(ov,"MemoryPageSize",65536),QC(ov,"BytesPerFloat",4),QC(ov,"BytesPerInt",4);function Tyt(e){let t,r,i,n,a,o,s,l,u,c,d,h,f,g,p,m;function y(O){let j=new Float64Array(c,o,16);for(let I=0;I<16;I++)j[I]=O[I];let D;if(i>1){t.exports.sortIndexes(n,a,u,o,s,l,h.DepthMapRange,i);let I=new Uint32Array(i);D=I.buffer,I.set(new Uint32Array(c,l,i))}else if(i===1){let I=new Uint32Array(i);I[0]=new Uint32Array(c,n,r)[0],D=I.buffer}else D=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:D},[D])}function b(O,j,D){let I=new Float32Array(c,a,r*3);i=0;let q=new Uint32Array(c,n,r);for(let $=0;$<D.length-1;$++){let X=j[$],N=O[$].elements,Q=X.filter(L=>L.enabled&&L.mode==="Include").map(L=>L.type==="Box"?C(L):A(L)),F=X.filter(L=>L.enabled&&L.mode==="Exclude").map(L=>L.type==="Box"?C(L):A(L));for(let L=D[$];L<D[$+1];L++){let Y=f[L*3],ae=f[L*3+1],re=f[L*3+2];if((Q.length===0||x(Y,ae,re,Q))&&(F.length===0||!x(Y,ae,re,F))){let H=1/(N[3]*Y+N[7]*ae+N[11]*re+N[15]);I[i*3]=(N[0]*Y+N[4]*ae+N[8]*re+N[12])*H,I[i*3+1]=(N[1]*Y+N[5]*ae+N[9]*re+N[13])*H,I[i*3+2]=(N[2]*Y+N[6]*ae+N[10]*re+N[14])*H,q[i]=L,i++}}}}function w(O,j){let D=[],I=j.filter(X=>X.enabled&&X.mode==="Include").map(X=>X.type==="Box"?C(X):A(X)),q=j.filter(X=>X.enabled&&X.mode==="Exclude").map(X=>X.type==="Box"?C(X):A(X)),$=O.length;for(let X=0;X<$;X+=3){let N=O[X],Q=O[X+1],F=O[X+2];(I.length===0||x(N,Q,F,I))&&(q.length===0||!x(N,Q,F,q))||D.push(X/3)}return D}function x(O,j,D,I,q){return I[q==="Intersect"?"every":"some"]($=>{let X=S(O,j,D,$.invRotationMatrix,$.cropCenter);return Array.isArray($)?M(X.x,X.y,X.z,$):P(X.x,X.y,X.z,$)})}function S(O,j,D,I,q){let $=O-q[0],X=j-q[1],N=D-q[2],Q=1/(I[3]*$+I[7]*X+I[11]*N+I[15]);return{x:(I[0]*$+I[4]*X+I[8]*N+I[12])*Q+q[0],y:(I[1]*$+I[5]*X+I[9]*N+I[13])*Q+q[1],z:(I[2]*$+I[6]*X+I[10]*N+I[14])*Q+q[2]}}function C(O){let j=O.cropSize[0]/2,D=O.cropSize[1]/2,I=O.cropSize[2]/2,q=[O.cropCenter[0]-j,O.cropCenter[1]-D,O.cropCenter[2]-I,O.cropCenter[0]+j,O.cropCenter[1]+D,O.cropCenter[2]+I],$=T(O.cropRotation);return Object.assign(q,{invRotationMatrix:$,cropCenter:O.cropCenter})}function T(O){let j=[],D=O[0]*Math.PI/180,I=O[1]*Math.PI/180,q=O[2]*Math.PI/180,$=Math.cos(D),X=Math.sin(D),N=Math.cos(I),Q=Math.sin(I),F=Math.cos(q),L=Math.sin(q),Y=$*F,ae=$*L,re=X*F,H=X*L;return j[0]=N*F,j[1]=-N*L,j[2]=Q,j[4]=ae+re*Q,j[5]=Y-H*Q,j[6]=-X*N,j[8]=H-Y*Q,j[9]=re+ae*Q,j[10]=$*N,j[12]=0,j[13]=0,j[14]=0,j[3]=0,j[7]=0,j[11]=0,j[15]=1,j}function M(O,j,D,I){return O>=I[0]&&O<=I[3]&&j>=I[1]&&j<=I[4]&&D>=I[2]&&D<=I[5]}function A(O){let j=2/O.cropSize[0],D=2/O.cropSize[1],I=2/O.cropSize[2],q=T(O.cropRotation);return{invRadiusX:j,invRadiusY:D,invRadiusZ:I,cropCenter:O.cropCenter,invRotationMatrix:q}}function P(O,j,D,I){let q=(O-I.cropCenter[0])*I.invRadiusX,$=(j-I.cropCenter[1])*I.invRadiusY,X=(D-I.cropCenter[2])*I.invRadiusZ;return q*q+$*$+X*X<=1}e.onmessage=O=>{if(O.data.getCroppedIndexes){let j=new Uint32Array(w(new Float32Array(O.data.positions),O.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:j},[j])}else if(O.data.positions)d=O.data.positions,f=new Float32Array(d),p=O.data.meshMatrixWorlds,m=O.data.cropsArray,g=O.data.meshIndexIntervals,b(p,m,g),e.postMessage({sortSetupComplete:!0});else if(O.data.sort||O.data.newMatrixWorlds||O.data.newCropsArray)(O.data.newMatrixWorlds||O.data.newCropsArray)&&(m=O.data.newCropsArray||m,p=O.data.newMatrixWorlds||p,b(p,m,g)),y(O.data.sort.view,O.data.sort.cameraPosition);else if(O.data.init){h=O.data.init.Constants,r=O.data.init.splatCount;let j=h.BytesPerInt,D=h.BytesPerFloat*3,I=new Uint8Array(O.data.init.sorterWasmBytes),q=j+D,$=r*q,X=r*h.BytesPerInt*2+h.DepthMapRange*h.BytesPerInt*2,N=h.MemoryPageSize*32,Q=$+X+N,F=Math.floor(Q/h.MemoryPageSize)+1,L={module:{},env:{memory:new WebAssembly.Memory({initial:F*2,maximum:F*3,shared:!0})}};WebAssembly.compile(I).then(Y=>WebAssembly.instantiate(Y,L)).then(Y=>{t=Y,n=0,a=r*j,o=a+r*D,u=o+16*h.BytesPerFloat*2,s=u+r*h.BytesPerInt,l=s+h.DepthMapRange*h.BytesPerInt,c=L.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function Ayt(e){let t=new Worker(URL.createObjectURL(new Blob(["(",Tyt.toString(),")(self)"],{type:"application/javascript"}))),r=atob(Pyt),i=new Uint8Array(r.length);for(let n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return t.postMessage({init:{sorterWasmBytes:i.buffer,splatCount:e,Constants:{BytesPerFloat:ov.BytesPerFloat,BytesPerInt:ov.BytesPerInt,DepthMapRange:ov.DepthMapRange,MemoryPageSize:ov.MemoryPageSize}}}),t}var HB=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(r){return e[0]=r,t[0]}}(),Oyt=function(e,t,r,i){return e+(t<<8)+(r<<16)+(i<<24)},_O=new ze;function Xte(e){let t=!1;return e.scene.objects.traverse((r,i)=>{if(i.visible===!1)return!0;i.type==="Splat"&&(t=!0)}),t}var gR=class extends Ci{constructor(e,t,r,i,n=!1,a=1,o,s){super(r,i),this.splatCount=t,this.meshIndexIntervals=o,this.meshMatrixWorlds=s,this.splatBuffers=e,this.geometry=r,this.material=i,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=n,this.devicePixelRatio=a,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,r=!1,i=1,n,a){let o=gR.buildGeomtery(t),s=gR.buildMaterial(n);return new gR(e,t,o,s,r,i,n,a)}static buildMaterial(e){let t=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,r=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,i={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new ze},viewport:{type:"v2",value:new ze},basisViewport:{type:"v2",value:new ze},debugColor:{type:"v3",value:new er},covariancesTextureSize:{type:"v2",value:new ze(1024,1024)},centersColorsTextureSize:{type:"v2",value:new ze(1024,1024)},orthoZoom:{type:"f",value:-1}};return new qr({uniforms:i,vertexShader:t,fragmentShader:r,transparent:!0,alphaTest:1,blending:X0,depthTest:!0,depthWrite:!1,side:Fa})}static buildGeomtery(e){let t=new Wt;t.setIndex([0,1,2,0,2,3]);let r=new Float32Array(4*3),i=new tr(r,3);t.setAttribute("position",i),i.setXYZ(0,-1,-1,0),i.setXYZ(1,-1,1,0),i.setXYZ(2,1,1,0),i.setXYZ(3,1,-1,0),i.needsUpdate=!0;let n=new E_e().copy(t),a=new Uint32Array(e),o=new gM(a,1,!1);return o.setUsage(n7e),n.setAttribute("splatIndex",o),n.instanceCount=e,n}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(i=>i.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,t=0,r=0;for(let i of this.splatBuffers){let n=i.nsplats;this.colors.subarray(e,e+n*4).set(i.colorsA),e+=n*4,this.centers.subarray(t,t+n*3).set(i.decoded.xyz.denormDequant().data),t+=n*3,this.covariances.subarray(r,r+n*6).set(new Float32Array(i.precomputedCovarianceBufferData)),r+=n*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new ze(4096,1024);for(;t.x*t.y*2<e*6;)t.y*=2;let r=new ze(4096,1024);for(;r.x*r.y*4<e*4;)r.y*=2;let i,n;if(this.halfPrecisionCovariancesOnGPU){n=new Uint16Array(t.x*t.y*2);for(let c=0;c<this.covariances.length;c++)n[c]=zZe.toHalfFloat(this.covariances[c]);i=new so(n,t.x,t.y,nD,Gm)}else n=new Float32Array(t.x*t.y*2),n.set(this.covariances),i=new so(n,t.x,t.y,nD,ci);i.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=i,this.material.uniforms.covariancesTextureSize.value.copy(t);let a=new Uint32Array(r.x*r.y*4);for(let c=0;c<e;c++){let d=c*4,h=c*3,f=c*4;a[f]=Oyt(this.colors[d],this.colors[d+1],this.colors[d+2],this.colors[d+3]),a[f+1]=HB(this.centers[h]),a[f+2]=HB(this.centers[h+1]),a[f+3]=HB(this.centers[h+2])}let o=new so(a,r.x,r.y,V1e,Rm);o.internalFormat="RGBA32UI",o.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=o,this.material.uniforms.centersColorsTextureSize.value.copy(r);let s=256*4,l=new Float32Array(256*16);for(let c=0;c<this.meshMatrixWorlds.length;c++)l.set(this.meshMatrixWorlds[c].elements,c*16);let u=new so(l,s,1,zi,ci);u.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=u,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:n,texture:i,size:t},centerColors:{data:a,texture:o,size:r},meshMatrixWorlds:{data:l,texture:u}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,r,i){this.splatCount>0&&(_O.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(_O),this.material.uniforms.basisViewport.value.set(2/_O.x,2/_O.y),this.material.uniforms.focal.value.set(t,r),this.material.uniforms.orthoZoom.value=i,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose()),this.removeFromParent()}},qSe,Ryt=new Promise(e=>{qSe=e}),Yte=!1,wO;function Dyt(){if(Yte)return;if(wO)return wO;async function e(){let t=await tl(()=>import("./gaussian-splat-compression-BblNKJdU.js"),[]);qSe(t),Yte=!0}return wO=e(),wO}var WSe;Ryt.then(e=>WSe=e);var Iyt=class{constructor(e={}){QC(this,"updateView",function(){let t=new dt,r=[],i=new k(0,0,-1),n=new k(0,0,-1),a=new k,o=new k;return function(s=!1,l){let u=this.updateMatrixWorldsInWorkerIfNeeded(),c=this.cropsChanged();if(!s){n.set(0,0,-1).applyQuaternion(l.quaternion);let h=!1,f=!1;if(n.dot(i)<=.95&&(h=!0),o.copy(l.position).sub(a).length()>=1&&(f=!0),!h&&!f&&!u&&!c&&!this.needsInitialRender)return}this.needsInitialRender=!1,a.copy(l.position),i.copy(n),t.copy(l.matrixWorld).invert(),t.premultiply(this.dummyPerspectiveMatrix),r[0]=l.position.x,r[1]=l.position.y,r[2]=l.position.z;let d={sort:{view:t.elements,cameraPosition:r,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...u?{newMatrixWorlds:this.meshMatrixWorlds}:{},...c?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=d:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(d))}}()),this.scene=e.scene,this.currentPage=null,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null,this.needsInitialRender=!0,this.dummyPerspectiveMatrix=new dt().makePerspective(-1,1,-1,1,.1,1e3)}updateSplatMeshUniforms(e,t){let r=new ze;this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(e.getSize(r),this.cameraFocalLengthX=t.projectionMatrix.elements[0]*this.devicePixelRatio*r.x*.45,this.cameraFocalLengthY=t.projectionMatrix.elements[5]*this.devicePixelRatio*r.y*.45,this.splatMesh.updateUniforms(r,this.cameraFocalLengthX,this.cameraFocalLengthY,t.isPerspectiveCamera?-1:t.zoom*this.devicePixelRatio))}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new k().fromArray(e.position)),e.orientation&&(e.orientation=new ur().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseVisibleEntity(a=>{a.data.type==="Splat"&&t.push(a)}),this.splatMesh&&this.splatMesh.dispose(),t.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(a=>a.matrixWorld),this.meshMatrixWorldsOld=t.map(a=>a.matrixWorld.clone()),this.cropsArray=t.map(a=>a.data.crops.map(o=>o.data));let r=t.map(a=>new WSe.GSplineBuffer(new Uint8Array(a.data.buffer).buffer)),i=0,n=[0];for(let a of r)i+=a.getSplatCount(),n.push(i);return this.setupSplatMesh(r,i,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,n,this.meshMatrixWorlds),this.setupSortWorker(i),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,t*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((t,r)=>t.equals(this.meshMatrixWorldsOld[r]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,r)=>{var i;t.data.crops.forEach((n,a)=>{this.cropsArray[r][a]===void 0?(e=!0,this.cropsArray[r][a]=n.data):Object.entries(n.data).forEach(([o,s])=>{var l;Array.isArray(s)&&s.some((u,c)=>u!==this.cropsArray[r][a][o][c])?(e=!0,this.cropsArray[r][a][o]=s):s!==((l=this.cropsArray[r][a])==null?void 0:l[o])&&(e=!0,this.cropsArray[r][a][o]=s)})}),t.data.crops.length!==((i=this.cropsArray[r])==null?void 0:i.length)&&(this.cropsArray[r].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,r=new k,i=new ur,n=!1,a=1,o,s){this.splatMesh=gR.buildMesh(e,t,n,a,o,s),this.splatMesh.position.copy(r),this.splatMesh.quaternion.copy(i),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=99999,this.splatRenderCount=t,this.splatMesh.onBeforeRender=(l,u,c)=>this.update(l,c)}setupSortWorker(e){this.sortWorker=Ayt(e),this.sortWorker.onmessage=t=>{var r;t.data.sortDone?(this.sortRunning=!1,(r=this.splatMesh)==null||r.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.scene.activePage.add(this.splatMesh),this.needsInitialRender=!0)}}update(e,t){this.splatMesh!==null&&(this.updateSplatMeshUniforms(e,t),this.updateView(!1,t))}getSplatMesh(){return this.splatMesh}},Lk=new Hm;Lk.wireframe=!0;var Kte=new k,xG=class extends Io{constructor(e,t){super(),this.data=e,this.sharedAssets=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.shapeBlendIntances=[],this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new Myt,this.invisibleObjects=new C_("jflkdsafjasdifjaslk",{...W6.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1,this.errorPage=new Kn("fdasfa",{...ew.defaultData,name:""},{shared:t,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=xyt(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=wyt(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),r=this.entityIdentityToEntity[t];r&&(e.uuid=r.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof Kn&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],i=t;for(;i!==this;){let n=i;i=i.parent;let a=i.children.indexOf(n);r.splice(0,0,a)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(i)}return t.sort((r,i)=>fwe(r.sortKey,i.sortKey)),t.map(r=>r.entity)}nonExistOrDescendantOf(e,t){let r=this.find(e);if(r===void 0)return!0;for(;r;){if(r.uuid===t)return!0;r=r.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===Rw)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}find2D(e){for(let t of this.children)if(t instanceof Kn&&t.uiScene){let r=t.uiScene.find(e);if(r)return r}}findScene2DfromObject2D(e){for(let t of this.children)if(t instanceof Kn&&t.uiScene&&t.uiScene.find(e))return t.uiScene}find2DInUIObjects(e){let t;return this.traverseEntity(r=>{t===void 0&&r instanceof Ba&&(t=r.uiCanvas.find(e))}),t}traverse2D(e){for(let t of this.children)t instanceof Kn&&t.uiScene&&t.uiScene.traverse(e)}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var r;if(e.path.length===0&&e.type===7){let i=e.parent===null?this:this.find(e.parent);if(i===void 0)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,i,e.localIndex,t);n.updateVisible(this),n.resetBBoxNeedsUpdate(),gf(n)&&zm(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n),this.markPenumbraSizeDirty(),n.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");i.traverseEntity(a=>{a instanceof gb&&(this.shapeBlendIntances=this.shapeBlendIntances.filter(o=>o!==a))}),this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markPenumbraSizeDirty(),i.parent.remove(i),zm(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),gf(i)&&(i.freeBooleanPointer(),n instanceof mb&&n.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof yG&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid),i.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),(r=i.cloner)==null||r.resetOnMove(),this.markToExpandCloner(i);let a=e.parent===null?this:this.find(e.parent);if(a===void 0)throw new Error("unexpected");a.add(i),this.markNeedsRecomputeInstancesForAncessors(a),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(this),i.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let o=e.localIndex;a.children.splice(o,0,a.children.pop()),gf(i)&&(i.invalidateUpstreamBooleanData(),zm(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof mb&&n.invalidateDownstreamBooleanData().recomputeBoolean()),i.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var t;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let r of this.children)r instanceof Kn&&(r.visible=r.uuid===e,r.visible&&(this.activePage=r,this.activePage.onActive(this)));this.activePage!==((t=this.splatViewer)==null?void 0:t.activePage)&&this.reloadSplats()}updateEntityByOp(e,t,r,i){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:a}=t.props;t={...t,props:a},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let n=this.find(e);if(n)try{fyt(n,t,r,{scene:this,shared:i}),n instanceof Sn&&n.updateGeometryGroupsIfNeeded()}catch(a){console.error(a)}}updateEntity2DByOp(e,t,r,i,n,a=[]){e.updateEntityByOp(t,r,i,n),this.traverseEntity(o=>{(o instanceof Ba||o instanceof Kn)&&(a.includes(o.frameId??"")||o.frameId===t)&&o.updateEntity2DByOp(t,r,i,n)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let r=Object.entries(t.data.lib.components).map((i,n)=>({data:i[1].asset.data,children:i[1].asset.children,id:i[0],fi:n}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(r,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(i=>{i instanceof Ua&&i.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){Vr.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{Vr.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,r,i,n,a,o){if(e){let s=i.find(e);s&&s!==i&&n.forInstancesRec(l=>{l.data=MM(l.data,u=>{let c=u.events.data(o.id),d=l.goUp(a);if(d){let h=[...hwe(d.identity),e].join("-"),f=this.entityIdentityToEntity[h];if(f){let g=f.uuid,p=Ln.zoom(c,t);p[r]=g}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,r,i,n,a){e.forEach(o=>{o.data.type==="Transition"?this.relativeizeInner(o.data.object,[...t,o.id],"object",r,i,n,a):o.data.type==="Animation"?this.relativeizeInner(o.data.object,[...t,o.id],"object",r,i,n,a):o.data.type==="Conditional"&&(this.rewriteActions(o.data.ifActions,[...t,o.id,"ifActions"],r,i,n,a),this.rewriteActions(o.data.elseActions,[...t,o.id,"elseActions"],r,i,n,a))})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof E_&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,r)=>{t.data.events.forEach(i=>{if(i.data.type==="GameControl"){let n=!1;if(t.forInstancesRec(a=>{a.data=MM(a.data,o=>{a.isInstanceRoot||(o.events.delete(i.id),n=!0)}).data}),n===!1)for(let a of UD.list)this.rewriteActions(i.data.gameActions[a],["gameActions",a],e,t,r,i)}else i.data.type==="Conditional"?(i.data.condition.type==="Distance"?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",e,t,r,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",e,t,r,i)):i.data.condition.type==="State"?this.relativeizeInner(i.data.condition.object,["condition"],"object",e,t,r,i):i.data.condition.type==="Comparison"&&(i.data.condition.lOperand.type==="Property"&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,r,i),i.data.condition.rOperand.type==="Property"&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,r,i)),this.rewriteActions(i.data.inActions,["inActions"],e,t,r,i),this.rewriteActions(i.data.outActions,["outActions"],e,t,r,i)):"actions"in i.data&&this.rewriteActions(i.data.actions,["actions"],e,t,r,i)})}),!0})}expandInstances(e,t,r){let i=new Set;this.traverseEntity(n=>{if(n instanceof E_&&n.isInstanceRoot)return n.expandInstanceChildren({scene:this,shared:e,pendingDeletes:i}),t||n.resetBBoxNeedsUpdate(),r&&n.traverseEntity(a=>{r.addClip(a)}),!0});for(let n of i)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),_G(n)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(r=>{r instanceof E_&&r.isInstanceRoot&&(r.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let r=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[r]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[r]),t.dispose()})}clearScene(){for(let e of this.children)Vr.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let r=[],i=n=>{for(let a of n.children){let o=a.cloner;if(Vr.is(a)&&!a.raycastLock&&(a.visible||o!=null&&o.object.data.visible))if(t===!0&&a.isInstanceRoot){let s=[];if(e.intersectObject(a,!0,s),s.length){let l=s[0];l.object=a,l.point.applyMatrix4(l.object.matrixWorld);let u=a.matrixWorld.clone().invert();l.point.applyMatrix4(u),r.push(l)}}else(gf(a)||Ek(a)&&this.enableHelpers&&a.objectHelper.visible)&&(e.intersectObject(a,!1,r),Bk(a,e,r)),i(a)}};return i(this.activePage),r}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let a=n.cloner;Vr.is(n)&&(n.visible||a!=null&&a.object.data.visible)&&((gf(n)||Ek(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),Bk(n,e,t,!0)),r(n))}};return r(this),t}forEachEntity(e){for(let t of this.children)Vr.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)Vr.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)Vr.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(r=>{if(r instanceof Sn&&r.data.type==="Mesh"&&(r.data.geometry.type==="TextGeometry"||r.data.geometry.type==="InputGeometry")&&r.data.geometry.font===e){let i=r.geometry,n=r.data.geometry;i.updateFont(e,t).then(()=>{i.update(n);let a=r.invalidateDownstreamBooleanData();zm(a)&&a.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)fb.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)Vr.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,r){let i=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,i,r),i+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,r,i,n,a){var l;let o={scene:this,shared:a},s=wG(e,t,o);return s instanceof gb&&this.shapeBlendIntances.push(s),s&&(this.entityByUuid[e]=s,i.add(s),i.children.splice(n,0,i.children.pop()),r.length>0&&(s.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(r,s,a)),s.updateState(t,o),s instanceof Sn&&s.updateGeometryGroupsIfNeeded(),s.updateVisible(this),s.cloner&&this.toExpandCloner.add(s),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&s.traverseEntity(u=>{let c=u.dataPatched;if(u instanceof Sn&&c.bones&&c.boneInverses){let d=c.bones.map(g=>this.find(g)),h=c.boneInverses.map(g=>new dt().fromArray(g)),f=new lW(d,h);u.bind(f,u.bindMatrix)}else u.matrixAutoUpdate=!0}),s}getCenter(e){let t=[];for(let i=0,n=e.length;i<n;++i){let{id:a,recursive:o}=e[i],s=this.find(a),l=o?s.recursiveBBox:s.singleBBox;t.push(...l.vertices)}let r=new dn;return r.setFromPoints(t),r.getCenter(Kte),Kte}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var i;if(e===null){t.identity();return}let r=(i=this.find(e))==null?void 0:i.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof ho)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)t.material[r]instanceof wv&&e(t.material[r]);else t.material instanceof wv&&e(t.material)})}updateViewPlaneSize(e,t,r=!1){this.traverseConcreteEntity(i=>{i instanceof Ua&&i.setViewplaneSize(e,t,r)})}initializeSplatViewer(){this.splatViewer=new Iyt({scene:this}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.loadSplat()}},vR=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},jyt=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Byt(Math.atan2(i,r))},zyt=(e,t,r)=>{let i={x:0,y:0};return r=Fk(r),i.x=e.x-t*Math.cos(r),i.y=e.y-t*Math.sin(r),i},Fk=e=>e*(Math.PI/180),Byt=e=>e*(180/Math.PI),Lyt=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,$B=new Map,Qte=e=>{$B.has(e)&&clearTimeout($B.get(e)),$B.set(e,setTimeout(e,100))},i2=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let a=0;a<i.length;a+=1)n=i[a],e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent(n,r)},Jte=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let a=0;a<i.length;a+=1)n=i[a],e.removeEventListener?e.removeEventListener(n,r):e.detachEvent&&e.detachEvent(n,r)},GSe=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),Zte=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},Nk=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},SG=(e,t,r)=>{let i=HSe(e);for(let n in i)if(i.hasOwnProperty(n))if(typeof t=="string")i[n]=t+" "+r;else{let a="";for(let o=0,s=t.length;o<s;o+=1)a+=t[o]+" "+r+", ";i[n]=a.slice(0,-2)}return i},Fyt=(e,t)=>{let r=HSe(e);for(let i in r)r.hasOwnProperty(i)&&(r[i]=t);return r},HSe=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(r){t[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},XB=(e,t)=>{for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},Nyt=(e,t)=>{let r={};for(let i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?r[i]=t[i]:e.hasOwnProperty(i)&&(r[i]=e[i]);return r},Uk=(e,t)=>{if(e.length)for(let r=0,i=e.length;r<i;r+=1)t(e[r]);else t(e)},Uyt=(e,t,r)=>({x:Math.min(Math.max(e.x,t.x-r),t.x+r),y:Math.min(Math.max(e.y,t.y-r),t.y+r)});typeof window<"u"&&($Se="ontouchstart"in window,XSe=!!window.PointerEvent,YSe=!!window.MSPointerEvent);var $Se,XSe,YSe,tS={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},i_,BM={};XSe?i_=tS.pointer:YSe?i_=tS.MSPointer:$Se?(i_=tS.touch,BM=tS.mouse):i_=tS.mouse;function Mb(){}Mb.prototype.on=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var a=0;a<i.length;a+=1)n=i[a],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r};Mb.prototype.off=function(e,t){var r=this;return r._handlers_=r._handlers_||{},e===void 0?r._handlers_={}:t===void 0?r._handlers_[e]=null:r._handlers_[e]&&r._handlers_[e].indexOf(t)>=0&&r._handlers_[e].splice(r._handlers_[e].indexOf(t),1),r};Mb.prototype.trigger=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var a=0;a<i.length;a+=1)n=i[a],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach(function(o){o.call(r,{type:n,target:r},t)})};Mb.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=Nyt(t.options,e))};Mb.prototype.bindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[t]=function(){typeof r["on"+t]=="function"?r["on"+t].apply(r,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},i2(e,i_[t],r._domHandlers_[t]),BM[t]&&i2(e,BM[t],r._domHandlers_[t]),r};Mb.prototype.unbindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},Jte(e,i_[t],r._domHandlers_[t]),BM[t]&&Jte(e,BM[t],r._domHandlers_[t]),delete r._domHandlers_[t],this};var CG=Mb;function Vn(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Vn.id,Vn.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Vn.prototype=new CG;Vn.constructor=Vn;Vn.id=0;Vn.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Vn.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=Fyt("borderRadius","50%"),r=SG("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},XB(i.el,r),this.options.shape==="circle"&&XB(i.back,t),XB(i.front,t),this.applyStyles(i),this};Vn.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var r in e[t])this.ui[t].style[r]=e[t][r];return this};Vn.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Vn.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Vn.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Vn.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};Vn.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var r=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=r,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let r=t.options.restJoystick,i={};i.x=r===!0||r.x!==!1?0:t.instance.frontPosition.x,i.y=r===!0||r.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t};Vn.prototype.setPosition=function(e,t){var r=this;r.frontPosition={x:t.x,y:t.y};var i=r.options.fadeTime+"ms",n={};n.front=SG("transition",["top","left"],i);var a={front:{}};a.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(n),r.applyStyles(a),r.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(r),r.restCallback()},r.options.fadeTime)};Vn.prototype.restCallback=function(){var e=this,t={};t.front=SG("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};Vn.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Vn.prototype.computeDirection=function(e){var t=e.angle.radian,r=Math.PI/4,i=Math.PI/2,n,a,o;if(t>r&&t<r*3&&!e.lockX?n="up":t>-r&&t<=r&&!e.lockY?n="left":t>-r*3&&t<=-r&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-i&&t<i?a="left":a="right"),e.lockX||(t>0?o="up":o="down"),e.force>this.options.threshold){var s={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(s[l]=this.direction[l]);var u={};this.direction={x:a,y:o,angle:n},e.direction=this.direction;for(l in s)s[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;(!u.x||!u.y)&&this.trigger("plain",e),u.x||this.trigger("plain:"+a,e),u.y||this.trigger("plain:"+o,e),u.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var Vyt=Vn;function hn(e,t){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=hn.id,hn.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(t),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let i=getComputedStyle(r.options.zone.parentElement);return i&&i.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}hn.prototype=new CG;hn.constructor=hn;hn.id=0;hn.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(r){if(r===void 0)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===r)return t[i];return!1}};hn.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};hn.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var r=e.createNipple(t.position,e.manager.getIdentifier());r.add(),e.idles.push(r)}};hn.prototype.createNipple=function(e,t){var r=this,i=r.manager.scroll,n={},a=r.options,o={x:r.parentIsFlex?i.x:i.x+r.box.left,y:r.parentIsFlex?i.y:i.y+r.box.top};if(e.x&&e.y)n={x:e.x-o.x,y:e.y-o.y};else if(e.top||e.right||e.bottom||e.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=e.top,s.style.right=e.right,s.style.bottom=e.bottom,s.style.left=e.left,s.style.position="absolute",a.zone.appendChild(s);var l=s.getBoundingClientRect();a.zone.removeChild(s),n=e,e={x:l.left+i.x,y:l.top+i.y}}var u=new Vyt(r,{color:a.color,size:a.size,threshold:a.threshold,fadeTime:a.fadeTime,dataOnly:a.dataOnly,restJoystick:a.restJoystick,restOpacity:a.restOpacity,mode:a.mode,identifier:t,position:e,zone:a.zone,frontPosition:{x:0,y:0},shape:a.shape});return a.dataOnly||(Nk(u.ui.el,n),Nk(u.ui.front,u.frontPosition)),r.nipples.push(u),r.trigger("added "+u.identifier+":added",u),r.manager.trigger("added "+u.identifier+":added",u),r.bindNipple(u),u};hn.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};hn.prototype.bindNipple=function(e){var t=this,r,i=function(n,a){r=n.type+" "+a.id+":"+n.type,t.trigger(r,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};hn.prototype.pressureFn=function(e,t,r){var i=this,n=0;clearInterval(i.pressureIntervals[r]),i.pressureIntervals[r]=setInterval((function(){var a=e.force||e.pressure||e.webkitForce||0;a!==n&&(t.trigger("pressure",a),i.trigger("pressure "+t.identifier+":pressure",a),n=a)}).bind(i),100)};hn.prototype.onstart=function(e){var t=this,r=t.options,i=e;e=GSe(e),t.updateBox();var n=function(a){t.actives.length<r.maxNumberOfNipples?t.processOnStart(a):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(o){if(Object.values(i.touches).findIndex(function(l){return l.identifier===o})<0){var s=[e[0]];s.identifier=o,t.processOnEnd(s)}}),t.actives.length<r.maxNumberOfNipples&&t.processOnStart(a))};return Uk(e,n),t.manager.bindDocument(),!1};hn.prototype.processOnStart=function(e){var t=this,r=t.options,i,n=t.manager.getIdentifier(e),a=e.force||e.pressure||e.webkitForce||0,o={x:e.pageX,y:e.pageY},s=t.getOrCreate(n,o);s.identifier!==n&&t.manager.removeIdentifier(s.identifier),s.identifier=n;var l=function(c){c.trigger("start",c),t.trigger("start "+c.id+":start",c),c.show(),a>0&&t.pressureFn(e,c,c.identifier),t.processOnMove(e)};if((i=t.idles.indexOf(s))>=0&&t.idles.splice(i,1),t.actives.push(s),t.ids.push(s.identifier),r.mode!=="semi")l(s);else{var u=vR(o,s.position);if(u<=r.catchDistance)l(s);else{s.destroy(),t.processOnStart(e);return}}return s};hn.prototype.getOrCreate=function(e,t){var r=this,i=r.options,n;return/(semi|static)/.test(i.mode)?(n=r.idles[0],n?(r.idles.splice(0,1),n):i.mode==="semi"?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=r.createNipple(t,e),n)};hn.prototype.processOnMove=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),a=t.manager.scroll;if(!Lyt(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+i),t.manager.removeIdentifier(i);return}if(r.dynamicPage){var o=n.el.getBoundingClientRect();n.position={x:a.x+o.left,y:a.y+o.top}}n.identifier=i;var s=n.options.size/2,l={x:e.pageX,y:e.pageY};r.lockX&&(l.y=n.position.y),r.lockY&&(l.x=n.position.x);var u=vR(l,n.position),c=jyt(l,n.position),d=Fk(c),h=u/s,f={distance:u,position:l},g,p;if(n.options.shape==="circle"?(g=Math.min(u,s),p=zyt(n.position,g,c)):(p=Uyt(l,n.position,s),g=vR(p,n.position)),r.follow){if(u>s){let w=l.x-p.x,x=l.y-p.y;n.position.x+=w,n.position.y+=x,n.el.style.top=n.position.y-(t.box.top+a.y)+"px",n.el.style.left=n.position.x-(t.box.left+a.x)+"px",u=vR(l,n.position)}}else l=p,u=g;var m=l.x-n.position.x,y=l.y-n.position.y;n.frontPosition={x:m,y},r.dataOnly||Nk(n.ui.front,n.frontPosition);var b={identifier:n.identifier,position:l,force:h,pressure:e.force||e.pressure||e.webkitForce||0,distance:u,angle:{radian:d,degree:c},vector:{x:m/s,y:-y/s},raw:f,instance:n,lockX:r.lockX,lockY:r.lockY};b=n.computeDirection(b),b.angle={radian:Fk(180-c),degree:180-c},n.trigger("move",b),t.trigger("move "+n.id+":move",b)};hn.prototype.processOnEnd=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),a=t.manager.removeIdentifier(n.identifier);!n||(r.dataOnly||n.hide(function(){r.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(r.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(t.manager.ids[a.id]=a.identifier))};hn.prototype.onDestroyed=function(e,t){var r=this;r.nipples.indexOf(t)>=0&&r.nipples.splice(r.nipples.indexOf(t),1),r.actives.indexOf(t)>=0&&r.actives.splice(r.actives.indexOf(t),1),r.idles.indexOf(t)>=0&&r.idles.splice(r.idles.indexOf(t),1),r.ids.indexOf(t.identifier)>=0&&r.ids.splice(r.ids.indexOf(t.identifier),1),r.manager.removeIdentifier(t.identifier),r.manager.unbindDocument()};hn.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(r){r.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var kyt=hn;function na(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=Zte(),t.config(e),t.prepareCollections();var r=function(){var n;t.collections.forEach(function(a){a.forEach(function(o){n=o.el.getBoundingClientRect(),o.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;i2(window,"resize",function(){Qte(r)});var i=function(){t.scroll=Zte()};return i2(window,"scroll",function(){Qte(i)}),t.collections}na.prototype=new CG;na.constructor=na;na.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var r;return e.collections.every(function(i){return r=i.get(t),!r}),r}};na.prototype.create=function(e){return this.createCollection(e)};na.prototype.createCollection=function(e){var t=this,r=new kyt(t,e);return t.bindCollection(r),t.collections.push(r),r};na.prototype.bindCollection=function(e){var t=this,r,i=function(n,a){r=n.type+" "+a.id+":"+n.type,t.trigger(r,a)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};na.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};na.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};na.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};na.prototype.removeIdentifier=function(e){var t={};for(var r in this.ids)if(this.ids[r]===e){t.id=r,t.identifier=this.ids[r],delete this.ids[r];break}return t};na.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};na.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};na.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};na.prototype.onAny=function(e,t){var r=this,i,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=GSe(t);var a=function(s,l,u){u.ids.indexOf(l)>=0&&(u[n](s),s._found_=!0)},o=function(s){i=r.getIdentifier(s),Uk(r.collections,a.bind(null,s,i)),s._found_||r.removeIdentifier(i)};return Uk(t,o),!1};na.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};na.prototype.onDestroyed=function(e,t){var r=this;if(r.collections.indexOf(t)<0)return!1;r.collections.splice(r.collections.indexOf(t),1)};var qyt=na,ere=new qyt,Wyt={create:function(e){return ere.create(e)},factory:ere},KSe=new Map,FE=new Map,k0=class{constructor(e,t,r,i){this.data=t;let{audio:n,volume:a,delay:o,loop:s}=t;if(!n)throw new Error("Missing property");let l=typeof n=="string"?i.getAudio(n).src:n.data;this.audioPlayer=new sE({src:l,volume:a,delay:o,loop:s}),FE.has(r.uuid)?FE.get(r.uuid).push(this):FE.set(r.uuid,[this]),KSe.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},Vk=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=KSe.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=FE.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...FE.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},QSe=class{constructor(e,t,r,i,n){if(this.data=t,this.shared=i,this.condition=n,t.interaction==="play")this.interaction=new k0(e,t,r,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new Vk(t);else throw new Error("Missing property")}dispatchBasic(){if(Ti(this.shared,this.condition)===!1)return!1;this.interaction instanceof k0?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ti(this.shared,this.condition)===!1)return!1;this.interaction instanceof k0?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(Ti(this.shared,this.condition)===!1)return!1;this.interaction instanceof k0&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},JSe=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i,this.delay=0,this.emission=e.emission,e.delay!==void 0&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop(this.delay):this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze(this.delay):this.unFreeze(this.delay)}start(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},e);return}this.particleSystem.start()}stop(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.stop(0),this.clearDelay()},e);return}this.particleSystem.stop()}freeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.freeze(0),this.clearDelay()},e);return}this.particleSystem.froze()}unFreeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.unFreeze(0),this.clearDelay()},e);return}this.particleSystem.unFroze()}reset(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.reset(0),this.clearDelay()},e);return}this.particleSystem.reset()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze();break}}dispatchBasic(){if(Ti(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze(this.delay);break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchConditional(){if(Ti(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchGameControl(e){if(Ti(this.shared,this.condition)===!1||!this.particleSystem)return!1;e==="start"?this.start(this.delay):this.stop(this.delay)}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},Gyt="text/plain",Hyt="us-ascii",tre=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),$yt=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:i,data:n,hash:a}=r.groups,o=i.split(";");a=t?"":a;let s=!1;o[o.length-1]==="base64"&&(o.pop(),s=!0);let l=(o.shift()||"").toLowerCase(),u=[...o.map(c=>{let[d,h=""]=c.split("=").map(f=>f.trim());return d==="charset"&&(h=h.toLowerCase(),h===Hyt)?"":`${d}${h?`=${h}`:""}`}).filter(Boolean)];return s&&u.push("base64"),(u.length>0||l&&l!==Gyt)&&u.unshift(l),`data:${u.join(";")},${s?n.trim():n}${a?`#${a}`:""}`};function Xyt(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return $yt(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let i=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),t.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),t.stripAuthentication&&(i.username="",i.password=""),t.stripHash?i.hash="":t.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,o=0,s="";for(;;){let u=a.exec(i.pathname);if(!u)break;let c=u[0],d=u.index,h=i.pathname.slice(o,d);s+=h.replace(/\/{2,}/g,"/"),s+=c,o=d+c.length}let l=i.pathname.slice(o,i.pathname.length);s+=l.replace(/\/{2,}/g,"/"),i.pathname=s}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),o=a[a.length-1];tre(o,t.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let a of[...i.searchParams.keys()])tre(a,t.removeQueryParameters)&&i.searchParams.delete(a);if(t.removeQueryParameters===!0&&(i.search=""),t.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}t.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let n=e;return e=i.toString(),!t.removeSingleSlash&&i.pathname==="/"&&!n.endsWith("/")&&i.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var Yyt=class{constructor({url:e,context:t},r,i,n){if(this.controlsManager=r,this.shared=i,this.condition=n,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:Xyt(e,{removeTrailingSlash:!1,removeSingleSlash:!1,stripWWW:!1}),this.context=t??"tab"}dispatch(){var e;if(Ti(this.shared,this.condition)===!1)return!1;wP?window.location.assign(this.url):(this.context==="tab"||dwe&&this.context==="none"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp(ar[0]),dlt())}},ZSe=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.controlsManager=r,this.shared=i,this.condition=n,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=a=>{var u,c;this.timeoutIdQueue.shift();let o=this.page.scene.find(a);if(o===void 0)return;let s=this.controlsManager.sharedGameControlGlobals.rapierWorld,l=s?(u=o.dataPatched.physics)==null?void 0:u.fusedBody:!0;if(o.cloner){for(let d of o.cloner.children)l?(d.playModeVisible=!1,d.rigidBody&&((c=o.dataPatched.physics)==null?void 0:c.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(d.rigidBody.collider(0).handle),s.removeRigidBody(d.rigidBody),d.rigidBody=void 0),d.bvhGeometry&&(d.bvhGeometry=void 0)):this.clone===void 0||this.clone===d?(d.playModeVisible=!1,d.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(d.rigidBody.collider(0).handle),s.removeRigidBody(d.rigidBody),d.rigidBody=void 0)):d.playModeVisible===void 0&&(d.playModeVisible=!0);(l||this.clone===void 0||this.clone===!1)&&(o.visible=!1,o.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(o.rigidBody.collider(0).handle),s.removeRigidBody(o.rigidBody),o.rigidBody=void 0),o.bvhGeometry&&(o.bvhGeometry=void 0))}else o.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(o.rigidBody.collider(0).handle),s.removeRigidBody(o.rigidBody),o.rigidBody=void 0),o.bvhGeometry&&(o.bvhGeometry=void 0),o.visible=!1;s===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(d=>d.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(d=>d.rigidBody!==void 0),o.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(Ti(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(Ti(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},eCe=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.shared=r,this.eventManager=i,this.condition=n,this.shared=r}dispatch(){if(Ti(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),zG(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},tCe={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},EG={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},Kyt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],n2={CSS:{},springs:{}};function xf(e,t,r){return Math.min(Math.max(e,t),r)}function NE(e,t){return e.indexOf(t)>-1}function YB(e,t){return e.apply(null,t)}var cr={arr:function(e){return Array.isArray(e)},obj:function(e){return NE(Object.prototype.toString.call(e),"Object")},pth:function(e){return cr.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||cr.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return cr.hex(e)||cr.rgb(e)||cr.hsl(e)},key:function(e){return!tCe.hasOwnProperty(e)&&!EG.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function rCe(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function iCe(e,t){var r=rCe(e),i=xf(cr.und(r[0])?1:r[0],.1,100),n=xf(cr.und(r[1])?100:r[1],.1,100),a=xf(cr.und(r[2])?10:r[2],.1,100),o=xf(cr.und(r[3])?0:r[3],.1,100),s=Math.sqrt(n/i),l=a/(2*Math.sqrt(n*i)),u=l<1?s*Math.sqrt(1-l*l):0,c=1,d=l<1?(l*s+-o)/u:-o+s;function h(g){var p=t?t*g/1e3:g;return l<1?p=Math.exp(-p*l*s)*(c*Math.cos(u*p)+d*Math.sin(u*p)):p=(c+d*p)*Math.exp(-p*s),g===0||g===1?g:1-p}function f(){var g=n2.springs[e];if(g)return g;for(var p=1/6,m=0,y=0;;)if(m+=p,h(m)===1){if(y++,y>=16)break}else y=0;var b=m*p*1e3;return n2.springs[e]=b,b}return t?h:f}function Qyt(e){return e===void 0&&(e=10),function(t){return Math.ceil(xf(t,1e-6,1)*e)*(1/e)}}var Jyt=function(){var e=11,t=1/(e-1);function r(c,d){return 1-3*d+3*c}function i(c,d){return 3*d-6*c}function n(c){return 3*c}function a(c,d,h){return((r(d,h)*c+i(d,h))*c+n(d))*c}function o(c,d,h){return 3*r(d,h)*c*c+2*i(d,h)*c+n(d)}function s(c,d,h,f,g){var p,m,y=0;do m=d+(h-d)/2,p=a(m,f,g)-c,p>0?h=m:d=m;while(Math.abs(p)>1e-7&&++y<10);return m}function l(c,d,h,f){for(var g=0;g<4;++g){var p=o(d,h,f);if(p===0)return d;var m=a(d,h,f)-c;d-=m/p}return d}function u(c,d,h,f){if(!(0<=c&&c<=1&&0<=h&&h<=1))return;var g=new Float32Array(e);if(c!==d||h!==f)for(var p=0;p<e;++p)g[p]=a(p*t,c,h);function m(y){for(var b=0,w=1,x=e-1;w!==x&&g[w]<=y;++w)b+=t;--w;var S=(y-g[w])/(g[w+1]-g[w]),C=b+S*t,T=o(C,c,h);return T>=.001?l(y,C,c,h):T===0?C:s(y,b,b+t,c,h)}return function(y){return c===d&&h===f||y===0||y===1?y:a(m(y),d,f)}}return u}(),nCe=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,a=4;i<((n=Math.pow(2,--a))-1)/11;);return 1/Math.pow(4,3-a)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var a=xf(i,1,10),o=xf(n,.1,2);return function(s){return s===0||s===1?s:-a*Math.pow(2,10*(s-1))*Math.sin((s-1-o/(Math.PI*2)*Math.asin(1/a))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(a){return Math.pow(a,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(a,o){return function(s){return 1-n(a,o)(1-s)}},e["easeInOut"+i]=function(a,o){return function(s){return s<.5?n(a,o)(s*2)/2:1-n(a,o)(s*-2+2)/2}}}),e}();function MG(e,t){if(cr.fnc(e))return e;var r=e.split("(")[0],i=nCe[r],n=rCe(e);switch(r){case"spring":return iCe(e,t);case"cubicBezier":return YB(Jyt,n);case"steps":return YB(Qyt,n);default:return YB(i,n)}}function aCe(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function bI(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],a=0;a<r;a++)if(a in e){var o=e[a];t.call(i,o,a,e)&&n.push(o)}return n}function _I(e){return e.reduce(function(t,r){return t.concat(cr.arr(r)?_I(r):r)},[])}function rre(e){return cr.arr(e)?e:(cr.str(e)&&(e=aCe(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function PG(e,t){return e.some(function(r){return r===t})}function TG(e){var t={};for(var r in e)t[r]=e[r];return t}function kk(e,t){var r=TG(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function wI(e,t){var r=TG(e);for(var i in t)r[i]=cr.und(e[i])?t[i]:e[i];return r}function Zyt(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function e0t(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(s,l,u,c){return l+l+u+u+c+c}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),a=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+n+","+a+","+o+",1)"}function t0t(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,a=t[4]||1;function o(h,f,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?h+(f-h)*6*g:g<1/2?f:g<2/3?h+(f-h)*(2/3-g)*6:h}var s,l,u;if(i==0)s=l=u=n;else{var c=n<.5?n*(1+i):n+i-n*i,d=2*n-c;s=o(d,c,r+1/3),l=o(d,c,r),u=o(d,c,r-1/3)}return"rgba("+s*255+","+l*255+","+u*255+","+a+")"}function r0t(e){if(cr.rgb(e))return Zyt(e);if(cr.hex(e))return e0t(e);if(cr.hsl(e))return t0t(e)}function Nm(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function i0t(e){if(NE(e,"translate")||e==="perspective")return"px";if(NE(e,"rotate")||NE(e,"skew"))return"deg"}function qk(e,t){return cr.fnc(e)?e(t.target,t.id,t.total):e}function gp(e,t){return e.getAttribute(t)}function AG(e,t,r){var i=Nm(t);if(PG([r,"deg","rad","turn"],i))return t;var n=n2.CSS[t+r];if(!cr.und(n))return n;var a=100,o=document.createElement(e.tagName),s=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;s.appendChild(o),o.style.position="absolute",o.style.width=a+r;var l=a/o.offsetWidth;s.removeChild(o);var u=l*parseFloat(t);return n2.CSS[t+r]=u,u}function oCe(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?AG(e,n,r):n}}function OG(e,t){if(cr.dom(e)&&!cr.inp(e)&&(gp(e,t)||cr.svg(e)&&e[t]))return"attribute";if(cr.dom(e)&&PG(Kyt,t))return"transform";if(cr.dom(e)&&t!=="transform"&&oCe(e,t))return"css";if(e[t]!=null)return"object"}function sCe(e){if(cr.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function n0t(e,t,r,i){var n=NE(t,"scale")?1:0+i0t(t),a=sCe(e).get(t)||n;return r&&(r.transforms.list.set(t,a),r.transforms.last=t),i?AG(e,a,i):a}function RG(e,t,r,i){switch(OG(e,t)){case"transform":return n0t(e,t,i,r);case"css":return oCe(e,t,r);case"attribute":return gp(e,t);default:return e[t]||0}}function DG(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=Nm(e)||0,n=parseFloat(t),a=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+a+i;case"-":return n-a+i;case"*":return n*a+i}}function lCe(e,t){if(cr.col(e))return r0t(e);if(/\s/g.test(e))return e;var r=Nm(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function IG(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function a0t(e){return Math.PI*2*gp(e,"r")}function o0t(e){return gp(e,"width")*2+gp(e,"height")*2}function s0t(e){return IG({x:gp(e,"x1"),y:gp(e,"y1")},{x:gp(e,"x2"),y:gp(e,"y2")})}function uCe(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var a=t.getItem(n);n>0&&(r+=IG(i,a)),i=a}return r}function l0t(e){var t=e.points;return uCe(e)+IG(t.getItem(t.numberOfItems-1),t.getItem(0))}function cCe(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return a0t(e);case"rect":return o0t(e);case"line":return s0t(e);case"polyline":return uCe(e);case"polygon":return l0t(e)}}function u0t(e){var t=cCe(e);return e.setAttribute("stroke-dasharray",t),t}function c0t(e){for(var t=e.parentNode;cr.svg(t)&&cr.svg(t.parentNode);)t=t.parentNode;return t}function dCe(e,t){var r=t||{},i=r.el||c0t(e),n=i.getBoundingClientRect(),a=gp(i,"viewBox"),o=n.width,s=n.height,l=r.viewBox||(a?a.split(" "):[0,0,o,s]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:s/l[3]}}function d0t(e,t){var r=cr.str(e)?aCe(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:dCe(r),totalLength:cCe(r)*(i/100)}}}function h0t(e,t){function r(s){s===void 0&&(s=0);var l=t+s>=1?t+s:0;return e.el.getPointAtLength(l)}var i=dCe(e.el,e.svg),n=r(),a=r(-1),o=r(1);switch(e.property){case"x":return(n.x-i.x)*i.w;case"y":return(n.y-i.y)*i.h;case"angle":return Math.atan2(o.y-a.y,o.x-a.x)*180/Math.PI}}function ire(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=lCe(cr.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:cr.str(e)||t?i.split(r):[]}}function hCe(e){var t=e?_I(cr.arr(e)?e.map(rre):rre(e)):[];return bI(t,function(r,i,n){return n.indexOf(r)===i})}function fCe(e){var t=hCe(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:sCe(r)}}})}function f0t(e,t){var r=TG(t);if(/^spring/.test(r.easing)&&(r.duration=iCe(r.easing)),cr.arr(e)){var i=e.length,n=i===2&&!cr.obj(e[0]);n?e={value:e}:cr.fnc(t.duration)||(r.duration=t.duration/i)}var a=cr.arr(e)?e:[e];return a.map(function(o,s){var l=cr.obj(o)&&!cr.pth(o)?o:{value:o};return cr.und(l.delay)&&(l.delay=s?0:t.delay),cr.und(l.endDelay)&&(l.endDelay=s===a.length-1?t.endDelay:0),l}).map(function(o){return wI(o,r)})}function p0t(e){for(var t=bI(_I(e.map(function(a){return Object.keys(a)})),function(a){return cr.key(a)}).reduce(function(a,o){return a.indexOf(o)<0&&a.push(o),a},[]),r={},i=function(a){var o=t[a];r[o]=e.map(function(s){var l={};for(var u in s)cr.key(u)?u==o&&(l.value=s[u]):l[u]=s[u];return l})},n=0;n<t.length;n++)i(n);return r}function m0t(e,t){var r=[],i=t.keyframes;i&&(t=wI(p0t(i),t));for(var n in t)cr.key(n)&&r.push({name:n,tweens:f0t(t[n],e)});return r}function g0t(e,t){var r={};for(var i in e){var n=qk(e[i],t);cr.arr(n)&&(n=n.map(function(a){return qk(a,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function v0t(e,t){var r;return e.tweens.map(function(i){var n=g0t(i,t),a=n.value,o=cr.arr(a)?a[1]:a,s=Nm(o),l=RG(t.target,e.name,s,t),u=r?r.to.original:l,c=cr.arr(a)?a[0]:u,d=Nm(c)||Nm(l),h=s||d;return cr.und(o)&&(o=u),n.from=ire(c,h),n.to=ire(DG(o,c),h),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=MG(n.easing,n.duration),n.isPath=cr.pth(a),n.isColor=cr.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var pCe={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var a="";i.list.forEach(function(o,s){a+=s+"("+o+") "}),e.style.transform=a}}};function mCe(e,t){var r=fCe(e);r.forEach(function(i){for(var n in t){var a=qk(t[n],i),o=i.target,s=Nm(a),l=RG(o,n,s,i),u=s||Nm(l),c=DG(lCe(a,u),l),d=OG(o,n);pCe[d](o,n,c,i.transforms,!0)}})}function y0t(e,t){var r=OG(e.target,t.name);if(r){var i=v0t(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function b0t(e,t){return bI(_I(e.map(function(r){return t.map(function(i){return y0t(r,i)})})),function(r){return!cr.und(r)})}function gCe(e,t){var r=e.length,i=function(a){return a.timelineOffset?a.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(a){let o=a.startOnceDelay??0,s=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return i(a)+o+s+l+a.duration*(a.loop??1)})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(a){let o=a.startOnceDelay??0,s=a.pingPongDelayCorrection??0;return i(a)+o+s+a.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(a){let o=a.startOnceDelay??0,s=a.pingPongDelayCorrection??0,l=a.pingPongEndDelayCorrection??0;return i(a)+o+s+a.duration*(a.loop??1)-a.endDelay-l})):t.endDelay,n}var nre=0;function _0t(e){var t=kk(tCe,e),r=kk(EG,e),i=m0t(r,e),n=fCe(e.targets),a=b0t(n,i),o=gCe(a,r),s=nre;return nre++,wI(t,{id:s,children:[],animatables:n,animations:a,duration:o.duration,delay:o.delay,endDelay:o.endDelay,startOnceDelay:r.startOnceDelay,pingPongDelayCorrection:r.pingPongDelayCorrection,pingPongEndDelayCorrection:r.pingPongEndDelayCorrection})}var Hs=[],are=[],yR,w0t=function(){function e(){yR=requestAnimationFrame(t)}function t(r){var i=Hs.length;if(i){for(var n=0;n<i;){var a=Hs[n];a.paused?(Hs.splice(n,1),i-=1):(a.tick(r),n++)}e()}else yR=cancelAnimationFrame(yR)}return e}();function x0t(e){document.hidden?(Hs.forEach(function(t){return t.pause(e.timeStamp)}),are=Hs.slice(0),cn.running=Hs=[]):are.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",x0t);function cn(e){e===void 0&&(e={});var t=0,r=0,i=0,n,a,o=0,s=null;function l(C){var T=window.Promise&&new Promise(function(M){return s=M});return C.finished=T,T}var u=_0t(e);l(u);function c(){var C=u.direction;C!=="alternate"&&(u.direction=C!=="normal"?"normal":"reverse"),u.reversed=!u.reversed,a.forEach(function(T){(T.loop===1||T.loop%2===0)&&(T.reversed=u.reversed)})}function d(){u.direction="normal",u.reversed=!1,a.forEach(function(C){return C.reversed=!1})}function h(C){return u.reversed?u.duration-C:C}function f(){t=0,r=h(u.currentTime)*(1/cn.speed)}function g(C,T,M=!1){T&&(u.reversed?T.seek(T.duration*T.loop-(C-T.timelineOffset-T.pingPongDelayCorrection),M):T.seek(C-T.timelineOffset-T.startOnceDelay-T.pingPongDelayCorrection,M))}function p(C,T=!1){if(u.reversed)for(var M=o;M--;)g(C,a[M],T);else for(var A=0;A<o;A++)g(C,a[A],T)}function m(C){var le,ee,J,oe,me,be,de,ge,ce,Ce;var T=0,M=u.animations,A=M.length;for(u.direction!=="alternate"&&((le=u.parent)==null?void 0:le.direction)==="alternate"?((ee=u.parent)==null?void 0:ee.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1&&((J=u.parent)!=null&&J.reversed&&u.direction==="alternate"?C=u.duration-u.delay+u.endDelay-C:C=u.duration+u.delay-u.endDelay-C):x(!1,(oe=u.parent)==null?void 0:oe.rewind,u.rewind,(me=u.parent)==null?void 0:me.reversePlayback,u.reversePlayback)&&((be=u.parent)!=null&&be.reversed&&u.direction==="alternate"?C=u.duration-u.delay+u.endDelay-C:C=u.duration+u.delay-u.endDelay-C);T<A;){var P=M[T],O=P.animatable,j=P.tweens,D=j.length-1,I=j[D];D&&(I=bI(j,function(Me){return C<Me.end})[0]||I);let Ee;(de=u.parent)!=null&&de.reversed&&u.direction==="alternate"?Ee=xf(C-I.start-I.endDelay,0,I.duration)/I.duration:Ee=xf(C-I.start-I.delay,0,I.duration)/I.duration;for(var q=isNaN(Ee)?1:I.easing(Ee),$=I.to.strings,X=I.round,N=[],Q=I.to.numbers.length,F=void 0,L=0;L<Q;L++){var Y=void 0;let Me,he;u.direction!=="alternate"?((ge=u.parent)==null?void 0:ge.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1?(Me=I.to.numbers[L],he=I.from.numbers[L]||0):(he=I.to.numbers[L],Me=I.from.numbers[L]||0):x(!0,(ce=u.parent)==null?void 0:ce.rewind,u.rewind,(Ce=u.parent)==null?void 0:Ce.reversePlayback,u.reversePlayback)?(Me=I.to.numbers[L],he=I.from.numbers[L]||0):(he=I.to.numbers[L],Me=I.from.numbers[L]||0),I.isPath?Y=h0t(I.value,q*he):Y=Me+q*(he-Me),X&&(I.isColor&&L>2||(Y=Math.round(Y*X)/X)),N.push(Y)}var ae=$.length;if(!ae)F=N[0];else{F=$[0];for(var re=0;re<ae;re++){$[re];var H=$[re+1],se=N[re];isNaN(se)||(H?F+=se+H:F+=se+" ")}}pCe[P.type](O.target,P.property,F,O.transforms),P.currentValue=F,T++}}function y(C){u[C]&&!u.passThrough&&u[C](u)}function b(){u.remaining&&u.remaining!==!0&&u.remaining--}let w={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function x(C,T,M,A,P){return w[C<<4|T<<3|M<<2|A<<1|P]}function S(C,T=!1){var j;var M=u.duration;let A=u.delay,P=M-u.endDelay;(j=u.parent)!=null&&j.reversed&&u.direction==="alternate"&&(A=u.endDelay,P=M-u.delay);var O=h(C);if(u.progress=xf(O/M*100,0,100),T||(u.reversePlayback=O<u.currentTime),o&&p(O,T),!u.began&&u.currentTime>=0&&(u.began=!0,y("begin")),!u.loopBegan&&u.currentTime>0&&(u.loopBegan=!0,y("loopBegin")),(u.reversed||O>=0)&&O<=A&&u.currentTime!==0&&(m(0),y("change")),(O>=P&&u.currentTime!==M+u.pingPongDelayCorrection||!M)&&(m(M),y("change")),O>A&&O<P?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,y("changeBegin")),m(O),y("change")):u.changeBegan?(u.changeCompleted=!0,u.changeBegan=!1,y("change"),o&&y("timelineChangeComplete")):u.began&&O>P&&y("changeComplete"),u.currentTime=xf(O,0,M+u.pingPongDelayCorrection),u.began&&y("update"),C>=M)if(b(),!u.remaining)u.paused=!0,u.completed||(u.completed=!0,y("loopComplete"),y("complete"),!u.passThrough&&"Promise"in window&&(s(),l(u)));else{o?t+=u.duration/cn.speed:t+=u.duration;for(let D of a)D.setStartTime(0),D.remaining=D.loop;y("loopComplete"),u.loopBegan=!1,u.direction==="alternate"?c():o&&d()}}return u.reset=function(){var C=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.loopBegan=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed=C==="reverse",u.remaining=u.loop,a=u.children,o=a.length;for(var T=o;T--;)u.children[T].reset();m(u.reversed?u.duration:0)},u.setStartTime=function(C){t=C},u.set=function(C,T){return mCe(C,T),u},u.tick=function(C){i=C,t||(t=i),S((i+(r-t))*cn.speed)},u.seek=function(C,T=!1){S(C-t,T)},u.pause=function(C){u.paused=!0,o&&(n=C??performance.now())},u.play=function(C){!u.paused||(u.completed&&u.reset(),u.paused=!1,Hs.push(u),o&&n!==void 0&&(t+=(C??performance.now())-n),yR||w0t())},u.reverse=function(){c(),u.completed=!u.reversed,f()},u.restart=function(){u.reset(),u.play()},u.reset(),u.autoplay&&u.play(),u}function ore(e,t){for(var r=t.length;r--;)PG(e,t[r].animatable.target)&&t.splice(r,1)}function S0t(e){for(var t=hCe(e),r=Hs.length;r--;){var i=Hs[r],n=i.animations,a=i.children;ore(t,n);for(var o=a.length;o--;){var s=a[o],l=s.animations;ore(t,l),!l.length&&!s.children.length&&a.splice(o,1)}!n.length&&!a.length&&i.pause()}}function C0t(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?MG(t.easing):null,n=t.grid,a=t.axis,o=t.from||0,s=o==="first",l=o==="center",u=o==="last",c=cr.arr(e),d=parseFloat(c?e[0]:e),h=c?parseFloat(e[1]):0,f=Nm(c?e[1]:e)||0,g=t.start||0+(c?d:0),p=[],m=0;return function(y,b,w){if(s&&(o=0),l&&(o=(w-1)/2),u&&(o=w-1),!p.length){for(var x=0;x<w;x++){if(!n)p.push(Math.abs(o-x));else{var S=l?(n[0]-1)/2:o%n[0],C=l?(n[1]-1)/2:Math.floor(o/n[0]),T=x%n[0],M=Math.floor(x/n[0]),A=S-T,P=C-M,O=Math.sqrt(A*A+P*P);a==="x"&&(O=-A),a==="y"&&(O=-P),p.push(O)}m=Math.max.apply(Math,p)}i&&(p=p.map(function(D){return i(D/m)*m})),r==="reverse"&&(p=p.map(function(D){return a?D<0?D*-1:-D:Math.abs(m-D)}))}var j=c?(h-d)/m:d;return g+j*(Math.round(p[b]*100)/100)+f}}function E0t(e){e===void 0&&(e={});var t=cn(e);return t.duration=0,t.add=function(r,i){var n=Hs.indexOf(t),a=t.children;n>-1&&Hs.splice(n,1);function o(h){h.passThrough=!0}for(var s=0;s<a.length;s++)o(a[s]);var l=wI(r,kk(EG,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.timelineOffset=cr.und(i)?u:DG(i,u),o(t);var c=cn(l);o(c),a.push(c),c.parent=t;var d=gCe(a,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,c.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}cn.version="3.2.0";cn.speed=1;cn.running=Hs;cn.remove=S0t;cn.get=RG;cn.set=mCe;cn.convertPx=AG;cn.path=d0t;cn.setDashoffset=u0t;cn.stagger=C0t;cn.timeline=E0t;cn.easing=MG;cn.penner=nCe;cn.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var vCe=cn,sre=new k,lre=new k,ure=new ur;function M0t(e,t,r,i){if(i===0)return r.copy(e);if(i===1)return r.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return r.copy(e);let a=1-n*n;if(a<=Number.EPSILON){let c=1-i;return r.w=c*e.w+i*t.w,r.x=c*e.x+i*t.x,r.y=c*e.y+i*t.y,r.z=c*e.z+i*t.z,r.normalize(),r}let o=Math.sqrt(a),s=Math.atan2(o,n),l=Math.sin((1-i)*s)/o,u=Math.sin(i*s)/o;return r.w=e.w*l+t.w*u,r.x=e.x*l+t.x*u,r.y=e.y*l+t.y*u,r.z=e.z*l+t.z*u,r}function pa(e,t,r,i,n,a){let o=r[e]!==void 0?r[e]:void 0,s=i[e];if(s==null)return;let l=o!=null?typeof o=="string"?Number(n.getVariable(o)??0):o:t[e],u=typeof s=="string"?Number(n.getVariable(s)??0):s;if(l!==u)return{update:c=>{let d=Ot.lerp(l,u,c);a?t[e]=Math.trunc(d):t[e]=d},start:()=>{t[e]=l},end:()=>{t[e]=u}}}function jG(e,t,r,i,n,a){let o=r[e]?r[e]:void 0,s=i[e];if(!s)return;let l=t[e],u=[...o??l].map(d=>typeof d=="string"?Number(n.getVariable(d)??0):d),c=[...s].map(d=>typeof d=="string"?Number(n.getVariable(d)??0):d);if(!(u.length!==c.length||jW(u,c)))return{update:d=>{u.forEach((h,f)=>{let g=Ot.lerp(h,c[f],d);t[e][f]=a?Math.trunc(g):g})},start:()=>{Object.assign(t[e],u)},end:()=>{Object.assign(t[e],c)}}}function a2(e,t,r){return t.forEach((i,n)=>{e.setComponent(n,typeof i=="string"?Number(r.getVariable(i)??0):i)}),e}function cre(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=a?a2(new k,a,n):s.clone(),u=a2(new k,o,n);if(!l.equals(u))return{update:c=>{s.lerpVectors(l,u,c)},start:()=>{s.copy(l)},end:()=>{s.copy(u)}}}function dre(e,t,r){return t.forEach((i,n)=>{e.setComponent(n,typeof i=="string"?Number(r.getVariable(i)??0):i)}),e}function o2(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=!(s instanceof ze),u=s instanceof ze?s:new ze().fromArray(s),c=a?dre(new ze,a,n):u.clone(),d=dre(new ze,o,n);if(!c.equals(d))return{update:h=>{u.lerpVectors(c,d,h),l&&(t[e]=u.toArray())},start:()=>{u.copy(c),l&&(t[e]=u.toArray())},end:()=>{u.copy(d),l&&(t[e]=u.toArray())}}}function P0t(e,t,r,i){let n=r[e]?r[e]:void 0,a=i[e];if(!a)return;let o=t[e],s=n?new dt().fromArray(n):o.clone(),l=new k,u=new ur,c=new k;s.decompose(l,u,c);let d=new dt().fromArray(a),h=new k,f=new ur,g=new k;if(d.decompose(h,f,g),!s.equals(d))return{update:p=>{ure.slerpQuaternions(u,f,p),sre.lerpVectors(l,h,p),lre.lerpVectors(c,g,p),o.compose(sre,ure,lre)},start:()=>{o.compose(l,u,c)},end:()=>{o.compose(h,f,g)}}}function T0t(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=a?typeof a=="string"?n.getColor(a).clone():new er().setRGB(a.r,a.g,a.b):s.clone(),u=typeof o=="string"?n.getColor(o).clone():new er().setRGB(o.r,o.g,o.b);if(l.equals(u))return;let c=s.clone();return{update:d=>{var h,f;c.lerpColors(l,u,d),(f=(h=t[e])==null?void 0:h.copy)==null||f.call(h,c)},start:()=>{c.copy(l)},end:()=>{c.copy(u)}}}function xO(e,t,r,i,n){let a=r[e]?r[e]:void 0,o=i[e];if(!o)return;let s=t[e],l=new wa(s.r,s.g,s.b,s.a),u=a?typeof a=="string"?n.getColor(a).clone():new wa(a.r,a.g,a.b,a.a):l.clone(),c=typeof o=="string"?n.getColor(o).clone():new wa(o.r,o.g,o.b,o.a);if(!u.equals(c))return{update:d=>{l.lerpColors(u,c,d);let h=Ot.lerp(u.a,c.a,d);l.a=h,t[e]={r:l.r,g:l.g,b:l.b,a:l.a}},start:()=>{l.copy(u)},end:()=>{l.copy(c)}}}function Dv(e,t,r,i,n){if(typeof t[e]=="number")return pa(e,t,r??{},i,n);if(Array.isArray(t[e]))return jG(e,t,r??{},i,n)}function A0t(e,t,r,i){var s,l,u,c;let n=[],a=e.cameraType==="OrthographicCamera"?(s=t.orthographic)==null?void 0:s.zoom:(l=t.perspective)==null?void 0:l.zoom,o=e.cameraType==="OrthographicCamera"?(u=r.orthographic)==null?void 0:u.zoom:(c=r.perspective)==null?void 0:c.zoom;if(o!==void 0){let d=a??e.zoom,h=o;d!==h&&n.push({update:f=>{e.zoom=Ot.lerp(d,h,f),e.updateProjectionMatrix()},start:()=>{e.zoom=d,e.updateProjectionMatrix()},end:()=>{e.zoom=h,e.updateProjectionMatrix()}})}if(r.targetOffset!==void 0){let d=pa("targetOffset",e,t,r,i);d&&n.push(d)}return n}function O0t(e,t,r,i){if(r.scaleBaked===void 0)return;let n=(t.scaleBaked??e.data.geometry.scaleBaked).map(s=>typeof s=="string"?Number(i.getVariable(s)??0):s),a=r.scaleBaked.map(s=>typeof s=="string"?Number(i.getVariable(s)??0):s);if(J0.isEqual(n,a))return;let o=[];return o.push({update:s=>{e.updateGeometryInteractions({scaleBaked:[Ot.lerp(n[0],a[0],s),Ot.lerp(n[1],a[1],s),Ot.lerp(n[2],a[2],s)]},i),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},start:()=>{e.updateGeometryInteractions({scaleBaked:n},i),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},end:()=>{e.updateGeometryInteractions({scaleBaked:a},i),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()}}),o}function R0t(e,t,r,i){if(!r.extrusion)return;let n=e.extrusion,a=t.extrusion??{},o=r.extrusion,s=[];return Xwe.forEach(l=>{let u=Dv(l,n,a,o,i);u&&s.push(u)}),s}function D0t(e,t,r,i){let n=[];if(!("geometry"in r))return n;let a=e.geometry.userData.parameters,o="geometry"in t?t.geometry:{},s=r.geometry;if(e instanceof zM){let l=O0t(e,o,s,i);l&&n.push(...l)}else{let l={};if(Object.assign(l,Ep(a,tB),Ep(o,tB)),tB.forEach(u=>{let c=Dv(u,l,o,s,i);c&&n.push(c)}),e instanceof yG){Object.assign(l,{extrusion:{...a.extrusion}});let u=R0t(l,o,s,i);u&&n.push(...u)}n.length&&n.push({update:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},start:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},end:u=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()}})}return n}function I0t(e,t,r,i){let n=[];if(r.intensity!==void 0){let a=pa("intensity",e,t,r,i);a&&n.push(a)}if(r.color!==void 0){let a=T0t("color",e,t,r,i);a&&n.push(a)}return n}function j0t(e,t,r,i){let n=[];if(Array.isArray(e.material)){if(!("materials"in r&&r.materials))return n;let a="materials"in t&&t.materials?t.materials:[],o=r.materials;e.material.forEach((s,l)=>{if(!o[l])return;let u=a[l]??{},c=o[l];typeof u=="string"||typeof c=="string"||n.push(...hre(s,u,c,i))})}else{if(!("material"in r&&r.material))return n;let a="material"in t&&t.material?t.material:{},o=r.material;if(typeof a=="string"||typeof o=="string")return n;n.push(...hre(e.material,a,o,i))}return n}function hre(e,t,r,i){var o;let n=[],a=r_(r,i)||!!t.layers&&r_(t,i);n.push(q0t(e,a));for(let s of e.layers){let l=(o=t.layers)==null?void 0:o.data(s.uuid),u=r.layers.data(s.uuid);if(!u||s.type!=="light"&&(!(s.visible??!0)||!(u.visible??!0)))continue;let c=s.getNames().filter(d=>!Gwe.some(h=>d.includes(h)));for(let d of c)try{let h=s.getValue(d),f;if(d==="colors")f=V0t(s,l,u,d);else if(Array.isArray(h))d==="steps"&&(f=U0t(s,l,u,d));else if(typeof h=="number")f=z0t(s,l,u,d,i);else{if(typeof h=="boolean")continue;h instanceof ze?f=B0t(s,l,u,d):h instanceof k?f=L0t(s,l,u,d,i):h instanceof wa?f=N0t(s,l,u,d,i):h instanceof er?f=F0t(s,l,u,d,i):"isTexture"in h&&(f=k0t(s,l,u,d))}f&&(Array.isArray(f)?n.push(...f):n.push(f))}catch(h){console.error(`lerpMaterial: unexpected material layer for ${d}`,h)}}return n}function z0t(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:e.getValue(i),o=r[i],s=typeof a=="string"?Number(n.getVariable(a)??0):a,l=typeof o=="string"?Number(n.getVariable(o)??0):o;if(s!==l)return{update:u=>{e.setValue(i,Ot.lerp(s,l,u))},start:()=>{e.setValue(i,s)},end:()=>{e.setValue(i,l)}}}function B0t(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),a=t?new ze().fromArray(t[i]):n.clone(),o=new ze().fromArray(r[i]);if(!a.equals(o))return{update:s=>{n.lerpVectors(a,o,s)},start:()=>{n.copy(a)},end:()=>{n.copy(o)}}}function L0t(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=e.getValue(i),o=t?t[i]:void 0,s=r[i],l=o?a2(new k,o,n):a.clone(),u=a2(new k,s,n);if(!l.equals(u))return{update:c=>{a.lerpVectors(l,u,c)},start:()=>{a.copy(l)},end:()=>{a.copy(u)}}}function F0t(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:void 0,o=r[i],s=e.getValue(i),l=a?typeof a=="string"?n.getColor(a).clone():new er().setRGB(a.r,a.g,a.b):s.clone(),u=typeof o=="string"?n.getColor(o).clone():new er().setRGB(o.r,o.g,o.b);if(l.equals(u))return;let c=s.clone();return{update:d=>{e.getValue(i)!==c&&e.setValue(i,c),c.lerpColors(l,u,d)},start:()=>{c.copy(l)},end:()=>{c.copy(u)}}}function N0t(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let a=t?t[i]:void 0,o=r[i],s=e.getValue(i),l=a?typeof a=="string"?n.getColor(a).clone():new er().setRGB(a.r,a.g,a.b):s.clone(),u=typeof o=="string"?n.getColor(o).clone():new wa(o.r,o.g,o.b,o.a);if(l.equals(u))return;let c=s.clone();return{update:d=>{e.getValue(i)!==c&&e.setValue(i,c),c.lerpColors(l,u,d)},start:()=>{c.copy(l)},end:()=>{c.copy(u)}}}function U0t(e,t,r,i="steps"){if(!e.hasValue(i)||!(i in r))return;let n=[],a=e.getValue(i),o=t?t[i]:a,s=r[i];return jW(o,s)||n.push({update:l=>{let u=[...a];for(let c=0;c<a.length;++c){let d=o[c],h=s[c];u[c]=Ot.lerp(d,h,l)}e.setValue(i,u)},start:()=>{e.setValue(i,o)},end:()=>{e.setValue(i,s)}}),n.length?n:void 0}function V0t(e,t,r,i="colors"){if(!e.hasValue(i)||!(i in r))return;let n=[],a=e.getValue(i),o=t?t[i]:a.map(l=>l.toArray()),s=r[i];for(let l=0;l<a.length;++l){let u=[...o[l]],c=[...s[l]];RD.isEqual(u,c)||n.push({update:d=>{a[l].fromArray(RD.lerp(u,c,d))},start:()=>{a[l].fromArray(u)},end:()=>{a[l].fromArray(c)}})}return n.length?n:void 0}function k0t(e,t,r,i="texture"){var m,y;if(!e.hasValue(i)||!(i in r))return;let n=e.getNode("rotation"),a=((m=t==null?void 0:t[i])==null?void 0:m.rotation)??0,o=((y=r[i])==null?void 0:y.rotation)??0;if(n&&a!==o)return{update:b=>{n.value=Ot.lerp(a,o,b)*Ot.DEG2RAD},start:()=>{n.value=a*Ot.DEG2RAD},end:()=>{n.value=o*Ot.DEG2RAD}};let s=e.getNode("mat");if(!s)return;let l=t?t[i]:s,u=r[i],c=[...l.repeat],d=[...l.offset],h=[...u.repeat],f=[...u.offset],g=l.rotation??0,p=u.rotation??0;if(!jm.isEqual(c,h)||!jm.isEqual(d,f)||g!==p)return{update:b=>{s.repeat=jm.lerp(c,h,b),s.offset=jm.lerp(d,f,b),s.rotation=Ot.lerp(g,p,b),s.updateMatrix()},start:()=>{s.repeat=[...c],s.offset=[...d],s.rotation=g,s.updateMatrix()},end:()=>{s.repeat=[...h],s.offset=[...f],s.rotation=p,s.updateMatrix()}}}function q0t(e,t){return{update:()=>{e.transparent=t}}}var KB=new k,fre=new Bn;function W0t(e,t,r,i,n){var g,p,m,y,b,w;let a=[],o,s,l,u,c,d,h,f;if(e instanceof ia?(o=o2("position",e,t,r,n),o&&a.push(o),l=pa("rotation",e,t,r,n),l&&a.push(l),u=o2("shear",e,t,r,n),u&&a.push(u)):(f={slide:((g=t.pathSnapping)==null?void 0:g.slide)??((p=e.updatedPathSnapping)==null?void 0:p.slide)??((m=e.dataPatched.pathSnapping)==null?void 0:m.slide)??0,offset:((y=t.pathSnapping)==null?void 0:y.offset)??((b=e.updatedPathSnapping)==null?void 0:b.offset)??((w=e.dataPatched.pathSnapping)==null?void 0:w.offset)??0},d=pa("slide",f,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping,n),d&&a.push(d),h=pa("offset",f,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping,n),h&&a.push(h),!d&&!h&&(o=cre("position",e,t,r,n),o&&a.push(o),s=cre("scale",e,t,r,n),s&&a.push(s),l=G0t(e,t,r,i,n),l&&a.push(l),c=P0t("hiddenMatrix",e,t,r),c&&a.push(c))),o||s||l||c||d||h){let x=e instanceof ia?()=>{e.updateWorldMatrix(!0,!1,!0),e.resetBBoxNeedsUpdate()}:()=>{var S;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(S=e.parent)!=null&&S.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),gf(e)&&zm(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,f))};a.push({update:x,start:x,end:x})}return a}function G0t(e,t,r,i,n){var c;let a=t!=null&&t.rotation?t.rotation.map(d=>(typeof d=="string"?Number(n.getVariable(d)??0):d)*Ot.DEG2RAD):void 0,o=(c=r.rotation)==null?void 0:c.map(d=>(typeof d=="string"?Number(n.getVariable(d)??0):d)*Ot.DEG2RAD);if(!o)return;let s=a?new k().fromArray(a):new k().setFromEuler(e.rotation),l=new k().fromArray(o);if(s.equals(l))return;let u=KB.subVectors(l,s);if(i&&u.toArray().every(d=>Math.abs(d)<2*Math.PI)){let d=new ur().setFromEuler(fre.setFromVector3(s)),h=new ur().setFromEuler(fre.setFromVector3(l));return{update:f=>{M0t(d,h,e.quaternion,f)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(l)}}}else return{update:d=>{KB.lerpVectors(s,l,d),e.rotation.setFromVector3(KB)},start:()=>{e.rotation.setFromVector3(s)},end:()=>{e.rotation.setFromVector3(l)}}}function H0t(e,t,r,i){let n=[];if(!("cloner"in r)||!e.cloner)return n;let a=e.cloner,o="cloner"in t?t.cloner:{},s=r.cloner;Nwe.forEach(f=>{let g;f==="count"?g=pa("count",a.parameters,o,s,i,!0):g=Dv(f,a.parameters,o??{},s,i),g&&n.push(g)});let l=$0t(a,o,s,i);l!=null&&l.length&&n.push(...l);let u=X0t(a,o,s,i);u!=null&&u.length&&n.push(...u);let c=Y0t(a,o,s,i);c!=null&&c.length&&n.push(...c);let d=K0t(a,o,s,i);d!=null&&d.length&&n.push(...d);let h=Q0t(a,o,s,i);return h!=null&&h.length&&n.push(...h),n.length&&n.push({update:()=>{a.update()}}),n}function $0t(e,t,r,i){if(e.parameters.type!=="radial")return;let n=t.radial,a=r.radial;if(!a)return;let o=e.parameters.radial,s=[];return Uwe.forEach(l=>{let u=Dv(l,o,n??{},a,i);u&&s.push(u)}),s}function X0t(e,t,r,i){if(e.parameters.type!=="linear")return;let n=t.linear,a=r.linear;if(!a)return;let o=[],s=e.parameters.linear;return Vwe.forEach(l=>{let u=Dv(l,s,n??{},a,i);u&&o.push(u)}),o}function Y0t(e,t,r,i){if(e.parameters.type!=="grid")return;let n=t.grid,a=r.grid;if(!a)return;let o=[],s=e.parameters.grid;return kwe.forEach(l=>{let u;l==="count"?u=jG(l,s,n??{},a,i,!0):u=Dv(l,s,n??{},a,i),u&&o.push(u)}),o}function K0t(e,t,r,i){if(e.parameters.type!=="toObject")return;let n=t.toObject,a=r.toObject;if(!a)return;let o=[],s=e.parameters.toObject;return qwe.forEach(l=>{let u;l==="count"?u=pa(l,s,n??{},a,i,!0):u=Dv(l,s,n??{},a,i),u&&o.push(u)}),o}function Q0t(e,t,r,i){if(!e.parameters.randomness)return;let n=t.randomnessObject,a=r.randomnessObject;if(!a)return;let o=[],s=e.parameters.randomnessObject;return Wwe.forEach(l=>{let u=Dv(l,s,n??{},a,i);u&&o.push(u)}),o}function J0t(e,t){return{update:()=>{e instanceof Qn&&(e.fill.enabled=t)}}}function Z0t(e,t){return{update:()=>{e instanceof Qn&&(e.stroke.enabled=t)}}}function ebt(e,t){return{update:()=>{e instanceof Qn&&(e.dropShadow.enabled=t)}}}function tbt(e,t){return{update:()=>{e instanceof Qn&&(e.innerShadow.enabled=t)}}}function rbt(e,t){return{update:()=>{e instanceof Qn&&(e.backgroundBlur.enabled=t)}}}function ibt(e,t){return{update:()=>{e instanceof Qn&&(e.layerBlur.enabled=t)}}}function nbt(e,t,r,i,n){let a=[],o,s,l,u,c,d,h,f,g,p,m,y,b,w,x;if("width"in e&&(o=pa("width",e,t,r,n),o&&a.push(o)),"height"in e&&(s=pa("height",e,t,r,n),s&&a.push(s)),e instanceof Qn||e instanceof Pp){let S={...t.fill},C={...r.fill};S.enabled!==void 0&&S.enabled!==C.enabled&&(a.push(J0t(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),C.enabled||Object.assign(C,{enabled:!0,color:{...C.color,a:0}})),l=xO("color",e.fill,S,C,n),l&&a.push(l)}if(e instanceof Qn){let S={...t.stroke},C={...r.stroke};(S.enabled||C.enabled)&&(a.push(Z0t(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),C.enabled||Object.assign(C,{enabled:!0,color:{...C.color,a:0}})),u=xO("color",e.stroke,S,C,n),u&&a.push(u),c=pa("thickness",e.stroke,S,C,n),c&&a.push(c)}if(e instanceof Qn){let S={...t.dropShadow},C={...r.dropShadow};(S.enabled||C.enabled)&&(a.push(ebt(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),C.enabled||Object.assign(C,{enabled:!0,color:{...C.color,a:0}})),d=xO("color",e.dropShadow,S,C,n),d&&a.push(d),h=pa("blurRadius",e.dropShadow,S,C,n),h&&a.push(h),g=pa("spread",e.dropShadow,S,C,n),g&&a.push(g),f=o2("offset",e.dropShadow,S,C,n),f&&a.push(f)}if(e instanceof Qn){let S={...t.innerShadow},C={...r.innerShadow};(S.enabled||C.enabled)&&(a.push(tbt(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),C.enabled||Object.assign(C,{enabled:!0,color:{...C.color,a:0}})),p=xO("color",e.innerShadow,S,C,n),p&&a.push(p),m=pa("blurRadius",e.innerShadow,S,C,n),m&&a.push(m),b=pa("spread",e.innerShadow,S,C,n),b&&a.push(b),y=o2("offset",e.innerShadow,S,C,n),y&&a.push(y)}if(e instanceof Qn||e instanceof Pp){let S={...t.backgroundBlur},C={...r.backgroundBlur};(S.enabled||C.enabled)&&(a.push(rbt(e,!0)),S.enabled||Object.assign(S,{enabled:!0,radius:0}),C.enabled||Object.assign(C,{enabled:!0,radius:0})),w=pa("radius",e.backgroundBlur,S,C,n),w&&a.push(w)}if(e instanceof Qn){let S={...t.layerBlur},C={...r.layerBlur};(S.enabled||C.enabled)&&(a.push(ibt(e,!0)),S.enabled||Object.assign(S,{enabled:!0,radius:0}),C.enabled||Object.assign(C,{enabled:!0,radius:0})),x=pa("radius",e.layerBlur,S,C,n),x&&a.push(x)}if(e instanceof Pp||e instanceof TP){let S=jG("cornerRadius",e,t,r,n);S&&a.push(S)}return a}function pre(e,t,r,i,n){let a=[];return e.data.visible&&a.push(...W0t(e,t,r,n,i)),e instanceof ia?a.push(...nbt(e,t,r,n,i)):(e.data.visible&&a.push(...H0t(e,t,r,i)),gf(e)?(e instanceof Sn&&e.data.visible&&a.push(...D0t(e,t,r,i)),e.data.visible&&a.push(...j0t(e,t,r,i))):qpt(e)?e.data.visible&&a.push(...I0t(e,t,r,i)):kpt(e)&&a.push(...A0t(e,t,r,i))),a.length?{update:o=>{a.forEach(s=>s.update(o))},start:o=>{a.forEach(s=>{var l;return(l=s.start)==null?void 0:l.call(s,o)})},end:o=>{a.forEach(s=>{var l;return(l=s.end)==null?void 0:l.call(s,o)})}}:void 0}var mre=new k;function zG(e,t,r=!1){var a;let i=[],n=o=>{let s=o.data;delete o.states,o.currentState=null,o.reversibleToState=null,o.currentTransitionEvent=null;for(let l of s.states){let u={...l.data};o.states||(o.states={}),o.states[l.id]=U0.patch(s,u)}vre(e.scene,o,null,t,s.events.find(l=>l.data.type==="Follow"||l.data.type==="LookAt")!==void 0),gre(e)};e.scene.traverse2D(n),e.traverseChildren(o=>{var c,d,h,f,g,p;if(r&&((c=o.rigidBody)==null||c.setTranslation(o.position0,!0),(d=o.rigidBody)==null||d.setRotation(o.rotation0,!0),(h=o.rigidBody)==null||h.setLinvel(mre,!0),(f=o.rigidBody)==null||f.setAngvel(mre,!0)),!Vr.is(o))return;let s=o.uuid,l=o.data;if(delete o.states,o.uuid===Rw)return;let u=!1;i.some(m=>{var y;return(y=e.scene.find(s))==null?void 0:y.isDescendantOf(m)})?u=!0:((g=l.physics)==null?void 0:g.fusedBody)===!0&&l.physics.rigidBody==="dynamic"&&i.push(s),o.data=l,o.currentState=null,o.reversibleToState=null,o.currentTransitionEvent=null;for(let m of l.states){let y={...m.data};e.data.globalPhysics.usePhysics===!0&&l.physics&&(l.physics.rigidBody==="dynamic"||u)&&(m.data.position!==void 0&&delete y.position,m.data.rotation!==void 0&&delete y.rotation,m.data.hiddenMatrix!==void 0&&delete y.hiddenMatrix),o.states||(o.states={}),o.states[m.id]=L0.patch(l,y)}vre(e.scene,o,null,t,l.events.find(m=>m.data.type==="Follow"||m.data.type==="LookAt")!==void 0),o instanceof Ba&&o.frame&&(o.frame.traverse(m=>n(m)),(p=o.uiCanvas)==null||p.applySize())}),gre(e),e.frame&&(e.frame.traverse(o=>n(o)),(a=e.uiCanvas)==null||a.applySize())}function gre(e){e.traverseEntity(t=>{for(let r of t.data.events){let i=[];switch(r.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":i.push(...r.data.actions);break;case"GameControl":for(let n of Object.values(r.data.gameActions))i.push(...n);break;case"DragDrop":i.push(...r.data.dragDropActions.drag,...r.data.dragDropActions.drop);break;case"Conditional":i.push(...r.data.inActions,...r.data.outActions);break}for(let n of i)if(n.data.type==="Create"&&n.data.hideBase==="Yes"){let a=e.scene.find(n.data.object);a&&(a.visible=!1)}}})}function vre(e,t,r,i,n=!1){if(t instanceof Sn&&!(t instanceof gb)&&t.removeInteractionGeometry(i),t instanceof ia?t.changeSelectedState(r,{shared:i},n):t.changeSelectedState(r,{scene:e,shared:i},n),t instanceof Sn&&t.updateGeometryGroupsIfNeeded(),t instanceof Ua&&t.updateCameraState(t.dataPatched,{scene:e,shared:i}),!(t instanceof ia)){if(t.cloner)for(let a of t.cloner.children)a.playModeVisible=void 0;t.updateVisible()}}function yCe(e){let t;if(e.easing===5){let{control1:r,control2:i}=e;t=`cubicBezier(
			${r[0]}, ${r[1]}, ${i[0]}, ${i[1]}
		)`}else if(e.easing===6){let{mass:r,stiffness:i,damping:n,velocity:a}=e;t=`spring( ${r}, ${i}, ${n}, ${a} )`}else{let r;switch(e.easing){case 0:r=Vg.linear;break;case 1:r=Vg.ease;break;case 2:r=Vg.easeIn;break;case 3:r=Vg.easeOut;break;case 4:r=Vg.easeInOut;break;default:r=Vg.linear}let[i,n,a,o]=r;t=`cubicBezier( ${i}, ${n}, ${a}, ${o} )`}return{duration:Math.max(e.duration,1e-4),easing:t}}function Wk(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var abt={type:"beginState"},obt={type:"completeState",isfromEntity:!1},yre=class{constructor(e,t,r,i,n,a){if(this.object=e,this.data=i,this.sharedAssets=n,this.allowSlerp=a,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let o=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"beginState",state:o}),this.object instanceof ia||this.object.traverseEntity(s=>{s!==this.object&&s instanceof Ua&&s.dispatchEvent(abt)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let o=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=o,this.object.dispatchEvent({type:"completeState",state:o}),this.object instanceof ia||this.object.traverseEntity(s=>{s!==this.object&&s instanceof Ua&&s.dispatchEvent(obt)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=pre(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let o=bR(this.object,this.object.currentState===r?this.object.prevState:this.object.currentState);if(!o)throw new Error("Missing property");this.from=o}else{let o=bR(this.object,t);if(!o)throw new Error("Missing property");this.from=o}if(r===void 0)throw new Error("Missing property");{let o=bR(this.object,r);if(!o)throw new Error("Missing property");this.to=o}this.useCurrentState=t===void 0||r===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...Wk(i),...yCe(i),change:this.onChange},this.callback=pre(this.object,t===void 0?{}:this.from.data,r===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},bCe=class extends xa{constructor(e,t,r,i,n){var o;if(super(),this.eventType=e,this.data=t,this.page=r,this.shared=i,this.condition=n,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.hasPlayedOnce=!1,this.onTimelineChangeComplete=()=>{var s;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((s=this.timeline)==null||s.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let a=this.page.scene.find(t.object)??((o=this.page.uiCanvas)==null?void 0:o.find(t.object))??this.page.scene.find2DInUIObjects(t.object);if(!a)throw new Error("Missing property");if(!a.states)throw new Error("Missing property");if(this.object=a,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){var e;return((e=this.timeline)==null?void 0:e.paused)===!1}get changeBegan(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=bR(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.data.runMode==="Toggle"&&pZ(this.eventType)?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:r=!1}={}){var i,n,a,o;try{let s=Wk(this.data.tweens[0].data);r&&typeof s.loop=="number"&&s.loop--,(i=this.timeline)==null||i.pause(),this.timeline=vCe.timeline({autoplay:!1,...s,...s.loop===!0||s.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(u=>u==null?void 0:u.changeBegan);if(t===!0&&(this.timelineNeedsRebuild=!0),e){let u=l===-1?0:l;for(let c=u;c<this.data.tweens.length-1;c++){let d=this.data.tweens[c],h=this.data.tweens[c+1],f;c===u&&(this.object.wasMovedByUser===!0||((n=this.object.previousAction)==null?void 0:n.changeBegan)===!0)?(f=void 0,this.object instanceof Ua&&(this.object.wasMovedByUser=!1)):f=d.data.state===void 0?this.currentState:d.data.state;let g=new yre(this.object,f,h.data.state===void 0?this.currentState:h.data.state,h.data,this.shared,this.data.allowSlerp??!1);l!==-1&&c===u&&Object.assign(g.params,{startOnceDelay:0}),this.tweens[c]=g,this.timeline.add(g.params,this.timeline.duration+(c===u?s.delay:0))}this.timeline.duration+=s.endDelay}else{let u=l===-1?this.data.tweens.length-1:l+1;for(let c=u;c>0;c--){let d=this.data.tweens[c],h=this.data.tweens[c-1],f;c===u&&(this.object.wasMovedByUser===!0||((a=this.object.previousAction)==null?void 0:a.changeBegan)===!0)?(f=void 0,this.object instanceof Ua&&(this.object.wasMovedByUser=!1)):f=d.data.state===void 0?this.currentState:d.data.state;let g=new yre(this.object,f,h.data.state===void 0?this.currentState:h.data.state,d.data,this.shared,this.data.allowSlerp??!1);l!==-1&&c===u&&Object.assign(g.params,{startOnceDelay:0}),this.tweens[c-1]=g,this.timeline.add(g.params,this.timeline.duration+(c===u?s.endDelay:0))}this.timeline.duration+=s.delay}}catch(s){s instanceof Error&&console.error(s.message)}((o=this.object.previousAction)==null?void 0:o.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(Ti(this.shared,this.condition)===!1||pZ(this.eventType)&&this.data.runMode==="Once"&&this.hasPlayedOnce||(this.hasPlayedOnce=!0,this.playing))return!1;clearTimeout(this.timeoutId);let e=Wk(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof ia?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;if(Ti(this.shared,this.condition)===!1)return!1;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;if(Ti(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var r;(r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function bR(e,t){var n;let r,i;if(typeof t=="string"?(r=t,i=(n=e.states)==null?void 0:n[r]):t===null&&(r=null,i=e.data),!(r===void 0||i===void 0))return{id:r,data:i}}var sbt={type:"beginState"},bre={type:"completeState",isfromEntity:!1},_re={type:"requestRender"},_Ce=class extends xa{constructor(e,t,r,i){super(),this.data=e,this.page=t,this.shared=r,this.condition=i,this.toggleIsForward=!1,this.posStart=new k,this.posEnd=new k,this.qStart=new ur,this.qEnd=new ur,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let r={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=vCe({targets:r,t:1,...yCe(this.data),update:()=>{r.t===0&&(this.data.runMode==="Toggle"&&!this.toggleIsForward?this.fromCamera&&(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(sbt));let i=this.page.activeCamera;i.position.lerpVectors(this.posStart,this.posEnd,r.t),i.quaternion.slerpQuaternions(this.qStart,this.qEnd,r.t),i.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*r.t,i.wasMovedBySwitchCameraAction=!0,i.updateMatrix(),i.updateMatrixWorld(),i.updateProjectionMatrix(),i.dispatchEvent(_re),r.t===1&&i.dispatchEvent(bre)}})}switchCamera(e){let t=this.page.activeCamera,r=this.page.scene.find(e);if(!r||!r.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(r),t.dispatchEvent({type:"cameraChange",camera:r})}play(){if(Ti(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,r;if(Ti(this.shared,this.condition)===!1)return!1;if(window.clearTimeout(this.timeoutId),delete this.timeoutId,e!==this.toggleIsForward)try{this.playing?((t=this.animation)==null||t.pause(),this.toggleIsForward=e??!this.toggleIsForward,this.buildAnimation(!0),(r=this.animation)==null||r.play()):this.timeoutId=window.setTimeout(()=>{var i,n;this.toggleIsForward=e??!this.toggleIsForward,this.data.animate?((i=this.animation)==null||i.pause(),this.buildAnimation(),(n=this.animation)==null||n.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.fromCamera&&this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(bre),this.page.activeCamera.dispatchEvent(_re))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function wCe(e){let t=e==null?void 0:e.tracks.filter(r=>r.ValueTypeName==="vector"||r.ValueTypeName==="quaternion").map(r=>r.times.length);if(t!=null&&t.length){let r=zst(t);return r&&r>2?r:2}return 2}var xCe=class extends xa{constructor(e,t,r,i,n){var l,u,c;super(),this.data=e,this.page=t,this.animationControls=r,this.shared=i,this.condition=n,this.startOnceDelay=0,this.toggleIsForward=!1;let a=e.object,o=t.scene.find(e.object);o&&Array.isArray(o.identity)&&(a=o.identity[0]),this.data={...e,object:a};let s=this.animationControls.clipIdToAction[e.clipId+"/"+a];if(this.duration=((l=s==null?void 0:s.getClip())==null?void 0:l.duration)??1,this.data.crop2){let d=wCe(s==null?void 0:s.getClip());this.leftFrameTime=this.data.crop2[0]/(d-1)*this.duration,this.rightFrameTime=this.data.crop2[1]/(d-1)*this.duration}else{let d=(c=(u=s==null?void 0:s.getClip())==null?void 0:u.tracks[0])==null?void 0:c.times.length;d&&d>1?(this.leftFrameTime=this.data.crop[0]/d*this.duration,this.rightFrameTime=this.data.crop[1]/d*this.duration):(this.leftFrameTime=0,this.rightFrameTime=this.duration)}this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(Ti(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([i,n])=>{let a=i.split("/")[1];this.threeAnimAction!==n&&a===t&&n.isRunning()&&(e?n.fadeOut(.2):n.stop())}),e&&((r=this.threeAnimAction)==null||r.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=Ot.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(Ti(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let i=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([n,a])=>{let o=n.split("/")[1];this.threeAnimAction!==a&&o===i&&a.isRunning()&&(t?a.fadeOut(.2):a.stop())}),t&&((r=this.threeAnimAction)==null||r.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var t;let e=(t=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:t.getClip();e&&(e.duration=this.duration),this.pause()}},SCe=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.eventManager=r,this.shared=i,this.condition=n,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(Ti(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target||t.data.uiScene))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(t=>{t.type==="ParticleSystem"&&(t.sleep(),t.wakeUp(),t.data.autoPlay?t.start():t.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),zG(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},CCe=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Ti(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),t=Exe(this.data.expression,this.shared,ba.typeOfVariable(e));t!==void 0&&this.shared.updateVariable(this.data.variableId,typeof t=="string"?{textValue:t}:t)}dispose(){}},ECe=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i,this.timeoutId=null}dispatchInner(){if(Ti(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,t===void 0?!1:!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&t==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},lbt=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i}dispatch(){if(Ti(this.shared,this.condition)===!1)return!1;(this.data.target==="single"?this.data.variableId?[this.data.variableId]:[]:Object.keys(this.shared.getVariables())).forEach(e=>{var r;this.shared.getVariable(e);let t=(r=this.shared.data.variables.data(e))==null?void 0:r.value;t!==void 0&&this.shared.updateVariable(e,t),this.shared.enableLocalStorageForPersistentVariables&&localStorage.removeItem(xk(e))})}dispose(){}},ubt=class{constructor(e,t,r,i){this.data=e,this.page=t,this.shared=r,this.condition=i}dispatch(){var e;if(Ti(this.shared,this.condition)===!1)return!1;this.data.userAPIId&&((e=this.shared.getUserAPI(this.data.userAPIId))==null||e.callUserAPI(this.shared))}dispose(){}};function Ti(e,t){if(t===void 0)return!0;if(t.expression.length===0)return!1;let r=Exe(t.expression,e,"boolean");return t.negate?!r:!!r}function Mn(e,t,r,i,n,a){let o={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[],ClearLocalStorage:[],UserAPI:[]},s=l=>({id:u,data:c})=>{try{c.type==="Audio"?Aa[e.type].includes("Audio")&&o.Audio.push(new QSe(u,c,a,i,l)):c.type==="Video"&&!(a instanceof ia)?Aa[e.type].includes("Video")&&o.Video.push(new PCe(u,c,a,i,l)):c.type==="Particles"?Aa[e.type].includes("Particles")&&o.Particles.push(new JSe(c,r,i,l)):c.type==="Link"?Aa[e.type].includes("Link")&&o.Link.push(new Yyt(c,n.controlsManager,i,l)):c.type==="Create"?Aa[e.type].includes("Create")&&o.Create.push(new TCe(c,r,n.controlsManager,i,l)):c.type==="Destroy"?Aa[e.type].includes("Destroy")&&o.Destroy.push(new ZSe(c,r,n.controlsManager,i,l)):c.type==="Reset"?Aa[e.type].includes("Reset")&&o.Reset.push(new eCe(c,r,i,n,l)):c.type==="Transition"?Aa[e.type].includes("Transition")&&o.Transition.push(new bCe(e.type,c,r,i,l)):c.type==="SwitchCamera"?Aa[e.type].includes("SwitchCamera")&&o.SwitchCamera.push(new _Ce(c,r,i,l)):c.type==="SceneTransition"?Aa[e.type].includes("SceneTransition")&&o.SceneTransition.push(new SCe(c,r,n,i,l)):c.type==="Animation"?Aa[e.type].includes("Animation")&&o.Animation.push(new xCe(c,r,n.animationControls,i,l)):c.type==="SetVariable"?Aa[e.type].includes("SetVariable")&&o.SetVariable.push(new CCe(c,r,i,l)):c.type==="DynamicVariablePlay"?Aa[e.type].includes("DynamicVariablePlay")&&o.DynamicVariablePlay.push(new ECe(c,r,i,l)):c.type==="Conditional"?Aa[e.type].includes("Conditional")&&(c.ifActions.forEach(s({expression:c.condition,negate:!1})),c.elseActions.forEach(s({expression:c.condition,negate:!0}))):c.type==="ClearLocalStorage"?Aa[e.type].includes("ClearLocalStorage")&&o.ClearLocalStorage.push(new lbt(c,r,i,l)):c.type==="UserAPI"&&Aa[e.type].includes("UserAPI")&&o.UserAPI.push(new ubt(c,r,i,l))}catch{}};return t.forEach(s()),o}function ta(e){Object.values(e).forEach(t=>{t.forEach(r=>{(r instanceof QSe||r instanceof PCe||r instanceof JSe||r instanceof xCe||r instanceof bCe||r instanceof TCe||r instanceof ZSe||r instanceof _Ce||r instanceof SCe||r instanceof eCe||r instanceof CCe||r instanceof ECe)&&r.dispose()})})}function cbt(e,t){let r;if("material"in e){let i=e.material;Array.isArray(i)?r=e.material[0].layers.find(n=>n.uuid===t):r=e.material.layers.find(n=>n.uuid===t)}if(r)return r.color.texture.image.img instanceof HTMLVideoElement?r.color.texture.image.img:void 0}var MCe=new Map,UE=new Map,M_=class{constructor(e,t,r){this.data=t,this.delay=0,this.status="stopped";let{layerId:i,loop:n,volume:a,delay:o}=t;if(this.object=r,i===void 0)throw new Error("Missing property");let s=cbt(r,i);s&&(this.videoElement=s,this.videoElement.loop=n===1/0,wP&&(this.videoElement.autoplay=!0),a!==void 0&&(this.videoElement.volume=a)),o!==void 0&&(this.delay=o),UE.has(r.uuid)?UE.get(r.uuid).push(this):UE.set(r.uuid,[this]),MCe.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let r=this.videoElement.play();r!==void 0&&r.then(i=>{}).catch(i=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},Gk=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=MCe.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=UE.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r[this.data.interaction]()))}pauseAllVideos(){let e=[...UE.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},PCe=class{constructor(e,t,r,i,n){if(this.data=t,this.shared=i,this.condition=n,t.interaction==="play")this.interaction=new M_(e,t,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new Gk(t);else throw new Error("Missing property")}dispatchBasic(){if(Ti(this.shared,this.condition)===!1)return!1;this.interaction instanceof M_?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ti(this.shared,this.condition)===!1)return!1;this.interaction instanceof M_?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},wre=(()=>{let e,t,r,i;function n(s){!e&&!xre()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(a)),s&&(t=s,i=s.requestRender)}function a(s){let l=r?s-r:0,u=t.sharedGameControlGlobals.createdObjects,c=t.sharedGameControlGlobals.nCreatedPerAction,d=u.length,h=0;for(;h<d;){let f=u[h];f.userData.createdTime===void 0&&(f.userData.createdTime=s),f.userData.lifetime===void 0&&f.userData.quantity===void 0||f.userData.lifetime&&s-f.userData.createdTime<f.userData.lifetime||f.userData.quantity&&c[f.userData.actionId]<=f.userData.quantity?(f.userData.velocity&&(f.position.addScaledVector(f.userData.velocity,l/1e3),f.updateMatrix(),i()),h++):(c[f.userData.actionId]>f.userData.quantity&&c[f.userData.actionId]--,u.splice(h,1),f.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&f.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(f.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(f.rigidBody)):(f.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(g=>g.bvhGeometry!==void 0)),d--,i())}e=h>0?requestAnimationFrame(a):void 0,r=h>0?s:void 0}function o(){xre()?e&&(cancelAnimationFrame(e),e=void 0,r=void 0):n()}return typeof document<"u"&&document.addEventListener("visibilitychange",o),n})();function xre(){return!!document&&document.hidden}var Sre=new ur,dbt=new k,hbt=new k,TCe=class{constructor(e,t,r,i,n){this.data=e,this.page=t,this.controlsManager=r,this.shared=i,this.condition=n,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=Ot.generateUUID(),this.dispatch=()=>{if(Ti(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(Ti(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=Zst(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let o=new _a(this.object);if(o.playModeVisible=!0,o.expand(),this.data.coordinateSystem!=="world"){let l=this.data.coordinateSystem,u=this.page.scene.find(l);u&&(u.updateMatrixWorldSVD(),o.hiddenMatrix.copy(u.matrixWorldRigid))}o.scale.copy(this.object.scale),o.position.fromArray(this.data.position),o.rotation.fromArray(this.data.rotation),o.updateMatrix(),this.page.add(o);let s=this.controlsManager.sharedGameControlGlobals;s.createdObjects.push(o),s.nCreatedPerAction[this.uniqueId]===void 0?s.nCreatedPerAction[this.uniqueId]=1:s.nCreatedPerAction[this.uniqueId]++,o.updateWorldMatrix(!0,!0),o.traverseObject(this.traverseObjectCB),wre(),this.controlsManager.requestRender()},this.traverseObjectCB=o=>{var c,d,h,f;o.hasNonUniformScale&&o.updateMatrixWorldSVD();let s;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(o instanceof Us)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;s=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof _a)s=o.object;else if(s=o,(c=s.dataPatched.cloner)==null?void 0:c.hideBase)return!0}else{if(o instanceof Us)return;o instanceof _a?s=o.object:s=o}this.data.destroy==="Time"?o.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(o.userData.quantity=this.data.destroyAfterQuantity,o.userData.actionId=this.uniqueId);let l=new k().fromArray(this.data.velocity),u=s.dataPatched;if(!(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(o,s,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((d=o.rigidBody)==null||d.collider(0).setActiveEvents(1),o.userData.hasCollisionDestroy=!0),o.matrixWorld.decompose(dbt,Sre,hbt),l.applyQuaternion(Sre),this.data.velocity.some(g=>g!==0)&&this.data.dynamic&&((h=o.rigidBody)==null||h.setLinvel(l.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in o.object&&this.controlsManager.addBoundsTree(o),this.data.velocity.some(g=>g!==0)&&this.data.dynamic&&(o.userData.velocity=l)),((f=s.dataPatched.physics)==null?void 0:f.fusedBody)===!0))return!0};let a=this.page.scene.find(this.data.object);if(!a)throw new Error("Missing Property");if(this.object=a,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");wre(r)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},ACe=200,QB=.02,JB=.3,fbt=65;new k;var Cre=new k,Ere=new k,pbt=new k,Xa=new k,wo=new k,jg=new k,ZB=new dt,Mre=new dt,mbt=new dt;new dt;var bl=new ur,sm=new ur,Jf=new Bn(0,0,0,"YXZ"),gbt=new k(1,0,0),_l=new k(0,1,0),vbt=new k(0,0,1),Pre=new k(1,1,1);new Lo;var ybt=1,bbt=.025,_bt=16e-6,Tre=12,wbt=20,Hn=new Gs,Ts=new dn,xbt={type:"requestRender"},Sbt={type:"updateMatrix"},Are=Math.PI/6,Hk=class extends xa{constructor(e,t,r,i,n,a,o,s,l){var g;super(),this.object=e,this.domElement=t,this.data=r,this.gloabalPhysics=i,this.controlsManager=n,this.cameraFollow=a,this.camera=o,this.page=s,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new dt,this.target0=new k,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=ACe,this.euler0=new Bn(0,0,0,"YXZ"),this.position0Cam=new k,this.quat0Cam=new ur,this.scale0Cam=new k,this.hiddenMatrix0Cam=new dt,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Gs(new k(0,-40,0),new k(0,40,0)),matrix:new dt,position:new k,rotation:new ur},this.euler=new Bn(0,0,0,"YXZ"),this.eulerDelta=new k,this.lastPosition=new k,this.lastCameraQuaternion=new ur,this.lastCameraPosition=new k,this.PI_2=Math.PI/2,this.prevMouse=new ze,this.velocityTarget=new k,this.velocity=new k,this.directionXZ=new k,this.rotVelocityStick=new k,this.rotVelocityTarget=new k,this.rotVelocity=new k,this.rotDirection=new k,this.nonColliderRotOffset=new dt,this.nonColliderPosOffset=new dt,this.firstPointerId=-1,this.rot=new k,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new dt,this.objectToTarget=new k,this.objectToTarget0=new k,this.objectToCamXZ=new k,this.objectToCamXZ0=new k,this.targetToCamera=new k,this.targetToCamera0=new k,this.cameraPolarAxis0=new k,this.targetPos=new k,this.targetQuat=new ur,this.lerpFactorPos=new k().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new ur,this.objXZQuatInv=new ur,this.objXZRotMat=new dt,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new k,this.pushedVelocity=new k,this.groundYRotation=0,this.objectRealQuat=new ur,this.colliderWorldQuat=new ur,this.groundNormal=new k,this.groundTilt=new ur,this.groundTiltInv=new ur,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new k,this.quaternion=new ur,this.scale=new k,this.initialAction=!0,this.onPointerDown=p=>{var m;!(p.target===this.domElement||p.target instanceof HTMLElement&&p.target.tagName==="SPLINE-VIEWER"&&((m=p.target.shadowRoot)!=null&&m.contains(this.domElement)))||this.firstPointerId!==-1||(this.firstPointerId=p.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!ts&&!ZJ&&this.domElement.requestPointerLock(),this.prevMouse.set(p.clientX,p.clientY))},this.onPointerUp=p=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),p.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=p=>{if(p.pointerId!==this.firstPointerId)return;let m=p.clientX-this.prevMouse.x,y=p.clientY-this.prevMouse.y;this.prevMouse.set(p.clientX,p.clientY),p.pointerType==="mouse"&&this.rotBy!=="keys"&&(ZJ&&ult<15.5&&!ts?(this.eulerDelta.y=-m*this.mouseOrbitSensitivity,this.eulerDelta.x=-y*this.mouseOrbitSensitivity):(this.eulerDelta.y=-p.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-p.movementY*this.mouseOrbitSensitivity)),p.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-m*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-y*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=p=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?Hk.isLocked=!0:Hk.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let p in this.movementState)this.movementState[p]=0},this.onKeyDown=p=>{!(p.target instanceof HTMLInputElement)&&(p.code==="ArrowLeft"||p.code==="ArrowUp"||p.code==="ArrowRight"||p.code==="ArrowDown"||p.code==="Space")&&p.preventDefault();for(let m of this.keyAssignments)if(p.key.toUpperCase()===m[1]||p.key===m[1]){this.movementState[m[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=p=>{for(let m of this.keyAssignments)if(p.key.toUpperCase()===m[1]||p.key===m[1]||p.code.slice(3,p.code.length).toUpperCase()===m[1]){this.movementState[m[0]]=0;break}},this.copyVRGamePadValues=(p,m)=>{for(let y=2;y<4;y++){let b=p.axes[y];m===0?y===2?this.movementState.movePosX=b:this.movementState.movePosZ=b:(p.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,y===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(b)>=.3&&(this.vrEulerYOffset+=b<0?1:-1),this.movementState.rotPosY=b):this.moveMode==="fly"&&(this.movementState.moveNegY=b))}},this.sharedGameControlGlobals=n.sharedGameControlGlobals,e===o&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let u=this.euler0.clone(),c=u.y;if(this.objectRealQuat.copy(this.quaternion),u.y=0,this.quaternion.setFromEuler(u),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),u.set(0,c,0),this.quaternion.setFromEuler(u),this.rot.setFromEuler(u),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((g=this.camera)==null?void 0:g.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let p=new k(0,0,-1).applyQuaternion(this.camera.quaternion),m=new k().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(m),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let y,b;Math.abs(p.y)<1e-6?(m.y=0,p.y=0,b=m.projectOnVector(p)):m.y/p.y>0?b=p.multiplyScalar(m.y/p.y):b=p.multiplyScalar(m.length()),this.targetToCamera0.copy(b).negate(),y=this.camera.position.clone().add(b),this.objectToTarget0.subVectors(y,this.position);let w=new Bn().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-w.x,w.x=0,w.z=0,w.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(w)}if(this.object instanceof Ua&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=r.rotByTouch??"joystick",this.rotBy=r.rotBy??"keys",this.rotationMode=r.rotationMode??"normal",this.moveMode=r.moveMode??"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=(r.speedTranslate??250)*ybt,this.speedOrbit=(r.speedRotate??100)*bbt,this.mouseOrbitSensitivity=(r.speedRotate??100)*_bt,this.keyAssignments=r.keyAssignments.map(p=>{let m=[p[0],p[1]];return m[1]===""?m[1]="ArrowUp":m[1]===""?m[1]="ArrowLeft":m[1]===""?m[1]="ArrowDown":m[1]===""?m[1]="ArrowRight":m[1]===""?m[1]="Shift":m[1]===""?m[1]="Enter":m[1]==="Space"?m[1]=" ":m[1]===""?m[1]="Meta":m[1]==="Ctrl"?m[1]="Control":m[1]==="Esc"&&(m[1]="Escape"),m}),r.rotBy==="mouse"){let p;p=this.keyAssignments.findIndex(m=>m[0]==="rotNegX"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(m=>m[0]==="rotPosX"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(m=>m[0]==="rotPosY"),p!==-1&&(this.keyAssignments[p][1]=""),p=this.keyAssignments.findIndex(m=>m[0]==="rotNegY"),p!==-1&&(this.keyAssignments[p][1]="")}this.lerpFactorPosStart=1-.02**(1/((r.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((r.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((r.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((r.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((r.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((r.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??J_.defaultData.gravity)*Tre,this.usePhysics=this.gloabalPhysics.usePhysics??J_.defaultData.usePhysics,this.jumpPower=r.jumpPower*wbt,this.resetYPosition=this.position.y+Math.abs(r.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=r.alignToGround??!1,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=r.orientWith??VD.defaultDataThirdPerson.orientWith,this.slopeThresh=fbt*Math.PI/180,r.collider.type==="capsule"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=r.collider.height*QB/this.pixelsPerMeter,this.stepThresh=r.collider.height*JB/this.pixelsPerMeter,this.colliderHeight=r.collider.height):r.collider.type==="sphere"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*r.collider.radius*QB/this.pixelsPerMeter,this.stepThresh=2*r.collider.radius*JB/this.pixelsPerMeter,this.colliderHeight=r.collider.radius*2):(this.offset=r.collider.height*QB/this.pixelsPerMeter,this.stepThresh=r.collider.height*JB/this.pixelsPerMeter,this.colliderHeight=r.collider.height),this.collider.type=r.collider.type;let d=new k().fromArray(r.collider.position),h=new ur().setFromEuler(new Bn().fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(d).multiply(this.scale),this.collider.rotation.copy(h),this.collider.matrix.compose(d,h,Pre),r.cameraXAxis!==void 0&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),this.forwardDir=r.forwardDirection??"-z",this.isFirstPerson&&(this.forwardDir="-z"),this.runMultiplier=r.runMultiplier??2;let f=r.navmesh.destinationHelperRadius*2;if(f>0){let p=new Ht;p.push({fi:0,data:{...Yn.defaultData("light","phong"),alpha:0},id:"layer1"}),p.push({fi:0,data:{...Yn.defaultData("color"),color:r.navmesh.destinationHelperColor,alpha:r.navmesh.destinationHelperColor.a},id:"layer2"});let m=new oG({layers:p},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new Ci(ixe.create({parameters:{width:f,height:f/10,hollow:.7}}),m),this.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new Bn().setFromQuaternion(this.quaternion,"YXZ"),r=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,r,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof Ua?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},UD.list.forEach(r=>{this.actions[r]=Mn({...e,disabled:!1,type:"GameControl"},e.gameActions[r],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),ta(this.actions.idle),ta(this.actions.move),ta(this.actions.run),ta(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(this.initialAction===!1)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Xa.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,r){var s,l,u,c,d,h,f,g,p;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=i*60,a=!1;if(this.usePhysics&&this.collisionEnabled){let m=wo.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*Tre),1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),y=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,m,(s=this.object.rigidBody)==null?void 0:s.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(y){this.onObject=!0,this.groundNormal.set(y.normal2.x,y.normal2.y,y.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(a=!0),((l=y.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let b=y.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let w of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(w.rigidBody===b&&w.userData.isFollowingObj!==this.object.uuid){(w.hasNonUniformScale?w.matrixWorldRigid:w.matrixWorld).decompose(Xa,sm,wo),this.groundVelocity.subVectors(Xa,w.prevT),this.object.getWorldPosition(wo).add(this.collider.position).sub(Xa),this.groundYRotation=Jf.setFromQuaternion(sm).y-w.prevR.y,jg.copy(wo).applyAxisAngle(_l,this.groundYRotation),this.groundVelocity.add(jg.sub(wo)).divideScalar(i);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*n),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let m=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let y=Xa.subVectors(this.path[1],this.position),b=wo.subVectors(this.path[1],this.path[0]);y.dot(b)<0?this.path.shift():(this.directionXZ.x=b.x,this.directionXZ.z=b.z),m.opacity=m.userData.opacity0}else m.opacity-=.05*m.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let o=pbt.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let m=wo.copy(o);m.y=0,o.set(0,o.y,m.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none"&&this.isFirstPerson===!1)if(this.orientWith==="camera"&&this.path.length<=1){let m=Xa;this.camera.getWorldDirection(m);let y=jg.copy(_l).multiplyScalar(m.dot(_l));m.sub(y);let b=wo.copy(this.directionXZ);b.x*=-1,this.rot.y=m.angleTo(b)*(m.cross(b).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(Jf.setFromVector3(this.rot),this.moveMode==="walk"&&(Jf.x=0),o.applyEuler(Jf),a&&(sm.setFromUnitVectors(_l,this.groundNormal),o.applyQuaternion(sm)),r){let m=Jf.set(0,this.vrEulerYOffset*Are,0);r.applyEuler(m),o.x+=r.x,o.z+=r.z,this.nonColliderPosOffset.elements[13]+=r.y*i}if(this.usePhysics===!0){let m=wo;this.pushedVelocity.set(0,0,0);for(let y of this.sharedGameControlGlobals.entitiesWithTransformAnim){let b=jg.setFromMatrixPosition(y.matrixWorld).sub(y.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),w=y.rigidBody.collider(0).castCollider(b,this.object.rigidBody.collider(0),Xa.copy(o).divideScalar(this.pixelsPerMeter),i,!1);b.multiplyScalar(this.pixelsPerMeter);let x=Vr.is(y)?y:y.object;if(w!==null&&this.lastHitObj!==x){let S;y instanceof _a&&(S=y);let C=this.sharedGameControlGlobals.entityToCollisionEvents[x.uuid];if(C)for(let T of C)T.data.target==="character"&&(T.dispatch(S),x.dispatchEvent(Xk));this.lastHitObj=x}if(w!==null){this.pushedVelocity.copy(b),m.copy(w.normal1).applyQuaternion(y.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let y=m.dot(o);y<0&&o.addScaledVector(m,-y),o.add(this.pushedVelocity)}else o.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(_l,this.euler.y-this.euler0.y);let m=wo.copy(this.objectToCamXZ).normalize(),y=jg.copy(o).multiplyScalar(i);y.y=0;let b=y.sub(Xa.copy(m).multiplyScalar(y.dot(m))).cross(m).y;this.euler.y-=Math.atan2(b,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Ot.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Ot.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Ot.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Jf.copy(t),Jf.y=0):(Jf.copy(this.euler),Jf.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Jf)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*Are),bl.setFromAxisAngle(gbt,this.rot.x),sm.setFromAxisAngle(_l,this.rot.y),sm.multiply(bl),bl.setFromAxisAngle(vbt,this.rot.z),sm.multiply(bl),this.quaternion.copy(sm),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let m=wo.copy(o).multiplyScalar(i/this.pixelsPerMeter),y=null;this.didHit=!1;let b=new k;for(let w=0;w<5;w++){let x=m.length(),S=jg.copy(m).normalize();if(y=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(b),this.colliderWorldQuat,S,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,x,!1,24,void 0,void 0,this.object.rigidBody),y!==null){this.didHit=!0;let C=this.sharedGameControlGlobals.colliderToEntity.get(y.collider.handle);if(C!==this.lastHitObj&&w===0){this.lastHitObj=C;let P=this.sharedGameControlGlobals.entityToCollisionEvents[C==null?void 0:C.uuid];if(P){for(let O of P)if(O.data.target==="character"){let j=((c=this.sharedGameControlGlobals.rapierWorld)==null?void 0:c.getCollider(y.collider.handle))._parent,D;if(C.cloner){for(let I of C.cloner.children)if(I.rigidBody===j){D=I;break}}O.dispatch(D),C.dispatchEvent(Xk)}}}let T=Cre.set(y.normal2.x,y.normal2.y,y.normal2.z).applyQuaternion(this.colliderWorldQuat),M=Ere.copy(S).multiplyScalar(y.toi).dot(T),A=y.toi;if(A===0&&(this.position.y+=this.offset*this.pixelsPerMeter),M>this.offset&&(A=y.toi*(M-this.offset)/M,b.addScaledVector(S,A)),m.copy(S).multiplyScalar(x-A),Math.acos(-T.y)>this.slopeThresh){let P=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(b),O=jg.copy(y.witness2).applyQuaternion(this.colliderWorldQuat);O.y=0;let j=P.add(O);j.y+=this.stepThresh;let D=this.sharedGameControlGlobals.rapierWorld.castShape(j,this.colliderWorldQuat,m,(d=this.object.rigidBody)==null?void 0:d.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);D!==null&&D.toi===0&&(T.y=0,T.normalize())}m.addScaledVector(T,-m.dot(T))}else{w===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),b.add(m);break}}this.position.addScaledVector(b,this.pixelsPerMeter),(h=this.object.rigidBody)==null||h.setTranslation(Xa.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(f=this.object.rigidBody)==null||f.setRotation(bl.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let m=this.onObject?1:5,y=o.multiplyScalar(i/m);for(let b=0;b<m;b++)this.position.add(y),this.collisionAdjustment(i/m)}else this.position.addScaledVector(o,i);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let m=this.objectToTarget.add(this.position),y=this.targetToCamera.add(m);ZB.lookAt(y,m,_l).setPosition(y),ZB.decompose(this.targetPos,this.targetQuat,Xa),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Ot.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Ot.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(Sbt),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((p=(g=this.navMeshPathDest)==null?void 0:g.material)==null?void 0:p.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(xbt),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=bl.setFromAxisAngle(_l,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Ot.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=Ot.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=Ot.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=Xa.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(e);let i=sm.setFromAxisAngle(r,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(e){_l.angleTo(e)*180/Math.PI<15||_l.angleTo(e)*180/Math.PI>85?bl.identity():bl.setFromUnitVectors(_l,e),this.groundTilt.slerp(bl,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var n;let t=Ere.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=ZB.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Xa,bl,wo).compose(Xa,bl,Pre);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(a=>{if(a===this.object||a.isDescendantOf(this.object))return;Ts.makeEmpty(),a.updateMatrixWorldSVD();let o=a.matrixWorldRigid,s=Mre.copy(o).invert(),l=mbt.copy(Mre).multiply(r);Hn.copy(this.collider.segment),Hn.start.applyMatrix4(l),Hn.end.applyMatrix4(l);let u=Cre.copy(this.position).applyMatrix4(s);Ts.expandByPoint(Hn.start),Ts.expandByPoint(Hn.end),Ts.min.addScalar(-this.collider.radius),Ts.max.addScalar(this.collider.radius),a.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(c){return c.distanceToPoint(Hn.end)},intersectsBounds:c=>c.intersectsBox(Ts),intersectsTriangle:c=>{let d=Xa,h=wo,f=c.closestPointToSegment(Hn,d,h);if(f<this.collider.radius){let g=this.collider.radius-f,p=h.sub(d).normalize(),m=jg.copy(u);m.addScaledVector(p,g);let y=m.applyMatrix4(o).sub(this.position);t.add(y),Hn.start.addScaledVector(p,g),Hn.end.addScaledVector(p,g)}}})}),Ts.makeEmpty(),Hn.copy(this.collider.segment),Hn.start.applyMatrix4(r),Hn.end.applyMatrix4(r),Ts.expandByPoint(Hn.start),Ts.expandByPoint(Hn.end),Ts.min.addScalar(-this.collider.radius),Ts.max.addScalar(this.collider.radius),(n=this.sharedGameControlGlobals.staticMeshBVH)==null||n.shapecast({traverseBoundsOrder(a){return a.distanceToPoint(Hn.end)},intersectsBounds:a=>a.intersectsBox(Ts),intersectsTriangle:a=>{let o=Xa,s=wo,l=a.closestPointToSegment(Hn,o,s);if(l<this.collider.radius){let u=this.collider.radius-l,c=s.sub(o).normalize();this.alignToGround&&this.groundTiltAdjustment(c),t.addScaledVector(c,u),Hn.start.addScaledVector(c,u),Hn.end.addScaledVector(c,u)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(i),this.position.add(t)}},OCe=Hk;OCe.isLocked=!1;var Cbt=Av(j1e());function RCe(e){let t=e.elements,r=t[0]**2+t[1]**2+t[2]**2,i=t[4]**2+t[5]**2+t[6]**2,n=t[8]**2+t[9]**2+t[10]**2,a=t[0]**2+t[4]**2+t[8]**2,o=t[1]**2+t[5]**2+t[9]**2,s=t[2]**2+t[6]**2+t[10]**2,l=1e-8;return r<l||i<l||n<l||a<l||o<l||s<l}function Sm(e,t){let r=new Wt;if(t&&RCe(t))return r.setAttribute("position",new Pt([],3)),r.setIndex([]),r;if(!e.getAttribute("position"))return r.setAttribute("position",new Pt([],3)),r.setIndex([]),r;let{positions:i,triIndices:n}=mI(e.getAttribute("position"),e.getIndex());return r.setAttribute("position",new Pt(i,3)),r.setIndex(n),t&&r.applyMatrix4(t),r}var Ebt=new dt,Mbt=new dt,Zf=[[0,0,0],[0,0,0],[0,0,0]];function DCe(e){let t=e.elements;Zf[0][0]=t[0],Zf[0][1]=t[4],Zf[0][2]=t[8],Zf[1][0]=t[1],Zf[1][1]=t[5],Zf[1][2]=t[9],Zf[2][0]=t[2],Zf[2][1]=t[6],Zf[2][2]=t[10];let{u:r,v:i}=(0,Cbt.SVD)(Zf),n=Ebt.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),a=Mbt.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return n.multiply(a.transpose())}var Pbt=class extends P_e{constructor(){super(),this.layers.enable(3),this.layers.enable(8),this.layers.enable(9)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,r)}),r}createRaycastLineHelper(){let e=new Rv({color:65280,linewidth:10}),t=new k(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new k(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,n=new k().addVectors(t,r.multiplyScalar(i)),a=new Wt;return a.setFromPoints([t,n]),new cD(a,e)}},ICe=e=>e instanceof C_||e instanceof E_;function Tbt(e,t){return e.distance-t.distance}function jCe(e,t,r){if(!(!xm(t)||!t.visible)){gf(t)&&t.raycast(e,r);for(let i of t.children)jCe(e,i,r)}}function _R(e,t,r,i=!1){if(!i&&!r.some(a=>s2(e,a)!==void 0))return[];let n=[];return t.children.forEach(a=>jCe(e,a,n)),n.sort(Tbt),n}function $k(e){let t=[];if(e.length){let r=e[0].object;xm(r)&&t.push(r);let i=r.parent;for(;i;)ICe(i)&&t.push(i),i=i.parent}return t}function Cm(e,t,r,i){let n=e.frame;if(n){let a=t[0]*n.width,o=(1-t[1])*n.height;for(let s of r){let l=s===n.uuid?n:n.find(s);if(l!=null&&l.intersects(a,o))return i(l),!0}}return!1}function s2(e,t){if(gf(t)){if(t.visible){let r=[];return t.raycast(e,r),r.length?r[0]:void 0}}else if(ICe(t))return zCe(e,t)}function zCe(e,t){if(!(!xm(t)||!t.visible)){if(gf(t)){let r=[];if(t.raycast(e,r),r.length)return r[0]}for(let r of t.children){let i=zCe(e,r);if(i)return i}}}function Abt(e,t,r){return{x:(e-(r.left+window.scrollX))/r.width*2-1,y:-((t-(r.top+window.scrollY))/r.height)*2+1}}function Obt(e,t,r){return{x:(e-(r.left+window.scrollX))/r.width,y:1-(t-(r.top+window.scrollY))/r.height}}var Rbt=class{constructor(e,t,r,i,n,a,o,s){this.renderer=e,this.publish=t,this.scene=r,this.getCamera=i,this.sharedAssets=n,this.requestRender=a,this.isExport=o,this.frame=s,this.raycaster=new Pbt,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var i;let{pageX:t,pageY:r}=((i=e.touches)==null?void 0:i.length)>0?e.touches[0]:e;this.pointerWorld=Abt(t,r,this._domRect),this.pointerScreen=Obt(t,r,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},ka=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},BG=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],BCe=e=>{var t;return(t=BG.find(([r,i])=>i===e))==null?void 0:t[0]},AP=e=>{var t;return(t=BG.find(([r])=>r===e))==null?void 0:t[1]},Dbt=(e,t)=>{let r=BCe(e);if(r){let i=new CustomEvent(r,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:t}),i}},Ibt=class extends ka{constructor(){super(...arguments),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{var i;if(!e.eventName||!e.target||e.eventName==="Scroll")return;let t=(i=this.splineEvents[BCe(e.eventName)])==null?void 0:i[e.target.uuid];if(!t)return;e.eventName==="Scroll"&&e.deltaY!==void 0&&Object.assign(t,{deltaY:e.deltaY});let{domElement:r}=this.eventContext;r.dispatchEvent(t)}}connect(){let{page:e}=this.eventContext;e.traverseEntity(t=>{var r,i;if((r=t.data)!=null&&r.events.length){for(let[n,a]of BG)if(t.data.events.some(o=>o.data.type===a&&!o.data.disabled)){this.objectsPerEvents.has(n)?(i=this.objectsPerEvents.get(n))==null||i.push(t):this.objectsPerEvents.set(n,[t]);let o={id:t.uuid,name:t.name},s=Dbt(a,o),l=this.splineEvents[n];l?l[t.uuid]=s:this.splineEvents[n]={[t.uuid]:s}}}}),this.objectsPerEvents.forEach(t=>{t.forEach(r=>{r.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},jbt=class{constructor(e,t,r,i,n,a){if(this.id=e,this.data=t,this.object=r,this.entered=!1,(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=Mn(t,t.actions,i,n,a,r)}disconnect(){ta(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.SwitchCamera.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.SwitchCamera.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},zbt=class extends ka{constructor(e,t,r){super(e),this.eventManager=t,this.useForRaycastProperty=r,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=i=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(i);let{raycaster:n,page:a}=this.eventContext,o=_R(n,a,[],!0);this.sceneInterects=o,o.length&&(this.eventContext.sharedAssets.raycastProperty={x:o[0].point.x,y:o[0].point.y,z:o[0].point.z,objX:o[0].object.matrixWorld.elements[12],objY:o[0].object.matrixWorld.elements[13],objZ:o[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=i=>{(i.target===this.eventContext.domElement||i.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(n=>{(n.data.type==="MouseDown"||n.data.type==="MousePress")&&(this.onCanvasRaycast(i),n.dispatch())})},this.onCanvasMouseUp=i=>{(i.target===this.eventContext.domElement||i.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(n=>{n.data.type==="MouseUp"?(this.onCanvasRaycast(i),n.dispatch()):n.data.type==="MousePress"&&n.dispatchRelease()})},this.onMouseDown=i=>{ar.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseEvent("MouseDown"))},this.onMouseUp=i=>{ar.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=i=>{ar.length>1||(this.eventContext.updateRaycaster(i),this.handleMousePressEvent())},this.onMousePressRelease=i=>{ar.length>1||(this.eventContext.updateRaycaster(i),this.handleMousePressEvent(!0))},this.onKeyDown=i=>{this.heldKeys[i.key]||(this.handleKeyEvent(i,"KeyDown"),this.handleKeyEventHeld(i,"KeyDown",!0)),this.heldKeys[i.key]=!0},this.onKeyUp=i=>{this.handleKeyEvent(i,"KeyUp"),this.handleKeyEventHeld(i,"KeyUp",!0)},this.onKeyPressDown=i=>{this.heldKeysPress[i.key]?this.handleKeyEventHeld(i,"KeyPress"):(this.handleKeyEvent(i,"KeyPress"),this.handleKeyEventHeld(i,"KeyPress",!0)),this.heldKeysPress[i.key]=!0},this.onKeyPressUp=i=>{this.handleKeyEvent(i,"KeyPress",!0)},this.releaseHeldKey=i=>{delete this.heldKeys[i.key]},this.releaseHeldKeyPress=i=>{delete this.heldKeysPress[i.key]},this._onUserEvent=({eventName:i,target:n,reverse:a})=>{var s,l,u,c;if(!i||!n)return;let o=AP(i);o&&(o==="MouseDown"||o==="MouseUp"||o==="MousePress"?(n.dispatchEvent({type:"beginEvent",eventName:o}),(l=(s=this.eventsPerObjects[o])==null?void 0:s[n.uuid])==null||l.forEach(d=>{d.dispatchUserEvent(a)})):(o==="KeyDown"||o==="KeyUp"||o==="KeyPress")&&(n.dispatchEvent({type:"beginEvent",eventName:o}),(c=(u=this.eventsPerObjects[o])==null?void 0:u[n.uuid])==null||c.forEach(d=>{d.dispatchUserEvent()})))}}connect(){var n,a,o,s,l,u;let{page:e,sharedAssets:t,domElement:r}=this.eventContext,i=(c,d)=>{var f,g;if(!((f=c.data)!=null&&f.events.length))return;let h=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let p of h){let m=this.eventsPerObjects[p];if(c.data.events.filter(({data:y})=>y.type===p&&y.disabled!==!0).forEach(({id:y,data:b})=>{try{let w=new jbt(y,b,c,e,t,this.eventManager);w.actions.Video.length&&(this.hasVideoAction=!0),(b.type==="MouseDown"||b.type==="MouseUp"||b.type==="MousePress")&&(b.mode==="Canvas"||b.mode==="Window")?this.canvasMouseEvents.push(w):(m[c.uuid]?m[c.uuid].some(x=>x.id===w.id)||m[c.uuid].push(w):m[c.uuid]=[w],c instanceof gb&&c.traverseChildren(x=>{var S;if(!x.visible)return!0;x instanceof Sn&&((S=x.data.geometry.shapeBlendNode)==null?void 0:S.operation)!==2&&(m[x.uuid]?m[x.uuid].push(w):m[x.uuid]=[w])}))}catch{}}),((g=m[c.uuid])==null?void 0:g.length)&&(this.objectsPerTypes[p].push(c instanceof ia&&(p==="MouseDown"||p==="MouseUp"||p==="MousePress")?d:c),c instanceof gb)){let y=this.objectsPerTypes[p];c.traverseChildren(b=>{if(!b.visible)return!0;b instanceof Sn&&y.indexOf(b)===-1&&y.push(b)})}}};e.traverseEntity(c=>{var d;(c instanceof Ba||c instanceof Kn)&&((d=c.frame)==null||d.traverse(h=>{i(h,c)})),i(c)}),this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),r.addEventListener("pointerdown",this.onCanvasMouseDown),r.addEventListener("pointerup",this.onCanvasMouseUp),((n=this.objectsPerTypes.MouseDown)!=null&&n.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),r.addEventListener("pointerdown",this.onMouseDown)),(a=this.objectsPerTypes.MouseUp)!=null&&a.length&&(this.domEventsNeeded.add("pointerup"),r.addEventListener("pointerup",this.onMouseUp)),(o=this.objectsPerTypes.MousePress)!=null&&o.length&&(this.domEventsNeeded.add("pointerdown"),r.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),r.addEventListener("pointerup",this.onMousePressRelease)),(s=this.objectsPerTypes.KeyDown)!=null&&s.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(l=this.objectsPerTypes.KeyUp)!=null&&l.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(u=this.objectsPerTypes.KeyPress)!=null&&u.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([c,d])=>{d.forEach(h=>{h.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(r=>{r.forEach(i=>{i.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,r])=>{r.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){var s,l,u,c;let{stopRaycast:t,raycaster:r,page:i,pointerScreen:n}=this.eventContext,a=this.objectsPerTypes[e],o=a.filter(d=>!(d instanceof ia));if(!(!a.length&&!this.useForRaycastProperty)&&!(i.uiCanvas&&Cm(i,[n.x,n.y],Object.keys(this.eventsPerObjects[e]),d=>{this.handleObjectMouseEventDispatch(d,e)}))){if(t||this.useForRaycastProperty){let d;if(this.sceneInterects===null?d=_R(r,i,o,this.useForRaycastProperty):(d=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&d.length&&(this.eventContext.sharedAssets.raycastProperty={x:d[0].point.x,y:d[0].point.y,z:d[0].point.z,objX:d[0].object.matrixWorld.elements[12],objY:d[0].object.matrixWorld.elements[13],objZ:d[0].object.matrixWorld.elements[14]}),t){let h=[((l=(s=d[0])==null?void 0:s.uv)==null?void 0:l.x)??0,((c=(u=d[0])==null?void 0:u.uv)==null?void 0:c.y)??0];$k(d).forEach(f=>{f instanceof Ba&&Cm(f,h,Object.keys(this.eventsPerObjects[e]),g=>{this.handleObjectMouseEventDispatch(g,e)}),this.eventsPerObjects[e][f.uuid]&&this.handleObjectMouseEventDispatch(f,e)})}}t||o.forEach(d=>{var f,g;let h=s2(r,d);h&&(this.handleObjectMouseEventDispatch(d,e),d instanceof Ba&&Cm(d,[((f=h==null?void 0:h.uv)==null?void 0:f.x)??0,((g=h==null?void 0:h.uv)==null?void 0:g.y)??0],Object.keys(this.eventsPerObjects[e]),p=>{this.handleObjectMouseEventDispatch(p,e)}))})}}handleMousePressEvent(e=!1){let t="MousePress",r=this.objectsPerTypes[t],i=r.filter(a=>!(a instanceof ia)),n=[];if(r.length){if(!e){let{stopRaycast:a,raycaster:o,page:s,pointerScreen:l}=this.eventContext,u=!1;if(s.uiCanvas&&(u=Cm(s,[l.x,l.y],Object.keys(this.eventsPerObjects[t]),c=>{n.push(c)})),a&&!u){let c=_R(o,s,i);n=$k(c),c.forEach(d=>{var h,f;d.object instanceof Ba&&Cm(d.object,[((h=d==null?void 0:d.uv)==null?void 0:h.x)??0,((f=d==null?void 0:d.uv)==null?void 0:f.y)??0],Object.keys(this.eventsPerObjects[t]),g=>{n.push(g)})})}else i.forEach(c=>{var h,f;let d=s2(o,c);d&&(n.push(c),c instanceof Ba&&Cm(c,[((h=d==null?void 0:d.uv)==null?void 0:h.x)??0,((f=d==null?void 0:d.uv)==null?void 0:f.y)??0],Object.keys(this.eventsPerObjects[t]),g=>{n.push(g)}))})}this._prevObjects.length&&this._prevObjects.forEach(a=>{n.includes(a)||this.handleObjectMouseEventDispatchRelease(a,t)}),n.length&&n.forEach(a=>{this.handleObjectMouseEventDispatch(a,t)}),this._prevObjects=n}}handleObjectMouseEventDispatch(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{let n=this.eventsPerObjects[t][i.uuid];n.some(({data:a})=>"key"in a&&a.key===e.key)&&i.dispatchEvent({type:"beginEvent",eventName:t}),n.forEach(a=>{"key"in a.data&&a.data.key===e.key&&(r?a.dispatchRelease():a.dispatch(!0))})})}handleKeyEventHeld(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{this.eventsPerObjects[t][i.uuid].forEach(n=>{"key"in n.data&&n.data.key===e.key&&n.dispatchHeld(r)})})}},Bbt=new k,Lbt=new k,LCe=class{constructor(e,t,r,i,n){this.actionsIn=Mn(e,e.inActions,r,i,n,t),this.actionsOut=Mn(e,e.outActions,r,i,n,t)}disconnect(){ta(this.actionsIn),ta(this.actionsOut)}},Fbt=class extends LCe{constructor(e,t,r,i,n,a){super(t,r,i,n,a),this.id=e,this.data=t,this.object=r,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let h of this.objects)if(!h.visible)return;let u=Bbt.setFromMatrixPosition(this.objects[0].matrixWorld),c=Lbt.setFromMatrixPosition(this.objects[1].matrixWorld),d=u.distanceTo(c)<=this.distance?"in":"out";if(this.stage!==d){this.stage=d;let h=d==="in"?this.actionsIn:this.actionsOut;h.Audio.forEach(f=>f.dispatchConditional()),h.Particles.forEach(f=>f.dispatchConditional()),h.Video.forEach(f=>f.dispatchConditional()),h.Link.forEach(f=>f.dispatch()),h.Create.forEach(f=>f.dispatch()),h.Destroy.forEach(f=>f.dispatch()),h.Reset.forEach(f=>f.dispatch()),h.Transition.forEach(f=>{f.object.currentTransitionEvent!==this&&(f.object.currentTransitionEvent=this),f.init()}),h.Transition.forEach(f=>f.play()),h.Animation.forEach(f=>f.play()),h.SwitchCamera.forEach(f=>f.play()),h.SceneTransition.forEach(f=>f.dispatch()),h.SetVariable.forEach(f=>f.checkConditions()),h.SetVariable.forEach(f=>f.dispatch()),h.DynamicVariablePlay.forEach(f=>f.dispatch()),h.ClearLocalStorage.forEach(f=>f.dispatch()),h.UserAPI.forEach(f=>f.dispatch())}};let{distance:o,fromObject:s,toObject:l}=t.condition;this.distance=o;for(let u of[s,l]){if(!u)throw new Error("Missing property");let c=i.find(u);if(!c)throw new Error("Missing property");this.objects.push(c)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},Nbt=class extends LCe{constructor(e,t,r,i,n,a){var l;super(t,r,i,n,a),this.id=e,this.data=t,this.object=r,this.onBegin=({target:u,state:c})=>{this.toState!==c&&(this.actionsOut.Audio.forEach(d=>d.dispatchConditional()),this.actionsOut.Particles.forEach(d=>d.dispatchConditional()),this.actionsOut.Video.forEach(d=>d.dispatchConditional()),this.actionsOut.Link.forEach(d=>d.dispatch()),this.actionsOut.Create.forEach(d=>d.dispatch()),this.actionsOut.Destroy.forEach(d=>d.dispatch()),this.actionsOut.Reset.forEach(d=>d.dispatch()),this.actionsIn.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(d=>d.play()),this.actionsOut.Animation.forEach(d=>d.play()),this.actionsIn.SwitchCamera.forEach(d=>d.pause()),this.actionsOut.SwitchCamera.forEach(d=>d.play()),this.actionsOut.SceneTransition.forEach(d=>d.dispatch()),this.actionsOut.SetVariable.forEach(d=>d.checkConditions()),this.actionsOut.SetVariable.forEach(d=>d.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(d=>d.dispatch()),this.actionsOut.ClearLocalStorage.forEach(d=>d.dispatch()),this.actionsOut.UserAPI.forEach(d=>d.dispatch()))},this.onComplete=({target:u,state:c})=>{this.toState===c&&(this.actionsIn.Audio.forEach(d=>d.dispatchConditional()),this.actionsIn.Particles.forEach(d=>d.dispatchConditional()),this.actionsIn.Video.forEach(d=>d.dispatchConditional()),this.actionsIn.Link.forEach(d=>d.dispatch()),this.actionsIn.Create.forEach(d=>d.dispatch()),this.actionsIn.Destroy.forEach(d=>d.dispatch()),this.actionsIn.Reset.forEach(d=>d.dispatch()),this.actionsOut.Transition.forEach(d=>d.pause()),this.actionsOut.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(d=>d.play()),this.actionsIn.Animation.forEach(d=>d.play()),this.actionsOut.SwitchCamera.forEach(d=>d.pause()),this.actionsIn.SwitchCamera.forEach(d=>d.play()),this.actionsIn.SceneTransition.forEach(d=>d.dispatch()),this.actionsIn.SetVariable.forEach(d=>d.checkConditions()),this.actionsIn.SetVariable.forEach(d=>d.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(d=>d.dispatch()),this.actionsOut.ClearLocalStorage.forEach(d=>d.dispatch()),this.actionsOut.UserAPI.forEach(d=>d.dispatch()))};let{condition:o}=t;if(!o.object)throw new Error("Missing property");let s=i.find(o.object)??i.scene.find2D(o.object);if(!s)throw new Error("Missing property");if(this.toObject=s,o.state&&!((l=this.toObject.states)!=null&&l[o.state]))throw new Error("Missing property");this.toState=o.state}connect(){B0(this.actionsOut).forEach(e=>{var t;(t=this.actionsOut[e])!=null&&t.length&&this.toObject.addEventListener("beginState",this.onBegin)}),B0(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),B0(this.actionsOut).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),B0(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},Ubt=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1}connect(){super.connect();let{page:e,sharedAssets:t}=this.eventContext;e.traverseEntity(r=>{var i;if((i=r.data)!=null&&i.events.length){for(let{id:n,data:a}of r.data.events)if(!a.disabled&&a.type==="Conditional")try{let o;a.condition.type==="Comparison"||(a.condition.type==="Distance"?o=new Fbt(n,a,r,e,t,this.eventManager):a.condition.type==="State"&&(o=new Nbt(n,a,r,e,t,this.eventManager))),o&&(this.eventsPerConditions[a.condition.type].push(o),(o.actionsIn.Video.length||o.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}}),Object.values(this.eventsPerConditions).forEach(r=>r.forEach(i=>i.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},rS=new k,zg=new k,uy=new k,Ore=new So,Vbt=.01,ri=new k,jn=new k,Rre=new k,q0=new ur,eL=new Bn,kbt=new dt,tL=new xn,R1=new k,ep=new k,rL=.2;function iL(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var qbt=function(){let e=new dt;return(t,r,i)=>{let n=t.obj;e.copy(n.hiddenMatrix),n.parent!==null&&e.premultiply(n.parent.matrixWorld),e.invert(),n.position.copy(r),t.reference==="global"&&iL(n.position,t.limits),n.position.applyMatrix4(e),t.reference==="parent"?iL(n.position,t.limits):t.reference==="local"&&(q0.copy(t.quat0).invert(),n.position.sub(t.position0),n.position.applyQuaternion(q0),iL(n.position,t.limits),q0.invert(),n.position.applyQuaternion(q0),n.position.add(t.position0)),e.multiply(i??n.matrixWorld).decompose(ri,n.quaternion,jn),n.updateMatrix(),n.hasNonUniformScale&&(n.updateMatrixWorld(),n.updateMatrixWorldSVD()),n instanceof ho&&zm(n.parent)&&n.invalidateDownstreamBooleanData(!0)}}(),Wbt=class{constructor(e,t,r,i,n,a,o){this.object=e,this.id=t,this.data=r,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Mn(r,r.dragDropActions.drag,i,n,a,this.object),this.actionsDrop=Mn(r,r.dragDropActions.drop,i,n,a,this.object);let s=[];this.data.objects.forEach(l=>{let u=i.find(l);!u||u.data.visible!==!1&&(s.push(u),o[u.uuid]&&o[u.uuid].forEach(c=>{let d=i.find(c);!d||d.data.visible!==!1&&s.push(d)}))}),this.data.dropDestinations.forEach(l=>{let u=i.find(l);!u||u.data.visible!==!1&&(this.dropDestIds.push(u.uuid),o[u.uuid]&&o[u.uuid].forEach(c=>{let d=i.find(c);!d||d.data.visible!==!1&&this.dropDestIds.push(d.uuid)}))}),this.dragItems=s.map(l=>(this.data.planeMode==="locked"&&(l.userData.lockedPlane=!0),l.userData.worldPosition0=new k().setFromMatrixPosition(l.matrixWorld),{obj:l,fromPosition:new k().setFromMatrixPosition(l.matrixWorld),pointStart:new k,pointEnd:new k,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new k().copy(l.position),quat0:new ur().copy(l.quaternion),snapped:!1,orientationMatrix:new dt,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){ta(this.actionsDrag),ta(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},Gbt=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=r=>{var o;if(ar.length>1)return;this.eventContext.updateRaycaster(r);let{raycaster:i,page:n}=this.eventContext,a=n.raycastWithClones(i);if(this.lastDropDestination=null,a.length===0){this.activeEvent=null;return}for(let s of this.events){let l=0;for(let{obj:u,pointEnd:c,pointStart:d}of s.dragItems){if(u===a[0].object||u===a[0].object.object||Vr.is(u)&&u.isAncestorOf(a[0].object.uuid)){if(s.activeIdx=l,s.activeDragItem.reset=!1,s.activeDragItem.currentDampingFactor=s.data.dampingFactor,s.activeDragItem.snapped=!1,s.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){s.activeDragItem.obj.rigidBody&&s.activeDragItem.obj.rigidBody.setBodyType(2,!0);let h=s.activeDragItem.obj;u.hasNonUniformScale&&u.updateMatrixWorldSVD(),(h.hasNonUniformScale?h.matrixWorldRigid:h.matrixWorld).decompose(ri,q0,jn),eL.setFromQuaternion(q0),h.prevR===void 0?(h.prevR=eL.clone(),h.prevT=ri.clone()):(h.prevR.copy(eL),h.prevT.copy(ri)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(s.activeDragItem.obj)}this.calcPlaneIntersectPos(u,d,s.data.plane,s.data.referenceFrame),c.copy(d),(this.eventManager.controlsManager.usePhysics&&((o=u.data.physics)==null?void 0:o.rigidBody)==="dynamic"||s.data.drop===!1||s.data.resetOnSnapFail===!1)&&s.activeDragItem.fromPosition.setFromMatrixPosition(s.activeDragItem.obj.matrixWorld),this.activeEvent=s,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}l++}}this.activeEvent=null},this.onPointerMove=r=>{var o,s,l,u;if(ar.length>1)return;this.eventContext.updateRaycaster(r);let{raycaster:i,page:n}=this.eventContext,a=n.raycastWithClones(i);if(ar.length===0){let c=!1;for(let d of this.events){for(let{obj:h}of d.dragItems)if(h===((o=a[0])==null?void 0:o.object)||h===((l=(s=a[0])==null?void 0:s.object)==null?void 0:l.object)||Vr.is(h)&&h.isAncestorOf((u=a[0])==null?void 0:u.object.uuid)){switch(c=!0,d.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(c)break}c||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let c=this.activeEvent.activeDragItem;c.snapped=!1;let d;if(this.activeEvent.data.drop&&(d=a.filter(h=>c.obj!==h.object&&!c.obj.isAncestorOf(h.object.uuid)&&!(h.object instanceof C_)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(f=>f===h.object.uuid||n.scene.find(f).isAncestorOf(h.object.uuid))))[0]),d){let h=Rre.copy(d.face.normal).applyMatrix3(tL.getNormalMatrix(d.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")c.fromPosition.setFromMatrixPosition(d.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(c.fromPosition.copy(d.point),this.activeEvent.data.snapSurfaceMode==="bbox"){ri.copy(h).applyMatrix3(tL.setFromMatrix4(c.obj.matrixWorld).transpose());let f=c.obj;ri.x>rL?jn.x=-f.recursiveBBox.min.x:ri.x<-.2&&(jn.x=-f.recursiveBBox.max.x),ri.y>rL?jn.y=-f.recursiveBBox.min.y:ri.y<-.2&&(jn.y=-f.recursiveBBox.max.y),ri.z>rL?jn.z=-f.recursiveBBox.min.z:ri.z<-.2&&(jn.z=-f.recursiveBBox.max.z),jn.applyMatrix3(tL.invert())}else jn.copy(h).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);c.fromPosition.add(jn)}this.activeEvent.data.autoOrient&&(ri.set(0,1,0).cross(h),ri.length()<1e-4&&ri.set(-1,0,0).cross(h),jn.crossVectors(Rre,ri),c.orientationMatrix.makeBasis(ri,jn,h)),c.pointStart.copy(c.fromPosition),c.pointEnd.copy(c.pointStart),c.currentDampingFactor=this.activeEvent.snapDampingFactor,c.snapped=!0,this.lastDropDestination!==d.object&&(this.lastDropDestination=d.object,this.activeEvent.actionsDrop.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Animation.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(f=>{f.dispatchThrottled()}))}else c.orientationMatrix.makeRotationFromQuaternion(c.quat0),this.lastDropDestination=null,c.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(c.obj,c.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(h=>{h.stop(),h.object.currentState!==null&&h.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(h=>{h.stop()}),this.activeEvent.actionsDrop.Audio.forEach(h=>{h.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(h=>{h.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(h=>{h.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(h=>h.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(h=>h.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(h=>h.dispatch()),this.activeEvent.actionsDrag.ClearLocalStorage.forEach(h=>h.dispatch()),this.activeEvent.actionsDrag.UserAPI.forEach(h=>h.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(h=>{h.play()}),this.activeEvent.actionsDrag.Animation.forEach(h=>{h.play()}),this.activeEvent.actionsDrag.Audio.forEach(h=>{h.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(h=>{h.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(h=>{h.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(h=>{h.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(h=>{h.stop(),h.object.currentState!==null&&h.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(h=>{h.stop()}))},500),this.updateDragItem(c),c.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=r=>{var i;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let n=((i=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:i.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!n)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&n&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(a=>{a.stop(),a.object.currentState!==null&&a.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(a=>{a.stop()}),this.activeEvent.actionsDrag.Audio.forEach(a=>{a.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(a=>{a.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.ClearLocalStorage.forEach(a=>a.dispatch()),this.activeEvent.actionsDrop.UserAPI.forEach(a=>a.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}}}connect(){let e={};if(this.eventContext.page.traverseEntity(r=>{r.component&&(e[r.component.uuid]?e[r.component.uuid].push(r.uuid):e[r.component.uuid]=[r.uuid])}),this.eventContext.page.traverseEntity(r=>{var i;(i=r.data)==null||i.events.filter(n=>n.data.type==="DragDrop"&&!n.data.disabled).forEach(n=>{this.events.push(new Wbt(r,n.id,n.data,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager,e))})}),!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,r,i){let{getCamera:n,raycaster:a}=this.eventContext;n().getWorldDirection(zg),zg.negate();let o=q0.identity();switch(i==="parent"?kbt.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(ri,o,jn):i==="local"&&e.matrixWorld.decompose(ri,o,jn),r){case"x":ri.set(1,0,0).applyQuaternion(o),R1.copy(zg).cross(ri),ep.copy(ri).cross(R1);break;case"y":ri.set(0,1,0).applyQuaternion(o),R1.copy(zg).cross(ri),ep.copy(ri).cross(R1);break;case"z":ri.set(0,0,1).applyQuaternion(o),R1.copy(zg).cross(ri),ep.copy(ri).cross(R1);break;case"xy":ep.set(0,0,1).applyQuaternion(o);break;case"yz":ep.set(1,0,0).applyQuaternion(o);break;case"xz":ep.set(0,1,0).applyQuaternion(o);break;case"adaptive":zg.angleTo(jn.set(0,1,0))>Math.PI/6?(ri.crossVectors(jn.set(0,1,0),zg),ep.crossVectors(ri,jn)):ep.set(0,1,0);break;default:ep.copy(zg);break}uy.setFromMatrixPosition(e.matrixWorld);let s=e.userData.lockedPlane?e.userData.worldPosition0:uy;if(Ore.setFromNormalAndCoplanarPoint(ep,s),!!a.ray.intersectPlane(Ore,t)&&(r==="x"||r==="y"||r==="z")){let l=jn.subVectors(t,s).dot(ri);t.copy(s).addScaledVector(ri,l)}}updateDragItem(e,t=!1){var r,i;uy.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?rS.subVectors(e.fromPosition,uy).divideScalar(e.currentDampingFactor):e.reset==="original"?(rS.subVectors(e.obj.userData.worldPosition0,uy).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):rS.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(uy).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?rS.length()<Vbt:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&qbt(e,rS.add(uy),(r=this.activeEvent)!=null&&r.data.drop&&((i=this.activeEvent)!=null&&i.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},D1=new k,nL=new k,lm=new k,um=new k,Dre=new So,Hbt=.01,$bt={type:"requestRender"},Xbt=function(){let e=new k,t=new k;return(r,i,n)=>n>0?(e.subVectors(r,i),e.length()<=n?r:t.copy(i).add(e.normalize().multiplyScalar(n))):i}(),Ire=function(){let e=new dt;return(t,r)=>{t.position.copy(r),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof ho&&zm(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),Ybt=class{constructor(e,t,r,i,n,a){this.data=e,this.id=t,this.object=r,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new k,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...C6.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=i.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Mn(e,e.actions,i,n,a,r)}},Kbt=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.pairOfEventListeners=[],this.onMouseMove=r=>{if(!(ar.length>1)){this.eventContext.updateRaycaster(r);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=r=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=r=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onTargetChange=r=>()=>{this.updateSingleEvent(r)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(i=>{var a,o;let n=(a=i.data)==null?void 0:a.events.find(s=>s.data.type==="Follow"&&!s.data.disabled);n&&(!e.data.globalPhysics.usePhysics||((o=i.dataPatched.physics)==null?void 0:o.rigidBody)!=="dynamic")&&this.events.push(new Ybt(n.data,n.id,i,e,this.eventContext.sharedAssets,this.eventManager))}),!this.events.length)return;let{domElement:t,eventElement:r}=this.eventContext;this.domEventsNeeded.clear(),ts&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),r.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let i of this.events)if(i.target!==void 0){let n=i.target,a=this.onTargetChange(i);this.pairOfEventListeners.push([n,a]),n.addEventListener("requestRender",a)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),ts&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let r of this.events)r.paused=!0,r.isReset=!1,ta(r.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var o;this.events.forEach(s=>{s.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:r,limitDistance:i,limitDistanceEnabled:n}=e.data;if(e.object.getWorldPosition(lm),e.isReset)um.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(um);else{let{getCamera:s,raycaster:l}=this.eventContext;if(r==="custom"?(s().getWorldDirection(nL),nL.negate(),D1.copy(nL)):r==="xy"?D1.set(0,0,1):r==="xz"?D1.set(0,1,0):r==="yz"&&D1.set(1,0,0),Dre.setFromNormalAndCoplanarPoint(D1,lm),!l.ray.intersectPlane(Dre,um))return}if(!e.isReset){if(um.distanceTo(e.worldPosition0)>i&&n&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)um.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(um.x=lm.x),e.data.enabledTranslation[1]===!1&&(um.y=lm.y),e.data.enabledTranslation[2]===!1&&(um.z=lm.z);let a=Xbt(lm,um,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let s=D1.subVectors(a,lm).divideScalar(e.currentDampingFactor);lm.add(s),t&&Ire(e.object,lm),e.paused=s.length()<Hbt}else Ire(e.object,a),e.paused=!0;(o=e.object)==null||o.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent($bt)}},iS=new k,SO=new k,nS=new dt,I1=new ur,Bg=new ur,aS=new k,oS=new k,cy=new k,cm=new k,aL=new So,Qbt=1e-6,Jbt={type:"requestRender"},Zbt={type:"changeRotation"},jre=function(){let e=new dt;return function(t,r){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),r.premultiply(DCe(e).invert()),t.rotation.setFromRotationMatrix(r),t.updateMatrix(),t instanceof ho&&zm(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),e1t=class{constructor(e,t,r,i){this.id=t,this.object=r,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new ur,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...E6.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=i.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},t1t=class extends ka{constructor(){super(...arguments),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=e=>{if(!(ar.length>1)){this._lastMouseEvent=e,this.eventContext.updateRaycaster(e);for(let t of this.events)t.target===void 0&&this.updateSingleEvent(t)}},this.onMouseEnter=e=>{for(let t of this.events)t.target===void 0&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)t.target===void 0&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onScroll=e=>{if(this._lastMouseEvent){let t=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(t)}},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)},this.createUserEventListener=e=>({eventName:t,target:r})=>{if(!t||!r)return;let i=AP(t);i&&i==="LookAt"&&this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(i=>{var a,o;let n=(a=i.data)==null?void 0:a.events.find(s=>s.data.type==="LookAt"&&!s.data.disabled);n&&(!e.data.globalPhysics.usePhysics||((o=i.dataPatched.physics)==null?void 0:o.rigidBody)!=="dynamic")&&this.events.push(new e1t(n.data,n.id,i,e))}),!this.events.length)return;let{domElement:t,eventElement:r}=this.eventContext;this.domEventsNeeded.clear(),ts&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),r.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?r.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let i of this.events){if(i.target!==void 0){let o=this.onTargetChange(i),s=i.target;this.pairOfEventListeners.push([s,o]),s.addEventListener("requestRender",o)}let n=this.createUserEventListener(i),a=i.object;this.pairOfUserEventListeners.push([a,n]),a.addEventListener("userEvent",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),ts&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let[r,i]of this.pairOfUserEventListeners)r.removeEventListener("userEvent",i);for(let r of this.events)r.paused=!0,r.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var h;let{tilt:t,axis:r,distance:i,plane:n,limitDistance:a,enabledRotation:o,limitDistanceEnabled:s}=e.data,{getCamera:l,raycaster:u}=this.eventContext,{object:c,target:d}=e;if(c.getWorldPosition(aS),!e.isReset)if(e.target)e.target.getWorldPosition(oS);else{if(n==="custom"?(l().getWorldDirection(SO),SO.negate(),aL.setFromNormalAndCoplanarPoint(SO,aS)):(n==="xy"?iS.set(0,0,1):n==="xz"?iS.set(0,1,0):n==="yz"&&iS.set(1,0,0),aL.setFromNormalAndCoplanarPoint(iS,aS)),!u.ray.intersectPlane(aL,oS))return;i>0&&(n==="custom"||n===void 0)&&oS.addScaledVector(SO,i)}if(e.isReset||(d?t==="target"?cy.copy(d.up).applyMatrix4(nS.extractRotation(d.matrixWorld)).normalize():o.some(f=>f===!1)?(r==="x"?(cm.set(0,0,1),o[2]===!1&&cm.set(0,1,0)):r==="y"?(cm.set(1,0,0),o[0]===!1&&cm.set(0,0,1)):(cm.set(0,1,0),o[1]===!1&&cm.set(1,0,0)),cy.copy(cm).applyQuaternion(e.worldQuaternion0).normalize()):cy.set(0,1,0):n==="custom"?cy.set(0,1,0):cy.copy(iS)),e.isReset)Bg.copy(e.worldQuaternion0);else if(aS.distanceTo(oS)>a&&s&&d)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Bg.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;r1t(nS,oS,aS,cy,r,cm),Bg.setFromRotationMatrix(nS),I1.setFromUnitVectors(cm.applyQuaternion(Bg),cy),o.some(f=>f===!1)&&t!=="target"&&Bg.premultiply(I1).normalize()}e.currentDampingFactor>1?(c.updateWorldMatrix(!0,!1),I1.setFromRotationMatrix(DCe(c.matrixWorld)),I1.slerp(Bg,1/e.currentDampingFactor),jre(c,nS.makeRotationFromQuaternion(I1)),e.paused=8*(1-I1.dot(Bg))<Qbt):(jre(c,nS.makeRotationFromQuaternion(Bg)),e.paused=!0),(h=e.object)==null||h.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),c.dispatchEvent(Jbt),c.dispatchEvent(Zbt)}},As=new k,Dn=new k,on=new k;function r1t(e,t,r,i,n,a){let o=e.elements;on.subVectors(t,r),on.lengthSq()===0&&(on.z=1),on.normalize(),Dn.crossVectors(i,on),Dn.lengthSq()===0&&(Math.abs(i.z)===1?on.x+=1e-4:on.z+=1e-4,on.normalize(),Dn.crossVectors(i,on)),Dn.normalize(),As.crossVectors(on,Dn),n==="x"?a.z===1?[Dn,As,on]=[on,Dn,As]:(Dn.negate(),[Dn,on]=[on,Dn]):n==="y"?a.x===1?[Dn,As,on]=[As,on,Dn]:(Dn.negate(),[As,on]=[on,As]):a.x===1&&(Dn.negate(),[Dn,As]=[As,Dn]),o[0]=Dn.x,o[4]=As.x,o[8]=on.x,o[1]=Dn.y,o[5]=As.y,o[9]=on.y,o[2]=Dn.z,o[6]=As.z,o[10]=on.z}var i1t=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.entered=!1,this.actions=Mn(t,t.actions,i,n,a,r)}disconnect(){ta(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatchStart()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Create.forEach(e=>e.dispatchStop()),this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Particles.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Particles.forEach(t=>t.dispatchBasic()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},n1t=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=r=>{ar.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onMouseUp=r=>{ar.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=r=>{ar.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:r,target:i,reverse:n})=>{var o;if(!r||!i)return;let a=AP(r);a&&a==="MouseHover"&&(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(o=this.eventsPerObjects[i.uuid])==null||o.forEach(s=>s.dispatchUserEvent(n)))}}connect(){let{page:e,sharedAssets:t}=this.eventContext,r=(n,a)=>{var o,s;if(!(!n.visible||!((o=n.data)!=null&&o.events.length))){for(let{id:l,data:u}of n.data.events)if(!u.disabled&&u.type==="MouseHover")try{let c=new i1t(l,u,n,e,t,this.eventManager);this.eventsPerObjects[n.uuid]?this.eventsPerObjects[n.uuid].push(c):this.eventsPerObjects[n.uuid]=[c]}catch{}(s=this.eventsPerObjects[n.uuid])!=null&&s.length&&this.objects.push(n instanceof ia?a:n)}};if(e.traverseEntity(n=>{var a;(n instanceof Ba||n instanceof Kn)&&((a=n.frame)==null||a.traverse(o=>{r(o,n)})),r(n)}),!this.objects.length)return;let{domElement:i}=this.eventContext;this.domEventsNeeded.clear(),ts&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(n=>{n.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),ts&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(r=>{r.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:r,raycaster:i,page:n,pointerScreen:a}=this.eventContext,o=!1;if(n.uiCanvas&&(o=Cm(n,[a.x,a.y],Object.keys(this.eventsPerObjects),s=>{t.push(s)})),r&&!o){let s=_R(i,n,this.objects);t=$k(s),s.forEach(l=>{var u,c;l.object instanceof Ba&&Cm(l.object,[((u=l==null?void 0:l.uv)==null?void 0:u.x)??0,((c=l==null?void 0:l.uv)==null?void 0:c.y)??0],Object.keys(this.eventsPerObjects),d=>{t.push(d)})})}else this.objects.forEach(s=>{var u,c;let l=s2(i,s);l&&(t.push(s),s instanceof Ba&&Cm(s,[((u=l==null?void 0:l.uv)==null?void 0:u.x)??0,((c=l==null?void 0:l.uv)==null?void 0:c.y)??0],Object.keys(this.eventsPerObjects),d=>{t.push(d)}))})}this._prevObjects.length&&this._prevObjects.forEach(r=>{var i;t.includes(r)||(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchLeave()))}),t.length&&t.forEach(r=>{var i;r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchEnter())}),this._prevObjects=t}},a1t=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.scrollCounter=0,this.actions=Mn(t,t.actions,i,n,a,r)}connect(){this.scrollCounter=0}disconnect(){ta(this.actions)}dispatch(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let r=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(r)),this.actions.Animation.forEach(i=>i.seek(t)),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch()),this.actions.ClearLocalStorage.forEach(i=>i.dispatch()),this.actions.UserAPI.forEach(i=>i.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},o1t=class{constructor(e,t,r,i,n,a,o){this.id=e,this.data=t,this.object=r,this.domElement=a,this.eventManager=o,this.scrollStart=0,this.scrollEnd=0,this.actions=Mn(t,t.actions,i,n,o,r)}getStickyParentElement(){let e=this.domElement;for(;e;){if(window.getComputedStyle(e).position==="sticky")return e;e=e.parentElement}return null}computeScrollBounds(){let e=this.getStickyParentElement(),t=e==null?void 0:e.parentElement,r=this.domElement.getBoundingClientRect(),i={top:r.top,bottom:r.bottom,left:r.left,right:r.right,width:r.width,height:r.height};if(t){let u=t.getBoundingClientRect(),c=window.getComputedStyle(e),d=parseFloat(c.marginTop)+parseFloat(c.marginBottom),h=parseFloat(c.top),f=parseFloat(c.bottom),g=u.height-d;if(!isNaN(h))r.top===h?(i.top+=u.top-h,i.bottom+=u.top-h):r.top<0&&(i.top-=g-r.height,i.bottom-=g-r.height);else if(!isNaN(f)){let p=document.body.clientHeight??window.innerHeight,m=window.innerWidth-(document.documentElement.clientWidth??window.innerWidth);r.bottom===p-f?(i.top+=u.top-r.height+f+m,i.bottom+=u.top-r.height+f+m):r.bottom<p-f&&(i.top-=g-r.height,i.bottom-=g-r.height)}}let n=document.body,a=document.documentElement,o=window.pageYOffset||a.scrollTop||n.scrollTop,s=a.clientTop||n.clientTop||0,l=Math.round(i.top+o-s);if(this.data.startFrom==="enter"){let u=window.innerHeight,c=i.height,d=this.data.enterAnchor,h=d==="top"?u:d==="bottom"?u-c:u-c*.5;this.scrollStart=l-h}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=i,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){ta(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this&&(n.object.currentTransitionEvent=this,n.init())});let r=this.scrollEnd-this.scrollStart,i=Math.min(1,Math.max(0,(t-this.scrollStart)/r));this.actions.Transition.forEach(n=>n.seek(i)),this.actions.Animation.forEach(n=>n.seek(i)),this.actions.Create.forEach(n=>n.dispatchThrottled()),this.actions.SetVariable.forEach(n=>n.checkConditions()),this.actions.SetVariable.forEach(n=>n.dispatch()),this.actions.DynamicVariablePlay.forEach(n=>n.dispatch()),this.actions.ClearLocalStorage.forEach(n=>n.dispatch()),this.actions.UserAPI.forEach(n=>n.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},s1t=class extends ka{constructor(e,t){super(e),this.managers=t,this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([r,i])=>{i.forEach(n=>n.handleResize())})},this.onScroll=r=>{if(!this.isInview)return;let i={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([n,a])=>{n.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:i}),a.forEach(o=>o.dispatch(i))})},this.onWheel=r=>{!this.isInview||r.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([i,n])=>{i.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:r.deltaY}),n.forEach(a=>a.dispatch(r.deltaY))})},this.onUserEvent=({eventName:r,target:i,reverse:n})=>{var o;if(!r||!i)return;let a=AP(r);a&&a==="Scroll"&&(i.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(o=this.wheelEventsPerObject.get(i))==null||o.forEach(s=>{s.dispatchUserEvent(n)}))}}connect(){let{page:e,sharedAssets:t,domElement:r,isExport:i}=this.eventContext,n=a=>{var o,s,l;if((o=a.data)!=null&&o.events.length){for(let{id:u,data:c}of a.data.events)if(!c.disabled&&c.type==="Scroll")if(c.trigger==="load"||!i){let d=new a1t(u,c,a,e,t,this.managers);this.wheelEventsPerObject.has(a)?(s=this.wheelEventsPerObject.get(a))==null||s.push(d):this.wheelEventsPerObject.set(a,[d])}else{let d=new o1t(u,c,a,e,t,r,this.managers);this.scrollEventsPerObject.has(a)?(l=this.scrollEventsPerObject.get(a))==null||l.push(d):this.scrollEventsPerObject.set(a,[d])}}};e.traverseEntity(a=>{var o;(a instanceof Ba||a instanceof Kn)&&((o=a.frame)==null||o.traverse(s=>{n(s)})),n(a)}),this.intersectionObserver=new IntersectionObserver(a=>{let o=a[0];o&&(this.isInview=o.isIntersecting)},{root:null}),this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([a,o])=>{o.forEach(s=>s.connect()),a.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([a,o])=>{o.forEach(s=>s.connect()),a.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(a=>a.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(a=>a.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},l1t=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Mn(t,t.actions,i,n,a,r)}disconnect(){ta(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof k0?t.interaction.audioPlayer.play():t.interaction instanceof Vk&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let r=t.interaction.data.triggerAfter??"autoplay";r===e&&(t.interaction instanceof M_?t.interaction.play(r==="autoplay"):t.interaction instanceof Gk&&t.interaction.dispatch())}),this.actions.Particles.forEach(t=>{(t.data.triggerAfter??"any")===e&&t.dispatchBasic()})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof k0?t.interaction.audioPlayer.play():t.interaction instanceof Vk&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof M_?t.interaction.play():t.interaction instanceof Gk&&t.interaction.dispatch()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()})}},u1t=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:i}=this.eventContext,n=i?document:r;n.removeEventListener("pointerdown",this.onAny),n.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([a,o])=>{a.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(s=>{s.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.actions.Audio.forEach(a=>{a.interaction instanceof k0&&a.interaction.audioPlayer.play()}),n.actions.Video.forEach(a=>{let o=a.interaction.data.triggerAfter??"autoplay";a.interaction instanceof M_&&a.interaction.play(o==="autoplay")}),n.actions.Particles.forEach(a=>{a.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:i,reverse:n})=>{var o,s;if(!r||!i)return;let a=AP(r);a&&a==="Start"&&(i instanceof ia||i.dispatchEvent({type:"beginEvent",eventName:"Start"}),(o=this.eventsPerObject.get(i))==null||o.forEach(l=>{l.dispatchUserEvent(n)}),(s=this.eventsAfterPerObject.get(i))==null||s.forEach(l=>{l.dispatchUserEvent(n)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext,r=i=>{var n,a,o,s,l;if((n=i.data)!=null&&n.events.length)for(let{id:u,data:c}of i.data.events){if(c.disabled||c.type!=="Start")continue;let d=new l1t(u,c,i,t,e,this.eventManager);(d.actions.Transition.length||d.actions.Animation.length||d.actions.SwitchCamera.length||d.actions.Create.length||d.actions.Destroy.length||d.actions.SceneTransition.length||d.actions.Reset.length||d.actions.SetVariable.length||d.actions.DynamicVariablePlay.length||d.actions.ClearLocalStorage.length||d.actions.UserAPI.length)&&(this.eventsPerObject.has(i)?(a=this.eventsPerObject.get(i))==null||a.push(d):this.eventsPerObject.set(i,[d])),d.actions.Audio.length&&(this.eventsAfterPerObject.has(i)?(o=this.eventsAfterPerObject.get(i))==null||o.push(d):this.eventsAfterPerObject.set(i,[d])),d.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(i)?(s=this.eventsAfterPerObject.get(i))==null||s.push(d):this.eventsAfterPerObject.set(i,[d])),d.actions.Particles.length&&(this.eventsAfterPerObject.has(i)?(l=this.eventsAfterPerObject.get(i))==null||l.push(d):this.eventsAfterPerObject.set(i,[d]))}};if(t.traverseEntity(i=>{var n;(i instanceof Ba||i instanceof Kn)&&((n=i.frame)==null||n.traverse(a=>{r(a)})),r(i)}),[...this.eventsAfterPerObject.values()].some(i=>i.length)){if(this.eventManager.activateCount===0){let{domElement:i,isExport:n}=this.eventContext,a=n?document:i;a.addEventListener("pointerdown",this.onMouseDown,{once:!0}),a.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),a.addEventListener("pointerdown",this.onAny),a.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([o,s])=>{o.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([i,n])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach(a=>a.dispatch()),i.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,r=t?document:e;r.removeEventListener("pointerdown",this.onMouseDown),r.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),r.removeEventListener("pointerdown",this.onAny),r.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,n])=>{i.removeEventListener("userEvent",this.onUserEvent),n.forEach(a=>a.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(r=>r.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},c1t=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.initialDisabled=!1,this.actions=Mn(t,t.actions,i,n,a,r),this.target=t.target}disconnect(){ta(this.actions)}dispatch(e){this.initialDisabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()))}},d1t=class extends ka{constructor(e,t,r,i,n){super(e),this.sharedVariables=t,this.eventManager=r,this.needsMouse=i,this.needsRaycast=n,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.isOutOfFocus=!1,this.events=[],this.onFrame=a=>{let o=this.eventContext.sharedAssets;if(this.rafId=window.requestAnimationFrame(this.onFrame),this.isOutOfFocus)return;let s=new Date,l=[],u=[];for(let h=0;h<this.propertiesToWatch.length;h++){let{objectId:f,property:g,prevValue:p}=this.propertiesToWatch[h],m=this.eventContext.scene.find(f),y=P6.propertyPaths[g];if(y[0]==="width"||y[0]==="height"||y[0]==="depth")m=m.geometry.userData.parameters[y[0]];else for(let b=0;b<y.length;b++)m=m[y[b]];p===null?this.propertiesToWatch[h].prevValue=m instanceof k?m.clone():m:(m instanceof k?!m.equals(p):p!==m)&&(u.push({objId:f,property:g}),m instanceof k?this.propertiesToWatch[h].prevValue.copy(m):this.propertiesToWatch[h].prevValue=m)}for(let h=0;h<this.variablesToWatch.length;h++){let{id:f,prevValue:g}=this.variablesToWatch[h],p=o.getVariable(f);p!==g&&(l.push(f),this.variablesToWatch[h].prevValue=p)}for(let h=0;h<this.dynamicVars.length;h++){let{id:f,expectedTime:g,last:p,data:m,timerSeconds:y,startValue:b}=this.dynamicVars[h],w=1e3;if((m.dynamicVariableType==="timer"||m.dynamicVariableType==="stopwatch")&&m.format==="number3decimal"?w=1:m.dynamicVariableType==="counter"?w=m.updateInterval:m.dynamicVariableType==="random"&&(w=m.isStatic?1/0:m.updateInterval),g===-1){this.dynamicVars[h].last=a,this.dynamicVars[h].expectedTime=a+w;continue}if(!((o.getDynamicVariablePlayState(f)==="Stopped"||o.getDynamicVariablePlayState(f)==="Restarted")&&(this.dynamicVars[h].last=a,this.dynamicVars[h].expectedTime=a+w,m.dynamicVariableType==="counter"&&o.getVariable(f)!==b&&(o.updateVariable(f,b),this.eventManager.requestRender()),(m.dynamicVariableType==="timer"||m.dynamicVariableType==="stopwatch")&&this.dynamicVars[h].timerSeconds!==b&&(this.dynamicVars[h].timerSeconds=b,o.updateVariable(f,Bs.getFormattedTimerTime(b,m)),this.eventManager.requestRender()),o.getDynamicVariablePlayState(f)==="Restarted"&&o.setDynamicVariablePlayState(f,"Playing"),o.getDynamicVariablePlayState(f)==="Stopped"))){if(o.getDynamicVariablePlayState(f)==="Paused"){this.dynamicVars[h].deltaToExpectedTime===void 0&&(this.dynamicVars[h].deltaToExpectedTime=Math.max(this.dynamicVars[h].expectedTime-a,0)),this.dynamicVars[h].last=a-(w-this.dynamicVars[h].deltaToExpectedTime),this.dynamicVars[h].expectedTime=a+this.dynamicVars[h].deltaToExpectedTime;continue}else this.dynamicVars[h].deltaToExpectedTime=void 0;if(a>=g)if(this.dynamicVars[h].last=a,this.dynamicVars[h].expectedTime+=w,m.dynamicVariableType==="random"){let x=m.min+Math.random()*(m.max-m.min),S=m.decimals;x=Math.round(x*Math.pow(10,S))/Math.pow(10,S),o.updateVariable(f,x),l.push(f),this.eventManager.requestRender()}else if(m.dynamicVariableType==="counter"){let x=o.getVariable(f),S=o.getDynamicVariableToggleIsForward(f)??!0,C=o.getVariable(f)+m.increment*(S?1:-1);m.hasEnd&&(C=m.increment>0?Ot.clamp(C,b,m.endValue):Ot.clamp(C,m.endValue,b),C===b&&o.setDynamicVariableToggleIsForward(f,void 0),m.repeat?C===m.endValue&&(C=b):(C===b||C===m.endValue)&&o.setDynamicVariablePlayState(f,"Paused")),C!==x&&(l.push(f),o.updateVariable(f,C),this.eventManager.requestRender())}else if(m.dynamicVariableType==="time"){let x=o.getVariable(f),S=Xee(s,m);if(typeof x=="object"&&"textValue"in x&&typeof S=="object"&&"textValue"in S){if(Array.isArray(x.textValue)&&Array.isArray(S.textValue)){if(x.textValue.every((C,T)=>C===S.textValue[T]))continue}else if(x.textValue===S.textValue)continue}else if(x===S)continue;o.updateVariable(f,S),l.push(f),this.eventManager.requestRender()}else{let x=ba.isTextValue(m.endValue)?zre(m.endValue.textValue):m.endValue,S=o.getDynamicVariableToggleIsForward(f)??!0,C=y+(a-p)/1e3*(m.dynamicVariableType==="timer"?-1:1)*(S?1:-1);C=Math.max(C,0),m.hasEnd&&(C=m.dynamicVariableType==="stopwatch"?Ot.clamp(C,b,x):Ot.clamp(C,x,b),C===b&&o.setDynamicVariableToggleIsForward(f,void 0),m.repeat?Math.abs(C-x)<(m.format==="number3decimal"?1e-4:.1)&&(C=b):(Math.abs(C-b)<(m.format==="number3decimal"?1e-4:.1)||Math.abs(C-x)<(m.format==="number3decimal"?1e-4:.1))&&o.setDynamicVariablePlayState(f,"Paused")),C!==y&&(l.push(f),this.dynamicVars[h].timerSeconds=C,o.updateVariable(f,Bs.getFormattedTimerTime(C,m)),this.eventManager.requestRender())}}}let c=!1;o.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=o.mouseProperty,c=!0);let d=!1;o.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=o.raycastProperty,d=!0),this.events.forEach(h=>{(l.includes(h.data.variableId)||u.find(f=>f.objId===h.data.objectId&&f.property===h.data.property)||h.data.variableId==="mouseProperty"&&c||h.data.variableId==="raycastProperty"&&d)&&(h.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()}}pause(){this.isOutOfFocus||(this.isOutOfFocus=!0,this.pauseTime=Date.now())}resume(){if(!this.isOutOfFocus)return;this.isOutOfFocus=!1;let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.eventContext.page.traverseEntity(t=>{var r;(r=t.data)==null||r.events.filter(i=>i.data.type==="VariableChange"&&!i.data.disabled).forEach(i=>{this.events.push(new h1t(i.id,i.data,t,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.propertiesToWatch=this.events.filter(t=>t.data.variableId==="objectProperty"&&t.data.objectId!==null).map(t=>({objectId:t.data.objectId,property:t.data.property,prevValue:null}));let e=this.eventContext.sharedAssets;this.sharedVariables.forEach(({id:t,data:r})=>{if(!("dynamicVariableType"in r)){this.events.find(n=>n.data.variableId===t)&&this.variablesToWatch.push({id:t,prevValue:e.getVariable(t)});return}let i;if(r.dynamicVariableType==="timer"||r.dynamicVariableType==="stopwatch"){let n;if(ba.isTextValue(r.value)&&Array.isArray(r.value.textValue)){let a=r.value.textValue;a.length===3?n=a[2]+a[1]*60+a[0]*3600:n=a[1]+a[0]*60}else n=r.value;i=n,this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:r,timerSeconds:n,startValue:i})}else r.dynamicVariableType==="time"&&e.updateVariable(t,Xee(new Date,r)),r.dynamicVariableType==="counter"&&(i=ba.isTextValue(r.value)?zre(r.value.textValue):r.value),this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:r,startValue:i})}),this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},h1t=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Mn(t,t.actions,i,n,a,r)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispose(){ta(this.actions)}};function zre(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var f1t="https://unpkg.com/@splinetool/runtime@1.9.82/build/",p1t="https://unpkg.com/@splinetool/navmesh-wasm@1.9.82/build/",m1t=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${f1t}' + 'navmesh.js'),
		fetch('${p1t}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,g1t=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,v1t=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,y1t=.001,b1t={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},FCe,Lr,da;plt.then(e=>{FCe=e,Lr=new e.Vec3,da=new e.Vec3});var _1t=new k,w1t=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=r=>{if(ar.length!==1)return;let{raycaster:i,page:n}=this.eventContext;this.eventContext.updateRaycaster(r);let a=n.raycastWithClones(i);if(a.length!==0){if(this.gameControl){let o=_1t.copy(this.gameControl.colliderWorldPosition);o.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(o,a[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(r,i)=>n=>{var h,f,g,p,m,y,b;let a;if(n instanceof Us)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;a=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof _a)a=n.object;else if(a=n,((h=a.dataPatched.cloner)==null?void 0:h.disabled)===!1&&((f=a.dataPatched.cloner)==null?void 0:f.hideBase)&&((g=a.dataPatched.physics)==null?void 0:g.fusedBody)!==!0)return!0;if(i&&!a.userData.navmesh)return;let o=a.dataPatched;if(!o.visible&&((p=o.physics)==null?void 0:p.enabled)!==!0)return!0;n.updateMatrixWorldSVD();let s=l2(o),l=a.userData.hasDestroy,u=a.userData.hasDrag,c=!1,d=!1;for(let w of o.events)w.data.disabled!==!0&&(w.data.type==="GameControl"?c=!0:w.data.type==="Follow"&&(d=!0));if(c||s||d||l||u)return!0;if(this.usePhysics&&((m=o.physics)==null?void 0:m.rigidBody)==="dynamic"){if(this.usePhysics&&((y=o.physics)!=null&&y.fusedBody))return!0}else if("geometry"in n&&n.geometry&&r.push(Sm(n.geometry,n.matrixWorld)),this.usePhysics&&((b=o.physics)==null?void 0:b.fusedBody))return n.traverseObject((w,x)=>{var T,M;if(x===0)return;let S;if(w instanceof Us)if(w.objectForSample){if(w.objectForSample.dataPatched.physics.fusedBody)return;S=w.object}else return w.object.dataPatched.physics.fusedBody===!0&&w.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(w instanceof _a)S=w.object;else if(S=w,(T=w.dataPatched.cloner)==null?void 0:T.hideBase)return!0;let C=S.dataPatched;if(!C.visible&&((M=C.physics)==null?void 0:M.enabled)!==!0)return!0;"geometry"in w&&w.geometry&&r.push(Sm(w.geometry,w.matrixWorld))}),!0},this.traverseNoPhysics=(r,i)=>n=>{let a;if(n instanceof Us)return;n instanceof _a?a=n.object:a=n;let o=a.dataPatched;if(o.physics.enabled==="visibility"?!o.visible:!o.physics.enabled)return!0;if(i&&!a.userData.navmesh)return;let s=n.geometry,l=a.userData.hasDestroy===!0,u=a.userData.hasDrag===!0;if(l2(o)||l||u||a.dataPatched.events.some(c=>c.data.disabled!==!0&&c.data.type==="GameControl"))return!0;s&&r.push(Sm(s,n.matrixWorld))},this.navmeshWasm=FCe,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?m1t:g1t)+v1t])),this._worker=new Worker(this._workerURL)}init(e,t,r){this.gameControl=t,this.eventContext=r,this.setDefaultQueryExtent(new k().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(r.page,e,i=>{this.buildFromNavmeshData(i.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,r){t.objects.forEach(l=>{var c;let u=e.scene.find(l);u.traverseEntity(d=>{d.userData.navmesh=!0}),(c=u.cloner)==null||c.traverseObject(d=>{d.userData.navmesh=!0})});let i=[],n=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,t.zones==="custom");if(e.traverseChildren(n),t.objects.forEach(l=>{var c;let u=e.scene.find(l);u.traverseEntity(d=>{d.userData.navmesh=void 0}),(c=u.cloner)==null||c.traverseObject(d=>{d.userData.navmesh=void 0})}),i.length===0)return!1;let a=V0(i),{positions:o,triIndices:s}=mI(a.getAttribute("position"),a.getIndex());return this._worker.postMessage([o,o.length/3,s,s.length,{...b1t,...t}]),this._worker.onmessage=r,!0}createDebugNavGeometry(){let e,t,r=this.navMesh.getDebugNavMesh(),i=r.getTriangleCount(),n=new Uint32Array(i*3),a=new Float32Array(i*3*3);for(e=0;e<i*3;e++)n[e]=e;for(e=0;e<i;e++)for(t=0;t<3;t++){let s=r.getTriangle(e).getPoint(t);a[e*9+t*3+0]=s.x,a[e*9+t*3+1]=s.y,a[e*9+t*3+2]=s.z}let o=new Wt;return o.setIndex(new tr(n,1)),o.setAttribute("position",new tr(a,3)),o}getClosestPoint(e){return Lr.x=e.x,Lr.y=e.y,Lr.z=e.z,this.navMesh.getClosestPoint(Lr)}getClosestPointToRef(e,t){Lr.x=e.x,Lr.y=e.y,Lr.z=e.z;let r=this.navMesh.getClosestPoint(Lr);t.set(r.x,r.y,r.z)}getRandomPointAround(e,t){return Lr.x=e.x,Lr.y=e.y,Lr.z=e.z,this.navMesh.getRandomPointAround(Lr,t)}getRandomPointAroundToRef(e,t,r){Lr.x=e.x,Lr.y=e.y,Lr.z=e.z;let i=this.navMesh.getRandomPointAround(Lr,t);r.set(i.x,i.y,i.z)}moveAlong(e,t){return Lr.x=e.x,Lr.y=e.y,Lr.z=e.z,da.x=t.x,da.y=t.y,da.z=t.z,this.navMesh.moveAlong(Lr,da)}moveAlongToRef(e,t,r){return Lr.x=e.x,Lr.y=e.y,Lr.z=e.z,da.x=t.x,da.y=t.y,da.z=t.z,this.navMesh.moveAlong(Lr,da)}computePath(e,t){let r=this.getClosestPoint(t);if(da.x=r.x,da.y=r.y,da.z=r.z,Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)+Math.pow(t.z-r.z,2))>this.getDefaultQueryExtent().y)return[];this.getClosestPoint(e);let i=this.navMesh.computePath(Lr,da),n=i.getPointCount(),a=[];for(let o=0;o<n;o++){let s=i.getPoint(o);a.push(new k(s.x,s.y,s.z))}return a}createCrowd(e,t){return new x1t(this,e,t)}setDefaultQueryExtent(e){Lr.x=e.x,Lr.y=e.y,Lr.z=e.z,this.navMesh.setDefaultQueryExtent(Lr)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,r=this.navmeshWasm._malloc(t),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,r,t);i.set(e);let n=new this.navmeshWasm.NavmeshData;n.dataPointer=i.byteOffset,n.size=e.length,this.navMesh.buildFromNavmeshData(n),this.navmeshWasm._free(i.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),r=new Uint8Array(e.size);return r.set(t),this.navMesh.freeNavmeshData(e),r}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,r){return Lr.x=e.x,Lr.y=e.y,Lr.z=e.z,this.navMesh.addCylinderObstacle(Lr,t,r)}addBoxObstacle(e,t,r){return Lr.x=e.x,Lr.y=e.y,Lr.z=e.z,da.x=t.x,da.y=t.y,da.z=t.z,this.navMesh.addBoxObstacle(Lr,da,r)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},x1t=class{constructor(e,t,r){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,r,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,r){let i=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;let n=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),i);return this.transforms.push(r),this.agents.push(n),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new k(0,0,0)),n}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let r=this.crowd.getAgentPosition(e);t.set(r.x,r.y,r.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let r=this.crowd.getAgentVelocity(e);t.set(r.x,r.y,r.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let r=this.crowd.getAgentNextTargetPath(e);t.set(r.x,r.y,r.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let r=this.agents.indexOf(e);r>-1&&(this._agentDestinationArmed[r]=!0,this._agentDestination[r].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let r=this.crowd.getAgentParameters(e);t.radius!==void 0&&(r.radius=t.radius),t.height!==void 0&&(r.height=t.height),t.maxAcceleration!==void 0&&(r.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(r.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(r.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(r.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(r.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,r)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=y1t)return;let t=1/60,r=10;{let i=Math.floor(e/t);i>r&&(i=r),i<1&&(i=1);let n=e/i;for(let a=0;a<i;a++)this.crowd.update(n)}for(let i=0;i<this.agents.length;i++){let n=this.agents[i],a=this.getAgentPosition(n);if(this.transforms[i].copy(a),this._agentDestinationArmed[i]){let o=a.x-this._agentDestination[i].x,s=a.z-this._agentDestination[i].z,l=this.reachRadii[i],u=this._agentDestination[i].y-this.reachRadii[i],c=this._agentDestination[i].y+this.reachRadii[i],d=o*o+s*s;a.y>u&&a.y<c&&d<l*l&&(this.onReachTarget(n,this._agentDestination[i]),this._agentDestinationArmed[i]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,r=this.crowd.getCorners(e),i=r.getPointCount(),n=[];for(t=0;t<i;t++){let a=r.getPoint(t);n.push(new k(a.x,a.y,a.z))}return n}dispose(){this.crowd.destroy()}};function S1t(e){let t=!1;return e.scene.objects.forEach(r=>{r.data.type==="Page"&&!t&&r.data.publish.gameControlObject&&TM.traverseModuleInstances(e,r.id,(i,n,a)=>{for(let o of a)o.data.type==="GameControl"&&o.data.navmesh.enabled&&(t=!0)})}),t}var C1t={type:"change"},Bre={type:"changeZoom"},E1t={type:"changePan"},dy={type:"start"},hy={type:"end",changed:!0},M1t={type:"end",changed:!1},oL=new ur,Lre=new ze,P1t=2*Math.PI,T1t=1e-8,A1t=.01,sL=new k,CO=new ze,lL=new k,EO=new ur,Fre=new dt,O1t={type:"requestRender"},NCe=class extends xa{constructor(e,t,r={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=r,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,Cs.DOLLY_ROTATE,Cs.PAN],this.offset=new k,this.eye=new k,this.lastPosition=new k,this.lastQuaternion=new ur,this.current=new ze,this.overShoot=new ze,this.overRatio=new ze,this.spherical=new dJ,this.sphericalDelta=new dJ,this.panOffset=new k,this.panLeftV=new k,this.panUpV=new k,this.panV=new k,this.rotateStart=new ze,this.rotateEnd=new ze,this.rotateDelta=new ze,this.panStart=new ze,this.panEnd=new ze,this.panDelta=new ze,this.dollyStart=new ze,this.dollyEnd=new ze,this.dollyDelta=new ze,this.rotationRangeFactor=new ze,this.panRangeFactor=new ze,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=i=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=i.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(lL,EO,sL),this.offset.copy(lL).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&this.object.isPerspectiveCamera&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(oL.copy(EO).invert()),this.panOffset.applyQuaternion(oL),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(EO),this.panOffset.applyQuaternion(EO)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),lL.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(Fre.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(Fre));let i=this.spherical.phi%P1t;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(li.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let n=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-n,this.sphericalDelta.phi*=1-n}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>A1t||8*(1-this.lastQuaternion.dot(this.object.quaternion))>T1t?(this.dispatchEvent(C1t),this.object.dispatchEvent(O1t),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&ts?this.onPointerDownTouch(i):this.onPointerDownMouse(i),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(dy),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&ts||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,sL.subVectors(this.position0,this.target0),this.spherical.setFromVector3(sL),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?CO.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):CO.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(CO).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(Lre,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(CO).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{this.enabled!==!1&&(this.checkRaycastLock()||(i.pointerType==="touch"||i.pointerType==="pen"&&ts?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation()))},this.onPointerUp=i=>{this.isPointerDown=!1,ar.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),ar.length>1&&i.preventDefault(),this.hasChange?this.dispatchEvent(hy):this.dispatchEvent(M1t),this.state=-1,i&&(i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&ts||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[i.button]:n=this.mouseButtonsPlay[i.button],n){case 0:if(i.altKey===!0&&!i.shiftKey&&!BA(i)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(BA(i)||i.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(BA(i)||i.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(i);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(i);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(i);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=i=>{switch(ar.length>1&&i.preventDefault(),this.touches[ar.length-1]){case Cs.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case Cs.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case Cs.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case Cs.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(ar.length>1&&i.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(i),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=SM(()=>this.dispatchEvent(hy),33),this.onMouseWheel=i=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(dy),this.handleMouseWheel(i),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=i=>{if(i.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!wP)if(i.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(dy),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(hy)},this.onContextMenu=i=>{i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{this.enabled!==!1&&(this.key=i.key,i.key===" "&&this.dispatchEvent(dy))},this.onKeyUp=i=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&i.key==="Alt"&&this.onPointerUp(ar[0]),i.key===" "&&this.dispatchEvent(hy))},this.onPointerHover=i=>{i.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(i,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.initialSphericalRadius=this.spherical.radius,this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let r=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=r**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/this.maxZoom,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(oL.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+i.y,this.maxV=e.panVerticalOffset.max+i.y,this.minH=-e.panHorizontalOffset.min+i.x,this.maxH=e.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=tp(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=tp(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=tp(tp(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=tp(tp(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=Cs.ROTATE),e.panTouches===1&&(this.touches[0]=Cs.PAN),e.orbitTouches===2&&(this.touches[1]=Cs.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=Cs.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=Cs.ROTATE),e.panTouches===3&&(this.touches[2]=Cs.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,i,n,a,o,s){this.overShoot.set(0,0);let l,u,c;e instanceof k?(l=e.x,u=e.y,this.current.set(this.target.x,this.target.y),c=!0):(l=e.theta,u=e.phi,this.current.set(tp(this.spherical.theta),tp(this.spherical.phi)),c=!1),r===0&&(this.current.x+=l,this.current.y+=u),(t===3||t===2)&&(!c&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x)),(t===3||t===1)&&(this.current.y>a?this.overShoot.y=a-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y)),c||(this.overShoot.x=tp(this.overShoot.x),this.overShoot.y=tp(this.overShoot.y)),r!==0?(this.overRatio.copy(this.overShoot).divide(s),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===1&&(this.overRatio.x=Nre(Math.abs(this.overRatio.x)),this.overRatio.y=Nre(Math.abs(this.overRatio.y))),this.isPointerDown||r===1?r===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),u*this.overShoot.y<0&&!this.phiIsFree&&(u*=1-this.overRatio.y)):r===2&&(!c&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||c&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(u=this.overShoot.y*.05),c?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):c?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,u+=this.overShoot.y),e instanceof k?(e.x=l,e.y=u):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=u))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/r.clientHeight,this.object.matrixWorld),this.panUp(2*t*n/r.clientHeight,this.object.matrixWorld)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrixWorld));this.dispatchEvent(E1t)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(Bre)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(Bre)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(dy),this.dollyOut(e),this.dispatchEvent(hy)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(dy),this.dollyIn(e),this.dispatchEvent(hy)}setZoom(e){if(this.dispatchEvent(dy),this.object.isPerspectiveCamera){let t=this.initialSphericalRadius/e/this.spherical.radius;this.scale=t}else this.object.isOrthographicCamera&&(this.object.zoom=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0);this.dispatchEvent(hy)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(Lre,-this.object.angleOffsetFromUp);let r=this.domElement,i=this.useWindowEvents?window.innerHeight:r.clientHeight,n=2*Math.PI*this.rotateDelta.x/i,a=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(n),this.rotateUp(a),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(llt===!1&&BA(e)===!1&&clt(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1||this.gesture)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(ar.length===2){let e=.5*(ar[0].pageX+ar[1].pageX),t=.5*(ar[0].pageY+ar[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(ar[0].pageX,ar[0].pageY)}handleTouchStartPan(){if(ar.length===2){let e=.5*(ar[0].pageX+ar[1].pageX),t=.5*(ar[0].pageY+ar[1].pageY);this.panStart.set(e,t)}else this.panStart.set(ar[0].pageX,ar[0].pageY)}handleTouchStartDolly(){let e=ar[0].pageX-ar[1].pageX,t=ar[0].pageY-ar[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(ar.length===2){let r=Kz(e),i=.5*(e.pageX+r.x),n=.5*(e.pageY+r.y);this.rotateEnd.set(i,n)}else{if(e.pointerId!==ar[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(ar.length===2){let t=Kz(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.panEnd.set(r,i)}else{if(e.pointerId!==ar[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=Kz(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function tp(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function Nre(e){return 1-Math.pow(1-e,4)}var Ure=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.page=i,this.currentIntersectedObjects=[],this.actions=Mn(t,t.actions,i,n,a,r),this.target=t.target,this.triggeringObjects=[];for(let o of t.triggeringObjects){let s=i.scene.find(o);s&&this.triggeringObjects.push(s)}}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){ta(this.actions)}dispatch(){this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.actions.Transition.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.SwitchCamera.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}},Hr;glt.then(e=>Hr=e);var vn=new k,wl=new ur,Lg=new k,uL=new Bn(0,0,0,"YXZ"),Vre=new Bn(0,0,0,"XYZ"),xl=new k,cL=new k,dL=new k(1,1,1),j1=new ur,MO=new dt,kre=new dt,R1t={type:"updateMatrix"},qre=new ur,hL=new Lo,Xk={type:"beginEvent",eventName:"Collision"},D1t={type:"beginEvent",eventName:"Trigger"};function I1t(e){if(TM.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((r,i)=>{if(i.events){if(Array.isArray(i.events)){for(let n of i.events)if(n.data.disabled!==!0&&n.data.type==="GameControl"&&n.data.collisionEnabled){t=!0;break}}else for(let n of Object.values(i.events))if(n.disabled!==!0&&n.type==="GameControl"&&n.collisionEnabled){t=!0;break}}}),t}var l2=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),j1t=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==Hr.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[r,i,n]=this.rigidBodyToMesh.get(t.handle);if(vn.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),wl.copy(t.rotation()),r.matrixWorld.compose(vn,wl,i),r.hasNonUniformScale&&r.matrixWorld.multiply(r.shearScale),r.dispatchEvent(R1t),n){let a=r.cloner;if(a&&a.objectForSample===void 0){a.matrixWorld.copy(r.matrixWorld);for(let o of a.children)o.updateMatrixWorld(!0)}for(let o of r.children)o.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,r,i)=>{var o,s,l,u;if(i===!1)return;let n,a;if(this.sensorToTriggerEvent[t]?(n=this.sensorToTriggerEvent[t],a=this.sharedGameControlGlobals.colliderToEntity.get(r)):this.sensorToTriggerEvent[r]&&(n=this.sensorToTriggerEvent[r],a=this.sharedGameControlGlobals.colliderToEntity.get(t)),n&&a&&n.isValidTriggeringObject(a)){n.dispatch();return}for(let c=this.sharedGameControlGlobals.createdObjects.length-1;c>=0;c--){let d=this.sharedGameControlGlobals.createdObjects[c];if(d.userData.hasCollisionDestroy&&(((o=d.rigidBody)==null?void 0:o.collider(0).handle)===t||((s=d.rigidBody)==null?void 0:s.collider(0).handle)===r)){this.sharedGameControlGlobals.createdObjects.splice(c,1),d.removeFromParent(),requestAnimationFrame(()=>{var h;return(h=this.sharedGameControlGlobals.rapierWorld)==null?void 0:h.removeRigidBody(d.rigidBody)});break}}if(((l=this.gameControl)==null?void 0:l.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let c=this.sharedGameControlGlobals.colliderToEntity.get(r),d=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(d===void 0)return;for(let h of d)h.data.target==="character"&&this.dispatchCollisionEvent(h,c,r)}else if(((u=this.gameControl)==null?void 0:u.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(r)){let c=this.sharedGameControlGlobals.colliderToEntity.get(t),d=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(d===void 0)return;for(let h of d)h.data.target==="character"&&this.dispatchCollisionEvent(h,c,t)}else{let c=this.sharedGameControlGlobals.colliderToEntity.get(t),d=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(d!==void 0)for(let g of d)g.data.target==="scene"&&this.dispatchCollisionEvent(g,c,t);let h=this.sharedGameControlGlobals.colliderToEntity.get(r),f=this.sharedGameControlGlobals.entityToCollisionEvents[h==null?void 0:h.uuid];if(f!==void 0)for(let g of f)g.data.target==="scene"&&this.dispatchCollisionEvent(g,h,r)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=ACe,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",r=>{"gamepad"in r.data&&"axes"in r.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(r.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var r,i;let t=e.dataPatched;for(let n of t.events){if(n.data.disabled===!0)continue;let a=(i=(r=n.data.actions)==null?void 0:r.find(o=>o.data.type==="Destroy"))==null?void 0:i.data;if(a)for(let o of a.objects){let s=this.page.scene.find(o);s&&(s.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let r of t.events)if(!(r.data.disabled===!0||r.data.type!=="DragDrop"))for(let i of r.data.objects){let n=this.page.scene.find(i);n&&(n.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var u,c;let r,i=t instanceof zE,n=t instanceof BE;if(t instanceof Us||i||n)return;t instanceof _a?r=t.object:r=t;let a=r.dataPatched;if(((u=a.physics)==null?void 0:u.enabled)==="visibility"?!a.visible:!((c=a.physics)!=null&&c.enabled))return!0;let o=t.geometry,s=r.userData.hasDestroy===!0,l=r.userData.hasDrag===!0;if(l2(a)||s||l||r.dataPatched.events.some(d=>d.data.disabled!==!0&&(d.data.type==="GameControl"||d.data.type==="Follow")))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;o&&e.push(Sm(o,t.matrixWorld))}),e.length>0){let t=V0(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new IE(t)}}addRigidBody(e,t,r){if(RCe(e.matrixWorld))return;let i=[],n="geometry"in e?e.geometry:void 0,a=t.dataPatched;if((n==null?void 0:n.getAttribute("position"))!==void 0&&i.push(Sm(n,e.shearScale)),a.physics.fusedBody){let o=this.gatherChildrenGeom(e,i);e.traverseObject(o),e.children.forEach(l=>l.updateMatrixWorld(!0));let s=e.cloner;s&&s.objectForSample===void 0&&a.physics.rigidBody==="dynamic"&&(s.traverseObject(o),s.children.forEach(l=>l.updateMatrixWorld(!0)))}if(i.length>0){let o,s=!r.fromCreate&&a.physics.rigidBody==="dynamic"||r.fromCreate&&r.dynamic;s?(o=Hr.RigidBodyDesc.dynamic(),o.setLinearDamping(a.physics.damping).setAngularDamping(a.physics.damping).setAdditionalMass(1e-9).setGravityScale(a.physics.gravityScale).enabledRotations(...a.physics.enabledRotation).enabledTranslations(...a.physics.enabledTranslation)):(r.hasTransformAnim||r.hasFollow||r.hasDrag)&&!r.fromCreate?(o=Hr.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):o=Hr.RigidBodyDesc.fixed();let l=V0(i);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(vn,wl,Lg),e.position0=vn.clone().divideScalar(this.pixelsPerMeter),e.rotation0=wl.clone(),vn.divideScalar(this.pixelsPerMeter),o.setTranslation(vn.x,vn.y,vn.z).setRotation(wl),n?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale(Lg.x/this.pixelsPerMeter,Lg.y/this.pixelsPerMeter,Lg.z/this.pixelsPerMeter);let u=this.sharedGameControlGlobals.rapierWorld.createRigidBody(o);s&&this.rigidBodyToMesh.set(u.handle,[e,Lg.clone(),a.physics.fusedBody]);let c=!(a.geometry===void 0||a.geometry.type==="SubdivGeometry"||a.geometry.type==="NonParametricGeometry"||a.geometry.type==="BooleanGeometry"||a.geometry.type==="VectorGeometry"||a.geometry.type==="StarGeometry"||a.geometry.type==="RectangleGeometry"||a.geometry.type==="EllipseGeometry"||a.geometry.type==="TriangleGeometry"||a.geometry.type==="TorusGeometry"||a.geometry.type==="HelixGeometry");try{this.addCollider(u,a.physics,l,t,c)}catch{try{this.addCollider(u,a.physics,l,t,!1)}catch(d){console.error(d)}}e.rigidBody=u}}addBoundsTree(e){var r,i;let t=[];if(((r=e.geometry)==null?void 0:r.getAttribute("position"))!==void 0&&((i=e.geometry)==null?void 0:i.getAttribute("position").count)>0&&t.push(Sm(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(n=>n.updateMatrixWorld(!0)),t.length>0){let n=V0(t,!1);e.bvhGeometry=n,n.getAttribute("position").count>0&&(e.bvhGeometry.boundsTree=new IE(n),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e))}}addCollider(e,t,r,i,n=!0){var s,l;if((r==null?void 0:r.getAttribute("position").count)===0||((s=r==null?void 0:r.getIndex())==null?void 0:s.count)===0)return;let a;r&&(t.colliderType==="trimesh"?a=Hr.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array):a=Hr.ColliderDesc.convexMesh(r.getAttribute("position").array,n?r.getIndex().array:void 0)),a.setFrictionCombineRule(Hr.CoefficientCombineRule.Average).setRestitutionCombineRule(Hr.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let o=this.sharedGameControlGlobals.rapierWorld.createCollider(a,e);this.sharedGameControlGlobals.colliderToEntity.set(o.handle,i),(l=this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid])!=null&&l.some(u=>u.target==="scene")&&o.setActiveEvents(Hr.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(r,i)=>{var s;if(i===0)return;let n;if(r instanceof Us)if(r.objectForSample){if(r.objectForSample.dataPatched.physics.fusedBody)return;n=r.object}else return r.object.dataPatched.physics.fusedBody===!0&&r.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(r instanceof _a)n=r.object;else if(n=r,(s=n.dataPatched.cloner)==null?void 0:s.hideBase)return!0;let a=n.dataPatched;if(a.physics.enabled==="visibility"?!a.visible:!a.physics.enabled)return!0;i===1?e.hasNonUniformScale?r.matrixWorld.multiplyMatrices(e.shearScale,r.hiddenMatrix):r.matrixWorld.copy(r.hiddenMatrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.hiddenMatrix),r.matrixWorld.multiply(r.matrix);let o=r.geometry;(o==null?void 0:o.getAttribute("position"))!==void 0&&t.push(Sm(o,r.matrixWorld))}}activate(e){var h,f;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,r=!1,i=5,n=8,a=9,o="drag",s=this.page.data.publish.gameControlObject,l=s!==null?this.page.find(s):null,u=null;if(l)for(let g of l.data.events){if(g.data.disabled||g.data.type!=="GameControl")continue;let p=l;for(;this.usePhysics&&((h=p=p.parent)==null?void 0:h.parent)!==null;)(f=p.data.physics)==null||f.fusedBody;g.data.collisionEnabled&&(this.needsCollisionDetection=!0),u===null&&(u=g.data)}if(this.page.traverseEntity(g=>{for(let p of g.dataPatched.events)if(p.data.disabled===!1&&p.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),l&&u&&(l.data.visible===!0||l.data.physics.enabled===!0)){r=r||u.camera===t.uuid||l.uuid===t.uuid;let g=new OCe(l,this.renderer.domElement,u,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&u.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=g,i=u.joystickPosLoc,n=u.joystickRotLoc,a=u.jumpTouchButtonLoc,o=u.rotByTouch,ts&&u.touchControl&&(this.joystickToGameControls[i]="pos",u.moveMode==="walk"&&(this.joystickToGameControls[a]="jmp"),o==="joystick"&&(this.joystickToGameControls[n]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let g=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new w1t(this.usePhysics,this.isExport);let p;g.collider.type==="sphere"?p=g.collider.radius*2:p=g.collider.height,p=Math.floor(p/g.navmesh.ch-1),this.navigationMeshWrapper.init({...g.navmesh,walkableHeight:p},this.gameControl,this.eventContext)}}if(r===!1){let{enableRotate:g,enablePan:p,enableZoom:m,autoRotate:y,hoverRotatePanMode:b}=this.eventManager.publish.orbitControls;(g||p||m||y||b!==0)&&(this.orbitControls=new NCe(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let c=this.renderer.domElement.width/this.renderer.getPixelRatio(),d=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((g,p)=>{let m=document.body.appendChild(document.createElement("div")),[y,b,w]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[p],x=(c-5*y)/4+y,S={},C=g==="jmp",T=C?0:y;p<10?(p<5?S.top=T/2:S.bottom=T/2,S.left=T/2+p%5*x):p===10?(S.left=T/2,S.top=d/2):(S.right=T/2,S.top=d/2),S.top?S.top-=b[1]:S.bottom+=b[1],S.left?S.left+=b[0]:S.right-=b[0];for(let P in S)S[P]+="px";if(C){let P=m.appendChild(document.createElement("div"));Object.assign(P.style,S,{position:"absolute",width:y+"px",height:y+"px",backgroundColor:`rgba(255,255,255,${w==="show"?.4:0})`,zIndex:"9999",borderRadius:y+"px",border:w==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let O=y/16*16*.4;w==="show"&&(P.innerHTML=`
						<svg width="${O}" height="${y*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),P.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),P.addEventListener("touchend",j=>j.preventDefault()),this.joysticks[p]=[void 0,m];return}let M={zone:m,mode:"static",position:S,size:y};w==="hide"&&(M.restOpacity=0);let A=Wyt.create(M);A.on("move",(P,O)=>{let j=this.gameControl;g==="pos"?O.force<.2?j.moveForce=0:(j.movementState.movePosZ=Math.sin(-O.angle.radian),j.movementState.movePosX=Math.cos(-O.angle.radian),O.force>1.2?j.movementState.run=1:j.movementState.run=0,O.force<.3?j.moveForce=(O.force-.2)/.1:j.moveForce=1):g==="rot"&&(O.force<.2?j.rotForce=0:(j.movementState.rotPosX=O.vector.y,j.movementState.rotPosY=-O.vector.x,O.force<.3?j.rotForce=(O.force-.2)/.1:j.rotForce=1)),this.requestRender()}),A.on("end",(P,O)=>{let j=this.gameControl;g==="pos"?(j.movementState.movePosZ=0,j.movementState.movePosX=0,j.moveForce=1):g==="rot"&&(j.movementState.rotPosX=0,j.movementState.rotPosY=0,j.rotForce=1)}),this.joysticks[p]=[A,m]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(g=>g.initialDisabled=!1)},80)}initPhysics(){var o;(o=this.sharedGameControlGlobals.rapierWorld)==null||o.free(),this.sharedGameControlGlobals.rapierWorld=new Hr.World(new Hr.Vector3(0,this.gravity,0)),this.events=new Hr.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(s=>{var y,b,w,x;let l;if(s instanceof Us)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;l=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof _a)l=s.object;else{if(s instanceof BE||s instanceof zE)return;if(l=s,((y=l.dataPatched.cloner)==null?void 0:y.disabled)===!1&&((b=l.dataPatched.cloner)==null?void 0:b.hideBase)&&((w=l.dataPatched.physics)==null?void 0:w.fusedBody)!==!0)return!0}let u=l.dataPatched,c;for(let S of u.events)S.data.disabled!==!0&&S.data.type==="GameControl"&&(c=S.data);if(!u.physics||(u.physics.enabled==="visibility"?!u.visible:!u.physics.enabled))return!0;s.updateMatrixWorldSVD();let d=l2(u),h=!1,f=l.userData.hasDestroy,g=l.userData.hasDrag,p=!1;for(let S of u.events)if(S.data.disabled!==!0){if(S.data.type==="Collision"){h=!0;let C=new c1t(S.id,S.data,l,this.page,this.sharedAssets,this.eventManager);C.initialDisabled=!0,this.collisionEvents.push(C),this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every(T=>T.id!==S.id)?this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(C):this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[C]}else if(S.data.type==="Follow"){p=!0;let C=S.data.target;s.traverseVisible(T=>{T.userData.isFollowingObj=C})}}u.physics.rigidBody==="dynamic"&&u.physics.fusedBody===!1&&(s.matrixWorldFusedFalse=s.matrixWorld.clone());let m=s.geometry;if(c!==void 0){let S=Hr.RigidBodyDesc.kinematicPositionBased();(s.hasNonUniformScale?s.matrixWorldRigid:s.matrixWorld).decompose(vn,wl,Lg),s.position0=vn.clone().divideScalar(this.pixelsPerMeter),s.rotation0=wl.clone(),vn.divideScalar(this.pixelsPerMeter),S.setTranslation(vn.x,vn.y,vn.z).setRotation(wl);let C=this.sharedGameControlGlobals.rapierWorld.createRigidBody(S);s.rigidBody=C;let T;c.collider.type==="sphere"?T=Hr.ColliderDesc.ball(c.collider.radius/this.pixelsPerMeter):c.collider.type==="capsule"?T=Hr.ColliderDesc.capsule((c.collider.height/2-c.collider.radius)/this.pixelsPerMeter,c.collider.radius/this.pixelsPerMeter):T=Hr.ColliderDesc.cuboid(c.collider.width/this.pixelsPerMeter/2,c.collider.height/this.pixelsPerMeter/2,c.collider.depth/this.pixelsPerMeter/2),T.setFrictionCombineRule(Hr.CoefficientCombineRule.Average).setRestitutionCombineRule(Hr.CoefficientCombineRule.Average).setDensity(u.physics.density).setFriction(u.physics.friction).setRestitution(u.physics.restitution);let M=this.sharedGameControlGlobals.rapierWorld.createCollider(T,C);this.sharedGameControlGlobals.colliderToEntity.set(M.handle,l),vn.fromArray(c.collider.position).multiply(Lg.setFromMatrixScale(l.matrixWorld)).divideScalar(this.pixelsPerMeter),M.setTranslationWrtParent(vn);let A=new ur().setFromEuler(new Bn().setFromVector3(new k().fromArray(c.collider.rotation)));M.setRotationWrtParent(A),M.setActiveEvents(Hr.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(l,!0)}else u.physics.rigidBody==="dynamic"||d||p||f||g||h?(this.addRigidBody(s,l,{hasFollow:p,hasTransformAnim:d,hasDrag:g}),this.generateSensorColliderDescs(l,u.physics.fusedBody)):(m&&e.push(Sm(m,s.matrixWorld)),u.physics.fusedBody&&s.traverseObject((S,C)=>{var P;if(C===0)return;let T;if(S instanceof Us)if(S.objectForSample){if(S.objectForSample.dataPatched.physics.fusedBody)return;T=S.object}else return S.object.dataPatched.physics.fusedBody===!0&&S.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else{if(S instanceof BE||S instanceof zE)return;if(S instanceof _a)T=S.object;else if(T=S,(P=T.dataPatched.cloner)==null?void 0:P.hideBase)return!0}let M=T.dataPatched;if(M.physics.enabled==="visibility"?!M.visible:!M.physics.enabled)return!0;let A=S.geometry;(A==null?void 0:A.getAttribute("position"))!==void 0&&e.push(Sm(A,S.matrixWorld))}),this.generateSensorColliderDescs(l,u.physics.fusedBody,t));if(((x=u.physics)==null?void 0:x.fusedBody)===!0||c)return!0}),e.length===0)return;let r=V0(e);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let i=Hr.RigidBodyDesc.fixed(),n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(i),a=Hr.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(Hr.CoefficientCombineRule.Multiply).setRestitutionCombineRule(Hr.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(a,n);for(let[s,l]of t){let u=this.sharedGameControlGlobals.rapierWorld.createCollider(s,n);this.sensorToTriggerEvent[u.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let r=new Ure(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),i=new dt().compose(xl.fromArray(t.data.position),j1.setFromEuler(Vre.fromArray(t.data.rotation)),dL);if(t.data.triggerZone==="box"){let n=new dn;n.min.fromArray(t.data.size).multiplyScalar(-.5),n.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([n,i,e,r])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,i,e,r])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,r,i;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(n=>{let a=n;a.matrixWorldFusedFalse&&(a.matrixWorldFusedFalse=void 0),a.rigidBody&&(a.rigidBody=void 0),a.position0&&(a.position0=void 0),a.rotation0&&(a.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(r=this.gameControl)==null||r.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([n,a])=>{n==null||n.destroy(),a.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(i=this.navigationMeshWrapper)==null||i.dispose(),this.navigationMeshWrapper=void 0;for(let n of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))n.forEach(a=>a.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,r){if(!this.isEnabled)return!0;let i=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,i=!1):this.initializationCounter===2&&this.gameControl&&(i=!this.gameControl.update(e,t,r)&&i),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let n=.016666666666666666;if(e===0)i=this.stepPhysics()&&i;else{let a=e/1e3;a<n&&a>n*.55&&(a=n),this.accumulator+=a;let o=performance.now(),s=0,l=6;for(;this.accumulator>=n&&s<l&&(i=this.stepPhysics()&&i,this.accumulator-=n,s++,!(performance.now()-o>n*1e3)););this.accumulator=this.accumulator%n}}return i}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(vn,wl,Lg),uL.setFromQuaternion(wl);let r=t;r.prevR===void 0?(r.prevR=uL.clone(),r.prevT=vn.clone()):(r.prevR.copy(uL),r.prevT.copy(vn)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(vn.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(wl))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,r){var a;let i=((a=this.sharedGameControlGlobals.rapierWorld)==null?void 0:a.getCollider(r))._parent,n;if(t.cloner){for(let o of t.cloner.children)if(o.rigidBody===i){n=o;break}}e.dispatch(n),t.dispatchEvent(Xk)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,r){let i=kre.copy(e.matrixWorld).invert();e.traverseEntity((n,a)=>{if(t===!1&&a===1)return!0;for(let o of n.dataPatched.events)if(o.data.type==="Trigger"&&o.data.disabled!==!0){let s=new Ure(o.id,o.data,n,this.page,this.sharedAssets,this.eventManager),l;if(o.data.triggerZone==="box"?l=Hr.ColliderDesc.cuboid(...o.data.size.map(u=>u/(2*this.pixelsPerMeter))):l=Hr.ColliderDesc.ball(o.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(Hr.ActiveEvents.COLLISION_EVENTS),xl.fromArray(o.data.position),j1.setFromEuler(Vre.fromArray(o.data.rotation)),MO.compose(xl,j1,dL).premultiply(n.matrixWorld),r?(MO.decompose(xl,j1,cL),l.setActiveCollisionTypes(Hr.ActiveCollisionTypes.KINEMATIC_FIXED|Hr.ActiveCollisionTypes.DYNAMIC_FIXED)):(MO.premultiply(i).decompose(xl,j1,cL),e.rigidBody.bodyType()===Hr.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===Hr.RigidBodyType.Fixed?l.setActiveCollisionTypes(Hr.ActiveCollisionTypes.KINEMATIC_FIXED|Hr.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(Hr.ActiveCollisionTypes.KINEMATIC_KINEMATIC|Hr.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),xl.divideScalar(this.pixelsPerMeter),l.setTranslation(xl.x,xl.y,xl.z),l.setRotation(j1),r)r.push([l,s]);else{let u=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[u.handle]=s}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[r,i,n,a]=this.sharedGameControlGlobals.triggers[t];for(let o=0;o<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;o++){let s=this.sharedGameControlGlobals.entitiesWithTransformAnim[o];if(n===s||a.isValidTriggeringObject(Vr.is(s)?s:s.object)===!1)continue;let l=kre.copy(n.matrixWorld).decompose(xl,qre,cL).compose(xl,qre,dL).multiply(i),u=MO.copy(s.matrixWorld).invert().multiply(l);r instanceof dn?e=s.bvhGeometry.boundsTree.intersectsBox(r,u):(hL.radius=r,hL.center.setFromMatrixPosition(u),e=s.bvhGeometry.boundsTree.intersectsSphere(hL)),e?a.currentIntersectedObjects.indexOf(s)===-1&&(a.currentIntersectedObjects.push(s),a.dispatch(),n.dispatchEvent(D1t)):a.currentIntersectedObjects=a.currentIntersectedObjects.filter(c=>c!==s)}}}};function z1t(e){let t=this._clip.duration,r=this._clip.start??0,i=this.loop,n=this.time+e,a=this._loopCount,o=i===tW;if(e===0)return a===-1?n:o&&(a&1)===1?t-(n-r):n;if(i===k1e){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),n>=t||n<r){let s=Math.floor((n-r)/(t-r));n-=(t-r)*s,a+=Math.abs(s);let l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o||(n=e>0?t:r,this.repetitions===1&&(n=t)),this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=n;if(o&&(a&1)===1)return t-(n-r)}return n}var Wre=!1,B1t=class{constructor(e,t,r,i){this.scene=e,this.requestRender=t,this.updateDisplayProgress=r,this.animationInspectorState=i,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=n=>{n.data.type==="Empty"&&n.data.animations&&n.data.animations.forEach((a,o)=>{let s=a[0]+"/";if(Array.isArray(n.identity)?s+=n.identity[0]:s+=n.uuid,this.clipIdToAction[s])return;let l=o6.parse(JSON.parse(a[2]));n.animations[o]=l;let u=this.mixer.clipAction(l,n);Wre===!1&&(Object.getPrototypeOf(u)._updateTime=z1t,Wre=!0),u.clampWhenFinished=!0,this.clipIdToAction[s]=u})},this.mixer=new PZe(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let r=this.scene.find(t);if(!r)return;let i=r.animations.find(a=>a.uuid===e);if(!i)return;let n=this.clipIdToAction[e];!n||(n.stop(),this.mixer.uncacheClip(i),delete this.clipIdToAction[e],r.animations=r.animations.filter(a=>a.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=q1e}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,r=this.clipIdToAction[t];if(r)return e&&(e.repeat>=0&&(r.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(r.loop=tW)),r.play(),r.paused=!1,this.requestRender(),r}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(t=this.animationInspectorState)!=null&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*(this.maxFrames-1)%(this.maxFrames-1))),this.requestRender()}get maxFrames(){return wCe(this.activeClip??void 0)}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let r=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(e/(this.maxFrames-1),.9999)*this.activeClip.duration),this.requestRender(),r&&(this.clipIdToAction[t].paused=!0)}},fL=new WeakMap,L1t=class extends vP{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){let n=new s6(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,a=>{this.decodeDracoFile(a,t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){let n={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){let r=JSON.stringify(t);if(fL.has(e)){let s=fL.get(e);if(s.key===r)return s.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,n=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(n,a).then(s=>(i=s,new Promise((l,u)=>{i._callbacks[n]={resolve:l,reject:u},i.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(s=>this._createGeometry(s.geometry));return o.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),fL.set(e,{key:r,promise:o}),o}_createGeometry(e){let t=new Wt;e.index&&t.setIndex(new tr(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let i=e.attributes[r],n=i.name,a=i.array,o=i.itemSize;t.setAttribute(n,new tr(a,o))}return t}_loadLibrary(e,t){let r=new s6(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,n)=>{r.load(e,i,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{let i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);let n=F1t.toString(),a=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(n){let a=n.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,n){return i._taskLoad>n._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function F1t(){let e,t;onmessage=function(o){let s=o.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise(function(c){e.onModuleLoaded=function(d){c({draco:d})},DracoDecoderModule(e)});break;case"decode":let l=s.buffer,u=s.taskConfig;t.then(c=>{let d=c.draco,h=new d.Decoder,f=new d.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{let g=r(d,h,f,u),p=g.attributes.map(m=>m.array.buffer);g.index&&p.push(g.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:g},p)}catch(g){console.error(g),self.postMessage({type:"error",id:s.id,error:g.message})}finally{d.destroy(f),d.destroy(h)}});break}};function r(o,s,l,u){let c=u.attributeIDs,d=u.attributeTypes,h,f,g=s.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)h=new o.Mesh,f=s.DecodeBufferToMesh(l,h);else if(g===o.POINT_CLOUD)h=new o.PointCloud,f=s.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let p={index:null,attributes:[]};for(let m in c){let y=self[d[m]],b,w;if(u.useUniqueIDs)w=c[m],b=s.GetAttributeByUniqueId(h,w);else{if(w=s.GetAttributeId(h,o[c[m]]),w===-1)continue;b=s.GetAttribute(h,w)}p.attributes.push(n(o,s,h,m,y,b))}return g===o.TRIANGULAR_MESH&&(p.index=i(o,s,h)),o.destroy(h),p}function i(o,s,l){let u=l.num_faces()*3,c=u*4,d=o._malloc(c);s.GetTrianglesUInt32Array(l,c,d);let h=new Uint32Array(o.HEAPF32.buffer,d,u).slice();return o._free(d),{array:h,itemSize:1}}function n(o,s,l,u,c,d){let h=d.num_components(),f=l.num_points()*h,g=f*c.BYTES_PER_ELEMENT,p=a(o,c),m=o._malloc(g);s.GetAttributeDataArrayForAllPoints(l,d,p,g,m);let y=new c(o.HEAPF32.buffer,m,f).slice();return o._free(m),{name:u,array:y,itemSize:h}}function a(o,s){switch(s){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var sv;function N1t(){return sv||(sv=new L1t,sv.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),sv.decoderPending}async function U1t(e){if(sv){let t={attributeIDs:sv.defaultAttributeIDs,attributeTypes:sv.defaultAttributeTypes,useUniqueIDs:!1},r;try{r=await sv.decodeGeometry(new Int8Array(e).buffer,t)}catch(i){console.error(i)}if(r)return{index:r.index?{array:r.index.array}:void 0,attributes:Object.entries(r.attributes).map(([i,n])=>({name:i,itemSize:n.itemSize,array:n.array}))}}return null}async function V1t(e,t){let[r,i]=Mwe(x6.deserialize(new Uint8Array(e)));return Qwe(r),i.result().data}function k1t(e){let t=[];return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="NonParametricGeometry"&&i.geometry.data.draco!==void 0&&t.push(i)}),t}async function q1t(e){for(let t of e){let r=await U1t(t.geometry.data.draco);if(r){let i=t.geometry.data;r.index&&(i.index={array:r.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let n={};r.attributes.forEach(({name:a,array:o,itemSize:s})=>{n[a]={array:o,itemSize:s,type:"Float32Array",normalized:!1}}),i.attributes=n,i.draco=void 0}}}var W1t=class{constructor(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0],this._delay=500,this._distance=2,this._onMouseDown=e=>{let t=[e.clientX,e.clientY],r=new Date().getTime();if(this._clickCount>0){let i=t[0]-this._lastPosition[0],n=t[1]-this._lastPosition[1];Math.sqrt(i*i+n*n)>this._distance&&(this._clickCount=0)}this._lastPosition=t,this._clickCount=r-this._lastTime>this._delay?1:this._clickCount+1,this._lastTime=r},this._onMouseUp=e=>{}}start(e,t=500,r=2){this._target&&this.stop(),this.reset(),this._delay=t,this._distance=r,this._target=e,this._target.addEventListener("pointerdown",this._onMouseDown,!1),this._target.addEventListener("pointerup",this._onMouseUp,!1)}stop(){this._target&&(this._target.removeEventListener("pointerdown",this._onMouseDown,!1),this._target.removeEventListener("pointerup",this._onMouseUp,!1),this._target=void 0)}get clickCount(){return this._clickCount}reset(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0]}},G1t=class{constructor(e,t,r,i,n,a,o,s){this.eventId=e,this.id=t,this.data=r,this.dataEvent=i,this.object=n,this.stage=!1,this.actions=Mn(i,r.actions,a,o,s,n)}disconnect(){ta(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},H1t=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(r,i)=>{this.breakpoints.forEach(n=>{let a=M6.deviceToSize(n.data.size),o=n.dataEvent.orientation==="horizontal"?r:i,s;switch(n.data.operator){case"<":s=o<a[0];break;case">":s=o>a[0];break;case"<>":s=o>a[0]&&o<a[1];break}n.stage!==s&&(n.stage=s,n.stage?n.dispatchIn():n.dispatchOut())})},this.onResizeObserver=new ResizeObserver(r=>{for(let i of r){let{width:n,height:a}=i.contentRect;this.resize(n,a)}})}connect(){let{page:e,sharedAssets:t,domElement:r}=this.eventContext;this.onResizeObserver.observe(r);let i=n=>{var a;if(!(!n.visible||!((a=n.data)!=null&&a.events.length)))for(let{data:o,id:s}of n.data.events)o.disabled||o.type==="Resize"&&o.breakpoints.forEach(({data:l,id:u})=>{try{let c=new G1t(s,u,l,o,n,e,t,this.eventManager);this.breakpoints.push(c)}catch{}})};e.traverseEntity(n=>{var a;(n instanceof Ba||n instanceof Kn)&&((a=n.frame)==null||a.traverse(o=>{i(o)})),i(n)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},$1t=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.userAPIs={},this.events=[],this.onSuccess=({userAPIId:r})=>{this.events.forEach(i=>{i.data.userAPIId===r&&i.dispatchSuccess()})},this.onError=({userAPIId:r})=>{this.events.forEach(i=>{i.data.userAPIId===r&&i.dispatchError()})},this.userAPIs=e.sharedAssets.getUserAPIs()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(r=>r.data.type==="API"&&!r.data.disabled).forEach(r=>{this.events.push(new X1t(r.id,r.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userAPIs).forEach(([e,t])=>{t.on("success",this.onSuccess),t.on("error",this.onError),t.autostart&&t.callUserAPI(this.eventContext.sharedAssets)})}disconnect(){Object.entries(this.userAPIs).forEach(([e,t])=>{t.off("success",this.onSuccess),t.off("error",this.onError)})}},X1t=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.successActions=Mn(t,t.successActions,i,n,a,r),this.errorActions=Mn(t,t.errorActions,i,n,a,r)}dispatchSuccess(){this.dispatchActions(this.successActions)}dispatchError(){this.dispatchActions(this.errorActions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},Y1t=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.userWebhooks={},this.events=[],this.onMessage=({userWebhookId:r})=>{this.events.forEach(i=>{i.data.userWebhookId===r&&i.dispatch()})},this.userWebhooks=e.sharedAssets.getUserWebhooks()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(r=>r.data.type==="WEBHOOK"&&!r.data.disabled).forEach(r=>{this.events.push(new K1t(r.id,r.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userWebhooks).forEach(([e,t])=>{t.connect(),t.on("message",this.onMessage)})}disconnect(){Object.entries(this.userWebhooks).forEach(([e,t])=>{t.off("message",this.onMessage),t.disconnect()})}},K1t=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Mn(t,t.actions,i,n,a,r)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}};function Q1t(){let e=document.createElement("textarea");return e.style.position="fixed",e.style.top="200px",e.style.left="400px",e.style.zIndex="-1",e.style.border="1px solid rgba(255,0,0,0.5)",e.style.width="10px",e.style.height="500px",e.style.color="white",e.style.opacity="0.5",e.style.background="transparent",e.style.display="none",e.style.margin="0px",e.style.padding="0px",e.style.boxSizing="content-box",e.style.pointerEvents="none",e}var J1t=new k(0,0,1),Gre=new k,Hre=new k,$re=new xn,Z1t=class{constructor(e,t,r,i,n){this.containerScene=e,this.raycaster=t,this.sharedAssets=r,this.requestRender=i,this.onExit=n,this.htmlInput=null,this.virtualInput=null,this.helper=new MSe,this.doubleClickHandler=new W1t,this.isDragging=!1,this.plane=new So,this.caretInterval=0,this.planeIntersection=new k,this.projected=new ze,this._lastIndex=0,this._isFirstDragMove=!1,this.selectionOnDragStart=0,this.onTextMaterialChanged=()=>{var o;let a=(o=this.virtualInput)==null?void 0:o.data;if(this.virtualInput!==void 0&&a){let s=a.material,l=typeof s=="string"?this.sharedAssets.data.materials[s]:s,u=ovt(l,this.sharedAssets);this.helper.setCaretColor(u)}},this.stopAnimateTextCursor=()=>{clearInterval(this.caretInterval),this.helper&&(this.helper.caretMesh.visible=!1)},this.startAnimateTextCursor=()=>{this.stopAnimateTextCursor(),this.helper&&(this.helper.caretMesh.visible=!0,this.caretInterval=setInterval(()=>{this.helper&&(this.helper.caretMesh.visible=!this.helper.caretMesh.visible),this.requestRender()},600))},this.handleCaretUpdate=a=>{if(!this.htmlInput||!this.virtualInput)return;let o=this.helper,s=(a==null?void 0:a.key)==="ArrowLeft"||(a==null?void 0:a.key)==="ArrowRight",l=(a==null?void 0:a.key)==="ArrowUp"||(a==null?void 0:a.key)==="ArrowDown";this.htmlInput.selectionStart===this.htmlInput.selectionEnd?(o.setCaretPosition(this.htmlInput.selectionStart,{horizontalKeyMove:s,verticalKeyMove:l}),this.startAnimateTextCursor()):o.setSelection(this.htmlInput.selectionStart,this.htmlInput.selectionEnd),this.requestRender()},this.containerScene.add(this.helper)}createInput(){return this.htmlInput=Q1t(),this.htmlInput}connect(){}disconnect(){var e;this.stopAnimateTextCursor(),this.helper.hide(),(e=this.htmlInput)==null||e.remove(),this.doubleClickHandler.stop()}handleMouseDown(){var a,o;if(!this.htmlInput||!this.virtualInput)return!0;this.getPointOnPlane();let e=this.doubleClickHandler.clickCount,{index:t,lineIndex:r,characterIndex:i}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,e>1?"inside":"previous")??{index:0,lineIndex:0,characterIndex:0};(o=(a=this.virtualInput)==null?void 0:a.wrappedText)!=null&&o.length&&this.virtualInput.wrappedText[r][Math.max(0,i-1)]===`
`&&(t--,i--),this._lastIndex=t,this._isFirstDragMove=!0;let n=this.checkClickedObject();if(e===1){if(n===null)return this.onExit(this.virtualInput),!0;this.selectionOnDragStart=t,this.isDragging=!0,this.setInputSelection(t)}else n===this.virtualInput&&(e===2?this.selectClosestWord(r,i):e>2&&(this.setInputSelection(0,this.htmlInput.value.length),this.doubleClickHandler.reset()))}handleMouseUp(){this.applyRangeToTextInput(),this.isDragging=!1,this._isFirstDragMove=!1}handleMouseMove(){!this.virtualInput||(this._isFirstDragMove&&this.doubleClickHandler.clickCount>1&&(this.selectionOnDragStart=this._lastIndex,this.isDragging=!0,this.setInputSelection(this._lastIndex)),this._isFirstDragMove=!1,this.getPointOnPlane(),this.applyRangeToTextInput())}focus(e){var t;if(this.virtualInput=e,this.updateTextInputStyles(),this.htmlInput)if(e){let r=(t=this.data)==null?void 0:t.geometry.text;this.htmlInput.value=typeof r=="string"?"":(r==null?void 0:r.textValue.toString())??""}else this.htmlInput.value=""}blur(){}get data(){let{virtualInput:e}=this;if(e)return e.dataPatched}applyRangeToTextInput(){var n;if(!this.isDragging||!this.virtualInput||!this.htmlInput)return;let e=this.selectionOnDragStart,{index:t,lineIndex:r,characterIndex:i}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,this.doubleClickHandler.clickCount>2?"inside":"previous")??{index:0};r!==void 0&&i!==void 0&&((n=this.virtualInput)==null?void 0:n.wrappedText[r][i-1])===`
`&&t--,this.htmlInput.setSelectionRange(Math.min(e,t),Math.max(e,t))}checkClickedObject(){if(this.virtualInput){let e=this.raycaster.intersectObject(this.virtualInput,!1);if(e.length>0){let t=e[0];if(t.object instanceof bG)return t.object}}return null}selectClosestWord(e,t){if(!this.virtualInput)return;let r=this.virtualInput.wrappedText,i=r[e],n=t+1,a=t;i[t]!==" "&&(n=this.findNextCharOccurence(i,t,"forward"," "),a=this.findNextCharOccurence(i,t,"backward"," "),a>0&&a++,n>=i.length-1&&e===r.length-1&&n++);let o=this.helper,s=o.getGlobalIndexFromLineAndCharIndexes(r,e,a),l=o.getGlobalIndexFromLineAndCharIndexes(r,e,n);this.setInputSelection(s,l)}findNextCharOccurence(e,t,r,i=" "){let n=Math.max(0,e.length-1),a=r==="forward"?n:0,o=r==="forward"?1:-1,s=Math.max(Math.min(t,n),0);for(;s!==a;)if(s+=o,e.charAt(s)===i)return s;return a}getPointOnPlane(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;if(!(!this.virtualInput||!e)&&this.raycaster.ray.intersectsPlane(this.plane)){this.planeIntersection===null&&(this.planeIntersection=new k);let r=this.raycaster.ray.intersectPlane(this.plane,this.planeIntersection);if(r){this.planeIntersection.copy(this.virtualInput.worldToLocal(r));let i=typeof e.geometry.width=="number"?e.geometry.width:1,n=typeof e.geometry.height=="number"?e.geometry.height:1;this.projected.set(r.x+i*.5,r.y-n*.5)}}}updatePlane(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;this.virtualInput&&e&&($re.getNormalMatrix(this.virtualInput.matrixWorld),Gre.copy(J1t).applyMatrix3($re).normalize(),this.virtualInput.localToWorld(Hre.set(0,0,e.geometry.depth)),this.plane.setFromNormalAndCoplanarPoint(Gre,Hre))}setInputSelection(e,t=e){var r;(r=this.htmlInput)==null||r.setSelectionRange(e,t),setTimeout(()=>{var i;(i=this.htmlInput)==null||i.focus()})}updateTextInputStyles(){var t;let e=(t=this.virtualInput)==null?void 0:t.data;this.virtualInput&&e&&this.htmlInput&&(this.htmlInput.style.fontSize=e.geometry.fontSize+"px",this.htmlInput.style.letterSpacing=e.geometry.letterSpacing*e.geometry.fontSize+"px",this.htmlInput.style.lineHeight=e.geometry.fontSize*e.geometry.lineHeight+"px",this.htmlInput.style.width=e.geometry.width+"px",this.htmlInput.style.height=e.geometry.height+"px",this.htmlInput.style.textAlign=e_t(e.geometry.horizontalAlign))}};function e_t(e){return e===4?"justify":e===2?"right":e===3?"center":"left"}var UCe=(e,t)=>{if(typeof e=="string"){let r=t.data(e);if(r)return UCe(r.value,t)}return ba.getDisplayedValue(e)};function Xre(e,t){let r=e.text,i="";if(typeof r=="string"){let n=t.variables.data(i);n&&(i=UCe(n.value,t.variables))}else i=r.textValue.toString();return i}var t_t=class extends ka{constructor(e,t){super(e),this.eventManager=t,this._textInputs=[],this.sceneHelpers=new Io,this.helper=new MSe,this._onMouseDownFocusIn=r=>{if(ar.length>1)return;this.eventContext.updateRaycaster(r);let i=null;if(this.eventContext.raycaster){for(let n of this._textInputs)if(this.eventContext.raycaster.intersectObject(n,!0).length>0){i=n;break}}this.focusOnTextInput(i),this._onCaretUpdate(),this._onMouseUp(),this.textInputManager.doubleClickHandler.start(this.eventContext.domElement),this.textInputManager.doubleClickHandler._onMouseDown(r),this._onMouseDown(r)},this.onExit=()=>{let{virtualInput:r}=this.textInputManager;if(r===null)return;let i=this.textInputManager.htmlInput;this.helper.hide(),i==null||i.setSelectionRange(i.value.length,i.value.length),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0);let{domElement:n}=this.eventContext;n.removeEventListener("pointerdown",this._onMouseDown,!1),n.removeEventListener("pointerup",this._onMouseUp,!1),n.removeEventListener("pointermove",this._onMouseMove,!1),window.removeEventListener("keydown",this._onKeyPress),this.textInputManager.doubleClickHandler.reset(),n.addEventListener("pointerdown",this._onMouseDownFocusIn),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers()},this._onMouseDown=r=>{this.eventContext.updateRaycaster(r),this.textInputManager.handleMouseDown(),this.textInputManager.virtualInput&&this.eventContext.raycaster.intersectObject(this.textInputManager.virtualInput,!0).length>0&&this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1)},this._onMouseUp=()=>{this.textInputManager.handleMouseUp(),this.eventManager.controlsManager.orbitControls&&!this.eventManager.controlsManager.orbitControls.enabled&&(this.eventManager.controlsManager.orbitControls.enabled=!0)},this._onMouseMove=r=>{this.eventContext.updateRaycaster(r),this.textInputManager.handleMouseMove()},this._onTextEdit=r=>{let{htmlInput:i,virtualInput:n,helper:a}=this.textInputManager;if(!i||!n)return;let o=i.value;n.textGeometry.setText(o).then(()=>{this.eventContext.requestRender()});let s=n.data;a.update();let l=s.geometry.text;if(typeof l=="string"){let u=l;this.eventContext.sharedAssets.updateVariable(u,{textValue:o})}this.textInputManager.updateTextInputStyles(),this._onCaretUpdate()},this._onCaretUpdate=r=>{this.textInputManager.handleCaretUpdate(r)},this._onKeyPress=r=>{r.key==="Escape"&&this.onExit()},this.textInputManager=new Z1t(this.sceneHelpers,e.raycaster,e.sharedAssets,e.requestRender,this.onExit)}connect(){let e=[];if(this.eventContext.scene.traverseEntity(i=>{i instanceof bG&&e.push(i)}),this._textInputs=e,e.length===0)return;let{domElement:t}=this.eventContext;t.addEventListener("pointerdown",this._onMouseDownFocusIn),this.textInputManager.connect();let r=this.textInputManager.createInput();document.body.appendChild(r),r.style.display="none",r.addEventListener("keyup",this._onCaretUpdate),r.addEventListener("keydown",this._onCaretUpdate),r.addEventListener("beforeinput",this._onCaretUpdate),r.addEventListener("paste",this._onCaretUpdate),r.addEventListener("cut",this._onCaretUpdate),r.addEventListener("select",this._onCaretUpdate),r.addEventListener("selectstart",this._onCaretUpdate)}disconnect(){let e=this.textInputManager.htmlInput,{domElement:t}=this.eventContext;t.removeEventListener("pointerdown",this._onMouseDownFocusIn),e==null||e.removeEventListener("keyup",this._onCaretUpdate),e==null||e.removeEventListener("keydown",this._onCaretUpdate),e==null||e.removeEventListener("beforeinput",this._onCaretUpdate),e==null||e.removeEventListener("paste",this._onCaretUpdate),e==null||e.removeEventListener("cut",this._onCaretUpdate),e==null||e.removeEventListener("select",this._onCaretUpdate),e==null||e.removeEventListener("selectstart",this._onCaretUpdate),this._textInputs.forEach(r=>{let i=Xre(r.data.geometry,this.eventContext.sharedAssets.data);r.textGeometry.setText(i)}),t.removeEventListener("pointerdown",this._onMouseDown,!1),t.removeEventListener("pointerup",this._onMouseUp,!1),t.removeEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers(),this.textInputManager.disconnect()}focusOnTextInput(e){this.textInputManager.focus(e),this.textInputManager.onTextMaterialChanged();let t=this.textInputManager.htmlInput;if(!t||e===null)return;this.textInputManager.updateTextInputStyles(),this.eventContext.renderer.sceneHelpersOnTop=this.sceneHelpers,this.eventContext.renderer.pipeline.enableHelpers(),this.textInputManager.isDragging=!1;let r=Xre(e.textGeometry.userData.parameters,this.eventContext.sharedAssets.data);t.value=r,t.setSelectionRange(0,0),this.textInputManager.helper.show(e),t.style.display="block",t.addEventListener("input",this._onTextEdit),this.textInputManager.updatePlane();let{domElement:i}=this.eventContext;i.removeEventListener("pointerdown",this._onMouseDownFocusIn),i.addEventListener("pointerdown",this._onMouseDown,!1),i.addEventListener("pointerup",this._onMouseUp,!1),i.addEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress)}},r_t=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onVoice=({value:r,frequencies:i})=>{this.events.forEach(n=>{n.dispatch()})}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(r=>r.data.type==="AIAssistantListener"&&!r.data.disabled).forEach(r=>{this.events.push(new i_t(r.id,r.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("voice",this.onVoice))}disconnect(){var e;(e=this.openAIRealtime)==null||e.off("voice",this.onVoice)}},i_t=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Mn(t,t.actions,i,n,a,r)}dispatch(){this.dispatchActions(this.actions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},n_t=class extends ka{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.onTriggerEvent=({description:r,direction:i})=>{let n=this.events.find(a=>a.data.description===r);n&&(i==="backward"?n.dispatchReverse():n.dispatch())}}connect(){this.openAIRealtime=this.eventContext.sharedAssets.openAIRealtime,this.openAIRealtime&&(this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(r=>r.data.type==="AIAssistantTrigger"&&!r.data.disabled).forEach(r=>{this.events.push(new a_t(r.id,r.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.openAIRealtime.on("trigger_event",this.onTriggerEvent))}disconnect(){var e;(e=this.openAIRealtime)==null||e.off("trigger_event",this.onTriggerEvent)}},a_t=class{constructor(e,t,r,i,n,a){this.id=e,this.data=t,this.object=r,this.actions=Mn(t,t.actions,i,n,a,r)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispatchReverse(){let e=this.actions;e.Transition.forEach(t=>t.reverseFromCurrent()),e.Particles.forEach(t=>t.reverseFromCurrent()),e.Animation.forEach(t=>t.reverseFromCurrent()),e.SwitchCamera.forEach(t=>t.reverseFromCurrent()),e.Create.forEach(t=>t.dispatchStop())}},o_t=class{constructor(e,t,r,i,n){this.publish=e,this.controlsManager=t,this.animationControls=r,this.eventContext=i,this.sharedVariables=n,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=a=>{let o=window.parent!==window,s=document.documentElement.scrollHeight>document.documentElement.clientHeight||document.documentElement.scrollWidth>document.documentElement.clientWidth;(a.touches.length>1||this.preventTouchScroll||o===!1&&s===!1)&&a.preventDefault()},this.onMouseWheelPreventScroll=a=>{this.preventScroll&&a.preventDefault()},this.onMouseMove=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:a.buttons>0}},this.onMouseDown=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:!0}},this.onMouseUp=a=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(a),pressed:!1}},this.getMousePosition=a=>{var u;let{domRect:o}=this.eventContext,{pageX:s,pageY:l}=((u=a.touches)==null?void 0:u.length)>0?a.touches[0]:a;return{x:s-(o.left+window.scrollX),y:l-(o.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=i.requestRender}activate(e=!1){var i;if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new Ibt(this.eventContext),VariableChange:new d1t(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),API:new $1t(this.eventContext,this),WEBHOOK:new Y1t(this.eventContext,this),AIAssistantListener:new r_t(this.eventContext,this),AIAssistantTrigger:new n_t(this.eventContext,this),Conditional:new Ubt(this.eventContext,this),Start:new u1t(this.eventContext,this),Basic:new zbt(this.eventContext,this,this.needsRaycast),MouseHover:new n1t(this.eventContext,this),Scroll:new s1t(this.eventContext,this),Follow:new Kbt(this.eventContext,this),DragDrop:new Gbt(this.eventContext,this),LookAt:new t1t(this.eventContext),Resize:new H1t(this.eventContext,this),Textfields:new t_t(this.eventContext,this)};let{page:t,domElement:r}=this.eventContext;this.hideCursor&&(r.style.cursor="none"),t.traverseEntity(n=>{n.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(n=>n.connect()),r.addEventListener("wheel",this.onMouseWheelPreventScroll),r.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++,e||((i=this.eventContext.sharedAssets.openAIRealtime)==null||i.connect())}deactivate(e=!1){var i,n;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:t,domElement:r}=this.eventContext;r.style.cursor="",Object.values(this.handlers).forEach(a=>a.disconnect()),(i=this.controlsManager.gameControl)==null||i.disposeActions(),this.controlsManager.disconnectEvents(),t.traverseEntity(a=>{a.removeEventListener("requestRender",this.requestRender),a.destroyedInAction=!1}),r.removeEventListener("touchmove",this.onTouchMovePreventScroll),r.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode(),e||((n=this.eventContext.sharedAssets.openAIRealtime)==null||n.disconnect())}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(!0),this.activate(!0),this.controlsManager.deactivate(),this.controlsManager.activate(this),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=r=>{if(r.data.type==="Conditional"&&(r.data.ifActions.forEach(t),r.data.elseActions.forEach(t)),r.data.type==="Conditional"||r.data.type==="SetVariable")for(let i of r.data.type==="Conditional"?r.data.condition:r.data.expression)"id"in i&&Array.isArray(i.id)&&(i.id[0]==="mouse"&&(this.needsMouse=!0),i.id[0]==="raycast"&&(this.needsRaycast=!0));r.data.type==="DynamicVariablePlay"&&r.data.variableId!==""&&(r.data.mode==="Play"||r.data.mode==="PlayPause"||r.data.mode==="Toggle")&&e.setDynamicVariablePlayState(r.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(r=>{var i;if((i=r.data)!=null&&i.events.length)for(let n of r.data.events)if(n.data.type==="VariableChange"&&(n.data.variableId==="mouseProperty"&&(this.needsMouse=!0),n.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),n.data.type==="Conditional")for(let a of["inActions","outActions"])n.data[a].forEach(t);else if(n.data.type==="DragDrop")for(let a of["drag","drop"])n.data.dragDropActions[a].forEach(t);else if(n.data.type==="GameControl")for(let a of["idle","move","jump","run"])n.data.gameActions[a].forEach(t);else if(n.data.type==="Resize")for(let a of n.data.breakpoints)a.data.actions.forEach(t);else n.data.type==="LookAt"||n.data.type==="API"||n.data.actions.forEach(t)})}},s_t=class{constructor(e,t,r,i,n){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new ze().copy(r),this._editorSize=new ze().copy(i),this._aspect=t.aspect,this._fov=n??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.y;this._aspect=e/t,t<=r&&(this._camera.zoom*=r/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,r=this._editorSize.y,i=this._fov;if(e&&t>r){let n=l_t(t,1080,2160,1,15)/100;i*=t/r,i*=1-n}this._camera.aspect=this._aspect,this._camera.fov=i,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function l_t(e,t,r,i,n){return(e-t)/(r-t)*(n-i)+i}var u_t=class{get sharedAssets(){return this.shared}constructor(e,t={},r=!0){this.shared=new lG(e.shared,t,!0,r),this.scene=new xG(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof Kn&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Sn&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},c_t=class{constructor({x:e=10,y:t=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function d_t(e){let t;if(e.index)for(let r=0;r<e.index.array.length;r+=3)t=e.index.array[r],e.index.array[r]=e.index.array[r+2],e.index.array[r+2]=t}function VE(e){return e instanceof zM?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function h_t(e,t){let r={};return e.traverseEntity(i=>{var l;if(!i.visible||!(i instanceof ho)||i.type!=="Mesh"||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let n=i.parent;for(;n;){if(n instanceof ho&&i.states&&Object.keys(i.states).length)return;n=n.parent}let a=i.material.uuid,o=t.shared.materials[a];if(o){if(!Zn.isMergable(o))return}else{let u=(l=t.scene.objects.get(i.uuid))==null?void 0:l.data;if(u&&"material"in u&&typeof u.material!="string"){if(!Zn.isMergable(u.material))return;a=Zn.getHash(u.material)}}r[a]||(r[a]={});let s=r[a][VE(i)];if(s){if(s.push(i),i.cloner)for(let u of i.cloner.children)s.push(u)}else if(r[a][VE(i)]=[i],i.cloner)for(let u of i.cloner.children)r[a][VE(i)].push(u)}),r}function f_t(e){let t=0;return Object.values(e).forEach(r=>{Object.values(r).forEach(i=>{let n=i.length;n>t&&(t=n)})}),t}function p_t(e,t){let r=h_t(t,e),i=f_t(r),n=new Array(i),a=0,o=new Array(i),s=0,l=new Array(i),u=0,c=new Array(i),d=0;for(let[h,f]of Object.entries(r))for(let g of Object.values(f)){if(s=0,u=0,g.forEach(m=>{m instanceof ho&&(o[s++]=m.geometry.clone(),l[u++]=m)}),u<2)continue;for(let m=0;m<u;m++)l[m].updateWorldMatrix(!0,!1),o[m].applyMatrix4(l[m].matrixWorld),l[m].matrixWorld.determinant()<0&&d_t(o[m]);let p=V0(o.slice(0,s),!1);if(p){let m;switch(h){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),m=new Ci(p,l[0].material);break}default:{m=new Ci(p,l[0].material);break}}m.castShadow=l[0].castShadow,m.receiveShadow=l[0].receiveShadow,t.add(m);let y=b=>{d=0;for(let w of b)w.children&&y(w.children),w instanceof ho&&(Array.isArray(w.material)||r[w.material.uuid]&&r[w.material.uuid][VE(w)]&&r[w.material.uuid][VE(w)].length>1||(c[d++]=w));for(let w=0;w<d;w++)t.attach(c[w])};for(let b=0;b<u;b++){let w=l[b];y(w.children),n[a++]=w}}}for(let h=0;h<a;h++)n[h].removeFromParent()}var m_t=Av(d$e(),1),g_t=new ze;function v_t(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var y_t=class{constructor(e,{renderOnDemand:t,renderMode:r="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=i=>{var n,a,o,s,l,u,c,d,h,f,g,p,m;if(this.time=i,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(n=this._perfs)==null||n.start(),!this._renderer){(a=this._perfs)==null||a.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(o=this._perfs)==null||o.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((s=this._eventManager.handlers)!=null&&s.Start.hasVideoAction||(l=this._eventManager.handlers)!=null&&l.Basic.hasVideoAction||(u=this._eventManager.handlers)!=null&&u.Conditional.hasVideoAction)&&(this._skipRender=!1),(c=this._animationControls)==null||c.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,(d=this._scene)==null||d.traverseVisibleEntity(y=>{y.type==="ParticleSystem"&&(y.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(h=this._eventManager)!=null&&h.isEnabled&&(((f=this._eventManager.handlers)==null?void 0:f.Follow).onAnimationFrameDamping(),((g=this._eventManager.handlers)==null?void 0:g.LookAt).onAnimationFrameDamping(),((p=this._eventManager.handlers)==null?void 0:p.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let y=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=y,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(m=this._perfs)==null||m.end()},this._resize=i=>{var n,a,o,s,l,u,c,d,h,f;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=g_t.set(this._viewportWidth,this._viewportHeight)),i){let g=this._viewportWidth,p=this._viewportHeight;this._renderer.setSize(g-1,p-1,!1),this._renderer.setSize(g,p,!1)}else this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1);if(this._camera=(n=this._scene)==null?void 0:n.activeCamera,(c=this._scene)==null||c.updateViewPlaneSize(((o=(a=this._frameView)==null?void 0:a.frameSize)==null?void 0:o.x)??this._viewportWidth,((l=(s=this._frameView)==null?void 0:s.frameSize)==null?void 0:l.y)??this._viewportHeight,((u=this._frameView)==null?void 0:u.enableResponsive)??!1),this._camera){let g=Object.values(((d=this._data)==null?void 0:d.frames)??{})[0].preset??"fullscreen";(h=this._frameView)==null||h.setCamera(this._camera),(f=this._frameView)==null||f.updateCamera(g!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=SM(this._resize,10),this._onScroll=i=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=t?"auto":r,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new c_t({x:10,y:10})),hlt(e)}async load(e,t,r){v_t(e),this.disposed=!1;let i=await(await fetch(e,r)).arrayBuffer();await this.start(i,{variables:t})}async start(e,{interactive:t=!0,variables:r}={}){var l,u,c,d;if(this.disposed)return;let i=await V1t(e);this._data=i;let n=k1t(i);i.version&&(0,m_t.default)(i.version,"1.9.82")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([n.length&&N1t(),yte(i)&&ght(),wpt(i)&&hht(),TM.physicsEnabled(i.scene.objects)&&vlt(),fte(i)&&Qft(),Xte(i)&&Dyt(),Yft(i)&&Xft(),Nte(i)&&yvt(),S1t(i)&&mlt()].filter(Boolean)),n.length&&await q1t(n),(l=this._eventManager)==null||l.deactivate(),(u=this._controls)==null||u.deactivate(),(c=this._scene)==null||c.dispose();let a=new u_t(i);if(a.resetPersonalCameraFromDocumentData(),this._scene=a.scene,this._sharedAssetsManager=a.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let h=performance.now();p_t(i,a.scene);let f=performance.now();console.log("Merged geometries in ",f-h," ms")}yte(i)&&this._scene.traverse(h=>{zm(h)&&h.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var h;this._requestRenderAutoMode(),(h=this._scene)==null||h.traverse(f=>{f instanceof Us&&f.pendingMediaLoad&&f.update()})}),(d=this._scene)==null||d.traverse(h=>{h.type==="ParticleSystem"&&(h.wakeUp(),h.data.autoPlay?h.start():h.stop())});let o=Object.keys(i.shared.fonts).map(h=>this._sharedAssetsManager.getFont(h).loadingPromise);if(Promise.all(o).then(()=>{a.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),fte(i)&&I1t(i)&&await Promise.all(o),Nte(i)){let h=[];this._scene.traverseEntity(f=>{(f instanceof Ba||f instanceof Kn)&&f.uiCanvas&&h.push(f.uiCanvas)}),await Promise.all(h.map(f=>f.promise))}if(this._scene.rewriteEventsBeforeGoToPlayMode(),zG(this._scene.activePage,this._sharedAssetsManager),!this._renderer&&(this._renderer=new nvt({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=i.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode),i.shared.images.SplineWatermark)){let h=this._sharedAssetsManager.getImage("SplineWatermark");await h.loadPromise;let f=h.getTexture(1001);this._renderer.pipeline.setWatermark(f)}Xte(i)&&this._scene.initializeSplatViewer(),i.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(i.scene.blueNoiseTextureData);let s=Object.values(i.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(s.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=s.size[0],this._viewportHeight=s.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new s_t(this._renderer,this._camera,new ze(this._viewportWidth,this._viewportHeight),new ze(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(s.allowResponsive??!1)&&s.preset==="fullscreen"),t){let h=new Rbt(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,s);this._scene.updateMatrixWorld(!0),this._controls=new j1t(h),this._animationControls=new B1t(this._scene,this._requestRenderAutoMode),this._eventManager=new o_t(i.scene.publish,this._controls,this._animationControls,h,i.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this._scene.activePage.data.postprocessing.depthOfField.enabled&&Promise.all(this._sharedAssetsManager.getImageLoadPromises()).then(()=>{this._resize(!0)}),r!==void 0&&this.setVariables(r),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var h;(h=this._renderer)==null||h.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(this._data!==void 0){let t=Object.entries(e);for(let[r,i]of t)this.setVariable(r,i)}}setVariable(e,t){var i;let r=this._getVariableByName(e);if(r&&!("dynamicVariableType"in r.data)){let n=t;typeof r.data.value=="number"?n=typeof t=="number"?t:typeof t=="boolean"?t===!0?1:0:parseFloat(t):typeof r.data.value=="boolean"?n=typeof t=="number"?!!t:typeof t=="boolean"?t:t.toLocaleLowerCase()==="false"?!1:!!t:typeof r.data.value!="string"&&r.data.value.textValue!==void 0&&(n=t.toString());let a=typeof n=="string"?{textValue:n}:n;(i=this._sharedAssetsManager)==null||i.updateVariable(r.id,a),this.requestRender(),this._requestRenderAutoMode()}else r===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in r.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{e[t.data.name]===void 0&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let r=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(r)}}_getVariableValue(e){return typeof e!="string"&&ba.isTextValue(e)?ba.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(r=>r.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){var t;let e=[];return(t=this._scene)==null||t.traverseEntity(r=>{if(r.uuid!==Rw&&!this._scene.isInvisibleObjects(r)&&!(r instanceof Kn)){let i=this._createProxyObject(r);i&&e.push(i)}}),e}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEvent(e)}emitEventReverse(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,r;((t=this._controls)==null?void 0:t.orbitControls)instanceof NCe&&((r=this._controls)==null||r.orbitControls.setZoom(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var o;let{r:t,g:r,b:i,a:n}={r:0,g:0,b:0,a:1},a=new wa(t,r,i,n);try{a.setStyle(e)}catch{console.error("This is not a valid css color",e)}(o=this._scene)==null||o.activePage.setBackgroundColor(a),this._requestRenderAutoMode()}dispose(){var e,t,r,i,n,a,o;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._proxyObjectCache.forEach(s=>{wJ.unsubscribe(s)}),this._variablesCache.clear(),(i=this._renderer)==null||i.setAnimationLoop(null),(n=this._renderer)==null||n.dispose(),this._renderer=void 0,(a=this._sharedAssetsManager)==null||a.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(o=this._controls)==null||o.deactivate(),this.dt=0,flt(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,t,r;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(r=this._controls)!=null&&r.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,r;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(r=this._renderer)==null||r.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var n;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(a=>{a instanceof Kn&&(t=a.name)});let r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof Kn||e instanceof xG||(n=e.parent)==null?void 0:n.uuid,emitEvent(a){e.dispatchEvent({type:"userEvent",eventName:a})},emitEventReverse(a){e.dispatchEvent({type:"userEvent",eventName:a,reverse:!0})}},i=wJ(r,(a,o)=>{var s;typeof e[a]!="object"&&((s=Object.getOwnPropertyDescriptor(e,a))!=null&&s.writable)&&(e[a]=o),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,i),i}setUIWasmUrl(e){aSe.skiaWasmUrl=e}},PO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yk={},b_t={get exports(){return Yk},set exports(e){Yk=e}},sS={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yre;function __t(){if(Yre)return sS;Yre=1;var e=yf,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(s,l,u){var c,d={},h=null,f=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(f=l.ref);for(c in l)i.call(l,c)&&!a.hasOwnProperty(c)&&(d[c]=l[c]);if(s&&s.defaultProps)for(c in l=s.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:s,key:h,ref:f,props:d,_owner:n.current}}return sS.Fragment=r,sS.jsx=o,sS.jsxs=o,sS}(function(e){e.exports=__t()})(b_t);const Kk=Yk.jsx;var w_t="Expected a function",Kre=NaN,x_t="[object Symbol]",S_t=/^\s+|\s+$/g,C_t=/^[-+]0x[0-9a-f]+$/i,E_t=/^0b[01]+$/i,M_t=/^0o[0-7]+$/i,P_t=parseInt,T_t=typeof PO=="object"&&PO&&PO.Object===Object&&PO,A_t=typeof self=="object"&&self&&self.Object===Object&&self,O_t=T_t||A_t||Function("return this")(),R_t=Object.prototype,D_t=R_t.toString,I_t=Math.max,j_t=Math.min,pL=function(){return O_t.Date.now()};function z_t(e,t,r){var i,n,a,o,s,l,u=0,c=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(w_t);t=Qre(t)||0,Qk(r)&&(c=!!r.leading,d="maxWait"in r,a=d?I_t(Qre(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h);function f(C){var T=i,M=n;return i=n=void 0,u=C,o=e.apply(M,T),o}function g(C){return u=C,s=setTimeout(y,t),c?f(C):o}function p(C){var T=C-l,M=C-u,A=t-T;return d?j_t(A,a-M):A}function m(C){var T=C-l,M=C-u;return l===void 0||T>=t||T<0||d&&M>=a}function y(){var C=pL();if(m(C))return b(C);s=setTimeout(y,p(C))}function b(C){return s=void 0,h&&i?f(C):(i=n=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,i=l=n=s=void 0}function x(){return s===void 0?o:b(pL())}function S(){var C=pL(),T=m(C);if(i=arguments,n=this,l=C,T){if(s===void 0)return g(l);if(d)return s=setTimeout(y,t),f(l)}return s===void 0&&(s=setTimeout(y,t)),o}return S.cancel=w,S.flush=x,S}function Qk(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function B_t(e){return!!e&&typeof e=="object"}function L_t(e){return typeof e=="symbol"||B_t(e)&&D_t.call(e)==x_t}function Qre(e){if(typeof e=="number")return e;if(L_t(e))return Kre;if(Qk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Qk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(S_t,"");var r=E_t.test(e);return r||M_t.test(e)?P_t(e.slice(2),r?2:8):C_t.test(e)?Kre:+e}var F_t=z_t;function N_t(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}const U_t=[],V_t={width:"100%",height:"100%"},k_t=G.forwardRef(function({className:e,children:t,debounceTime:r=300,ignoreDimensions:i=U_t,parentSizeStyles:n,enableDebounceLeadingCall:a=!0,resizeObserverPolyfill:o,...s},l){const u=G.useRef(null),c=G.useRef(0),[d,h]=G.useState({width:0,height:0,top:0,left:0}),f=G.useMemo(()=>{const g=Array.isArray(i)?i:[i];return F_t(p=>{h(m=>Object.keys(m).filter(y=>m[y]!==p[y]).every(y=>g.includes(y))?m:p)},r,{leading:a})},[r,a,i]);return G.useEffect(()=>{const g=o||window.ResizeObserver,p=new g(m=>{m.forEach(y=>{const{left:b,top:w,width:x,height:S}=(y==null?void 0:y.contentRect)??{};c.current=window.requestAnimationFrame(()=>{f({width:x,height:S,top:w,left:b})})})});return u.current&&p.observe(u.current),()=>{window.cancelAnimationFrame(c.current),p.disconnect(),f.cancel()}},[f,o]),Kk("div",{style:{...V_t,...n},ref:N_t([l,u]),className:e,...s,children:t({...d,ref:u.current,resize:f})})}),VCe=G.forwardRef(({scene:e,style:t,onMouseDown:r,onMouseUp:i,onMouseHover:n,onKeyDown:a,onKeyUp:o,onStart:s,onLookAt:l,onFollow:u,onWheel:c,onLoad:d,renderOnDemand:h=!0,...f},g)=>{const p=G.useRef(null),[m,y]=G.useState(!0);return G.useEffect(()=>{y(!0);let b;const w=[{name:"mouseDown",cb:r},{name:"mouseUp",cb:i},{name:"mouseHover",cb:n},{name:"keyDown",cb:a},{name:"keyUp",cb:o},{name:"start",cb:s},{name:"lookAt",cb:l},{name:"follow",cb:u},{name:"scroll",cb:c}];if(p.current){b=new y_t(p.current,{renderOnDemand:h});async function x(){await b.load(e);for(let S of w)S.cb&&b.addEventListener(S.name,S.cb);y(!1),d==null||d(b)}x()}return()=>{for(let x of w)x.cb&&b.removeEventListener(x.name,x.cb);b.dispose()}},[e]),Kk(k_t,{ref:g,parentSizeStyles:t,debounceTime:50,...f,children:()=>Kk("canvas",{ref:p,style:{display:m?"none":"block"}})})}),LM=pr(V.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"})),Jk=pr(V.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5z"})),LG=pr(V.jsx("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"})),Zk=pr(V.jsx("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20zm-6 8h-4v-2h4zm0-4h-4v-2h4z"})),FM=pr(V.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),Jre=pr(V.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})),mL=[{question:"What does CIA stand for?",answer:"Confidentiality, Integrity, Availability"},{question:"What is Social Engineering?",answer:"Manipulating individuals to gain confidential information."},{question:"What is a DDoS attack?",answer:"Distributed Denial of Service attack, overwhelming a service."},{question:"What is the purpose of a VPN?",answer:"To create a secure connection over a less secure network."},{question:"What is Phishing?",answer:"Fraudulent attempts to obtain sensitive information."},{question:"What is Two-Factor Authentication?",answer:"An extra layer of security requiring two types of credentials."},{question:"What is Malware?",answer:"Software designed to harm or exploit any programmable device."},{question:"What is Ransomware?",answer:"Malware that locks or encrypts data until a ransom is paid."},{question:"What is Encryption?",answer:"Converting data into a code to prevent unauthorized access."},{question:"What is a Firewall?",answer:"A network security device that monitors and filters incoming and outgoing traffic."},{question:"What is a Zero-Day Vulnerability?",answer:"A security flaw unknown to those who should fix it."},{question:"What is Ethical Hacking?",answer:"Legally breaking into computers to test defenses."}],q_t=()=>{const[e,t]=G.useState(4),r=()=>{t(i=>Math.min(i+4,mL.length))};return V.jsxs(Rt,{sx:{py:4,textAlign:"center"},children:[V.jsx(Qt,{variant:"h3",sx:{mb:4,background:"linear-gradient(45deg, #8a2be2, #00ffff)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:600},children:"Test Your Cyber Knowledge"}),V.jsx(Rt,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"32px",mb:4},children:mL.slice(0,e).map((i,n)=>V.jsx(Rt,{sx:{width:"280px",height:"260px",perspective:"1000px"},children:V.jsxs(Rt,{sx:{position:"relative",width:"100%",height:"100%",transition:"transform 0.8s",transformStyle:"preserve-3d","&:hover":{transform:"rotateY(180deg)"}},children:[V.jsx(Rt,{sx:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",display:"flex",justifyContent:"center",alignItems:"center",p:2,borderRadius:3,bgcolor:"rgba(255,255,255,0.05)",border:"2px solid rgba(0,255,255,0.5)",color:"white",fontWeight:600,fontSize:"18px",boxShadow:"0 0 10px rgba(0,255,255,0.7)",backdropFilter:"blur(8px)"},children:i.question}),V.jsx(Rt,{sx:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(180deg)",display:"flex",justifyContent:"center",alignItems:"center",p:2,borderRadius:3,bgcolor:"rgba(255,255,255,0.05)",border:"2px solid rgba(255,0,255,0.5)",color:"white",fontWeight:600,fontSize:"18px",boxShadow:"0 0 10px rgba(255,0,255,0.7)",backdropFilter:"blur(8px)"},children:i.answer})]})},n))}),e<mL.length&&V.jsx(ja,{variant:"outlined",onClick:r,sx:{color:"white",borderColor:"rgba(255,255,255,0.3)","&:hover":{borderColor:"rgba(255,255,255,0.5)",bgcolor:"rgba(255,255,255,0.05)"}},children:"Load More"})]})},W_t=()=>V.jsxs(Rt,{sx:{width:"100vw",height:"60vh",position:"relative",overflow:"hidden",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)",marginBottom:8},children:[V.jsxs("video",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:0},autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:[V.jsx("source",{src:"https://res.cloudinary.com/dv9iswy2f/video/upload/v1744041256/5473968-uhd_4096_2160_25fps_qbrjta.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),V.jsx(Rt,{sx:{position:"relative",zIndex:1,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(2px)"},children:V.jsx(qs,{maxWidth:"lg",children:V.jsx(Qt,{variant:"h2",sx:{textAlign:"center",color:"#fff",fontWeight:600,textShadow:"2px 2px 4px rgba(0,0,0,0.3)",background:"linear-gradient(45deg, #fff, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Welcome to Our Cyber Security Hub"})})})]}),G_t=()=>{const e=qM(),t=aa(),{scrollYProgress:r}=G9e(),i=sz(r,[0,.3],[1,0]),n=sz(r,[0,.3],[1,.97]),a=sz(r,[0,.3],[0,-50]),[o,s]=G.useState(""),[l,u]=G.useState(!1),c=()=>{e("/chat")},d={hidden:{y:50,opacity:0},visible:g=>({y:0,opacity:1,transition:{delay:g*.15,duration:.8,type:"spring",stiffness:100}})},h=()=>{u(!0)},f=[{icon:V.jsx(LM,{fontSize:"large"}),title:"Real-time Analysis",description:"Get instant feedback on potential security threats and vulnerabilities through our advanced AI system.",delay:0},{icon:V.jsx(LG,{fontSize:"large"}),title:"Code Scanning",description:"Upload your code for comprehensive security assessment and best practices recommendations.",delay:1},{icon:V.jsx(Jk,{fontSize:"large"}),title:"Threat Detection",description:"Advanced AI-powered system to identify and prevent security risks before they become problems.",delay:2},{icon:V.jsx(Zk,{fontSize:"large"}),title:"Vulnerability Assessment",description:"Identify weaknesses in your systems with detailed reports and mitigation strategies.",delay:3},{icon:V.jsx(FM,{fontSize:"large"}),title:"Privacy Protection",description:"Ensure your data stays secure with our comprehensive privacy protection recommendations.",delay:4}];return V.jsxs(Rt,{children:[V.jsxs(Rt,{sx:{minHeight:"80vh",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",mb:10},children:[V.jsx(Fr.div,{style:{opacity:i,scale:n,y:a,position:"absolute",width:"100%",height:"100%"},children:V.jsxs(Rt,{sx:{position:"absolute",top:0,right:0,width:"60%",height:"100%",display:{xs:"none",md:"block"}},children:[V.jsx(Rt,{sx:{opacity:l?1:0,transition:"opacity 1s ease"},children:V.jsx(VCe,{scene:"https://prod.spline.design/s-j5jNSd8tcMVAPo/scene.splinecode",onLoad:h})}),!l&&V.jsx(Rt,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:t.palette.text.secondary},children:"Loading 3D model..."})]})}),V.jsx(qs,{maxWidth:"xl",sx:{position:"relative",zIndex:2},children:V.jsx(Da,{container:!0,spacing:4,children:V.jsx(Da,{item:!0,xs:12,md:6,children:V.jsxs(Rt,{sx:{pt:{xs:4,md:0}},children:[V.jsx(Fr.div,{initial:"hidden",animate:"visible",variants:d,custom:0,children:V.jsx(Qt,{variant:"h1",sx:{mb:3,background:"linear-gradient(45deg, #fff, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 40px rgba(139, 92, 246, 0.3)"},children:"CyberGuard"})}),V.jsx(Fr.div,{initial:"hidden",animate:"visible",variants:d,custom:1,children:V.jsx(Qt,{variant:"h4",sx:{mb:3,color:t.palette.text.primary},children:"Your Personal Cybersecurity Assistant"})}),V.jsx(Fr.div,{initial:"hidden",animate:"visible",variants:d,custom:2,children:V.jsx(Qt,{variant:"subtitle1",sx:{mb:5,color:t.palette.text.secondary,maxWidth:600},children:"Get instant security analysis, vulnerability assessments, and expert recommendations powered by advanced AI technology. Stay protected in today's complex digital landscape."})}),V.jsx(Fr.div,{initial:"hidden",animate:"visible",variants:d,custom:3,children:V.jsx(ja,{variant:"contained",size:"large",onClick:c,endIcon:V.jsx(Jre,{}),sx:{py:2,px:4,background:"linear-gradient(45deg, #8B5CF6, #3B82F6)",fontSize:"1.1rem",boxShadow:"0 10px 25px rgba(139, 92, 246, 0.4)","&:hover":{background:"linear-gradient(45deg, #7C3AED, #2563EB)",transform:"translateY(-5px)",boxShadow:"0 15px 30px rgba(139, 92, 246, 0.5)"},transition:"all 0.3s ease"},children:"Start Secure Chat"})})]})})})}),V.jsx(Rt,{sx:{position:"absolute",bottom:0,left:0,width:"100%",height:"100px",background:"linear-gradient(to top, #0F172A, transparent)",zIndex:1}})]}),V.jsx(Rt,{sx:{mb:2},children:V.jsx(W_t,{})}),V.jsxs(qs,{maxWidth:"xl",children:[V.jsxs(Rt,{sx:{mb:10},children:[V.jsx(Qt,{variant:"h3",component:Fr.h3,initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},transition:{duration:.8,type:"spring"},sx:{textAlign:"center",mb:8,background:"linear-gradient(45deg, #fff, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Advanced Security Features"}),V.jsx(Da,{container:!0,spacing:4,children:f.map((g,p)=>V.jsx(Da,{item:!0,xs:12,sm:6,md:4,lg:4,children:V.jsx(Fr.div,{initial:{y:50,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0,margin:"-100px"},transition:{delay:p*.1,duration:.5},children:V.jsx(kLe,{sx:{height:"100%",backdropFilter:"blur(10px)",backgroundColor:"rgba(30, 41, 59, 0.4)",border:"1px solid rgba(148, 163, 184, 0.1)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-10px)",boxShadow:"0 20px 30px rgba(0, 0, 0, 0.2)",backgroundColor:"rgba(30, 41, 59, 0.6)",border:"1px solid rgba(139, 92, 246, 0.3)"}},children:V.jsxs(HLe,{sx:{p:4},children:[V.jsxs(Rt,{sx:{display:"flex",alignItems:"center",mb:3,color:t.palette.primary.main},children:[g.icon,V.jsx(Qt,{variant:"h6",sx:{ml:2},children:g.title})]}),V.jsx(Qt,{variant:"body1",color:"text.secondary",children:g.description})]})})})},p))})]}),V.jsx(q_t,{}),V.jsx(Rt,{sx:{py:10},children:V.jsx(Da,{container:!0,spacing:6,alignItems:"center",children:V.jsx(Da,{item:!0,xs:12,md:6,children:V.jsxs(Fr.div,{initial:{x:-50,opacity:0},whileInView:{x:0,opacity:1},viewport:{once:!0},transition:{duration:.8},children:[V.jsx(Qt,{variant:"h3",sx:{mb:3,background:"linear-gradient(45deg, #fff, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Share Your Security Concerns"}),V.jsx(Qt,{variant:"subtitle1",sx:{mb:4,color:t.palette.text.secondary},children:"Our AI-powered assistant is here to help you with any cybersecurity questions or concerns. Start a conversation now to get professional security advice tailored to your needs."}),V.jsx(ja,{variant:"contained",onClick:c,endIcon:V.jsx(Jre,{}),sx:{background:"linear-gradient(45deg, #8B5CF6, #3B82F6)",boxShadow:"0 10px 25px rgba(139, 92, 246, 0.3)"},children:"Talk to Our Assistant"})]})})})})]})]})},H_t=pr(V.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"})),$_t=pr(V.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"})),X_t=pr([V.jsx("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),V.jsx("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")]),Y_t=pr(V.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),kCe=pr(V.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),K_t=pr(V.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Q_t=({message:e})=>{const{content:t,isUser:r,type:i,severity:n}=e,a=aa(),[o,s]=G.useState(!1),l=()=>{navigator.clipboard.writeText(t),s(!0),setTimeout(()=>s(!1),2e3)},u=()=>{switch(n){case"error":return V.jsx(Y_t,{fontSize:"small",sx:{color:a.palette.error.main}});case"warning":return V.jsx(X_t,{fontSize:"small",sx:{color:a.palette.warning.main}});case"info":return V.jsx(kCe,{fontSize:"small",sx:{color:a.palette.info.main}});default:return null}},c=()=>{switch(n){case"error":return a.palette.error.main;case"warning":return a.palette.warning.main;case"info":return a.palette.info.main;default:return null}},d={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:500,damping:30,mass:1}}};return V.jsx(Fr.div,{initial:"hidden",animate:"visible",variants:d,children:V.jsxs(Rt,{sx:{display:"flex",flexDirection:r?"row-reverse":"row",mb:2,alignItems:"flex-start",gap:2,width:"100%"},children:[V.jsx(hE,{src:r?void 0:"https://res.cloudinary.com/dv9iswy2f/image/upload/v1744041911/images__5_-removebg-preview_1_yu50if.png",sx:{bgcolor:r?a.palette.secondary.main:"transparent",boxShadow:r?"0 0 10px rgba(59, 130, 246, 0.3)":"0 0 10px rgba(139, 92, 246, 0.3)",mt:1,width:40,height:40},children:r&&V.jsx(K_t,{})}),V.jsxs(Na,{elevation:3,sx:{p:2,maxWidth:"75%",borderRadius:r?"20px 20px 0 20px":"20px 20px 20px 0",bgcolor:r?"rgba(59, 130, 246, 0.1)":"rgba(139, 92, 246, 0.1)",border:"1px solid",borderColor:r?"rgba(59, 130, 246, 0.2)":"rgba(139, 92, 246, 0.2)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",position:"relative",alignSelf:r?"flex-end":"flex-start",ml:r?"auto":0,mr:r?0:"auto","&:before":{content:'""',position:"absolute",top:15,[r?"right":"left"]:-10,width:0,height:0,borderStyle:"solid",borderWidth:r?"10px 10px 10px 0":"10px 0 10px 10px",borderColor:r?"transparent rgba(59, 130, 246, 0.2) transparent transparent":"transparent transparent transparent rgba(139, 92, 246, 0.2)",transform:r?"rotate(180deg)":"none"}},children:[(n||u())&&V.jsxs(Rt,{sx:{display:"flex",alignItems:"center",mb:1,pb:1,borderBottom:"1px solid",borderColor:c()?`${c()}33`:a.palette.divider},children:[u(),V.jsx(Qt,{variant:"caption",sx:{ml:1,color:c()||"text.secondary",fontWeight:500},children:(n==null?void 0:n.toUpperCase())||"NOTE"})]}),V.jsx(Qt,{variant:"body1",sx:{whiteSpace:"pre-wrap",wordBreak:"break-word",color:r?"primary.main":"secondary.main"},children:t}),V.jsxs(Rt,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,pt:1,borderTop:"1px solid rgba(255,255,255,0.1)"},children:[V.jsx(Qt,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.7rem"},children:new Date().toLocaleTimeString()}),V.jsx(mE,{title:o?"Copied!":"Copy text",children:V.jsx(fp,{size:"small",onClick:l,sx:{opacity:.6,"&:hover":{opacity:1},color:o?a.palette.success.main:"inherit"},children:o?V.jsx($_t,{fontSize:"small"}):V.jsx(H_t,{fontSize:"small"})})})]})]})]})})},J_t=pr(V.jsx("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"})),Zre=pr(V.jsx("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6z"})),qCe=pr(V.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),eie=pr(V.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"})),Z_t=pr(V.jsx("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"})),ewt=pr(V.jsx("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-1 2H5v-2h2zm0-3H5V8h2zm9 7H8v-2h8zm0-4h-2v-2h2zm0-3h-2V8h2zm3 3h-2v-2h2zm0-3h-2V8h2z"})),twt=({onSend:e,user:t})=>{const r=aa(),[i,n]=G.useState(""),[a,o]=G.useState(!1),[s,l]=G.useState(0),[u,c]=G.useState(null),[d,h]=G.useState(!1),[f,g]=G.useState(!1),p=G.useRef(null),m=G.useRef(null),y=G.useRef(null),b=G.useRef(null),w=["How can I secure my Wi-Fi network?","What are common phishing techniques?","Analyze my password strength","Best practices for secure coding","Explain recent security vulnerabilities"];G.useEffect(()=>(a?y.current=setInterval(()=>{l(P=>P+1)},1e3):(clearInterval(y.current),l(0)),()=>clearInterval(y.current)),[a]);const x=async()=>{(i.trim()||u)&&(g(!0),await e(i,u?"file":"text",u),n(""),c(null),g(!1),b.current&&b.current.focus())},S=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),x())},C=P=>{const O=P.target.files[0];O&&c(O)},T=async()=>{try{if(a)m.current.stop(),o(!1);else{const P=await navigator.mediaDevices.getUserMedia({audio:!0});m.current=new MediaRecorder(P);const O=[];m.current.ondataavailable=j=>O.push(j.data),m.current.onstop=async()=>{const j=new Blob(O,{type:"audio/webm"});c(new File([j],"voice-message.webm",{type:"audio/webm"})),P.getTracks().forEach(D=>D.stop())},m.current.start(),o(!0)}}catch(P){console.error("Error accessing microphone:",P),alert("Could not access microphone. Please check permissions.")}},M=()=>{if(!u)return null;switch(u.type.split("/")[0]){case"image":return V.jsx(V8e,{});case"audio":return V.jsx(cY,{});case"text":return V.jsx(eie,{});case"application":return u.name.endsWith(".js")||u.name.endsWith(".py")||u.name.endsWith(".html")||u.name.endsWith(".css")?V.jsx(LG,{}):V.jsx(eie,{});default:return V.jsx(Zre,{})}},A=P=>{const O=Math.floor(P/60),j=P%60;return`${O.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`};return V.jsxs(Rt,{sx:{display:"flex",flexDirection:"column",gap:1},children:[V.jsxs(fY,{children:[u&&V.jsx(Fr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,height:0},transition:{duration:.2},children:V.jsx(pX,{direction:"row",spacing:1,sx:{mb:1},children:V.jsx($7,{icon:M(),label:u.name,onDelete:()=>c(null),deleteIcon:V.jsx(qCe,{}),sx:{bgcolor:"rgba(139, 92, 246, 0.1)",color:r.palette.text.primary,borderRadius:"12px",py:.5,"& .MuiChip-icon":{color:r.palette.primary.main},"& .MuiChip-deleteIcon":{color:r.palette.text.secondary,"&:hover":{color:r.palette.error.main}}}})})}),a&&V.jsx(Fr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,height:0},transition:{duration:.2},children:V.jsxs(Rt,{sx:{display:"flex",alignItems:"center",gap:2,mb:1,p:1.5,borderRadius:2,bgcolor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[V.jsx(Rt,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:r.palette.error.main,animation:"pulse 1.5s infinite"}}),V.jsxs(Qt,{variant:"body2",color:"error",children:["Recording... ",A(s)]}),V.jsx(Rt,{sx:{flexGrow:1},children:V.jsx(nX,{color:"error",variant:"determinate",value:s%60*(100/60),sx:{height:4,borderRadius:2}})}),V.jsx(fp,{size:"small",onClick:T,color:"error",children:V.jsx(dY,{fontSize:"small"})})]})})]}),V.jsxs(Rt,{sx:{position:"relative"},children:[V.jsx(G0,{fullWidth:!0,multiline:!0,maxRows:4,value:i,onChange:P=>n(P.target.value),onFocus:()=>h(!0),onBlur:()=>setTimeout(()=>h(!1),100),onKeyPress:S,placeholder:a?"Recording voice message...":u?"Add a message with your file...":"Type your message...",inputRef:b,sx:{"& .MuiOutlinedInput-root":{color:r.palette.text.primary,bgcolor:"rgba(15, 23, 42, 0.3)",borderRadius:"16px",transition:"all 0.3s ease",pr:11,"& fieldset":{borderColor:"rgba(148, 163, 184, 0.2)"},"&:hover fieldset":{borderColor:"rgba(139, 92, 246, 0.5)"},"&.Mui-focused fieldset":{borderColor:r.palette.primary.main}}},InputProps:{endAdornment:V.jsxs(Rt,{sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",display:"flex",gap:.5},children:[V.jsx("input",{type:"file",ref:p,onChange:C,style:{display:"none"}}),!(t!=null&&t.isGuest)&&V.jsxs(V.Fragment,{children:[V.jsx(mE,{title:"Attach file",children:V.jsx(fp,{size:"small",onClick:()=>p.current.click(),sx:{color:r.palette.text.secondary,"&:hover":{color:r.palette.primary.main}},children:V.jsx(Zre,{fontSize:"small"})})}),V.jsx(mE,{title:a?"Stop recording":"Voice message",children:V.jsx(fp,{size:"small",onClick:T,sx:{color:a?r.palette.error.main:r.palette.text.secondary,animation:a?"pulse 1.5s infinite":"none","&:hover":{color:a?r.palette.error.dark:r.palette.primary.main}},children:a?V.jsx(dY,{fontSize:"small"}):V.jsx(cY,{fontSize:"small"})})})]}),V.jsx(Rt,{sx:{mx:.5,height:24,borderLeft:"1px solid",borderColor:"divider"}}),V.jsx(mE,{title:"Send message",children:V.jsx("span",{children:V.jsx(fp,{size:"small",onClick:x,disabled:!i.trim()&&!u||f,sx:{color:"white",bgcolor:r.palette.primary.main,"&:hover":{bgcolor:r.palette.primary.dark},"&.Mui-disabled":{bgcolor:"rgba(148, 163, 184, 0.2)",color:"rgba(255, 255, 255, 0.3)"},transition:"all 0.3s ease",transform:i.trim()||u?"scale(1)":"scale(0.9)"},children:V.jsx(J_t,{fontSize:"small"})})})})]})}}),V.jsx(fY,{children:d&&w.length>0&&!i.trim()&&V.jsx(Fr.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},style:{position:"absolute",bottom:"100%",left:0,width:"100%",marginBottom:"8px",zIndex:10},children:V.jsxs(Na,{elevation:3,sx:{p:1,bgcolor:"rgba(30, 41, 59, 0.95)",borderRadius:2,backdropFilter:"blur(10px)",border:"1px solid rgba(148, 163, 184, 0.1)"},children:[V.jsxs(Rt,{sx:{display:"flex",alignItems:"center",mb:1,px:1},children:[V.jsx(Z_t,{fontSize:"small",sx:{color:r.palette.warning.main,mr:1}}),V.jsx(Qt,{variant:"caption",color:"text.secondary",children:"Suggested questions:"})]}),V.jsx(pX,{direction:"row",spacing:1,sx:{flexWrap:"wrap",gap:1,px:1},children:w.map((P,O)=>V.jsx($7,{label:P,size:"small",icon:V.jsx(ewt,{sx:{fontSize:"0.7rem !important"}}),onClick:()=>{n(P),h(!1),setTimeout(()=>x(),100)},sx:{bgcolor:"rgba(139, 92, 246, 0.1)",color:r.palette.text.primary,borderRadius:"12px","&:hover":{bgcolor:"rgba(139, 92, 246, 0.2)"},"& .MuiChip-icon":{color:r.palette.primary.light}}},O))})]})})})]}),f&&V.jsx(Rt,{sx:{width:"100%",mt:1},children:V.jsx(nX,{color:"primary",sx:{height:2,borderRadius:1,"& .MuiLinearProgress-bar":{background:`linear-gradient(90deg, ${r.palette.primary.main}, ${r.palette.secondary.main})`}}})})]})};var gL,tie;function rwt(){return tie||(tie=1,gL=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(i,n,a){r.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:a})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,n){if(1&n&&(i=r(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var o in i)r.d(a,o,(function(s){return i[s]}).bind(null,o));return a},r.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(n,"a",n),n},r.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},r.p="",r(r.s=9)}([function(e,t){e.exports=u2()},function(e,t,r){var i;/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var n={}.hasOwnProperty;function a(){for(var o=[],s=0;s<arguments.length;s++){var l=arguments[s];if(l){var u=typeof l;if(u==="string"||u==="number")o.push(l);else if(Array.isArray(l)&&l.length){var c=a.apply(null,l);c&&o.push(c)}else if(u==="object")for(var d in l)n.call(l,d)&&l[d]&&o.push(d)}}return o.join(" ")}e.exports?(a.default=a,e.exports=a):(i=(function(){return a}).apply(t,[]))===void 0||(e.exports=i)})()},function(e,t,r){(function(i){var n=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,u=typeof i=="object"&&i&&i.Object===Object&&i,c=typeof self=="object"&&self&&self.Object===Object&&self,d=u||c||Function("return this")(),h=Object.prototype.toString,f=d.Symbol,g=f?f.prototype:void 0,p=g?g.toString:void 0;function m(x){if(typeof x=="string")return x;if(b(x))return p?p.call(x):"";var S=x+"";return S=="0"&&1/x==-1/0?"-0":S}function y(x){var S=typeof x;return!!x&&(S=="object"||S=="function")}function b(x){return typeof x=="symbol"||function(S){return!!S&&typeof S=="object"}(x)&&h.call(x)=="[object Symbol]"}function w(x){return x?(x=function(S){if(typeof S=="number")return S;if(b(S))return NaN;if(y(S)){var C=typeof S.valueOf=="function"?S.valueOf():S;S=y(C)?C+"":C}if(typeof S!="string")return S===0?S:+S;S=S.replace(n,"");var T=o.test(S);return T||s.test(S)?l(S.slice(2),T?2:8):a.test(S)?NaN:+S}(x))===1/0||x===-1/0?17976931348623157e292*(x<0?-1:1):x==x?x:0:x===0?x:0}e.exports=function(x,S,C){var T,M,A,P;return x=(T=x)==null?"":m(T),M=function(O){var j=w(O),D=j%1;return j==j?D?j-D:j:0}(C),A=0,P=x.length,M==M&&(P!==void 0&&(M=M<=P?M:P),A!==void 0&&(M=M>=A?M:A)),C=M,S=m(S),x.slice(C,C+S.length)==S}}).call(this,r(3))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}e.exports=r},function(e,t,r){(function(i){var n=/^\[object .+?Constructor\]$/,a=typeof i=="object"&&i&&i.Object===Object&&i,o=typeof self=="object"&&self&&self.Object===Object&&self,s=a||o||Function("return this")(),l,u=Array.prototype,c=Function.prototype,d=Object.prototype,h=s["__core-js_shared__"],f=(l=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",g=c.toString,p=d.hasOwnProperty,m=d.toString,y=RegExp("^"+g.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=u.splice,w=O(s,"Map"),x=O(Object,"create");function S(I){var q=-1,$=I?I.length:0;for(this.clear();++q<$;){var X=I[q];this.set(X[0],X[1])}}function C(I){var q=-1,$=I?I.length:0;for(this.clear();++q<$;){var X=I[q];this.set(X[0],X[1])}}function T(I){var q=-1,$=I?I.length:0;for(this.clear();++q<$;){var X=I[q];this.set(X[0],X[1])}}function M(I,q){for(var $,X,N=I.length;N--;)if(($=I[N][0])===(X=q)||$!=$&&X!=X)return N;return-1}function A(I){return!(!D(I)||(q=I,f&&f in q))&&(function($){var X=D($)?m.call($):"";return X=="[object Function]"||X=="[object GeneratorFunction]"}(I)||function($){var X=!1;if($!=null&&typeof $.toString!="function")try{X=!!($+"")}catch{}return X}(I)?y:n).test(function($){if($!=null){try{return g.call($)}catch{}try{return $+""}catch{}}return""}(I));var q}function P(I,q){var $,X,N=I.__data__;return((X=typeof($=q))=="string"||X=="number"||X=="symbol"||X=="boolean"?$!=="__proto__":$===null)?N[typeof q=="string"?"string":"hash"]:N.map}function O(I,q){var $=function(X,N){return X==null?void 0:X[N]}(I,q);return A($)?$:void 0}function j(I,q){if(typeof I!="function"||q&&typeof q!="function")throw new TypeError("Expected a function");var $=function(){var X=arguments,N=q?q.apply(this,X):X[0],Q=$.cache;if(Q.has(N))return Q.get(N);var F=I.apply(this,X);return $.cache=Q.set(N,F),F};return $.cache=new(j.Cache||T),$}function D(I){var q=typeof I;return!!I&&(q=="object"||q=="function")}S.prototype.clear=function(){this.__data__=x?x(null):{}},S.prototype.delete=function(I){return this.has(I)&&delete this.__data__[I]},S.prototype.get=function(I){var q=this.__data__;if(x){var $=q[I];return $==="__lodash_hash_undefined__"?void 0:$}return p.call(q,I)?q[I]:void 0},S.prototype.has=function(I){var q=this.__data__;return x?q[I]!==void 0:p.call(q,I)},S.prototype.set=function(I,q){return this.__data__[I]=x&&q===void 0?"__lodash_hash_undefined__":q,this},C.prototype.clear=function(){this.__data__=[]},C.prototype.delete=function(I){var q=this.__data__,$=M(q,I);return!($<0)&&($==q.length-1?q.pop():b.call(q,$,1),!0)},C.prototype.get=function(I){var q=this.__data__,$=M(q,I);return $<0?void 0:q[$][1]},C.prototype.has=function(I){return M(this.__data__,I)>-1},C.prototype.set=function(I,q){var $=this.__data__,X=M($,I);return X<0?$.push([I,q]):$[X][1]=q,this},T.prototype.clear=function(){this.__data__={hash:new S,map:new(w||C),string:new S}},T.prototype.delete=function(I){return P(this,I).delete(I)},T.prototype.get=function(I){return P(this,I).get(I)},T.prototype.has=function(I){return P(this,I).has(I)},T.prototype.set=function(I,q){return P(this,I).set(I,q),this},j.Cache=T,e.exports=j}).call(this,r(3))},function(e,t,r){(function(i){var n=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,u=typeof i=="object"&&i&&i.Object===Object&&i,c=typeof self=="object"&&self&&self.Object===Object&&self,d=u||c||Function("return this")(),h=Object.prototype.toString,f=Math.max,g=Math.min,p=function(){return d.Date.now()};function m(b){var w=typeof b;return!!b&&(w=="object"||w=="function")}function y(b){if(typeof b=="number")return b;if(function(S){return typeof S=="symbol"||function(C){return!!C&&typeof C=="object"}(S)&&h.call(S)=="[object Symbol]"}(b))return NaN;if(m(b)){var w=typeof b.valueOf=="function"?b.valueOf():b;b=m(w)?w+"":w}if(typeof b!="string")return b===0?b:+b;b=b.replace(n,"");var x=o.test(b);return x||s.test(b)?l(b.slice(2),x?2:8):a.test(b)?NaN:+b}e.exports=function(b,w,x){var S,C,T,M,A,P,O=0,j=!1,D=!1,I=!0;if(typeof b!="function")throw new TypeError("Expected a function");function q(L){var Y=S,ae=C;return S=C=void 0,O=L,M=b.apply(ae,Y)}function $(L){return O=L,A=setTimeout(N,w),j?q(L):M}function X(L){var Y=L-P;return P===void 0||Y>=w||Y<0||D&&L-O>=T}function N(){var L=p();if(X(L))return Q(L);A=setTimeout(N,function(Y){var ae=w-(Y-P);return D?g(ae,T-(Y-O)):ae}(L))}function Q(L){return A=void 0,I&&S?q(L):(S=C=void 0,M)}function F(){var L=p(),Y=X(L);if(S=arguments,C=this,P=L,Y){if(A===void 0)return $(P);if(D)return A=setTimeout(N,w),q(P)}return A===void 0&&(A=setTimeout(N,w)),M}return w=y(w)||0,m(x)&&(j=!!x.leading,T=(D="maxWait"in x)?f(y(x.maxWait)||0,w):T,I="trailing"in x?!!x.trailing:I),F.cancel=function(){A!==void 0&&clearTimeout(A),O=0,S=P=C=A=void 0},F.flush=function(){return A===void 0?M:Q(p())},F}}).call(this,r(3))},function(e,t,r){(function(i,n){var a="[object Arguments]",o="[object Map]",s="[object Object]",l="[object Set]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,d=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m[a]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m[o]=m["[object Number]"]=m[s]=m["[object RegExp]"]=m[l]=m["[object String]"]=m["[object WeakMap]"]=!1;var y=typeof i=="object"&&i&&i.Object===Object&&i,b=typeof self=="object"&&self&&self.Object===Object&&self,w=y||b||Function("return this")(),x=t&&!t.nodeType&&t,S=x&&typeof n=="object"&&n&&!n.nodeType&&n,C=S&&S.exports===x&&y.process,T=function(){try{return C&&C.binding("util")}catch{}}(),M=T&&T.isTypedArray;function A(Se,Ge,ut,vt){var _t=-1,St=Se?Se.length:0;for(vt&&St&&(ut=Se[++_t]);++_t<St;)ut=Ge(ut,Se[_t],_t,Se);return ut}function P(Se,Ge){for(var ut=-1,vt=Se?Se.length:0;++ut<vt;)if(Ge(Se[ut],ut,Se))return!0;return!1}function O(Se,Ge,ut,vt,_t){return _t(Se,function(St,Kt,Nt){ut=vt?(vt=!1,St):Ge(ut,St,Kt,Nt)}),ut}function j(Se){var Ge=!1;if(Se!=null&&typeof Se.toString!="function")try{Ge=!!(Se+"")}catch{}return Ge}function D(Se){var Ge=-1,ut=Array(Se.size);return Se.forEach(function(vt,_t){ut[++Ge]=[_t,vt]}),ut}function I(Se){var Ge=-1,ut=Array(Se.size);return Se.forEach(function(vt){ut[++Ge]=vt}),ut}var q,$,X,N=Array.prototype,Q=Function.prototype,F=Object.prototype,L=w["__core-js_shared__"],Y=(q=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",ae=Q.toString,re=F.hasOwnProperty,H=F.toString,se=RegExp("^"+ae.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),le=w.Symbol,ee=w.Uint8Array,J=F.propertyIsEnumerable,oe=N.splice,me=($=Object.keys,X=Object,function(Se){return $(X(Se))}),be=mr(w,"DataView"),de=mr(w,"Map"),ge=mr(w,"Promise"),ce=mr(w,"Set"),Ce=mr(w,"WeakMap"),Ee=mr(Object,"create"),Me=nr(be),he=nr(de),Ae=nr(ge),De=nr(ce),Z=nr(Ce),ie=le?le.prototype:void 0,Te=ie?ie.valueOf:void 0,Ue=ie?ie.toString:void 0;function ne(Se){var Ge=-1,ut=Se?Se.length:0;for(this.clear();++Ge<ut;){var vt=Se[Ge];this.set(vt[0],vt[1])}}function K(Se){var Ge=-1,ut=Se?Se.length:0;for(this.clear();++Ge<ut;){var vt=Se[Ge];this.set(vt[0],vt[1])}}function B(Se){var Ge=-1,ut=Se?Se.length:0;for(this.clear();++Ge<ut;){var vt=Se[Ge];this.set(vt[0],vt[1])}}function U(Se){var Ge=-1,ut=Se?Se.length:0;for(this.__data__=new B;++Ge<ut;)this.add(Se[Ge])}function te(Se){this.__data__=new K(Se)}function ve(Se,Ge){var ut=tt(Se)||We(Se)?function(Kt,Nt){for(var Ir=-1,zr=Array(Kt);++Ir<Kt;)zr[Ir]=Nt(Ir);return zr}(Se.length,String):[],vt=ut.length,_t=!!vt;for(var St in Se)!re.call(Se,St)||_t&&(St=="length"||ye(St,vt))||ut.push(St);return ut}function Re(Se,Ge){for(var ut=Se.length;ut--;)if(we(Se[ut][0],Ge))return ut;return-1}ne.prototype.clear=function(){this.__data__=Ee?Ee(null):{}},ne.prototype.delete=function(Se){return this.has(Se)&&delete this.__data__[Se]},ne.prototype.get=function(Se){var Ge=this.__data__;if(Ee){var ut=Ge[Se];return ut==="__lodash_hash_undefined__"?void 0:ut}return re.call(Ge,Se)?Ge[Se]:void 0},ne.prototype.has=function(Se){var Ge=this.__data__;return Ee?Ge[Se]!==void 0:re.call(Ge,Se)},ne.prototype.set=function(Se,Ge){return this.__data__[Se]=Ee&&Ge===void 0?"__lodash_hash_undefined__":Ge,this},K.prototype.clear=function(){this.__data__=[]},K.prototype.delete=function(Se){var Ge=this.__data__,ut=Re(Ge,Se);return!(ut<0)&&(ut==Ge.length-1?Ge.pop():oe.call(Ge,ut,1),!0)},K.prototype.get=function(Se){var Ge=this.__data__,ut=Re(Ge,Se);return ut<0?void 0:Ge[ut][1]},K.prototype.has=function(Se){return Re(this.__data__,Se)>-1},K.prototype.set=function(Se,Ge){var ut=this.__data__,vt=Re(ut,Se);return vt<0?ut.push([Se,Ge]):ut[vt][1]=Ge,this},B.prototype.clear=function(){this.__data__={hash:new ne,map:new(de||K),string:new ne}},B.prototype.delete=function(Se){return qt(this,Se).delete(Se)},B.prototype.get=function(Se){return qt(this,Se).get(Se)},B.prototype.has=function(Se){return qt(this,Se).has(Se)},B.prototype.set=function(Se,Ge){return qt(this,Se).set(Se,Ge),this},U.prototype.add=U.prototype.push=function(Se){return this.__data__.set(Se,"__lodash_hash_undefined__"),this},U.prototype.has=function(Se){return this.__data__.has(Se)},te.prototype.clear=function(){this.__data__=new K},te.prototype.delete=function(Se){return this.__data__.delete(Se)},te.prototype.get=function(Se){return this.__data__.get(Se)},te.prototype.has=function(Se){return this.__data__.has(Se)},te.prototype.set=function(Se,Ge){var ut=this.__data__;if(ut instanceof K){var vt=ut.__data__;if(!de||vt.length<199)return vt.push([Se,Ge]),this;ut=this.__data__=new B(vt)}return ut.set(Se,Ge),this};var Fe,et=(Fe=function(Se,Ge){return Se&&Ze(Se,Ge,Vt)},function(Se,Ge){if(Se==null)return Se;if(!qe(Se))return Fe(Se,Ge);for(var ut=Se.length,vt=-1,_t=Object(Se);++vt<ut&&Ge(_t[vt],vt,_t)!==!1;);return Se}),Ze=function(Se){return function(Ge,ut,vt){for(var _t=-1,St=Object(Ge),Kt=vt(Ge),Nt=Kt.length;Nt--;){var Ir=Kt[++_t];if(ut(St[Ir],Ir,St)===!1)break}return Ge}}();function Pe(Se,Ge){for(var ut=0,vt=(Ge=xe(Ge,Se)?[Ge]:mt(Ge)).length;Se!=null&&ut<vt;)Se=Se[Lt(Ge[ut++])];return ut&&ut==vt?Se:void 0}function Le(Se,Ge){return Se!=null&&Ge in Object(Se)}function ht(Se,Ge,ut,vt,_t){return Se===Ge||(Se==null||Ge==null||!Ft(Se)&&!$t(Ge)?Se!=Se&&Ge!=Ge:function(St,Kt,Nt,Ir,zr,Pr){var pi=tt(St),ue=tt(Kt),pe="[object Array]",Oe="[object Array]";pi||(pe=(pe=Rr(St))==a?s:pe),ue||(Oe=(Oe=Rr(Kt))==a?s:Oe);var _e=pe==s&&!j(St),Ve=Oe==s&&!j(Kt),ft=pe==Oe;if(ft&&!_e)return Pr||(Pr=new te),pi||gr(St)?It(St,Kt,Nt,Ir,zr,Pr):function(Yr,Wr,Nv,Bf,ig,Pn,nl){switch(Nv){case"[object DataView]":if(Yr.byteLength!=Wr.byteLength||Yr.byteOffset!=Wr.byteOffset)return!1;Yr=Yr.buffer,Wr=Wr.buffer;case"[object ArrayBuffer]":return!(Yr.byteLength!=Wr.byteLength||!Bf(new ee(Yr),new ee(Wr)));case"[object Boolean]":case"[object Date]":case"[object Number]":return we(+Yr,+Wr);case"[object Error]":return Yr.name==Wr.name&&Yr.message==Wr.message;case"[object RegExp]":case"[object String]":return Yr==Wr+"";case o:var ps=D;case l:var Gr=2&Pn;if(ps||(ps=I),Yr.size!=Wr.size&&!Gr)return!1;var Uv=nl.get(Yr);if(Uv)return Uv==Wr;Pn|=1,nl.set(Yr,Wr);var kp=It(ps(Yr),ps(Wr),Bf,ig,Pn,nl);return nl.delete(Yr),kp;case"[object Symbol]":if(Te)return Te.call(Yr)==Te.call(Wr)}return!1}(St,Kt,pe,Nt,Ir,zr,Pr);if(!(2&zr)){var oa=_e&&re.call(St,"__wrapped__"),il=Ve&&re.call(Kt,"__wrapped__");if(oa||il){var fs=oa?St.value():St,zf=il?Kt.value():Kt;return Pr||(Pr=new te),Nt(fs,zf,Ir,zr,Pr)}}return ft?(Pr||(Pr=new te),function(Yr,Wr,Nv,Bf,ig,Pn){var nl=2&ig,ps=Vt(Yr),Gr=ps.length,Uv=Vt(Wr).length;if(Gr!=Uv&&!nl)return!1;for(var kp=Gr;kp--;){var ms=ps[kp];if(!(nl?ms in Wr:re.call(Wr,ms)))return!1}var Uw=Pn.get(Yr);if(Uw&&Pn.get(Wr))return Uw==Wr;var Vv=!0;Pn.set(Yr,Wr),Pn.set(Wr,Yr);for(var Ab=nl;++kp<Gr;){ms=ps[kp];var ng=Yr[ms],qp=Wr[ms];if(Bf)var al=nl?Bf(qp,ng,ms,Wr,Yr,Pn):Bf(ng,qp,ms,Yr,Wr,Pn);if(!(al===void 0?ng===qp||Nv(ng,qp,Bf,ig,Pn):al)){Vv=!1;break}Ab||(Ab=ms=="constructor")}if(Vv&&!Ab){var Vo=Yr.constructor,ko=Wr.constructor;Vo==ko||!("constructor"in Yr)||!("constructor"in Wr)||typeof Vo=="function"&&Vo instanceof Vo&&typeof ko=="function"&&ko instanceof ko||(Vv=!1)}return Pn.delete(Yr),Pn.delete(Wr),Vv}(St,Kt,Nt,Ir,zr,Pr)):!1}(Se,Ge,ht,ut,vt,_t))}function Be(Se){return!(!Ft(Se)||function(Ge){return!!Y&&Y in Ge}(Se))&&(nt(Se)||j(Se)?se:g).test(nr(Se))}function Ye(Se){return typeof Se=="function"?Se:Se==null?dr:typeof Se=="object"?tt(Se)?function(vt,_t){return xe(vt)&&He(_t)?Xe(Lt(vt),_t):function(St){var Kt=function(Nt,Ir,zr){var Pr=Nt==null?void 0:Pe(Nt,Ir);return Pr===void 0?zr:Pr}(St,vt);return Kt===void 0&&Kt===_t?function(Nt,Ir){return Nt!=null&&function(zr,Pr,pi){Pr=xe(Pr,zr)?[Pr]:mt(Pr);for(var ue,pe=-1,Oe=Pr.length;++pe<Oe;){var _e=Lt(Pr[pe]);if(!(ue=zr!=null&&pi(zr,_e)))break;zr=zr[_e]}return ue||!!(Oe=zr?zr.length:0)&&Tt(Oe)&&ye(_e,Oe)&&(tt(zr)||We(zr))}(Nt,Ir,Le)}(St,vt):ht(_t,Kt,void 0,3)}}(Se[0],Se[1]):function(vt){var _t=function(St){for(var Kt=Vt(St),Nt=Kt.length;Nt--;){var Ir=Kt[Nt],zr=St[Ir];Kt[Nt]=[Ir,zr,He(zr)]}return Kt}(vt);return _t.length==1&&_t[0][2]?Xe(_t[0][0],_t[0][1]):function(St){return St===vt||function(Kt,Nt,Ir,zr){var Pr=Ir.length,pi=Pr;if(Kt==null)return!pi;for(Kt=Object(Kt);Pr--;){var ue=Ir[Pr];if(ue[2]?ue[1]!==Kt[ue[0]]:!(ue[0]in Kt))return!1}for(;++Pr<pi;){var pe=(ue=Ir[Pr])[0],Oe=Kt[pe],_e=ue[1];if(ue[2]){if(Oe===void 0&&!(pe in Kt))return!1}else{var Ve=new te,ft;if(!(ft===void 0?ht(_e,Oe,zr,3,Ve):ft))return!1}}return!0}(St,vt,_t)}}(Se):xe(Ge=Se)?(ut=Lt(Ge),function(vt){return vt==null?void 0:vt[ut]}):function(vt){return function(_t){return Pe(_t,vt)}}(Ge);var Ge,ut}function $e(Se){if(ut=(Ge=Se)&&Ge.constructor,vt=typeof ut=="function"&&ut.prototype||F,Ge!==vt)return me(Se);var Ge,ut,vt,_t=[];for(var St in Object(Se))re.call(Se,St)&&St!="constructor"&&_t.push(St);return _t}function mt(Se){return tt(Se)?Se:pt(Se)}function It(Se,Ge,ut,vt,_t,St){var Kt=2&_t,Nt=Se.length,Ir=Ge.length;if(Nt!=Ir&&!(Kt&&Ir>Nt))return!1;var zr=St.get(Se);if(zr&&St.get(Ge))return zr==Ge;var Pr=-1,pi=!0,ue=1&_t?new U:void 0;for(St.set(Se,Ge),St.set(Ge,Se);++Pr<Nt;){var pe=Se[Pr],Oe=Ge[Pr];if(vt)var _e=Kt?vt(Oe,pe,Pr,Ge,Se,St):vt(pe,Oe,Pr,Se,Ge,St);if(_e!==void 0){if(_e)continue;pi=!1;break}if(ue){if(!P(Ge,function(Ve,ft){if(!ue.has(ft)&&(pe===Ve||ut(pe,Ve,vt,_t,St)))return ue.add(ft)})){pi=!1;break}}else if(pe!==Oe&&!ut(pe,Oe,vt,_t,St)){pi=!1;break}}return St.delete(Se),St.delete(Ge),pi}function qt(Se,Ge){var ut,vt,_t=Se.__data__;return((vt=typeof(ut=Ge))=="string"||vt=="number"||vt=="symbol"||vt=="boolean"?ut!=="__proto__":ut===null)?_t[typeof Ge=="string"?"string":"hash"]:_t.map}function mr(Se,Ge){var ut=function(vt,_t){return vt==null?void 0:vt[_t]}(Se,Ge);return Be(ut)?ut:void 0}var Rr=function(Se){return H.call(Se)};function ye(Se,Ge){return!!(Ge=Ge??9007199254740991)&&(typeof Se=="number"||p.test(Se))&&Se>-1&&Se%1==0&&Se<Ge}function xe(Se,Ge){if(tt(Se))return!1;var ut=typeof Se;return!(ut!="number"&&ut!="symbol"&&ut!="boolean"&&Se!=null&&!zt(Se))||c.test(Se)||!u.test(Se)||Ge!=null&&Se in Object(Ge)}function He(Se){return Se==Se&&!Ft(Se)}function Xe(Se,Ge){return function(ut){return ut!=null&&ut[Se]===Ge&&(Ge!==void 0||Se in Object(ut))}}(be&&Rr(new be(new ArrayBuffer(1)))!="[object DataView]"||de&&Rr(new de)!=o||ge&&Rr(ge.resolve())!="[object Promise]"||ce&&Rr(new ce)!=l||Ce&&Rr(new Ce)!="[object WeakMap]")&&(Rr=function(Se){var Ge=H.call(Se),ut=Ge==s?Se.constructor:void 0,vt=ut?nr(ut):void 0;if(vt)switch(vt){case Me:return"[object DataView]";case he:return o;case Ae:return"[object Promise]";case De:return l;case Z:return"[object WeakMap]"}return Ge});var pt=Xr(function(Se){var Ge;Se=(Ge=Se)==null?"":function(vt){if(typeof vt=="string")return vt;if(zt(vt))return Ue?Ue.call(vt):"";var _t=vt+"";return _t=="0"&&1/vt==-1/0?"-0":_t}(Ge);var ut=[];return d.test(Se)&&ut.push(""),Se.replace(h,function(vt,_t,St,Kt){ut.push(St?Kt.replace(f,"$1"):_t||vt)}),ut});function Lt(Se){if(typeof Se=="string"||zt(Se))return Se;var Ge=Se+"";return Ge=="0"&&1/Se==-1/0?"-0":Ge}function nr(Se){if(Se!=null){try{return ae.call(Se)}catch{}try{return Se+""}catch{}}return""}function Xr(Se,Ge){if(typeof Se!="function"||Ge&&typeof Ge!="function")throw new TypeError("Expected a function");var ut=function(){var vt=arguments,_t=Ge?Ge.apply(this,vt):vt[0],St=ut.cache;if(St.has(_t))return St.get(_t);var Kt=Se.apply(this,vt);return ut.cache=St.set(_t,Kt),Kt};return ut.cache=new(Xr.Cache||B),ut}function we(Se,Ge){return Se===Ge||Se!=Se&&Ge!=Ge}function We(Se){return function(Ge){return $t(Ge)&&qe(Ge)}(Se)&&re.call(Se,"callee")&&(!J.call(Se,"callee")||H.call(Se)==a)}Xr.Cache=B;var tt=Array.isArray;function qe(Se){return Se!=null&&Tt(Se.length)&&!nt(Se)}function nt(Se){var Ge=Ft(Se)?H.call(Se):"";return Ge=="[object Function]"||Ge=="[object GeneratorFunction]"}function Tt(Se){return typeof Se=="number"&&Se>-1&&Se%1==0&&Se<=9007199254740991}function Ft(Se){var Ge=typeof Se;return!!Se&&(Ge=="object"||Ge=="function")}function $t(Se){return!!Se&&typeof Se=="object"}function zt(Se){return typeof Se=="symbol"||$t(Se)&&H.call(Se)=="[object Symbol]"}var gr=M?function(Se){return function(Ge){return Se(Ge)}}(M):function(Se){return $t(Se)&&Tt(Se.length)&&!!m[H.call(Se)]};function Vt(Se){return qe(Se)?ve(Se):$e(Se)}function dr(Se){return Se}n.exports=function(Se,Ge,ut){var vt=tt(Se)?A:O,_t=arguments.length<3;return vt(Se,Ye(Ge),ut,_t,et)}}).call(this,r(3),r(7)(e))},function(e,t){e.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(e,t){String.prototype.padEnd||(String.prototype.padEnd=function(r,i){return r>>=0,i=String(i!==void 0?i:" "),this.length>r?String(this):((r-=this.length)>i.length&&(i+=i.repeat(r/i.length)),String(this)+i.slice(0,r))})},function(e,t,r){function i(F,L,Y){return L in F?Object.defineProperty(F,L,{value:Y,enumerable:!0,configurable:!0,writable:!0}):F[L]=Y,F}function n(F){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]")return Array.from(F)}function a(F){return function(L){if(Array.isArray(L)){for(var Y=0,ae=new Array(L.length);Y<L.length;Y++)ae[Y]=L[Y];return ae}}(F)||n(F)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(F){if(Array.isArray(F))return F}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(F,L){if(!(F instanceof L))throw new TypeError("Cannot call a class as a function")}function u(F,L){for(var Y=0;Y<L.length;Y++){var ae=L[Y];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(F,ae.key,ae)}}function c(F){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(F)}function d(F){return(d=typeof Symbol=="function"&&c(Symbol.iterator)==="symbol"?function(L){return c(L)}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":c(L)})(F)}function h(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function f(F){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)})(F)}function g(F,L){return(g=Object.setPrototypeOf||function(Y,ae){return Y.__proto__=ae,Y})(F,L)}r.r(t);var p=r(0),m=r.n(p),y=r(5),b=r.n(y),w=r(4),x=r.n(w),S=r(6),C=r.n(S),T=r(2),M=r.n(T),A=r(1),P=r.n(A);r(8);function O(F,L){return o(F)||function(Y,ae){var re=[],H=!0,se=!1,le=void 0;try{for(var ee,J=Y[Symbol.iterator]();!(H=(ee=J.next()).done)&&(re.push(ee.value),!ae||re.length!==ae);H=!0);}catch(oe){se=!0,le=oe}finally{try{H||J.return==null||J.return()}finally{if(se)throw le}}return re}(F,L)||s()}var j=[["Afghanistan",["asia"],"af","93"],["Albania",["europe"],"al","355"],["Algeria",["africa","north-africa"],"dz","213"],["Andorra",["europe"],"ad","376"],["Angola",["africa"],"ao","244"],["Antigua and Barbuda",["america","carribean"],"ag","1268"],["Argentina",["america","south-america"],"ar","54","(..) ........",0,["11","221","223","261","264","2652","280","2905","291","2920","2966","299","341","342","343","351","376","379","381","3833","385","387","388"]],["Armenia",["asia","ex-ussr"],"am","374",".. ......"],["Aruba",["america","carribean"],"aw","297"],["Australia",["oceania"],"au","61","(..) .... ....",0,["2","3","4","7","8","02","03","04","07","08"]],["Austria",["europe","eu-union"],"at","43"],["Azerbaijan",["asia","ex-ussr"],"az","994","(..) ... .. .."],["Bahamas",["america","carribean"],"bs","1242"],["Bahrain",["middle-east"],"bh","973"],["Bangladesh",["asia"],"bd","880"],["Barbados",["america","carribean"],"bb","1246"],["Belarus",["europe","ex-ussr"],"by","375","(..) ... .. .."],["Belgium",["europe","eu-union"],"be","32","... .. .. .."],["Belize",["america","central-america"],"bz","501"],["Benin",["africa"],"bj","229"],["Bhutan",["asia"],"bt","975"],["Bolivia",["america","south-america"],"bo","591"],["Bosnia and Herzegovina",["europe","ex-yugos"],"ba","387"],["Botswana",["africa"],"bw","267"],["Brazil",["america","south-america"],"br","55","(..) ........."],["British Indian Ocean Territory",["asia"],"io","246"],["Brunei",["asia"],"bn","673"],["Bulgaria",["europe","eu-union"],"bg","359"],["Burkina Faso",["africa"],"bf","226"],["Burundi",["africa"],"bi","257"],["Cambodia",["asia"],"kh","855"],["Cameroon",["africa"],"cm","237"],["Canada",["america","north-america"],"ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde",["africa"],"cv","238"],["Caribbean Netherlands",["america","carribean"],"bq","599","",1],["Central African Republic",["africa"],"cf","236"],["Chad",["africa"],"td","235"],["Chile",["america","south-america"],"cl","56"],["China",["asia"],"cn","86","..-........."],["Colombia",["america","south-america"],"co","57","... ... ...."],["Comoros",["africa"],"km","269"],["Congo",["africa"],"cd","243"],["Congo",["africa"],"cg","242"],["Costa Rica",["america","central-america"],"cr","506","....-...."],["Cte dIvoire",["africa"],"ci","225",".. .. .. .."],["Croatia",["europe","eu-union","ex-yugos"],"hr","385"],["Cuba",["america","carribean"],"cu","53"],["Curaao",["america","carribean"],"cw","599","",0],["Cyprus",["europe","eu-union"],"cy","357",".. ......"],["Czech Republic",["europe","eu-union"],"cz","420","... ... ..."],["Denmark",["europe","eu-union","baltic"],"dk","45",".. .. .. .."],["Djibouti",["africa"],"dj","253"],["Dominica",["america","carribean"],"dm","1767"],["Dominican Republic",["america","carribean"],"do","1","",2,["809","829","849"]],["Ecuador",["america","south-america"],"ec","593"],["Egypt",["africa","north-africa"],"eg","20"],["El Salvador",["america","central-america"],"sv","503","....-...."],["Equatorial Guinea",["africa"],"gq","240"],["Eritrea",["africa"],"er","291"],["Estonia",["europe","eu-union","ex-ussr","baltic"],"ee","372",".... ......"],["Ethiopia",["africa"],"et","251"],["Fiji",["oceania"],"fj","679"],["Finland",["europe","eu-union","baltic"],"fi","358",".. ... .. .."],["France",["europe","eu-union"],"fr","33",". .. .. .. .."],["French Guiana",["america","south-america"],"gf","594"],["French Polynesia",["oceania"],"pf","689"],["Gabon",["africa"],"ga","241"],["Gambia",["africa"],"gm","220"],["Georgia",["asia","ex-ussr"],"ge","995"],["Germany",["europe","eu-union","baltic"],"de","49",".... ........"],["Ghana",["africa"],"gh","233"],["Greece",["europe","eu-union"],"gr","30"],["Grenada",["america","carribean"],"gd","1473"],["Guadeloupe",["america","carribean"],"gp","590","",0],["Guam",["oceania"],"gu","1671"],["Guatemala",["america","central-america"],"gt","502","....-...."],["Guinea",["africa"],"gn","224"],["Guinea-Bissau",["africa"],"gw","245"],["Guyana",["america","south-america"],"gy","592"],["Haiti",["america","carribean"],"ht","509","....-...."],["Honduras",["america","central-america"],"hn","504"],["Hong Kong",["asia"],"hk","852",".... ...."],["Hungary",["europe","eu-union"],"hu","36"],["Iceland",["europe"],"is","354","... ...."],["India",["asia"],"in","91",".....-....."],["Indonesia",["asia"],"id","62"],["Iran",["middle-east"],"ir","98","... ... ...."],["Iraq",["middle-east"],"iq","964"],["Ireland",["europe","eu-union"],"ie","353",".. ......."],["Israel",["middle-east"],"il","972","... ... ...."],["Italy",["europe","eu-union"],"it","39","... .......",0],["Jamaica",["america","carribean"],"jm","1876"],["Japan",["asia"],"jp","81",".. .... ...."],["Jordan",["middle-east"],"jo","962"],["Kazakhstan",["asia","ex-ussr"],"kz","7","... ...-..-..",1,["310","311","312","313","315","318","321","324","325","326","327","336","7172","73622"]],["Kenya",["africa"],"ke","254"],["Kiribati",["oceania"],"ki","686"],["Kosovo",["europe","ex-yugos"],"xk","383"],["Kuwait",["middle-east"],"kw","965"],["Kyrgyzstan",["asia","ex-ussr"],"kg","996","... ... ..."],["Laos",["asia"],"la","856"],["Latvia",["europe","eu-union","ex-ussr","baltic"],"lv","371",".. ... ..."],["Lebanon",["middle-east"],"lb","961"],["Lesotho",["africa"],"ls","266"],["Liberia",["africa"],"lr","231"],["Libya",["africa","north-africa"],"ly","218"],["Liechtenstein",["europe"],"li","423"],["Lithuania",["europe","eu-union","ex-ussr","baltic"],"lt","370"],["Luxembourg",["europe","eu-union"],"lu","352"],["Macau",["asia"],"mo","853"],["Macedonia",["europe","ex-yugos"],"mk","389"],["Madagascar",["africa"],"mg","261"],["Malawi",["africa"],"mw","265"],["Malaysia",["asia"],"my","60","..-....-...."],["Maldives",["asia"],"mv","960"],["Mali",["africa"],"ml","223"],["Malta",["europe","eu-union"],"mt","356"],["Marshall Islands",["oceania"],"mh","692"],["Martinique",["america","carribean"],"mq","596"],["Mauritania",["africa"],"mr","222"],["Mauritius",["africa"],"mu","230"],["Mexico",["america","central-america"],"mx","52","... ... ....",0,["55","81","33","656","664","998","774","229"]],["Micronesia",["oceania"],"fm","691"],["Moldova",["europe"],"md","373","(..) ..-..-.."],["Monaco",["europe"],"mc","377"],["Mongolia",["asia"],"mn","976"],["Montenegro",["europe","ex-yugos"],"me","382"],["Morocco",["africa","north-africa"],"ma","212"],["Mozambique",["africa"],"mz","258"],["Myanmar",["asia"],"mm","95"],["Namibia",["africa"],"na","264"],["Nauru",["africa"],"nr","674"],["Nepal",["asia"],"np","977"],["Netherlands",["europe","eu-union"],"nl","31",".. ........"],["New Caledonia",["oceania"],"nc","687"],["New Zealand",["oceania"],"nz","64","...-...-...."],["Nicaragua",["america","central-america"],"ni","505"],["Niger",["africa"],"ne","227"],["Nigeria",["africa"],"ng","234"],["North Korea",["asia"],"kp","850"],["Norway",["europe","baltic"],"no","47","... .. ..."],["Oman",["middle-east"],"om","968"],["Pakistan",["asia"],"pk","92","...-......."],["Palau",["oceania"],"pw","680"],["Palestine",["middle-east"],"ps","970"],["Panama",["america","central-america"],"pa","507"],["Papua New Guinea",["oceania"],"pg","675"],["Paraguay",["america","south-america"],"py","595"],["Peru",["america","south-america"],"pe","51"],["Philippines",["asia"],"ph","63",".... ......."],["Poland",["europe","eu-union","baltic"],"pl","48","...-...-..."],["Portugal",["europe","eu-union"],"pt","351"],["Puerto Rico",["america","carribean"],"pr","1","",3,["787","939"]],["Qatar",["middle-east"],"qa","974"],["Runion",["africa"],"re","262"],["Romania",["europe","eu-union"],"ro","40"],["Russia",["europe","asia","ex-ussr","baltic"],"ru","7","(...) ...-..-..",0],["Rwanda",["africa"],"rw","250"],["Saint Kitts and Nevis",["america","carribean"],"kn","1869"],["Saint Lucia",["america","carribean"],"lc","1758"],["Saint Vincent and the Grenadines",["america","carribean"],"vc","1784"],["Samoa",["oceania"],"ws","685"],["San Marino",["europe"],"sm","378"],["So Tom and Prncipe",["africa"],"st","239"],["Saudi Arabia",["middle-east"],"sa","966"],["Senegal",["africa"],"sn","221"],["Serbia",["europe","ex-yugos"],"rs","381"],["Seychelles",["africa"],"sc","248"],["Sierra Leone",["africa"],"sl","232"],["Singapore",["asia"],"sg","65","....-...."],["Slovakia",["europe","eu-union"],"sk","421"],["Slovenia",["europe","eu-union","ex-yugos"],"si","386"],["Solomon Islands",["oceania"],"sb","677"],["Somalia",["africa"],"so","252"],["South Africa",["africa"],"za","27"],["South Korea",["asia"],"kr","82","... .... ...."],["South Sudan",["africa","north-africa"],"ss","211"],["Spain",["europe","eu-union"],"es","34","... ... ..."],["Sri Lanka",["asia"],"lk","94"],["Sudan",["africa"],"sd","249"],["Suriname",["america","south-america"],"sr","597"],["Swaziland",["africa"],"sz","268"],["Sweden",["europe","eu-union","baltic"],"se","46","(...) ...-..."],["Switzerland",["europe"],"ch","41",".. ... .. .."],["Syria",["middle-east"],"sy","963"],["Taiwan",["asia"],"tw","886"],["Tajikistan",["asia","ex-ussr"],"tj","992"],["Tanzania",["africa"],"tz","255"],["Thailand",["asia"],"th","66"],["Timor-Leste",["asia"],"tl","670"],["Togo",["africa"],"tg","228"],["Tonga",["oceania"],"to","676"],["Trinidad and Tobago",["america","carribean"],"tt","1868"],["Tunisia",["africa","north-africa"],"tn","216"],["Turkey",["europe"],"tr","90","... ... .. .."],["Turkmenistan",["asia","ex-ussr"],"tm","993"],["Tuvalu",["asia"],"tv","688"],["Uganda",["africa"],"ug","256"],["Ukraine",["europe","ex-ussr"],"ua","380","(..) ... .. .."],["United Arab Emirates",["middle-east"],"ae","971"],["United Kingdom",["europe","eu-union"],"gb","44",".... ......"],["United States",["america","north-america"],"us","1","(...) ...-....",0,["907","205","251","256","334","479","501","870","480","520","602","623","928","209","213","310","323","408","415","510","530","559","562","619","626","650","661","707","714","760","805","818","831","858","909","916","925","949","951","303","719","970","203","860","202","302","239","305","321","352","386","407","561","727","772","813","850","863","904","941","954","229","404","478","706","770","912","808","319","515","563","641","712","208","217","309","312","618","630","708","773","815","847","219","260","317","574","765","812","316","620","785","913","270","502","606","859","225","318","337","504","985","413","508","617","781","978","301","410","207","231","248","269","313","517","586","616","734","810","906","989","218","320","507","612","651","763","952","314","417","573","636","660","816","228","601","662","406","252","336","704","828","910","919","701","308","402","603","201","609","732","856","908","973","505","575","702","775","212","315","516","518","585","607","631","716","718","845","914","216","330","419","440","513","614","740","937","405","580","918","503","541","215","412","570","610","717","724","814","401","803","843","864","605","423","615","731","865","901","931","210","214","254","281","325","361","409","432","512","713","806","817","830","903","915","936","940","956","972","979","435","801","276","434","540","703","757","804","802","206","253","360","425","509","262","414","608","715","920","304","307"]],["Uruguay",["america","south-america"],"uy","598"],["Uzbekistan",["asia","ex-ussr"],"uz","998",".. ... .. .."],["Vanuatu",["oceania"],"vu","678"],["Vatican City",["europe"],"va","39",".. .... ....",1],["Venezuela",["america","south-america"],"ve","58"],["Vietnam",["asia"],"vn","84"],["Yemen",["middle-east"],"ye","967"],["Zambia",["africa"],"zm","260"],["Zimbabwe",["africa"],"zw","263"]],D=[["American Samoa",["oceania"],"as","1684"],["Anguilla",["america","carribean"],"ai","1264"],["Bermuda",["america","north-america"],"bm","1441"],["British Virgin Islands",["america","carribean"],"vg","1284"],["Cayman Islands",["america","carribean"],"ky","1345"],["Cook Islands",["oceania"],"ck","682"],["Falkland Islands",["america","south-america"],"fk","500"],["Faroe Islands",["europe"],"fo","298"],["Gibraltar",["europe"],"gi","350"],["Greenland",["america"],"gl","299"],["Jersey",["europe","eu-union"],"je","44",".... ......"],["Montserrat",["america","carribean"],"ms","1664"],["Niue",["asia"],"nu","683"],["Norfolk Island",["oceania"],"nf","672"],["Northern Mariana Islands",["oceania"],"mp","1670"],["Saint Barthlemy",["america","carribean"],"bl","590","",1],["Saint Helena",["africa"],"sh","290"],["Saint Martin",["america","carribean"],"mf","590","",2],["Saint Pierre and Miquelon",["america","north-america"],"pm","508"],["Sint Maarten",["america","carribean"],"sx","1721"],["Tokelau",["oceania"],"tk","690"],["Turks and Caicos Islands",["america","carribean"],"tc","1649"],["U.S. Virgin Islands",["america","carribean"],"vi","1340"],["Wallis and Futuna",["oceania"],"wf","681"]];function I(F,L,Y,ae,re){return!Y||re?F+"".padEnd(L.length,".")+" "+ae:F+"".padEnd(L.length,".")+" "+Y}function q(F,L,Y,ae,re){var H,se,le=[];return se=L===!0,[(H=[]).concat.apply(H,a(F.map(function(ee){var J={name:ee[0],regions:ee[1],iso2:ee[2],countryCode:ee[3],dialCode:ee[3],format:I(Y,ee[3],ee[4],ae,re),priority:ee[5]||0},oe=[];return ee[6]&&ee[6].map(function(me){var be=function(de){for(var ge=1;ge<arguments.length;ge++){var ce=arguments[ge]!=null?arguments[ge]:{},Ce=Object.keys(ce);typeof Object.getOwnPropertySymbols=="function"&&(Ce=Ce.concat(Object.getOwnPropertySymbols(ce).filter(function(Ee){return Object.getOwnPropertyDescriptor(ce,Ee).enumerable}))),Ce.forEach(function(Ee){i(de,Ee,ce[Ee])})}return de}({},J);be.dialCode=ee[3]+me,be.isAreaCode=!0,be.areaCodeLength=me.length,oe.push(be)}),oe.length>0?(J.mainCode=!0,se||L.constructor.name==="Array"&&L.includes(ee[2])?(J.hasAreaCodes=!0,[J].concat(oe)):(le=le.concat(oe),[J])):[J]}))),le]}function $(F,L,Y,ae){if(Y!==null){var re=Object.keys(Y),H=Object.values(Y);re.forEach(function(se,le){if(ae)return F.push([se,H[le]]);var ee=F.findIndex(function(oe){return oe[0]===se});if(ee===-1){var J=[se];J[L]=H[le],F.push(J)}else F[ee][L]=H[le]})}}function X(F,L){return L.length===0?F:F.map(function(Y){var ae=L.findIndex(function(H){return H[0]===Y[2]});if(ae===-1)return Y;var re=L[ae];return re[1]&&(Y[4]=re[1]),re[3]&&(Y[5]=re[3]),re[2]&&(Y[6]=re[2]),Y})}var N=function F(L,Y,ae,re,H,se,le,ee,J,oe,me,be,de,ge){l(this,F),this.filterRegions=function(ie,Te){if(typeof ie=="string"){var Ue=ie;return Te.filter(function(ne){return ne.regions.some(function(K){return K===Ue})})}return Te.filter(function(ne){return ie.map(function(K){return ne.regions.some(function(B){return B===K})}).some(function(K){return K})})},this.sortTerritories=function(ie,Te){var Ue=[].concat(a(ie),a(Te));return Ue.sort(function(ne,K){return ne.name<K.name?-1:ne.name>K.name?1:0}),Ue},this.getFilteredCountryList=function(ie,Te,Ue){return ie.length===0?Te:Ue?ie.map(function(ne){var K=Te.find(function(B){return B.iso2===ne});if(K)return K}).filter(function(ne){return ne}):Te.filter(function(ne){return ie.some(function(K){return K===ne.iso2})})},this.localizeCountries=function(ie,Te,Ue){for(var ne=0;ne<ie.length;ne++)Te[ie[ne].iso2]!==void 0?ie[ne].localName=Te[ie[ne].iso2]:Te[ie[ne].name]!==void 0&&(ie[ne].localName=Te[ie[ne].name]);return Ue||ie.sort(function(K,B){return K.localName<B.localName?-1:K.localName>B.localName?1:0}),ie},this.getCustomAreas=function(ie,Te){for(var Ue=[],ne=0;ne<Te.length;ne++){var K=JSON.parse(JSON.stringify(ie));K.dialCode+=Te[ne],Ue.push(K)}return Ue},this.excludeCountries=function(ie,Te){return Te.length===0?ie:ie.filter(function(Ue){return!Te.includes(Ue.iso2)})};var ce=function(ie,Te,Ue){var ne=[];return $(ne,1,ie,!0),$(ne,3,Te),$(ne,2,Ue),ne}(ee,J,oe),Ce=X(JSON.parse(JSON.stringify(j)),ce),Ee=X(JSON.parse(JSON.stringify(D)),ce),Me=O(q(Ce,L,be,de,ge),2),he=Me[0],Ae=Me[1];if(Y){var De=O(q(Ee,L,be,de,ge),2),Z=De[0];De[1],he=this.sortTerritories(Z,he)}ae&&(he=this.filterRegions(ae,he)),this.onlyCountries=this.localizeCountries(this.excludeCountries(this.getFilteredCountryList(re,he,le.includes("onlyCountries")),se),me,le.includes("onlyCountries")),this.preferredCountries=H.length===0?[]:this.localizeCountries(this.getFilteredCountryList(H,he,le.includes("preferredCountries")),me,le.includes("preferredCountries")),this.hiddenAreaCodes=this.excludeCountries(this.getFilteredCountryList(re,Ae),se)},Q=function(F){function L(re){var H;l(this,L),(H=function(ce,Ce){return!Ce||d(Ce)!=="object"&&typeof Ce!="function"?h(ce):Ce}(this,f(L).call(this,re))).getProbableCandidate=x()(function(ce){return ce&&ce.length!==0?H.state.onlyCountries.filter(function(Ce){return M()(Ce.name.toLowerCase(),ce.toLowerCase())},h(h(H)))[0]:null}),H.guessSelectedCountry=x()(function(ce,Ce,Ee,Me){var he;if(H.props.enableAreaCodes===!1&&(Me.some(function(Z){if(M()(ce,Z.dialCode))return Ee.some(function(ie){if(Z.iso2===ie.iso2&&ie.mainCode)return he=ie,!0}),!0}),he))return he;var Ae=Ee.find(function(Z){return Z.iso2==Ce});if(ce.trim()==="")return Ae;var De=Ee.reduce(function(Z,ie){return M()(ce,ie.dialCode)&&(ie.dialCode.length>Z.dialCode.length||ie.dialCode.length===Z.dialCode.length&&ie.priority<Z.priority)?ie:Z},{dialCode:"",priority:10001},h(h(H)));return De.name?De:Ae}),H.updateCountry=function(ce){var Ce,Ee=H.state.onlyCountries;(Ce=ce.indexOf(0)>="0"&&ce.indexOf(0)<="9"?Ee.find(function(Me){return Me.dialCode==+ce}):Ee.find(function(Me){return Me.iso2==ce}))&&Ce.dialCode&&H.setState({selectedCountry:Ce,formattedNumber:H.props.disableCountryCode?"":H.formatNumber(Ce.dialCode,Ce)})},H.scrollTo=function(ce,Ce){if(ce){var Ee=H.dropdownRef;if(Ee&&document.body){var Me=Ee.offsetHeight,he=Ee.getBoundingClientRect().top+document.body.scrollTop,Ae=he+Me,De=ce,Z=De.getBoundingClientRect(),ie=De.offsetHeight,Te=Z.top+document.body.scrollTop,Ue=Te+ie,ne=Te-he+Ee.scrollTop,K=Me/2-ie/2;if(H.props.enableSearch?Te<he+32:Te<he)Ce&&(ne-=K),Ee.scrollTop=ne;else if(Ue>Ae){Ce&&(ne+=K);var B=Me-ie;Ee.scrollTop=ne-B}}}},H.scrollToTop=function(){var ce=H.dropdownRef;ce&&document.body&&(ce.scrollTop=0)},H.formatNumber=function(ce,Ce){if(!Ce)return ce;var Ee,Me=Ce.format,he=H.props,Ae=he.disableCountryCode,De=he.enableAreaCodeStretch,Z=he.enableLongNumbers,ie=he.autoFormat;if(Ae?((Ee=Me.split(" ")).shift(),Ee=Ee.join(" ")):De&&Ce.isAreaCode?((Ee=Me.split(" "))[1]=Ee[1].replace(/\.+/,"".padEnd(Ce.areaCodeLength,".")),Ee=Ee.join(" ")):Ee=Me,!ce||ce.length===0)return Ae?"":H.props.prefix;if(ce&&ce.length<2||!Ee||!ie)return Ae?ce:H.props.prefix+ce;var Te,Ue=C()(Ee,function(ne,K){if(ne.remainingText.length===0)return ne;if(K!==".")return{formattedText:ne.formattedText+K,remainingText:ne.remainingText};var B,U=o(B=ne.remainingText)||n(B)||s(),te=U[0],ve=U.slice(1);return{formattedText:ne.formattedText+te,remainingText:ve}},{formattedText:"",remainingText:ce.split("")});return(Te=Z?Ue.formattedText+Ue.remainingText.join(""):Ue.formattedText).includes("(")&&!Te.includes(")")&&(Te+=")"),Te},H.cursorToEnd=function(){var ce=H.numberInputRef;if(document.activeElement===ce){ce.focus();var Ce=ce.value.length;ce.value.charAt(Ce-1)===")"&&(Ce-=1),ce.setSelectionRange(Ce,Ce)}},H.getElement=function(ce){return H["flag_no_".concat(ce)]},H.getCountryData=function(){return H.state.selectedCountry?{name:H.state.selectedCountry.name||"",dialCode:H.state.selectedCountry.dialCode||"",countryCode:H.state.selectedCountry.iso2||"",format:H.state.selectedCountry.format||""}:{}},H.handleFlagDropdownClick=function(ce){if(ce.preventDefault(),H.state.showDropdown||!H.props.disabled){var Ce=H.state,Ee=Ce.preferredCountries,Me=Ce.onlyCountries,he=Ce.selectedCountry,Ae=H.concatPreferredCountries(Ee,Me).findIndex(function(De){return De.dialCode===he.dialCode&&De.iso2===he.iso2});H.setState({showDropdown:!H.state.showDropdown,highlightCountryIndex:Ae},function(){H.state.showDropdown&&H.scrollTo(H.getElement(H.state.highlightCountryIndex))})}},H.handleInput=function(ce){var Ce=ce.target.value,Ee=H.props,Me=Ee.prefix,he=Ee.onChange,Ae=H.props.disableCountryCode?"":Me,De=H.state.selectedCountry,Z=H.state.freezeSelection;if(!H.props.countryCodeEditable){var ie=Me+(De.hasAreaCodes?H.state.onlyCountries.find(function(et){return et.iso2===De.iso2&&et.mainCode}).dialCode:De.dialCode);if(Ce.slice(0,ie.length)!==ie)return}if(Ce===Me)return he&&he("",H.getCountryData(),ce,""),H.setState({formattedNumber:""});if(!(Ce.replace(/\D/g,"").length>15&&(H.props.enableLongNumbers===!1||typeof H.props.enableLongNumbers=="number"&&Ce.replace(/\D/g,"").length>H.props.enableLongNumbers))&&Ce!==H.state.formattedNumber){ce.preventDefault?ce.preventDefault():ce.returnValue=!1;var Te=H.props.country,Ue=H.state,ne=Ue.onlyCountries,K=Ue.selectedCountry,B=Ue.hiddenAreaCodes;if(he&&ce.persist(),Ce.length>0){var U=Ce.replace(/\D/g,"");(!H.state.freezeSelection||K&&K.dialCode.length>U.length)&&(De=H.props.disableCountryGuess?K:H.guessSelectedCountry(U.substring(0,6),Te,ne,B)||K,Z=!1),Ae=H.formatNumber(U,De),De=De.dialCode?De:K}var te=ce.target.selectionStart,ve=ce.target.selectionStart,Re=H.state.formattedNumber,Fe=Ae.length-Re.length;H.setState({formattedNumber:Ae,freezeSelection:Z,selectedCountry:De},function(){Fe>0&&(ve-=Fe),Ae.charAt(Ae.length-1)==")"?H.numberInputRef.setSelectionRange(Ae.length-1,Ae.length-1):ve>0&&Re.length>=Ae.length?H.numberInputRef.setSelectionRange(ve,ve):te<Re.length&&H.numberInputRef.setSelectionRange(te,te),he&&he(Ae.replace(/[^0-9]+/g,""),H.getCountryData(),ce,Ae)})}},H.handleInputClick=function(ce){H.setState({showDropdown:!1}),H.props.onClick&&H.props.onClick(ce,H.getCountryData())},H.handleDoubleClick=function(ce){var Ce=ce.target.value.length;ce.target.setSelectionRange(0,Ce)},H.handleFlagItemClick=function(ce,Ce){var Ee=H.state.selectedCountry,Me=H.state.onlyCountries.find(function(Z){return Z==ce});if(Me){var he=H.state.formattedNumber.replace(" ","").replace("(","").replace(")","").replace("-",""),Ae=he.length>1?he.replace(Ee.dialCode,Me.dialCode):Me.dialCode,De=H.formatNumber(Ae.replace(/\D/g,""),Me);H.setState({showDropdown:!1,selectedCountry:Me,freezeSelection:!0,formattedNumber:De,searchValue:""},function(){H.cursorToEnd(),H.props.onChange&&H.props.onChange(De.replace(/[^0-9]+/g,""),H.getCountryData(),Ce,De)})}},H.handleInputFocus=function(ce){H.numberInputRef&&H.numberInputRef.value===H.props.prefix&&H.state.selectedCountry&&!H.props.disableCountryCode&&H.setState({formattedNumber:H.props.prefix+H.state.selectedCountry.dialCode},function(){H.props.jumpCursorToEnd&&setTimeout(H.cursorToEnd,0)}),H.setState({placeholder:""}),H.props.onFocus&&H.props.onFocus(ce,H.getCountryData()),H.props.jumpCursorToEnd&&setTimeout(H.cursorToEnd,0)},H.handleInputBlur=function(ce){ce.target.value||H.setState({placeholder:H.props.placeholder}),H.props.onBlur&&H.props.onBlur(ce,H.getCountryData())},H.handleInputCopy=function(ce){if(H.props.copyNumbersOnly){var Ce=window.getSelection().toString().replace(/[^0-9]+/g,"");ce.clipboardData.setData("text/plain",Ce),ce.preventDefault()}},H.getHighlightCountryIndex=function(ce){var Ce=H.state.highlightCountryIndex+ce;return Ce<0||Ce>=H.state.onlyCountries.length+H.state.preferredCountries.length?Ce-ce:H.props.enableSearch&&Ce>H.getSearchFilteredCountries().length?0:Ce},H.searchCountry=function(){var ce=H.getProbableCandidate(H.state.queryString)||H.state.onlyCountries[0],Ce=H.state.onlyCountries.findIndex(function(Ee){return Ee==ce})+H.state.preferredCountries.length;H.scrollTo(H.getElement(Ce),!0),H.setState({queryString:"",highlightCountryIndex:Ce})},H.handleKeydown=function(ce){var Ce=H.props.keys,Ee=ce.target.className;if(Ee.includes("selected-flag")&&ce.which===Ce.ENTER&&!H.state.showDropdown)return H.handleFlagDropdownClick(ce);if(Ee.includes("form-control")&&(ce.which===Ce.ENTER||ce.which===Ce.ESC))return ce.target.blur();if(H.state.showDropdown&&!H.props.disabled&&(!Ee.includes("search-box")||ce.which===Ce.UP||ce.which===Ce.DOWN||ce.which===Ce.ENTER||ce.which===Ce.ESC&&ce.target.value==="")){ce.preventDefault?ce.preventDefault():ce.returnValue=!1;var Me=function(he){H.setState({highlightCountryIndex:H.getHighlightCountryIndex(he)},function(){H.scrollTo(H.getElement(H.state.highlightCountryIndex),!0)})};switch(ce.which){case Ce.DOWN:Me(1);break;case Ce.UP:Me(-1);break;case Ce.ENTER:H.props.enableSearch?H.handleFlagItemClick(H.getSearchFilteredCountries()[H.state.highlightCountryIndex]||H.getSearchFilteredCountries()[0],ce):H.handleFlagItemClick([].concat(a(H.state.preferredCountries),a(H.state.onlyCountries))[H.state.highlightCountryIndex],ce);break;case Ce.ESC:case Ce.TAB:H.setState({showDropdown:!1},H.cursorToEnd);break;default:(ce.which>=Ce.A&&ce.which<=Ce.Z||ce.which===Ce.SPACE)&&H.setState({queryString:H.state.queryString+String.fromCharCode(ce.which)},H.state.debouncedQueryStingSearcher)}}},H.handleInputKeyDown=function(ce){var Ce=H.props,Ee=Ce.keys,Me=Ce.onEnterKeyPress,he=Ce.onKeyDown;ce.which===Ee.ENTER&&Me&&Me(ce),he&&he(ce)},H.handleClickOutside=function(ce){H.dropdownRef&&!H.dropdownContainerRef.contains(ce.target)&&H.state.showDropdown&&H.setState({showDropdown:!1})},H.handleSearchChange=function(ce){var Ce=ce.currentTarget.value,Ee=H.state,Me=Ee.preferredCountries,he=Ee.selectedCountry,Ae=0;if(Ce===""&&he){var De=H.state.onlyCountries;Ae=H.concatPreferredCountries(Me,De).findIndex(function(Z){return Z==he}),setTimeout(function(){return H.scrollTo(H.getElement(Ae))},100)}H.setState({searchValue:Ce,highlightCountryIndex:Ae})},H.concatPreferredCountries=function(ce,Ce){return ce.length>0?a(new Set(ce.concat(Ce))):Ce},H.getDropdownCountryName=function(ce){return ce.localName||ce.name},H.getSearchFilteredCountries=function(){var ce=H.state,Ce=ce.preferredCountries,Ee=ce.onlyCountries,Me=ce.searchValue,he=H.props.enableSearch,Ae=H.concatPreferredCountries(Ce,Ee),De=Me.trim().toLowerCase().replace("+","");if(he&&De){if(/^\d+$/.test(De))return Ae.filter(function(Te){var Ue=Te.dialCode;return["".concat(Ue)].some(function(ne){return ne.toLowerCase().includes(De)})});var Z=Ae.filter(function(Te){var Ue=Te.iso2;return["".concat(Ue)].some(function(ne){return ne.toLowerCase().includes(De)})}),ie=Ae.filter(function(Te){var Ue=Te.name,ne=Te.localName;return Te.iso2,["".concat(Ue),"".concat(ne||"")].some(function(K){return K.toLowerCase().includes(De)})});return H.scrollToTop(),a(new Set([].concat(Z,ie)))}return Ae},H.getCountryDropdownList=function(){var ce=H.state,Ce=ce.preferredCountries,Ee=ce.highlightCountryIndex,Me=ce.showDropdown,he=ce.searchValue,Ae=H.props,De=Ae.disableDropdown,Z=Ae.prefix,ie=H.props,Te=ie.enableSearch,Ue=ie.searchNotFound,ne=ie.disableSearchIcon,K=ie.searchClass,B=ie.searchStyle,U=ie.searchPlaceholder,te=ie.autocompleteSearch,ve=H.getSearchFilteredCountries().map(function(et,Ze){var Pe=Ee===Ze,Le=P()({country:!0,preferred:et.iso2==="us"||et.iso2==="gb",active:et.iso2==="us",highlight:Pe}),ht="flag ".concat(et.iso2);return m.a.createElement("li",Object.assign({ref:function(Be){return H["flag_no_".concat(Ze)]=Be},key:"flag_no_".concat(Ze),"data-flag-key":"flag_no_".concat(Ze),className:Le,"data-dial-code":"1",tabIndex:De?"-1":"0","data-country-code":et.iso2,onClick:function(Be){return H.handleFlagItemClick(et,Be)},role:"option"},Pe?{"aria-selected":!0}:{}),m.a.createElement("div",{className:ht}),m.a.createElement("span",{className:"country-name"},H.getDropdownCountryName(et)),m.a.createElement("span",{className:"dial-code"},et.format?H.formatNumber(et.dialCode,et):Z+et.dialCode))}),Re=m.a.createElement("li",{key:"dashes",className:"divider"});Ce.length>0&&(!Te||Te&&!he.trim())&&ve.splice(Ce.length,0,Re);var Fe=P()(i({"country-list":!0,hide:!Me},H.props.dropdownClass,!0));return m.a.createElement("ul",{ref:function(et){return!Te&&et&&et.focus(),H.dropdownRef=et},className:Fe,style:H.props.dropdownStyle,role:"listbox",tabIndex:"0"},Te&&m.a.createElement("li",{className:P()(i({search:!0},K,K))},!ne&&m.a.createElement("span",{className:P()(i({"search-emoji":!0},"".concat(K,"-emoji"),K)),role:"img","aria-label":"Magnifying glass"},""),m.a.createElement("input",{className:P()(i({"search-box":!0},"".concat(K,"-box"),K)),style:B,type:"search",placeholder:U,autoFocus:!0,autoComplete:te?"on":"off",value:he,onChange:H.handleSearchChange})),ve.length>0?ve:m.a.createElement("li",{className:"no-entries-message"},m.a.createElement("span",null,Ue)))};var se,le=new N(re.enableAreaCodes,re.enableTerritories,re.regions,re.onlyCountries,re.preferredCountries,re.excludeCountries,re.preserveOrder,re.masks,re.priority,re.areaCodes,re.localization,re.prefix,re.defaultMask,re.alwaysDefaultMask),ee=le.onlyCountries,J=le.preferredCountries,oe=le.hiddenAreaCodes,me=re.value?re.value.replace(/\D/g,""):"";se=re.disableInitialCountryGuess?0:me.length>1?H.guessSelectedCountry(me.substring(0,6),re.country,ee,oe)||0:re.country&&ee.find(function(ce){return ce.iso2==re.country})||0;var be,de=me.length<2&&se&&!M()(me,se.dialCode)?se.dialCode:"";be=me===""&&se===0?"":H.formatNumber((re.disableCountryCode?"":de)+me,se.name?se:void 0);var ge=ee.findIndex(function(ce){return ce==se});return H.state={showDropdown:re.showDropdown,formattedNumber:be,onlyCountries:ee,preferredCountries:J,hiddenAreaCodes:oe,selectedCountry:se,highlightCountryIndex:ge,queryString:"",freezeSelection:!1,debouncedQueryStingSearcher:b()(H.searchCountry,250),searchValue:""},H}var Y,ae;return function(re,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(H&&H.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),H&&g(re,H)}(L,F),Y=L,(ae=[{key:"componentDidMount",value:function(){document.addEventListener&&this.props.enableClickOutside&&document.addEventListener("mousedown",this.handleClickOutside),this.props.onMount&&this.props.onMount(this.state.formattedNumber.replace(/[^0-9]+/g,""),this.getCountryData(),this.state.formattedNumber)}},{key:"componentWillUnmount",value:function(){document.removeEventListener&&this.props.enableClickOutside&&document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"componentDidUpdate",value:function(re,H,se){re.country!==this.props.country?this.updateCountry(this.props.country):re.value!==this.props.value&&this.updateFormattedNumber(this.props.value)}},{key:"updateFormattedNumber",value:function(re){if(re===null)return this.setState({selectedCountry:0,formattedNumber:""});var H=this.state,se=H.onlyCountries,le=H.selectedCountry,ee=H.hiddenAreaCodes,J=this.props,oe=J.country,me=J.prefix;if(re==="")return this.setState({selectedCountry:le,formattedNumber:""});var be,de,ge=re.replace(/\D/g,"");if(le&&M()(re,me+le.dialCode))de=this.formatNumber(ge,le),this.setState({formattedNumber:de});else{var ce=(be=this.props.disableCountryGuess?le:this.guessSelectedCountry(ge.substring(0,6),oe,se,ee)||le)&&M()(ge,me+be.dialCode)?be.dialCode:"";de=this.formatNumber((this.props.disableCountryCode?"":ce)+ge,be||void 0),this.setState({selectedCountry:be,formattedNumber:de})}}},{key:"render",value:function(){var re,H,se,le=this,ee=this.state,J=ee.onlyCountries,oe=ee.selectedCountry,me=ee.showDropdown,be=ee.formattedNumber,de=ee.hiddenAreaCodes,ge=this.props,ce=ge.disableDropdown,Ce=ge.renderStringAsFlag,Ee=ge.isValid,Me=ge.defaultErrorMessage,he=ge.specialLabel;if(typeof Ee=="boolean")H=Ee;else{var Ae=Ee(be.replace(/\D/g,""),oe,J,de);typeof Ae=="boolean"?(H=Ae)===!1&&(se=Me):(H=!1,se=Ae)}var De=P()((i(re={},this.props.containerClass,!0),i(re,"react-tel-input",!0),re)),Z=P()({arrow:!0,up:me}),ie=P()(i({"form-control":!0,"invalid-number":!H,open:me},this.props.inputClass,!0)),Te=P()({"selected-flag":!0,open:me}),Ue=P()(i({"flag-dropdown":!0,"invalid-number":!H,open:me},this.props.buttonClass,!0)),ne="flag ".concat(oe&&oe.iso2);return m.a.createElement("div",{className:"".concat(De," ").concat(this.props.className),style:this.props.style||this.props.containerStyle,onKeyDown:this.handleKeydown},he&&m.a.createElement("div",{className:"special-label"},he),se&&m.a.createElement("div",{className:"invalid-number-message"},se),m.a.createElement("input",Object.assign({className:ie,style:this.props.inputStyle,onChange:this.handleInput,onClick:this.handleInputClick,onDoubleClick:this.handleDoubleClick,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onCopy:this.handleInputCopy,value:be,onKeyDown:this.handleInputKeyDown,placeholder:this.props.placeholder,disabled:this.props.disabled,type:"tel"},this.props.inputProps,{ref:function(K){le.numberInputRef=K,typeof le.props.inputProps.ref=="function"?le.props.inputProps.ref(K):typeof le.props.inputProps.ref=="object"&&(le.props.inputProps.ref.current=K)}})),m.a.createElement("div",{className:Ue,style:this.props.buttonStyle,ref:function(K){return le.dropdownContainerRef=K}},Ce?m.a.createElement("div",{className:Te},Ce):m.a.createElement("div",{onClick:ce?void 0:this.handleFlagDropdownClick,className:Te,title:oe?"".concat(oe.localName||oe.name,": + ").concat(oe.dialCode):"",tabIndex:ce?"-1":"0",role:"button","aria-haspopup":"listbox","aria-expanded":!!me||void 0},m.a.createElement("div",{className:ne},!ce&&m.a.createElement("div",{className:Z}))),me&&this.getCountryDropdownList()))}}])&&u(Y.prototype,ae),L}(m.a.Component);Q.defaultProps={country:"",value:"",onlyCountries:[],preferredCountries:[],excludeCountries:[],placeholder:"1 (702) 123-4567",searchPlaceholder:"search",searchNotFound:"No entries to show",flagsImagePath:"./flags.png",disabled:!1,containerStyle:{},inputStyle:{},buttonStyle:{},dropdownStyle:{},searchStyle:{},containerClass:"",inputClass:"",buttonClass:"",dropdownClass:"",searchClass:"",className:"",autoFormat:!0,enableAreaCodes:!1,enableTerritories:!1,disableCountryCode:!1,disableDropdown:!1,enableLongNumbers:!1,countryCodeEditable:!0,enableSearch:!1,disableSearchIcon:!1,disableInitialCountryGuess:!1,disableCountryGuess:!1,regions:"",inputProps:{},localization:{},masks:null,priority:null,areaCodes:null,preserveOrder:[],defaultMask:"... ... ... ... ..",alwaysDefaultMask:!1,prefix:"+",copyNumbersOnly:!0,renderStringAsFlag:"",autocompleteSearch:!1,jumpCursorToEnd:!0,enableAreaCodeStretch:!1,enableClickOutside:!0,showDropdown:!1,isValid:!0,defaultErrorMessage:"",specialLabel:"Phone",onEnterKeyPress:null,keys:{UP:38,DOWN:40,RIGHT:39,LEFT:37,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,SPACE:32,TAB:9}},t.default=Q}])),gL}var iwt=rwt();const nwt=d8(iwt),awt=({onLogin:e})=>{const[t,r]=G.useState("email"),[i,n]=G.useState(""),[a,o]=G.useState(""),[s,l]=G.useState(""),[u,c]=G.useState(""),[d,h]=G.useState(""),[f,g]=G.useState(!1),p=async()=>{try{c("");const w=await BVe(Jg,a,s);e(w.user)}catch(w){if(w.code==="auth/user-not-found")try{await zVe(Jg,a,s),e(userCredential.user)}catch(x){c(x.message)}else c(w.message)}},m=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new s6e(Jg,"recaptcha-container",{size:"invisible",callback:()=>{}}))},y=async()=>{try{c(""),m();const w=`+${i}`,x=await c6e(Jg,w,window.recaptchaVerifier);window.confirmationResult=x,g(!0)}catch(w){c(w.message)}},b=async()=>{try{c("");const w=await window.confirmationResult.confirm(d);e(w.user)}catch(w){c(w.message)}};return V.jsxs(Rt,{sx:{maxWidth:400,width:"100%",p:4,bgcolor:"rgba(15, 23, 42, 0.6)",borderRadius:2,backdropFilter:"blur(10px)"},children:[V.jsxs(Rt,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:4},children:[V.jsx(Rt,{sx:{width:"64px",height:"64px",borderRadius:"50%",bgcolor:"rgba(139, 92, 246, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:V.jsx(FM,{sx:{fontSize:32,color:"#8B5CF6"}})}),V.jsx(Qt,{variant:"h5",sx:{color:"#F8FAFC",fontWeight:600,textAlign:"center"},children:"Welcome Back"})]}),V.jsx("div",{id:"recaptcha-container"}),u&&V.jsx(Oze,{severity:"error",sx:{mb:2},children:u}),V.jsxs(zye,{value:t,onChange:(w,x)=>r(x),sx:{mb:3},children:[V.jsx(G1,{value:"email",label:"Email"}),V.jsx(G1,{value:"phone",label:"Phone"})]}),t==="email"?V.jsxs(Fr.div,{initial:{opacity:0},animate:{opacity:1},children:[V.jsx(G0,{fullWidth:!0,label:"Email",value:a,onChange:w=>o(w.target.value),sx:{mb:2}}),V.jsx(G0,{fullWidth:!0,type:"password",label:"Password",value:s,onChange:w=>l(w.target.value),sx:{mb:3}}),V.jsx(ja,{fullWidth:!0,variant:"contained",onClick:p,sx:{mb:2,background:"linear-gradient(45deg, #8a2be2, #4169e1)"},children:"Login / Sign Up"})]}):V.jsxs(Fr.div,{initial:{opacity:0},animate:{opacity:1},children:[V.jsx(nwt,{country:"in",value:i,onChange:n,containerStyle:{marginBottom:24}}),f?V.jsxs(V.Fragment,{children:[V.jsx(G0,{fullWidth:!0,label:"Verification Code",value:d,onChange:w=>h(w.target.value),sx:{mb:2}}),V.jsx(ja,{fullWidth:!0,variant:"contained",onClick:b,sx:{mb:2,background:"linear-gradient(45deg, #8a2be2, #4169e1)"},children:"Verify Code"})]}):V.jsx(ja,{fullWidth:!0,variant:"contained",onClick:y,sx:{mb:2,background:"linear-gradient(45deg, #8a2be2, #4169e1)"},children:"Send Verification Code"})]}),V.jsx(NR,{sx:{my:2},children:V.jsx(Qt,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)"},children:"OR"})}),V.jsx(ja,{fullWidth:!0,variant:"outlined",onClick:()=>e({isGuest:!0}),sx:{color:"white",borderColor:"rgba(255,255,255,0.3)","&:hover":{borderColor:"rgba(255,255,255,0.5)",bgcolor:"rgba(255,255,255,0.05)"}},children:"Continue without Login"})]})},owt=pr(V.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"})),swt=pr(V.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),lwt=pr(V.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),uwt=({onClose:e})=>{const[t,r]=G.useState({}),i=[{id:1,name:"Recent Conversations",conversations:[{id:1,title:"Password Security Discussion"},{id:2,title:"Malware Prevention Tips"}]},{id:2,name:"Saved Conversations",conversations:[{id:3,title:"Network Security Basics"},{id:4,title:"Cybersecurity Best Practices"}]}],n=a=>{r(o=>({...o,[a]:!o[a]}))};return V.jsxs(Rt,{sx:{width:"100%",height:"100%",bgcolor:"background.paper"},children:[V.jsxs(Rt,{sx:{p:2,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:1,borderColor:"divider"},children:[V.jsx(Qt,{variant:"h6",children:"Chat History"}),V.jsx(fp,{onClick:e,children:V.jsx(qCe,{})})]}),V.jsx(eM,{component:"nav",children:i.map(a=>V.jsxs(Rt,{children:[V.jsxs(aX,{onClick:()=>n(a.id),children:[V.jsx(VR,{children:t[a.id]?V.jsx(owt,{}):V.jsx(k8e,{})}),V.jsx(tM,{primary:a.name}),t[a.id]?V.jsx(swt,{}):V.jsx(lwt,{})]}),V.jsx(tV,{in:t[a.id],timeout:"auto",unmountOnExit:!0,children:V.jsx(eM,{component:"div",disablePadding:!0,children:a.conversations.map(o=>V.jsx(aX,{sx:{pl:4},children:V.jsx(tM,{primary:o.title})},o.id))})})]},a.id))})]})},WCe=G.createContext(),FG=()=>{const e=G.useContext(WCe);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},cwt=({children:e})=>{const[t,r]=G.useState(null),[i,n]=G.useState(!0);G.useEffect(()=>NVe(Jg,c=>{r(c),n(!1)}),[]);const l={currentUser:t,signInWithGoogle:async()=>{try{const u=new Em;return await g6e(Jg,u),!0}catch(u){return console.error("Error signing in with Google:",u),!1}},signOut:async()=>{try{return await UVe(Jg),!0}catch(u){return console.error("Error signing out:",u),!1}},setGuest:()=>(r({isGuest:!0}),!0),loading:i};return V.jsx(WCe.Provider,{value:l,children:!i&&e})},dwt=()=>{aa();const e=qM(),{setGuest:t}=FG(),r=()=>{t(),e("/chat")};return V.jsx(qs,{maxWidth:"sm",sx:{py:8,display:"flex",flexDirection:"column",alignItems:"center",minHeight:"calc(100vh - 200px)"},children:V.jsxs(Na,{sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"rgba(255,255,255,0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.1)"},children:[V.jsx(Qt,{variant:"h4",sx:{mb:4,color:"white",textAlign:"center"},children:"Welcome to CyberGuard"}),V.jsx(awt,{}),V.jsx(Rt,{sx:{mt:3,width:"100%"},children:V.jsx(ja,{fullWidth:!0,variant:"outlined",onClick:r,sx:{color:"white",borderColor:"rgba(255,255,255,0.3)","&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},children:"Continue as Guest"})})]})})};tn.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"}});var dm={},fy={},Sl={},py={},my={},vL={},rie;function hwt(){return rie||(rie=1,Object.defineProperty(vL,"__esModule",{value:!0})),vL}var lS={},iie;function fwt(){return iie||(iie=1,Object.defineProperty(lS,"__esModule",{value:!0}),lS.V2ChatStreamRequestSafetyMode=void 0,lS.V2ChatStreamRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",Off:"OFF"}),lS}var uS={},nie;function pwt(){return nie||(nie=1,Object.defineProperty(uS,"__esModule",{value:!0}),uS.V2ChatStreamRequestToolChoice=void 0,uS.V2ChatStreamRequestToolChoice={Required:"REQUIRED",None:"NONE"}),uS}var yL={},aie;function mwt(){return aie||(aie=1,Object.defineProperty(yL,"__esModule",{value:!0})),yL}var cS={},oie;function gwt(){return oie||(oie=1,Object.defineProperty(cS,"__esModule",{value:!0}),cS.V2ChatRequestSafetyMode=void 0,cS.V2ChatRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",Off:"OFF"}),cS}var dS={},sie;function vwt(){return sie||(sie=1,Object.defineProperty(dS,"__esModule",{value:!0}),dS.V2ChatRequestToolChoice=void 0,dS.V2ChatRequestToolChoice={Required:"REQUIRED",None:"NONE"}),dS}var hS={},lie;function ywt(){return lie||(lie=1,Object.defineProperty(hS,"__esModule",{value:!0}),hS.V2EmbedRequestTruncate=void 0,hS.V2EmbedRequestTruncate={None:"NONE",Start:"START",End:"END"}),hS}var bL={},uie;function bwt(){return uie||(uie=1,Object.defineProperty(bL,"__esModule",{value:!0})),bL}var _L={},cie;function _wt(){return cie||(cie=1,Object.defineProperty(_L,"__esModule",{value:!0})),_L}var wL={},die;function wwt(){return die||(die=1,Object.defineProperty(wL,"__esModule",{value:!0})),wL}var hie;function GCe(){return hie||(hie=1,function(e){var t=my&&my.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=my&&my.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(hwt(),e),r(fwt(),e),r(pwt(),e),r(mwt(),e),r(gwt(),e),r(vwt(),e),r(ywt(),e),r(bwt(),e),r(_wt(),e),r(wwt(),e)}(my)),my}var gy={},xL={},fie;function HCe(){return fie||(fie=1,Object.defineProperty(xL,"__esModule",{value:!0})),xL}var pie;function xwt(){return pie||(pie=1,function(e){var t=gy&&gy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=gy&&gy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(HCe(),e)}(gy)),gy}var mie;function Swt(){return mie||(mie=1,function(e){var t=py&&py.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=py&&py.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(GCe(),e),r(xwt(),e)}(py)),py}var vy={},yy={},fS={},gie;function Cwt(){return gie||(gie=1,Object.defineProperty(fS,"__esModule",{value:!0}),fS.CreateEmbedJobRequestTruncate=void 0,fS.CreateEmbedJobRequestTruncate={Start:"START",End:"END"}),fS}var vie;function $Ce(){return vie||(vie=1,function(e){var t=yy&&yy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=yy&&yy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Cwt(),e)}(yy)),yy}var by={},SL={},yie;function XCe(){return yie||(yie=1,Object.defineProperty(SL,"__esModule",{value:!0})),SL}var bie;function Ewt(){return bie||(bie=1,function(e){var t=by&&by.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=by&&by.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(XCe(),e)}(by)),by}var _ie;function Mwt(){return _ie||(_ie=1,function(e){var t=vy&&vy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=vy&&vy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r($Ce(),e),r(Ewt(),e)}(vy)),vy}var _y={},wy={},CL={},wie;function Pwt(){return wie||(wie=1,Object.defineProperty(CL,"__esModule",{value:!0})),CL}var EL={},xie;function Twt(){return xie||(xie=1,Object.defineProperty(EL,"__esModule",{value:!0})),EL}var ML={},Sie;function Awt(){return Sie||(Sie=1,Object.defineProperty(ML,"__esModule",{value:!0})),ML}var PL={},Cie;function Owt(){return Cie||(Cie=1,Object.defineProperty(PL,"__esModule",{value:!0})),PL}var TL={},Eie;function Rwt(){return Eie||(Eie=1,Object.defineProperty(TL,"__esModule",{value:!0})),TL}var Mie;function YCe(){return Mie||(Mie=1,function(e){var t=wy&&wy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=wy&&wy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Pwt(),e),r(Twt(),e),r(Awt(),e),r(Owt(),e),r(Rwt(),e)}(wy)),wy}var xy={},AL={},Pie;function KCe(){return Pie||(Pie=1,Object.defineProperty(AL,"__esModule",{value:!0})),AL}var Tie;function Dwt(){return Tie||(Tie=1,function(e){var t=xy&&xy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=xy&&xy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(KCe(),e)}(xy)),xy}var Aie;function Iwt(){return Aie||(Aie=1,function(e){var t=_y&&_y.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=_y&&_y.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(YCe(),e),r(Dwt(),e)}(_y)),_y}var Sy={},Cl={},Cy={},Ey={},pS={},Oie;function jwt(){return Oie||(Oie=1,Object.defineProperty(pS,"__esModule",{value:!0}),pS.BaseType=void 0,pS.BaseType={BaseTypeUnspecified:"BASE_TYPE_UNSPECIFIED",BaseTypeGenerative:"BASE_TYPE_GENERATIVE",BaseTypeClassification:"BASE_TYPE_CLASSIFICATION",BaseTypeRerank:"BASE_TYPE_RERANK",BaseTypeChat:"BASE_TYPE_CHAT"}),pS}var mS={},Rie;function zwt(){return Rie||(Rie=1,Object.defineProperty(mS,"__esModule",{value:!0}),mS.Strategy=void 0,mS.Strategy={StrategyUnspecified:"STRATEGY_UNSPECIFIED",StrategyVanilla:"STRATEGY_VANILLA",StrategyTfew:"STRATEGY_TFEW"}),mS}var OL={},Die;function Bwt(){return Die||(Die=1,Object.defineProperty(OL,"__esModule",{value:!0})),OL}var gS={},Iie;function Lwt(){return Iie||(Iie=1,Object.defineProperty(gS,"__esModule",{value:!0}),gS.LoraTargetModules=void 0,gS.LoraTargetModules={LoraTargetModulesUnspecified:"LORA_TARGET_MODULES_UNSPECIFIED",LoraTargetModulesQv:"LORA_TARGET_MODULES_QV",LoraTargetModulesQkvo:"LORA_TARGET_MODULES_QKVO",LoraTargetModulesQkvoFfn:"LORA_TARGET_MODULES_QKVO_FFN"}),gS}var RL={},jie;function Fwt(){return jie||(jie=1,Object.defineProperty(RL,"__esModule",{value:!0})),RL}var DL={},zie;function Nwt(){return zie||(zie=1,Object.defineProperty(DL,"__esModule",{value:!0})),DL}var IL={},Bie;function Uwt(){return Bie||(Bie=1,Object.defineProperty(IL,"__esModule",{value:!0})),IL}var vS={},Lie;function Vwt(){return Lie||(Lie=1,Object.defineProperty(vS,"__esModule",{value:!0}),vS.Status=void 0,vS.Status={StatusUnspecified:"STATUS_UNSPECIFIED",StatusFinetuning:"STATUS_FINETUNING",StatusDeployingApi:"STATUS_DEPLOYING_API",StatusReady:"STATUS_READY",StatusFailed:"STATUS_FAILED",StatusDeleted:"STATUS_DELETED",StatusTemporarilyOffline:"STATUS_TEMPORARILY_OFFLINE",StatusPaused:"STATUS_PAUSED",StatusQueued:"STATUS_QUEUED"}),vS}var jL={},Fie;function kwt(){return Fie||(Fie=1,Object.defineProperty(jL,"__esModule",{value:!0})),jL}var zL={},Nie;function qwt(){return Nie||(Nie=1,Object.defineProperty(zL,"__esModule",{value:!0})),zL}var BL={},Uie;function Wwt(){return Uie||(Uie=1,Object.defineProperty(BL,"__esModule",{value:!0})),BL}var LL={},Vie;function Gwt(){return Vie||(Vie=1,Object.defineProperty(LL,"__esModule",{value:!0})),LL}var FL={},kie;function Hwt(){return kie||(kie=1,Object.defineProperty(FL,"__esModule",{value:!0})),FL}var NL={},qie;function $wt(){return qie||(qie=1,Object.defineProperty(NL,"__esModule",{value:!0})),NL}var UL={},Wie;function Xwt(){return Wie||(Wie=1,Object.defineProperty(UL,"__esModule",{value:!0})),UL}var VL={},Gie;function Ywt(){return Gie||(Gie=1,Object.defineProperty(VL,"__esModule",{value:!0})),VL}var kL={},Hie;function Kwt(){return Hie||(Hie=1,Object.defineProperty(kL,"__esModule",{value:!0})),kL}var qL={},$ie;function Qwt(){return $ie||($ie=1,Object.defineProperty(qL,"__esModule",{value:!0})),qL}var Xie;function QCe(){return Xie||(Xie=1,function(e){var t=Ey&&Ey.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Ey&&Ey.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(jwt(),e),r(zwt(),e),r(Bwt(),e),r(Lwt(),e),r(Fwt(),e),r(Nwt(),e),r(Uwt(),e),r(Vwt(),e),r(kwt(),e),r(qwt(),e),r(Wwt(),e),r(Gwt(),e),r(Hwt(),e),r($wt(),e),r(Xwt(),e),r(Ywt(),e),r(Kwt(),e),r(Qwt(),e)}(Ey)),Ey}var Yie;function Jwt(){return Yie||(Yie=1,function(e){var t=Cy&&Cy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Cy&&Cy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(QCe(),e)}(Cy)),Cy}var Kie;function Zwt(){return Kie||(Kie=1,function(e){var t=Cl&&Cl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),r=Cl&&Cl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),i=Cl&&Cl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&t(o,a,s);return r(o,a),o},n=Cl&&Cl.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,a,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.finetuning=void 0,e.finetuning=i(Jwt()),n(QCe(),e)}(Cl)),Cl}var My={},WL={},Qie;function JCe(){return Qie||(Qie=1,Object.defineProperty(WL,"__esModule",{value:!0})),WL}var Jie;function ext(){return Jie||(Jie=1,function(e){var t=My&&My.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=My&&My.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(JCe(),e)}(My)),My}var Zie;function txt(){return Zie||(Zie=1,function(e){var t=Sy&&Sy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Sy&&Sy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Zwt(),e),r(ext(),e)}(Sy)),Sy}var Py={},Ty={},GL={},ene;function ZCe(){return ene||(ene=1,Object.defineProperty(GL,"__esModule",{value:!0})),GL}var tne;function rxt(){return tne||(tne=1,function(e){var t=Ty&&Ty.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Ty&&Ty.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(ZCe(),e)}(Ty)),Ty}var rne;function ixt(){return rne||(rne=1,function(e){var t=Py&&Py.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Py&&Py.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(rxt(),e)}(Py)),Py}var Ay={},Oy={},HL={},ine;function eEe(){return ine||(ine=1,Object.defineProperty(HL,"__esModule",{value:!0})),HL}var nne;function nxt(){return nne||(nne=1,function(e){var t=Oy&&Oy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Oy&&Oy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(eEe(),e)}(Oy)),Oy}var ane;function axt(){return ane||(ane=1,function(e){var t=Ay&&Ay.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Ay&&Ay.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(nxt(),e)}(Ay)),Ay}var one;function oxt(){return one||(one=1,function(e){var t=Sl&&Sl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),r=Sl&&Sl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),i=Sl&&Sl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&t(o,a,s);return r(o,a),o},n=Sl&&Sl.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,a,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.models=e.connectors=e.finetuning=e.datasets=e.embedJobs=e.v2=void 0,e.v2=i(Swt()),n(GCe(),e),e.embedJobs=i(Mwt()),n($Ce(),e),e.datasets=i(Iwt()),n(YCe(),e),e.finetuning=i(txt()),e.connectors=i(ixt()),e.models=i(axt()),n(HCe(),e),n(XCe(),e),n(KCe(),e),n(ZCe(),e),n(eEe(),e),n(JCe(),e)}(Sl)),Sl}var Ry={},yS={},sne;function sxt(){return sne||(sne=1,Object.defineProperty(yS,"__esModule",{value:!0}),yS.ChatStreamRequestPromptTruncation=void 0,yS.ChatStreamRequestPromptTruncation={Off:"OFF",Auto:"AUTO",AutoPreserveOrder:"AUTO_PRESERVE_ORDER"}),yS}var bS={},lne;function lxt(){return lne||(lne=1,Object.defineProperty(bS,"__esModule",{value:!0}),bS.ChatStreamRequestCitationQuality=void 0,bS.ChatStreamRequestCitationQuality={Fast:"fast",Accurate:"accurate",Off:"off"}),bS}var $L={},une;function uxt(){return une||(une=1,Object.defineProperty($L,"__esModule",{value:!0})),$L}var _S={},cne;function cxt(){return cne||(cne=1,Object.defineProperty(_S,"__esModule",{value:!0}),_S.ChatStreamRequestSafetyMode=void 0,_S.ChatStreamRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",None:"NONE"}),_S}var wS={},dne;function dxt(){return dne||(dne=1,Object.defineProperty(wS,"__esModule",{value:!0}),wS.ChatRequestPromptTruncation=void 0,wS.ChatRequestPromptTruncation={Off:"OFF",Auto:"AUTO",AutoPreserveOrder:"AUTO_PRESERVE_ORDER"}),wS}var xS={},hne;function hxt(){return hne||(hne=1,Object.defineProperty(xS,"__esModule",{value:!0}),xS.ChatRequestCitationQuality=void 0,xS.ChatRequestCitationQuality={Fast:"fast",Accurate:"accurate",Off:"off"}),xS}var XL={},fne;function fxt(){return fne||(fne=1,Object.defineProperty(XL,"__esModule",{value:!0})),XL}var SS={},pne;function pxt(){return pne||(pne=1,Object.defineProperty(SS,"__esModule",{value:!0}),SS.ChatRequestSafetyMode=void 0,SS.ChatRequestSafetyMode={Contextual:"CONTEXTUAL",Strict:"STRICT",None:"NONE"}),SS}var CS={},mne;function mxt(){return mne||(mne=1,Object.defineProperty(CS,"__esModule",{value:!0}),CS.GenerateStreamRequestTruncate=void 0,CS.GenerateStreamRequestTruncate={None:"NONE",Start:"START",End:"END"}),CS}var ES={},gne;function gxt(){return gne||(gne=1,Object.defineProperty(ES,"__esModule",{value:!0}),ES.GenerateStreamRequestReturnLikelihoods=void 0,ES.GenerateStreamRequestReturnLikelihoods={Generation:"GENERATION",All:"ALL",None:"NONE"}),ES}var MS={},vne;function vxt(){return vne||(vne=1,Object.defineProperty(MS,"__esModule",{value:!0}),MS.GenerateRequestTruncate=void 0,MS.GenerateRequestTruncate={None:"NONE",Start:"START",End:"END"}),MS}var PS={},yne;function yxt(){return yne||(yne=1,Object.defineProperty(PS,"__esModule",{value:!0}),PS.GenerateRequestReturnLikelihoods=void 0,PS.GenerateRequestReturnLikelihoods={Generation:"GENERATION",All:"ALL",None:"NONE"}),PS}var TS={},bne;function bxt(){return bne||(bne=1,Object.defineProperty(TS,"__esModule",{value:!0}),TS.EmbedRequestTruncate=void 0,TS.EmbedRequestTruncate={None:"NONE",Start:"START",End:"END"}),TS}var YL={},_ne;function _xt(){return _ne||(_ne=1,Object.defineProperty(YL,"__esModule",{value:!0})),YL}var KL={},wne;function wxt(){return wne||(wne=1,Object.defineProperty(KL,"__esModule",{value:!0})),KL}var QL={},xne;function xxt(){return xne||(xne=1,Object.defineProperty(QL,"__esModule",{value:!0})),QL}var JL={},Sne;function Sxt(){return Sne||(Sne=1,Object.defineProperty(JL,"__esModule",{value:!0})),JL}var ZL={},Cne;function Cxt(){return Cne||(Cne=1,Object.defineProperty(ZL,"__esModule",{value:!0})),ZL}var AS={},Ene;function Ext(){return Ene||(Ene=1,Object.defineProperty(AS,"__esModule",{value:!0}),AS.ClassifyRequestTruncate=void 0,AS.ClassifyRequestTruncate={None:"NONE",Start:"START",End:"END"}),AS}var eF={},Mne;function Mxt(){return Mne||(Mne=1,Object.defineProperty(eF,"__esModule",{value:!0})),eF}var OS={},Pne;function Pxt(){return Pne||(Pne=1,Object.defineProperty(OS,"__esModule",{value:!0}),OS.ClassifyResponseClassificationsItemClassificationType=void 0,OS.ClassifyResponseClassificationsItemClassificationType={SingleLabel:"single-label",MultiLabel:"multi-label"}),OS}var tF={},Tne;function Txt(){return Tne||(Tne=1,Object.defineProperty(tF,"__esModule",{value:!0})),tF}var rF={},Ane;function Axt(){return Ane||(Ane=1,Object.defineProperty(rF,"__esModule",{value:!0})),rF}var RS={},One;function Oxt(){return One||(One=1,Object.defineProperty(RS,"__esModule",{value:!0}),RS.SummarizeRequestLength=void 0,RS.SummarizeRequestLength={Short:"short",Medium:"medium",Long:"long"}),RS}var DS={},Rne;function Rxt(){return Rne||(Rne=1,Object.defineProperty(DS,"__esModule",{value:!0}),DS.SummarizeRequestFormat=void 0,DS.SummarizeRequestFormat={Paragraph:"paragraph",Bullets:"bullets"}),DS}var IS={},Dne;function Dxt(){return Dne||(Dne=1,Object.defineProperty(IS,"__esModule",{value:!0}),IS.SummarizeRequestExtractiveness=void 0,IS.SummarizeRequestExtractiveness={Low:"low",Medium:"medium",High:"high"}),IS}var iF={},Ine;function Ixt(){return Ine||(Ine=1,Object.defineProperty(iF,"__esModule",{value:!0})),iF}var nF={},jne;function jxt(){return jne||(jne=1,Object.defineProperty(nF,"__esModule",{value:!0})),nF}var aF={},zne;function zxt(){return zne||(zne=1,Object.defineProperty(aF,"__esModule",{value:!0})),aF}var oF={},Bne;function Bxt(){return Bne||(Bne=1,Object.defineProperty(oF,"__esModule",{value:!0})),oF}var sF={},Lne;function Lxt(){return Lne||(Lne=1,Object.defineProperty(sF,"__esModule",{value:!0})),sF}var lF={},Fne;function Fxt(){return Fne||(Fne=1,Object.defineProperty(lF,"__esModule",{value:!0})),lF}var uF={},Nne;function Nxt(){return Nne||(Nne=1,Object.defineProperty(uF,"__esModule",{value:!0})),uF}var cF={},Une;function Uxt(){return Une||(Une=1,Object.defineProperty(cF,"__esModule",{value:!0})),cF}var dF={},Vne;function Vxt(){return Vne||(Vne=1,Object.defineProperty(dF,"__esModule",{value:!0})),dF}var hF={},kne;function kxt(){return kne||(kne=1,Object.defineProperty(hF,"__esModule",{value:!0})),hF}var fF={},qne;function qxt(){return qne||(qne=1,Object.defineProperty(fF,"__esModule",{value:!0})),fF}var pF={},Wne;function Wxt(){return Wne||(Wne=1,Object.defineProperty(pF,"__esModule",{value:!0})),pF}var mF={},Gne;function Gxt(){return Gne||(Gne=1,Object.defineProperty(mF,"__esModule",{value:!0})),mF}var gF={},Hne;function Hxt(){return Hne||(Hne=1,Object.defineProperty(gF,"__esModule",{value:!0})),gF}var vF={},$ne;function $xt(){return $ne||($ne=1,Object.defineProperty(vF,"__esModule",{value:!0})),vF}var yF={},Xne;function Xxt(){return Xne||(Xne=1,Object.defineProperty(yF,"__esModule",{value:!0})),yF}var jS={},Yne;function Yxt(){return Yne||(Yne=1,Object.defineProperty(jS,"__esModule",{value:!0}),jS.ChatCitationType=void 0,jS.ChatCitationType={TextContent:"TEXT_CONTENT",Plan:"PLAN"}),jS}var bF={},Kne;function Kxt(){return Kne||(Kne=1,Object.defineProperty(bF,"__esModule",{value:!0})),bF}var _F={},Qne;function Qxt(){return Qne||(Qne=1,Object.defineProperty(_F,"__esModule",{value:!0})),_F}var wF={},Jne;function Jxt(){return Jne||(Jne=1,Object.defineProperty(wF,"__esModule",{value:!0})),wF}var xF={},Zne;function Zxt(){return Zne||(Zne=1,Object.defineProperty(xF,"__esModule",{value:!0})),xF}var zS={},eae;function eSt(){return eae||(eae=1,Object.defineProperty(zS,"__esModule",{value:!0}),zS.FinishReason=void 0,zS.FinishReason={Complete:"COMPLETE",StopSequence:"STOP_SEQUENCE",Error:"ERROR",ErrorToxic:"ERROR_TOXIC",ErrorLimit:"ERROR_LIMIT",UserCancel:"USER_CANCEL",MaxTokens:"MAX_TOKENS"}),zS}var SF={},tae;function tSt(){return tae||(tae=1,Object.defineProperty(SF,"__esModule",{value:!0})),SF}var CF={},rae;function rSt(){return rae||(rae=1,Object.defineProperty(CF,"__esModule",{value:!0})),CF}var EF={},iae;function iSt(){return iae||(iae=1,Object.defineProperty(EF,"__esModule",{value:!0})),EF}var MF={},nae;function nSt(){return nae||(nae=1,Object.defineProperty(MF,"__esModule",{value:!0})),MF}var PF={},aae;function aSt(){return aae||(aae=1,Object.defineProperty(PF,"__esModule",{value:!0})),PF}var TF={},oae;function oSt(){return oae||(oae=1,Object.defineProperty(TF,"__esModule",{value:!0})),TF}var AF={},sae;function sSt(){return sae||(sae=1,Object.defineProperty(AF,"__esModule",{value:!0})),AF}var OF={},lae;function lSt(){return lae||(lae=1,Object.defineProperty(OF,"__esModule",{value:!0})),OF}var RF={},uae;function uSt(){return uae||(uae=1,Object.defineProperty(RF,"__esModule",{value:!0})),RF}var DF={},cae;function cSt(){return cae||(cae=1,Object.defineProperty(DF,"__esModule",{value:!0})),DF}var IF={},dae;function dSt(){return dae||(dae=1,Object.defineProperty(IF,"__esModule",{value:!0})),IF}var jF={},hae;function hSt(){return hae||(hae=1,Object.defineProperty(jF,"__esModule",{value:!0})),jF}var BS={},fae;function fSt(){return fae||(fae=1,Object.defineProperty(BS,"__esModule",{value:!0}),BS.ChatStreamEndEventFinishReason=void 0,BS.ChatStreamEndEventFinishReason={Complete:"COMPLETE",ErrorLimit:"ERROR_LIMIT",MaxTokens:"MAX_TOKENS",Error:"ERROR",ErrorToxic:"ERROR_TOXIC"}),BS}var zF={},pae;function pSt(){return pae||(pae=1,Object.defineProperty(zF,"__esModule",{value:!0})),zF}var BF={},mae;function mSt(){return mae||(mae=1,Object.defineProperty(BF,"__esModule",{value:!0})),BF}var LF={},gae;function gSt(){return gae||(gae=1,Object.defineProperty(LF,"__esModule",{value:!0})),LF}var FF={},vae;function vSt(){return vae||(vae=1,Object.defineProperty(FF,"__esModule",{value:!0})),FF}var NF={},yae;function ySt(){return yae||(yae=1,Object.defineProperty(NF,"__esModule",{value:!0})),NF}var UF={},bae;function bSt(){return bae||(bae=1,Object.defineProperty(UF,"__esModule",{value:!0})),UF}var VF={},_ae;function _St(){return _ae||(_ae=1,Object.defineProperty(VF,"__esModule",{value:!0})),VF}var kF={},wae;function wSt(){return wae||(wae=1,Object.defineProperty(kF,"__esModule",{value:!0})),kF}var qF={},xae;function xSt(){return xae||(xae=1,Object.defineProperty(qF,"__esModule",{value:!0})),qF}var WF={},Sae;function SSt(){return Sae||(Sae=1,Object.defineProperty(WF,"__esModule",{value:!0})),WF}var GF={},Cae;function CSt(){return Cae||(Cae=1,Object.defineProperty(GF,"__esModule",{value:!0})),GF}var HF={},Eae;function ESt(){return Eae||(Eae=1,Object.defineProperty(HF,"__esModule",{value:!0})),HF}var $F={},Mae;function MSt(){return Mae||(Mae=1,Object.defineProperty($F,"__esModule",{value:!0})),$F}var XF={},Pae;function PSt(){return Pae||(Pae=1,Object.defineProperty(XF,"__esModule",{value:!0})),XF}var YF={},Tae;function TSt(){return Tae||(Tae=1,Object.defineProperty(YF,"__esModule",{value:!0})),YF}var KF={},Aae;function ASt(){return Aae||(Aae=1,Object.defineProperty(KF,"__esModule",{value:!0})),KF}var LS={},Oae;function OSt(){return Oae||(Oae=1,Object.defineProperty(LS,"__esModule",{value:!0}),LS.CitationType=void 0,LS.CitationType={TextContent:"TEXT_CONTENT",Plan:"PLAN"}),LS}var QF={},Rae;function RSt(){return Rae||(Rae=1,Object.defineProperty(QF,"__esModule",{value:!0})),QF}var JF={},Dae;function DSt(){return Dae||(Dae=1,Object.defineProperty(JF,"__esModule",{value:!0})),JF}var ZF={},Iae;function ISt(){return Iae||(Iae=1,Object.defineProperty(ZF,"__esModule",{value:!0})),ZF}var eN={},jae;function jSt(){return jae||(jae=1,Object.defineProperty(eN,"__esModule",{value:!0})),eN}var tN={},zae;function zSt(){return zae||(zae=1,Object.defineProperty(tN,"__esModule",{value:!0})),tN}var rN={},Bae;function BSt(){return Bae||(Bae=1,Object.defineProperty(rN,"__esModule",{value:!0})),rN}var iN={},Lae;function LSt(){return Lae||(Lae=1,Object.defineProperty(iN,"__esModule",{value:!0})),iN}var nN={},Fae;function FSt(){return Fae||(Fae=1,Object.defineProperty(nN,"__esModule",{value:!0})),nN}var aN={},Nae;function NSt(){return Nae||(Nae=1,Object.defineProperty(aN,"__esModule",{value:!0})),aN}var oN={},Uae;function USt(){return Uae||(Uae=1,Object.defineProperty(oN,"__esModule",{value:!0})),oN}var sN={},Vae;function VSt(){return Vae||(Vae=1,Object.defineProperty(sN,"__esModule",{value:!0})),sN}var lN={},kae;function kSt(){return kae||(kae=1,Object.defineProperty(lN,"__esModule",{value:!0})),lN}var uN={},qae;function qSt(){return qae||(qae=1,Object.defineProperty(uN,"__esModule",{value:!0})),uN}var cN={},Wae;function WSt(){return Wae||(Wae=1,Object.defineProperty(cN,"__esModule",{value:!0})),cN}var dN={},Gae;function GSt(){return Gae||(Gae=1,Object.defineProperty(dN,"__esModule",{value:!0})),dN}var hN={},Hae;function HSt(){return Hae||(Hae=1,Object.defineProperty(hN,"__esModule",{value:!0})),hN}var FS={},$ae;function $St(){return $ae||($ae=1,Object.defineProperty(FS,"__esModule",{value:!0}),FS.CitationOptionsMode=void 0,FS.CitationOptionsMode={Fast:"FAST",Accurate:"ACCURATE",Off:"OFF"}),FS}var fN={},Xae;function XSt(){return Xae||(Xae=1,Object.defineProperty(fN,"__esModule",{value:!0})),fN}var pN={},Yae;function YSt(){return Yae||(Yae=1,Object.defineProperty(pN,"__esModule",{value:!0})),pN}var mN={},Kae;function KSt(){return Kae||(Kae=1,Object.defineProperty(mN,"__esModule",{value:!0})),mN}var gN={},Qae;function QSt(){return Qae||(Qae=1,Object.defineProperty(gN,"__esModule",{value:!0})),gN}var NS={},Jae;function JSt(){return Jae||(Jae=1,Object.defineProperty(NS,"__esModule",{value:!0}),NS.ChatFinishReason=void 0,NS.ChatFinishReason={Complete:"COMPLETE",StopSequence:"STOP_SEQUENCE",MaxTokens:"MAX_TOKENS",ToolCall:"TOOL_CALL",Error:"ERROR"}),NS}var vN={},Zae;function ZSt(){return Zae||(Zae=1,Object.defineProperty(vN,"__esModule",{value:!0})),vN}var yN={},eoe;function eCt(){return eoe||(eoe=1,Object.defineProperty(yN,"__esModule",{value:!0})),yN}var bN={},toe;function tCt(){return toe||(toe=1,Object.defineProperty(bN,"__esModule",{value:!0})),bN}var _N={},roe;function rCt(){return roe||(roe=1,Object.defineProperty(_N,"__esModule",{value:!0})),_N}var wN={},ioe;function iCt(){return ioe||(ioe=1,Object.defineProperty(wN,"__esModule",{value:!0})),wN}var xN={},noe;function nCt(){return noe||(noe=1,Object.defineProperty(xN,"__esModule",{value:!0})),xN}var SN={},aoe;function aCt(){return aoe||(aoe=1,Object.defineProperty(SN,"__esModule",{value:!0})),SN}var CN={},ooe;function oCt(){return ooe||(ooe=1,Object.defineProperty(CN,"__esModule",{value:!0})),CN}var EN={},soe;function sCt(){return soe||(soe=1,Object.defineProperty(EN,"__esModule",{value:!0})),EN}var MN={},loe;function lCt(){return loe||(loe=1,Object.defineProperty(MN,"__esModule",{value:!0})),MN}var PN={},uoe;function uCt(){return uoe||(uoe=1,Object.defineProperty(PN,"__esModule",{value:!0})),PN}var TN={},coe;function cCt(){return coe||(coe=1,Object.defineProperty(TN,"__esModule",{value:!0})),TN}var AN={},doe;function dCt(){return doe||(doe=1,Object.defineProperty(AN,"__esModule",{value:!0})),AN}var ON={},hoe;function hCt(){return hoe||(hoe=1,Object.defineProperty(ON,"__esModule",{value:!0})),ON}var RN={},foe;function fCt(){return foe||(foe=1,Object.defineProperty(RN,"__esModule",{value:!0})),RN}var DN={},poe;function pCt(){return poe||(poe=1,Object.defineProperty(DN,"__esModule",{value:!0})),DN}var IN={},moe;function mCt(){return moe||(moe=1,Object.defineProperty(IN,"__esModule",{value:!0})),IN}var jN={},goe;function gCt(){return goe||(goe=1,Object.defineProperty(jN,"__esModule",{value:!0})),jN}var zN={},voe;function vCt(){return voe||(voe=1,Object.defineProperty(zN,"__esModule",{value:!0})),zN}var BN={},yoe;function yCt(){return yoe||(yoe=1,Object.defineProperty(BN,"__esModule",{value:!0})),BN}var LN={},boe;function bCt(){return boe||(boe=1,Object.defineProperty(LN,"__esModule",{value:!0})),LN}var FN={},_oe;function _Ct(){return _oe||(_oe=1,Object.defineProperty(FN,"__esModule",{value:!0})),FN}var NN={},woe;function wCt(){return woe||(woe=1,Object.defineProperty(NN,"__esModule",{value:!0})),NN}var UN={},xoe;function xCt(){return xoe||(xoe=1,Object.defineProperty(UN,"__esModule",{value:!0})),UN}var VN={},Soe;function SCt(){return Soe||(Soe=1,Object.defineProperty(VN,"__esModule",{value:!0})),VN}var kN={},Coe;function CCt(){return Coe||(Coe=1,Object.defineProperty(kN,"__esModule",{value:!0})),kN}var qN={},Eoe;function ECt(){return Eoe||(Eoe=1,Object.defineProperty(qN,"__esModule",{value:!0})),qN}var WN={},Moe;function MCt(){return Moe||(Moe=1,Object.defineProperty(WN,"__esModule",{value:!0})),WN}var GN={},Poe;function PCt(){return Poe||(Poe=1,Object.defineProperty(GN,"__esModule",{value:!0})),GN}var HN={},Toe;function TCt(){return Toe||(Toe=1,Object.defineProperty(HN,"__esModule",{value:!0})),HN}var $N={},Aoe;function ACt(){return Aoe||(Aoe=1,Object.defineProperty($N,"__esModule",{value:!0})),$N}var XN={},Ooe;function OCt(){return Ooe||(Ooe=1,Object.defineProperty(XN,"__esModule",{value:!0})),XN}var YN={},Roe;function RCt(){return Roe||(Roe=1,Object.defineProperty(YN,"__esModule",{value:!0})),YN}var KN={},Doe;function DCt(){return Doe||(Doe=1,Object.defineProperty(KN,"__esModule",{value:!0})),KN}var QN={},Ioe;function ICt(){return Ioe||(Ioe=1,Object.defineProperty(QN,"__esModule",{value:!0})),QN}var JN={},joe;function jCt(){return joe||(joe=1,Object.defineProperty(JN,"__esModule",{value:!0})),JN}var ZN={},zoe;function zCt(){return zoe||(zoe=1,Object.defineProperty(ZN,"__esModule",{value:!0})),ZN}var e4={},Boe;function BCt(){return Boe||(Boe=1,Object.defineProperty(e4,"__esModule",{value:!0})),e4}var t4={},Loe;function LCt(){return Loe||(Loe=1,Object.defineProperty(t4,"__esModule",{value:!0})),t4}var r4={},Foe;function FCt(){return Foe||(Foe=1,Object.defineProperty(r4,"__esModule",{value:!0})),r4}var i4={},Noe;function NCt(){return Noe||(Noe=1,Object.defineProperty(i4,"__esModule",{value:!0})),i4}var n4={},Uoe;function UCt(){return Uoe||(Uoe=1,Object.defineProperty(n4,"__esModule",{value:!0})),n4}var a4={},Voe;function VCt(){return Voe||(Voe=1,Object.defineProperty(a4,"__esModule",{value:!0})),a4}var o4={},koe;function kCt(){return koe||(koe=1,Object.defineProperty(o4,"__esModule",{value:!0})),o4}var s4={},qoe;function qCt(){return qoe||(qoe=1,Object.defineProperty(s4,"__esModule",{value:!0})),s4}var l4={},Woe;function WCt(){return Woe||(Woe=1,Object.defineProperty(l4,"__esModule",{value:!0})),l4}var u4={},Goe;function GCt(){return Goe||(Goe=1,Object.defineProperty(u4,"__esModule",{value:!0})),u4}var c4={},Hoe;function HCt(){return Hoe||(Hoe=1,Object.defineProperty(c4,"__esModule",{value:!0})),c4}var d4={},$oe;function $Ct(){return $oe||($oe=1,Object.defineProperty(d4,"__esModule",{value:!0})),d4}var US={},Xoe;function XCt(){return Xoe||(Xoe=1,Object.defineProperty(US,"__esModule",{value:!0}),US.EmbedInputType=void 0,US.EmbedInputType={SearchDocument:"search_document",SearchQuery:"search_query",Classification:"classification",Clustering:"clustering",Image:"image"}),US}var VS={},Yoe;function YCt(){return Yoe||(Yoe=1,Object.defineProperty(VS,"__esModule",{value:!0}),VS.EmbeddingType=void 0,VS.EmbeddingType={Float:"float",Int8:"int8",Uint8:"uint8",Binary:"binary",Ubinary:"ubinary"}),VS}var h4={},Koe;function KCt(){return Koe||(Koe=1,Object.defineProperty(h4,"__esModule",{value:!0})),h4}var f4={},Qoe;function QCt(){return Qoe||(Qoe=1,Object.defineProperty(f4,"__esModule",{value:!0})),f4}var p4={},Joe;function JCt(){return Joe||(Joe=1,Object.defineProperty(p4,"__esModule",{value:!0})),p4}var m4={},Zoe;function ZCt(){return Zoe||(Zoe=1,Object.defineProperty(m4,"__esModule",{value:!0})),m4}var kS={},ese;function eEt(){return ese||(ese=1,Object.defineProperty(kS,"__esModule",{value:!0}),kS.EmbedJobStatus=void 0,kS.EmbedJobStatus={Processing:"processing",Complete:"complete",Cancelling:"cancelling",Cancelled:"cancelled",Failed:"failed"}),kS}var qS={},tse;function tEt(){return tse||(tse=1,Object.defineProperty(qS,"__esModule",{value:!0}),qS.EmbedJobTruncate=void 0,qS.EmbedJobTruncate={Start:"START",End:"END"}),qS}var g4={},rse;function rEt(){return rse||(rse=1,Object.defineProperty(g4,"__esModule",{value:!0})),g4}var v4={},ise;function iEt(){return ise||(ise=1,Object.defineProperty(v4,"__esModule",{value:!0})),v4}var y4={},nse;function nEt(){return nse||(nse=1,Object.defineProperty(y4,"__esModule",{value:!0})),y4}var b4={},ase;function aEt(){return ase||(ase=1,Object.defineProperty(b4,"__esModule",{value:!0})),b4}var _4={},ose;function oEt(){return ose||(ose=1,Object.defineProperty(_4,"__esModule",{value:!0})),_4}var WS={},sse;function sEt(){return sse||(sse=1,Object.defineProperty(WS,"__esModule",{value:!0}),WS.DatasetValidationStatus=void 0,WS.DatasetValidationStatus={Unknown:"unknown",Queued:"queued",Processing:"processing",Failed:"failed",Validated:"validated",Skipped:"skipped"}),WS}var GS={},lse;function lEt(){return lse||(lse=1,Object.defineProperty(GS,"__esModule",{value:!0}),GS.DatasetType=void 0,GS.DatasetType={EmbedInput:"embed-input",EmbedResult:"embed-result",ClusterResult:"cluster-result",ClusterOutliers:"cluster-outliers",RerankerFinetuneInput:"reranker-finetune-input",SingleLabelClassificationFinetuneInput:"single-label-classification-finetune-input",ChatFinetuneInput:"chat-finetune-input",MultiLabelClassificationFinetuneInput:"multi-label-classification-finetune-input"}),GS}var w4={},use;function uEt(){return use||(use=1,Object.defineProperty(w4,"__esModule",{value:!0})),w4}var x4={},cse;function cEt(){return cse||(cse=1,Object.defineProperty(x4,"__esModule",{value:!0})),x4}var S4={},dse;function dEt(){return dse||(dse=1,Object.defineProperty(S4,"__esModule",{value:!0})),S4}var C4={},hse;function hEt(){return hse||(hse=1,Object.defineProperty(C4,"__esModule",{value:!0})),C4}var E4={},fse;function fEt(){return fse||(fse=1,Object.defineProperty(E4,"__esModule",{value:!0})),E4}var M4={},pse;function pEt(){return pse||(pse=1,Object.defineProperty(M4,"__esModule",{value:!0})),M4}var P4={},mse;function mEt(){return mse||(mse=1,Object.defineProperty(P4,"__esModule",{value:!0})),P4}var T4={},gse;function gEt(){return gse||(gse=1,Object.defineProperty(T4,"__esModule",{value:!0})),T4}var A4={},vse;function vEt(){return vse||(vse=1,Object.defineProperty(A4,"__esModule",{value:!0})),A4}var O4={},yse;function yEt(){return yse||(yse=1,Object.defineProperty(O4,"__esModule",{value:!0})),O4}var R4={},bse;function bEt(){return bse||(bse=1,Object.defineProperty(R4,"__esModule",{value:!0})),R4}var D4={},_se;function _Et(){return _se||(_se=1,Object.defineProperty(D4,"__esModule",{value:!0})),D4}var HS={},wse;function wEt(){return wse||(wse=1,Object.defineProperty(HS,"__esModule",{value:!0}),HS.ConnectorAuthStatus=void 0,HS.ConnectorAuthStatus={Valid:"valid",Expired:"expired"}),HS}var I4={},xse;function xEt(){return xse||(xse=1,Object.defineProperty(I4,"__esModule",{value:!0})),I4}var j4={},Sse;function SEt(){return Sse||(Sse=1,Object.defineProperty(j4,"__esModule",{value:!0})),j4}var z4={},Cse;function CEt(){return Cse||(Cse=1,Object.defineProperty(z4,"__esModule",{value:!0})),z4}var $S={},Ese;function EEt(){return Ese||(Ese=1,Object.defineProperty($S,"__esModule",{value:!0}),$S.AuthTokenType=void 0,$S.AuthTokenType={Bearer:"bearer",Basic:"basic",Noscheme:"noscheme"}),$S}var B4={},Mse;function MEt(){return Mse||(Mse=1,Object.defineProperty(B4,"__esModule",{value:!0})),B4}var L4={},Pse;function PEt(){return Pse||(Pse=1,Object.defineProperty(L4,"__esModule",{value:!0})),L4}var F4={},Tse;function TEt(){return Tse||(Tse=1,Object.defineProperty(F4,"__esModule",{value:!0})),F4}var N4={},Ase;function AEt(){return Ase||(Ase=1,Object.defineProperty(N4,"__esModule",{value:!0})),N4}var U4={},Ose;function OEt(){return Ose||(Ose=1,Object.defineProperty(U4,"__esModule",{value:!0})),U4}var V4={},Rse;function REt(){return Rse||(Rse=1,Object.defineProperty(V4,"__esModule",{value:!0})),V4}var XS={},Dse;function DEt(){return Dse||(Dse=1,Object.defineProperty(XS,"__esModule",{value:!0}),XS.CompatibleEndpoint=void 0,XS.CompatibleEndpoint={Chat:"chat",Embed:"embed",Classify:"classify",Summarize:"summarize",Rerank:"rerank",Rate:"rate",Generate:"generate"}),XS}var k4={},Ise;function IEt(){return Ise||(Ise=1,Object.defineProperty(k4,"__esModule",{value:!0})),k4}var q4={},jse;function jEt(){return jse||(jse=1,Object.defineProperty(q4,"__esModule",{value:!0})),q4}var zse;function zEt(){return zse||(zse=1,function(e){var t=Ry&&Ry.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Ry&&Ry.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(sxt(),e),r(lxt(),e),r(uxt(),e),r(cxt(),e),r(dxt(),e),r(hxt(),e),r(fxt(),e),r(pxt(),e),r(mxt(),e),r(gxt(),e),r(vxt(),e),r(yxt(),e),r(bxt(),e),r(_xt(),e),r(wxt(),e),r(xxt(),e),r(Sxt(),e),r(Cxt(),e),r(Ext(),e),r(Mxt(),e),r(Pxt(),e),r(Txt(),e),r(Axt(),e),r(Oxt(),e),r(Rxt(),e),r(Dxt(),e),r(Ixt(),e),r(jxt(),e),r(zxt(),e),r(Bxt(),e),r(Lxt(),e),r(Fxt(),e),r(Nxt(),e),r(Uxt(),e),r(Vxt(),e),r(kxt(),e),r(qxt(),e),r(Wxt(),e),r(Gxt(),e),r(Hxt(),e),r($xt(),e),r(Xxt(),e),r(Yxt(),e),r(Kxt(),e),r(Qxt(),e),r(Jxt(),e),r(Zxt(),e),r(eSt(),e),r(tSt(),e),r(rSt(),e),r(iSt(),e),r(nSt(),e),r(aSt(),e),r(oSt(),e),r(sSt(),e),r(lSt(),e),r(uSt(),e),r(cSt(),e),r(dSt(),e),r(hSt(),e),r(fSt(),e),r(pSt(),e),r(mSt(),e),r(gSt(),e),r(vSt(),e),r(ySt(),e),r(bSt(),e),r(_St(),e),r(wSt(),e),r(xSt(),e),r(SSt(),e),r(CSt(),e),r(ESt(),e),r(MSt(),e),r(PSt(),e),r(TSt(),e),r(ASt(),e),r(OSt(),e),r(RSt(),e),r(DSt(),e),r(ISt(),e),r(jSt(),e),r(zSt(),e),r(BSt(),e),r(LSt(),e),r(FSt(),e),r(NSt(),e),r(USt(),e),r(VSt(),e),r(kSt(),e),r(qSt(),e),r(WSt(),e),r(GSt(),e),r(HSt(),e),r($St(),e),r(XSt(),e),r(YSt(),e),r(KSt(),e),r(QSt(),e),r(JSt(),e),r(ZSt(),e),r(eCt(),e),r(tCt(),e),r(rCt(),e),r(iCt(),e),r(nCt(),e),r(aCt(),e),r(oCt(),e),r(sCt(),e),r(lCt(),e),r(uCt(),e),r(cCt(),e),r(dCt(),e),r(hCt(),e),r(fCt(),e),r(pCt(),e),r(mCt(),e),r(gCt(),e),r(vCt(),e),r(yCt(),e),r(bCt(),e),r(_Ct(),e),r(wCt(),e),r(xCt(),e),r(SCt(),e),r(CCt(),e),r(ECt(),e),r(MCt(),e),r(PCt(),e),r(TCt(),e),r(ACt(),e),r(OCt(),e),r(RCt(),e),r(DCt(),e),r(ICt(),e),r(jCt(),e),r(zCt(),e),r(BCt(),e),r(LCt(),e),r(FCt(),e),r(NCt(),e),r(UCt(),e),r(VCt(),e),r(kCt(),e),r(qCt(),e),r(WCt(),e),r(GCt(),e),r(HCt(),e),r($Ct(),e),r(XCt(),e),r(YCt(),e),r(KCt(),e),r(QCt(),e),r(JCt(),e),r(ZCt(),e),r(eEt(),e),r(tEt(),e),r(rEt(),e),r(iEt(),e),r(nEt(),e),r(aEt(),e),r(oEt(),e),r(sEt(),e),r(lEt(),e),r(uEt(),e),r(cEt(),e),r(dEt(),e),r(hEt(),e),r(fEt(),e),r(pEt(),e),r(mEt(),e),r(gEt(),e),r(vEt(),e),r(yEt(),e),r(bEt(),e),r(_Et(),e),r(wEt(),e),r(xEt(),e),r(SEt(),e),r(CEt(),e),r(EEt(),e),r(MEt(),e),r(PEt(),e),r(TEt(),e),r(AEt(),e),r(OEt(),e),r(REt(),e),r(DEt(),e),r(IEt(),e),r(jEt(),e)}(Ry)),Ry}var Dy={},El={},W4={},YS={},Bse;function BEt(){if(Bse)return YS;Bse=1,Object.defineProperty(YS,"__esModule",{value:!0}),YS.CohereError=void 0;let e=class tEe extends Error{constructor({message:i,statusCode:n,body:a}){super(t({message:i,statusCode:n,body:a})),Object.setPrototypeOf(this,tEe.prototype),n!=null&&(this.statusCode=n),a!==void 0&&(this.body=a)}};YS.CohereError=e;function t({message:r,statusCode:i,body:n}){let a=[];return r!=null&&a.push(r),i!=null&&a.push(`Status code: ${i.toString()}`),n!=null&&a.push(`Body: ${JSON.stringify(n,void 0,2)}`),a.join(`
`)}return YS}var KS={},Lse;function LEt(){if(Lse)return KS;Lse=1,Object.defineProperty(KS,"__esModule",{value:!0}),KS.CohereTimeoutError=void 0;let e=class rEe extends Error{constructor(r){super(r),Object.setPrototypeOf(this,rEe.prototype)}};return KS.CohereTimeoutError=e,KS}var Fse;function pn(){return Fse||(Fse=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CohereTimeoutError=e.CohereError=void 0;var t=BEt();Object.defineProperty(e,"CohereError",{enumerable:!0,get:function(){return t.CohereError}});var r=LEt();Object.defineProperty(e,"CohereTimeoutError",{enumerable:!0,get:function(){return r.CohereTimeoutError}})}(W4)),W4}var Nse;function FEt(){if(Nse)return El;Nse=1;var e=El&&El.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=El&&El.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=El&&El.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(El,"__esModule",{value:!0}),El.BadRequestError=void 0;const i=r(pn());let n=class iEe extends i.CohereError{constructor(o){super({message:"BadRequestError",statusCode:400,body:o}),Object.setPrototypeOf(this,iEe.prototype)}};return El.BadRequestError=n,El}var Ml={},Use;function NEt(){if(Use)return Ml;Use=1;var e=Ml&&Ml.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Ml&&Ml.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Ml&&Ml.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.UnauthorizedError=void 0;const i=r(pn());let n=class nEe extends i.CohereError{constructor(o){super({message:"UnauthorizedError",statusCode:401,body:o}),Object.setPrototypeOf(this,nEe.prototype)}};return Ml.UnauthorizedError=n,Ml}var Pl={},Vse;function UEt(){if(Vse)return Pl;Vse=1;var e=Pl&&Pl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Pl&&Pl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Pl&&Pl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.ForbiddenError=void 0;const i=r(pn());let n=class aEe extends i.CohereError{constructor(o){super({message:"ForbiddenError",statusCode:403,body:o}),Object.setPrototypeOf(this,aEe.prototype)}};return Pl.ForbiddenError=n,Pl}var Tl={},kse;function VEt(){if(kse)return Tl;kse=1;var e=Tl&&Tl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Tl&&Tl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Tl&&Tl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.NotFoundError=void 0;const i=r(pn());let n=class oEe extends i.CohereError{constructor(o){super({message:"NotFoundError",statusCode:404,body:o}),Object.setPrototypeOf(this,oEe.prototype)}};return Tl.NotFoundError=n,Tl}var Al={},qse;function kEt(){if(qse)return Al;qse=1;var e=Al&&Al.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Al&&Al.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Al&&Al.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Al,"__esModule",{value:!0}),Al.UnprocessableEntityError=void 0;const i=r(pn());let n=class sEe extends i.CohereError{constructor(o){super({message:"UnprocessableEntityError",statusCode:422,body:o}),Object.setPrototypeOf(this,sEe.prototype)}};return Al.UnprocessableEntityError=n,Al}var Ol={},Wse;function qEt(){if(Wse)return Ol;Wse=1;var e=Ol&&Ol.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Ol&&Ol.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Ol&&Ol.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.TooManyRequestsError=void 0;const i=r(pn());let n=class lEe extends i.CohereError{constructor(o){super({message:"TooManyRequestsError",statusCode:429,body:o}),Object.setPrototypeOf(this,lEe.prototype)}};return Ol.TooManyRequestsError=n,Ol}var Rl={},Gse;function WEt(){if(Gse)return Rl;Gse=1;var e=Rl&&Rl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Rl&&Rl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Rl&&Rl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.InvalidTokenError=void 0;const i=r(pn());let n=class uEe extends i.CohereError{constructor(o){super({message:"InvalidTokenError",statusCode:498,body:o}),Object.setPrototypeOf(this,uEe.prototype)}};return Rl.InvalidTokenError=n,Rl}var Dl={},Hse;function GEt(){if(Hse)return Dl;Hse=1;var e=Dl&&Dl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Dl&&Dl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Dl&&Dl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.ClientClosedRequestError=void 0;const i=r(pn());let n=class cEe extends i.CohereError{constructor(o){super({message:"ClientClosedRequestError",statusCode:499,body:o}),Object.setPrototypeOf(this,cEe.prototype)}};return Dl.ClientClosedRequestError=n,Dl}var Il={},$se;function HEt(){if($se)return Il;$se=1;var e=Il&&Il.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Il&&Il.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Il&&Il.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Il,"__esModule",{value:!0}),Il.InternalServerError=void 0;const i=r(pn());let n=class dEe extends i.CohereError{constructor(o){super({message:"InternalServerError",statusCode:500,body:o}),Object.setPrototypeOf(this,dEe.prototype)}};return Il.InternalServerError=n,Il}var jl={},Xse;function $Et(){if(Xse)return jl;Xse=1;var e=jl&&jl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=jl&&jl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=jl&&jl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(jl,"__esModule",{value:!0}),jl.NotImplementedError=void 0;const i=r(pn());let n=class hEe extends i.CohereError{constructor(o){super({message:"NotImplementedError",statusCode:501,body:o}),Object.setPrototypeOf(this,hEe.prototype)}};return jl.NotImplementedError=n,jl}var zl={},Yse;function XEt(){if(Yse)return zl;Yse=1;var e=zl&&zl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=zl&&zl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=zl&&zl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(zl,"__esModule",{value:!0}),zl.ServiceUnavailableError=void 0;const i=r(pn());let n=class fEe extends i.CohereError{constructor(o){super({message:"ServiceUnavailableError",statusCode:503,body:o}),Object.setPrototypeOf(this,fEe.prototype)}};return zl.ServiceUnavailableError=n,zl}var Bl={},Kse;function YEt(){if(Kse)return Bl;Kse=1;var e=Bl&&Bl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Bl&&Bl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Bl&&Bl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.GatewayTimeoutError=void 0;const i=r(pn());let n=class pEe extends i.CohereError{constructor(o){super({message:"GatewayTimeoutError",statusCode:504,body:o}),Object.setPrototypeOf(this,pEe.prototype)}};return Bl.GatewayTimeoutError=n,Bl}var Qse;function KEt(){return Qse||(Qse=1,function(e){var t=Dy&&Dy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Dy&&Dy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(FEt(),e),r(NEt(),e),r(UEt(),e),r(VEt(),e),r(kEt(),e),r(qEt(),e),r(WEt(),e),r(GEt(),e),r(HEt(),e),r($Et(),e),r(XEt(),e),r(YEt(),e)}(Dy)),Dy}var Iy={},G4={},Jse;function QEt(){return Jse||(Jse=1,Object.defineProperty(G4,"__esModule",{value:!0})),G4}var Zse;function JEt(){return Zse||(Zse=1,function(e){var t=Iy&&Iy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Iy&&Iy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(QEt(),e)}(Iy)),Iy}var ele;function Iv(){return ele||(ele=1,function(e){var t=fy&&fy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=fy&&fy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(oxt(),e),r(zEt(),e),r(KEt(),e),r(JEt(),e)}(fy)),fy}var QS={},Yo={},js=64,ZEt=32,eMt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tMt=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],rMt=Math.pow(2,53)-1,wR=function(){function e(){this.state=Int32Array.from(tMt),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,i=t.byteLength;if(this.bytesHashed+=i,this.bytesHashed*8>rMt)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=t[r++],i--,this.bufferLength===js&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),i=this.bufferLength;if(r.setUint8(this.bufferLength++,128),i%js>=js-8){for(var n=this.bufferLength;n<js;n++)r.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<js-8;n++)r.setUint8(n,0);r.setUint32(js-8,Math.floor(t/4294967296),!0),r.setUint32(js-4,t),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(ZEt),n=0;n<8;n++)a[n*4]=this.state[n]>>>24&255,a[n*4+1]=this.state[n]>>>16&255,a[n*4+2]=this.state[n]>>>8&255,a[n*4+3]=this.state[n]>>>0&255;return a},e.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,i=t.state,n=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],d=i[7],h=0;h<js;h++){if(h<16)this.temp[h]=(r[h*4]&255)<<24|(r[h*4+1]&255)<<16|(r[h*4+2]&255)<<8|r[h*4+3]&255;else{var f=this.temp[h-2],g=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10;f=this.temp[h-15];var p=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[h]=(g+this.temp[h-7]|0)+(p+this.temp[h-16]|0)}var m=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&u^~l&c)|0)+(d+(eMt[h]+this.temp[h]|0)|0)|0,y=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&a^n&o^a&o)|0;d=c,c=u,u=l,l=s+m|0,s=o,o=a,a=n,n=m+y|0}i[0]+=n,i[1]+=a,i[2]+=o,i[3]+=s,i[4]+=l,i[5]+=u,i[6]+=c,i[7]+=d},e}();const iMt=e=>new TextEncoder().encode(e);var nMt=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:iMt;function mEe(e){return e instanceof Uint8Array?e:typeof e=="string"?nMt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function aMt(e){return typeof e=="string"?e.length===0:e.byteLength===0}var oMt=function(){function e(t){this.secret=t,this.hash=new wR,this.reset()}return e.prototype.update=function(t){if(!(aMt(t)||this.error))try{this.hash.update(mEe(t))}catch(r){this.error=r}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return A5e(this,void 0,void 0,function(){return O5e(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new wR,this.secret){this.outer=new wR;var t=sMt(this.secret),r=new Uint8Array(js);r.set(t);for(var i=0;i<js;i++)t[i]^=54,r[i]^=92;this.hash.update(t),this.outer.update(r);for(var i=0;i<t.byteLength;i++)t[i]=0}},e}();function sMt(e){var t=mEe(e);if(t.byteLength>js){var r=new wR;r.update(t),t=r.digest()}var i=new Uint8Array(js);return i.set(t),i}const lMt=Object.freeze(Object.defineProperty({__proto__:null,Sha256:oMt},Symbol.toStringTag,{value:"Module"})),uMt=vb(lMt);class NG extends Error{constructor(t,r=!0){var a;let i,n=!0;typeof r=="boolean"?(i=void 0,n=r):r!=null&&typeof r=="object"&&(i=r.logger,n=r.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=n,Object.setPrototypeOf(this,NG.prototype),(a=i==null?void 0:i.debug)==null||a.call(i,`@smithy/property-provider ${n?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}}class as extends NG{constructor(t,r=!0){super(t,r),this.name="CredentialsProviderError",Object.setPrototypeOf(this,as.prototype)}}function gEe(e){return Promise.all(Object.keys(e).reduce((t,r)=>{const i=e[r];return typeof i=="string"?t.push([r,i]):t.push(i().then(n=>[r,n])),t},[])).then(t=>t.reduce((r,[i,n])=>(r[i]=n,r),{}))}function vEe(e){return async t=>{var u;(u=e.logger)==null||u.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const{GetCredentialsForIdentityCommand:r,CognitoIdentityClient:i}=await tl(async()=>{const{GetCredentialsForIdentityCommand:c,CognitoIdentityClient:d}=await import("./loadCognitoIdentity-CdrHEUQN.js");return{GetCredentialsForIdentityCommand:c,CognitoIdentityClient:d}},__vite__mapDeps([0,1])),n=c=>{var d,h,f;return((d=e.clientConfig)==null?void 0:d[c])??((h=e.parentClientConfig)==null?void 0:h[c])??((f=t==null?void 0:t.callerClientConfig)==null?void 0:f[c])},{Credentials:{AccessKeyId:a=cMt(e.logger),Expiration:o,SecretKey:s=hMt(e.logger),SessionToken:l}=dMt(e.logger)}=await(e.client??new i(Object.assign({},e.clientConfig??{},{region:n("region"),profile:n("profile")}))).send(new r({CustomRoleArn:e.customRoleArn,IdentityId:e.identityId,Logins:e.logins?await gEe(e.logins):void 0}));return{identityId:e.identityId,accessKeyId:a,secretAccessKey:s,sessionToken:l,expiration:o}}}function cMt(e){throw new as("Response from Amazon Cognito contained no access key ID",{logger:e})}function dMt(e){throw new as("Response from Amazon Cognito contained no credentials",{logger:e})}function hMt(e){throw new as("Response from Amazon Cognito contained no secret key",{logger:e})}const H4="IdentityIds";class fMt{constructor(t="aws:cognito-identity-ids"){ey(this,"dbName");this.dbName=t}getItem(t){return this.withObjectStore("readonly",r=>{const i=r.get(t);return new Promise(n=>{i.onerror=()=>n(null),i.onsuccess=()=>n(i.result?i.result.value:null)})}).catch(()=>null)}removeItem(t){return this.withObjectStore("readwrite",r=>{const i=r.delete(t);return new Promise((n,a)=>{i.onerror=()=>a(i.error),i.onsuccess=()=>n()})})}setItem(t,r){return this.withObjectStore("readwrite",i=>{const n=i.put({id:t,value:r});return new Promise((a,o)=>{n.onerror=()=>o(n.error),n.onsuccess=()=>a()})})}getDb(){const t=self.indexedDB.open(this.dbName,1);return new Promise((r,i)=>{t.onsuccess=()=>{r(t.result)},t.onerror=()=>{i(t.error)},t.onblocked=()=>{i(new Error("Unable to access DB"))},t.onupgradeneeded=()=>{const n=t.result;n.onerror=()=>{i(new Error("Failed to create object store"))},n.createObjectStore(H4,{keyPath:"id"})}})}withObjectStore(t,r){return this.getDb().then(i=>{const n=i.transaction(H4,t);return n.oncomplete=()=>i.close(),new Promise((a,o)=>{n.onerror=()=>o(n.error),a(r(n.objectStore(H4)))}).catch(a=>{throw i.close(),a})})}}class pMt{constructor(t={}){ey(this,"store");this.store=t}getItem(t){return t in this.store?this.store[t]:null}removeItem(t){delete this.store[t]}setItem(t,r){this.store[t]=r}}const mMt=new pMt;function gMt(){return typeof self=="object"&&self.indexedDB?new fMt:typeof window=="object"&&window.localStorage?window.localStorage:mMt}function vMt({accountId:e,cache:t=gMt(),client:r,clientConfig:i,customRoleArn:n,identityPoolId:a,logins:o,userIdentifier:s=!o||Object.keys(o).length===0?"ANONYMOUS":void 0,logger:l,parentClientConfig:u}){l==null||l.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const c=s?`aws:cognito-identity-credentials:${a}:${s}`:void 0;let d=async h=>{const{GetIdCommand:f,CognitoIdentityClient:g}=await tl(async()=>{const{GetIdCommand:b,CognitoIdentityClient:w}=await import("./loadCognitoIdentity-CdrHEUQN.js");return{GetIdCommand:b,CognitoIdentityClient:w}},__vite__mapDeps([0,1])),p=b=>{var w;return(i==null?void 0:i[b])??(u==null?void 0:u[b])??((w=h==null?void 0:h.callerClientConfig)==null?void 0:w[b])},m=r??new g(Object.assign({},i??{},{region:p("region"),profile:p("profile")}));let y=c&&await t.getItem(c);if(!y){const{IdentityId:b=yMt(l)}=await m.send(new f({AccountId:e,IdentityPoolId:a,Logins:o?await gEe(o):void 0}));y=b,c&&Promise.resolve(t.setItem(c,y)).catch(()=>{})}return d=vEe({client:m,customRoleArn:n,logins:o,identityId:y}),d(h)};return h=>d(h).catch(async f=>{throw c&&Promise.resolve(t.removeItem(c)).catch(()=>{}),f})}function yMt(e){throw new as("Response from Amazon Cognito contained no identity ID",{logger:e})}const bMt=e=>vEe({...e}),_Mt=e=>vMt({...e});var tle;(function(e){e.HEADER="header",e.QUERY="query"})(tle||(tle={}));var rle;(function(e){e.HEADER="header",e.QUERY="query"})(rle||(rle={}));var ile;(function(e){e.HTTP="http",e.HTTPS="https"})(ile||(ile={}));var nle;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(nle||(nle={}));var ale;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ale||(ale={}));var ole;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(ole||(ole={}));var sle;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(sle||(sle={}));let wMt=class e8{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){const r=new e8({...t,headers:{...t.headers}});return r.query&&(r.query=xMt(r.query)),r}static isInstance(t){if(!t)return!1;const r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e8.clone(this)}};function xMt(e){return Object.keys(e).reduce((t,r)=>{const i=e[r];return{...t,[r]:Array.isArray(i)?[...i]:i}},{})}let lle=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};const $4=e=>encodeURIComponent(e).replace(/[!'()*]/g,SMt),SMt=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function CMt(e){const t=[];for(let r of Object.keys(e).sort()){const i=e[r];if(r=$4(r),Array.isArray(i))for(let n=0,a=i.length;n<a;n++)t.push(`${r}=${$4(i[n])}`);else{let n=r;(i||typeof i=="string")&&(n+=`=${$4(i)}`),t.push(n)}}return t.join("&")}function ule(e,t){return new Request(e,t)}function EMt(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{const i=new Error(`Request did not complete within ${e} ms`);i.name="TimeoutError",r(i)},e)})}const X4={supported:void 0};class UG{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new UG(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),X4.supported===void 0&&(X4.supported=typeof Request<"u"&&"keepalive"in ule("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r}={}){var y;this.config||(this.config=await this.configProvider);const i=this.config.requestTimeout,n=this.config.keepAlive===!0,a=this.config.credentials;if(r!=null&&r.aborted){const b=new Error("Request aborted");return b.name="AbortError",Promise.reject(b)}let o=t.path;const s=CMt(t.query||{});s&&(o+=`?${s}`),t.fragment&&(o+=`#${t.fragment}`);let l="";if(t.username!=null||t.password!=null){const b=t.username??"",w=t.password??"";l=`${b}:${w}@`}const{port:u,method:c}=t,d=`${t.protocol}//${l}${t.hostname}${u?`:${u}`:""}${o}`,h=c==="GET"||c==="HEAD"?void 0:t.body,f={body:h,headers:new Headers(t.headers),method:c,credentials:a};(y=this.config)!=null&&y.cache&&(f.cache=this.config.cache),h&&(f.duplex="half"),typeof AbortController<"u"&&(f.signal=r),X4.supported&&(f.keepalive=n),typeof this.config.requestInit=="function"&&Object.assign(f,this.config.requestInit(t));let g=()=>{};const p=ule(d,f),m=[fetch(p).then(b=>{const w=b.headers,x={};for(const C of w.entries())x[C[0]]=C[1];return b.body!=null?{response:new lle({headers:x,reason:b.statusText,statusCode:b.status,body:b.body})}:b.blob().then(C=>({response:new lle({headers:x,reason:b.statusText,statusCode:b.status,body:C})}))}),EMt(i)];return r&&m.push(new Promise((b,w)=>{const x=()=>{const S=new Error("Request aborted");S.name="AbortError",w(S)};if(typeof r.addEventListener=="function"){const S=r;S.addEventListener("abort",x,{once:!0}),g=()=>S.removeEventListener("abort",x)}else r.onabort=x})),Promise.race(m).finally(g)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(i=>(i[t]=r,i))}httpHandlerConfigs(){return this.config??{}}}const Sv={},Bw=new Array(64);for(let e=0,t=65,r=90;e+t<=r;e++){const i=String.fromCharCode(e+t);Sv[i]=e,Bw[e]=i}for(let e=0,t=97,r=122;e+t<=r;e++){const i=String.fromCharCode(e+t),n=e+26;Sv[i]=n,Bw[n]=i}for(let e=0;e<10;e++){Sv[e.toString(10)]=e+52;const t=e.toString(10),r=e+52;Sv[t]=r,Bw[r]=t}Sv["+"]=62;Bw[62]="+";Sv["/"]=63;Bw[63]="/";const P_=6,kE=8,MMt=63,PMt=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const r=new ArrayBuffer(t),i=new DataView(r);for(let n=0;n<e.length;n+=4){let a=0,o=0;for(let u=n,c=n+3;u<=c;u++)if(e[u]!=="="){if(!(e[u]in Sv))throw new TypeError(`Invalid character ${e[u]} in base64 string.`);a|=Sv[e[u]]<<(c-u)*P_,o+=P_}else a>>=P_;const s=n/4*3;a>>=o%kE;const l=Math.floor(o/kE);for(let u=0;u<l;u++){const c=(l-u-1)*kE;i.setUint8(s+u,(a&255<<c)>>c)}}return new Uint8Array(r)},TMt=e=>new TextEncoder().encode(e),AMt=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function OMt(e){let t;typeof e=="string"?t=TMt(e):t=e;const r=typeof t=="object"&&typeof t.length=="number",i=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!r&&!i)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let n="";for(let a=0;a<t.length;a+=3){let o=0,s=0;for(let u=a,c=Math.min(a+3,t.length);u<c;u++)o|=t[u]<<(c-u-1)*kE,s+=kE;const l=Math.ceil(s/P_);o<<=l*P_-s;for(let u=1;u<=l;u++){const c=(l-u)*P_;n+=Bw[(o&MMt<<c)>>c]}n+="==".slice(0,4-l)}return n}const RMt=async e=>{var t;return typeof Blob=="function"&&e instanceof Blob||((t=e.constructor)==null?void 0:t.name)==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):DMt(e):IMt(e)};async function DMt(e){const t=await jMt(e),r=PMt(t);return new Uint8Array(r)}async function IMt(e){const t=[],r=e.getReader();let i=!1,n=0;for(;!i;){const{done:s,value:l}=await r.read();l&&(t.push(l),n+=l.length),i=s}const a=new Uint8Array(n);let o=0;for(const s of t)a.set(s,o),o+=s.length;return a}function jMt(e){return new Promise((t,r)=>{const i=new FileReader;i.onloadend=()=>{if(i.readyState!==2)return r(new Error("Reader aborted too early"));const n=i.result??"",a=n.indexOf(","),o=a>-1?a+1:n.length;t(n.substring(o))},i.onabort=()=>r(new Error("Read aborted")),i.onerror=()=>r(i.error),i.readAsDataURL(e)})}const zMt="169.254.170.2",BMt="169.254.170.23",LMt="[fd00:ec2::23]",FMt=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===zMt||e.hostname===BMt||e.hostname===LMt)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;const r=e.hostname.split("."),i=n=>{const a=parseInt(n,10);return 0<=a&&a<=255};if(r[0]==="127"&&i(r[1])&&i(r[2])&&i(r[3])&&r.length===4)return}throw new as(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}},cle=e=>{var t;return typeof ReadableStream=="function"&&(((t=e==null?void 0:e.constructor)==null?void 0:t.name)===ReadableStream.name||e instanceof ReadableStream)},yEe={},t8={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),yEe[e]=t,t8[t]=e}function f2t(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const i=e.slice(r,r+2).toLowerCase();if(i in t8)t[r/2]=t8[i];else throw new Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return t}function NMt(e){let t="";for(let r=0;r<e.byteLength;r++)t+=yEe[e[r]];return t}const dle="The stream has already been transformed.",UMt=e=>{var n,a;if(!hle(e)&&!cle(e)){const o=((a=(n=e==null?void 0:e.__proto__)==null?void 0:n.constructor)==null?void 0:a.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1;const r=async()=>{if(t)throw new Error(dle);return t=!0,await RMt(e)},i=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{const s=await r();if(o==="base64")return OMt(s);if(o==="hex")return NMt(s);if(o===void 0||o==="utf8"||o==="utf-8")return AMt(s);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(s);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(dle);if(t=!0,hle(e))return i(e);if(cle(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},hle=e=>typeof Blob=="function"&&e instanceof Blob,r8=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&wEe.warn(_Ee(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},VMt=Math.ceil(2**127*(2-2**-23)),fle=e=>{const t=r8(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>VMt)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},kMt=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},ple=e=>VG(e,32),mle=e=>VG(e,16),gle=e=>VG(e,8),VG=(e,t)=>{const r=kMt(e);if(r!==void 0&&qMt(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},qMt=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},p2t=(e,t)=>{if(e==null)throw new TypeError("Expected a non-null value");return e},m2t=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return wEe.warn(_Ee(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},WMt=e=>r8(typeof e=="string"?OP(e):e),GMt=e=>fle(typeof e=="string"?OP(e):e),HMt=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,OP=e=>{const t=e.match(HMt);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},g2t=e=>ple(typeof e=="string"?OP(e):e),bEe=e=>mle(typeof e=="string"?OP(e):e),$Mt=e=>gle(typeof e=="string"?OP(e):e),_Ee=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),wEe={warn:console.warn},XMt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],YMt=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),KMt=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=YMt.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,i,n,a,o,s,l,u]=t,c=bEe(kG(i)),d=tb(n,"month",1,12),h=tb(a,"day",1,31);return xEe(c,d,h,{hours:o,minutes:s,seconds:l,fractionalMilliseconds:u})},QMt=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),v2t=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const t=QMt.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");const[r,i,n,a,o,s,l,u,c]=t,d=bEe(kG(i)),h=tb(n,"month",1,12),f=tb(a,"day",1,31),g=xEe(d,h,f,{hours:o,minutes:s,seconds:l,fractionalMilliseconds:u});return c.toUpperCase()!="Z"&&g.setTime(g.getTime()-rPt(c)),g},y2t=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=WMt(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},xEe=(e,t,r,i)=>{const n=t-1;return ZMt(e,n,r),new Date(Date.UTC(e,n,r,tb(i.hours,"hour",0,23),tb(i.minutes,"minute",0,59),tb(i.seconds,"seconds",0,60),tPt(i.fractionalMilliseconds)))},JMt=[31,28,31,30,31,30,31,31,30,31,30,31],ZMt=(e,t,r)=>{let i=JMt[t];if(t===1&&ePt(e)&&(i=29),r>i)throw new TypeError(`Invalid day for ${XMt[t]} in ${e}: ${r}`)},ePt=e=>e%4===0&&(e%100!==0||e%400===0),tb=(e,t,r,i)=>{const n=$Mt(kG(e));if(n<r||n>i)throw new TypeError(`${t} must be between ${r} and ${i}, inclusive`);return n},tPt=e=>e==null?0:GMt("0."+e)*1e3,rPt=e=>{const t=e[0];let r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);const i=Number(e.substring(1,3)),n=Number(e.substring(4,6));return r*(i*60+n)*60*1e3},kG=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};function iPt(e){return new wMt({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,i])=>(t[r]=i,t),{}),fragment:e.hash})}async function nPt(e,t){const i=await UMt(e.body).transformToString();if(e.statusCode===200){const n=JSON.parse(i);if(typeof n.AccessKeyId!="string"||typeof n.SecretAccessKey!="string"||typeof n.Token!="string"||typeof n.Expiration!="string")throw new as("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:n.AccessKeyId,secretAccessKey:n.SecretAccessKey,sessionToken:n.Token,expiration:KMt(n.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let n={};try{n=JSON.parse(i)}catch{}throw Object.assign(new as(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:n.Code,Message:n.Message})}throw new as(`Server responded with status: ${e.statusCode}`,{logger:t})}const aPt=(e,t,r)=>async()=>{for(let i=0;i<t;++i)try{return await e()}catch{await new Promise(a=>setTimeout(a,r))}return await e()},oPt=(e={})=>{var a;(a=e.logger)==null||a.debug("@aws-sdk/credential-provider-http - fromHttp");let t;const r=e.credentialsFullUri;if(r)t=r;else throw new as("No HTTP credential provider host provided.",{logger:e.logger});const i=new URL(t);FMt(i,e.logger);const n=new UG;return aPt(async()=>{const o=iPt(i);e.authorizationToken&&(o.headers.Authorization=e.authorizationToken);const s=await n.handle(o);return nPt(s.response)},e.maxRetries??3,e.timeout??1e3)},sPt=(e,t)=>(r,i)=>async n=>{var o,s,l,u;const{response:a}=await r(n);try{const c=await t(a,e);return{response:a,output:c}}catch(c){if(Object.defineProperty(c,"$response",{value:a}),!("$metadata"in c)){const d="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{c.message+=`
  `+d}catch{!i.logger||((s=(o=i.logger)==null?void 0:o.constructor)==null?void 0:s.name)==="NoOpLogger"?console.warn(d):(u=(l=i.logger)==null?void 0:l.warn)==null||u.call(l,d)}typeof c.$responseBodyText<"u"&&c.$response&&(c.$response.body=c.$responseBodyText)}throw c}},lPt=(e,t)=>(r,i)=>async n=>{var s;const a=(s=i.endpointV2)!=null&&s.url&&e.urlParser?async()=>e.urlParser(i.endpointV2.url):e.endpoint;if(!a)throw new Error("No valid endpoint provider available.");const o=await t(n.input,{...e,endpoint:a});return r({...n,request:o})},uPt={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},SEe={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function b2t(e,t,r){return{applyToStack:i=>{i.add(sPt(e,r),uPt),i.add(lPt(e,t),SEe)}}}SEe.name;const cPt=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},dPt="us-east-1",hPt=(e,t,r)=>{let i;return async(n={})=>{var h,f,g,p,m,y;const{callerClientConfig:a}=n,o=((h=e.clientConfig)==null?void 0:h.profile)??(a==null?void 0:a.profile),s=e.logger??(a==null?void 0:a.logger);s==null||s.debug("@aws-sdk/credential-providers - fromTemporaryCredentials (STS)");const l={...e.params,RoleSessionName:e.params.RoleSessionName??"aws-sdk-js-"+Date.now()};if(l!=null&&l.SerialNumber){if(!e.mfaCodeProvider)throw new as("Temporary credential requires multi-factor authentication, but no MFA code callback was provided.",{tryNextLink:!1,logger:s});l.TokenCode=await e.mfaCodeProvider(l==null?void 0:l.SerialNumber)}const{AssumeRoleCommand:u,STSClient:c}=await tl(async()=>{const{AssumeRoleCommand:b,STSClient:w}=await import("./loadSts-C1MYEZk_.js").then(x=>x.l);return{AssumeRoleCommand:b,STSClient:w}},__vite__mapDeps([2,1]));if(!i){const b=typeof t=="function"?t():void 0,w=[e.masterCredentials,(f=e.clientConfig)==null?void 0:f.credentials,void(a==null?void 0:a.credentials),(g=a==null?void 0:a.credentialDefaultProvider)==null?void 0:g.call(a),b];let x="STS client default credentials";if(w[0])x="options.masterCredentials";else if(w[1])x="options.clientConfig.credentials";else{if(w[2])throw x="caller client's credentials",new Error("fromTemporaryCredentials recursion in callerClientConfig.credentials");w[3]?x="caller client's credentialDefaultProvider":w[4]&&(x="AWS SDK default credentials")}const S=[(p=e.clientConfig)==null?void 0:p.region,a==null?void 0:a.region,await(r==null?void 0:r({profile:o})),dPt];let C="default partition's default region";S[0]?C="options.clientConfig.region":S[1]?C="caller client's region":S[2]&&(C="file or env region");const T=[vle((m=e.clientConfig)==null?void 0:m.requestHandler),vle(a==null?void 0:a.requestHandler)];let M="STS default requestHandler";T[0]?M="options.clientConfig.requestHandler":T[1]&&(M="caller client's requestHandler"),(y=s==null?void 0:s.debug)==null||y.call(s,`@aws-sdk/credential-providers - fromTemporaryCredentials STS client init with ${C}=${await cPt(TO(S))()}, ${x}, ${M}.`),i=new c({...e.clientConfig,credentials:TO(w),logger:s,profile:o,region:TO(S),requestHandler:TO(T)})}if(e.clientPlugins)for(const b of e.clientPlugins)i.middlewareStack.use(b);const{Credentials:d}=await i.send(new u(l));if(!d||!d.AccessKeyId||!d.SecretAccessKey)throw new as(`Invalid response from STS.assumeRole call with role ${l.RoleArn}`,{logger:s});return{accessKeyId:d.AccessKeyId,secretAccessKey:d.SecretAccessKey,sessionToken:d.SessionToken,expiration:d.Expiration,credentialScope:d.CredentialScope}}},vle=e=>{var t;return((t=e==null?void 0:e.metadata)==null?void 0:t.handlerProtocol)==="h2"?void 0:e},TO=e=>{for(const t of e)if(t!==void 0)return t},fPt={},pPt=Object.freeze(Object.defineProperty({__proto__:null,default:fPt},Symbol.toStringTag,{value:"Module"})),mPt=e=>async t=>{var c;(c=e.logger)==null||c.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");const{roleArn:r,roleSessionName:i,webIdentityToken:n,providerId:a,policyArns:o,policy:s,durationSeconds:l}=e;let{roleAssumerWithWebIdentity:u}=e;if(!u){const{getDefaultRoleAssumerWithWebIdentity:d}=await tl(async()=>{const{getDefaultRoleAssumerWithWebIdentity:h}=await import("./index-Bw1GdsWC.js");return{getDefaultRoleAssumerWithWebIdentity:h}},__vite__mapDeps([3,2,1]));u=d({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t==null?void 0:t.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return u({RoleArn:r,RoleSessionName:i??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:a,PolicyArns:o,Policy:s,DurationSeconds:l})},gPt=e=>mPt({...e}),vPt=Object.freeze(Object.defineProperty({__proto__:null,fromCognitoIdentity:bMt,fromCognitoIdentityPool:_Mt,fromHttp:oPt,fromTemporaryCredentials:hPt,fromWebToken:gPt},Symbol.toStringTag,{value:"Module"})),yPt=vb(vPt);var yle;(function(e){e.HEADER="header",e.QUERY="query"})(yle||(yle={}));var ble;(function(e){e.HTTP="http",e.HTTPS="https"})(ble||(ble={}));var i8;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(i8||(i8={}));var _le;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(_le||(_le={}));class bPt{constructor({name:t,kind:r=i8.HEADER,values:i=[]}){this.name=t,this.kind=r,this.values=i}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}}class _Pt{constructor({fields:t=[],encoding:r="utf-8"}){this.entries={},t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}}class qG{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;const r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){const t=new qG({...this,headers:{...this.headers}});return t.query&&(t.query=wPt(t.query)),t}}function wPt(e){return Object.keys(e).reduce((t,r)=>{const i=e[r];return{...t,[r]:Array.isArray(i)?[...i]:i}},{})}class xPt{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}function SPt(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}const CPt=Object.freeze(Object.defineProperty({__proto__:null,Field:bPt,Fields:_Pt,HttpRequest:qG,HttpResponse:xPt,isValidHostname:SPt},Symbol.toStringTag,{value:"Module"})),EPt=vb(CPt);var Y4={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n8=function(e,t){return n8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},n8(e,t)};function MPt(e,t){n8(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var a8=function(){return a8=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},a8.apply(this,arguments)};function PPt(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function TPt(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a}function APt(e,t){return function(r,i){t(r,i,e)}}function OPt(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function RPt(e,t,r,i){function n(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{u(i.next(c))}catch(d){o(d)}}function l(c){try{u(i.throw(c))}catch(d){o(d)}}function u(c){c.done?a(c.value):n(c.value).then(s,l)}u((i=i.apply(e,t||[])).next())})}function DPt(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(a=u[0]&2?n.return:u[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,u[1])).done)return a;switch(n=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(c){u=[6,c],n=0}finally{i=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function IPt(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}function jPt(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function o8(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function CEe(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,a=[],o;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function zPt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(CEe(arguments[t]));return e}function BPt(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,n++)i[n]=a[o];return i}function NM(e){return this instanceof NM?(this.v=e,this):new NM(e)}function LPt(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),n,a=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(h){i[h]&&(n[h]=function(f){return new Promise(function(g,p){a.push([h,f,g,p])>1||s(h,f)})})}function s(h,f){try{l(i[h](f))}catch(g){d(a[0][3],g)}}function l(h){h.value instanceof NM?Promise.resolve(h.value.v).then(u,c):d(a[0][2],h)}function u(h){s("next",h)}function c(h){s("throw",h)}function d(h,f){h(f),a.shift(),a.length&&s(a[0][0],a[0][1])}}function FPt(e){var t,r;return t={},i("next"),i("throw",function(n){throw n}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(n,a){t[n]=e[n]?function(o){return(r=!r)?{value:NM(e[n](o)),done:n==="return"}:a?a(o):o}:a}}function NPt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof o8=="function"?o8(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(a){r[a]=e[a]&&function(o){return new Promise(function(s,l){o=e[a](o),n(s,l,o.done,o.value)})}}function n(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}function UPt(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function VPt(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function kPt(e){return e&&e.__esModule?e:{default:e}}function qPt(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function WPt(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const GPt=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return a8},__asyncDelegator:FPt,__asyncGenerator:LPt,__asyncValues:NPt,__await:NM,__awaiter:RPt,__classPrivateFieldGet:qPt,__classPrivateFieldSet:WPt,__createBinding:IPt,__decorate:TPt,__exportStar:jPt,__extends:MPt,__generator:DPt,__importDefault:kPt,__importStar:VPt,__makeTemplateObject:UPt,__metadata:OPt,__param:APt,__read:CEe,__rest:PPt,__spread:zPt,__spreadArrays:BPt,__values:o8},Symbol.toStringTag,{value:"Module"})),EEe=vb(GPt);var K4={},JS={};const HPt=e=>{const t=[];for(let r=0,i=e.length;r<i;r++){const n=e.charCodeAt(r);if(n<128)t.push(n);else if(n<2048)t.push(n>>6|192,n&63|128);else if(r+1<e.length&&(n&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){const a=65536+((n&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else t.push(n>>12|224,n>>6&63|128,n&63|128)}return Uint8Array.from(t)},$Pt=e=>{let t="";for(let r=0,i=e.length;r<i;r++){const n=e[r];if(n<128)t+=String.fromCharCode(n);else if(192<=n&&n<224){const a=e[++r];t+=String.fromCharCode((n&31)<<6|a&63)}else if(240<=n&&n<365){const o="%"+[n,e[++r],e[++r],e[++r]].map(s=>s.toString(16)).join("%");t+=decodeURIComponent(o)}else t+=String.fromCharCode((n&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};function XPt(e){return new TextEncoder().encode(e)}function YPt(e){return new TextDecoder("utf-8").decode(e)}const KPt=e=>typeof TextEncoder=="function"?XPt(e):HPt(e),QPt=e=>typeof TextDecoder=="function"?YPt(e):$Pt(e),JPt=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:KPt,toUtf8:QPt},Symbol.toStringTag,{value:"Module"})),ZPt=vb(JPt);var wle;function eTt(){if(wle)return JS;wle=1,Object.defineProperty(JS,"__esModule",{value:!0}),JS.convertToBuffer=void 0;var e=ZPt,t=typeof Buffer<"u"&&Buffer.from?function(i){return Buffer.from(i,"utf8")}:e.fromUtf8;function r(i){return i instanceof Uint8Array?i:typeof i=="string"?t(i):ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(i)}return JS.convertToBuffer=r,JS}var ZS={},xle;function tTt(){if(xle)return ZS;xle=1,Object.defineProperty(ZS,"__esModule",{value:!0}),ZS.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return ZS.isEmptyData=e,ZS}var eC={},Sle;function rTt(){if(Sle)return eC;Sle=1,Object.defineProperty(eC,"__esModule",{value:!0}),eC.numToUint8=void 0;function e(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}return eC.numToUint8=e,eC}var tC={},Cle;function iTt(){if(Cle)return tC;Cle=1,Object.defineProperty(tC,"__esModule",{value:!0}),tC.uint32ArrayFrom=void 0;function e(t){if(!Uint32Array.from){for(var r=new Uint32Array(t.length),i=0;i<t.length;)r[i]=t[i],i+=1;return r}return Uint32Array.from(t)}return tC.uint32ArrayFrom=e,tC}var Ele;function MEe(){return Ele||(Ele=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=eTt();Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var r=tTt();Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var i=rTt();Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return i.numToUint8}});var n=iTt();Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return n.uint32ArrayFrom}})}(K4)),K4}var rC={},Mle;function nTt(){if(Mle)return rC;Mle=1,Object.defineProperty(rC,"__esModule",{value:!0}),rC.AwsCrc32=void 0;var e=EEe,t=MEe(),r=PEe(),i=function(){function n(){this.crc32=new r.Crc32}return n.prototype.update=function(a){(0,t.isEmptyData)(a)||this.crc32.update((0,t.convertToBuffer)(a))},n.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(a){return[2,(0,t.numToUint8)(this.crc32.digest())]})})},n.prototype.reset=function(){this.crc32=new r.Crc32},n}();return rC.AwsCrc32=i,rC}var Ple;function PEe(){return Ple||(Ple=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32=e.Crc32=e.crc32=void 0;var t=EEe,r=MEe();function i(l){return new n().update(l).digest()}e.crc32=i;var n=function(){function l(){this.checksum=4294967295}return l.prototype.update=function(u){var c,d;try{for(var h=t.__values(u),f=h.next();!f.done;f=h.next()){var g=f.value;this.checksum=this.checksum>>>8^o[(this.checksum^g)&255]}}catch(p){c={error:p}}finally{try{f&&!f.done&&(d=h.return)&&d.call(h)}finally{if(c)throw c.error}}return this},l.prototype.digest=function(){return(this.checksum^4294967295)>>>0},l}();e.Crc32=n;var a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=(0,r.uint32ArrayFrom)(a),s=nTt();Object.defineProperty(e,"AwsCrc32",{enumerable:!0,get:function(){return s.AwsCrc32}})}(Y4)),Y4}PEe();const TEe={},s8={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),TEe[e]=t,s8[t]=e}function aTt(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const i=e.slice(r,r+2).toLowerCase();if(i in s8)t[r/2]=s8[i];else throw new Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return t}function W1(e){let t="";for(let r=0;r<e.byteLength;r++)t+=TEe[e[r]];return t}class qE{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let i=7,n=Math.abs(Math.round(t));i>-1&&n>0;i--,n/=256)r[i]=n;return t<0&&Tle(r),new qE(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&Tle(t),parseInt(W1(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function Tle(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}class oTt{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){const r=[];for(const a of Object.keys(t)){const o=this.fromUtf8(a);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[a]))}const i=new Uint8Array(r.reduce((a,o)=>a+o.byteLength,0));let n=0;for(const a of r)i.set(a,n),n+=a.byteLength;return i}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const i=new DataView(new ArrayBuffer(5));return i.setUint8(0,4),i.setInt32(1,t.value,!1),new Uint8Array(i.buffer);case"long":const n=new Uint8Array(9);return n[0]=5,n.set(t.value.bytes,1),n;case"binary":const a=new DataView(new ArrayBuffer(3+t.value.byteLength));a.setUint8(0,6),a.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(a.buffer);return o.set(t.value,3),o;case"string":const s=this.fromUtf8(t.value),l=new DataView(new ArrayBuffer(3+s.byteLength));l.setUint8(0,7),l.setUint16(1,s.byteLength,!1);const u=new Uint8Array(l.buffer);return u.set(s,3),u;case"timestamp":const c=new Uint8Array(9);return c[0]=8,c.set(qE.fromNumber(t.value.valueOf()).bytes,1),c;case"uuid":if(!mTt.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(aTt(t.value.replace(/\-/g,"")),1),d}}parse(t){const r={};let i=0;for(;i<t.byteLength;){const n=t.getUint8(i++),a=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+i,n));switch(i+=n,t.getUint8(i++)){case 0:r[a]={type:Ole,value:!0};break;case 1:r[a]={type:Ole,value:!1};break;case 2:r[a]={type:sTt,value:t.getInt8(i++)};break;case 3:r[a]={type:lTt,value:t.getInt16(i,!1)},i+=2;break;case 4:r[a]={type:uTt,value:t.getInt32(i,!1)},i+=4;break;case 5:r[a]={type:cTt,value:new qE(new Uint8Array(t.buffer,t.byteOffset+i,8))},i+=8;break;case 6:const o=t.getUint16(i,!1);i+=2,r[a]={type:dTt,value:new Uint8Array(t.buffer,t.byteOffset+i,o)},i+=o;break;case 7:const s=t.getUint16(i,!1);i+=2,r[a]={type:hTt,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+i,s))},i+=s;break;case 8:r[a]={type:fTt,value:new Date(new qE(new Uint8Array(t.buffer,t.byteOffset+i,8)).valueOf())},i+=8;break;case 9:const l=new Uint8Array(t.buffer,t.byteOffset+i,16);i+=16,r[a]={type:pTt,value:`${W1(l.subarray(0,4))}-${W1(l.subarray(4,6))}-${W1(l.subarray(6,8))}-${W1(l.subarray(8,10))}-${W1(l.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var Ale;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Ale||(Ale={}));const Ole="boolean",sTt="byte",lTt="short",uTt="integer",cTt="long",dTt="binary",hTt="string",fTt="timestamp",pTt="uuid",mTt=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,AEe={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),AEe[e]=t}function n_(e){let t="";for(let r=0;r<e.byteLength;r++)t+=AEe[e[r]];return t}const Rle=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},OEe=e=>new TextEncoder().encode(e),WE=e=>typeof e=="string"?OEe(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),gTt=e=>new TextDecoder("utf-8").decode(e),vTt="X-Amz-Algorithm",yTt="X-Amz-Credential",REe="X-Amz-Date",bTt="X-Amz-SignedHeaders",_Tt="X-Amz-Expires",DEe="X-Amz-Signature",IEe="X-Amz-Security-Token",jEe="authorization",zEe=REe.toLowerCase(),wTt="date",xTt=[jEe,zEe,wTt],STt=DEe.toLowerCase(),l8="x-amz-content-sha256",CTt=IEe.toLowerCase(),ETt={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},MTt=/^proxy-/,PTt=/^sec-/,Q4="AWS4-HMAC-SHA256",TTt="AWS4-HMAC-SHA256-PAYLOAD",ATt="UNSIGNED-PAYLOAD",OTt=50,BEe="aws4_request",RTt=60*60*24*7,a_={},xR=[],SR=(e,t,r)=>`${e}/${t}/${r}/${BEe}`,LEe=async(e,t,r,i,n)=>{const a=await Dle(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${i}:${n}:${n_(a)}:${t.sessionToken}`;if(o in a_)return a_[o];for(xR.push(o);xR.length>OTt;)delete a_[xR.shift()];let s=`AWS4${t.secretAccessKey}`;for(const l of[r,i,n,BEe])s=await Dle(e,s,l);return a_[o]=s},DTt=()=>{xR.length=0,Object.keys(a_).forEach(e=>{delete a_[e]})},Dle=(e,t,r)=>{const i=new e(t);return i.update(WE(r)),i.digest()},u8=({headers:e},t,r)=>{const i={};for(const n of Object.keys(e).sort()){if(e[n]==null)continue;const a=n.toLowerCase();(a in ETt||t!=null&&t.has(a)||MTt.test(a)||PTt.test(a))&&(!r||r&&!r.has(a))||(i[a]=e[n].trim().replace(/\s+/g," "))}return i},AO=e=>encodeURIComponent(e).replace(/[!'()*]/g,ITt),ITt=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,FEe=({query:e={}})=>{const t=[],r={};for(const i of Object.keys(e).sort()){if(i.toLowerCase()===STt)continue;t.push(i);const n=e[i];typeof n=="string"?r[i]=`${AO(i)}=${AO(n)}`:Array.isArray(n)&&(r[i]=n.slice(0).sort().reduce((a,o)=>a.concat([`${AO(i)}=${AO(o)}`]),[]).join("&"))}return t.map(i=>r[i]).filter(i=>i).join("&")},jTt=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",CR=async({headers:e,body:t},r)=>{for(const i of Object.keys(e))if(i.toLowerCase()===l8)return e[i];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||jTt(t)){const i=new r;return i.update(WE(t)),n_(await i.digest())}return ATt},zTt=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},NEe=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?BTt(t):void 0}),BTt=e=>Object.keys(e).reduce((t,r)=>{const i=e[r];return{...t,[r]:Array.isArray(i)?[...i]:i}},{}),UEe=(e,t={})=>{var n;const{headers:r,query:i={}}=typeof e.clone=="function"?e.clone():NEe(e);for(const a of Object.keys(r)){const o=a.toLowerCase();o.slice(0,6)==="x-amz-"&&!((n=t.unhoistableHeaders)!=null&&n.has(o))&&(i[a]=r[a],delete r[a])}return{...e,headers:r,query:i}},c8=e=>{e=typeof e.clone=="function"?e.clone():NEe(e);for(const t of Object.keys(e.headers))xTt.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},LTt=e=>FTt(e).toISOString().replace(/\.\d{3}Z$/,"Z"),FTt=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class NTt{constructor({applyChecksum:t,credentials:r,region:i,service:n,sha256:a,uriEscapePath:o=!0}){this.headerMarshaller=new oTt(gTt,OEe),this.service=n,this.sha256=a,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Rle(i),this.credentialProvider=Rle(r)}async presign(t,r={}){const{signingDate:i=new Date,expiresIn:n=3600,unsignableHeaders:a,unhoistableHeaders:o,signableHeaders:s,signingRegion:l,signingService:u}=r,c=await this.credentialProvider();this.validateResolvedCredentials(c);const d=l??await this.regionProvider(),{longDate:h,shortDate:f}=OO(i);if(n>RTt)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const g=SR(f,d,u??this.service),p=UEe(c8(t),{unhoistableHeaders:o});c.sessionToken&&(p.query[IEe]=c.sessionToken),p.query[vTt]=Q4,p.query[yTt]=`${c.accessKeyId}/${g}`,p.query[REe]=h,p.query[_Tt]=n.toString(10);const m=u8(p,a,s);return p.query[bTt]=Ile(m),p.query[DEe]=await this.getSignature(h,g,this.getSigningKey(c,d,f,u),this.createCanonicalRequest(p,m,await CR(t,this.sha256))),p}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:i=new Date,priorSignature:n,signingRegion:a,signingService:o}){const s=a??await this.regionProvider(),{shortDate:l,longDate:u}=OO(i),c=SR(l,s,o??this.service),d=await CR({headers:{},body:r},this.sha256),h=new this.sha256;h.update(t);const f=n_(await h.digest()),g=[TTt,u,c,n,f,d].join(`
`);return this.signString(g,{signingDate:i,signingRegion:s,signingService:o})}async signMessage(t,{signingDate:r=new Date,signingRegion:i,signingService:n}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:i,signingService:n,priorSignature:t.priorSignature}).then(o=>({message:t.message,signature:o}))}async signString(t,{signingDate:r=new Date,signingRegion:i,signingService:n}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const o=i??await this.regionProvider(),{shortDate:s}=OO(r),l=new this.sha256(await this.getSigningKey(a,o,s,n));return l.update(WE(t)),n_(await l.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:i,unsignableHeaders:n,signingRegion:a,signingService:o}={}){const s=await this.credentialProvider();this.validateResolvedCredentials(s);const l=a??await this.regionProvider(),u=c8(t),{longDate:c,shortDate:d}=OO(r),h=SR(d,l,o??this.service);u.headers[zEe]=c,s.sessionToken&&(u.headers[CTt]=s.sessionToken);const f=await CR(u,this.sha256);!zTt(l8,u.headers)&&this.applyChecksum&&(u.headers[l8]=f);const g=u8(u,n,i),p=await this.getSignature(c,h,this.getSigningKey(s,l,d,o),this.createCanonicalRequest(u,g,f));return u.headers[jEe]=`${Q4} Credential=${s.accessKeyId}/${h}, SignedHeaders=${Ile(g)}, Signature=${p}`,u}createCanonicalRequest(t,r,i){const n=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${FEe(t)}
${n.map(a=>`${a}:${r[a]}`).join(`
`)}

${n.join(";")}
${i}`}async createStringToSign(t,r,i){const n=new this.sha256;n.update(WE(i));const a=await n.digest();return`${Q4}
${t}
${r}
${n_(a)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const r=[];for(const a of t.split("/"))(a==null?void 0:a.length)!==0&&a!=="."&&(a===".."?r.pop():r.push(a));const i=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(i).replace(/%2F/g,"/")}return t}async getSignature(t,r,i,n){const a=await this.createStringToSign(t,r,n),o=new this.sha256(await i);return o.update(WE(a)),n_(await o.digest())}getSigningKey(t,r,i,n){return LEe(this.sha256,t,i,r,n||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const OO=e=>{const t=LTt(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},Ile=e=>Object.keys(e).sort().join(";"),UTt=Object.freeze(Object.defineProperty({__proto__:null,SignatureV4:NTt,clearCredentialCache:DTt,createScope:SR,getCanonicalHeaders:u8,getCanonicalQuery:FEe,getPayloadHash:CR,getSigningKey:LEe,moveHeadersToQuery:UEe,prepareRequest:c8},Symbol.toStringTag,{value:"Module"})),VTt=vb(UTt);var J4={exports:{}},Z4={exports:{}},eU={},iC={},jle;function kTt(){if(jle)return iC;jle=1,iC.byteLength=s,iC.toByteArray=u,iC.fromByteArray=h;for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,a=i.length;n<a;++n)e[n]=i[n],t[i.charCodeAt(n)]=n;t[45]=62,t[95]=63;function o(f){var g=f.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=f.indexOf("=");p===-1&&(p=g);var m=p===g?0:4-p%4;return[p,m]}function s(f){var g=o(f),p=g[0],m=g[1];return(p+m)*3/4-m}function l(f,g,p){return(g+p)*3/4-p}function u(f){var g,p=o(f),m=p[0],y=p[1],b=new r(l(f,m,y)),w=0,x=y>0?m-4:m,S;for(S=0;S<x;S+=4)g=t[f.charCodeAt(S)]<<18|t[f.charCodeAt(S+1)]<<12|t[f.charCodeAt(S+2)]<<6|t[f.charCodeAt(S+3)],b[w++]=g>>16&255,b[w++]=g>>8&255,b[w++]=g&255;return y===2&&(g=t[f.charCodeAt(S)]<<2|t[f.charCodeAt(S+1)]>>4,b[w++]=g&255),y===1&&(g=t[f.charCodeAt(S)]<<10|t[f.charCodeAt(S+1)]<<4|t[f.charCodeAt(S+2)]>>2,b[w++]=g>>8&255,b[w++]=g&255),b}function c(f){return e[f>>18&63]+e[f>>12&63]+e[f>>6&63]+e[f&63]}function d(f,g,p){for(var m,y=[],b=g;b<p;b+=3)m=(f[b]<<16&16711680)+(f[b+1]<<8&65280)+(f[b+2]&255),y.push(c(m));return y.join("")}function h(f){for(var g,p=f.length,m=p%3,y=[],b=16383,w=0,x=p-m;w<x;w+=b)y.push(d(f,w,w+b>x?x:w+b));return m===1?(g=f[p-1],y.push(e[g>>2]+e[g<<4&63]+"==")):m===2&&(g=(f[p-2]<<8)+f[p-1],y.push(e[g>>10]+e[g>>4&63]+e[g<<2&63]+"=")),y.join("")}return iC}var RO={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var zle;function qTt(){return zle||(zle=1,RO.read=function(e,t,r,i,n){var a,o,s=n*8-i-1,l=(1<<s)-1,u=l>>1,c=-7,d=r?n-1:0,h=r?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=a*256+e[t+d],d+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=o*256+e[t+d],d+=h,c-=8);if(a===0)a=1-u;else{if(a===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,i),a=a-u}return(f?-1:1)*o*Math.pow(2,a-i)},RO.write=function(e,t,r,i,n,a){var o,s,l,u=a*8-n-1,c=(1<<u)-1,d=c>>1,h=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,g=i?1:-1,p=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,n),o=o+d):(s=t*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;e[r+f]=s&255,f+=g,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[r+f]=o&255,f+=g,o/=256,u-=8);e[r+f-g]|=p*128}),RO}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ble;function jv(){return Ble||(Ble=1,function(e){const t=kTt(),r=qTt(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;const n=2147483647;e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const K=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(K,B),K.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(K){if(K>n)throw new RangeError('The value "'+K+'" is invalid for option "size"');const B=new Uint8Array(K);return Object.setPrototypeOf(B,s.prototype),B}function s(K,B,U){if(typeof K=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(K)}return l(K,B,U)}s.poolSize=8192;function l(K,B,U){if(typeof K=="string")return h(K,B);if(ArrayBuffer.isView(K))return g(K);if(K==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K);if(Z(K,ArrayBuffer)||K&&Z(K.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Z(K,SharedArrayBuffer)||K&&Z(K.buffer,SharedArrayBuffer)))return p(K,B,U);if(typeof K=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const te=K.valueOf&&K.valueOf();if(te!=null&&te!==K)return s.from(te,B,U);const ve=m(K);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof K[Symbol.toPrimitive]=="function")return s.from(K[Symbol.toPrimitive]("string"),B,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K)}s.from=function(K,B,U){return l(K,B,U)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(K){if(typeof K!="number")throw new TypeError('"size" argument must be of type number');if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function c(K,B,U){return u(K),K<=0?o(K):B!==void 0?typeof U=="string"?o(K).fill(B,U):o(K).fill(B):o(K)}s.alloc=function(K,B,U){return c(K,B,U)};function d(K){return u(K),o(K<0?0:y(K)|0)}s.allocUnsafe=function(K){return d(K)},s.allocUnsafeSlow=function(K){return d(K)};function h(K,B){if((typeof B!="string"||B==="")&&(B="utf8"),!s.isEncoding(B))throw new TypeError("Unknown encoding: "+B);const U=w(K,B)|0;let te=o(U);const ve=te.write(K,B);return ve!==U&&(te=te.slice(0,ve)),te}function f(K){const B=K.length<0?0:y(K.length)|0,U=o(B);for(let te=0;te<B;te+=1)U[te]=K[te]&255;return U}function g(K){if(Z(K,Uint8Array)){const B=new Uint8Array(K);return p(B.buffer,B.byteOffset,B.byteLength)}return f(K)}function p(K,B,U){if(B<0||K.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<B+(U||0))throw new RangeError('"length" is outside of buffer bounds');let te;return B===void 0&&U===void 0?te=new Uint8Array(K):U===void 0?te=new Uint8Array(K,B):te=new Uint8Array(K,B,U),Object.setPrototypeOf(te,s.prototype),te}function m(K){if(s.isBuffer(K)){const B=y(K.length)|0,U=o(B);return U.length===0||K.copy(U,0,0,B),U}if(K.length!==void 0)return typeof K.length!="number"||ie(K.length)?o(0):f(K);if(K.type==="Buffer"&&Array.isArray(K.data))return f(K.data)}function y(K){if(K>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return K|0}function b(K){return+K!=K&&(K=0),s.alloc(+K)}s.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==s.prototype},s.compare=function(B,U){if(Z(B,Uint8Array)&&(B=s.from(B,B.offset,B.byteLength)),Z(U,Uint8Array)&&(U=s.from(U,U.offset,U.byteLength)),!s.isBuffer(B)||!s.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===U)return 0;let te=B.length,ve=U.length;for(let Re=0,Fe=Math.min(te,ve);Re<Fe;++Re)if(B[Re]!==U[Re]){te=B[Re],ve=U[Re];break}return te<ve?-1:ve<te?1:0},s.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(B,U){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return s.alloc(0);let te;if(U===void 0)for(U=0,te=0;te<B.length;++te)U+=B[te].length;const ve=s.allocUnsafe(U);let Re=0;for(te=0;te<B.length;++te){let Fe=B[te];if(Z(Fe,Uint8Array))Re+Fe.length>ve.length?(s.isBuffer(Fe)||(Fe=s.from(Fe)),Fe.copy(ve,Re)):Uint8Array.prototype.set.call(ve,Fe,Re);else if(s.isBuffer(Fe))Fe.copy(ve,Re);else throw new TypeError('"list" argument must be an Array of Buffers');Re+=Fe.length}return ve};function w(K,B){if(s.isBuffer(K))return K.length;if(ArrayBuffer.isView(K)||Z(K,ArrayBuffer))return K.byteLength;if(typeof K!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof K);const U=K.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&U===0)return 0;let ve=!1;for(;;)switch(B){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return Ee(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return Ae(K).length;default:if(ve)return te?-1:Ee(K).length;B=(""+B).toLowerCase(),ve=!0}}s.byteLength=w;function x(K,B,U){let te=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,B>>>=0,U<=B))return"";for(K||(K="utf8");;)switch(K){case"hex":return Q(this,B,U);case"utf8":case"utf-8":return I(this,B,U);case"ascii":return X(this,B,U);case"latin1":case"binary":return N(this,B,U);case"base64":return D(this,B,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,B,U);default:if(te)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),te=!0}}s.prototype._isBuffer=!0;function S(K,B,U){const te=K[B];K[B]=K[U],K[U]=te}s.prototype.swap16=function(){const B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let U=0;U<B;U+=2)S(this,U,U+1);return this},s.prototype.swap32=function(){const B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let U=0;U<B;U+=4)S(this,U,U+3),S(this,U+1,U+2);return this},s.prototype.swap64=function(){const B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let U=0;U<B;U+=8)S(this,U,U+7),S(this,U+1,U+6),S(this,U+2,U+5),S(this,U+3,U+4);return this},s.prototype.toString=function(){const B=this.length;return B===0?"":arguments.length===0?I(this,0,B):x.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(B){if(!s.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:s.compare(this,B)===0},s.prototype.inspect=function(){let B="";const U=e.INSPECT_MAX_BYTES;return B=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(B+=" ... "),"<Buffer "+B+">"},i&&(s.prototype[i]=s.prototype.inspect),s.prototype.compare=function(B,U,te,ve,Re){if(Z(B,Uint8Array)&&(B=s.from(B,B.offset,B.byteLength)),!s.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(U===void 0&&(U=0),te===void 0&&(te=B?B.length:0),ve===void 0&&(ve=0),Re===void 0&&(Re=this.length),U<0||te>B.length||ve<0||Re>this.length)throw new RangeError("out of range index");if(ve>=Re&&U>=te)return 0;if(ve>=Re)return-1;if(U>=te)return 1;if(U>>>=0,te>>>=0,ve>>>=0,Re>>>=0,this===B)return 0;let Fe=Re-ve,et=te-U;const Ze=Math.min(Fe,et),Pe=this.slice(ve,Re),Le=B.slice(U,te);for(let ht=0;ht<Ze;++ht)if(Pe[ht]!==Le[ht]){Fe=Pe[ht],et=Le[ht];break}return Fe<et?-1:et<Fe?1:0};function C(K,B,U,te,ve){if(K.length===0)return-1;if(typeof U=="string"?(te=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,ie(U)&&(U=ve?0:K.length-1),U<0&&(U=K.length+U),U>=K.length){if(ve)return-1;U=K.length-1}else if(U<0)if(ve)U=0;else return-1;if(typeof B=="string"&&(B=s.from(B,te)),s.isBuffer(B))return B.length===0?-1:T(K,B,U,te,ve);if(typeof B=="number")return B=B&255,typeof Uint8Array.prototype.indexOf=="function"?ve?Uint8Array.prototype.indexOf.call(K,B,U):Uint8Array.prototype.lastIndexOf.call(K,B,U):T(K,[B],U,te,ve);throw new TypeError("val must be string, number or Buffer")}function T(K,B,U,te,ve){let Re=1,Fe=K.length,et=B.length;if(te!==void 0&&(te=String(te).toLowerCase(),te==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(K.length<2||B.length<2)return-1;Re=2,Fe/=2,et/=2,U/=2}function Ze(Le,ht){return Re===1?Le[ht]:Le.readUInt16BE(ht*Re)}let Pe;if(ve){let Le=-1;for(Pe=U;Pe<Fe;Pe++)if(Ze(K,Pe)===Ze(B,Le===-1?0:Pe-Le)){if(Le===-1&&(Le=Pe),Pe-Le+1===et)return Le*Re}else Le!==-1&&(Pe-=Pe-Le),Le=-1}else for(U+et>Fe&&(U=Fe-et),Pe=U;Pe>=0;Pe--){let Le=!0;for(let ht=0;ht<et;ht++)if(Ze(K,Pe+ht)!==Ze(B,ht)){Le=!1;break}if(Le)return Pe}return-1}s.prototype.includes=function(B,U,te){return this.indexOf(B,U,te)!==-1},s.prototype.indexOf=function(B,U,te){return C(this,B,U,te,!0)},s.prototype.lastIndexOf=function(B,U,te){return C(this,B,U,te,!1)};function M(K,B,U,te){U=Number(U)||0;const ve=K.length-U;te?(te=Number(te),te>ve&&(te=ve)):te=ve;const Re=B.length;te>Re/2&&(te=Re/2);let Fe;for(Fe=0;Fe<te;++Fe){const et=parseInt(B.substr(Fe*2,2),16);if(ie(et))return Fe;K[U+Fe]=et}return Fe}function A(K,B,U,te){return De(Ee(B,K.length-U),K,U,te)}function P(K,B,U,te){return De(Me(B),K,U,te)}function O(K,B,U,te){return De(Ae(B),K,U,te)}function j(K,B,U,te){return De(he(B,K.length-U),K,U,te)}s.prototype.write=function(B,U,te,ve){if(U===void 0)ve="utf8",te=this.length,U=0;else if(te===void 0&&typeof U=="string")ve=U,te=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(te)?(te=te>>>0,ve===void 0&&(ve="utf8")):(ve=te,te=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Re=this.length-U;if((te===void 0||te>Re)&&(te=Re),B.length>0&&(te<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");ve||(ve="utf8");let Fe=!1;for(;;)switch(ve){case"hex":return M(this,B,U,te);case"utf8":case"utf-8":return A(this,B,U,te);case"ascii":case"latin1":case"binary":return P(this,B,U,te);case"base64":return O(this,B,U,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,B,U,te);default:if(Fe)throw new TypeError("Unknown encoding: "+ve);ve=(""+ve).toLowerCase(),Fe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(K,B,U){return B===0&&U===K.length?t.fromByteArray(K):t.fromByteArray(K.slice(B,U))}function I(K,B,U){U=Math.min(K.length,U);const te=[];let ve=B;for(;ve<U;){const Re=K[ve];let Fe=null,et=Re>239?4:Re>223?3:Re>191?2:1;if(ve+et<=U){let Ze,Pe,Le,ht;switch(et){case 1:Re<128&&(Fe=Re);break;case 2:Ze=K[ve+1],(Ze&192)===128&&(ht=(Re&31)<<6|Ze&63,ht>127&&(Fe=ht));break;case 3:Ze=K[ve+1],Pe=K[ve+2],(Ze&192)===128&&(Pe&192)===128&&(ht=(Re&15)<<12|(Ze&63)<<6|Pe&63,ht>2047&&(ht<55296||ht>57343)&&(Fe=ht));break;case 4:Ze=K[ve+1],Pe=K[ve+2],Le=K[ve+3],(Ze&192)===128&&(Pe&192)===128&&(Le&192)===128&&(ht=(Re&15)<<18|(Ze&63)<<12|(Pe&63)<<6|Le&63,ht>65535&&ht<1114112&&(Fe=ht))}}Fe===null?(Fe=65533,et=1):Fe>65535&&(Fe-=65536,te.push(Fe>>>10&1023|55296),Fe=56320|Fe&1023),te.push(Fe),ve+=et}return $(te)}const q=4096;function $(K){const B=K.length;if(B<=q)return String.fromCharCode.apply(String,K);let U="",te=0;for(;te<B;)U+=String.fromCharCode.apply(String,K.slice(te,te+=q));return U}function X(K,B,U){let te="";U=Math.min(K.length,U);for(let ve=B;ve<U;++ve)te+=String.fromCharCode(K[ve]&127);return te}function N(K,B,U){let te="";U=Math.min(K.length,U);for(let ve=B;ve<U;++ve)te+=String.fromCharCode(K[ve]);return te}function Q(K,B,U){const te=K.length;(!B||B<0)&&(B=0),(!U||U<0||U>te)&&(U=te);let ve="";for(let Re=B;Re<U;++Re)ve+=Te[K[Re]];return ve}function F(K,B,U){const te=K.slice(B,U);let ve="";for(let Re=0;Re<te.length-1;Re+=2)ve+=String.fromCharCode(te[Re]+te[Re+1]*256);return ve}s.prototype.slice=function(B,U){const te=this.length;B=~~B,U=U===void 0?te:~~U,B<0?(B+=te,B<0&&(B=0)):B>te&&(B=te),U<0?(U+=te,U<0&&(U=0)):U>te&&(U=te),U<B&&(U=B);const ve=this.subarray(B,U);return Object.setPrototypeOf(ve,s.prototype),ve};function L(K,B,U){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+B>U)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(B,U,te){B=B>>>0,U=U>>>0,te||L(B,U,this.length);let ve=this[B],Re=1,Fe=0;for(;++Fe<U&&(Re*=256);)ve+=this[B+Fe]*Re;return ve},s.prototype.readUintBE=s.prototype.readUIntBE=function(B,U,te){B=B>>>0,U=U>>>0,te||L(B,U,this.length);let ve=this[B+--U],Re=1;for(;U>0&&(Re*=256);)ve+=this[B+--U]*Re;return ve},s.prototype.readUint8=s.prototype.readUInt8=function(B,U){return B=B>>>0,U||L(B,1,this.length),this[B]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(B,U){return B=B>>>0,U||L(B,2,this.length),this[B]|this[B+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(B,U){return B=B>>>0,U||L(B,2,this.length),this[B]<<8|this[B+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(B,U){return B=B>>>0,U||L(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(B,U){return B=B>>>0,U||L(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},s.prototype.readBigUInt64LE=Ue(function(B){B=B>>>0,de(B,"offset");const U=this[B],te=this[B+7];(U===void 0||te===void 0)&&ge(B,this.length-8);const ve=U+this[++B]*2**8+this[++B]*2**16+this[++B]*2**24,Re=this[++B]+this[++B]*2**8+this[++B]*2**16+te*2**24;return BigInt(ve)+(BigInt(Re)<<BigInt(32))}),s.prototype.readBigUInt64BE=Ue(function(B){B=B>>>0,de(B,"offset");const U=this[B],te=this[B+7];(U===void 0||te===void 0)&&ge(B,this.length-8);const ve=U*2**24+this[++B]*2**16+this[++B]*2**8+this[++B],Re=this[++B]*2**24+this[++B]*2**16+this[++B]*2**8+te;return(BigInt(ve)<<BigInt(32))+BigInt(Re)}),s.prototype.readIntLE=function(B,U,te){B=B>>>0,U=U>>>0,te||L(B,U,this.length);let ve=this[B],Re=1,Fe=0;for(;++Fe<U&&(Re*=256);)ve+=this[B+Fe]*Re;return Re*=128,ve>=Re&&(ve-=Math.pow(2,8*U)),ve},s.prototype.readIntBE=function(B,U,te){B=B>>>0,U=U>>>0,te||L(B,U,this.length);let ve=U,Re=1,Fe=this[B+--ve];for(;ve>0&&(Re*=256);)Fe+=this[B+--ve]*Re;return Re*=128,Fe>=Re&&(Fe-=Math.pow(2,8*U)),Fe},s.prototype.readInt8=function(B,U){return B=B>>>0,U||L(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},s.prototype.readInt16LE=function(B,U){B=B>>>0,U||L(B,2,this.length);const te=this[B]|this[B+1]<<8;return te&32768?te|4294901760:te},s.prototype.readInt16BE=function(B,U){B=B>>>0,U||L(B,2,this.length);const te=this[B+1]|this[B]<<8;return te&32768?te|4294901760:te},s.prototype.readInt32LE=function(B,U){return B=B>>>0,U||L(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},s.prototype.readInt32BE=function(B,U){return B=B>>>0,U||L(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},s.prototype.readBigInt64LE=Ue(function(B){B=B>>>0,de(B,"offset");const U=this[B],te=this[B+7];(U===void 0||te===void 0)&&ge(B,this.length-8);const ve=this[B+4]+this[B+5]*2**8+this[B+6]*2**16+(te<<24);return(BigInt(ve)<<BigInt(32))+BigInt(U+this[++B]*2**8+this[++B]*2**16+this[++B]*2**24)}),s.prototype.readBigInt64BE=Ue(function(B){B=B>>>0,de(B,"offset");const U=this[B],te=this[B+7];(U===void 0||te===void 0)&&ge(B,this.length-8);const ve=(U<<24)+this[++B]*2**16+this[++B]*2**8+this[++B];return(BigInt(ve)<<BigInt(32))+BigInt(this[++B]*2**24+this[++B]*2**16+this[++B]*2**8+te)}),s.prototype.readFloatLE=function(B,U){return B=B>>>0,U||L(B,4,this.length),r.read(this,B,!0,23,4)},s.prototype.readFloatBE=function(B,U){return B=B>>>0,U||L(B,4,this.length),r.read(this,B,!1,23,4)},s.prototype.readDoubleLE=function(B,U){return B=B>>>0,U||L(B,8,this.length),r.read(this,B,!0,52,8)},s.prototype.readDoubleBE=function(B,U){return B=B>>>0,U||L(B,8,this.length),r.read(this,B,!1,52,8)};function Y(K,B,U,te,ve,Re){if(!s.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>ve||B<Re)throw new RangeError('"value" argument is out of bounds');if(U+te>K.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(B,U,te,ve){if(B=+B,U=U>>>0,te=te>>>0,!ve){const et=Math.pow(2,8*te)-1;Y(this,B,U,te,et,0)}let Re=1,Fe=0;for(this[U]=B&255;++Fe<te&&(Re*=256);)this[U+Fe]=B/Re&255;return U+te},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(B,U,te,ve){if(B=+B,U=U>>>0,te=te>>>0,!ve){const et=Math.pow(2,8*te)-1;Y(this,B,U,te,et,0)}let Re=te-1,Fe=1;for(this[U+Re]=B&255;--Re>=0&&(Fe*=256);)this[U+Re]=B/Fe&255;return U+te},s.prototype.writeUint8=s.prototype.writeUInt8=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,1,255,0),this[U]=B&255,U+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,2,65535,0),this[U]=B&255,this[U+1]=B>>>8,U+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,2,65535,0),this[U]=B>>>8,this[U+1]=B&255,U+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,4,4294967295,0),this[U+3]=B>>>24,this[U+2]=B>>>16,this[U+1]=B>>>8,this[U]=B&255,U+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,4,4294967295,0),this[U]=B>>>24,this[U+1]=B>>>16,this[U+2]=B>>>8,this[U+3]=B&255,U+4};function ae(K,B,U,te,ve){be(B,te,ve,K,U,7);let Re=Number(B&BigInt(4294967295));K[U++]=Re,Re=Re>>8,K[U++]=Re,Re=Re>>8,K[U++]=Re,Re=Re>>8,K[U++]=Re;let Fe=Number(B>>BigInt(32)&BigInt(4294967295));return K[U++]=Fe,Fe=Fe>>8,K[U++]=Fe,Fe=Fe>>8,K[U++]=Fe,Fe=Fe>>8,K[U++]=Fe,U}function re(K,B,U,te,ve){be(B,te,ve,K,U,7);let Re=Number(B&BigInt(4294967295));K[U+7]=Re,Re=Re>>8,K[U+6]=Re,Re=Re>>8,K[U+5]=Re,Re=Re>>8,K[U+4]=Re;let Fe=Number(B>>BigInt(32)&BigInt(4294967295));return K[U+3]=Fe,Fe=Fe>>8,K[U+2]=Fe,Fe=Fe>>8,K[U+1]=Fe,Fe=Fe>>8,K[U]=Fe,U+8}s.prototype.writeBigUInt64LE=Ue(function(B,U=0){return ae(this,B,U,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Ue(function(B,U=0){return re(this,B,U,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(B,U,te,ve){if(B=+B,U=U>>>0,!ve){const Ze=Math.pow(2,8*te-1);Y(this,B,U,te,Ze-1,-Ze)}let Re=0,Fe=1,et=0;for(this[U]=B&255;++Re<te&&(Fe*=256);)B<0&&et===0&&this[U+Re-1]!==0&&(et=1),this[U+Re]=(B/Fe>>0)-et&255;return U+te},s.prototype.writeIntBE=function(B,U,te,ve){if(B=+B,U=U>>>0,!ve){const Ze=Math.pow(2,8*te-1);Y(this,B,U,te,Ze-1,-Ze)}let Re=te-1,Fe=1,et=0;for(this[U+Re]=B&255;--Re>=0&&(Fe*=256);)B<0&&et===0&&this[U+Re+1]!==0&&(et=1),this[U+Re]=(B/Fe>>0)-et&255;return U+te},s.prototype.writeInt8=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,1,127,-128),B<0&&(B=255+B+1),this[U]=B&255,U+1},s.prototype.writeInt16LE=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,2,32767,-32768),this[U]=B&255,this[U+1]=B>>>8,U+2},s.prototype.writeInt16BE=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,2,32767,-32768),this[U]=B>>>8,this[U+1]=B&255,U+2},s.prototype.writeInt32LE=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,4,2147483647,-2147483648),this[U]=B&255,this[U+1]=B>>>8,this[U+2]=B>>>16,this[U+3]=B>>>24,U+4},s.prototype.writeInt32BE=function(B,U,te){return B=+B,U=U>>>0,te||Y(this,B,U,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[U]=B>>>24,this[U+1]=B>>>16,this[U+2]=B>>>8,this[U+3]=B&255,U+4},s.prototype.writeBigInt64LE=Ue(function(B,U=0){return ae(this,B,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Ue(function(B,U=0){return re(this,B,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function H(K,B,U,te,ve,Re){if(U+te>K.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function se(K,B,U,te,ve){return B=+B,U=U>>>0,ve||H(K,B,U,4),r.write(K,B,U,te,23,4),U+4}s.prototype.writeFloatLE=function(B,U,te){return se(this,B,U,!0,te)},s.prototype.writeFloatBE=function(B,U,te){return se(this,B,U,!1,te)};function le(K,B,U,te,ve){return B=+B,U=U>>>0,ve||H(K,B,U,8),r.write(K,B,U,te,52,8),U+8}s.prototype.writeDoubleLE=function(B,U,te){return le(this,B,U,!0,te)},s.prototype.writeDoubleBE=function(B,U,te){return le(this,B,U,!1,te)},s.prototype.copy=function(B,U,te,ve){if(!s.isBuffer(B))throw new TypeError("argument should be a Buffer");if(te||(te=0),!ve&&ve!==0&&(ve=this.length),U>=B.length&&(U=B.length),U||(U=0),ve>0&&ve<te&&(ve=te),ve===te||B.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(te<0||te>=this.length)throw new RangeError("Index out of range");if(ve<0)throw new RangeError("sourceEnd out of bounds");ve>this.length&&(ve=this.length),B.length-U<ve-te&&(ve=B.length-U+te);const Re=ve-te;return this===B&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(U,te,ve):Uint8Array.prototype.set.call(B,this.subarray(te,ve),U),Re},s.prototype.fill=function(B,U,te,ve){if(typeof B=="string"){if(typeof U=="string"?(ve=U,U=0,te=this.length):typeof te=="string"&&(ve=te,te=this.length),ve!==void 0&&typeof ve!="string")throw new TypeError("encoding must be a string");if(typeof ve=="string"&&!s.isEncoding(ve))throw new TypeError("Unknown encoding: "+ve);if(B.length===1){const Fe=B.charCodeAt(0);(ve==="utf8"&&Fe<128||ve==="latin1")&&(B=Fe)}}else typeof B=="number"?B=B&255:typeof B=="boolean"&&(B=Number(B));if(U<0||this.length<U||this.length<te)throw new RangeError("Out of range index");if(te<=U)return this;U=U>>>0,te=te===void 0?this.length:te>>>0,B||(B=0);let Re;if(typeof B=="number")for(Re=U;Re<te;++Re)this[Re]=B;else{const Fe=s.isBuffer(B)?B:s.from(B,ve),et=Fe.length;if(et===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(Re=0;Re<te-U;++Re)this[Re+U]=Fe[Re%et]}return this};const ee={};function J(K,B,U){ee[K]=class extends U{constructor(){super(),Object.defineProperty(this,"message",{value:B.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${K}]`,this.stack,delete this.name}get code(){return K}set code(ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ve,writable:!0})}toString(){return`${this.name} [${K}]: ${this.message}`}}}J("ERR_BUFFER_OUT_OF_BOUNDS",function(K){return K?`${K} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(K,B){return`The "${K}" argument must be of type number. Received type ${typeof B}`},TypeError),J("ERR_OUT_OF_RANGE",function(K,B,U){let te=`The value of "${K}" is out of range.`,ve=U;return Number.isInteger(U)&&Math.abs(U)>2**32?ve=oe(String(U)):typeof U=="bigint"&&(ve=String(U),(U>BigInt(2)**BigInt(32)||U<-(BigInt(2)**BigInt(32)))&&(ve=oe(ve)),ve+="n"),te+=` It must be ${B}. Received ${ve}`,te},RangeError);function oe(K){let B="",U=K.length;const te=K[0]==="-"?1:0;for(;U>=te+4;U-=3)B=`_${K.slice(U-3,U)}${B}`;return`${K.slice(0,U)}${B}`}function me(K,B,U){de(B,"offset"),(K[B]===void 0||K[B+U]===void 0)&&ge(B,K.length-(U+1))}function be(K,B,U,te,ve,Re){if(K>U||K<B){const Fe=typeof B=="bigint"?"n":"";let et;throw B===0||B===BigInt(0)?et=`>= 0${Fe} and < 2${Fe} ** ${(Re+1)*8}${Fe}`:et=`>= -(2${Fe} ** ${(Re+1)*8-1}${Fe}) and < 2 ** ${(Re+1)*8-1}${Fe}`,new ee.ERR_OUT_OF_RANGE("value",et,K)}me(te,ve,Re)}function de(K,B){if(typeof K!="number")throw new ee.ERR_INVALID_ARG_TYPE(B,"number",K)}function ge(K,B,U){throw Math.floor(K)!==K?(de(K,U),new ee.ERR_OUT_OF_RANGE("offset","an integer",K)):B<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${B}`,K)}const ce=/[^+/0-9A-Za-z-_]/g;function Ce(K){if(K=K.split("=")[0],K=K.trim().replace(ce,""),K.length<2)return"";for(;K.length%4!==0;)K=K+"=";return K}function Ee(K,B){B=B||1/0;let U;const te=K.length;let ve=null;const Re=[];for(let Fe=0;Fe<te;++Fe){if(U=K.charCodeAt(Fe),U>55295&&U<57344){if(!ve){if(U>56319){(B-=3)>-1&&Re.push(239,191,189);continue}else if(Fe+1===te){(B-=3)>-1&&Re.push(239,191,189);continue}ve=U;continue}if(U<56320){(B-=3)>-1&&Re.push(239,191,189),ve=U;continue}U=(ve-55296<<10|U-56320)+65536}else ve&&(B-=3)>-1&&Re.push(239,191,189);if(ve=null,U<128){if((B-=1)<0)break;Re.push(U)}else if(U<2048){if((B-=2)<0)break;Re.push(U>>6|192,U&63|128)}else if(U<65536){if((B-=3)<0)break;Re.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((B-=4)<0)break;Re.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return Re}function Me(K){const B=[];for(let U=0;U<K.length;++U)B.push(K.charCodeAt(U)&255);return B}function he(K,B){let U,te,ve;const Re=[];for(let Fe=0;Fe<K.length&&!((B-=2)<0);++Fe)U=K.charCodeAt(Fe),te=U>>8,ve=U%256,Re.push(ve),Re.push(te);return Re}function Ae(K){return t.toByteArray(Ce(K))}function De(K,B,U,te){let ve;for(ve=0;ve<te&&!(ve+U>=B.length||ve>=K.length);++ve)B[ve+U]=K[ve];return ve}function Z(K,B){return K instanceof B||K!=null&&K.constructor!=null&&K.constructor.name!=null&&K.constructor.name===B.name}function ie(K){return K!==K}const Te=function(){const K="0123456789abcdef",B=new Array(256);for(let U=0;U<16;++U){const te=U*16;for(let ve=0;ve<16;++ve)B[te+ve]=K[U]+K[ve]}return B}();function Ue(K){return typeof BigInt>"u"?ne:K}function ne(){throw new Error("BigInt not supported")}}(eU)),eU}var tU,Lle;function ki(){if(Lle)return tU;Lle=1;class e extends Error{constructor(r){if(!Array.isArray(r))throw new TypeError(`Expected input to be an Array, got ${typeof r}`);let i="";for(let n=0;n<r.length;n++)i+=`    ${r[n].stack}
`;super(i),this.name="AggregateError",this.errors=r}}return tU={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,r){return t.includes(r)},ArrayPrototypeIndexOf(t,r){return t.indexOf(r)},ArrayPrototypeJoin(t,r){return t.join(r)},ArrayPrototypeMap(t,r){return t.map(r)},ArrayPrototypePop(t,r){return t.pop(r)},ArrayPrototypePush(t,r){return t.push(r)},ArrayPrototypeSlice(t,r,i){return t.slice(r,i)},Error,FunctionPrototypeCall(t,r,...i){return t.call(r,...i)},FunctionPrototypeSymbolHasInstance(t,r){return Function.prototype[Symbol.hasInstance].call(t,r)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,r){return Object.defineProperties(t,r)},ObjectDefineProperty(t,r,i){return Object.defineProperty(t,r,i)},ObjectGetOwnPropertyDescriptor(t,r){return Object.getOwnPropertyDescriptor(t,r)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,r){return Object.setPrototypeOf(t,r)},Promise,PromisePrototypeCatch(t,r){return t.catch(r)},PromisePrototypeThen(t,r,i){return t.then(r,i)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,r){return t.test(r)},SafeSet:Set,String,StringPrototypeSlice(t,r,i){return t.slice(r,i)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,r,i){return t.set(r,i)},Boolean,Uint8Array},tU}var rU={exports:{}},iU,Fle;function VEe(){return Fle||(Fle=1,iU={format(e,...t){return e.replace(/%([sdifj])/g,function(...[r,i]){const n=t.shift();return i==="f"?n.toFixed(6):i==="j"?JSON.stringify(n):i==="s"&&typeof n=="object"?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),iU}var nU,Nle;function po(){if(Nle)return nU;Nle=1;const{format:e,inspect:t}=VEe(),{AggregateError:r}=ki(),i=globalThis.AggregateError||r,n=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",l={};function u(m,y){if(!m)throw new l.ERR_INTERNAL_ASSERTION(y)}function c(m){let y="",b=m.length;const w=m[0]==="-"?1:0;for(;b>=w+4;b-=3)y=`_${m.slice(b-3,b)}${y}`;return`${m.slice(0,b)}${y}`}function d(m,y,b){if(typeof y=="function")return u(y.length<=b.length,`Code: ${m}; The provided arguments length (${b.length}) does not match the required ones (${y.length}).`),y(...b);const w=(y.match(/%[dfijoOs]/g)||[]).length;return u(w===b.length,`Code: ${m}; The provided arguments length (${b.length}) does not match the required ones (${w}).`),b.length===0?y:e(y,...b)}function h(m,y,b){b||(b=Error);class w extends b{constructor(...S){super(d(m,y,S))}toString(){return`${this.name} [${m}]: ${this.message}`}}Object.defineProperties(w.prototype,{name:{value:b.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${m}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),w.prototype.code=m,w.prototype[n]=!0,l[m]=w}function f(m){const y=s+m.name;return Object.defineProperty(m,"name",{value:y}),m}function g(m,y){if(m&&y&&m!==y){if(Array.isArray(y.errors))return y.errors.push(m),y;const b=new i([y,m],y.message);return b.code=y.code,b}return m||y}class p extends Error{constructor(y="The operation was aborted",b=void 0){if(b!==void 0&&typeof b!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",b);super(y,b),this.code="ABORT_ERR",this.name="AbortError"}}return h("ERR_ASSERTION","%s",Error),h("ERR_INVALID_ARG_TYPE",(m,y,b)=>{u(typeof m=="string","'name' must be a string"),Array.isArray(y)||(y=[y]);let w="The ";m.endsWith(" argument")?w+=`${m} `:w+=`"${m}" ${m.includes(".")?"property":"argument"} `,w+="must be ";const x=[],S=[],C=[];for(const M of y)u(typeof M=="string","All expected entries have to be of type string"),a.includes(M)?x.push(M.toLowerCase()):o.test(M)?S.push(M):(u(M!=="object",'The value "object" should be written as "Object"'),C.push(M));if(S.length>0){const M=x.indexOf("object");M!==-1&&(x.splice(x,M,1),S.push("Object"))}if(x.length>0){switch(x.length){case 1:w+=`of type ${x[0]}`;break;case 2:w+=`one of type ${x[0]} or ${x[1]}`;break;default:{const M=x.pop();w+=`one of type ${x.join(", ")}, or ${M}`}}(S.length>0||C.length>0)&&(w+=" or ")}if(S.length>0){switch(S.length){case 1:w+=`an instance of ${S[0]}`;break;case 2:w+=`an instance of ${S[0]} or ${S[1]}`;break;default:{const M=S.pop();w+=`an instance of ${S.join(", ")}, or ${M}`}}C.length>0&&(w+=" or ")}switch(C.length){case 0:break;case 1:C[0].toLowerCase()!==C[0]&&(w+="an "),w+=`${C[0]}`;break;case 2:w+=`one of ${C[0]} or ${C[1]}`;break;default:{const M=C.pop();w+=`one of ${C.join(", ")}, or ${M}`}}if(b==null)w+=`. Received ${b}`;else if(typeof b=="function"&&b.name)w+=`. Received function ${b.name}`;else if(typeof b=="object"){var T;if((T=b.constructor)!==null&&T!==void 0&&T.name)w+=`. Received an instance of ${b.constructor.name}`;else{const M=t(b,{depth:-1});w+=`. Received ${M}`}}else{let M=t(b,{colors:!1});M.length>25&&(M=`${M.slice(0,25)}...`),w+=`. Received type ${typeof b} (${M})`}return w},TypeError),h("ERR_INVALID_ARG_VALUE",(m,y,b="is invalid")=>{let w=t(y);return w.length>128&&(w=w.slice(0,128)+"..."),`The ${m.includes(".")?"property":"argument"} '${m}' ${b}. Received ${w}`},TypeError),h("ERR_INVALID_RETURN_VALUE",(m,y,b)=>{var w;const x=b!=null&&(w=b.constructor)!==null&&w!==void 0&&w.name?`instance of ${b.constructor.name}`:`type ${typeof b}`;return`Expected ${m} to be returned from the "${y}" function but got ${x}.`},TypeError),h("ERR_MISSING_ARGS",(...m)=>{u(m.length>0,"At least one arg needs to be specified");let y;const b=m.length;switch(m=(Array.isArray(m)?m:[m]).map(w=>`"${w}"`).join(" or "),b){case 1:y+=`The ${m[0]} argument`;break;case 2:y+=`The ${m[0]} and ${m[1]} arguments`;break;default:{const w=m.pop();y+=`The ${m.join(", ")}, and ${w} arguments`}break}return`${y} must be specified`},TypeError),h("ERR_OUT_OF_RANGE",(m,y,b)=>{u(y,'Missing "range" argument');let w;if(Number.isInteger(b)&&Math.abs(b)>2**32)w=c(String(b));else if(typeof b=="bigint"){w=String(b);const x=BigInt(2)**BigInt(32);(b>x||b<-x)&&(w=c(w)),w+="n"}else w=t(b);return`The value of "${m}" is out of range. It must be ${y}. Received ${w}`},RangeError),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),h("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),h("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),h("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),h("ERR_STREAM_WRITE_AFTER_END","write after end",Error),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),nU={AbortError:p,aggregateTwoErrors:f(g),hideStackFrames:f,codes:l},nU}var nC={exports:{}},Ule;function UM(){if(Ule)return nC.exports;Ule=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return nC.exports=e,nC.exports.AbortSignal=t,nC.exports.default=e,nC.exports}var DO={exports:{}},Vle;function xI(){if(Vle)return DO.exports;Vle=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(S,C,T){return Function.prototype.apply.call(S,C,T)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:r=function(S){return Object.getOwnPropertyNames(S)};function i(x){console&&console.warn&&console.warn(x)}var n=Number.isNaN||function(S){return S!==S};function a(){a.init.call(this)}DO.exports=a,DO.exports.once=y,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(x){if(typeof x!="number"||x<0||n(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");o=x}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||n(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function l(x){return x._maxListeners===void 0?a.defaultMaxListeners:x._maxListeners}a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(S){for(var C=[],T=1;T<arguments.length;T++)C.push(arguments[T]);var M=S==="error",A=this._events;if(A!==void 0)M=M&&A.error===void 0;else if(!M)return!1;if(M){var P;if(C.length>0&&(P=C[0]),P instanceof Error)throw P;var O=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw O.context=P,O}var j=A[S];if(j===void 0)return!1;if(typeof j=="function")t(j,this,C);else for(var D=j.length,I=g(j,D),T=0;T<D;++T)t(I[T],this,C);return!0};function u(x,S,C,T){var M,A,P;if(s(C),A=x._events,A===void 0?(A=x._events=Object.create(null),x._eventsCount=0):(A.newListener!==void 0&&(x.emit("newListener",S,C.listener?C.listener:C),A=x._events),P=A[S]),P===void 0)P=A[S]=C,++x._eventsCount;else if(typeof P=="function"?P=A[S]=T?[C,P]:[P,C]:T?P.unshift(C):P.push(C),M=l(x),M>0&&P.length>M&&!P.warned){P.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=x,O.type=S,O.count=P.length,i(O)}return x}a.prototype.addListener=function(S,C){return u(this,S,C,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(S,C){return u(this,S,C,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(x,S,C){var T={fired:!1,wrapFn:void 0,target:x,type:S,listener:C},M=c.bind(T);return M.listener=C,T.wrapFn=M,M}a.prototype.once=function(S,C){return s(C),this.on(S,d(this,S,C)),this},a.prototype.prependOnceListener=function(S,C){return s(C),this.prependListener(S,d(this,S,C)),this},a.prototype.removeListener=function(S,C){var T,M,A,P,O;if(s(C),M=this._events,M===void 0)return this;if(T=M[S],T===void 0)return this;if(T===C||T.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete M[S],M.removeListener&&this.emit("removeListener",S,T.listener||C));else if(typeof T!="function"){for(A=-1,P=T.length-1;P>=0;P--)if(T[P]===C||T[P].listener===C){O=T[P].listener,A=P;break}if(A<0)return this;A===0?T.shift():p(T,A),T.length===1&&(M[S]=T[0]),M.removeListener!==void 0&&this.emit("removeListener",S,O||C)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(S){var C,T,M;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[S]),this;if(arguments.length===0){var A=Object.keys(T),P;for(M=0;M<A.length;++M)P=A[M],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=T[S],typeof C=="function")this.removeListener(S,C);else if(C!==void 0)for(M=C.length-1;M>=0;M--)this.removeListener(S,C[M]);return this};function h(x,S,C){var T=x._events;if(T===void 0)return[];var M=T[S];return M===void 0?[]:typeof M=="function"?C?[M.listener||M]:[M]:C?m(M):g(M,M.length)}a.prototype.listeners=function(S){return h(this,S,!0)},a.prototype.rawListeners=function(S){return h(this,S,!1)},a.listenerCount=function(x,S){return typeof x.listenerCount=="function"?x.listenerCount(S):f.call(x,S)},a.prototype.listenerCount=f;function f(x){var S=this._events;if(S!==void 0){var C=S[x];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function g(x,S){for(var C=new Array(S),T=0;T<S;++T)C[T]=x[T];return C}function p(x,S){for(;S+1<x.length;S++)x[S]=x[S+1];x.pop()}function m(x){for(var S=new Array(x.length),C=0;C<S.length;++C)S[C]=x[C].listener||x[C];return S}function y(x,S){return new Promise(function(C,T){function M(P){x.removeListener(S,A),T(P)}function A(){typeof x.removeListener=="function"&&x.removeListener("error",M),C([].slice.call(arguments))}w(x,S,A,{once:!0}),S!=="error"&&b(x,M,{once:!0})})}function b(x,S,C){typeof x.on=="function"&&w(x,"error",S,C)}function w(x,S,C,T){if(typeof x.on=="function")T.once?x.once(S,C):x.on(S,C);else if(typeof x.addEventListener=="function")x.addEventListener(S,function M(A){T.once&&x.removeEventListener(S,M),C(A)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return DO.exports}var kle;function jo(){return kle||(kle=1,function(e){const t=jv(),{format:r,inspect:i}=VEe(),{codes:{ERR_INVALID_ARG_TYPE:n}}=po(),{kResistStopPropagation:a,AggregateError:o,SymbolDispose:s}=ki(),l=globalThis.AbortSignal||UM().AbortSignal,u=globalThis.AbortController||UM().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||t.Blob,h=typeof d<"u"?function(m){return m instanceof d}:function(m){return!1},f=(p,m)=>{if(p!==void 0&&(p===null||typeof p!="object"||!("aborted"in p)))throw new n(m,"AbortSignal",p)},g=(p,m)=>{if(typeof p!="function")throw new n(m,"Function",p)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(p){let m=!1;return function(...y){m||(m=!0,p.apply(this,y))}},createDeferredPromise:function(){let p,m;return{promise:new Promise((b,w)=>{p=b,m=w}),resolve:p,reject:m}},promisify(p){return new Promise((m,y)=>{p((b,...w)=>b?y(b):m(...w))})},debuglog(){return function(){}},format:r,inspect:i,types:{isAsyncFunction(p){return p instanceof c},isArrayBufferView(p){return ArrayBuffer.isView(p)}},isBlob:h,deprecate(p,m){return p},addAbortListener:xI().addAbortListener||function(m,y){if(m===void 0)throw new n("signal","AbortSignal",m);f(m,"signal"),g(y,"listener");let b;return m.aborted?queueMicrotask(()=>y()):(m.addEventListener("abort",y,{__proto__:null,once:!0,[a]:!0}),b=()=>{m.removeEventListener("abort",y)}),{__proto__:null,[s](){var w;(w=b)===null||w===void 0||w()}}},AbortSignalAny:l.any||function(m){if(m.length===1)return m[0];const y=new u,b=()=>y.abort();return m.forEach(w=>{f(w,"signals"),w.addEventListener("abort",b,{once:!0})}),y.signal.addEventListener("abort",()=>{m.forEach(w=>w.removeEventListener("abort",b))},{once:!0}),y.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(rU)),rU.exports}var IO={},aU,qle;function RP(){if(qle)return aU;qle=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:r,ArrayPrototypeMap:i,NumberIsInteger:n,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:c,String:d,StringPrototypeToUpperCase:h,StringPrototypeTrim:f}=ki(),{hideStackFrames:g,codes:{ERR_SOCKET_BAD_PORT:p,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:y,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:w}}=po(),{normalizeEncoding:x}=jo(),{isAsyncFunction:S,isArrayBufferView:C}=jo().types,T={};function M(he){return he===(he|0)}function A(he){return he===he>>>0}const P=/^[0-7]+$/,O="must be a 32-bit unsigned integer or an octal string";function j(he,Ae,De){if(typeof he>"u"&&(he=De),typeof he=="string"){if(c(P,he)===null)throw new y(Ae,he,O);he=l(he,8)}return q(he,Ae),he}const D=g((he,Ae,De=s,Z=o)=>{if(typeof he!="number")throw new m(Ae,"number",he);if(!n(he))throw new b(Ae,"an integer",he);if(he<De||he>Z)throw new b(Ae,`>= ${De} && <= ${Z}`,he)}),I=g((he,Ae,De=-2147483648,Z=2147483647)=>{if(typeof he!="number")throw new m(Ae,"number",he);if(!n(he))throw new b(Ae,"an integer",he);if(he<De||he>Z)throw new b(Ae,`>= ${De} && <= ${Z}`,he)}),q=g((he,Ae,De=!1)=>{if(typeof he!="number")throw new m(Ae,"number",he);if(!n(he))throw new b(Ae,"an integer",he);const Z=De?1:0,ie=4294967295;if(he<Z||he>ie)throw new b(Ae,`>= ${Z} && <= ${ie}`,he)});function $(he,Ae){if(typeof he!="string")throw new m(Ae,"string",he)}function X(he,Ae,De=void 0,Z){if(typeof he!="number")throw new m(Ae,"number",he);if(De!=null&&he<De||Z!=null&&he>Z||(De!=null||Z!=null)&&a(he))throw new b(Ae,`${De!=null?`>= ${De}`:""}${De!=null&&Z!=null?" && ":""}${Z!=null?`<= ${Z}`:""}`,he)}const N=g((he,Ae,De)=>{if(!t(De,he)){const ie="must be one of: "+r(i(De,Te=>typeof Te=="string"?`'${Te}'`:d(Te)),", ");throw new y(Ae,he,ie)}});function Q(he,Ae){if(typeof he!="boolean")throw new m(Ae,"boolean",he)}function F(he,Ae,De){return he==null||!u(he,Ae)?De:he[Ae]}const L=g((he,Ae,De=null)=>{const Z=F(De,"allowArray",!1),ie=F(De,"allowFunction",!1);if(!F(De,"nullable",!1)&&he===null||!Z&&e(he)||typeof he!="object"&&(!ie||typeof he!="function"))throw new m(Ae,"Object",he)}),Y=g((he,Ae)=>{if(he!=null&&typeof he!="object"&&typeof he!="function")throw new m(Ae,"a dictionary",he)}),ae=g((he,Ae,De=0)=>{if(!e(he))throw new m(Ae,"Array",he);if(he.length<De){const Z=`must be longer than ${De}`;throw new y(Ae,he,Z)}});function re(he,Ae){ae(he,Ae);for(let De=0;De<he.length;De++)$(he[De],`${Ae}[${De}]`)}function H(he,Ae){ae(he,Ae);for(let De=0;De<he.length;De++)Q(he[De],`${Ae}[${De}]`)}function se(he,Ae){ae(he,Ae);for(let De=0;De<he.length;De++){const Z=he[De],ie=`${Ae}[${De}]`;if(Z==null)throw new m(ie,"AbortSignal",Z);me(Z,ie)}}function le(he,Ae="signal"){if($(he,Ae),T[he]===void 0)throw T[h(he)]!==void 0?new w(he+" (signals must use all capital letters)"):new w(he)}const ee=g((he,Ae="buffer")=>{if(!C(he))throw new m(Ae,["Buffer","TypedArray","DataView"],he)});function J(he,Ae){const De=x(Ae),Z=he.length;if(De==="hex"&&Z%2!==0)throw new y("encoding",Ae,`is invalid for data of length ${Z}`)}function oe(he,Ae="Port",De=!0){if(typeof he!="number"&&typeof he!="string"||typeof he=="string"&&f(he).length===0||+he!==+he>>>0||he>65535||he===0&&!De)throw new p(Ae,he,De);return he|0}const me=g((he,Ae)=>{if(he!==void 0&&(he===null||typeof he!="object"||!("aborted"in he)))throw new m(Ae,"AbortSignal",he)}),be=g((he,Ae)=>{if(typeof he!="function")throw new m(Ae,"Function",he)}),de=g((he,Ae)=>{if(typeof he!="function"||S(he))throw new m(Ae,"Function",he)}),ge=g((he,Ae)=>{if(he!==void 0)throw new m(Ae,"undefined",he)});function ce(he,Ae,De){if(!t(De,he))throw new m(Ae,`('${r(De,"|")}')`,he)}const Ce=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ee(he,Ae){if(typeof he>"u"||!c(Ce,he))throw new y(Ae,he,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Me(he){if(typeof he=="string")return Ee(he,"hints"),he;if(e(he)){const Ae=he.length;let De="";if(Ae===0)return De;for(let Z=0;Z<Ae;Z++){const ie=he[Z];Ee(ie,"hints"),De+=ie,Z!==Ae-1&&(De+=", ")}return De}throw new y("hints",he,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return aU={isInt32:M,isUint32:A,parseFileMode:j,validateArray:ae,validateStringArray:re,validateBooleanArray:H,validateAbortSignalArray:se,validateBoolean:Q,validateBuffer:ee,validateDictionary:Y,validateEncoding:J,validateFunction:be,validateInt32:I,validateInteger:D,validateNumber:X,validateObject:L,validateOneOf:N,validatePlainFunction:de,validatePort:oe,validateSignalName:le,validateString:$,validateUint32:q,validateUndefined:ge,validateUnion:ce,validateAbortSignal:me,validateLinkHeaderValue:Me},aU}var jO={exports:{}},oU={exports:{}},Wle;function Pb(){if(Wle)return oU.exports;Wle=1;var e=oU.exports={},t,r;function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=i}catch{t=i}try{typeof clearTimeout=="function"?r=clearTimeout:r=n}catch{r=n}})();function a(p){if(t===setTimeout)return setTimeout(p,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(p,0);try{return t(p,0)}catch{try{return t.call(null,p,0)}catch{return t.call(this,p,0)}}}function o(p){if(r===clearTimeout)return clearTimeout(p);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(p);try{return r(p)}catch{try{return r.call(null,p)}catch{return r.call(this,p)}}}var s=[],l=!1,u,c=-1;function d(){!l||!u||(l=!1,u.length?s=u.concat(s):c=-1,s.length&&h())}function h(){if(!l){var p=a(d);l=!0;for(var m=s.length;m;){for(u=s,s=[];++c<m;)u&&u[c].run();c=-1,m=s.length}u=null,l=!1,o(p)}}e.nextTick=function(p){var m=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)m[y-1]=arguments[y];s.push(new f(p,m)),s.length===1&&!l&&a(h)};function f(p,m){this.fun=p,this.array=m}f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function g(){}return e.on=g,e.addListener=g,e.once=g,e.off=g,e.removeListener=g,e.removeAllListeners=g,e.emit=g,e.prependListener=g,e.prependOnceListener=g,e.listeners=function(p){return[]},e.binding=function(p){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(p){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},oU.exports}var sU,Gle;function tg(){if(Gle)return sU;Gle=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:r}=ki(),i=r("nodejs.stream.destroyed"),n=r("nodejs.stream.errored"),a=r("nodejs.stream.readable"),o=r("nodejs.stream.writable"),s=r("nodejs.stream.disturbed"),l=r("nodejs.webstream.isClosedPromise"),u=r("nodejs.webstream.controllerErrorFunction");function c(F,L=!1){var Y;return!!(F&&typeof F.pipe=="function"&&typeof F.on=="function"&&(!L||typeof F.pause=="function"&&typeof F.resume=="function")&&(!F._writableState||((Y=F._readableState)===null||Y===void 0?void 0:Y.readable)!==!1)&&(!F._writableState||F._readableState))}function d(F){var L;return!!(F&&typeof F.write=="function"&&typeof F.on=="function"&&(!F._readableState||((L=F._writableState)===null||L===void 0?void 0:L.writable)!==!1))}function h(F){return!!(F&&typeof F.pipe=="function"&&F._readableState&&typeof F.on=="function"&&typeof F.write=="function")}function f(F){return F&&(F._readableState||F._writableState||typeof F.write=="function"&&typeof F.on=="function"||typeof F.pipe=="function"&&typeof F.on=="function")}function g(F){return!!(F&&!f(F)&&typeof F.pipeThrough=="function"&&typeof F.getReader=="function"&&typeof F.cancel=="function")}function p(F){return!!(F&&!f(F)&&typeof F.getWriter=="function"&&typeof F.abort=="function")}function m(F){return!!(F&&!f(F)&&typeof F.readable=="object"&&typeof F.writable=="object")}function y(F){return g(F)||p(F)||m(F)}function b(F,L){return F==null?!1:L===!0?typeof F[e]=="function":L===!1?typeof F[t]=="function":typeof F[e]=="function"||typeof F[t]=="function"}function w(F){if(!f(F))return null;const L=F._writableState,Y=F._readableState,ae=L||Y;return!!(F.destroyed||F[i]||ae!=null&&ae.destroyed)}function x(F){if(!d(F))return null;if(F.writableEnded===!0)return!0;const L=F._writableState;return L!=null&&L.errored?!1:typeof(L==null?void 0:L.ended)!="boolean"?null:L.ended}function S(F,L){if(!d(F))return null;if(F.writableFinished===!0)return!0;const Y=F._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.finished)!="boolean"?null:!!(Y.finished||L===!1&&Y.ended===!0&&Y.length===0)}function C(F){if(!c(F))return null;if(F.readableEnded===!0)return!0;const L=F._readableState;return!L||L.errored?!1:typeof(L==null?void 0:L.ended)!="boolean"?null:L.ended}function T(F,L){if(!c(F))return null;const Y=F._readableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.endEmitted)!="boolean"?null:!!(Y.endEmitted||L===!1&&Y.ended===!0&&Y.length===0)}function M(F){return F&&F[a]!=null?F[a]:typeof(F==null?void 0:F.readable)!="boolean"?null:w(F)?!1:c(F)&&F.readable&&!T(F)}function A(F){return F&&F[o]!=null?F[o]:typeof(F==null?void 0:F.writable)!="boolean"?null:w(F)?!1:d(F)&&F.writable&&!x(F)}function P(F,L){return f(F)?w(F)?!0:!((L==null?void 0:L.readable)!==!1&&M(F)||(L==null?void 0:L.writable)!==!1&&A(F)):null}function O(F){var L,Y;return f(F)?F.writableErrored?F.writableErrored:(L=(Y=F._writableState)===null||Y===void 0?void 0:Y.errored)!==null&&L!==void 0?L:null:null}function j(F){var L,Y;return f(F)?F.readableErrored?F.readableErrored:(L=(Y=F._readableState)===null||Y===void 0?void 0:Y.errored)!==null&&L!==void 0?L:null:null}function D(F){if(!f(F))return null;if(typeof F.closed=="boolean")return F.closed;const L=F._writableState,Y=F._readableState;return typeof(L==null?void 0:L.closed)=="boolean"||typeof(Y==null?void 0:Y.closed)=="boolean"?(L==null?void 0:L.closed)||(Y==null?void 0:Y.closed):typeof F._closed=="boolean"&&I(F)?F._closed:null}function I(F){return typeof F._closed=="boolean"&&typeof F._defaultKeepAlive=="boolean"&&typeof F._removedConnection=="boolean"&&typeof F._removedContLen=="boolean"}function q(F){return typeof F._sent100=="boolean"&&I(F)}function $(F){var L;return typeof F._consuming=="boolean"&&typeof F._dumped=="boolean"&&((L=F.req)===null||L===void 0?void 0:L.upgradeOrConnect)===void 0}function X(F){if(!f(F))return null;const L=F._writableState,Y=F._readableState,ae=L||Y;return!ae&&q(F)||!!(ae&&ae.autoDestroy&&ae.emitClose&&ae.closed===!1)}function N(F){var L;return!!(F&&((L=F[s])!==null&&L!==void 0?L:F.readableDidRead||F.readableAborted))}function Q(F){var L,Y,ae,re,H,se,le,ee,J,oe;return!!(F&&((L=(Y=(ae=(re=(H=(se=F[n])!==null&&se!==void 0?se:F.readableErrored)!==null&&H!==void 0?H:F.writableErrored)!==null&&re!==void 0?re:(le=F._readableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&ae!==void 0?ae:(ee=F._writableState)===null||ee===void 0?void 0:ee.errorEmitted)!==null&&Y!==void 0?Y:(J=F._readableState)===null||J===void 0?void 0:J.errored)!==null&&L!==void 0?L:!((oe=F._writableState)===null||oe===void 0)&&oe.errored))}return sU={isDestroyed:w,kIsDestroyed:i,isDisturbed:N,kIsDisturbed:s,isErrored:Q,kIsErrored:n,isReadable:M,kIsReadable:a,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:o,isClosed:D,isDuplexNodeStream:h,isFinished:P,isIterable:b,isReadableNodeStream:c,isReadableStream:g,isReadableEnded:C,isReadableFinished:T,isReadableErrored:j,isNodeStream:f,isWebStream:y,isWritable:A,isWritableNodeStream:d,isWritableStream:p,isWritableEnded:x,isWritableFinished:S,isWritableErrored:O,isServerRequest:$,isServerResponse:q,willEmitClose:X,isTransformStream:m},sU}var Hle;function zv(){if(Hle)return jO.exports;Hle=1;const e=Pb(),{AbortError:t,codes:r}=po(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:n}=r,{kEmptyObject:a,once:o}=jo(),{validateAbortSignal:s,validateFunction:l,validateObject:u,validateBoolean:c}=RP(),{Promise:d,PromisePrototypeThen:h,SymbolDispose:f}=ki(),{isClosed:g,isReadable:p,isReadableNodeStream:m,isReadableStream:y,isReadableFinished:b,isReadableErrored:w,isWritable:x,isWritableNodeStream:S,isWritableStream:C,isWritableFinished:T,isWritableErrored:M,isNodeStream:A,willEmitClose:P,kIsClosedPromise:O}=tg();let j;function D(N){return N.setHeader&&typeof N.abort=="function"}const I=()=>{};function q(N,Q,F){var L,Y;if(arguments.length===2?(F=Q,Q=a):Q==null?Q=a:u(Q,"options"),l(F,"callback"),s(Q.signal,"options.signal"),F=o(F),y(N)||C(N))return $(N,Q,F);if(!A(N))throw new i("stream",["ReadableStream","WritableStream","Stream"],N);const ae=(L=Q.readable)!==null&&L!==void 0?L:m(N),re=(Y=Q.writable)!==null&&Y!==void 0?Y:S(N),H=N._writableState,se=N._readableState,le=()=>{N.writable||oe()};let ee=P(N)&&m(N)===ae&&S(N)===re,J=T(N,!1);const oe=()=>{J=!0,N.destroyed&&(ee=!1),!(ee&&(!N.readable||ae))&&(!ae||me)&&F.call(N)};let me=b(N,!1);const be=()=>{me=!0,N.destroyed&&(ee=!1),!(ee&&(!N.writable||re))&&(!re||J)&&F.call(N)},de=he=>{F.call(N,he)};let ge=g(N);const ce=()=>{ge=!0;const he=M(N)||w(N);if(he&&typeof he!="boolean")return F.call(N,he);if(ae&&!me&&m(N,!0)&&!b(N,!1))return F.call(N,new n);if(re&&!J&&!T(N,!1))return F.call(N,new n);F.call(N)},Ce=()=>{ge=!0;const he=M(N)||w(N);if(he&&typeof he!="boolean")return F.call(N,he);F.call(N)},Ee=()=>{N.req.on("finish",oe)};D(N)?(N.on("complete",oe),ee||N.on("abort",ce),N.req?Ee():N.on("request",Ee)):re&&!H&&(N.on("end",le),N.on("close",le)),!ee&&typeof N.aborted=="boolean"&&N.on("aborted",ce),N.on("end",be),N.on("finish",oe),Q.error!==!1&&N.on("error",de),N.on("close",ce),ge?e.nextTick(ce):H!=null&&H.errorEmitted||se!=null&&se.errorEmitted?ee||e.nextTick(Ce):(!ae&&(!ee||p(N))&&(J||x(N)===!1)||!re&&(!ee||x(N))&&(me||p(N)===!1)||se&&N.req&&N.aborted)&&e.nextTick(Ce);const Me=()=>{F=I,N.removeListener("aborted",ce),N.removeListener("complete",oe),N.removeListener("abort",ce),N.removeListener("request",Ee),N.req&&N.req.removeListener("finish",oe),N.removeListener("end",le),N.removeListener("close",le),N.removeListener("finish",oe),N.removeListener("end",be),N.removeListener("error",de),N.removeListener("close",ce)};if(Q.signal&&!ge){const he=()=>{const Ae=F;Me(),Ae.call(N,new t(void 0,{cause:Q.signal.reason}))};if(Q.signal.aborted)e.nextTick(he);else{j=j||jo().addAbortListener;const Ae=j(Q.signal,he),De=F;F=o((...Z)=>{Ae[f](),De.apply(N,Z)})}}return Me}function $(N,Q,F){let L=!1,Y=I;if(Q.signal)if(Y=()=>{L=!0,F.call(N,new t(void 0,{cause:Q.signal.reason}))},Q.signal.aborted)e.nextTick(Y);else{j=j||jo().addAbortListener;const re=j(Q.signal,Y),H=F;F=o((...se)=>{re[f](),H.apply(N,se)})}const ae=(...re)=>{L||e.nextTick(()=>F.apply(N,re))};return h(N[O].promise,ae,ae),I}function X(N,Q){var F;let L=!1;return Q===null&&(Q=a),(F=Q)!==null&&F!==void 0&&F.cleanup&&(c(Q.cleanup,"cleanup"),L=Q.cleanup),new d((Y,ae)=>{const re=q(N,Q,H=>{L&&re(),H?ae(H):Y()})})}return jO.exports=q,jO.exports.finished=X,jO.exports}var lU,$le;function Lw(){if($le)return lU;$le=1;const e=Pb(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:r},AbortError:i}=po(),{Symbol:n}=ki(),{kIsDestroyed:a,isDestroyed:o,isFinished:s,isServerRequest:l}=tg(),u=n("kDestroy"),c=n("kConstruct");function d(P,O,j){P&&(P.stack,O&&!O.errored&&(O.errored=P),j&&!j.errored&&(j.errored=P))}function h(P,O){const j=this._readableState,D=this._writableState,I=D||j;return D!=null&&D.destroyed||j!=null&&j.destroyed?(typeof O=="function"&&O(),this):(d(P,D,j),D&&(D.destroyed=!0),j&&(j.destroyed=!0),I.constructed?f(this,P,O):this.once(u,function(q){f(this,t(q,P),O)}),this)}function f(P,O,j){let D=!1;function I(q){if(D)return;D=!0;const $=P._readableState,X=P._writableState;d(q,X,$),X&&(X.closed=!0),$&&($.closed=!0),typeof j=="function"&&j(q),q?e.nextTick(g,P,q):e.nextTick(p,P)}try{P._destroy(O||null,I)}catch(q){I(q)}}function g(P,O){m(P,O),p(P)}function p(P){const O=P._readableState,j=P._writableState;j&&(j.closeEmitted=!0),O&&(O.closeEmitted=!0),(j!=null&&j.emitClose||O!=null&&O.emitClose)&&P.emit("close")}function m(P,O){const j=P._readableState,D=P._writableState;D!=null&&D.errorEmitted||j!=null&&j.errorEmitted||(D&&(D.errorEmitted=!0),j&&(j.errorEmitted=!0),P.emit("error",O))}function y(){const P=this._readableState,O=this._writableState;P&&(P.constructed=!0,P.closed=!1,P.closeEmitted=!1,P.destroyed=!1,P.errored=null,P.errorEmitted=!1,P.reading=!1,P.ended=P.readable===!1,P.endEmitted=P.readable===!1),O&&(O.constructed=!0,O.destroyed=!1,O.closed=!1,O.closeEmitted=!1,O.errored=null,O.errorEmitted=!1,O.finalCalled=!1,O.prefinished=!1,O.ended=O.writable===!1,O.ending=O.writable===!1,O.finished=O.writable===!1)}function b(P,O,j){const D=P._readableState,I=P._writableState;if(I!=null&&I.destroyed||D!=null&&D.destroyed)return this;D!=null&&D.autoDestroy||I!=null&&I.autoDestroy?P.destroy(O):O&&(O.stack,I&&!I.errored&&(I.errored=O),D&&!D.errored&&(D.errored=O),j?e.nextTick(m,P,O):m(P,O))}function w(P,O){if(typeof P._construct!="function")return;const j=P._readableState,D=P._writableState;j&&(j.constructed=!1),D&&(D.constructed=!1),P.once(c,O),!(P.listenerCount(c)>1)&&e.nextTick(x,P)}function x(P){let O=!1;function j(D){if(O){b(P,D??new r);return}O=!0;const I=P._readableState,q=P._writableState,$=q||I;I&&(I.constructed=!0),q&&(q.constructed=!0),$.destroyed?P.emit(u,D):D?b(P,D,!0):e.nextTick(S,P)}try{P._construct(D=>{e.nextTick(j,D)})}catch(D){e.nextTick(j,D)}}function S(P){P.emit(c)}function C(P){return(P==null?void 0:P.setHeader)&&typeof P.abort=="function"}function T(P){P.emit("close")}function M(P,O){P.emit("error",O),e.nextTick(T,P)}function A(P,O){!P||o(P)||(!O&&!s(P)&&(O=new i),l(P)?(P.socket=null,P.destroy(O)):C(P)?P.abort():C(P.req)?P.req.abort():typeof P.destroy=="function"?P.destroy(O):typeof P.close=="function"?P.close():O?e.nextTick(M,P,O):e.nextTick(T,P),P.destroyed||(P[a]=!0))}return lU={construct:w,destroyer:A,destroy:h,undestroy:y,errorOrDestroy:b},lU}var uU,Xle;function WG(){if(Xle)return uU;Xle=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=ki(),{EventEmitter:r}=xI();function i(a){r.call(this,a)}t(i.prototype,r.prototype),t(i,r),i.prototype.pipe=function(a,o){const s=this;function l(p){a.writable&&a.write(p)===!1&&s.pause&&s.pause()}s.on("data",l);function u(){s.readable&&s.resume&&s.resume()}a.on("drain",u),!a._isStdio&&(!o||o.end!==!1)&&(s.on("end",d),s.on("close",h));let c=!1;function d(){c||(c=!0,a.end())}function h(){c||(c=!0,typeof a.destroy=="function"&&a.destroy())}function f(p){g(),r.listenerCount(this,"error")===0&&this.emit("error",p)}n(s,"error",f),n(a,"error",f);function g(){s.removeListener("data",l),a.removeListener("drain",u),s.removeListener("end",d),s.removeListener("close",h),s.removeListener("error",f),a.removeListener("error",f),s.removeListener("end",g),s.removeListener("close",g),a.removeListener("close",g)}return s.on("end",g),s.on("close",g),a.on("close",g),a.emit("pipe",s),a};function n(a,o,s){if(typeof a.prependListener=="function")return a.prependListener(o,s);!a._events||!a._events[o]?a.on(o,s):e(a._events[o])?a._events[o].unshift(s):a._events[o]=[s,a._events[o]]}return uU={Stream:i,prependListener:n},uU}var cU={exports:{}},Yle;function SI(){return Yle||(Yle=1,function(e){const{SymbolDispose:t}=ki(),{AbortError:r,codes:i}=po(),{isNodeStream:n,isWebStream:a,kControllerErrorFunction:o}=tg(),s=zv(),{ERR_INVALID_ARG_TYPE:l}=i;let u;const c=(d,h)=>{if(typeof d!="object"||!("aborted"in d))throw new l(h,"AbortSignal",d)};e.exports.addAbortSignal=function(h,f){if(c(h,"signal"),!n(f)&&!a(f))throw new l("stream",["ReadableStream","WritableStream","Stream"],f);return e.exports.addAbortSignalNoValidate(h,f)},e.exports.addAbortSignalNoValidate=function(d,h){if(typeof d!="object"||!("aborted"in d))return h;const f=n(h)?()=>{h.destroy(new r(void 0,{cause:d.reason}))}:()=>{h[o](new r(void 0,{cause:d.reason}))};if(d.aborted)f();else{u=u||jo().addAbortListener;const g=u(d,f);s(h,g[t])}return h}}(cU)),cU.exports}var dU,Kle;function WTt(){if(Kle)return dU;Kle=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:r,Uint8Array:i}=ki(),{Buffer:n}=jv(),{inspect:a}=jo();return dU=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const l={data:s,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(s){const l={data:s,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=s+l.data;return u}concat(s){if(this.length===0)return n.alloc(0);const l=n.allocUnsafe(s>>>0);let u=this.head,c=0;for(;u;)r(l,u.data,c),c+=u.data.length,u=u.next;return l}consume(s,l){const u=this.head.data;if(s<u.length){const c=u.slice(0,s);return this.head.data=u.slice(s),c}return s===u.length?this.shift():l?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let l="",u=this.head,c=0;do{const d=u.data;if(s>d.length)l+=d,s-=d.length;else{s===d.length?(l+=d,++c,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(d,0,s),this.head=u,u.data=e(d,s));break}++c}while((u=u.next)!==null);return this.length-=c,l}_getBuffer(s){const l=n.allocUnsafe(s),u=s;let c=this.head,d=0;do{const h=c.data;if(s>h.length)r(l,h,u-s),s-=h.length;else{s===h.length?(r(l,h,u-s),++d,c.next?this.head=c.next:this.head=this.tail=null):(r(l,new i(h.buffer,h.byteOffset,s),u-s),this.head=c,c.data=h.slice(s));break}++d}while((c=c.next)!==null);return this.length-=d,l}[Symbol.for("nodejs.util.inspect.custom")](s,l){return a(this,{...l,depth:0,customInspect:!1})}},dU}var hU,Qle;function CI(){if(Qle)return hU;Qle=1;const{MathFloor:e,NumberIsInteger:t}=ki(),{validateInteger:r}=RP(),{ERR_INVALID_ARG_VALUE:i}=po().codes;let n=16*1024,a=16;function o(c,d,h){return c.highWaterMark!=null?c.highWaterMark:d?c[h]:null}function s(c){return c?a:n}function l(c,d){r(d,"value",0),c?a=d:n=d}function u(c,d,h,f){const g=o(d,f,h);if(g!=null){if(!t(g)||g<0){const p=f?`options.${h}`:"options.highWaterMark";throw new i(p,g)}return e(g)}return s(c.objectMode)}return hU={getHighWaterMark:u,getDefaultHighWaterMark:s,setDefaultHighWaterMark:l},hU}var fU={},zO={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Jle;function GTt(){return Jle||(Jle=1,function(e,t){var r=jv(),i=r.Buffer;function n(o,s){for(var l in o)s[l]=o[l]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(n(r,t),t.Buffer=a);function a(o,s,l){return i(o,s,l)}a.prototype=Object.create(i.prototype),n(i,a),a.from=function(o,s,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return i(o,s,l)},a.alloc=function(o,s,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=i(o);return s!==void 0?typeof l=="string"?u.fill(s,l):u.fill(s):u.fill(0),u},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}}(zO,zO.exports)),zO.exports}var Zle;function HTt(){if(Zle)return fU;Zle=1;var e=GTt().Buffer,t=e.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(y){if(!y)return"utf8";for(var b;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(b)return;y=(""+y).toLowerCase(),b=!0}}function i(y){var b=r(y);if(typeof b!="string"&&(e.isEncoding===t||!t(y)))throw new Error("Unknown encoding: "+y);return b||y}fU.StringDecoder=n;function n(y){this.encoding=i(y);var b;switch(this.encoding){case"utf16le":this.text=d,this.end=h,b=4;break;case"utf8":this.fillLast=l,b=4;break;case"base64":this.text=f,this.end=g,b=3;break;default:this.write=p,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(b)}n.prototype.write=function(y){if(y.length===0)return"";var b,w;if(this.lastNeed){if(b=this.fillLast(y),b===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<y.length?b?b+this.text(y,w):this.text(y,w):b||""},n.prototype.end=c,n.prototype.text=u,n.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function a(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function o(y,b,w){var x=b.length-1;if(x<w)return 0;var S=a(b[x]);return S>=0?(S>0&&(y.lastNeed=S-1),S):--x<w||S===-2?0:(S=a(b[x]),S>=0?(S>0&&(y.lastNeed=S-2),S):--x<w||S===-2?0:(S=a(b[x]),S>=0?(S>0&&(S===2?S=0:y.lastNeed=S-3),S):0))}function s(y,b,w){if((b[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&b.length>1){if((b[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&b.length>2&&(b[2]&192)!==128)return y.lastNeed=2,""}}function l(y){var b=this.lastTotal-this.lastNeed,w=s(this,y);if(w!==void 0)return w;if(this.lastNeed<=y.length)return y.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,b,0,y.length),this.lastNeed-=y.length}function u(y,b){var w=o(this,y,b);if(!this.lastNeed)return y.toString("utf8",b);this.lastTotal=w;var x=y.length-(w-this.lastNeed);return y.copy(this.lastChar,0,x),y.toString("utf8",b,x)}function c(y){var b=y&&y.length?this.write(y):"";return this.lastNeed?b+"":b}function d(y,b){if((y.length-b)%2===0){var w=y.toString("utf16le",b);if(w){var x=w.charCodeAt(w.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",b,y.length-1)}function h(y){var b=y&&y.length?this.write(y):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,w)}return b}function f(y,b){var w=(y.length-b)%3;return w===0?y.toString("base64",b):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",b,y.length-w))}function g(y){var b=y&&y.length?this.write(y):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function p(y){return y.toString(this.encoding)}function m(y){return y&&y.length?this.write(y):""}return fU}var pU,eue;function kEe(){if(eue)return pU;eue=1;const e=Pb(),{PromisePrototypeThen:t,SymbolAsyncIterator:r,SymbolIterator:i}=ki(),{Buffer:n}=jv(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:o}=po().codes;function s(l,u,c){let d;if(typeof u=="string"||u instanceof n)return new l({objectMode:!0,...c,read(){this.push(u),this.push(null)}});let h;if(u&&u[r])h=!0,d=u[r]();else if(u&&u[i])h=!1,d=u[i]();else throw new a("iterable",["Iterable"],u);const f=new l({objectMode:!0,highWaterMark:1,...c});let g=!1;f._read=function(){g||(g=!0,m())},f._destroy=function(y,b){t(p(y),()=>e.nextTick(b,y),w=>e.nextTick(b,w||y))};async function p(y){const b=y!=null,w=typeof d.throw=="function";if(b&&w){const{value:x,done:S}=await d.throw(y);if(await x,S)return}if(typeof d.return=="function"){const{value:x}=await d.return();await x}}async function m(){for(;;){try{const{value:y,done:b}=h?await d.next():d.next();if(b)f.push(null);else{const w=y&&typeof y.then=="function"?await y:y;if(w===null)throw g=!1,new o;if(f.push(w))continue;g=!1}}catch(y){f.destroy(y)}break}}return f}return pU=s,pU}var mU,tue;function EI(){if(tue)return mU;tue=1;const e=Pb(),{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:i,NumberParseInt:n,ObjectDefineProperties:a,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:l,SafeSet:u,SymbolAsyncDispose:c,SymbolAsyncIterator:d,Symbol:h}=ki();mU=Z,Z.ReadableState=De;const{EventEmitter:f}=xI(),{Stream:g,prependListener:p}=WG(),{Buffer:m}=jv(),{addAbortSignal:y}=SI(),b=zv();let w=jo().debuglog("stream",ye=>{w=ye});const x=WTt(),S=Lw(),{getHighWaterMark:C,getDefaultHighWaterMark:T}=CI(),{aggregateTwoErrors:M,codes:{ERR_INVALID_ARG_TYPE:A,ERR_METHOD_NOT_IMPLEMENTED:P,ERR_OUT_OF_RANGE:O,ERR_STREAM_PUSH_AFTER_EOF:j,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:D},AbortError:I}=po(),{validateObject:q}=RP(),$=h("kPaused"),{StringDecoder:X}=HTt(),N=kEe();s(Z.prototype,g.prototype),s(Z,g);const Q=()=>{},{errorOrDestroy:F}=S,L=1,Y=2,ae=4,re=8,H=16,se=32,le=64,ee=128,J=256,oe=512,me=1024,be=2048,de=4096,ge=8192,ce=16384,Ce=32768,Ee=65536,Me=1<<17,he=1<<18;function Ae(ye){return{enumerable:!1,get(){return(this.state&ye)!==0},set(xe){xe?this.state|=ye:this.state&=~ye}}}a(De.prototype,{objectMode:Ae(L),ended:Ae(Y),endEmitted:Ae(ae),reading:Ae(re),constructed:Ae(H),sync:Ae(se),needReadable:Ae(le),emittedReadable:Ae(ee),readableListening:Ae(J),resumeScheduled:Ae(oe),errorEmitted:Ae(me),emitClose:Ae(be),autoDestroy:Ae(de),destroyed:Ae(ge),closed:Ae(ce),closeEmitted:Ae(Ce),multiAwaitDrain:Ae(Ee),readingMore:Ae(Me),dataEmitted:Ae(he)});function De(ye,xe,He){typeof He!="boolean"&&(He=xe instanceof Qm()),this.state=be|de|H|se,ye&&ye.objectMode&&(this.state|=L),He&&ye&&ye.readableObjectMode&&(this.state|=L),this.highWaterMark=ye?C(this,ye,"readableHighWaterMark",He):T(!1),this.buffer=new x,this.length=0,this.pipes=[],this.flowing=null,this[$]=null,ye&&ye.emitClose===!1&&(this.state&=-2049),ye&&ye.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=ye&&ye.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ye&&ye.encoding&&(this.decoder=new X(ye.encoding),this.encoding=ye.encoding)}function Z(ye){if(!(this instanceof Z))return new Z(ye);const xe=this instanceof Qm();this._readableState=new De(ye,this,xe),ye&&(typeof ye.read=="function"&&(this._read=ye.read),typeof ye.destroy=="function"&&(this._destroy=ye.destroy),typeof ye.construct=="function"&&(this._construct=ye.construct),ye.signal&&!xe&&y(ye.signal,this)),g.call(this,ye),S.construct(this,()=>{this._readableState.needReadable&&ve(this,this._readableState)})}Z.prototype.destroy=S.destroy,Z.prototype._undestroy=S.undestroy,Z.prototype._destroy=function(ye,xe){xe(ye)},Z.prototype[f.captureRejectionSymbol]=function(ye){this.destroy(ye)},Z.prototype[c]=function(){let ye;return this.destroyed||(ye=this.readableEnded?null:new I,this.destroy(ye)),new l((xe,He)=>b(this,Xe=>Xe&&Xe!==ye?He(Xe):xe(null)))},Z.prototype.push=function(ye,xe){return ie(this,ye,xe,!1)},Z.prototype.unshift=function(ye,xe){return ie(this,ye,xe,!0)};function ie(ye,xe,He,Xe){w("readableAddChunk",xe);const pt=ye._readableState;let Lt;if((pt.state&L)===0&&(typeof xe=="string"?(He=He||pt.defaultEncoding,pt.encoding!==He&&(Xe&&pt.encoding?xe=m.from(xe,He).toString(pt.encoding):(xe=m.from(xe,He),He=""))):xe instanceof m?He="":g._isUint8Array(xe)?(xe=g._uint8ArrayToBuffer(xe),He=""):xe!=null&&(Lt=new A("chunk",["string","Buffer","Uint8Array"],xe))),Lt)F(ye,Lt);else if(xe===null)pt.state&=-9,B(ye,pt);else if((pt.state&L)!==0||xe&&xe.length>0)if(Xe)if((pt.state&ae)!==0)F(ye,new D);else{if(pt.destroyed||pt.errored)return!1;Te(ye,pt,xe,!0)}else if(pt.ended)F(ye,new j);else{if(pt.destroyed||pt.errored)return!1;pt.state&=-9,pt.decoder&&!He?(xe=pt.decoder.write(xe),pt.objectMode||xe.length!==0?Te(ye,pt,xe,!1):ve(ye,pt)):Te(ye,pt,xe,!1)}else Xe||(pt.state&=-9,ve(ye,pt));return!pt.ended&&(pt.length<pt.highWaterMark||pt.length===0)}function Te(ye,xe,He,Xe){xe.flowing&&xe.length===0&&!xe.sync&&ye.listenerCount("data")>0?((xe.state&Ee)!==0?xe.awaitDrainWriters.clear():xe.awaitDrainWriters=null,xe.dataEmitted=!0,ye.emit("data",He)):(xe.length+=xe.objectMode?1:He.length,Xe?xe.buffer.unshift(He):xe.buffer.push(He),(xe.state&le)!==0&&U(ye)),ve(ye,xe)}Z.prototype.isPaused=function(){const ye=this._readableState;return ye[$]===!0||ye.flowing===!1},Z.prototype.setEncoding=function(ye){const xe=new X(ye);this._readableState.decoder=xe,this._readableState.encoding=this._readableState.decoder.encoding;const He=this._readableState.buffer;let Xe="";for(const pt of He)Xe+=xe.write(pt);return He.clear(),Xe!==""&&He.push(Xe),this._readableState.length=Xe.length,this};const Ue=1073741824;function ne(ye){if(ye>Ue)throw new O("size","<= 1GiB",ye);return ye--,ye|=ye>>>1,ye|=ye>>>2,ye|=ye>>>4,ye|=ye>>>8,ye|=ye>>>16,ye++,ye}function K(ye,xe){return ye<=0||xe.length===0&&xe.ended?0:(xe.state&L)!==0?1:i(ye)?xe.flowing&&xe.length?xe.buffer.first().length:xe.length:ye<=xe.length?ye:xe.ended?xe.length:0}Z.prototype.read=function(ye){w("read",ye),ye===void 0?ye=NaN:r(ye)||(ye=n(ye,10));const xe=this._readableState,He=ye;if(ye>xe.highWaterMark&&(xe.highWaterMark=ne(ye)),ye!==0&&(xe.state&=-129),ye===0&&xe.needReadable&&((xe.highWaterMark!==0?xe.length>=xe.highWaterMark:xe.length>0)||xe.ended))return w("read: emitReadable",xe.length,xe.ended),xe.length===0&&xe.ended?mt(this):U(this),null;if(ye=K(ye,xe),ye===0&&xe.ended)return xe.length===0&&mt(this),null;let Xe=(xe.state&le)!==0;if(w("need readable",Xe),(xe.length===0||xe.length-ye<xe.highWaterMark)&&(Xe=!0,w("length less than watermark",Xe)),xe.ended||xe.reading||xe.destroyed||xe.errored||!xe.constructed)Xe=!1,w("reading, ended or constructing",Xe);else if(Xe){w("do read"),xe.state|=re|se,xe.length===0&&(xe.state|=le);try{this._read(xe.highWaterMark)}catch(Lt){F(this,Lt)}xe.state&=-33,xe.reading||(ye=K(He,xe))}let pt;return ye>0?pt=$e(ye,xe):pt=null,pt===null?(xe.needReadable=xe.length<=xe.highWaterMark,ye=0):(xe.length-=ye,xe.multiAwaitDrain?xe.awaitDrainWriters.clear():xe.awaitDrainWriters=null),xe.length===0&&(xe.ended||(xe.needReadable=!0),He!==ye&&xe.ended&&mt(this)),pt!==null&&!xe.errorEmitted&&!xe.closeEmitted&&(xe.dataEmitted=!0,this.emit("data",pt)),pt};function B(ye,xe){if(w("onEofChunk"),!xe.ended){if(xe.decoder){const He=xe.decoder.end();He&&He.length&&(xe.buffer.push(He),xe.length+=xe.objectMode?1:He.length)}xe.ended=!0,xe.sync?U(ye):(xe.needReadable=!1,xe.emittedReadable=!0,te(ye))}}function U(ye){const xe=ye._readableState;w("emitReadable",xe.needReadable,xe.emittedReadable),xe.needReadable=!1,xe.emittedReadable||(w("emitReadable",xe.flowing),xe.emittedReadable=!0,e.nextTick(te,ye))}function te(ye){const xe=ye._readableState;w("emitReadable_",xe.destroyed,xe.length,xe.ended),!xe.destroyed&&!xe.errored&&(xe.length||xe.ended)&&(ye.emit("readable"),xe.emittedReadable=!1),xe.needReadable=!xe.flowing&&!xe.ended&&xe.length<=xe.highWaterMark,ht(ye)}function ve(ye,xe){!xe.readingMore&&xe.constructed&&(xe.readingMore=!0,e.nextTick(Re,ye,xe))}function Re(ye,xe){for(;!xe.reading&&!xe.ended&&(xe.length<xe.highWaterMark||xe.flowing&&xe.length===0);){const He=xe.length;if(w("maybeReadMore read 0"),ye.read(0),He===xe.length)break}xe.readingMore=!1}Z.prototype._read=function(ye){throw new P("_read()")},Z.prototype.pipe=function(ye,xe){const He=this,Xe=this._readableState;Xe.pipes.length===1&&(Xe.multiAwaitDrain||(Xe.multiAwaitDrain=!0,Xe.awaitDrainWriters=new u(Xe.awaitDrainWriters?[Xe.awaitDrainWriters]:[]))),Xe.pipes.push(ye),w("pipe count=%d opts=%j",Xe.pipes.length,xe);const Lt=(!xe||xe.end!==!1)&&ye!==e.stdout&&ye!==e.stderr?Xr:zt;Xe.endEmitted?e.nextTick(Lt):He.once("end",Lt),ye.on("unpipe",nr);function nr(gr,Vt){w("onunpipe"),gr===He&&Vt&&Vt.hasUnpiped===!1&&(Vt.hasUnpiped=!0,tt())}function Xr(){w("onend"),ye.end()}let we,We=!1;function tt(){w("cleanup"),ye.removeListener("close",Ft),ye.removeListener("finish",$t),we&&ye.removeListener("drain",we),ye.removeListener("error",Tt),ye.removeListener("unpipe",nr),He.removeListener("end",Xr),He.removeListener("end",zt),He.removeListener("data",nt),We=!0,we&&Xe.awaitDrainWriters&&(!ye._writableState||ye._writableState.needDrain)&&we()}function qe(){We||(Xe.pipes.length===1&&Xe.pipes[0]===ye?(w("false write response, pause",0),Xe.awaitDrainWriters=ye,Xe.multiAwaitDrain=!1):Xe.pipes.length>1&&Xe.pipes.includes(ye)&&(w("false write response, pause",Xe.awaitDrainWriters.size),Xe.awaitDrainWriters.add(ye)),He.pause()),we||(we=Fe(He,ye),ye.on("drain",we))}He.on("data",nt);function nt(gr){w("ondata");const Vt=ye.write(gr);w("dest.write",Vt),Vt===!1&&qe()}function Tt(gr){if(w("onerror",gr),zt(),ye.removeListener("error",Tt),ye.listenerCount("error")===0){const Vt=ye._writableState||ye._readableState;Vt&&!Vt.errorEmitted?F(ye,gr):ye.emit("error",gr)}}p(ye,"error",Tt);function Ft(){ye.removeListener("finish",$t),zt()}ye.once("close",Ft);function $t(){w("onfinish"),ye.removeListener("close",Ft),zt()}ye.once("finish",$t);function zt(){w("unpipe"),He.unpipe(ye)}return ye.emit("pipe",He),ye.writableNeedDrain===!0?qe():Xe.flowing||(w("pipe resume"),He.resume()),ye};function Fe(ye,xe){return function(){const Xe=ye._readableState;Xe.awaitDrainWriters===xe?(w("pipeOnDrain",1),Xe.awaitDrainWriters=null):Xe.multiAwaitDrain&&(w("pipeOnDrain",Xe.awaitDrainWriters.size),Xe.awaitDrainWriters.delete(xe)),(!Xe.awaitDrainWriters||Xe.awaitDrainWriters.size===0)&&ye.listenerCount("data")&&ye.resume()}}Z.prototype.unpipe=function(ye){const xe=this._readableState,He={hasUnpiped:!1};if(xe.pipes.length===0)return this;if(!ye){const pt=xe.pipes;xe.pipes=[],this.pause();for(let Lt=0;Lt<pt.length;Lt++)pt[Lt].emit("unpipe",this,{hasUnpiped:!1});return this}const Xe=t(xe.pipes,ye);return Xe===-1?this:(xe.pipes.splice(Xe,1),xe.pipes.length===0&&this.pause(),ye.emit("unpipe",this,He),this)},Z.prototype.on=function(ye,xe){const He=g.prototype.on.call(this,ye,xe),Xe=this._readableState;return ye==="data"?(Xe.readableListening=this.listenerCount("readable")>0,Xe.flowing!==!1&&this.resume()):ye==="readable"&&!Xe.endEmitted&&!Xe.readableListening&&(Xe.readableListening=Xe.needReadable=!0,Xe.flowing=!1,Xe.emittedReadable=!1,w("on readable",Xe.length,Xe.reading),Xe.length?U(this):Xe.reading||e.nextTick(Ze,this)),He},Z.prototype.addListener=Z.prototype.on,Z.prototype.removeListener=function(ye,xe){const He=g.prototype.removeListener.call(this,ye,xe);return ye==="readable"&&e.nextTick(et,this),He},Z.prototype.off=Z.prototype.removeListener,Z.prototype.removeAllListeners=function(ye){const xe=g.prototype.removeAllListeners.apply(this,arguments);return(ye==="readable"||ye===void 0)&&e.nextTick(et,this),xe};function et(ye){const xe=ye._readableState;xe.readableListening=ye.listenerCount("readable")>0,xe.resumeScheduled&&xe[$]===!1?xe.flowing=!0:ye.listenerCount("data")>0?ye.resume():xe.readableListening||(xe.flowing=null)}function Ze(ye){w("readable nexttick read 0"),ye.read(0)}Z.prototype.resume=function(){const ye=this._readableState;return ye.flowing||(w("resume"),ye.flowing=!ye.readableListening,Pe(this,ye)),ye[$]=!1,this};function Pe(ye,xe){xe.resumeScheduled||(xe.resumeScheduled=!0,e.nextTick(Le,ye,xe))}function Le(ye,xe){w("resume",xe.reading),xe.reading||ye.read(0),xe.resumeScheduled=!1,ye.emit("resume"),ht(ye),xe.flowing&&!xe.reading&&ye.read(0)}Z.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[$]=!0,this};function ht(ye){const xe=ye._readableState;for(w("flow",xe.flowing);xe.flowing&&ye.read()!==null;);}Z.prototype.wrap=function(ye){let xe=!1;ye.on("data",Xe=>{!this.push(Xe)&&ye.pause&&(xe=!0,ye.pause())}),ye.on("end",()=>{this.push(null)}),ye.on("error",Xe=>{F(this,Xe)}),ye.on("close",()=>{this.destroy()}),ye.on("destroy",()=>{this.destroy()}),this._read=()=>{xe&&ye.resume&&(xe=!1,ye.resume())};const He=o(ye);for(let Xe=1;Xe<He.length;Xe++){const pt=He[Xe];this[pt]===void 0&&typeof ye[pt]=="function"&&(this[pt]=ye[pt].bind(ye))}return this},Z.prototype[d]=function(){return Be(this)},Z.prototype.iterator=function(ye){return ye!==void 0&&q(ye,"options"),Be(this,ye)};function Be(ye,xe){typeof ye.read!="function"&&(ye=Z.wrap(ye,{objectMode:!0}));const He=Ye(ye,xe);return He.stream=ye,He}async function*Ye(ye,xe){let He=Q;function Xe(nr){this===ye?(He(),He=Q):He=nr}ye.on("readable",Xe);let pt;const Lt=b(ye,{writable:!1},nr=>{pt=nr?M(pt,nr):null,He(),He=Q});try{for(;;){const nr=ye.destroyed?null:ye.read();if(nr!==null)yield nr;else{if(pt)throw pt;if(pt===null)return;await new l(Xe)}}}catch(nr){throw pt=M(pt,nr),pt}finally{(pt||(xe==null?void 0:xe.destroyOnReturn)!==!1)&&(pt===void 0||ye._readableState.autoDestroy)?S.destroyer(ye,null):(ye.off("readable",Xe),Lt())}}a(Z.prototype,{readable:{__proto__:null,get(){const ye=this._readableState;return!!ye&&ye.readable!==!1&&!ye.destroyed&&!ye.errorEmitted&&!ye.endEmitted},set(ye){this._readableState&&(this._readableState.readable=!!ye)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ye){this._readableState&&(this._readableState.flowing=ye)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ye){this._readableState&&(this._readableState.destroyed=ye)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(De.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[$]!==!1},set(ye){this[$]=!!ye}}}),Z._fromList=$e;function $e(ye,xe){if(xe.length===0)return null;let He;return xe.objectMode?He=xe.buffer.shift():!ye||ye>=xe.length?(xe.decoder?He=xe.buffer.join(""):xe.buffer.length===1?He=xe.buffer.first():He=xe.buffer.concat(xe.length),xe.buffer.clear()):He=xe.buffer.consume(ye,xe.decoder),He}function mt(ye){const xe=ye._readableState;w("endReadable",xe.endEmitted),xe.endEmitted||(xe.ended=!0,e.nextTick(It,xe,ye))}function It(ye,xe){if(w("endReadableNT",ye.endEmitted,ye.length),!ye.errored&&!ye.closeEmitted&&!ye.endEmitted&&ye.length===0){if(ye.endEmitted=!0,xe.emit("end"),xe.writable&&xe.allowHalfOpen===!1)e.nextTick(qt,xe);else if(ye.autoDestroy){const He=xe._writableState;(!He||He.autoDestroy&&(He.finished||He.writable===!1))&&xe.destroy()}}}function qt(ye){ye.writable&&!ye.writableEnded&&!ye.destroyed&&ye.end()}Z.from=function(ye,xe){return N(Z,ye,xe)};let mr;function Rr(){return mr===void 0&&(mr={}),mr}return Z.fromWeb=function(ye,xe){return Rr().newStreamReadableFromReadableStream(ye,xe)},Z.toWeb=function(ye,xe){return Rr().newReadableStreamFromStreamReadable(ye,xe)},Z.wrap=function(ye,xe){var He,Xe;return new Z({objectMode:(He=(Xe=ye.readableObjectMode)!==null&&Xe!==void 0?Xe:ye.objectMode)!==null&&He!==void 0?He:!0,...xe,destroy(pt,Lt){S.destroyer(ye,pt),Lt(pt)}}).wrap(ye)},mU}var gU,rue;function GG(){if(rue)return gU;rue=1;const e=Pb(),{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:n,ObjectDefineProperties:a,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:l,SymbolHasInstance:u}=ki();gU=q,q.WritableState=D;const{EventEmitter:c}=xI(),d=WG().Stream,{Buffer:h}=jv(),f=Lw(),{addAbortSignal:g}=SI(),{getHighWaterMark:p,getDefaultHighWaterMark:m}=CI(),{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:x,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:C,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:M,ERR_UNKNOWN_ENCODING:A}=po().codes,{errorOrDestroy:P}=f;o(q.prototype,d.prototype),o(q,d);function O(){}const j=l("kOnFinished");function D(de,ge,ce){typeof ce!="boolean"&&(ce=ge instanceof Qm()),this.objectMode=!!(de&&de.objectMode),ce&&(this.objectMode=this.objectMode||!!(de&&de.writableObjectMode)),this.highWaterMark=de?p(this,de,"writableHighWaterMark",ce):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ce=!!(de&&de.decodeStrings===!1);this.decodeStrings=!Ce,this.defaultEncoding=de&&de.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,ge),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,I(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!de||de.emitClose!==!1,this.autoDestroy=!de||de.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[j]=[]}function I(de){de.buffered=[],de.bufferedIndex=0,de.allBuffers=!0,de.allNoop=!0}D.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},n(D.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function q(de){const ge=this instanceof Qm();if(!ge&&!i(q,this))return new q(de);this._writableState=new D(de,this,ge),de&&(typeof de.write=="function"&&(this._write=de.write),typeof de.writev=="function"&&(this._writev=de.writev),typeof de.destroy=="function"&&(this._destroy=de.destroy),typeof de.final=="function"&&(this._final=de.final),typeof de.construct=="function"&&(this._construct=de.construct),de.signal&&g(de.signal,this)),d.call(this,de),f.construct(this,()=>{const ce=this._writableState;ce.writing||re(this,ce),ee(this,ce)})}n(q,u,{__proto__:null,value:function(de){return i(this,de)?!0:this!==q?!1:de&&de._writableState instanceof D}}),q.prototype.pipe=function(){P(this,new x)};function $(de,ge,ce,Ce){const Ee=de._writableState;if(typeof ce=="function")Ce=ce,ce=Ee.defaultEncoding;else{if(!ce)ce=Ee.defaultEncoding;else if(ce!=="buffer"&&!h.isEncoding(ce))throw new A(ce);typeof Ce!="function"&&(Ce=O)}if(ge===null)throw new T;if(!Ee.objectMode)if(typeof ge=="string")Ee.decodeStrings!==!1&&(ge=h.from(ge,ce),ce="buffer");else if(ge instanceof h)ce="buffer";else if(d._isUint8Array(ge))ge=d._uint8ArrayToBuffer(ge),ce="buffer";else throw new y("chunk",["string","Buffer","Uint8Array"],ge);let Me;return Ee.ending?Me=new M:Ee.destroyed&&(Me=new S("write")),Me?(e.nextTick(Ce,Me),P(de,Me,!0),Me):(Ee.pendingcb++,X(de,Ee,ge,ce,Ce))}q.prototype.write=function(de,ge,ce){return $(this,de,ge,ce)===!0},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){const de=this._writableState;de.corked&&(de.corked--,de.writing||re(this,de))},q.prototype.setDefaultEncoding=function(ge){if(typeof ge=="string"&&(ge=s(ge)),!h.isEncoding(ge))throw new A(ge);return this._writableState.defaultEncoding=ge,this};function X(de,ge,ce,Ce,Ee){const Me=ge.objectMode?1:ce.length;ge.length+=Me;const he=ge.length<ge.highWaterMark;return he||(ge.needDrain=!0),ge.writing||ge.corked||ge.errored||!ge.constructed?(ge.buffered.push({chunk:ce,encoding:Ce,callback:Ee}),ge.allBuffers&&Ce!=="buffer"&&(ge.allBuffers=!1),ge.allNoop&&Ee!==O&&(ge.allNoop=!1)):(ge.writelen=Me,ge.writecb=Ee,ge.writing=!0,ge.sync=!0,de._write(ce,Ce,ge.onwrite),ge.sync=!1),he&&!ge.errored&&!ge.destroyed}function N(de,ge,ce,Ce,Ee,Me,he){ge.writelen=Ce,ge.writecb=he,ge.writing=!0,ge.sync=!0,ge.destroyed?ge.onwrite(new S("write")):ce?de._writev(Ee,ge.onwrite):de._write(Ee,Me,ge.onwrite),ge.sync=!1}function Q(de,ge,ce,Ce){--ge.pendingcb,Ce(ce),ae(ge),P(de,ce)}function F(de,ge){const ce=de._writableState,Ce=ce.sync,Ee=ce.writecb;if(typeof Ee!="function"){P(de,new w);return}ce.writing=!1,ce.writecb=null,ce.length-=ce.writelen,ce.writelen=0,ge?(ge.stack,ce.errored||(ce.errored=ge),de._readableState&&!de._readableState.errored&&(de._readableState.errored=ge),Ce?e.nextTick(Q,de,ce,ge,Ee):Q(de,ce,ge,Ee)):(ce.buffered.length>ce.bufferedIndex&&re(de,ce),Ce?ce.afterWriteTickInfo!==null&&ce.afterWriteTickInfo.cb===Ee?ce.afterWriteTickInfo.count++:(ce.afterWriteTickInfo={count:1,cb:Ee,stream:de,state:ce},e.nextTick(L,ce.afterWriteTickInfo)):Y(de,ce,1,Ee))}function L({stream:de,state:ge,count:ce,cb:Ce}){return ge.afterWriteTickInfo=null,Y(de,ge,ce,Ce)}function Y(de,ge,ce,Ce){for(!ge.ending&&!de.destroyed&&ge.length===0&&ge.needDrain&&(ge.needDrain=!1,de.emit("drain"));ce-- >0;)ge.pendingcb--,Ce();ge.destroyed&&ae(ge),ee(de,ge)}function ae(de){if(de.writing)return;for(let Ee=de.bufferedIndex;Ee<de.buffered.length;++Ee){var ge;const{chunk:Me,callback:he}=de.buffered[Ee],Ae=de.objectMode?1:Me.length;de.length-=Ae,he((ge=de.errored)!==null&&ge!==void 0?ge:new S("write"))}const ce=de[j].splice(0);for(let Ee=0;Ee<ce.length;Ee++){var Ce;ce[Ee]((Ce=de.errored)!==null&&Ce!==void 0?Ce:new S("end"))}I(de)}function re(de,ge){if(ge.corked||ge.bufferProcessing||ge.destroyed||!ge.constructed)return;const{buffered:ce,bufferedIndex:Ce,objectMode:Ee}=ge,Me=ce.length-Ce;if(!Me)return;let he=Ce;if(ge.bufferProcessing=!0,Me>1&&de._writev){ge.pendingcb-=Me-1;const Ae=ge.allNoop?O:Z=>{for(let ie=he;ie<ce.length;++ie)ce[ie].callback(Z)},De=ge.allNoop&&he===0?ce:t(ce,he);De.allBuffers=ge.allBuffers,N(de,ge,!0,ge.length,De,"",Ae),I(ge)}else{do{const{chunk:Ae,encoding:De,callback:Z}=ce[he];ce[he++]=null;const ie=Ee?1:Ae.length;N(de,ge,!1,ie,Ae,De,Z)}while(he<ce.length&&!ge.writing);he===ce.length?I(ge):he>256?(ce.splice(0,he),ge.bufferedIndex=0):ge.bufferedIndex=he}ge.bufferProcessing=!1}q.prototype._write=function(de,ge,ce){if(this._writev)this._writev([{chunk:de,encoding:ge}],ce);else throw new b("_write()")},q.prototype._writev=null,q.prototype.end=function(de,ge,ce){const Ce=this._writableState;typeof de=="function"?(ce=de,de=null,ge=null):typeof ge=="function"&&(ce=ge,ge=null);let Ee;if(de!=null){const Me=$(this,de,ge);Me instanceof r&&(Ee=Me)}return Ce.corked&&(Ce.corked=1,this.uncork()),Ee||(!Ce.errored&&!Ce.ending?(Ce.ending=!0,ee(this,Ce,!0),Ce.ended=!0):Ce.finished?Ee=new C("end"):Ce.destroyed&&(Ee=new S("end"))),typeof ce=="function"&&(Ee||Ce.finished?e.nextTick(ce,Ee):Ce[j].push(ce)),this};function H(de){return de.ending&&!de.destroyed&&de.constructed&&de.length===0&&!de.errored&&de.buffered.length===0&&!de.finished&&!de.writing&&!de.errorEmitted&&!de.closeEmitted}function se(de,ge){let ce=!1;function Ce(Ee){if(ce){P(de,Ee??w());return}if(ce=!0,ge.pendingcb--,Ee){const Me=ge[j].splice(0);for(let he=0;he<Me.length;he++)Me[he](Ee);P(de,Ee,ge.sync)}else H(ge)&&(ge.prefinished=!0,de.emit("prefinish"),ge.pendingcb++,e.nextTick(J,de,ge))}ge.sync=!0,ge.pendingcb++;try{de._final(Ce)}catch(Ee){Ce(Ee)}ge.sync=!1}function le(de,ge){!ge.prefinished&&!ge.finalCalled&&(typeof de._final=="function"&&!ge.destroyed?(ge.finalCalled=!0,se(de,ge)):(ge.prefinished=!0,de.emit("prefinish")))}function ee(de,ge,ce){H(ge)&&(le(de,ge),ge.pendingcb===0&&(ce?(ge.pendingcb++,e.nextTick((Ce,Ee)=>{H(Ee)?J(Ce,Ee):Ee.pendingcb--},de,ge)):H(ge)&&(ge.pendingcb++,J(de,ge))))}function J(de,ge){ge.pendingcb--,ge.finished=!0;const ce=ge[j].splice(0);for(let Ce=0;Ce<ce.length;Ce++)ce[Ce]();if(de.emit("finish"),ge.autoDestroy){const Ce=de._readableState;(!Ce||Ce.autoDestroy&&(Ce.endEmitted||Ce.readable===!1))&&de.destroy()}}a(q.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(de){this._writableState&&(this._writableState.destroyed=de)}},writable:{__proto__:null,get(){const de=this._writableState;return!!de&&de.writable!==!1&&!de.destroyed&&!de.errored&&!de.ending&&!de.ended},set(de){this._writableState&&(this._writableState.writable=!!de)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const de=this._writableState;return de?!de.destroyed&&!de.ending&&de.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const oe=f.destroy;q.prototype.destroy=function(de,ge){const ce=this._writableState;return!ce.destroyed&&(ce.bufferedIndex<ce.buffered.length||ce[j].length)&&e.nextTick(ae,ce),oe.call(this,de,ge),this},q.prototype._undestroy=f.undestroy,q.prototype._destroy=function(de,ge){ge(de)},q.prototype[c.captureRejectionSymbol]=function(de){this.destroy(de)};let me;function be(){return me===void 0&&(me={}),me}return q.fromWeb=function(de,ge){return be().newStreamWritableFromWritableStream(de,ge)},q.toWeb=function(de){return be().newWritableStreamFromStreamWritable(de)},gU}var vU,iue;function $Tt(){if(iue)return vU;iue=1;const e=Pb(),t=jv(),{isReadable:r,isWritable:i,isIterable:n,isNodeStream:a,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:c}=tg(),d=zv(),{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:g}}=po(),{destroyer:p}=Lw(),m=Qm(),y=EI(),b=GG(),{createDeferredPromise:w}=jo(),x=kEe(),S=globalThis.Blob||t.Blob,C=typeof S<"u"?function(D){return D instanceof S}:function(D){return!1},T=globalThis.AbortController||UM().AbortController,{FunctionPrototypeCall:M}=ki();class A extends m{constructor(D){super(D),(D==null?void 0:D.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(D==null?void 0:D.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}vU=function j(D,I){if(l(D))return D;if(o(D))return O({readable:D});if(s(D))return O({writable:D});if(a(D))return O({writable:!1,readable:!1});if(u(D))return O({readable:y.fromWeb(D)});if(c(D))return O({writable:b.fromWeb(D)});if(typeof D=="function"){const{value:$,write:X,final:N,destroy:Q}=P(D);if(n($))return x(A,$,{objectMode:!0,write:X,final:N,destroy:Q});const F=$==null?void 0:$.then;if(typeof F=="function"){let L;const Y=M(F,$,ae=>{if(ae!=null)throw new g("nully","body",ae)},ae=>{p(L,ae)});return L=new A({objectMode:!0,readable:!1,write:X,final(ae){N(async()=>{try{await Y,e.nextTick(ae,null)}catch(re){e.nextTick(ae,re)}})},destroy:Q})}throw new g("Iterable, AsyncIterable or AsyncFunction",I,$)}if(C(D))return j(D.arrayBuffer());if(n(D))return x(A,D,{objectMode:!0,writable:!1});if(u(D==null?void 0:D.readable)&&c(D==null?void 0:D.writable))return A.fromWeb(D);if(typeof(D==null?void 0:D.writable)=="object"||typeof(D==null?void 0:D.readable)=="object"){const $=D!=null&&D.readable?o(D==null?void 0:D.readable)?D==null?void 0:D.readable:j(D.readable):void 0,X=D!=null&&D.writable?s(D==null?void 0:D.writable)?D==null?void 0:D.writable:j(D.writable):void 0;return O({readable:$,writable:X})}const q=D==null?void 0:D.then;if(typeof q=="function"){let $;return M(q,D,X=>{X!=null&&$.push(X),$.push(null)},X=>{p($,X)}),$=new A({objectMode:!0,writable:!1,read(){}})}throw new f(I,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],D)};function P(j){let{promise:D,resolve:I}=w();const q=new T,$=q.signal;return{value:j(async function*(){for(;;){const N=D;D=null;const{chunk:Q,done:F,cb:L}=await N;if(e.nextTick(L),F)return;if($.aborted)throw new h(void 0,{cause:$.reason});({promise:D,resolve:I}=w()),yield Q}}(),{signal:$}),write(N,Q,F){const L=I;I=null,L({chunk:N,done:!1,cb:F})},final(N){const Q=I;I=null,Q({done:!0,cb:N})},destroy(N,Q){q.abort(),Q(N)}}}function O(j){const D=j.readable&&typeof j.readable.read!="function"?y.wrap(j.readable):j.readable,I=j.writable;let q=!!r(D),$=!!i(I),X,N,Q,F,L;function Y(ae){const re=F;F=null,re?re(ae):ae&&L.destroy(ae)}return L=new A({readableObjectMode:!!(D!=null&&D.readableObjectMode),writableObjectMode:!!(I!=null&&I.writableObjectMode),readable:q,writable:$}),$&&(d(I,ae=>{$=!1,ae&&p(D,ae),Y(ae)}),L._write=function(ae,re,H){I.write(ae,re)?H():X=H},L._final=function(ae){I.end(),N=ae},I.on("drain",function(){if(X){const ae=X;X=null,ae()}}),I.on("finish",function(){if(N){const ae=N;N=null,ae()}})),q&&(d(D,ae=>{q=!1,ae&&p(D,ae),Y(ae)}),D.on("readable",function(){if(Q){const ae=Q;Q=null,ae()}}),D.on("end",function(){L.push(null)}),L._read=function(){for(;;){const ae=D.read();if(ae===null){Q=L._read;return}if(!L.push(ae))return}}),L._destroy=function(ae,re){!ae&&F!==null&&(ae=new h),Q=null,X=null,N=null,F===null?re(ae):(F=re,p(I,ae),p(D,ae))},L}return vU}var yU,nue;function Qm(){if(nue)return yU;nue=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:i}=ki();yU=o;const n=EI(),a=GG();i(o.prototype,n.prototype),i(o,n);{const c=r(a.prototype);for(let d=0;d<c.length;d++){const h=c[d];o.prototype[h]||(o.prototype[h]=a.prototype[h])}}function o(c){if(!(this instanceof o))return new o(c);n.call(this,c),a.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(a.prototype,"writableLength")},writableFinished:{__proto__:null,...t(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let s;function l(){return s===void 0&&(s={}),s}o.fromWeb=function(c,d){return l().newStreamDuplexFromReadableWritablePair(c,d)},o.toWeb=function(c){return l().newReadableWritablePairFromDuplex(c)};let u;return o.from=function(c){return u||(u=$Tt()),u(c,"body")},yU}var bU,aue;function qEe(){if(aue)return bU;aue=1;const{ObjectSetPrototypeOf:e,Symbol:t}=ki();bU=o;const{ERR_METHOD_NOT_IMPLEMENTED:r}=po().codes,i=Qm(),{getHighWaterMark:n}=CI();e(o.prototype,i.prototype),e(o,i);const a=t("kCallback");function o(u){if(!(this instanceof o))return new o(u);const c=u?n(this,u,"readableHighWaterMark",!0):null;c===0&&(u={...u,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:u.writableHighWaterMark||0}),i.call(this,u),this._readableState.sync=!1,this[a]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function s(u){typeof this._flush=="function"&&!this.destroyed?this._flush((c,d)=>{if(c){u?u(c):this.destroy(c);return}d!=null&&this.push(d),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(u,c,d){throw new r("_transform()")},o.prototype._write=function(u,c,d){const h=this._readableState,f=this._writableState,g=h.length;this._transform(u,c,(p,m)=>{if(p){d(p);return}m!=null&&this.push(m),f.ended||g===h.length||h.length<h.highWaterMark?d():this[a]=d})},o.prototype._read=function(){if(this[a]){const u=this[a];this[a]=null,u()}},bU}var _U,oue;function WEe(){if(oue)return _U;oue=1;const{ObjectSetPrototypeOf:e}=ki();_U=r;const t=qEe();e(r.prototype,t.prototype),e(r,t);function r(i){if(!(this instanceof r))return new r(i);t.call(this,i)}return r.prototype._transform=function(i,n,a){a(null,i)},_U}var wU,sue;function HG(){if(sue)return wU;sue=1;const e=Pb(),{ArrayIsArray:t,Promise:r,SymbolAsyncIterator:i,SymbolDispose:n}=ki(),a=zv(),{once:o}=jo(),s=Lw(),l=Qm(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:f,ERR_STREAM_PREMATURE_CLOSE:g},AbortError:p}=po(),{validateFunction:m,validateAbortSignal:y}=RP(),{isIterable:b,isReadable:w,isReadableNodeStream:x,isNodeStream:S,isTransformStream:C,isWebStream:T,isReadableStream:M,isReadableFinished:A}=tg(),P=globalThis.AbortController||UM().AbortController;let O,j,D;function I(ae,re,H){let se=!1;ae.on("close",()=>{se=!0});const le=a(ae,{readable:re,writable:H},ee=>{se=!ee});return{destroy:ee=>{se||(se=!0,s.destroyer(ae,ee||new f("pipe")))},cleanup:le}}function q(ae){return m(ae[ae.length-1],"streams[stream.length - 1]"),ae.pop()}function $(ae){if(b(ae))return ae;if(x(ae))return X(ae);throw new c("val",["Readable","Iterable","AsyncIterable"],ae)}async function*X(ae){j||(j=EI()),yield*j.prototype[i].call(ae)}async function N(ae,re,H,{end:se}){let le,ee=null;const J=be=>{if(be&&(le=be),ee){const de=ee;ee=null,de()}},oe=()=>new r((be,de)=>{le?de(le):ee=()=>{le?de(le):be()}});re.on("drain",J);const me=a(re,{readable:!1},J);try{re.writableNeedDrain&&await oe();for await(const be of ae)re.write(be)||await oe();se&&(re.end(),await oe()),H()}catch(be){H(le!==be?u(le,be):be)}finally{me(),re.off("drain",J)}}async function Q(ae,re,H,{end:se}){C(re)&&(re=re.writable);const le=re.getWriter();try{for await(const ee of ae)await le.ready,le.write(ee).catch(()=>{});await le.ready,se&&await le.close(),H()}catch(ee){try{await le.abort(ee),H(ee)}catch(J){H(J)}}}function F(...ae){return L(ae,o(q(ae)))}function L(ae,re,H){if(ae.length===1&&t(ae[0])&&(ae=ae[0]),ae.length<2)throw new h("streams");const se=new P,le=se.signal,ee=H==null?void 0:H.signal,J=[];y(ee,"options.signal");function oe(){Ee(new p)}D=D||jo().addAbortListener;let me;ee&&(me=D(ee,oe));let be,de;const ge=[];let ce=0;function Ce(De){Ee(De,--ce===0)}function Ee(De,Z){var ie;if(De&&(!be||be.code==="ERR_STREAM_PREMATURE_CLOSE")&&(be=De),!(!be&&!Z)){for(;ge.length;)ge.shift()(be);(ie=me)===null||ie===void 0||ie[n](),se.abort(),Z&&(be||J.forEach(Te=>Te()),e.nextTick(re,be,de))}}let Me;for(let De=0;De<ae.length;De++){const Z=ae[De],ie=De<ae.length-1,Te=De>0,Ue=ie||(H==null?void 0:H.end)!==!1,ne=De===ae.length-1;if(S(Z)){let K=function(B){B&&B.name!=="AbortError"&&B.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ce(B)};if(Ue){const{destroy:B,cleanup:U}=I(Z,ie,Te);ge.push(B),w(Z)&&ne&&J.push(U)}Z.on("error",K),w(Z)&&ne&&J.push(()=>{Z.removeListener("error",K)})}if(De===0)if(typeof Z=="function"){if(Me=Z({signal:le}),!b(Me))throw new d("Iterable, AsyncIterable or Stream","source",Me)}else b(Z)||x(Z)||C(Z)?Me=Z:Me=l.from(Z);else if(typeof Z=="function"){if(C(Me)){var he;Me=$((he=Me)===null||he===void 0?void 0:he.readable)}else Me=$(Me);if(Me=Z(Me,{signal:le}),ie){if(!b(Me,!0))throw new d("AsyncIterable",`transform[${De-1}]`,Me)}else{var Ae;O||(O=WEe());const K=new O({objectMode:!0}),B=(Ae=Me)===null||Ae===void 0?void 0:Ae.then;if(typeof B=="function")ce++,B.call(Me,ve=>{de=ve,ve!=null&&K.write(ve),Ue&&K.end(),e.nextTick(Ce)},ve=>{K.destroy(ve),e.nextTick(Ce,ve)});else if(b(Me,!0))ce++,N(Me,K,Ce,{end:Ue});else if(M(Me)||C(Me)){const ve=Me.readable||Me;ce++,N(ve,K,Ce,{end:Ue})}else throw new d("AsyncIterable or Promise","destination",Me);Me=K;const{destroy:U,cleanup:te}=I(Me,!1,!0);ge.push(U),ne&&J.push(te)}}else if(S(Z)){if(x(Me)){ce+=2;const K=Y(Me,Z,Ce,{end:Ue});w(Z)&&ne&&J.push(K)}else if(C(Me)||M(Me)){const K=Me.readable||Me;ce++,N(K,Z,Ce,{end:Ue})}else if(b(Me))ce++,N(Me,Z,Ce,{end:Ue});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Me);Me=Z}else if(T(Z)){if(x(Me))ce++,Q($(Me),Z,Ce,{end:Ue});else if(M(Me)||b(Me))ce++,Q(Me,Z,Ce,{end:Ue});else if(C(Me))ce++,Q(Me.readable,Z,Ce,{end:Ue});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Me);Me=Z}else Me=l.from(Z)}return(le!=null&&le.aborted||ee!=null&&ee.aborted)&&e.nextTick(oe),Me}function Y(ae,re,H,{end:se}){let le=!1;if(re.on("close",()=>{le||H(new g)}),ae.pipe(re,{end:!1}),se){let ee=function(){le=!0,re.end()};A(ae)?e.nextTick(ee):ae.once("end",ee)}else H();return a(ae,{readable:!0,writable:!1},ee=>{const J=ae._readableState;ee&&ee.code==="ERR_STREAM_PREMATURE_CLOSE"&&J&&J.ended&&!J.errored&&!J.errorEmitted?ae.once("end",H).once("error",H):H(ee)}),a(re,{readable:!1,writable:!0},H)}return wU={pipelineImpl:L,pipeline:F},wU}var xU,lue;function GEe(){if(lue)return xU;lue=1;const{pipeline:e}=HG(),t=Qm(),{destroyer:r}=Lw(),{isNodeStream:i,isReadable:n,isWritable:a,isWebStream:o,isTransformStream:s,isWritableStream:l,isReadableStream:u}=tg(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:h}}=po(),f=zv();return xU=function(...p){if(p.length===0)throw new h("streams");if(p.length===1)return t.from(p[0]);const m=[...p];if(typeof p[0]=="function"&&(p[0]=t.from(p[0])),typeof p[p.length-1]=="function"){const O=p.length-1;p[O]=t.from(p[O])}for(let O=0;O<p.length;++O)if(!(!i(p[O])&&!o(p[O]))){if(O<p.length-1&&!(n(p[O])||u(p[O])||s(p[O])))throw new d(`streams[${O}]`,m[O],"must be readable");if(O>0&&!(a(p[O])||l(p[O])||s(p[O])))throw new d(`streams[${O}]`,m[O],"must be writable")}let y,b,w,x,S;function C(O){const j=x;x=null,j?j(O):O?S.destroy(O):!P&&!A&&S.destroy()}const T=p[0],M=e(p,C),A=!!(a(T)||l(T)||s(T)),P=!!(n(M)||u(M)||s(M));if(S=new t({writableObjectMode:!!(T!=null&&T.writableObjectMode),readableObjectMode:!!(M!=null&&M.readableObjectMode),writable:A,readable:P}),A){if(i(T))S._write=function(j,D,I){T.write(j,D)?I():y=I},S._final=function(j){T.end(),b=j},T.on("drain",function(){if(y){const j=y;y=null,j()}});else if(o(T)){const D=(s(T)?T.writable:T).getWriter();S._write=async function(I,q,$){try{await D.ready,D.write(I).catch(()=>{}),$()}catch(X){$(X)}},S._final=async function(I){try{await D.ready,D.close().catch(()=>{}),b=I}catch(q){I(q)}}}const O=s(M)?M.readable:M;f(O,()=>{if(b){const j=b;b=null,j()}})}if(P){if(i(M))M.on("readable",function(){if(w){const O=w;w=null,O()}}),M.on("end",function(){S.push(null)}),S._read=function(){for(;;){const O=M.read();if(O===null){w=S._read;return}if(!S.push(O))return}};else if(o(M)){const j=(s(M)?M.readable:M).getReader();S._read=async function(){for(;;)try{const{value:D,done:I}=await j.read();if(!S.push(D))return;if(I){S.push(null);return}}catch{return}}}}return S._destroy=function(O,j){!O&&x!==null&&(O=new c),w=null,y=null,b=null,x===null?j(O):(x=j,i(M)&&r(M,O))},S},xU}var uue;function XTt(){if(uue)return IO;uue=1;const e=globalThis.AbortController||UM().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:r,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:n},AbortError:a}=po(),{validateAbortSignal:o,validateInteger:s,validateObject:l}=RP(),u=ki().Symbol("kWeak"),c=ki().Symbol("kResistStopPropagation"),{finished:d}=zv(),h=GEe(),{addAbortSignalNoValidate:f}=SI(),{isWritable:g,isNodeStream:p}=tg(),{deprecate:m}=jo(),{ArrayPrototypePush:y,Boolean:b,MathFloor:w,Number:x,NumberIsNaN:S,Promise:C,PromiseReject:T,PromiseResolve:M,PromisePrototypeThen:A,Symbol:P}=ki(),O=P("kEmpty"),j=P("kEof");function D(ee,J){if(J!=null&&l(J,"options"),(J==null?void 0:J.signal)!=null&&o(J.signal,"options.signal"),p(ee)&&!g(ee))throw new t("stream",ee,"must be writable");const oe=h(this,ee);return J!=null&&J.signal&&f(J.signal,oe),oe}function I(ee,J){if(typeof ee!="function")throw new r("fn",["Function","AsyncFunction"],ee);J!=null&&l(J,"options"),(J==null?void 0:J.signal)!=null&&o(J.signal,"options.signal");let oe=1;(J==null?void 0:J.concurrency)!=null&&(oe=w(J.concurrency));let me=oe-1;return(J==null?void 0:J.highWaterMark)!=null&&(me=w(J.highWaterMark)),s(oe,"options.concurrency",1),s(me,"options.highWaterMark",0),me+=oe,(async function*(){const de=jo().AbortSignalAny([J==null?void 0:J.signal].filter(b)),ge=this,ce=[],Ce={signal:de};let Ee,Me,he=!1,Ae=0;function De(){he=!0,Z()}function Z(){Ae-=1,ie()}function ie(){Me&&!he&&Ae<oe&&ce.length<me&&(Me(),Me=null)}async function Te(){try{for await(let Ue of ge){if(he)return;if(de.aborted)throw new a;try{if(Ue=ee(Ue,Ce),Ue===O)continue;Ue=M(Ue)}catch(ne){Ue=T(ne)}Ae+=1,A(Ue,Z,De),ce.push(Ue),Ee&&(Ee(),Ee=null),!he&&(ce.length>=me||Ae>=oe)&&await new C(ne=>{Me=ne})}ce.push(j)}catch(Ue){const ne=T(Ue);A(ne,Z,De),ce.push(ne)}finally{he=!0,Ee&&(Ee(),Ee=null)}}Te();try{for(;;){for(;ce.length>0;){const Ue=await ce[0];if(Ue===j)return;if(de.aborted)throw new a;Ue!==O&&(yield Ue),ce.shift(),ie()}await new C(Ue=>{Ee=Ue})}}finally{he=!0,Me&&(Me(),Me=null)}}).call(this)}function q(ee=void 0){return ee!=null&&l(ee,"options"),(ee==null?void 0:ee.signal)!=null&&o(ee.signal,"options.signal"),(async function*(){let oe=0;for await(const be of this){var me;if(ee!=null&&(me=ee.signal)!==null&&me!==void 0&&me.aborted)throw new a({cause:ee.signal.reason});yield[oe++,be]}}).call(this)}async function $(ee,J=void 0){for await(const oe of F.call(this,ee,J))return!0;return!1}async function X(ee,J=void 0){if(typeof ee!="function")throw new r("fn",["Function","AsyncFunction"],ee);return!await $.call(this,async(...oe)=>!await ee(...oe),J)}async function N(ee,J){for await(const oe of F.call(this,ee,J))return oe}async function Q(ee,J){if(typeof ee!="function")throw new r("fn",["Function","AsyncFunction"],ee);async function oe(me,be){return await ee(me,be),O}for await(const me of I.call(this,oe,J));}function F(ee,J){if(typeof ee!="function")throw new r("fn",["Function","AsyncFunction"],ee);async function oe(me,be){return await ee(me,be)?me:O}return I.call(this,oe,J)}class L extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Y(ee,J,oe){var me;if(typeof ee!="function")throw new r("reducer",["Function","AsyncFunction"],ee);oe!=null&&l(oe,"options"),(oe==null?void 0:oe.signal)!=null&&o(oe.signal,"options.signal");let be=arguments.length>1;if(oe!=null&&(me=oe.signal)!==null&&me!==void 0&&me.aborted){const Ee=new a(void 0,{cause:oe.signal.reason});throw this.once("error",()=>{}),await d(this.destroy(Ee)),Ee}const de=new e,ge=de.signal;if(oe!=null&&oe.signal){const Ee={once:!0,[u]:this,[c]:!0};oe.signal.addEventListener("abort",()=>de.abort(),Ee)}let ce=!1;try{for await(const Ee of this){var Ce;if(ce=!0,oe!=null&&(Ce=oe.signal)!==null&&Ce!==void 0&&Ce.aborted)throw new a;be?J=await ee(J,Ee,{signal:ge}):(J=Ee,be=!0)}if(!ce&&!be)throw new L}finally{de.abort()}return J}async function ae(ee){ee!=null&&l(ee,"options"),(ee==null?void 0:ee.signal)!=null&&o(ee.signal,"options.signal");const J=[];for await(const me of this){var oe;if(ee!=null&&(oe=ee.signal)!==null&&oe!==void 0&&oe.aborted)throw new a(void 0,{cause:ee.signal.reason});y(J,me)}return J}function re(ee,J){const oe=I.call(this,ee,J);return(async function*(){for await(const be of oe)yield*be}).call(this)}function H(ee){if(ee=x(ee),S(ee))return 0;if(ee<0)throw new n("number",">= 0",ee);return ee}function se(ee,J=void 0){return J!=null&&l(J,"options"),(J==null?void 0:J.signal)!=null&&o(J.signal,"options.signal"),ee=H(ee),(async function*(){var me;if(J!=null&&(me=J.signal)!==null&&me!==void 0&&me.aborted)throw new a;for await(const de of this){var be;if(J!=null&&(be=J.signal)!==null&&be!==void 0&&be.aborted)throw new a;ee--<=0&&(yield de)}}).call(this)}function le(ee,J=void 0){return J!=null&&l(J,"options"),(J==null?void 0:J.signal)!=null&&o(J.signal,"options.signal"),ee=H(ee),(async function*(){var me;if(J!=null&&(me=J.signal)!==null&&me!==void 0&&me.aborted)throw new a;for await(const de of this){var be;if(J!=null&&(be=J.signal)!==null&&be!==void 0&&be.aborted)throw new a;if(ee-- >0&&(yield de),ee<=0)return}}).call(this)}return IO.streamReturningOperators={asIndexedPairs:m(q,"readable.asIndexedPairs will be removed in a future version."),drop:se,filter:F,flatMap:re,map:I,take:le,compose:D},IO.promiseReturningOperators={every:X,forEach:Q,reduce:Y,toArray:ae,some:$,find:N},IO}var SU,cue;function HEe(){if(cue)return SU;cue=1;const{ArrayPrototypePop:e,Promise:t}=ki(),{isIterable:r,isNodeStream:i,isWebStream:n}=tg(),{pipelineImpl:a}=HG(),{finished:o}=zv();$Ee();function s(...l){return new t((u,c)=>{let d,h;const f=l[l.length-1];if(f&&typeof f=="object"&&!i(f)&&!r(f)&&!n(f)){const g=e(l);d=g.signal,h=g.end}a(l,(g,p)=>{g?c(g):u(p)},{signal:d,end:h})})}return SU={finished:o,pipeline:s},SU}var due;function $Ee(){if(due)return Z4.exports;due=1;const{Buffer:e}=jv(),{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:i}=ki(),{promisify:{custom:n}}=jo(),{streamReturningOperators:a,promiseReturningOperators:o}=XTt(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=po(),l=GEe(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:c}=CI(),{pipeline:d}=HG(),{destroyer:h}=Lw(),f=zv(),g=HEe(),p=tg(),m=Z4.exports=WG().Stream;m.isDestroyed=p.isDestroyed,m.isDisturbed=p.isDisturbed,m.isErrored=p.isErrored,m.isReadable=p.isReadable,m.isWritable=p.isWritable,m.Readable=EI();for(const b of r(a)){let x=function(...S){if(new.target)throw s();return m.Readable.from(i(w,this,S))};const w=a[b];t(x,"name",{__proto__:null,value:w.name}),t(x,"length",{__proto__:null,value:w.length}),t(m.Readable.prototype,b,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}for(const b of r(o)){let x=function(...S){if(new.target)throw s();return i(w,this,S)};const w=o[b];t(x,"name",{__proto__:null,value:w.name}),t(x,"length",{__proto__:null,value:w.length}),t(m.Readable.prototype,b,{__proto__:null,value:x,enumerable:!1,configurable:!0,writable:!0})}m.Writable=GG(),m.Duplex=Qm(),m.Transform=qEe(),m.PassThrough=WEe(),m.pipeline=d;const{addAbortSignal:y}=SI();return m.addAbortSignal=y,m.finished=f,m.destroy=h,m.compose=l,m.setDefaultHighWaterMark=u,m.getDefaultHighWaterMark=c,t(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return g}}),t(d,n,{__proto__:null,enumerable:!0,get(){return g.pipeline}}),t(f,n,{__proto__:null,enumerable:!0,get(){return g.finished}}),m.Stream=m,m._isUint8Array=function(w){return w instanceof Uint8Array},m._uint8ArrayToBuffer=function(w){return e.from(w.buffer,w.byteOffset,w.byteLength)},Z4.exports}var hue;function ER(){return hue||(hue=1,function(e){const t=$Ee(),r=HEe(),i=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=i,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(J4)),J4.exports}var Ll={},CU={},hm={},jy={},EU,fue;function Fw(){return fue||(fue=1,EU=TypeError),EU}const YTt=vb(pPt);var MU,pue;function MI(){if(pue)return MU;pue=1;var e=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&typeof t.get=="function"?t.get:null,i=e&&Map.prototype.forEach,n=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=n&&a&&typeof a.get=="function"?a.get:null,s=n&&Set.prototype.forEach,l=typeof WeakMap=="function"&&WeakMap.prototype,u=l?WeakMap.prototype.has:null,c=typeof WeakSet=="function"&&WeakSet.prototype,d=c?WeakSet.prototype.has:null,h=typeof WeakRef=="function"&&WeakRef.prototype,f=h?WeakRef.prototype.deref:null,g=Boolean.prototype.valueOf,p=Object.prototype.toString,m=Function.prototype.toString,y=String.prototype.match,b=String.prototype.slice,w=String.prototype.replace,x=String.prototype.toUpperCase,S=String.prototype.toLowerCase,C=RegExp.prototype.test,T=Array.prototype.concat,M=Array.prototype.join,A=Array.prototype.slice,P=Math.floor,O=typeof BigInt=="function"?BigInt.prototype.valueOf:null,j=Object.getOwnPropertySymbols,D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,I=typeof Symbol=="function"&&typeof Symbol.iterator=="object",q=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===I||!0)?Symbol.toStringTag:null,$=Object.prototype.propertyIsEnumerable,X=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Pe){return Pe.__proto__}:null);function N(Pe,Le){if(Pe===1/0||Pe===-1/0||Pe!==Pe||Pe&&Pe>-1e3&&Pe<1e3||C.call(/e/,Le))return Le;var ht=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Pe=="number"){var Be=Pe<0?-P(-Pe):P(Pe);if(Be!==Pe){var Ye=String(Be),$e=b.call(Le,Ye.length+1);return w.call(Ye,ht,"$&_")+"."+w.call(w.call($e,/([0-9]{3})/g,"$&_"),/_$/,"")}}return w.call(Le,ht,"$&_")}var Q=YTt,F=Q.custom,L=ge(F)?F:null,Y={__proto__:null,double:'"',single:"'"},ae={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};MU=function Pe(Le,ht,Be,Ye){var $e=ht||{};if(Ee($e,"quoteStyle")&&!Ee(Y,$e.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ee($e,"maxStringLength")&&(typeof $e.maxStringLength=="number"?$e.maxStringLength<0&&$e.maxStringLength!==1/0:$e.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var mt=Ee($e,"customInspect")?$e.customInspect:!0;if(typeof mt!="boolean"&&mt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ee($e,"indent")&&$e.indent!==null&&$e.indent!=="	"&&!(parseInt($e.indent,10)===$e.indent&&$e.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ee($e,"numericSeparator")&&typeof $e.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var It=$e.numericSeparator;if(typeof Le>"u")return"undefined";if(Le===null)return"null";if(typeof Le=="boolean")return Le?"true":"false";if(typeof Le=="string")return K(Le,$e);if(typeof Le=="number"){if(Le===0)return 1/0/Le>0?"0":"-0";var qt=String(Le);return It?N(Le,qt):qt}if(typeof Le=="bigint"){var mr=String(Le)+"n";return It?N(Le,mr):mr}var Rr=typeof $e.depth>"u"?5:$e.depth;if(typeof Be>"u"&&(Be=0),Be>=Rr&&Rr>0&&typeof Le=="object")return le(Le)?"[Array]":"[Object]";var ye=Fe($e,Be);if(typeof Ye>"u")Ye=[];else if(Ae(Ye,Le)>=0)return"[Circular]";function xe(Vt,dr,Se){if(dr&&(Ye=A.call(Ye),Ye.push(dr)),Se){var Ge={depth:$e.depth};return Ee($e,"quoteStyle")&&(Ge.quoteStyle=$e.quoteStyle),Pe(Vt,Ge,Be+1,Ye)}return Pe(Vt,$e,Be+1,Ye)}if(typeof Le=="function"&&!J(Le)){var He=he(Le),Xe=Ze(Le,xe);return"[Function"+(He?": "+He:" (anonymous)")+"]"+(Xe.length>0?" { "+M.call(Xe,", ")+" }":"")}if(ge(Le)){var pt=I?w.call(String(Le),/^(Symbol\(.*\))_[^)]*$/,"$1"):D.call(Le);return typeof Le=="object"&&!I?U(pt):pt}if(ne(Le)){for(var Lt="<"+S.call(String(Le.nodeName)),nr=Le.attributes||[],Xr=0;Xr<nr.length;Xr++)Lt+=" "+nr[Xr].name+"="+re(H(nr[Xr].value),"double",$e);return Lt+=">",Le.childNodes&&Le.childNodes.length&&(Lt+="..."),Lt+="</"+S.call(String(Le.nodeName))+">",Lt}if(le(Le)){if(Le.length===0)return"[]";var we=Ze(Le,xe);return ye&&!Re(we)?"["+et(we,ye)+"]":"[ "+M.call(we,", ")+" ]"}if(oe(Le)){var We=Ze(Le,xe);return!("cause"in Error.prototype)&&"cause"in Le&&!$.call(Le,"cause")?"{ ["+String(Le)+"] "+M.call(T.call("[cause]: "+xe(Le.cause),We),", ")+" }":We.length===0?"["+String(Le)+"]":"{ ["+String(Le)+"] "+M.call(We,", ")+" }"}if(typeof Le=="object"&&mt){if(L&&typeof Le[L]=="function"&&Q)return Q(Le,{depth:Rr-Be});if(mt!=="symbol"&&typeof Le.inspect=="function")return Le.inspect()}if(De(Le)){var tt=[];return i&&i.call(Le,function(Vt,dr){tt.push(xe(dr,Le,!0)+" => "+xe(Vt,Le))}),ve("Map",r.call(Le),tt,ye)}if(Te(Le)){var qe=[];return s&&s.call(Le,function(Vt){qe.push(xe(Vt,Le))}),ve("Set",o.call(Le),qe,ye)}if(Z(Le))return te("WeakMap");if(Ue(Le))return te("WeakSet");if(ie(Le))return te("WeakRef");if(be(Le))return U(xe(Number(Le)));if(ce(Le))return U(xe(O.call(Le)));if(de(Le))return U(g.call(Le));if(me(Le))return U(xe(String(Le)));if(typeof window<"u"&&Le===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Le===globalThis||typeof T_<"u"&&Le===T_)return"{ [object globalThis] }";if(!ee(Le)&&!J(Le)){var nt=Ze(Le,xe),Tt=X?X(Le)===Object.prototype:Le instanceof Object||Le.constructor===Object,Ft=Le instanceof Object?"":"null prototype",$t=!Tt&&q&&Object(Le)===Le&&q in Le?b.call(Me(Le),8,-1):Ft?"Object":"",zt=Tt||typeof Le.constructor!="function"?"":Le.constructor.name?Le.constructor.name+" ":"",gr=zt+($t||Ft?"["+M.call(T.call([],$t||[],Ft||[]),": ")+"] ":"");return nt.length===0?gr+"{}":ye?gr+"{"+et(nt,ye)+"}":gr+"{ "+M.call(nt,", ")+" }"}return String(Le)};function re(Pe,Le,ht){var Be=ht.quoteStyle||Le,Ye=Y[Be];return Ye+Pe+Ye}function H(Pe){return w.call(String(Pe),/"/g,"&quot;")}function se(Pe){return!q||!(typeof Pe=="object"&&(q in Pe||typeof Pe[q]<"u"))}function le(Pe){return Me(Pe)==="[object Array]"&&se(Pe)}function ee(Pe){return Me(Pe)==="[object Date]"&&se(Pe)}function J(Pe){return Me(Pe)==="[object RegExp]"&&se(Pe)}function oe(Pe){return Me(Pe)==="[object Error]"&&se(Pe)}function me(Pe){return Me(Pe)==="[object String]"&&se(Pe)}function be(Pe){return Me(Pe)==="[object Number]"&&se(Pe)}function de(Pe){return Me(Pe)==="[object Boolean]"&&se(Pe)}function ge(Pe){if(I)return Pe&&typeof Pe=="object"&&Pe instanceof Symbol;if(typeof Pe=="symbol")return!0;if(!Pe||typeof Pe!="object"||!D)return!1;try{return D.call(Pe),!0}catch{}return!1}function ce(Pe){if(!Pe||typeof Pe!="object"||!O)return!1;try{return O.call(Pe),!0}catch{}return!1}var Ce=Object.prototype.hasOwnProperty||function(Pe){return Pe in this};function Ee(Pe,Le){return Ce.call(Pe,Le)}function Me(Pe){return p.call(Pe)}function he(Pe){if(Pe.name)return Pe.name;var Le=y.call(m.call(Pe),/^function\s*([\w$]+)/);return Le?Le[1]:null}function Ae(Pe,Le){if(Pe.indexOf)return Pe.indexOf(Le);for(var ht=0,Be=Pe.length;ht<Be;ht++)if(Pe[ht]===Le)return ht;return-1}function De(Pe){if(!r||!Pe||typeof Pe!="object")return!1;try{r.call(Pe);try{o.call(Pe)}catch{return!0}return Pe instanceof Map}catch{}return!1}function Z(Pe){if(!u||!Pe||typeof Pe!="object")return!1;try{u.call(Pe,u);try{d.call(Pe,d)}catch{return!0}return Pe instanceof WeakMap}catch{}return!1}function ie(Pe){if(!f||!Pe||typeof Pe!="object")return!1;try{return f.call(Pe),!0}catch{}return!1}function Te(Pe){if(!o||!Pe||typeof Pe!="object")return!1;try{o.call(Pe);try{r.call(Pe)}catch{return!0}return Pe instanceof Set}catch{}return!1}function Ue(Pe){if(!d||!Pe||typeof Pe!="object")return!1;try{d.call(Pe,d);try{u.call(Pe,u)}catch{return!0}return Pe instanceof WeakSet}catch{}return!1}function ne(Pe){return!Pe||typeof Pe!="object"?!1:typeof HTMLElement<"u"&&Pe instanceof HTMLElement?!0:typeof Pe.nodeName=="string"&&typeof Pe.getAttribute=="function"}function K(Pe,Le){if(Pe.length>Le.maxStringLength){var ht=Pe.length-Le.maxStringLength,Be="... "+ht+" more character"+(ht>1?"s":"");return K(b.call(Pe,0,Le.maxStringLength),Le)+Be}var Ye=ae[Le.quoteStyle||"single"];Ye.lastIndex=0;var $e=w.call(w.call(Pe,Ye,"\\$1"),/[\x00-\x1f]/g,B);return re($e,"single",Le)}function B(Pe){var Le=Pe.charCodeAt(0),ht={8:"b",9:"t",10:"n",12:"f",13:"r"}[Le];return ht?"\\"+ht:"\\x"+(Le<16?"0":"")+x.call(Le.toString(16))}function U(Pe){return"Object("+Pe+")"}function te(Pe){return Pe+" { ? }"}function ve(Pe,Le,ht,Be){var Ye=Be?et(ht,Be):M.call(ht,", ");return Pe+" ("+Le+") {"+Ye+"}"}function Re(Pe){for(var Le=0;Le<Pe.length;Le++)if(Ae(Pe[Le],`
`)>=0)return!1;return!0}function Fe(Pe,Le){var ht;if(Pe.indent==="	")ht="	";else if(typeof Pe.indent=="number"&&Pe.indent>0)ht=M.call(Array(Pe.indent+1)," ");else return null;return{base:ht,prev:M.call(Array(Le+1),ht)}}function et(Pe,Le){if(Pe.length===0)return"";var ht=`
`+Le.prev+Le.base;return ht+M.call(Pe,","+ht)+`
`+Le.prev}function Ze(Pe,Le){var ht=le(Pe),Be=[];if(ht){Be.length=Pe.length;for(var Ye=0;Ye<Pe.length;Ye++)Be[Ye]=Ee(Pe,Ye)?Le(Pe[Ye],Pe):""}var $e=typeof j=="function"?j(Pe):[],mt;if(I){mt={};for(var It=0;It<$e.length;It++)mt["$"+$e[It]]=$e[It]}for(var qt in Pe)Ee(Pe,qt)&&(ht&&String(Number(qt))===qt&&qt<Pe.length||I&&mt["$"+qt]instanceof Symbol||(C.call(/[^\w$]/,qt)?Be.push(Le(qt,Pe)+": "+Le(Pe[qt],Pe)):Be.push(qt+": "+Le(Pe[qt],Pe))));if(typeof j=="function")for(var mr=0;mr<$e.length;mr++)$.call(Pe,$e[mr])&&Be.push("["+Le($e[mr])+"]: "+Le(Pe[$e[mr]],Pe));return Be}return MU}var PU,mue;function KTt(){if(mue)return PU;mue=1;var e=MI(),t=Fw(),r=function(s,l,u){for(var c=s,d;(d=c.next)!=null;c=d)if(d.key===l)return c.next=d.next,u||(d.next=s.next,s.next=d),d},i=function(s,l){if(s){var u=r(s,l);return u&&u.value}},n=function(s,l,u){var c=r(s,l);c?c.value=u:s.next={key:l,next:s.next,value:u}},a=function(s,l){return s?!!r(s,l):!1},o=function(s,l){if(s)return r(s,l,!0)};return PU=function(){var l,u={assert:function(c){if(!u.has(c))throw new t("Side channel does not contain "+e(c))},delete:function(c){var d=l&&l.next,h=o(l,c);return h&&d&&d===h&&(l=void 0),!!h},get:function(c){return i(l,c)},has:function(c){return a(l,c)},set:function(c,d){l||(l={next:void 0}),n(l,c,d)}};return u},PU}var TU,gue;function XEe(){return gue||(gue=1,TU=Object),TU}var AU,vue;function QTt(){return vue||(vue=1,AU=Error),AU}var OU,yue;function JTt(){return yue||(yue=1,OU=EvalError),OU}var RU,bue;function ZTt(){return bue||(bue=1,RU=RangeError),RU}var DU,_ue;function eAt(){return _ue||(_ue=1,DU=ReferenceError),DU}var IU,wue;function tAt(){return wue||(wue=1,IU=SyntaxError),IU}var jU,xue;function rAt(){return xue||(xue=1,jU=URIError),jU}var zU,Sue;function iAt(){return Sue||(Sue=1,zU=Math.abs),zU}var BU,Cue;function nAt(){return Cue||(Cue=1,BU=Math.floor),BU}var LU,Eue;function aAt(){return Eue||(Eue=1,LU=Math.max),LU}var FU,Mue;function oAt(){return Mue||(Mue=1,FU=Math.min),FU}var NU,Pue;function sAt(){return Pue||(Pue=1,NU=Math.pow),NU}var UU,Tue;function lAt(){return Tue||(Tue=1,UU=Math.round),UU}var VU,Aue;function uAt(){return Aue||(Aue=1,VU=Number.isNaN||function(t){return t!==t}),VU}var kU,Oue;function cAt(){if(Oue)return kU;Oue=1;var e=uAt();return kU=function(r){return e(r)||r===0?r:r<0?-1:1},kU}var qU,Rue;function dAt(){return Rue||(Rue=1,qU=Object.getOwnPropertyDescriptor),qU}var WU,Due;function YEe(){if(Due)return WU;Due=1;var e=dAt();if(e)try{e([],"length")}catch{e=null}return WU=e,WU}var GU,Iue;function hAt(){if(Iue)return GU;Iue=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return GU=e,GU}var HU,jue;function fAt(){return jue||(jue=1,HU=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;t[r]=n;for(var a in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==n||s.enumerable!==!0)return!1}return!0}),HU}var $U,zue;function pAt(){if(zue)return $U;zue=1;var e=typeof Symbol<"u"&&Symbol,t=fAt();return $U=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},$U}var XU,Bue;function KEe(){return Bue||(Bue=1,XU=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),XU}var YU,Lue;function QEe(){if(Lue)return YU;Lue=1;var e=XEe();return YU=e.getPrototypeOf||null,YU}var KU,Fue;function mAt(){if(Fue)return KU;Fue=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,i="[object Function]",n=function(l,u){for(var c=[],d=0;d<l.length;d+=1)c[d]=l[d];for(var h=0;h<u.length;h+=1)c[h+l.length]=u[h];return c},a=function(l,u){for(var c=[],d=u,h=0;d<l.length;d+=1,h+=1)c[h]=l[d];return c},o=function(s,l){for(var u="",c=0;c<s.length;c+=1)u+=s[c],c+1<s.length&&(u+=l);return u};return KU=function(l){var u=this;if(typeof u!="function"||t.apply(u)!==i)throw new TypeError(e+u);for(var c=a(arguments,1),d,h=function(){if(this instanceof d){var y=u.apply(this,n(c,arguments));return Object(y)===y?y:this}return u.apply(l,n(c,arguments))},f=r(0,u.length-c.length),g=[],p=0;p<f;p++)g[p]="$"+p;if(d=Function("binder","return function ("+o(g,",")+"){ return binder.apply(this,arguments); }")(h),u.prototype){var m=function(){};m.prototype=u.prototype,d.prototype=new m,m.prototype=null}return d},KU}var QU,Nue;function PI(){if(Nue)return QU;Nue=1;var e=mAt();return QU=Function.prototype.bind||e,QU}var JU,Uue;function $G(){return Uue||(Uue=1,JU=Function.prototype.call),JU}var ZU,Vue;function JEe(){return Vue||(Vue=1,ZU=Function.prototype.apply),ZU}var e5,kue;function gAt(){return kue||(kue=1,e5=typeof Reflect<"u"&&Reflect&&Reflect.apply),e5}var t5,que;function vAt(){if(que)return t5;que=1;var e=PI(),t=JEe(),r=$G(),i=gAt();return t5=i||e.call(r,t),t5}var r5,Wue;function ZEe(){if(Wue)return r5;Wue=1;var e=PI(),t=Fw(),r=$G(),i=vAt();return r5=function(a){if(a.length<1||typeof a[0]!="function")throw new t("a function is required");return i(e,r,a)},r5}var i5,Gue;function yAt(){if(Gue)return i5;Gue=1;var e=ZEe(),t=YEe(),r;try{r=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var i=!!r&&t&&t(Object.prototype,"__proto__"),n=Object,a=n.getPrototypeOf;return i5=i&&typeof i.get=="function"?e([i.get]):typeof a=="function"?function(s){return a(s==null?s:n(s))}:!1,i5}var n5,Hue;function bAt(){if(Hue)return n5;Hue=1;var e=KEe(),t=QEe(),r=yAt();return n5=e?function(n){return e(n)}:t?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return t(n)}:r?function(n){return r(n)}:null,n5}var a5,$ue;function _At(){if($ue)return a5;$ue=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=PI();return a5=r.call(e,t),a5}var o5,Xue;function XG(){if(Xue)return o5;Xue=1;var e,t=XEe(),r=QTt(),i=JTt(),n=ZTt(),a=eAt(),o=tAt(),s=Fw(),l=rAt(),u=iAt(),c=nAt(),d=aAt(),h=oAt(),f=sAt(),g=lAt(),p=cAt(),m=Function,y=function(J){try{return m('"use strict"; return ('+J+").constructor;")()}catch{}},b=YEe(),w=hAt(),x=function(){throw new s},S=b?function(){try{return arguments.callee,x}catch{try{return b(arguments,"callee").get}catch{return x}}}():x,C=pAt()(),T=bAt(),M=QEe(),A=KEe(),P=JEe(),O=$G(),j={},D=typeof Uint8Array>"u"||!T?e:T(Uint8Array),I={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":C&&T?T([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":j,"%AsyncGenerator%":j,"%AsyncGeneratorFunction%":j,"%AsyncIteratorPrototype%":j,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?e:Float16Array,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":m,"%GeneratorFunction%":j,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":C&&T?T(T([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!C||!T?e:T(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":n,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!C||!T?e:T(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":C&&T?T(""[Symbol.iterator]()):e,"%Symbol%":C?Symbol:e,"%SyntaxError%":o,"%ThrowTypeError%":S,"%TypedArray%":D,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":O,"%Function.prototype.apply%":P,"%Object.defineProperty%":w,"%Object.getPrototypeOf%":M,"%Math.abs%":u,"%Math.floor%":c,"%Math.max%":d,"%Math.min%":h,"%Math.pow%":f,"%Math.round%":g,"%Math.sign%":p,"%Reflect.getPrototypeOf%":A};if(T)try{null.error}catch(J){var q=T(T(J));I["%Error.prototype%"]=q}var $=function J(oe){var me;if(oe==="%AsyncFunction%")me=y("async function () {}");else if(oe==="%GeneratorFunction%")me=y("function* () {}");else if(oe==="%AsyncGeneratorFunction%")me=y("async function* () {}");else if(oe==="%AsyncGenerator%"){var be=J("%AsyncGeneratorFunction%");be&&(me=be.prototype)}else if(oe==="%AsyncIteratorPrototype%"){var de=J("%AsyncGenerator%");de&&T&&(me=T(de.prototype))}return I[oe]=me,me},X={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},N=PI(),Q=_At(),F=N.call(O,Array.prototype.concat),L=N.call(P,Array.prototype.splice),Y=N.call(O,String.prototype.replace),ae=N.call(O,String.prototype.slice),re=N.call(O,RegExp.prototype.exec),H=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,se=/\\(\\)?/g,le=function(oe){var me=ae(oe,0,1),be=ae(oe,-1);if(me==="%"&&be!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(be==="%"&&me!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var de=[];return Y(oe,H,function(ge,ce,Ce,Ee){de[de.length]=Ce?Y(Ee,se,"$1"):ce||ge}),de},ee=function(oe,me){var be=oe,de;if(Q(X,be)&&(de=X[be],be="%"+de[0]+"%"),Q(I,be)){var ge=I[be];if(ge===j&&(ge=$(be)),typeof ge>"u"&&!me)throw new s("intrinsic "+oe+" exists, but is not available. Please file an issue!");return{alias:de,name:be,value:ge}}throw new o("intrinsic "+oe+" does not exist!")};return o5=function(oe,me){if(typeof oe!="string"||oe.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof me!="boolean")throw new s('"allowMissing" argument must be a boolean');if(re(/^%?[^%]*%?$/,oe)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var be=le(oe),de=be.length>0?be[0]:"",ge=ee("%"+de+"%",me),ce=ge.name,Ce=ge.value,Ee=!1,Me=ge.alias;Me&&(de=Me[0],L(be,F([0,1],Me)));for(var he=1,Ae=!0;he<be.length;he+=1){var De=be[he],Z=ae(De,0,1),ie=ae(De,-1);if((Z==='"'||Z==="'"||Z==="`"||ie==='"'||ie==="'"||ie==="`")&&Z!==ie)throw new o("property names with quotes must have matching quotes");if((De==="constructor"||!Ae)&&(Ee=!0),de+="."+De,ce="%"+de+"%",Q(I,ce))Ce=I[ce];else if(Ce!=null){if(!(De in Ce)){if(!me)throw new s("base intrinsic for "+oe+" exists, but the property is not available.");return}if(b&&he+1>=be.length){var Te=b(Ce,De);Ae=!!Te,Ae&&"get"in Te&&!("originalValue"in Te.get)?Ce=Te.get:Ce=Ce[De]}else Ae=Q(Ce,De),Ce=Ce[De];Ae&&!Ee&&(I[ce]=Ce)}}return Ce},o5}var s5,Yue;function eMe(){if(Yue)return s5;Yue=1;var e=XG(),t=ZEe(),r=t([e("%String.prototype.indexOf%")]);return s5=function(n,a){var o=e(n,!!a);return typeof o=="function"&&r(n,".prototype.")>-1?t([o]):o},s5}var l5,Kue;function tMe(){if(Kue)return l5;Kue=1;var e=XG(),t=eMe(),r=MI(),i=Fw(),n=e("%Map%",!0),a=t("Map.prototype.get",!0),o=t("Map.prototype.set",!0),s=t("Map.prototype.has",!0),l=t("Map.prototype.delete",!0),u=t("Map.prototype.size",!0);return l5=!!n&&function(){var d,h={assert:function(f){if(!h.has(f))throw new i("Side channel does not contain "+r(f))},delete:function(f){if(d){var g=l(d,f);return u(d)===0&&(d=void 0),g}return!1},get:function(f){if(d)return a(d,f)},has:function(f){return d?s(d,f):!1},set:function(f,g){d||(d=new n),o(d,f,g)}};return h},l5}var u5,Que;function wAt(){if(Que)return u5;Que=1;var e=XG(),t=eMe(),r=MI(),i=tMe(),n=Fw(),a=e("%WeakMap%",!0),o=t("WeakMap.prototype.get",!0),s=t("WeakMap.prototype.set",!0),l=t("WeakMap.prototype.has",!0),u=t("WeakMap.prototype.delete",!0);return u5=a?function(){var d,h,f={assert:function(g){if(!f.has(g))throw new n("Side channel does not contain "+r(g))},delete:function(g){if(a&&g&&(typeof g=="object"||typeof g=="function")){if(d)return u(d,g)}else if(i&&h)return h.delete(g);return!1},get:function(g){return a&&g&&(typeof g=="object"||typeof g=="function")&&d?o(d,g):h&&h.get(g)},has:function(g){return a&&g&&(typeof g=="object"||typeof g=="function")&&d?l(d,g):!!h&&h.has(g)},set:function(g,p){a&&g&&(typeof g=="object"||typeof g=="function")?(d||(d=new a),s(d,g,p)):i&&(h||(h=i()),h.set(g,p))}};return f}:i,u5}var c5,Jue;function xAt(){if(Jue)return c5;Jue=1;var e=Fw(),t=MI(),r=KTt(),i=tMe(),n=wAt(),a=n||i||r;return c5=function(){var s,l={assert:function(u){if(!l.has(u))throw new e("Side channel does not contain "+t(u))},delete:function(u){return!!s&&s.delete(u)},get:function(u){return s&&s.get(u)},has:function(u){return!!s&&s.has(u)},set:function(u,c){s||(s=a()),s.set(u,c)}};return l},c5}var d5,Zue;function YG(){if(Zue)return d5;Zue=1;var e=String.prototype.replace,t=/%20/g,r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return d5={default:r.RFC3986,formatters:{RFC1738:function(i){return e.call(i,t,"+")},RFC3986:function(i){return String(i)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986},d5}var h5,ece;function rMe(){if(ece)return h5;ece=1;var e=YG(),t=Object.prototype.hasOwnProperty,r=Array.isArray,i=function(){for(var p=[],m=0;m<256;++m)p.push("%"+((m<16?"0":"")+m.toString(16)).toUpperCase());return p}(),n=function(m){for(;m.length>1;){var y=m.pop(),b=y.obj[y.prop];if(r(b)){for(var w=[],x=0;x<b.length;++x)typeof b[x]<"u"&&w.push(b[x]);y.obj[y.prop]=w}}},a=function(m,y){for(var b=y&&y.plainObjects?Object.create(null):{},w=0;w<m.length;++w)typeof m[w]<"u"&&(b[w]=m[w]);return b},o=function p(m,y,b){if(!y)return m;if(typeof y!="object"){if(r(m))m.push(y);else if(m&&typeof m=="object")(b&&(b.plainObjects||b.allowPrototypes)||!t.call(Object.prototype,y))&&(m[y]=!0);else return[m,y];return m}if(!m||typeof m!="object")return[m].concat(y);var w=m;return r(m)&&!r(y)&&(w=a(m,b)),r(m)&&r(y)?(y.forEach(function(x,S){if(t.call(m,S)){var C=m[S];C&&typeof C=="object"&&x&&typeof x=="object"?m[S]=p(C,x,b):m.push(x)}else m[S]=x}),m):Object.keys(y).reduce(function(x,S){var C=y[S];return t.call(x,S)?x[S]=p(x[S],C,b):x[S]=C,x},w)},s=function(m,y){return Object.keys(y).reduce(function(b,w){return b[w]=y[w],b},m)},l=function(p,m,y){var b=p.replace(/\+/g," ");if(y==="iso-8859-1")return b.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(b)}catch{return b}},u=function(m,y,b,w,x){if(m.length===0)return m;var S=m;if(typeof m=="symbol"?S=Symbol.prototype.toString.call(m):typeof m!="string"&&(S=String(m)),b==="iso-8859-1")return escape(S).replace(/%u[0-9a-f]{4}/gi,function(A){return"%26%23"+parseInt(A.slice(2),16)+"%3B"});for(var C="",T=0;T<S.length;++T){var M=S.charCodeAt(T);if(M===45||M===46||M===95||M===126||M>=48&&M<=57||M>=65&&M<=90||M>=97&&M<=122||x===e.RFC1738&&(M===40||M===41)){C+=S.charAt(T);continue}if(M<128){C=C+i[M];continue}if(M<2048){C=C+(i[192|M>>6]+i[128|M&63]);continue}if(M<55296||M>=57344){C=C+(i[224|M>>12]+i[128|M>>6&63]+i[128|M&63]);continue}T+=1,M=65536+((M&1023)<<10|S.charCodeAt(T)&1023),C+=i[240|M>>18]+i[128|M>>12&63]+i[128|M>>6&63]+i[128|M&63]}return C},c=function(m){for(var y=[{obj:{o:m},prop:"o"}],b=[],w=0;w<y.length;++w)for(var x=y[w],S=x.obj[x.prop],C=Object.keys(S),T=0;T<C.length;++T){var M=C[T],A=S[M];typeof A=="object"&&A!==null&&b.indexOf(A)===-1&&(y.push({obj:S,prop:M}),b.push(A))}return n(y),m},d=function(m){return Object.prototype.toString.call(m)==="[object RegExp]"},h=function(m){return!m||typeof m!="object"?!1:!!(m.constructor&&m.constructor.isBuffer&&m.constructor.isBuffer(m))},f=function(m,y){return[].concat(m,y)},g=function(m,y){if(r(m)){for(var b=[],w=0;w<m.length;w+=1)b.push(y(m[w]));return b}return y(m)};return h5={arrayToObject:a,assign:s,combine:f,compact:c,decode:l,encode:u,isBuffer:h,isRegExp:d,maybeMap:g,merge:o},h5}var f5,tce;function SAt(){if(tce)return f5;tce=1;var e=xAt(),t=rMe(),r=YG(),i=Object.prototype.hasOwnProperty,n={brackets:function(m){return m+"[]"},comma:"comma",indices:function(m,y){return m+"["+y+"]"},repeat:function(m){return m}},a=Array.isArray,o=Array.prototype.push,s=function(p,m){o.apply(p,a(m)?m:[m])},l=Date.prototype.toISOString,u=r.default,c={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:t.encode,encodeValuesOnly:!1,format:u,formatter:r.formatters[u],indices:!1,serializeDate:function(m){return l.call(m)},skipNulls:!1,strictNullHandling:!1},d=function(m){return typeof m=="string"||typeof m=="number"||typeof m=="boolean"||typeof m=="symbol"||typeof m=="bigint"},h={},f=function p(m,y,b,w,x,S,C,T,M,A,P,O,j,D,I,q){for(var $=m,X=q,N=0,Q=!1;(X=X.get(h))!==void 0&&!Q;){var F=X.get(m);if(N+=1,typeof F<"u"){if(F===N)throw new RangeError("Cyclic object value");Q=!0}typeof X.get(h)>"u"&&(N=0)}if(typeof T=="function"?$=T(y,$):$ instanceof Date?$=P($):b==="comma"&&a($)&&($=t.maybeMap($,function(me){return me instanceof Date?P(me):me})),$===null){if(x)return C&&!D?C(y,c.encoder,I,"key",O):y;$=""}if(d($)||t.isBuffer($)){if(C){var L=D?y:C(y,c.encoder,I,"key",O);return[j(L)+"="+j(C($,c.encoder,I,"value",O))]}return[j(y)+"="+j(String($))]}var Y=[];if(typeof $>"u")return Y;var ae;if(b==="comma"&&a($))D&&C&&($=t.maybeMap($,C)),ae=[{value:$.length>0?$.join(",")||null:void 0}];else if(a(T))ae=T;else{var re=Object.keys($);ae=M?re.sort(M):re}for(var H=w&&a($)&&$.length===1?y+"[]":y,se=0;se<ae.length;++se){var le=ae[se],ee=typeof le=="object"&&typeof le.value<"u"?le.value:$[le];if(!(S&&ee===null)){var J=a($)?typeof b=="function"?b(H,le):H:H+(A?"."+le:"["+le+"]");q.set(m,N);var oe=e();oe.set(h,q),s(Y,p(ee,J,b,w,x,S,b==="comma"&&D&&a($)?null:C,T,M,A,P,O,j,D,I,oe))}}return Y},g=function(m){if(!m)return c;if(m.encoder!==null&&typeof m.encoder<"u"&&typeof m.encoder!="function")throw new TypeError("Encoder has to be a function.");var y=m.charset||c.charset;if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var b=r.default;if(typeof m.format<"u"){if(!i.call(r.formatters,m.format))throw new TypeError("Unknown format option provided.");b=m.format}var w=r.formatters[b],x=c.filter;return(typeof m.filter=="function"||a(m.filter))&&(x=m.filter),{addQueryPrefix:typeof m.addQueryPrefix=="boolean"?m.addQueryPrefix:c.addQueryPrefix,allowDots:typeof m.allowDots>"u"?c.allowDots:!!m.allowDots,charset:y,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:c.charsetSentinel,delimiter:typeof m.delimiter>"u"?c.delimiter:m.delimiter,encode:typeof m.encode=="boolean"?m.encode:c.encode,encoder:typeof m.encoder=="function"?m.encoder:c.encoder,encodeValuesOnly:typeof m.encodeValuesOnly=="boolean"?m.encodeValuesOnly:c.encodeValuesOnly,filter:x,format:b,formatter:w,serializeDate:typeof m.serializeDate=="function"?m.serializeDate:c.serializeDate,skipNulls:typeof m.skipNulls=="boolean"?m.skipNulls:c.skipNulls,sort:typeof m.sort=="function"?m.sort:null,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:c.strictNullHandling}};return f5=function(p,m){var y=p,b=g(m),w,x;typeof b.filter=="function"?(x=b.filter,y=x("",y)):a(b.filter)&&(x=b.filter,w=x);var S=[];if(typeof y!="object"||y===null)return"";var C;m&&m.arrayFormat in n?C=m.arrayFormat:m&&"indices"in m?C=m.indices?"indices":"repeat":C="indices";var T=n[C];if(m&&"commaRoundTrip"in m&&typeof m.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var M=T==="comma"&&m&&m.commaRoundTrip;w||(w=Object.keys(y)),b.sort&&w.sort(b.sort);for(var A=e(),P=0;P<w.length;++P){var O=w[P];b.skipNulls&&y[O]===null||s(S,f(y[O],O,T,M,b.strictNullHandling,b.skipNulls,b.encode?b.encoder:null,b.filter,b.sort,b.allowDots,b.serializeDate,b.format,b.formatter,b.encodeValuesOnly,b.charset,A))}var j=S.join(b.delimiter),D=b.addQueryPrefix===!0?"?":"";return b.charsetSentinel&&(b.charset==="iso-8859-1"?D+="utf8=%26%2310003%3B&":D+="utf8=%E2%9C%93&"),j.length>0?D+j:""},f5}var p5,rce;function CAt(){if(rce)return p5;rce=1;var e=rMe(),t=Object.prototype.hasOwnProperty,r=Array.isArray,i={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:e.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},n=function(h){return h.replace(/&#(\d+);/g,function(f,g){return String.fromCharCode(parseInt(g,10))})},a=function(h,f){return h&&typeof h=="string"&&f.comma&&h.indexOf(",")>-1?h.split(","):h},o="utf8=%26%2310003%3B",s="utf8=%E2%9C%93",l=function(f,g){var p={__proto__:null},m=g.ignoreQueryPrefix?f.replace(/^\?/,""):f,y=g.parameterLimit===1/0?void 0:g.parameterLimit,b=m.split(g.delimiter,y),w=-1,x,S=g.charset;if(g.charsetSentinel)for(x=0;x<b.length;++x)b[x].indexOf("utf8=")===0&&(b[x]===s?S="utf-8":b[x]===o&&(S="iso-8859-1"),w=x,x=b.length);for(x=0;x<b.length;++x)if(x!==w){var C=b[x],T=C.indexOf("]="),M=T===-1?C.indexOf("="):T+1,A,P;M===-1?(A=g.decoder(C,i.decoder,S,"key"),P=g.strictNullHandling?null:""):(A=g.decoder(C.slice(0,M),i.decoder,S,"key"),P=e.maybeMap(a(C.slice(M+1),g),function(O){return g.decoder(O,i.decoder,S,"value")})),P&&g.interpretNumericEntities&&S==="iso-8859-1"&&(P=n(P)),C.indexOf("[]=")>-1&&(P=r(P)?[P]:P),t.call(p,A)?p[A]=e.combine(p[A],P):p[A]=P}return p},u=function(h,f,g,p){for(var m=p?f:a(f,g),y=h.length-1;y>=0;--y){var b,w=h[y];if(w==="[]"&&g.parseArrays)b=[].concat(m);else{b=g.plainObjects?Object.create(null):{};var x=w.charAt(0)==="["&&w.charAt(w.length-1)==="]"?w.slice(1,-1):w,S=parseInt(x,10);!g.parseArrays&&x===""?b={0:m}:!isNaN(S)&&w!==x&&String(S)===x&&S>=0&&g.parseArrays&&S<=g.arrayLimit?(b=[],b[S]=m):x!=="__proto__"&&(b[x]=m)}m=b}return m},c=function(f,g,p,m){if(f){var y=p.allowDots?f.replace(/\.([^.[]+)/g,"[$1]"):f,b=/(\[[^[\]]*])/,w=/(\[[^[\]]*])/g,x=p.depth>0&&b.exec(y),S=x?y.slice(0,x.index):y,C=[];if(S){if(!p.plainObjects&&t.call(Object.prototype,S)&&!p.allowPrototypes)return;C.push(S)}for(var T=0;p.depth>0&&(x=w.exec(y))!==null&&T<p.depth;){if(T+=1,!p.plainObjects&&t.call(Object.prototype,x[1].slice(1,-1))&&!p.allowPrototypes)return;C.push(x[1])}return x&&C.push("["+y.slice(x.index)+"]"),u(C,g,p,m)}},d=function(f){if(!f)return i;if(f.decoder!==null&&f.decoder!==void 0&&typeof f.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof f.charset<"u"&&f.charset!=="utf-8"&&f.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var g=typeof f.charset>"u"?i.charset:f.charset;return{allowDots:typeof f.allowDots>"u"?i.allowDots:!!f.allowDots,allowPrototypes:typeof f.allowPrototypes=="boolean"?f.allowPrototypes:i.allowPrototypes,allowSparse:typeof f.allowSparse=="boolean"?f.allowSparse:i.allowSparse,arrayLimit:typeof f.arrayLimit=="number"?f.arrayLimit:i.arrayLimit,charset:g,charsetSentinel:typeof f.charsetSentinel=="boolean"?f.charsetSentinel:i.charsetSentinel,comma:typeof f.comma=="boolean"?f.comma:i.comma,decoder:typeof f.decoder=="function"?f.decoder:i.decoder,delimiter:typeof f.delimiter=="string"||e.isRegExp(f.delimiter)?f.delimiter:i.delimiter,depth:typeof f.depth=="number"||f.depth===!1?+f.depth:i.depth,ignoreQueryPrefix:f.ignoreQueryPrefix===!0,interpretNumericEntities:typeof f.interpretNumericEntities=="boolean"?f.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof f.parameterLimit=="number"?f.parameterLimit:i.parameterLimit,parseArrays:f.parseArrays!==!1,plainObjects:typeof f.plainObjects=="boolean"?f.plainObjects:i.plainObjects,strictNullHandling:typeof f.strictNullHandling=="boolean"?f.strictNullHandling:i.strictNullHandling}};return p5=function(h,f){var g=d(f);if(h===""||h===null||typeof h>"u")return g.plainObjects?Object.create(null):{};for(var p=typeof h=="string"?l(h,g):h,m=g.plainObjects?Object.create(null):{},y=Object.keys(p),b=0;b<y.length;++b){var w=y[b],x=c(w,p[w],g,typeof h=="string");m=e.merge(m,x,g)}return g.allowSparse===!0?m:e.compact(m)},p5}var m5,ice;function EAt(){if(ice)return m5;ice=1;var e=SAt(),t=CAt(),r=YG();return m5={formats:r,parse:t,stringify:e},m5}var nce;function MAt(){if(nce)return jy;nce=1;var e=jy&&jy.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(jy,"__esModule",{value:!0}),jy.createRequestUrl=void 0;const t=e(EAt());function r(i,n){return Object.keys(n??{}).length>0?`${i}?${t.default.stringify(n,{arrayFormat:"repeat"})}`:i}return jy.createRequestUrl=r,jy}var Ko={},g5={},aC={},ace;function PAt(){if(ace)return aC;ace=1;var e,t,r,i,n;Object.defineProperty(aC,"__esModule",{value:!0}),aC.RUNTIME=void 0;const a=typeof window<"u"&&typeof window.document<"u",o=typeof self=="object"&&typeof(self==null?void 0:self.importScripts)=="function"&&(((e=self.constructor)===null||e===void 0?void 0:e.name)==="DedicatedWorkerGlobalScope"||((t=self.constructor)===null||t===void 0?void 0:t.name)==="ServiceWorkerGlobalScope"||((r=self.constructor)===null||r===void 0?void 0:r.name)==="SharedWorkerGlobalScope"),s=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",l=typeof Bun<"u"&&typeof Bun.version<"u",u=typeof process<"u"&&!!process.version&&!!(!((i=process.versions)===null||i===void 0)&&i.node)&&!s&&!l,c=typeof navigator<"u"&&(navigator==null?void 0:navigator.product)==="ReactNative",d=typeof globalThis<"u"&&((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0?void 0:n.userAgent)==="Cloudflare-Workers";aC.RUNTIME=h();function h(){return a?{type:"browser",version:window.navigator.userAgent}:d?{type:"workerd"}:o?{type:"web-worker"}:s?{type:"deno",version:Deno.version.deno}:l?{type:"bun",version:Bun.version}:u?{type:"node",version:process.versions.node,parsedVersion:Number(process.versions.node.split(".")[0])}:c?{type:"react-native"}:{type:"unknown"}}return aC}var oce;function DP(){return oce||(oce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RUNTIME=void 0;var t=PAt();Object.defineProperty(e,"RUNTIME",{enumerable:!0,get:function(){return t.RUNTIME}})}(g5)),g5}var BO={exports:{}},sce;function lce(){return sce||(sce=1,function(e,t){var r=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof T_<"u")return T_;throw new Error("unable to locate global object")},i=r();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response}(BO,BO.exports)),BO.exports}var uce;function TAt(){if(uce)return Ko;uce=1;var e=Ko&&Ko.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Ko&&Ko.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Ko&&Ko.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s},i=Ko&&Ko.__awaiter||function(o,s,l,u){function c(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(m){try{p(u.next(m))}catch(y){h(y)}}function g(m){try{p(u.throw(m))}catch(y){h(y)}}function p(m){m.done?d(m.value):c(m.value).then(f,g)}p((u=u.apply(o,s||[])).next())})};Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.getFetchFn=void 0;const n=DP();function a(){return i(this,void 0,void 0,function*(){return n.RUNTIME.type==="node"&&n.RUNTIME.parsedVersion!=null&&n.RUNTIME.parsedVersion>=18?fetch:n.RUNTIME.type==="node"?(yield Promise.resolve().then(()=>r(lce()))).default:typeof fetch=="function"?fetch:(yield Promise.resolve().then(()=>r(lce()))).default})}return Ko.getFetchFn=a,Ko}var zy={},cce;function AAt(){if(cce)return zy;cce=1;var e=zy&&zy.__awaiter||function(r,i,n,a){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(h){try{d(a.next(h))}catch(f){l(f)}}function c(h){try{d(a.throw(h))}catch(f){l(f)}}function d(h){h.done?s(h.value):o(h.value).then(u,c)}d((a=a.apply(r,i||[])).next())})};Object.defineProperty(zy,"__esModule",{value:!0}),zy.getRequestBody=void 0;function t({body:r,type:i}){return e(this,void 0,void 0,function*(){return i.includes("json")?JSON.stringify(r):r})}return zy.getRequestBody=t,zy}var By={},Qo={},Ly={},dce;function OAt(){if(dce)return Ly;dce=1;var e=Ly&&Ly.__awaiter||function(r,i,n,a){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(h){try{d(a.next(h))}catch(f){l(f)}}function c(h){try{d(a.throw(h))}catch(f){l(f)}}function d(h){h.done?s(h.value):o(h.value).then(u,c)}d((a=a.apply(r,i||[])).next())})};Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.Node18UniversalStreamWrapper=void 0;let t=class w0{constructor(i){this.readableStream=i,this.reader=this.readableStream.getReader(),this.events={data:[],end:[],error:[],readable:[],close:[],pause:[],resume:[]},this.paused=!1,this.resumeCallback=null,this.encoding=null}on(i,n){var a;(a=this.events[i])===null||a===void 0||a.push(n)}off(i,n){var a;this.events[i]=(a=this.events[i])===null||a===void 0?void 0:a.filter(o=>o!==n)}pipe(i){return this.on("data",n=>e(this,void 0,void 0,function*(){if(i instanceof w0)i._write(n);else if(i instanceof WritableStream){const a=i.getWriter();a.write(n).then(()=>a.releaseLock())}else i.write(n)})),this.on("end",()=>e(this,void 0,void 0,function*(){i instanceof w0?i._end():i instanceof WritableStream?i.getWriter().close():i.end()})),this.on("error",n=>e(this,void 0,void 0,function*(){i instanceof w0?i._error(n):i instanceof WritableStream?i.getWriter().abort(n):i.destroy(n)})),this._startReading(),i}pipeTo(i){return this.pipe(i)}unpipe(i){this.off("data",n=>e(this,void 0,void 0,function*(){if(i instanceof w0)i._write(n);else if(i instanceof WritableStream){const a=i.getWriter();a.write(n).then(()=>a.releaseLock())}else i.write(n)})),this.off("end",()=>e(this,void 0,void 0,function*(){i instanceof w0?i._end():i instanceof WritableStream?i.getWriter().close():i.end()})),this.off("error",n=>e(this,void 0,void 0,function*(){i instanceof w0?i._error(n):i instanceof WritableStream?i.getWriter().abort(n):i.destroy(n)}))}destroy(i){this.reader.cancel(i).then(()=>{this._emit("close")}).catch(n=>{this._emit("error",n)})}pause(){this.paused=!0,this._emit("pause")}resume(){this.paused&&(this.paused=!1,this._emit("resume"),this.resumeCallback&&(this.resumeCallback(),this.resumeCallback=null))}get isPaused(){return this.paused}read(){return e(this,void 0,void 0,function*(){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:i,value:n}=yield this.reader.read();if(!i)return n})}setEncoding(i){this.encoding=i}text(){return e(this,void 0,void 0,function*(){const i=[];for(;;){const{done:a,value:o}=yield this.reader.read();if(a)break;o&&i.push(o)}return new TextDecoder(this.encoding||"utf-8").decode(yield new Blob(i).arrayBuffer())})}json(){return e(this,void 0,void 0,function*(){const i=yield this.text();return JSON.parse(i)})}_write(i){this._emit("data",i)}_end(){this._emit("end")}_error(i){this._emit("error",i)}_emit(i,n){if(this.events[i])for(const a of this.events[i]||[])a(n)}_startReading(){return e(this,void 0,void 0,function*(){try{for(this._emit("readable");;){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:i,value:n}=yield this.reader.read();if(i){this._emit("end"),this._emit("close");break}n&&this._emit("data",n)}}catch(i){this._emit("error",i)}})}[Symbol.asyncIterator](){return{next:()=>e(this,void 0,void 0,function*(){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:i,value:n}=yield this.reader.read();return i?{done:!0,value:void 0}:{done:!1,value:n}}),[Symbol.asyncIterator](){return this}}}};return Ly.Node18UniversalStreamWrapper=t,Ly}var Fy={},hce;function RAt(){if(hce)return Fy;hce=1;var e=Fy&&Fy.__awaiter||function(r,i,n,a){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(h){try{d(a.next(h))}catch(f){l(f)}}function c(h){try{d(a.throw(h))}catch(f){l(f)}}function d(h){h.done?s(h.value):o(h.value).then(u,c)}d((a=a.apply(r,i||[])).next())})};Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.UndiciStreamWrapper=void 0;let t=class x0{constructor(i){this.readableStream=i,this.reader=this.readableStream.getReader(),this.events={data:[],end:[],error:[],readable:[],close:[],pause:[],resume:[]},this.paused=!1,this.resumeCallback=null,this.encoding=null}on(i,n){var a;(a=this.events[i])===null||a===void 0||a.push(n)}off(i,n){var a;this.events[i]=(a=this.events[i])===null||a===void 0?void 0:a.filter(o=>o!==n)}pipe(i){return this.on("data",n=>{if(i instanceof x0)i._write(n);else{const a=i.getWriter();a.write(n).then(()=>a.releaseLock())}}),this.on("end",()=>{i instanceof x0?i._end():i.getWriter().close()}),this.on("error",n=>{i instanceof x0?i._error(n):i.getWriter().abort(n)}),this._startReading(),i}pipeTo(i){return this.pipe(i)}unpipe(i){this.off("data",n=>{if(i instanceof x0)i._write(n);else{const a=i.getWriter();a.write(n).then(()=>a.releaseLock())}}),this.off("end",()=>{i instanceof x0?i._end():i.getWriter().close()}),this.off("error",n=>{i instanceof x0?i._error(n):i.getWriter().abort(n)})}destroy(i){this.reader.cancel(i).then(()=>{this._emit("close")}).catch(n=>{this._emit("error",n)})}pause(){this.paused=!0,this._emit("pause")}resume(){this.paused&&(this.paused=!1,this._emit("resume"),this.resumeCallback&&(this.resumeCallback(),this.resumeCallback=null))}get isPaused(){return this.paused}read(){return e(this,void 0,void 0,function*(){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:i,value:n}=yield this.reader.read();if(!i)return n})}setEncoding(i){this.encoding=i}text(){return e(this,void 0,void 0,function*(){const i=[];for(;;){const{done:a,value:o}=yield this.reader.read();if(a)break;o&&i.push(o)}return new TextDecoder(this.encoding||"utf-8").decode(yield new Blob(i).arrayBuffer())})}json(){return e(this,void 0,void 0,function*(){const i=yield this.text();return JSON.parse(i)})}_write(i){this._emit("data",i)}_end(){this._emit("end")}_error(i){this._emit("error",i)}_emit(i,n){if(this.events[i])for(const a of this.events[i]||[])a(n)}_startReading(){return e(this,void 0,void 0,function*(){try{for(this._emit("readable");;){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:i,value:n}=yield this.reader.read();if(i){this._emit("end"),this._emit("close");break}n&&this._emit("data",n)}}catch(i){this._emit("error",i)}})}[Symbol.asyncIterator](){return{next:()=>e(this,void 0,void 0,function*(){this.paused&&(yield new Promise(a=>{this.resumeCallback=a}));const{done:i,value:n}=yield this.reader.read();return i?{done:!0,value:void 0}:{done:!1,value:n}}),[Symbol.asyncIterator](){return this}}}};return Fy.UndiciStreamWrapper=t,Fy}var fm={},fce;function DAt(){if(fce)return fm;fce=1;var e=fm&&fm.__awaiter||function(i,n,a,o){function s(l){return l instanceof a?l:new a(function(u){u(l)})}return new(a||(a=Promise))(function(l,u){function c(f){try{h(o.next(f))}catch(g){u(g)}}function d(f){try{h(o.throw(f))}catch(g){u(g)}}function h(f){f.done?l(f.value):s(f.value).then(c,d)}h((o=o.apply(i,n||[])).next())})},t=fm&&fm.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],a;return n?n.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a);function o(l){a[l]=i[l]&&function(u){return new Promise(function(c,d){u=i[l](u),s(c,d,u.done,u.value)})}}function s(l,u,c,d){Promise.resolve(d).then(function(h){l({value:h,done:c})},u)}};Object.defineProperty(fm,"__esModule",{value:!0}),fm.NodePre18StreamWrapper=void 0;let r=class{constructor(n){this.readableStream=n}on(n,a){this.readableStream.on(n,a)}off(n,a){this.readableStream.off(n,a)}pipe(n){return this.readableStream.pipe(n),n}pipeTo(n){return this.pipe(n)}unpipe(n){n?this.readableStream.unpipe(n):this.readableStream.unpipe()}destroy(n){this.readableStream.destroy(n)}pause(){this.readableStream.pause()}resume(){this.readableStream.resume()}get isPaused(){return this.readableStream.isPaused()}read(){return e(this,void 0,void 0,function*(){return new Promise((n,a)=>{const o=this.readableStream.read();o?n(o):(this.readableStream.once("readable",()=>{const s=this.readableStream.read();n(s)}),this.readableStream.once("error",a))})})}setEncoding(n){this.readableStream.setEncoding(n),this.encoding=n}text(){var n,a;return e(this,void 0,void 0,function*(){const o=[],s=new TextEncoder;this.readableStream.setEncoding(this.encoding||"utf-8");try{for(var l=t(this.readableStream),u;u=yield l.next(),!u.done;){const d=u.value;o.push(s.encode(d))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(a=l.return)&&(yield a.call(l))}finally{if(n)throw n.error}}return new TextDecoder(this.encoding||"utf-8").decode(Buffer.concat(o))})}json(){return e(this,void 0,void 0,function*(){const n=yield this.text();return JSON.parse(n)})}[Symbol.asyncIterator](){const a=this.readableStream[Symbol.asyncIterator]();return{next(){return e(this,void 0,void 0,function*(){const{value:o,done:s}=yield a.next();return{value:o,done:s}})},[Symbol.asyncIterator](){return this}}}};return fm.NodePre18StreamWrapper=r,fm}var pce;function IAt(){if(pce)return Qo;pce=1;var e=Qo&&Qo.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Qo&&Qo.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Qo&&Qo.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s},i=Qo&&Qo.__awaiter||function(o,s,l,u){function c(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function f(m){try{p(u.next(m))}catch(y){h(y)}}function g(m){try{p(u.throw(m))}catch(y){h(y)}}function p(m){m.done?d(m.value):c(m.value).then(f,g)}p((u=u.apply(o,s||[])).next())})};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.chooseStreamWrapper=void 0;const n=DP();function a(o){return i(this,void 0,void 0,function*(){return n.RUNTIME.type==="node"&&n.RUNTIME.parsedVersion!=null&&n.RUNTIME.parsedVersion>=18?new(yield Promise.resolve().then(()=>r(OAt()))).Node18UniversalStreamWrapper(o):n.RUNTIME.type!=="node"&&typeof fetch=="function"?new(yield Promise.resolve().then(()=>r(RAt()))).UndiciStreamWrapper(o):new(yield Promise.resolve().then(()=>r(DAt()))).NodePre18StreamWrapper(o)})}return Qo.chooseStreamWrapper=a,Qo}var mce;function jAt(){if(mce)return By;mce=1;var e=By&&By.__awaiter||function(i,n,a,o){function s(l){return l instanceof a?l:new a(function(u){u(l)})}return new(a||(a=Promise))(function(l,u){function c(f){try{h(o.next(f))}catch(g){u(g)}}function d(f){try{h(o.throw(f))}catch(g){u(g)}}function h(f){f.done?l(f.value):s(f.value).then(c,d)}h((o=o.apply(i,n||[])).next())})};Object.defineProperty(By,"__esModule",{value:!0}),By.getResponseBody=void 0;const t=IAt();function r(i,n){return e(this,void 0,void 0,function*(){if(i.body!=null&&n==="blob")return yield i.blob();if(i.body!=null&&n==="arrayBuffer")return yield i.arrayBuffer();if(i.body!=null&&n==="sse")return i.body;if(i.body!=null&&n==="streaming")return(0,t.chooseStreamWrapper)(i.body);if(i.body!=null&&n==="text")return yield i.text();{const a=yield i.text();if(a.length>0)try{return JSON.parse(a)}catch{return{ok:!1,error:{reason:"non-json",statusCode:i.status,rawBody:a}}}else return}})}return By.getResponseBody=r,By}var Ny={},Uy={},gce;function zAt(){if(gce)return Uy;gce=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.anySignal=Uy.getTimeoutSignal=void 0;const e="timeout";function t(i){const n=new AbortController,a=setTimeout(()=>n.abort(e),i);return{signal:n.signal,abortId:a}}Uy.getTimeoutSignal=t;function r(...i){const n=i.length===1&&Array.isArray(i[0])?i[0]:i,a=new AbortController;for(const o of n){if(o.aborted){a.abort(o==null?void 0:o.reason);break}o.addEventListener("abort",()=>a.abort(o==null?void 0:o.reason),{signal:a.signal})}return a.signal}return Uy.anySignal=r,Uy}var vce;function BAt(){if(vce)return Ny;vce=1;var e=Ny&&Ny.__awaiter||function(i,n,a,o){function s(l){return l instanceof a?l:new a(function(u){u(l)})}return new(a||(a=Promise))(function(l,u){function c(f){try{h(o.next(f))}catch(g){u(g)}}function d(f){try{h(o.throw(f))}catch(g){u(g)}}function h(f){f.done?l(f.value):s(f.value).then(c,d)}h((o=o.apply(i,n||[])).next())})};Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.makeRequest=void 0;const t=zAt(),r=(i,n,a,o,s,l,u,c,d)=>e(void 0,void 0,void 0,function*(){const h=[];let f;if(l!=null){const{signal:m,abortId:y}=(0,t.getTimeoutSignal)(l);f=y,h.push(m)}u!=null&&h.push(u);let g=(0,t.anySignal)(h);const p=yield i(n,{method:a,headers:o,body:s,signal:g,credentials:c?"include":void 0,duplex:d});return f!=null&&clearTimeout(f),p});return Ny.makeRequest=r,Ny}var Vy={},yce;function LAt(){if(yce)return Vy;yce=1;var e=Vy&&Vy.__awaiter||function(s,l,u,c){function d(h){return h instanceof u?h:new u(function(f){f(h)})}return new(u||(u=Promise))(function(h,f){function g(y){try{m(c.next(y))}catch(b){f(b)}}function p(y){try{m(c.throw(y))}catch(b){f(b)}}function m(y){y.done?h(y.value):d(y.value).then(g,p)}m((c=c.apply(s,l||[])).next())})};Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.requestWithRetries=void 0;const t=1e3,r=6e4,i=2,n=.2;function a(s){const l=1+(Math.random()*2-1)*n;return s*l}function o(s,l=i){return e(this,void 0,void 0,function*(){let u=yield s();for(let c=0;c<l&&([408,409,429].includes(u.status)||u.status>=500);++c){const d=Math.min(t*Math.pow(2,c),r),h=a(d);yield new Promise(f=>setTimeout(f,h)),u=yield s()}return u})}return Vy.requestWithRetries=o,Vy}var bce;function FAt(){if(bce)return hm;bce=1;var e=hm&&hm.__awaiter||function(l,u,c,d){function h(f){return f instanceof c?f:new c(function(g){g(f)})}return new(c||(c=Promise))(function(f,g){function p(b){try{y(d.next(b))}catch(w){g(w)}}function m(b){try{y(d.throw(b))}catch(w){g(w)}}function y(b){b.done?f(b.value):h(b.value).then(p,m)}y((d=d.apply(l,u||[])).next())})};Object.defineProperty(hm,"__esModule",{value:!0}),hm.fetcher=hm.fetcherImpl=void 0;const t=MAt(),r=TAt(),i=AAt(),n=jAt(),a=BAt(),o=LAt();function s(l){return e(this,void 0,void 0,function*(){const u={};if(l.body!==void 0&&l.contentType!=null&&(u["Content-Type"]=l.contentType),l.headers!=null)for(const[f,g]of Object.entries(l.headers))g!=null&&(u[f]=g);const c=(0,t.createRequestUrl)(l.url,l.queryParameters);let d=yield(0,i.getRequestBody)({body:l.body,type:l.requestType==="json"?"json":"other"});const h=yield(0,r.getFetchFn)();try{const f=yield(0,o.requestWithRetries)(()=>e(this,void 0,void 0,function*(){return(0,a.makeRequest)(h,c,l.method,u,d,l.timeoutMs,l.abortSignal,l.withCredentials,l.duplex)}),l.maxRetries);let g=yield(0,n.getResponseBody)(f,l.responseType);return f.status>=200&&f.status<400?{ok:!0,body:g,headers:f.headers}:{ok:!1,error:{reason:"status-code",statusCode:f.status,body:g}}}catch(f){return l.abortSignal!=null&&l.abortSignal.aborted?{ok:!1,error:{reason:"unknown",errorMessage:"The user aborted a request"}}:f instanceof Error&&f.name==="AbortError"?{ok:!1,error:{reason:"timeout"}}:f instanceof Error?{ok:!1,error:{reason:"unknown",errorMessage:f.message}}:{ok:!1,error:{reason:"unknown",errorMessage:JSON.stringify(f)}}}})}return hm.fetcherImpl=s,hm.fetcher=s,hm}var oC={},_ce;function NAt(){if(_ce)return oC;_ce=1,Object.defineProperty(oC,"__esModule",{value:!0}),oC.getHeader=void 0;function e(t,r){for(const[i,n]of Object.entries(t))if(i.toLowerCase()===r.toLowerCase())return n}return oC.getHeader=e,oC}var ky={},wce;function UAt(){if(wce)return ky;wce=1;var e=ky&&ky.__awaiter||function(t,r,i,n){function a(o){return o instanceof i?o:new i(function(s){s(o)})}return new(i||(i=Promise))(function(o,s){function l(d){try{c(n.next(d))}catch(h){s(h)}}function u(d){try{c(n.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):a(d.value).then(l,u)}c((n=n.apply(t,r||[])).next())})};return Object.defineProperty(ky,"__esModule",{value:!0}),ky.Supplier=void 0,ky.Supplier={get:t=>e(void 0,void 0,void 0,function*(){return typeof t=="function"?t():t})},ky}var xce;function VAt(){return xce||(xce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Supplier=e.getHeader=e.fetcher=void 0;var t=FAt();Object.defineProperty(e,"fetcher",{enumerable:!0,get:function(){return t.fetcher}});var r=NAt();Object.defineProperty(e,"getHeader",{enumerable:!0,get:function(){return r.getHeader}});var i=UAt();Object.defineProperty(e,"Supplier",{enumerable:!0,get:function(){return i.Supplier}})}(CU)),CU}var v5={},sC={},MR={exports:{}},kAt=MR.exports,Sce;function qAt(){return Sce||(Sce=1,function(e,t){(function(r,i){e.exports=i()})(typeof self<"u"?self:typeof window<"u"?window:typeof T_<"u"?T_:kAt,function(){var r="3.7.2",i=r,n=typeof atob=="function",a=typeof btoa=="function",o=typeof Buffer=="function",s=typeof TextDecoder=="function"?new TextDecoder:void 0,l=typeof TextEncoder=="function"?new TextEncoder:void 0,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=Array.prototype.slice.call(u),d=function(le){var ee={};return le.forEach(function(J,oe){return ee[J]=oe}),ee}(c),h=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,f=String.fromCharCode.bind(String),g=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(le,ee){return ee===void 0&&(ee=function(J){return J}),new Uint8Array(Array.prototype.slice.call(le,0).map(ee))},p=function(le){return le.replace(/=/g,"").replace(/[+\/]/g,function(ee){return ee=="+"?"-":"_"})},m=function(le){return le.replace(/[^A-Za-z0-9\+\/]/g,"")},y=function(le){for(var ee,J,oe,me,be="",de=le.length%3,ge=0;ge<le.length;){if((J=le.charCodeAt(ge++))>255||(oe=le.charCodeAt(ge++))>255||(me=le.charCodeAt(ge++))>255)throw new TypeError("invalid character found");ee=J<<16|oe<<8|me,be+=c[ee>>18&63]+c[ee>>12&63]+c[ee>>6&63]+c[ee&63]}return de?be.slice(0,de-3)+"===".substring(de):be},b=a?function(le){return btoa(le)}:o?function(le){return Buffer.from(le,"binary").toString("base64")}:y,w=o?function(le){return Buffer.from(le).toString("base64")}:function(le){for(var ee=4096,J=[],oe=0,me=le.length;oe<me;oe+=ee)J.push(f.apply(null,le.subarray(oe,oe+ee)));return b(J.join(""))},x=function(le,ee){return ee===void 0&&(ee=!1),ee?p(w(le)):w(le)},S=function(le){if(le.length<2){var ee=le.charCodeAt(0);return ee<128?le:ee<2048?f(192|ee>>>6)+f(128|ee&63):f(224|ee>>>12&15)+f(128|ee>>>6&63)+f(128|ee&63)}else{var ee=65536+(le.charCodeAt(0)-55296)*1024+(le.charCodeAt(1)-56320);return f(240|ee>>>18&7)+f(128|ee>>>12&63)+f(128|ee>>>6&63)+f(128|ee&63)}},C=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,T=function(le){return le.replace(C,S)},M=o?function(le){return Buffer.from(le,"utf8").toString("base64")}:l?function(le){return w(l.encode(le))}:function(le){return b(T(le))},A=function(le,ee){return ee===void 0&&(ee=!1),ee?p(M(le)):M(le)},P=function(le){return A(le,!0)},O=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,j=function(le){switch(le.length){case 4:var ee=(7&le.charCodeAt(0))<<18|(63&le.charCodeAt(1))<<12|(63&le.charCodeAt(2))<<6|63&le.charCodeAt(3),J=ee-65536;return f((J>>>10)+55296)+f((J&1023)+56320);case 3:return f((15&le.charCodeAt(0))<<12|(63&le.charCodeAt(1))<<6|63&le.charCodeAt(2));default:return f((31&le.charCodeAt(0))<<6|63&le.charCodeAt(1))}},D=function(le){return le.replace(O,j)},I=function(le){if(le=le.replace(/\s+/g,""),!h.test(le))throw new TypeError("malformed base64.");le+="==".slice(2-(le.length&3));for(var ee,J="",oe,me,be=0;be<le.length;)ee=d[le.charAt(be++)]<<18|d[le.charAt(be++)]<<12|(oe=d[le.charAt(be++)])<<6|(me=d[le.charAt(be++)]),J+=oe===64?f(ee>>16&255):me===64?f(ee>>16&255,ee>>8&255):f(ee>>16&255,ee>>8&255,ee&255);return J},q=n?function(le){return atob(m(le))}:o?function(le){return Buffer.from(le,"base64").toString("binary")}:I,$=o?function(le){return g(Buffer.from(le,"base64"))}:function(le){return g(q(le),function(ee){return ee.charCodeAt(0)})},X=function(le){return $(Q(le))},N=o?function(le){return Buffer.from(le,"base64").toString("utf8")}:s?function(le){return s.decode($(le))}:function(le){return D(q(le))},Q=function(le){return m(le.replace(/[-_]/g,function(ee){return ee=="-"?"+":"/"}))},F=function(le){return N(Q(le))},L=function(le){if(typeof le!="string")return!1;var ee=le.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(ee)||!/[^\s0-9a-zA-Z\-_]/.test(ee)},Y=function(le){return{value:le,enumerable:!1,writable:!0,configurable:!0}},ae=function(){var le=function(ee,J){return Object.defineProperty(String.prototype,ee,Y(J))};le("fromBase64",function(){return F(this)}),le("toBase64",function(ee){return A(this,ee)}),le("toBase64URI",function(){return A(this,!0)}),le("toBase64URL",function(){return A(this,!0)}),le("toUint8Array",function(){return X(this)})},re=function(){var le=function(ee,J){return Object.defineProperty(Uint8Array.prototype,ee,Y(J))};le("toBase64",function(ee){return x(this,ee)}),le("toBase64URI",function(){return x(this,!0)}),le("toBase64URL",function(){return x(this,!0)})},H=function(){ae(),re()},se={version:r,VERSION:i,atob:q,atobPolyfill:I,btoa:b,btoaPolyfill:y,fromBase64:F,toBase64:A,encode:A,encodeURI:P,encodeURL:P,utob:T,btou:D,decode:F,isValid:L,fromUint8Array:x,toUint8Array:X,extendString:ae,extendUint8Array:re,extendBuiltins:H};return se.Base64={},Object.keys(se).forEach(function(le){return se.Base64[le]=se[le]}),se})}(MR)),MR.exports}var Cce;function WAt(){if(Cce)return sC;Cce=1,Object.defineProperty(sC,"__esModule",{value:!0}),sC.BasicAuth=void 0;const e=qAt(),t=/^Basic /i;return sC.BasicAuth={toAuthorizationHeader:r=>r==null?void 0:`Basic ${e.Base64.encode(`${r.username}:${r.password}`)}`,fromAuthorizationHeader:r=>{const i=r.replace(t,""),n=e.Base64.decode(i),[a,o]=n.split(":",2);if(a==null||o==null)throw new Error("Invalid basic auth");return{username:a,password:o}}},sC}var lC={},Ece;function GAt(){if(Ece)return lC;Ece=1,Object.defineProperty(lC,"__esModule",{value:!0}),lC.BearerToken=void 0;const e=/^Bearer /i;return lC.BearerToken={toAuthorizationHeader:t=>{if(t!=null)return`Bearer ${t}`},fromAuthorizationHeader:t=>t.replace(e,"").trim()},lC}var Mce;function HAt(){return Mce||(Mce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BearerToken=e.BasicAuth=void 0;var t=WAt();Object.defineProperty(e,"BasicAuth",{enumerable:!0,get:function(){return t.BasicAuth}});var r=GAt();Object.defineProperty(e,"BearerToken",{enumerable:!0,get:function(){return r.BearerToken}})}(v5)),v5}var y5={},Ya={},Pce;function iMe(){if(Pce)return Ya;Pce=1;var e=Ya&&Ya.__awaiter||function(l,u,c,d){function h(f){return f instanceof c?f:new c(function(g){g(f)})}return new(c||(c=Promise))(function(f,g){function p(b){try{y(d.next(b))}catch(w){g(w)}}function m(b){try{y(d.throw(b))}catch(w){g(w)}}function y(b){b.done?f(b.value):h(b.value).then(p,m)}y((d=d.apply(l,u||[])).next())})},t=Ya&&Ya.__asyncValues||function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u=l[Symbol.asyncIterator],c;return u?u.call(l):(l=typeof __values=="function"?__values(l):l[Symbol.iterator](),c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c);function d(f){c[f]=l[f]&&function(g){return new Promise(function(p,m){g=l[f](g),h(p,m,g.done,g.value)})}}function h(f,g,p,m){Promise.resolve(m).then(function(y){f({value:y,done:p})},g)}},r=Ya&&Ya.__await||function(l){return this instanceof r?(this.v=l,this):new r(l)},i=Ya&&Ya.__asyncGenerator||function(l,u,c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=c.apply(l,u||[]),h,f=[];return h={},g("next"),g("throw"),g("return"),h[Symbol.asyncIterator]=function(){return this},h;function g(x){d[x]&&(h[x]=function(S){return new Promise(function(C,T){f.push([x,S,C,T])>1||p(x,S)})})}function p(x,S){try{m(d[x](S))}catch(C){w(f[0][3],C)}}function m(x){x.value instanceof r?Promise.resolve(x.value.v).then(y,b):w(f[0][2],x)}function y(x){p("next",x)}function b(x){p("throw",x)}function w(x,S){x(S),f.shift(),f.length&&p(f[0][0],f[0][1])}};Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.readableStreamAsyncIterable=Ya.Stream=void 0;const n=DP(),a="data:";let o=class{constructor({stream:u,parse:c,eventShape:d,signal:h}){this.controller=new AbortController,this.stream=u,this.parse=c,d.type==="sse"?(this.prefix=a,this.messageTerminator=`
`,this.streamTerminator=d.streamTerminator):this.messageTerminator=d.messageTerminator,h==null||h.addEventListener("abort",()=>this.controller.abort())}iterMessages(){return i(this,arguments,function*(){var c,d;this.controller.signal;const h=s(this.stream);let f="",g=!1;try{for(var p=t(h),m;m=yield r(p.next()),!m.done;){const y=m.value;f+=this.decodeChunk(y);let b;for(;(b=f.indexOf(this.messageTerminator))>=0;){let w=f.slice(0,b+1);if(f=f.slice(b+1),w.length===0)continue;if(!g&&this.prefix!=null){const S=w.indexOf(this.prefix);if(S===-1)continue;g=!0,w=w.slice(S+this.prefix.length)}if(this.streamTerminator!=null&&w.includes(this.streamTerminator))return yield r(void 0);const x=yield r(this.parse(JSON.parse(w)));yield yield r(x),g=!1}}}catch(y){c={error:y}}finally{try{m&&!m.done&&(d=p.return)&&(yield r(d.call(p)))}finally{if(c)throw c.error}}})}[Symbol.asyncIterator](){return i(this,arguments,function*(){var c,d;try{for(var h=t(this.iterMessages()),f;f=yield r(h.next()),!f.done;){const g=f.value;yield yield r(g)}}catch(g){c={error:g}}finally{try{f&&!f.done&&(d=h.return)&&(yield r(d.call(h)))}finally{if(c)throw c.error}}})}decodeChunk(u){let c="";if(typeof TextDecoder<"u"){const d=new TextDecoder("utf8");c+=d.decode(u)}else n.RUNTIME.type==="node"&&typeof u<"u"&&(c+=Buffer.isBuffer(u)?u:Buffer.from(u));return c}};Ya.Stream=o;function s(l){if(l[Symbol.asyncIterator])return l;const u=l.getReader();return{next(){return e(this,void 0,void 0,function*(){try{const c=yield u.read();return c!=null&&c.done&&u.releaseLock(),c}catch(c){throw u.releaseLock(),c}})},return(){return e(this,void 0,void 0,function*(){const c=u.cancel();return u.releaseLock(),yield c,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}return Ya.readableStreamAsyncIterable=s,Ya}var Tce;function $At(){return Tce||(Tce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stream=void 0;var t=iMe();Object.defineProperty(e,"Stream",{enumerable:!0,get:function(){return t.Stream}})}(y5)),y5}var qy={},In={},b5,Ace;function XAt(){if(Ace)return b5;Ace=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,n=(h,f)=>{for(var g in f)e(h,g,{get:f[g],enumerable:!0})},a=(h,f,g,p)=>{if(f&&typeof f=="object"||typeof f=="function")for(let m of r(f))!i.call(h,m)&&m!==g&&e(h,m,{get:()=>f[m],enumerable:!(p=t(f,m))||p.enumerable});return h},o=h=>a(e({},"__esModule",{value:!0}),h),s={};n(s,{Blob:()=>c,File:()=>d,FormData:()=>u}),b5=o(s);var l=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:window}(),{FormData:u,Blob:c,File:d}=l;return b5}var _5,Oce;function YAt(){if(Oce)return _5;Oce=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,n=(J,oe)=>{for(var me in oe)e(J,me,{get:oe[me],enumerable:!0})},a=(J,oe,me,be)=>{if(oe&&typeof oe=="object"||typeof oe=="function")for(let de of r(oe))!i.call(J,de)&&de!==me&&e(J,de,{get:()=>oe[de],enumerable:!(be=t(oe,de))||be.enumerable});return J},o=J=>a(e({},"__esModule",{value:!0}),J),s=(J,oe,me)=>{if(!oe.has(J))throw TypeError("Cannot "+me)},l=(J,oe,me)=>(s(J,oe,"read from private field"),me?me.call(J):oe.get(J)),u=(J,oe,me)=>{if(oe.has(J))throw TypeError("Cannot add the same private member more than once");oe instanceof WeakSet?oe.add(J):oe.set(J,me)},c=(J,oe,me,be)=>(s(J,oe,"write to private field"),oe.set(J,me),me),d=(J,oe,me)=>(s(J,oe,"access private method"),me),h={};n(h,{FormDataEncoder:()=>ee,isFile:()=>D,isFormData:()=>O}),_5=o(h);var f=J=>typeof J=="function",g=J=>f(J[Symbol.asyncIterator]),p=65536;function*m(J){if(J.byteLength<=p){yield J;return}let oe=0;for(;oe<J.byteLength;){const me=Math.min(J.byteLength-oe,p),be=J.buffer.slice(oe,oe+me);oe+=be.byteLength,yield new Uint8Array(be)}}async function*y(J){const oe=J.getReader();for(;;){const{done:me,value:be}=await oe.read();if(me)break;yield be}}async function*b(J){for await(const oe of J)yield*m(oe)}var w=J=>{if(g(J))return b(J);if(f(J.getReader))return b(y(J));throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")},x="abcdefghijklmnopqrstuvwxyz0123456789";function S(){let J=16,oe="";for(;J--;)oe+=x[Math.random()*x.length<<0];return oe}var C=J=>String(J).replace(/\r|\n/g,(oe,me,be)=>oe==="\r"&&be[me+1]!==`
`||oe===`
`&&be[me-1]!=="\r"?`\r
`:oe),T=J=>Object.prototype.toString.call(J).slice(8,-1).toLowerCase();function M(J){if(T(J)!=="object")return!1;const oe=Object.getPrototypeOf(J);return oe==null?!0:(oe.constructor&&oe.constructor.toString())===Object.toString()}function A(J,oe){if(typeof oe=="string"){for(const[me,be]of Object.entries(J))if(oe.toLowerCase()===me.toLowerCase())return be}}var P=J=>new Proxy(J,{get:(oe,me)=>A(oe,me),has:(oe,me)=>A(oe,me)!==void 0}),O=J=>!!(J&&f(J.constructor)&&J[Symbol.toStringTag]==="FormData"&&f(J.append)&&f(J.getAll)&&f(J.entries)&&f(J[Symbol.iterator])),j=J=>String(J).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22"),D=J=>!!(J&&typeof J=="object"&&f(J.constructor)&&J[Symbol.toStringTag]==="File"&&f(J.stream)&&J.name!=null),I={enableAdditionalHeaders:!1},q={writable:!1,configurable:!1},$,X,N,Q,F,L,Y,ae,re,H,se,le,ee=class{constructor(J,oe,me){if(u(this,re),u(this,se),u(this,$,`\r
`),u(this,X,void 0),u(this,N,void 0),u(this,Q,"-".repeat(2)),u(this,F,new TextEncoder),u(this,L,void 0),u(this,Y,void 0),u(this,ae,void 0),!O(J))throw new TypeError("Expected first argument to be a FormData instance.");let be;if(M(oe)?me=oe:be=oe,be||(be=S()),typeof be!="string")throw new TypeError("Expected boundary argument to be a string.");if(me&&!M(me))throw new TypeError("Expected options argument to be an object.");c(this,Y,Array.from(J.entries())),c(this,ae,{...I,...me}),c(this,X,l(this,F).encode(l(this,$))),c(this,N,l(this,X).byteLength),this.boundary=`form-data-boundary-${be}`,this.contentType=`multipart/form-data; boundary=${this.boundary}`,c(this,L,l(this,F).encode(`${l(this,Q)}${this.boundary}${l(this,Q)}${l(this,$).repeat(2)}`));const de={"Content-Type":this.contentType},ge=d(this,se,le).call(this);ge&&(this.contentLength=ge,de["Content-Length"]=ge),this.headers=P(Object.freeze(de)),Object.defineProperties(this,{boundary:q,contentType:q,contentLength:q,headers:q})}*values(){for(const[J,oe]of l(this,Y)){const me=D(oe)?oe:l(this,F).encode(C(oe));yield d(this,re,H).call(this,J,me),yield me,yield l(this,X)}yield l(this,L)}async*encode(){for(const J of this.values())D(J)?yield*w(J.stream()):yield*m(J)}[Symbol.iterator](){return this.values()}[Symbol.asyncIterator](){return this.encode()}};return $=new WeakMap,X=new WeakMap,N=new WeakMap,Q=new WeakMap,F=new WeakMap,L=new WeakMap,Y=new WeakMap,ae=new WeakMap,re=new WeakSet,H=function(J,oe){let me="";if(me+=`${l(this,Q)}${this.boundary}${l(this,$)}`,me+=`Content-Disposition: form-data; name="${j(J)}"`,D(oe)&&(me+=`; filename="${j(oe.name)}"${l(this,$)}`,me+=`Content-Type: ${oe.type||"application/octet-stream"}`),l(this,ae).enableAdditionalHeaders===!0){const be=D(oe)?oe.size:oe.byteLength;be!=null&&!isNaN(be)&&(me+=`${l(this,$)}Content-Length: ${be}`)}return l(this,F).encode(`${me}${l(this,$).repeat(2)}`)},se=new WeakSet,le=function(){let J=0;for(const[oe,me]of l(this,Y)){const be=D(me)?me:l(this,F).encode(C(me)),de=D(be)?be.size:be.byteLength;if(de==null||isNaN(de))return;J+=d(this,re,H).call(this,oe,be).byteLength,J+=de,J+=l(this,N)}return String(J+l(this,L).byteLength)},_5}var w5,Rce;function KAt(){return Rce||(Rce=1,w5=typeof self=="object"?self.FormData:window.FormData),w5}var Dce;function QAt(){if(Dce)return In;Dce=1;var e=In&&In.__createBinding||(Object.create?function(c,d,h,f){f===void 0&&(f=h);var g=Object.getOwnPropertyDescriptor(d,h);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(c,f,g)}:function(c,d,h,f){f===void 0&&(f=h),c[f]=d[h]}),t=In&&In.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),r=In&&In.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&e(d,c,h);return t(d,c),d},i=In&&In.__awaiter||function(c,d,h,f){function g(p){return p instanceof h?p:new h(function(m){m(p)})}return new(h||(h=Promise))(function(p,m){function y(x){try{w(f.next(x))}catch(S){m(S)}}function b(x){try{w(f.throw(x))}catch(S){m(S)}}function w(x){x.done?p(x.value):g(x.value).then(y,b)}w((f=f.apply(c,d||[])).next())})};Object.defineProperty(In,"__esModule",{value:!0}),In.WebFormData=In.Node16FormData=In.Node18FormData=In.newFormData=void 0;const n=DP();function a(c){return typeof c=="object"&&c!=null&&"name"in c}function o(){return i(this,void 0,void 0,function*(){let c;return n.RUNTIME.type==="node"&&n.RUNTIME.parsedVersion!=null&&n.RUNTIME.parsedVersion>=18?c=new s:n.RUNTIME.type==="node"?c=new l:c=new u,yield c.setup(),c})}In.newFormData=o;class s{setup(){return i(this,void 0,void 0,function*(){this.fd=new(yield Promise.resolve().then(()=>r(XAt()))).FormData})}append(d,h){var f;(f=this.fd)===null||f===void 0||f.append(d,h)}appendFile(d,h,f){var g,p;return i(this,void 0,void 0,function*(){f==null&&a(h)&&(f=h.name),h instanceof(yield Promise.resolve().then(()=>r(ER()))).Readable?(g=this.fd)===null||g===void 0||g.append(d,{type:void 0,name:f,[Symbol.toStringTag]:"File",stream(){return h}}):(p=this.fd)===null||p===void 0||p.append(d,h,f)})}getRequest(){return i(this,void 0,void 0,function*(){const d=new(yield Promise.resolve().then(()=>r(YAt()))).FormDataEncoder(this.fd);return{body:yield(yield Promise.resolve().then(()=>r(ER()))).Readable.from(d),headers:d.headers,duplex:"half"}})}}In.Node18FormData=s;class l{setup(){return i(this,void 0,void 0,function*(){this.fd=new(yield Promise.resolve().then(()=>r(KAt()))).default})}append(d,h){var f;(f=this.fd)===null||f===void 0||f.append(d,h)}appendFile(d,h,f){var g,p;return i(this,void 0,void 0,function*(){f==null&&a(h)&&(f=h.name);let m;h instanceof(yield Promise.resolve().then(()=>r(ER()))).Readable?m=h:m=Buffer.from(yield h.arrayBuffer()),f==null?(g=this.fd)===null||g===void 0||g.append(d,m):(p=this.fd)===null||p===void 0||p.append(d,m,{filename:f})})}getRequest(){return{body:this.fd,headers:this.fd?this.fd.getHeaders():{}}}}In.Node16FormData=l;class u{setup(){return i(this,void 0,void 0,function*(){this.fd=new FormData})}append(d,h){var f;(f=this.fd)===null||f===void 0||f.append(d,h)}appendFile(d,h,f){var g;return i(this,void 0,void 0,function*(){f==null&&a(h)&&(f=h.name),(g=this.fd)===null||g===void 0||g.append(d,new Blob([h]),f)})}getRequest(){return{body:this.fd,headers:{}}}}return In.WebFormData=u,In}var Ice;function JAt(){return Ice||(Ice=1,function(e){var t=qy&&qy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=qy&&qy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(QAt(),e)}(qy)),qy}var Wy={},Gy={},x5={},uC={},cC={},jce;function Sa(){return jce||(jce=1,Object.defineProperty(cC,"__esModule",{value:!0}),cC.SchemaType=void 0,cC.SchemaType={BIGINT:"bigint",DATE:"date",ENUM:"enum",LIST:"list",STRING_LITERAL:"stringLiteral",BOOLEAN_LITERAL:"booleanLiteral",OBJECT:"object",ANY:"any",BOOLEAN:"boolean",NUMBER:"number",STRING:"string",UNKNOWN:"unknown",RECORD:"record",SET:"set",UNION:"union",UNDISCRIMINATED_UNION:"undiscriminatedUnion",OPTIONAL:"optional"}),cC}var dC={},zce;function Uo(){if(zce)return dC;zce=1,Object.defineProperty(dC,"__esModule",{value:!0}),dC.getErrorMessageForIncorrectType=void 0;function e(r,i){return`Expected ${i}. Received ${t(r)}.`}dC.getErrorMessageForIncorrectType=e;function t(r){if(Array.isArray(r))return"list";if(r===null)return"null";if(r instanceof BigInt)return"BigInt";switch(typeof r){case"string":return`"${r}"`;case"bigint":case"number":case"boolean":case"undefined":return`${r}`}return typeof r}return dC}var hC={},Bce;function rg(){if(Bce)return hC;Bce=1,Object.defineProperty(hC,"__esModule",{value:!0}),hC.maybeSkipValidation=void 0;function e(r){return Object.assign(Object.assign({},r),{json:t(r.json),parse:t(r.parse)})}hC.maybeSkipValidation=e;function t(r){return(i,n)=>{const a=r(i,n),{skipValidation:o=!1}=n??{};return!a.ok&&o?(console.warn(["Failed to validate.",...a.errors.map(s=>"  - "+(s.path.length>0?`${s.path.join(".")}: ${s.message}`:s.message))].join(`
`)),{ok:!0,value:i}):a}}return hC}var S5={},pm={},fC={},pC={},Lce;function nMe(){if(Lce)return pC;Lce=1,Object.defineProperty(pC,"__esModule",{value:!0}),pC.stringifyValidationError=void 0;function e(t){return t.path.length===0?t.message:`${t.path.join(" -> ")}: ${t.message}`}return pC.stringifyValidationError=e,pC}var Fce;function oMe(){if(Fce)return fC;Fce=1,Object.defineProperty(fC,"__esModule",{value:!0}),fC.JsonError=void 0;const e=nMe();let t=class aMe extends Error{constructor(i){super(i.map(e.stringifyValidationError).join("; ")),this.errors=i,Object.setPrototypeOf(this,aMe.prototype)}};return fC.JsonError=t,fC}var mC={},Nce;function lMe(){if(Nce)return mC;Nce=1,Object.defineProperty(mC,"__esModule",{value:!0}),mC.ParseError=void 0;const e=nMe();let t=class sMe extends Error{constructor(i){super(i.map(e.stringifyValidationError).join("; ")),this.errors=i,Object.setPrototypeOf(this,sMe.prototype)}};return mC.ParseError=t,mC}var Uce;function ZAt(){if(Uce)return pm;Uce=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.transform=pm.optional=pm.getSchemaUtils=void 0;const e=Sa(),t=oMe(),r=lMe();function i(o){return{optional:()=>n(o),transform:s=>a(o,s),parseOrThrow:(s,l)=>{const u=o.parse(s,l);if(u.ok)return u.value;throw new r.ParseError(u.errors)},jsonOrThrow:(s,l)=>{const u=o.json(s,l);if(u.ok)return u.value;throw new t.JsonError(u.errors)}}}pm.getSchemaUtils=i;function n(o){const s={parse:(l,u)=>l==null?{ok:!0,value:void 0}:o.parse(l,u),json:(l,u)=>u!=null&&u.omitUndefined&&l===void 0?{ok:!0,value:void 0}:l==null?{ok:!0,value:null}:o.json(l,u),getType:()=>e.SchemaType.OPTIONAL};return Object.assign(Object.assign({},s),i(s))}pm.optional=n;function a(o,s){const l={parse:(u,c)=>{const d=o.parse(u,c);return d.ok?{ok:!0,value:s.transform(d.value)}:d},json:(u,c)=>{const d=s.untransform(u);return o.json(d,c)},getType:()=>o.getType()};return Object.assign(Object.assign({},l),i(l))}return pm.transform=a,pm}var Vce;function ds(){return Vce||(Vce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParseError=e.JsonError=e.transform=e.optional=e.getSchemaUtils=void 0;var t=ZAt();Object.defineProperty(e,"getSchemaUtils",{enumerable:!0,get:function(){return t.getSchemaUtils}}),Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return t.optional}}),Object.defineProperty(e,"transform",{enumerable:!0,get:function(){return t.transform}});var r=oMe();Object.defineProperty(e,"JsonError",{enumerable:!0,get:function(){return r.JsonError}});var i=lMe();Object.defineProperty(e,"ParseError",{enumerable:!0,get:function(){return i.ParseError}})}(S5)),S5}var kce;function eOt(){if(kce)return uC;kce=1,Object.defineProperty(uC,"__esModule",{value:!0}),uC.bigint=void 0;const e=Sa(),t=Uo(),r=rg(),i=ds();function n(){const a={parse:(o,{breadcrumbsPrefix:s=[]}={})=>typeof o!="string"?{ok:!1,errors:[{path:s,message:(0,t.getErrorMessageForIncorrectType)(o,"string")}]}:{ok:!0,value:BigInt(o)},json:(o,{breadcrumbsPrefix:s=[]}={})=>typeof o=="bigint"?{ok:!0,value:o.toString()}:{ok:!1,errors:[{path:s,message:(0,t.getErrorMessageForIncorrectType)(o,"bigint")}]},getType:()=>e.SchemaType.BIGINT};return Object.assign(Object.assign({},(0,r.maybeSkipValidation)(a)),(0,i.getSchemaUtils)(a))}return uC.bigint=n,uC}var qce;function tOt(){return qce||(qce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bigint=void 0;var t=eOt();Object.defineProperty(e,"bigint",{enumerable:!0,get:function(){return t.bigint}})}(x5)),x5}var C5={},gC={},Wce;function rOt(){if(Wce)return gC;Wce=1,Object.defineProperty(gC,"__esModule",{value:!0}),gC.date=void 0;const e=Sa(),t=Uo(),r=rg(),i=ds(),n=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?([zZ]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;function a(){const o={parse:(s,{breadcrumbsPrefix:l=[]}={})=>typeof s!="string"?{ok:!1,errors:[{path:l,message:(0,t.getErrorMessageForIncorrectType)(s,"string")}]}:n.test(s)?{ok:!0,value:new Date(s)}:{ok:!1,errors:[{path:l,message:(0,t.getErrorMessageForIncorrectType)(s,"ISO 8601 date string")}]},json:(s,{breadcrumbsPrefix:l=[]}={})=>s instanceof Date?{ok:!0,value:s.toISOString()}:{ok:!1,errors:[{path:l,message:(0,t.getErrorMessageForIncorrectType)(s,"Date object")}]},getType:()=>e.SchemaType.DATE};return Object.assign(Object.assign({},(0,r.maybeSkipValidation)(o)),(0,i.getSchemaUtils)(o))}return gC.date=a,gC}var Gce;function iOt(){return Gce||(Gce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.date=void 0;var t=rOt();Object.defineProperty(e,"date",{enumerable:!0,get:function(){return t.date}})}(C5)),C5}var E5={},vC={},yC={},Hce;function Bv(){if(Hce)return yC;Hce=1,Object.defineProperty(yC,"__esModule",{value:!0}),yC.createIdentitySchemaCreator=void 0;const e=ds(),t=rg();function r(i,n){return()=>{const a={parse:n,json:n,getType:()=>i};return Object.assign(Object.assign({},(0,t.maybeSkipValidation)(a)),(0,e.getSchemaUtils)(a))}}return yC.createIdentitySchemaCreator=r,yC}var $ce;function nOt(){if($ce)return vC;$ce=1,Object.defineProperty(vC,"__esModule",{value:!0}),vC.enum_=void 0;const e=Sa(),t=Bv(),r=Uo();function i(n){const a=new Set(n);return(0,t.createIdentitySchemaCreator)(e.SchemaType.ENUM,(s,{allowUnrecognizedEnumValues:l,breadcrumbsPrefix:u=[]}={})=>typeof s!="string"?{ok:!1,errors:[{path:u,message:(0,r.getErrorMessageForIncorrectType)(s,"string")}]}:!a.has(s)&&!l?{ok:!1,errors:[{path:u,message:(0,r.getErrorMessageForIncorrectType)(s,"enum")}]}:{ok:!0,value:s})()}return vC.enum_=i,vC}var Xce;function uMe(){return Xce||(Xce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.enum_=void 0;var t=nOt();Object.defineProperty(e,"enum_",{enumerable:!0,get:function(){return t.enum_}})}(E5)),E5}var M5={},mm={},Yce;function cMe(){if(Yce)return mm;Yce=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.getMemoizedSchema=mm.constructLazyBaseSchema=mm.lazy=void 0;const e=ds();function t(n){const a=r(n);return Object.assign(Object.assign({},a),(0,e.getSchemaUtils)(a))}mm.lazy=t;function r(n){return{parse:(a,o)=>i(n).parse(a,o),json:(a,o)=>i(n).json(a,o),getType:()=>i(n).getType()}}mm.constructLazyBaseSchema=r;function i(n){const a=n;return a.__zurg_memoized==null&&(a.__zurg_memoized=n()),a.__zurg_memoized}return mm.getMemoizedSchema=i,mm}var bC={},P5={},Hy={},_C={},Kce;function dMe(){if(Kce)return _C;Kce=1,Object.defineProperty(_C,"__esModule",{value:!0}),_C.entries=void 0;function e(t){return Object.entries(t)}return _C.entries=e,_C}var wC={},Qce;function hMe(){if(Qce)return wC;Qce=1,Object.defineProperty(wC,"__esModule",{value:!0}),wC.filterObject=void 0;function e(t,r){const i=new Set(r);return Object.entries(t).reduce((n,[a,o])=>(i.has(a)&&(n[a]=o),n),{})}return wC.filterObject=e,wC}var xC={},Jce;function TI(){if(Jce)return xC;Jce=1,Object.defineProperty(xC,"__esModule",{value:!0}),xC.isPlainObject=void 0;function e(t){if(typeof t!="object"||t===null)return!1;if(Object.getPrototypeOf(t)===null)return!0;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}return xC.isPlainObject=e,xC}var SC={},Zce;function fMe(){if(Zce)return SC;Zce=1,Object.defineProperty(SC,"__esModule",{value:!0}),SC.keys=void 0;function e(t){return Object.keys(t)}return SC.keys=e,SC}var CC={},ede;function aOt(){if(ede)return CC;ede=1,Object.defineProperty(CC,"__esModule",{value:!0}),CC.partition=void 0;function e(t,r){const i=[],n=[];for(const a of t)r(a)?i.push(a):n.push(a);return[i,n]}return CC.partition=e,CC}var T5={},$y={},tde;function oOt(){if(tde)return $y;tde=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.withParsedProperties=$y.getObjectLikeUtils=void 0;const e=hMe(),t=Uo(),r=TI(),i=ds();function n(o){return{withParsedProperties:s=>a(o,s)}}$y.getObjectLikeUtils=n;function a(o,s){const l={parse:(u,c)=>{const d=o.parse(u,c);if(!d.ok)return d;const h=Object.entries(s).reduce((f,[g,p])=>Object.assign(Object.assign({},f),{[g]:typeof p=="function"?p(d.value):p}),{});return{ok:!0,value:Object.assign(Object.assign({},d.value),h)}},json:(u,c)=>{var d;if(!(0,r.isPlainObject)(u))return{ok:!1,errors:[{path:(d=c==null?void 0:c.breadcrumbsPrefix)!==null&&d!==void 0?d:[],message:(0,t.getErrorMessageForIncorrectType)(u,"object")}]};const h=new Set(Object.keys(s)),f=(0,e.filterObject)(u,Object.keys(u).filter(g=>!h.has(g)));return o.json(f,c)},getType:()=>o.getType()};return Object.assign(Object.assign(Object.assign({},l),(0,i.getSchemaUtils)(l)),n(l))}return $y.withParsedProperties=a,$y}var rde;function AI(){return rde||(rde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.withParsedProperties=e.getObjectLikeUtils=void 0;var t=oOt();Object.defineProperty(e,"getObjectLikeUtils",{enumerable:!0,get:function(){return t.getObjectLikeUtils}}),Object.defineProperty(e,"withParsedProperties",{enumerable:!0,get:function(){return t.withParsedProperties}})}(T5)),T5}var Xy={},ide;function pMe(){if(ide)return Xy;ide=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.isProperty=Xy.property=void 0;function e(r,i){return{rawKey:r,valueSchema:i,isProperty:!0}}Xy.property=e;function t(r){return r.isProperty}return Xy.isProperty=t,Xy}var nde;function mMe(){if(nde)return Hy;nde=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.getObjectUtils=Hy.object=void 0;const e=Sa(),t=dMe(),r=hMe(),i=Uo(),n=TI(),a=fMe(),o=rg(),s=aOt(),l=AI(),u=ds(),c=pMe();function d(y){const b={_getRawProperties:()=>Object.entries(y).map(([w,x])=>(0,c.isProperty)(x)?x.rawKey:w),_getParsedProperties:()=>(0,a.keys)(y),parse:(w,x)=>{const S={},C=[];for(const[T,M]of(0,t.entries)(y)){const A=(0,c.isProperty)(M)?M.rawKey:T,P=(0,c.isProperty)(M)?M.valueSchema:M,O={rawKey:A,parsedKey:T,valueSchema:P};S[A]=O,p(P)&&C.push(A)}return h({value:w,requiredKeys:C,getProperty:T=>{const M=S[T];if(M!=null)return{transformedKey:M.parsedKey,transform:A=>{var P;return M.valueSchema.parse(A,Object.assign(Object.assign({},x),{breadcrumbsPrefix:[...(P=x==null?void 0:x.breadcrumbsPrefix)!==null&&P!==void 0?P:[],T]}))}}},unrecognizedObjectKeys:x==null?void 0:x.unrecognizedObjectKeys,skipValidation:x==null?void 0:x.skipValidation,breadcrumbsPrefix:x==null?void 0:x.breadcrumbsPrefix,omitUndefined:x==null?void 0:x.omitUndefined})},json:(w,x)=>{const S=[];for(const[C,T]of(0,t.entries)(y)){const M=(0,c.isProperty)(T)?T.valueSchema:T;p(M)&&S.push(C)}return h({value:w,requiredKeys:S,getProperty:C=>{const T=y[C];if(T!=null)return(0,c.isProperty)(T)?{transformedKey:T.rawKey,transform:M=>{var A;return T.valueSchema.json(M,Object.assign(Object.assign({},x),{breadcrumbsPrefix:[...(A=x==null?void 0:x.breadcrumbsPrefix)!==null&&A!==void 0?A:[],C]}))}}:{transformedKey:C,transform:M=>{var A;return T.json(M,Object.assign(Object.assign({},x),{breadcrumbsPrefix:[...(A=x==null?void 0:x.breadcrumbsPrefix)!==null&&A!==void 0?A:[],C]}))}}},unrecognizedObjectKeys:x==null?void 0:x.unrecognizedObjectKeys,skipValidation:x==null?void 0:x.skipValidation,breadcrumbsPrefix:x==null?void 0:x.breadcrumbsPrefix,omitUndefined:x==null?void 0:x.omitUndefined})},getType:()=>e.SchemaType.OBJECT};return Object.assign(Object.assign(Object.assign(Object.assign({},(0,o.maybeSkipValidation)(b)),(0,u.getSchemaUtils)(b)),(0,l.getObjectLikeUtils)(b)),f(b))}Hy.object=d;function h({value:y,requiredKeys:b,getProperty:w,unrecognizedObjectKeys:x="fail",skipValidation:S=!1,breadcrumbsPrefix:C=[]}){if(!(0,n.isPlainObject)(y))return{ok:!1,errors:[{path:C,message:(0,i.getErrorMessageForIncorrectType)(y,"object")}]};const T=new Set(b),M=[],A={};for(const[P,O]of Object.entries(y)){const j=w(P);if(j!=null){T.delete(P);const D=j.transform(O);D.ok?A[j.transformedKey]=D.value:(A[P]=O,M.push(...D.errors))}else switch(x){case"fail":M.push({path:[...C,P],message:`Unexpected key "${P}"`});break;case"strip":break;case"passthrough":A[P]=O;break}}return M.push(...b.filter(P=>T.has(P)).map(P=>({path:C,message:`Missing required key "${P}"`}))),M.length===0||S?{ok:!0,value:A}:{ok:!1,errors:M}}function f(y){return{extend:b=>{const w={_getParsedProperties:()=>[...y._getParsedProperties(),...b._getParsedProperties()],_getRawProperties:()=>[...y._getRawProperties(),...b._getRawProperties()],parse:(x,S)=>g({extensionKeys:b._getRawProperties(),value:x,transformBase:C=>y.parse(C,S),transformExtension:C=>b.parse(C,S)}),json:(x,S)=>g({extensionKeys:b._getParsedProperties(),value:x,transformBase:C=>y.json(C,S),transformExtension:C=>b.json(C,S)}),getType:()=>e.SchemaType.OBJECT};return Object.assign(Object.assign(Object.assign(Object.assign({},w),(0,u.getSchemaUtils)(w)),(0,l.getObjectLikeUtils)(w)),f(w))},passthrough:()=>{const b={_getParsedProperties:()=>y._getParsedProperties(),_getRawProperties:()=>y._getRawProperties(),parse:(w,x)=>{const S=y.parse(w,Object.assign(Object.assign({},x),{unrecognizedObjectKeys:"passthrough"}));return S.ok?{ok:!0,value:Object.assign(Object.assign({},w),S.value)}:S},json:(w,x)=>{const S=y.json(w,Object.assign(Object.assign({},x),{unrecognizedObjectKeys:"passthrough"}));return S.ok?{ok:!0,value:Object.assign(Object.assign({},w),S.value)}:S},getType:()=>e.SchemaType.OBJECT};return Object.assign(Object.assign(Object.assign(Object.assign({},b),(0,u.getSchemaUtils)(b)),(0,l.getObjectLikeUtils)(b)),f(b))}}}Hy.getObjectUtils=f;function g({extensionKeys:y,value:b,transformBase:w,transformExtension:x}){const S=new Set(y),[C,T]=(0,s.partition)((0,a.keys)(b),P=>S.has(P)),M=w((0,r.filterObject)(b,T)),A=x((0,r.filterObject)(b,C));return M.ok&&A.ok?{ok:!0,value:Object.assign(Object.assign({},M.value),A.value)}:{ok:!1,errors:[...M.ok?[]:M.errors,...A.ok?[]:A.errors]}}function p(y){return!m(y)}function m(y){switch(y.getType()){case e.SchemaType.ANY:case e.SchemaType.UNKNOWN:case e.SchemaType.OPTIONAL:return!0;default:return!1}}return Hy}var EC={},ade;function sOt(){if(ade)return EC;ade=1,Object.defineProperty(EC,"__esModule",{value:!0}),EC.objectWithoutOptionalProperties=void 0;const e=mMe();function t(r){return(0,e.object)(r)}return EC.objectWithoutOptionalProperties=t,EC}var ode;function gMe(){return ode||(ode=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.property=e.isProperty=e.objectWithoutOptionalProperties=e.object=e.getObjectUtils=void 0;var t=mMe();Object.defineProperty(e,"getObjectUtils",{enumerable:!0,get:function(){return t.getObjectUtils}}),Object.defineProperty(e,"object",{enumerable:!0,get:function(){return t.object}});var r=sOt();Object.defineProperty(e,"objectWithoutOptionalProperties",{enumerable:!0,get:function(){return r.objectWithoutOptionalProperties}});var i=pMe();Object.defineProperty(e,"isProperty",{enumerable:!0,get:function(){return i.isProperty}}),Object.defineProperty(e,"property",{enumerable:!0,get:function(){return i.property}})}(P5)),P5}var sde;function lOt(){if(sde)return bC;sde=1,Object.defineProperty(bC,"__esModule",{value:!0}),bC.lazyObject=void 0;const e=gMe(),t=AI(),r=ds(),i=cMe();function n(a){const o=Object.assign(Object.assign({},(0,i.constructLazyBaseSchema)(a)),{_getRawProperties:()=>(0,i.getMemoizedSchema)(a)._getRawProperties(),_getParsedProperties:()=>(0,i.getMemoizedSchema)(a)._getParsedProperties()});return Object.assign(Object.assign(Object.assign(Object.assign({},o),(0,r.getSchemaUtils)(o)),(0,t.getObjectLikeUtils)(o)),(0,e.getObjectUtils)(o))}return bC.lazyObject=n,bC}var lde;function uOt(){return lde||(lde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.lazyObject=e.lazy=void 0;var t=cMe();Object.defineProperty(e,"lazy",{enumerable:!0,get:function(){return t.lazy}});var r=lOt();Object.defineProperty(e,"lazyObject",{enumerable:!0,get:function(){return r.lazyObject}})}(M5)),M5}var A5={},MC={},ude;function cOt(){if(ude)return MC;ude=1,Object.defineProperty(MC,"__esModule",{value:!0}),MC.list=void 0;const e=Sa(),t=Uo(),r=rg(),i=ds();function n(o){const s={parse:(l,u)=>a(l,(c,d)=>{var h;return o.parse(c,Object.assign(Object.assign({},u),{breadcrumbsPrefix:[...(h=u==null?void 0:u.breadcrumbsPrefix)!==null&&h!==void 0?h:[],`[${d}]`]}))}),json:(l,u)=>a(l,(c,d)=>{var h;return o.json(c,Object.assign(Object.assign({},u),{breadcrumbsPrefix:[...(h=u==null?void 0:u.breadcrumbsPrefix)!==null&&h!==void 0?h:[],`[${d}]`]}))}),getType:()=>e.SchemaType.LIST};return Object.assign(Object.assign({},(0,r.maybeSkipValidation)(s)),(0,i.getSchemaUtils)(s))}MC.list=n;function a(o,s){return Array.isArray(o)?o.map((u,c)=>s(u,c)).reduce((u,c)=>{if(u.ok&&c.ok)return{ok:!0,value:[...u.value,c.value]};const d=[];return u.ok||d.push(...u.errors),c.ok||d.push(...c.errors),{ok:!1,errors:d}},{ok:!0,value:[]}):{ok:!1,errors:[{message:(0,t.getErrorMessageForIncorrectType)(o,"list"),path:[]}]}}return MC}var cde;function vMe(){return cde||(cde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.list=void 0;var t=cOt();Object.defineProperty(e,"list",{enumerable:!0,get:function(){return t.list}})}(A5)),A5}var O5={},PC={},dde;function dOt(){if(dde)return PC;dde=1,Object.defineProperty(PC,"__esModule",{value:!0}),PC.stringLiteral=void 0;const e=Sa(),t=Bv(),r=Uo();function i(n){return(0,t.createIdentitySchemaCreator)(e.SchemaType.STRING_LITERAL,(o,{breadcrumbsPrefix:s=[]}={})=>o===n?{ok:!0,value:n}:{ok:!1,errors:[{path:s,message:(0,r.getErrorMessageForIncorrectType)(o,`"${n}"`)}]})()}return PC.stringLiteral=i,PC}var TC={},hde;function hOt(){if(hde)return TC;hde=1,Object.defineProperty(TC,"__esModule",{value:!0}),TC.booleanLiteral=void 0;const e=Sa(),t=Bv(),r=Uo();function i(n){return(0,t.createIdentitySchemaCreator)(e.SchemaType.BOOLEAN_LITERAL,(o,{breadcrumbsPrefix:s=[]}={})=>o===n?{ok:!0,value:n}:{ok:!1,errors:[{path:s,message:(0,r.getErrorMessageForIncorrectType)(o,`${n.toString()}`)}]})()}return TC.booleanLiteral=i,TC}var fde;function fOt(){return fde||(fde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.booleanLiteral=e.stringLiteral=void 0;var t=dOt();Object.defineProperty(e,"stringLiteral",{enumerable:!0,get:function(){return t.stringLiteral}});var r=hOt();Object.defineProperty(e,"booleanLiteral",{enumerable:!0,get:function(){return r.booleanLiteral}})}(O5)),O5}var R5={},AC={},pde;function pOt(){if(pde)return AC;pde=1,Object.defineProperty(AC,"__esModule",{value:!0}),AC.any=void 0;const e=Sa(),t=Bv();return AC.any=(0,t.createIdentitySchemaCreator)(e.SchemaType.ANY,r=>({ok:!0,value:r})),AC}var OC={},mde;function mOt(){if(mde)return OC;mde=1,Object.defineProperty(OC,"__esModule",{value:!0}),OC.boolean=void 0;const e=Sa(),t=Bv(),r=Uo();return OC.boolean=(0,t.createIdentitySchemaCreator)(e.SchemaType.BOOLEAN,(i,{breadcrumbsPrefix:n=[]}={})=>typeof i=="boolean"?{ok:!0,value:i}:{ok:!1,errors:[{path:n,message:(0,r.getErrorMessageForIncorrectType)(i,"boolean")}]}),OC}var RC={},gde;function gOt(){if(gde)return RC;gde=1,Object.defineProperty(RC,"__esModule",{value:!0}),RC.number=void 0;const e=Sa(),t=Bv(),r=Uo();return RC.number=(0,t.createIdentitySchemaCreator)(e.SchemaType.NUMBER,(i,{breadcrumbsPrefix:n=[]}={})=>typeof i=="number"?{ok:!0,value:i}:{ok:!1,errors:[{path:n,message:(0,r.getErrorMessageForIncorrectType)(i,"number")}]}),RC}var DC={},vde;function vOt(){if(vde)return DC;vde=1,Object.defineProperty(DC,"__esModule",{value:!0}),DC.string=void 0;const e=Sa(),t=Bv(),r=Uo();return DC.string=(0,t.createIdentitySchemaCreator)(e.SchemaType.STRING,(i,{breadcrumbsPrefix:n=[]}={})=>typeof i=="string"?{ok:!0,value:i}:{ok:!1,errors:[{path:n,message:(0,r.getErrorMessageForIncorrectType)(i,"string")}]}),DC}var IC={},yde;function yOt(){if(yde)return IC;yde=1,Object.defineProperty(IC,"__esModule",{value:!0}),IC.unknown=void 0;const e=Sa(),t=Bv();return IC.unknown=(0,t.createIdentitySchemaCreator)(e.SchemaType.UNKNOWN,r=>({ok:!0,value:r})),IC}var bde;function bOt(){return bde||(bde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.unknown=e.string=e.number=e.boolean=e.any=void 0;var t=pOt();Object.defineProperty(e,"any",{enumerable:!0,get:function(){return t.any}});var r=mOt();Object.defineProperty(e,"boolean",{enumerable:!0,get:function(){return r.boolean}});var i=gOt();Object.defineProperty(e,"number",{enumerable:!0,get:function(){return i.number}});var n=vOt();Object.defineProperty(e,"string",{enumerable:!0,get:function(){return n.string}});var a=yOt();Object.defineProperty(e,"unknown",{enumerable:!0,get:function(){return a.unknown}})}(R5)),R5}var D5={},jC={},_de;function _Ot(){if(_de)return jC;_de=1,Object.defineProperty(jC,"__esModule",{value:!0}),jC.record=void 0;const e=Sa(),t=dMe(),r=Uo(),i=TI(),n=rg(),a=ds();function o(l,u){const c={parse:(d,h)=>s({value:d,isKeyNumeric:l.getType()===e.SchemaType.NUMBER,transformKey:f=>{var g;return l.parse(f,Object.assign(Object.assign({},h),{breadcrumbsPrefix:[...(g=h==null?void 0:h.breadcrumbsPrefix)!==null&&g!==void 0?g:[],`${f} (key)`]}))},transformValue:(f,g)=>{var p;return u.parse(f,Object.assign(Object.assign({},h),{breadcrumbsPrefix:[...(p=h==null?void 0:h.breadcrumbsPrefix)!==null&&p!==void 0?p:[],`${g}`]}))},breadcrumbsPrefix:h==null?void 0:h.breadcrumbsPrefix}),json:(d,h)=>s({value:d,isKeyNumeric:l.getType()===e.SchemaType.NUMBER,transformKey:f=>{var g;return l.json(f,Object.assign(Object.assign({},h),{breadcrumbsPrefix:[...(g=h==null?void 0:h.breadcrumbsPrefix)!==null&&g!==void 0?g:[],`${f} (key)`]}))},transformValue:(f,g)=>{var p;return u.json(f,Object.assign(Object.assign({},h),{breadcrumbsPrefix:[...(p=h==null?void 0:h.breadcrumbsPrefix)!==null&&p!==void 0?p:[],`${g}`]}))},breadcrumbsPrefix:h==null?void 0:h.breadcrumbsPrefix}),getType:()=>e.SchemaType.RECORD};return Object.assign(Object.assign({},(0,n.maybeSkipValidation)(c)),(0,a.getSchemaUtils)(c))}jC.record=o;function s({value:l,isKeyNumeric:u,transformKey:c,transformValue:d,breadcrumbsPrefix:h=[]}){return(0,i.isPlainObject)(l)?(0,t.entries)(l).reduce((f,[g,p])=>{if(p==null)return f;const m=f;let y=g;if(u){const S=g.length>0?Number(g):NaN;isNaN(S)||(y=S)}const b=c(y),w=d(p,y);if(m.ok&&b.ok&&w.ok)return{ok:!0,value:Object.assign(Object.assign({},m.value),{[b.value]:w.value})};const x=[];return m.ok||x.push(...m.errors),b.ok||x.push(...b.errors),w.ok||x.push(...w.errors),{ok:!1,errors:x}},{ok:!0,value:{}}):{ok:!1,errors:[{path:h,message:(0,r.getErrorMessageForIncorrectType)(l,"object")}]}}return jC}var wde;function wOt(){return wde||(wde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.record=void 0;var t=_Ot();Object.defineProperty(e,"record",{enumerable:!0,get:function(){return t.record}})}(D5)),D5}var I5={},zC={},xde;function xOt(){if(xde)return zC;xde=1,Object.defineProperty(zC,"__esModule",{value:!0}),zC.set=void 0;const e=Sa(),t=Uo(),r=rg(),i=vMe(),n=ds();function a(o){const s=(0,i.list)(o),l={parse:(u,c)=>{const d=s.parse(u,c);return d.ok?{ok:!0,value:new Set(d.value)}:d},json:(u,c)=>{var d;return u instanceof Set?s.json([...u],c):{ok:!1,errors:[{path:(d=c==null?void 0:c.breadcrumbsPrefix)!==null&&d!==void 0?d:[],message:(0,t.getErrorMessageForIncorrectType)(u,"Set")}]}},getType:()=>e.SchemaType.SET};return Object.assign(Object.assign({},(0,r.maybeSkipValidation)(l)),(0,n.getSchemaUtils)(l))}return zC.set=a,zC}var Sde;function SOt(){return Sde||(Sde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.set=void 0;var t=xOt();Object.defineProperty(e,"set",{enumerable:!0,get:function(){return t.set}})}(I5)),I5}var j5={},BC={},Cde;function COt(){if(Cde)return BC;Cde=1,Object.defineProperty(BC,"__esModule",{value:!0}),BC.undiscriminatedUnion=void 0;const e=Sa(),t=rg(),r=ds();function i(a){const o={parse:(s,l)=>n((u,c)=>u.parse(s,c),a,l),json:(s,l)=>n((u,c)=>u.json(s,c),a,l),getType:()=>e.SchemaType.UNDISCRIMINATED_UNION};return Object.assign(Object.assign({},(0,t.maybeSkipValidation)(o)),(0,r.getSchemaUtils)(o))}BC.undiscriminatedUnion=i;function n(a,o,s){const l=[];for(const[u,c]of o.entries()){const d=a(c,Object.assign(Object.assign({},s),{skipValidation:!1}));if(d.ok)return d;for(const h of d.errors)l.push({path:h.path,message:`[Variant ${u}] ${h.message}`})}return{ok:!1,errors:l}}return BC}var Ede;function EOt(){return Ede||(Ede=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.undiscriminatedUnion=void 0;var t=COt();Object.defineProperty(e,"undiscriminatedUnion",{enumerable:!0,get:function(){return t.undiscriminatedUnion}})}(j5)),j5}var z5={},LC={},Mde;function MOt(){if(Mde)return LC;Mde=1,Object.defineProperty(LC,"__esModule",{value:!0}),LC.discriminant=void 0;function e(t,r){return{parsedDiscriminant:t,rawDiscriminant:r}}return LC.discriminant=e,LC}var Yy={},Pde;function POt(){if(Pde)return Yy;Pde=1;var e=Yy&&Yy.__rest||function(d,h){var f={};for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.indexOf(g)<0&&(f[g]=d[g]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,g=Object.getOwnPropertySymbols(d);p<g.length;p++)h.indexOf(g[p])<0&&Object.prototype.propertyIsEnumerable.call(d,g[p])&&(f[g[p]]=d[g[p]]);return f};Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.union=void 0;const t=Sa(),r=Uo(),i=TI(),n=fMe(),a=rg(),o=uMe(),s=AI(),l=ds();function u(d,h){const f=typeof d=="string"?d:d.rawDiscriminant,g=typeof d=="string"?d:d.parsedDiscriminant,p=(0,o.enum_)((0,n.keys)(h)),m={parse:(y,b)=>c({value:y,discriminant:f,transformedDiscriminant:g,transformDiscriminantValue:w=>{var x;return p.parse(w,{allowUnrecognizedEnumValues:b==null?void 0:b.allowUnrecognizedUnionMembers,breadcrumbsPrefix:[...(x=b==null?void 0:b.breadcrumbsPrefix)!==null&&x!==void 0?x:[],f]})},getAdditionalPropertiesSchema:w=>h[w],allowUnrecognizedUnionMembers:b==null?void 0:b.allowUnrecognizedUnionMembers,transformAdditionalProperties:(w,x)=>x.parse(w,b),breadcrumbsPrefix:b==null?void 0:b.breadcrumbsPrefix}),json:(y,b)=>c({value:y,discriminant:g,transformedDiscriminant:f,transformDiscriminantValue:w=>{var x;return p.json(w,{allowUnrecognizedEnumValues:b==null?void 0:b.allowUnrecognizedUnionMembers,breadcrumbsPrefix:[...(x=b==null?void 0:b.breadcrumbsPrefix)!==null&&x!==void 0?x:[],g]})},getAdditionalPropertiesSchema:w=>h[w],allowUnrecognizedUnionMembers:b==null?void 0:b.allowUnrecognizedUnionMembers,transformAdditionalProperties:(w,x)=>x.json(w,b),breadcrumbsPrefix:b==null?void 0:b.breadcrumbsPrefix}),getType:()=>t.SchemaType.UNION};return Object.assign(Object.assign(Object.assign({},(0,a.maybeSkipValidation)(m)),(0,l.getSchemaUtils)(m)),(0,s.getObjectLikeUtils)(m))}Yy.union=u;function c({value:d,discriminant:h,transformedDiscriminant:f,transformDiscriminantValue:g,getAdditionalPropertiesSchema:p,allowUnrecognizedUnionMembers:m=!1,transformAdditionalProperties:y,breadcrumbsPrefix:b=[]}){if(!(0,i.isPlainObject)(d))return{ok:!1,errors:[{path:b,message:(0,r.getErrorMessageForIncorrectType)(d,"object")}]};const w=d,x=h,S=w[x],C=e(w,[typeof x=="symbol"?x:x+""]);if(S==null)return{ok:!1,errors:[{path:b,message:`Missing discriminant ("${h}")`}]};const T=g(S);if(!T.ok)return{ok:!1,errors:T.errors};const M=p(T.value);if(M==null)return m?{ok:!0,value:Object.assign({[f]:T.value},C)}:{ok:!1,errors:[{path:[...b,h],message:"Unexpected discriminant value"}]};const A=y(C,M);return A.ok?{ok:!0,value:Object.assign({[f]:S},A.value)}:A}return Yy}var Tde;function TOt(){return Tde||(Tde=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.union=e.discriminant=void 0;var t=MOt();Object.defineProperty(e,"discriminant",{enumerable:!0,get:function(){return t.discriminant}});var r=POt();Object.defineProperty(e,"union",{enumerable:!0,get:function(){return r.union}})}(z5)),z5}var Ade;function AOt(){return Ade||(Ade=1,function(e){var t=Gy&&Gy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Gy&&Gy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(tOt(),e),r(iOt(),e),r(uMe(),e),r(uOt(),e),r(vMe(),e),r(fOt(),e),r(gMe(),e),r(AI(),e),r(bOt(),e),r(wOt(),e),r(ds(),e),r(SOt(),e),r(EOt(),e),r(TOt(),e)}(Gy)),Gy}var Ode;function OOt(){return Ode||(Ode=1,function(e){var t=Wy&&Wy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Wy&&Wy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(AOt(),e)}(Wy)),Wy}var Rde;function Ie(){return Rde||(Rde=1,function(e){var t=Ll&&Ll.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),r=Ll&&Ll.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),i=Ll&&Ll.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,a,s)},n=Ll&&Ll.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&t(o,a,s);return r(o,a),o};Object.defineProperty(e,"__esModule",{value:!0}),e.serialization=void 0,i(VAt(),e),i(HAt(),e),i($At(),e),i(DP(),e),i(JAt(),e),e.serialization=n(OOt())}(Ll)),Ll}var sn={},Dde;function ROt(){if(Dde)return sn;Dde=1;var e=sn&&sn.__awaiter||function(g,p,m,y){function b(w){return w instanceof m?w:new m(function(x){x(w)})}return new(m||(m=Promise))(function(w,x){function S(M){try{T(y.next(M))}catch(A){x(A)}}function C(M){try{T(y.throw(M))}catch(A){x(A)}}function T(M){M.done?w(M.value):b(M.value).then(S,C)}T((y=y.apply(g,p||[])).next())})},t=sn&&sn.__asyncValues||function(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=g[Symbol.asyncIterator],m;return p?p.call(g):(g=typeof __values=="function"?__values(g):g[Symbol.iterator](),m={},y("next"),y("throw"),y("return"),m[Symbol.asyncIterator]=function(){return this},m);function y(w){m[w]=g[w]&&function(x){return new Promise(function(S,C){x=g[w](x),b(S,C,x.done,x.value)})}}function b(w,x,S,C){Promise.resolve(C).then(function(T){w({value:T,done:S})},x)}},r=sn&&sn.__await||function(g){return this instanceof r?(this.v=g,this):new r(g)},i=sn&&sn.__asyncGenerator||function(g,p,m){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y=m.apply(g,p||[]),b,w=[];return b={},x("next"),x("throw"),x("return"),b[Symbol.asyncIterator]=function(){return this},b;function x(P){y[P]&&(b[P]=function(O){return new Promise(function(j,D){w.push([P,O,j,D])>1||S(P,O)})})}function S(P,O){try{C(y[P](O))}catch(j){A(w[0][3],j)}}function C(P){P.value instanceof r?Promise.resolve(P.value.v).then(T,M):A(w[0][2],P)}function T(P){S("next",P)}function M(P){S("throw",P)}function A(P,O){P(O),w.shift(),w.length&&S(w[0][0],w[0][1])}};Object.defineProperty(sn,"__esModule",{value:!0}),sn.readableStreamAsyncIterable=sn._decodeChunks=sn.LineDecoder=sn._iterSSEMessages=sn.StreamUtils=void 0;const n=pn();class a{constructor(p,m){this.iterator=p,this.controller=m}static fromSSEResponse(p,m){let y=!1;function b(){return i(this,arguments,function*(){var x,S;if(y)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");y=!0;let C=!1;try{try{for(var T=t(o(p,m)),M;M=yield r(T.next()),!M.done;){const A=M.value;if(!C){if(A.data.startsWith("[DONE]")){C=!0;continue}if(A.event===null){let P;try{P=JSON.parse(A.data)}catch(O){throw console.error("Could not parse message into JSON:",A.data),console.error("From chunk:",A.raw),O}if(P&&P.error)throw new n.CohereError({message:`Error: ${P.error}`});yield yield r(P)}else{let P;try{P=JSON.parse(A.data)}catch(O){throw console.error("Could not parse message into JSON:",A.data),console.error("From chunk:",A.raw),O}if(A.event=="error")throw new n.CohereError({message:`Error: ${P.message}, ${P.error}`});yield yield r({event:A.event,data:P})}}}}catch(A){x={error:A}}finally{try{M&&!M.done&&(S=T.return)&&(yield r(S.call(T)))}finally{if(x)throw x.error}}C=!0}catch(A){if(A instanceof Error&&A.name==="AbortError")return yield r(void 0);throw A}finally{C||m==null||m.abort()}})}return new a(b,m)}static fromReadableStream(p,m){let y=!1;function b(){return i(this,arguments,function*(){var S,C;const T=new c,M=f(p);try{for(var A=t(M),P;P=yield r(A.next()),!P.done;){const O=P.value;for(const j of T.decode(O))yield yield r(j)}}catch(O){S={error:O}}finally{try{P&&!P.done&&(C=A.return)&&(yield r(C.call(A)))}finally{if(S)throw S.error}}for(const O of T.flush())yield yield r(O)})}function w(){return i(this,arguments,function*(){var S,C;if(y)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");y=!0;let T=!1;try{try{for(var M=t(b()),A;A=yield r(M.next()),!A.done;){const P=A.value;T||P&&(yield yield r(JSON.parse(P)))}}catch(P){S={error:P}}finally{try{A&&!A.done&&(C=M.return)&&(yield r(C.call(M)))}finally{if(S)throw S.error}}T=!0}catch(P){if(P instanceof Error&&P.name==="AbortError")return yield r(void 0);throw P}finally{T||m==null||m.abort()}})}return new a(w,m)}[Symbol.asyncIterator](){return this.iterator()}tee(){const p=[],m=[],y=this.iterator(),b=w=>({next:()=>{if(w.length===0){const x=y.next();p.push(x),m.push(x)}return w.shift()}});return[new a(()=>b(p),this.controller),new a(()=>b(m),this.controller)]}toReadableStream(){const p=this;let m;const y=new TextEncoder;return new ReadableStream({start(){return e(this,void 0,void 0,function*(){m=p[Symbol.asyncIterator]()})},pull(b){return e(this,void 0,void 0,function*(){try{const{value:w,done:x}=yield m.next();if(x)return b.close();const S=y.encode(JSON.stringify(w)+`
`);b.enqueue(S)}catch(w){b.error(w)}})},cancel(){var b;return e(this,void 0,void 0,function*(){yield(b=m.return)===null||b===void 0?void 0:b.call(m)})}})}}sn.StreamUtils=a;function o(g,p){return i(this,arguments,function*(){var y,b;if(!g.body)throw p==null||p.abort(),new n.CohereError({message:"Attempted to iterate over a response with no body"});const w=new u,x=new c,S=f(g.body);try{for(var C=t(s(S)),T;T=yield r(C.next()),!T.done;){const M=T.value;for(const A of x.decode(M)){const P=w.decode(A);P&&(yield yield r(P))}}}catch(M){y={error:M}}finally{try{T&&!T.done&&(b=C.return)&&(yield r(b.call(C)))}finally{if(y)throw y.error}}for(const M of x.flush()){const A=w.decode(M);A&&(yield yield r(A))}})}sn._iterSSEMessages=o;function s(g){return i(this,arguments,function*(){var m,y;let b=new Uint8Array;try{for(var w=t(g),x;x=yield r(w.next()),!x.done;){const S=x.value;if(S==null)continue;const C=S instanceof ArrayBuffer?new Uint8Array(S):typeof S=="string"?new TextEncoder().encode(S):S;let T=new Uint8Array(b.length+C.length);T.set(b),T.set(C,b.length),b=T;let M;for(;(M=l(b))!==-1;)yield yield r(b.slice(0,M)),b=b.slice(M)}}catch(S){m={error:S}}finally{try{x&&!x.done&&(y=w.return)&&(yield r(y.call(w)))}finally{if(m)throw m.error}}b.length>0&&(yield yield r(b))})}function l(g){for(let y=0;y<g.length-2;y++){if(g[y]===10&&g[y+1]===10||g[y]===13&&g[y+1]===13)return y+2;if(g[y]===13&&g[y+1]===10&&y+3<g.length&&g[y+2]===13&&g[y+3]===10)return y+4}return-1}class u{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(p){if(p.endsWith("\r")&&(p=p.substring(0,p.length-1)),!p){if(!this.event&&!this.data.length)return null;const w={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],w}if(this.chunks.push(p),p.startsWith(":"))return null;let[m,y,b]=h(p,":");return b.startsWith(" ")&&(b=b.substring(1)),m==="event"?this.event=b:m==="data"&&this.data.push(b),null}}class c{constructor(){this.buffer=[],this.trailingCR=!1}decode(p){let m=this.decodeText(p);if(this.trailingCR&&(m="\r"+m,this.trailingCR=!1),m.endsWith("\r")&&(this.trailingCR=!0,m=m.slice(0,-1)),!m)return[];const y=c.NEWLINE_CHARS.has(m[m.length-1]||"");let b=m.split(c.NEWLINE_REGEXP);return y&&b.pop(),b.length===1&&!y?(this.buffer.push(b[0]),[]):(this.buffer.length>0&&(b=[this.buffer.join("")+b[0],...b.slice(1)],this.buffer=[]),y||(this.buffer=[b.pop()||""]),b)}decodeText(p){var m;if(p==null)return"";if(typeof p=="string")return p;if(typeof Buffer<"u"){if(p instanceof Buffer)return p.toString();if(p instanceof Uint8Array)return Buffer.from(p).toString();throw new n.CohereError({message:`Unexpected: received non-Uint8Array (${p.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`})}if(typeof TextDecoder<"u"){if(p instanceof Uint8Array||p instanceof ArrayBuffer)return(m=this.textDecoder)!==null&&m!==void 0||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(p);throw new n.CohereError({message:`Unexpected: received non-Uint8Array/ArrayBuffer (${p.constructor.name}) in a web platform. Please report this error.`})}throw new n.CohereError({message:"Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error."})}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const p=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,p}}sn.LineDecoder=c,c.NEWLINE_CHARS=new Set([`
`,"\r"]),c.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function d(g){const p=new c,m=[];for(const y of g)m.push(...p.decode(y));return m}sn._decodeChunks=d;function h(g,p){const m=g.indexOf(p);return m!==-1?[g.substring(0,m),p,g.substring(m+p.length)]:[g,"",""]}function f(g){if(g[Symbol.asyncIterator])return g;const p=g.getReader();return{next(){return e(this,void 0,void 0,function*(){try{const m=yield p.read();return m!=null&&m.done&&p.releaseLock(),m}catch(m){throw p.releaseLock(),m}})},return(){return e(this,void 0,void 0,function*(){const m=p.cancel();return p.releaseLock(),yield m,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}return sn.readableStreamAsyncIterable=f,sn}var Ky={},Fl={},Qy={},Jy={},Nl={},Ul={},Ide;function OI(){if(Ide)return Ul;Ide=1;var e=Ul&&Ul.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ul&&Ul.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ul&&Ul.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.Document=void 0;const i=r(Ie());return Ul.Document=i.serialization.object({data:i.serialization.record(i.serialization.string(),i.serialization.unknown()),id:i.serialization.string().optional()}),Ul}var jde;function yMe(){if(jde)return Nl;jde=1;var e=Nl&&Nl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Nl&&Nl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Nl&&Nl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.V2ChatStreamRequestDocumentsItem=void 0;const i=r(Ie()),n=OI();return Nl.V2ChatStreamRequestDocumentsItem=i.serialization.undiscriminatedUnion([i.serialization.string(),n.Document]),Nl}var Vl={},zde;function bMe(){if(zde)return Vl;zde=1;var e=Vl&&Vl.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Vl&&Vl.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Vl&&Vl.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.V2ChatStreamRequestSafetyMode=void 0;const i=r(Ie());return Vl.V2ChatStreamRequestSafetyMode=i.serialization.enum_(["CONTEXTUAL","STRICT","OFF"]),Vl}var kl={},Bde;function _Me(){if(Bde)return kl;Bde=1;var e=kl&&kl.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=kl&&kl.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=kl&&kl.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(kl,"__esModule",{value:!0}),kl.V2ChatStreamRequestToolChoice=void 0;const i=r(Ie());return kl.V2ChatStreamRequestToolChoice=i.serialization.enum_(["REQUIRED","NONE"]),kl}var ql={},Lde;function wMe(){if(Lde)return ql;Lde=1;var e=ql&&ql.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=ql&&ql.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=ql&&ql.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(ql,"__esModule",{value:!0}),ql.V2ChatRequestDocumentsItem=void 0;const i=r(Ie()),n=OI();return ql.V2ChatRequestDocumentsItem=i.serialization.undiscriminatedUnion([i.serialization.string(),n.Document]),ql}var Wl={},Fde;function xMe(){if(Fde)return Wl;Fde=1;var e=Wl&&Wl.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Wl&&Wl.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Wl&&Wl.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.V2ChatRequestSafetyMode=void 0;const i=r(Ie());return Wl.V2ChatRequestSafetyMode=i.serialization.enum_(["CONTEXTUAL","STRICT","OFF"]),Wl}var Gl={},Nde;function SMe(){if(Nde)return Gl;Nde=1;var e=Gl&&Gl.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Gl&&Gl.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Gl&&Gl.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.V2ChatRequestToolChoice=void 0;const i=r(Ie());return Gl.V2ChatRequestToolChoice=i.serialization.enum_(["REQUIRED","NONE"]),Gl}var Hl={},Ude;function CMe(){if(Ude)return Hl;Ude=1;var e=Hl&&Hl.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Hl&&Hl.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Hl&&Hl.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.V2EmbedRequestTruncate=void 0;const i=r(Ie());return Hl.V2EmbedRequestTruncate=i.serialization.enum_(["NONE","START","END"]),Hl}var $l={},Vde;function EMe(){if(Vde)return $l;Vde=1;var e=$l&&$l.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=$l&&$l.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=$l&&$l.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty($l,"__esModule",{value:!0}),$l.V2RerankResponseResultsItemDocument=void 0;const i=r(Ie());return $l.V2RerankResponseResultsItemDocument=i.serialization.object({text:i.serialization.string()}),$l}var Xl={},kde;function MMe(){if(kde)return Xl;kde=1;var e=Xl&&Xl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Xl&&Xl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Xl&&Xl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.V2RerankResponseResultsItem=void 0;const i=r(Ie()),n=EMe();return Xl.V2RerankResponseResultsItem=i.serialization.object({document:n.V2RerankResponseResultsItemDocument.optional(),index:i.serialization.number(),relevanceScore:i.serialization.property("relevance_score",i.serialization.number())}),Xl}var Yl={},Kl={},Ql={},qde;function PMe(){if(qde)return Ql;qde=1;var e=Ql&&Ql.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ql&&Ql.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ql&&Ql.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.ApiMetaApiVersion=void 0;const i=r(Ie());return Ql.ApiMetaApiVersion=i.serialization.object({version:i.serialization.string(),isDeprecated:i.serialization.property("is_deprecated",i.serialization.boolean().optional()),isExperimental:i.serialization.property("is_experimental",i.serialization.boolean().optional())}),Ql}var Jl={},Wde;function TMe(){if(Wde)return Jl;Wde=1;var e=Jl&&Jl.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Jl&&Jl.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Jl&&Jl.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.ApiMetaBilledUnits=void 0;const i=r(Ie());return Jl.ApiMetaBilledUnits=i.serialization.object({images:i.serialization.number().optional(),inputTokens:i.serialization.property("input_tokens",i.serialization.number().optional()),outputTokens:i.serialization.property("output_tokens",i.serialization.number().optional()),searchUnits:i.serialization.property("search_units",i.serialization.number().optional()),classifications:i.serialization.number().optional()}),Jl}var Zl={},Gde;function AMe(){if(Gde)return Zl;Gde=1;var e=Zl&&Zl.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Zl&&Zl.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Zl&&Zl.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.ApiMetaTokens=void 0;const i=r(Ie());return Zl.ApiMetaTokens=i.serialization.object({inputTokens:i.serialization.property("input_tokens",i.serialization.number().optional()),outputTokens:i.serialization.property("output_tokens",i.serialization.number().optional())}),Zl}var Hde;function hs(){if(Hde)return Kl;Hde=1;var e=Kl&&Kl.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Kl&&Kl.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Kl&&Kl.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.ApiMeta=void 0;const i=r(Ie()),n=PMe(),a=TMe(),o=AMe();return Kl.ApiMeta=i.serialization.object({apiVersion:i.serialization.property("api_version",n.ApiMetaApiVersion.optional()),billedUnits:i.serialization.property("billed_units",a.ApiMetaBilledUnits.optional()),tokens:o.ApiMetaTokens.optional(),warnings:i.serialization.list(i.serialization.string()).optional()}),Kl}var $de;function DOt(){if($de)return Yl;$de=1;var e=Yl&&Yl.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Yl&&Yl.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Yl&&Yl.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.V2RerankResponse=void 0;const i=r(Ie()),n=MMe(),a=hs();return Yl.V2RerankResponse=i.serialization.object({id:i.serialization.string().optional(),results:i.serialization.list(n.V2RerankResponseResultsItem),meta:a.ApiMeta.optional()}),Yl}var Xde;function OMe(){return Xde||(Xde=1,function(e){var t=Jy&&Jy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Jy&&Jy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(yMe(),e),r(bMe(),e),r(_Me(),e),r(wMe(),e),r(xMe(),e),r(SMe(),e),r(CMe(),e),r(EMe(),e),r(MMe(),e),r(DOt(),e)}(Jy)),Jy}var Zy={},B5={},eu={},tu={},ru={},iu={},nu={},au={},ou={},Yde;function Nw(){if(Yde)return ou;Yde=1;var e=ou&&ou.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=ou&&ou.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=ou&&ou.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(ou,"__esModule",{value:!0}),ou.TextContent=void 0;const i=r(Ie());return ou.TextContent=i.serialization.object({text:i.serialization.string()}),ou}var su={},lu={},Kde;function RMe(){if(Kde)return lu;Kde=1;var e=lu&&lu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=lu&&lu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=lu&&lu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(lu,"__esModule",{value:!0}),lu.ImageUrl=void 0;const i=r(Ie());return lu.ImageUrl=i.serialization.object({url:i.serialization.string()}),lu}var Qde;function DMe(){if(Qde)return su;Qde=1;var e=su&&su.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=su&&su.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=su&&su.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(su,"__esModule",{value:!0}),su.ImageContent=void 0;const i=r(Ie()),n=RMe();return su.ImageContent=i.serialization.object({imageUrl:i.serialization.property("image_url",n.ImageUrl)}),su}var Jde;function IMe(){if(Jde)return au;Jde=1;var e=au&&au.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=au&&au.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=au&&au.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(au,"__esModule",{value:!0}),au.Content=void 0;const i=r(Ie()),n=Nw(),a=DMe();return au.Content=i.serialization.union("type",{text:n.TextContent,image_url:a.ImageContent}).transform({transform:o=>o,untransform:o=>o}),au}var Zde;function jMe(){if(Zde)return nu;Zde=1;var e=nu&&nu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=nu&&nu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=nu&&nu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(nu,"__esModule",{value:!0}),nu.UserMessageContent=void 0;const i=r(Ie()),n=IMe();return nu.UserMessageContent=i.serialization.undiscriminatedUnion([i.serialization.string(),i.serialization.list(n.Content)]),nu}var ehe;function zMe(){if(ehe)return iu;ehe=1;var e=iu&&iu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=iu&&iu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=iu&&iu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(iu,"__esModule",{value:!0}),iu.UserMessage=void 0;const i=r(Ie()),n=jMe();return iu.UserMessage=i.serialization.object({content:n.UserMessageContent}),iu}var uu={},cu={},du={},the;function BMe(){if(the)return du;the=1;var e=du&&du.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=du&&du.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=du&&du.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(du,"__esModule",{value:!0}),du.ToolCallV2Function=void 0;const i=r(Ie());return du.ToolCallV2Function=i.serialization.object({name:i.serialization.string().optional(),arguments:i.serialization.string().optional()}),du}var rhe;function RI(){if(rhe)return cu;rhe=1;var e=cu&&cu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=cu&&cu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=cu&&cu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(cu,"__esModule",{value:!0}),cu.ToolCallV2=void 0;const i=r(Ie()),n=BMe();return cu.ToolCallV2=i.serialization.object({id:i.serialization.string().optional(),type:i.serialization.stringLiteral("function").optional(),function:n.ToolCallV2Function.optional()}),cu}var hu={},fu={},ihe;function LMe(){if(ihe)return fu;ihe=1;var e=fu&&fu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=fu&&fu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=fu&&fu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(fu,"__esModule",{value:!0}),fu.AssistantMessageContentItem=void 0;const i=r(Ie()),n=Nw();return fu.AssistantMessageContentItem=i.serialization.union("type",{text:n.TextContent}).transform({transform:a=>a,untransform:a=>a}),fu}var nhe;function FMe(){if(nhe)return hu;nhe=1;var e=hu&&hu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=hu&&hu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=hu&&hu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(hu,"__esModule",{value:!0}),hu.AssistantMessageContent=void 0;const i=r(Ie()),n=LMe();return hu.AssistantMessageContent=i.serialization.undiscriminatedUnion([i.serialization.string(),i.serialization.list(n.AssistantMessageContentItem)]),hu}var pu={},mu={},gu={},ahe;function NMe(){if(ahe)return gu;ahe=1;var e=gu&&gu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=gu&&gu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=gu&&gu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(gu,"__esModule",{value:!0}),gu.ToolSource=void 0;const i=r(Ie());return gu.ToolSource=i.serialization.object({id:i.serialization.string().optional(),toolOutput:i.serialization.property("tool_output",i.serialization.record(i.serialization.string(),i.serialization.unknown()).optional())}),gu}var vu={},ohe;function UMe(){if(ohe)return vu;ohe=1;var e=vu&&vu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=vu&&vu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=vu&&vu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(vu,"__esModule",{value:!0}),vu.DocumentSource=void 0;const i=r(Ie());return vu.DocumentSource=i.serialization.object({id:i.serialization.string().optional(),document:i.serialization.record(i.serialization.string(),i.serialization.unknown()).optional()}),vu}var she;function VMe(){if(she)return mu;she=1;var e=mu&&mu.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=mu&&mu.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=mu&&mu.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(mu,"__esModule",{value:!0}),mu.Source=void 0;const i=r(Ie()),n=NMe(),a=UMe();return mu.Source=i.serialization.union("type",{tool:n.ToolSource,document:a.DocumentSource}).transform({transform:o=>o,untransform:o=>o}),mu}var yu={},lhe;function kMe(){if(lhe)return yu;lhe=1;var e=yu&&yu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=yu&&yu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=yu&&yu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(yu,"__esModule",{value:!0}),yu.CitationType=void 0;const i=r(Ie());return yu.CitationType=i.serialization.enum_(["TEXT_CONTENT","PLAN"]),yu}var uhe;function DI(){if(uhe)return pu;uhe=1;var e=pu&&pu.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=pu&&pu.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=pu&&pu.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(pu,"__esModule",{value:!0}),pu.Citation=void 0;const i=r(Ie()),n=VMe(),a=kMe();return pu.Citation=i.serialization.object({start:i.serialization.number().optional(),end:i.serialization.number().optional(),text:i.serialization.string().optional(),sources:i.serialization.list(n.Source).optional(),type:a.CitationType.optional()}),pu}var che;function qMe(){if(che)return uu;che=1;var e=uu&&uu.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=uu&&uu.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=uu&&uu.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(uu,"__esModule",{value:!0}),uu.AssistantMessage=void 0;const i=r(Ie()),n=RI(),a=FMe(),o=DI();return uu.AssistantMessage=i.serialization.object({toolCalls:i.serialization.property("tool_calls",i.serialization.list(n.ToolCallV2).optional()),toolPlan:i.serialization.property("tool_plan",i.serialization.string().optional()),content:a.AssistantMessageContent.optional(),citations:i.serialization.list(o.Citation).optional()}),uu}var bu={},_u={},wu={},dhe;function WMe(){if(dhe)return wu;dhe=1;var e=wu&&wu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=wu&&wu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=wu&&wu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(wu,"__esModule",{value:!0}),wu.SystemMessageContentItem=void 0;const i=r(Ie()),n=Nw();return wu.SystemMessageContentItem=i.serialization.union("type",{text:n.TextContent}).transform({transform:a=>a,untransform:a=>a}),wu}var hhe;function GMe(){if(hhe)return _u;hhe=1;var e=_u&&_u.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=_u&&_u.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=_u&&_u.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(_u,"__esModule",{value:!0}),_u.SystemMessageContent=void 0;const i=r(Ie()),n=WMe();return _u.SystemMessageContent=i.serialization.undiscriminatedUnion([i.serialization.string(),i.serialization.list(n.SystemMessageContentItem)]),_u}var fhe;function HMe(){if(fhe)return bu;fhe=1;var e=bu&&bu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=bu&&bu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=bu&&bu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(bu,"__esModule",{value:!0}),bu.SystemMessage=void 0;const i=r(Ie()),n=GMe();return bu.SystemMessage=i.serialization.object({content:n.SystemMessageContent}),bu}var xu={},Su={},Cu={},Eu={},phe;function $Me(){if(phe)return Eu;phe=1;var e=Eu&&Eu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Eu&&Eu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Eu&&Eu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.DocumentContent=void 0;const i=r(Ie()),n=OI();return Eu.DocumentContent=i.serialization.object({document:n.Document}),Eu}var mhe;function XMe(){if(mhe)return Cu;mhe=1;var e=Cu&&Cu.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Cu&&Cu.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Cu&&Cu.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.ToolContent=void 0;const i=r(Ie()),n=Nw(),a=$Me();return Cu.ToolContent=i.serialization.union("type",{text:n.TextContent,document:a.DocumentContent}).transform({transform:o=>o,untransform:o=>o}),Cu}var ghe;function YMe(){if(ghe)return Su;ghe=1;var e=Su&&Su.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Su&&Su.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Su&&Su.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Su,"__esModule",{value:!0}),Su.ToolMessageV2Content=void 0;const i=r(Ie()),n=XMe();return Su.ToolMessageV2Content=i.serialization.undiscriminatedUnion([i.serialization.string(),i.serialization.list(n.ToolContent)]),Su}var vhe;function KMe(){if(vhe)return xu;vhe=1;var e=xu&&xu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=xu&&xu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=xu&&xu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(xu,"__esModule",{value:!0}),xu.ToolMessageV2=void 0;const i=r(Ie()),n=YMe();return xu.ToolMessageV2=i.serialization.object({toolCallId:i.serialization.property("tool_call_id",i.serialization.string()),content:n.ToolMessageV2Content}),xu}var yhe;function QMe(){if(yhe)return ru;yhe=1;var e=ru&&ru.__createBinding||(Object.create?function(l,u,c,d){d===void 0&&(d=c);var h=Object.getOwnPropertyDescriptor(u,c);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(l,d,h)}:function(l,u,c,d){d===void 0&&(d=c),l[d]=u[c]}),t=ru&&ru.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),r=ru&&ru.__importStar||function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var c in l)c!=="default"&&Object.prototype.hasOwnProperty.call(l,c)&&e(u,l,c);return t(u,l),u};Object.defineProperty(ru,"__esModule",{value:!0}),ru.ChatMessageV2=void 0;const i=r(Ie()),n=zMe(),a=qMe(),o=HMe(),s=KMe();return ru.ChatMessageV2=i.serialization.union("role",{user:n.UserMessage,assistant:a.AssistantMessage,system:o.SystemMessage,tool:s.ToolMessageV2}).transform({transform:l=>l,untransform:l=>l}),ru}var bhe;function KG(){if(bhe)return tu;bhe=1;var e=tu&&tu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=tu&&tu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=tu&&tu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(tu,"__esModule",{value:!0}),tu.ChatMessages=void 0;const i=r(Ie()),n=QMe();return tu.ChatMessages=i.serialization.list(n.ChatMessageV2),tu}var Mu={},Pu={},_he;function JMe(){if(_he)return Pu;_he=1;var e=Pu&&Pu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Pu&&Pu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Pu&&Pu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.ToolV2Function=void 0;const i=r(Ie());return Pu.ToolV2Function=i.serialization.object({name:i.serialization.string(),description:i.serialization.string().optional(),parameters:i.serialization.record(i.serialization.string(),i.serialization.unknown())}),Pu}var whe;function QG(){if(whe)return Mu;whe=1;var e=Mu&&Mu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Mu&&Mu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Mu&&Mu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.ToolV2=void 0;const i=r(Ie()),n=JMe();return Mu.ToolV2=i.serialization.object({type:i.serialization.stringLiteral("function").optional(),function:n.ToolV2Function.optional()}),Mu}var Tu={},Au={},xhe;function ZMe(){if(xhe)return Au;xhe=1;var e=Au&&Au.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Au&&Au.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Au&&Au.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Au,"__esModule",{value:!0}),Au.CitationOptionsMode=void 0;const i=r(Ie());return Au.CitationOptionsMode=i.serialization.enum_(["FAST","ACCURATE","OFF"]),Au}var She;function JG(){if(She)return Tu;She=1;var e=Tu&&Tu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Tu&&Tu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Tu&&Tu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.CitationOptions=void 0;const i=r(Ie()),n=ZMe();return Tu.CitationOptions=i.serialization.object({mode:n.CitationOptionsMode.optional()}),Tu}var Ou={},Ru={},Che;function ePe(){if(Che)return Ru;Che=1;var e=Ru&&Ru.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ru&&Ru.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ru&&Ru.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.TextResponseFormatV2=void 0;const i=r(Ie());return Ru.TextResponseFormatV2=i.serialization.object({}),Ru}var Du={},Ehe;function tPe(){if(Ehe)return Du;Ehe=1;var e=Du&&Du.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Du&&Du.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Du&&Du.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Du,"__esModule",{value:!0}),Du.JsonResponseFormatV2=void 0;const i=r(Ie());return Du.JsonResponseFormatV2=i.serialization.object({jsonSchema:i.serialization.property("json_schema",i.serialization.record(i.serialization.string(),i.serialization.unknown()).optional())}),Du}var Mhe;function ZG(){if(Mhe)return Ou;Mhe=1;var e=Ou&&Ou.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Ou&&Ou.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Ou&&Ou.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.ResponseFormatV2=void 0;const i=r(Ie()),n=ePe(),a=tPe();return Ou.ResponseFormatV2=i.serialization.union("type",{text:n.TextResponseFormatV2,json_object:a.JsonResponseFormatV2}).transform({transform:o=>o,untransform:o=>o}),Ou}var Phe;function IOt(){if(Phe)return eu;Phe=1;var e=eu&&eu.__createBinding||(Object.create?function(d,h,f,g){g===void 0&&(g=f);var p=Object.getOwnPropertyDescriptor(h,f);(!p||("get"in p?!h.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,g,p)}:function(d,h,f,g){g===void 0&&(g=f),d[g]=h[f]}),t=eu&&eu.__setModuleDefault||(Object.create?function(d,h){Object.defineProperty(d,"default",{enumerable:!0,value:h})}:function(d,h){d.default=h}),r=eu&&eu.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var f in d)f!=="default"&&Object.prototype.hasOwnProperty.call(d,f)&&e(h,d,f);return t(h,d),h};Object.defineProperty(eu,"__esModule",{value:!0}),eu.V2ChatStreamRequest=void 0;const i=r(Ie()),n=KG(),a=QG(),o=yMe(),s=JG(),l=ZG(),u=bMe(),c=_Me();return eu.V2ChatStreamRequest=i.serialization.object({model:i.serialization.string(),messages:n.ChatMessages,tools:i.serialization.list(a.ToolV2).optional(),strictTools:i.serialization.property("strict_tools",i.serialization.boolean().optional()),documents:i.serialization.list(o.V2ChatStreamRequestDocumentsItem).optional(),citationOptions:i.serialization.property("citation_options",s.CitationOptions.optional()),responseFormat:i.serialization.property("response_format",l.ResponseFormatV2.optional()),safetyMode:i.serialization.property("safety_mode",u.V2ChatStreamRequestSafetyMode.optional()),maxTokens:i.serialization.property("max_tokens",i.serialization.number().optional()),stopSequences:i.serialization.property("stop_sequences",i.serialization.list(i.serialization.string()).optional()),temperature:i.serialization.number().optional(),seed:i.serialization.number().optional(),frequencyPenalty:i.serialization.property("frequency_penalty",i.serialization.number().optional()),presencePenalty:i.serialization.property("presence_penalty",i.serialization.number().optional()),k:i.serialization.number().optional(),p:i.serialization.number().optional(),returnPrompt:i.serialization.property("return_prompt",i.serialization.boolean().optional()),logprobs:i.serialization.boolean().optional(),toolChoice:i.serialization.property("tool_choice",c.V2ChatStreamRequestToolChoice.optional())}),eu}var Iu={},The;function jOt(){if(The)return Iu;The=1;var e=Iu&&Iu.__createBinding||(Object.create?function(d,h,f,g){g===void 0&&(g=f);var p=Object.getOwnPropertyDescriptor(h,f);(!p||("get"in p?!h.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,g,p)}:function(d,h,f,g){g===void 0&&(g=f),d[g]=h[f]}),t=Iu&&Iu.__setModuleDefault||(Object.create?function(d,h){Object.defineProperty(d,"default",{enumerable:!0,value:h})}:function(d,h){d.default=h}),r=Iu&&Iu.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var f in d)f!=="default"&&Object.prototype.hasOwnProperty.call(d,f)&&e(h,d,f);return t(h,d),h};Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.V2ChatRequest=void 0;const i=r(Ie()),n=KG(),a=QG(),o=wMe(),s=JG(),l=ZG(),u=xMe(),c=SMe();return Iu.V2ChatRequest=i.serialization.object({model:i.serialization.string(),messages:n.ChatMessages,tools:i.serialization.list(a.ToolV2).optional(),strictTools:i.serialization.property("strict_tools",i.serialization.boolean().optional()),documents:i.serialization.list(o.V2ChatRequestDocumentsItem).optional(),citationOptions:i.serialization.property("citation_options",s.CitationOptions.optional()),responseFormat:i.serialization.property("response_format",l.ResponseFormatV2.optional()),safetyMode:i.serialization.property("safety_mode",u.V2ChatRequestSafetyMode.optional()),maxTokens:i.serialization.property("max_tokens",i.serialization.number().optional()),stopSequences:i.serialization.property("stop_sequences",i.serialization.list(i.serialization.string()).optional()),temperature:i.serialization.number().optional(),seed:i.serialization.number().optional(),frequencyPenalty:i.serialization.property("frequency_penalty",i.serialization.number().optional()),presencePenalty:i.serialization.property("presence_penalty",i.serialization.number().optional()),k:i.serialization.number().optional(),p:i.serialization.number().optional(),returnPrompt:i.serialization.property("return_prompt",i.serialization.boolean().optional()),logprobs:i.serialization.boolean().optional(),toolChoice:i.serialization.property("tool_choice",c.V2ChatRequestToolChoice.optional())}),Iu}var ju={},zu={},Ahe;function II(){if(Ahe)return zu;Ahe=1;var e=zu&&zu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=zu&&zu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=zu&&zu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(zu,"__esModule",{value:!0}),zu.EmbedInputType=void 0;const i=r(Ie());return zu.EmbedInputType=i.serialization.enum_(["search_document","search_query","classification","clustering","image"]),zu}var Bu={},Ohe;function jI(){if(Ohe)return Bu;Ohe=1;var e=Bu&&Bu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Bu&&Bu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Bu&&Bu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.EmbeddingType=void 0;const i=r(Ie());return Bu.EmbeddingType=i.serialization.enum_(["float","int8","uint8","binary","ubinary"]),Bu}var Rhe;function zOt(){if(Rhe)return ju;Rhe=1;var e=ju&&ju.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=ju&&ju.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=ju&&ju.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(ju,"__esModule",{value:!0}),ju.V2EmbedRequest=void 0;const i=r(Ie()),n=II(),a=jI(),o=CMe();return ju.V2EmbedRequest=i.serialization.object({texts:i.serialization.list(i.serialization.string()).optional(),images:i.serialization.list(i.serialization.string()).optional(),model:i.serialization.string(),inputType:i.serialization.property("input_type",n.EmbedInputType),embeddingTypes:i.serialization.property("embedding_types",i.serialization.list(a.EmbeddingType)),truncate:o.V2EmbedRequestTruncate.optional()}),ju}var Lu={},Dhe;function BOt(){if(Dhe)return Lu;Dhe=1;var e=Lu&&Lu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Lu&&Lu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Lu&&Lu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.V2RerankRequest=void 0;const i=r(Ie());return Lu.V2RerankRequest=i.serialization.object({model:i.serialization.string(),query:i.serialization.string(),documents:i.serialization.list(i.serialization.string()),topN:i.serialization.property("top_n",i.serialization.number().optional()),returnDocuments:i.serialization.property("return_documents",i.serialization.boolean().optional()),maxTokensPerDoc:i.serialization.property("max_tokens_per_doc",i.serialization.number().optional())}),Lu}var Ihe;function rPe(){return Ihe||(Ihe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.V2RerankRequest=e.V2EmbedRequest=e.V2ChatRequest=e.V2ChatStreamRequest=void 0;var t=IOt();Object.defineProperty(e,"V2ChatStreamRequest",{enumerable:!0,get:function(){return t.V2ChatStreamRequest}});var r=jOt();Object.defineProperty(e,"V2ChatRequest",{enumerable:!0,get:function(){return r.V2ChatRequest}});var i=zOt();Object.defineProperty(e,"V2EmbedRequest",{enumerable:!0,get:function(){return i.V2EmbedRequest}});var n=BOt();Object.defineProperty(e,"V2RerankRequest",{enumerable:!0,get:function(){return n.V2RerankRequest}})}(B5)),B5}var jhe;function LOt(){return jhe||(jhe=1,function(e){var t=Zy&&Zy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Zy&&Zy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(rPe(),e)}(Zy)),Zy}var zhe;function FOt(){return zhe||(zhe=1,function(e){var t=Qy&&Qy.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Qy&&Qy.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(OMe(),e),r(LOt(),e)}(Qy)),Qy}var e0={},t0={},Fu={},Bhe;function iPe(){if(Bhe)return Fu;Bhe=1;var e=Fu&&Fu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Fu&&Fu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Fu&&Fu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.CreateEmbedJobRequestTruncate=void 0;const i=r(Ie());return Fu.CreateEmbedJobRequestTruncate=i.serialization.enum_(["START","END"]),Fu}var Lhe;function nPe(){return Lhe||(Lhe=1,function(e){var t=t0&&t0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=t0&&t0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(iPe(),e)}(t0)),t0}var r0={},L5={},Nu={},Fhe;function NOt(){if(Fhe)return Nu;Fhe=1;var e=Nu&&Nu.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Nu&&Nu.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Nu&&Nu.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.CreateEmbedJobRequest=void 0;const i=r(Ie()),n=II(),a=jI(),o=iPe();return Nu.CreateEmbedJobRequest=i.serialization.object({model:i.serialization.string(),datasetId:i.serialization.property("dataset_id",i.serialization.string()),inputType:i.serialization.property("input_type",n.EmbedInputType),name:i.serialization.string().optional(),embeddingTypes:i.serialization.property("embedding_types",i.serialization.list(a.EmbeddingType).optional()),truncate:o.CreateEmbedJobRequestTruncate.optional()}),Nu}var Nhe;function aPe(){return Nhe||(Nhe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateEmbedJobRequest=void 0;var t=NOt();Object.defineProperty(e,"CreateEmbedJobRequest",{enumerable:!0,get:function(){return t.CreateEmbedJobRequest}})}(L5)),L5}var Uhe;function UOt(){return Uhe||(Uhe=1,function(e){var t=r0&&r0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=r0&&r0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(aPe(),e)}(r0)),r0}var Vhe;function VOt(){return Vhe||(Vhe=1,function(e){var t=e0&&e0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=e0&&e0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(nPe(),e),r(UOt(),e)}(e0)),e0}var i0={},n0={},Uu={},Vu={},ku={},khe;function oPe(){if(khe)return ku;khe=1;var e=ku&&ku.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=ku&&ku.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=ku&&ku.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(ku,"__esModule",{value:!0}),ku.DatasetType=void 0;const i=r(Ie());return ku.DatasetType=i.serialization.enum_(["embed-input","embed-result","cluster-result","cluster-outliers","reranker-finetune-input","single-label-classification-finetune-input","chat-finetune-input","multi-label-classification-finetune-input"]),ku}var qu={},qhe;function sPe(){if(qhe)return qu;qhe=1;var e=qu&&qu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=qu&&qu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=qu&&qu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(qu,"__esModule",{value:!0}),qu.DatasetValidationStatus=void 0;const i=r(Ie());return qu.DatasetValidationStatus=i.serialization.enum_(["unknown","queued","processing","failed","validated","skipped"]),qu}var Wu={},Whe;function lPe(){if(Whe)return Wu;Whe=1;var e=Wu&&Wu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Wu&&Wu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Wu&&Wu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.DatasetPart=void 0;const i=r(Ie());return Wu.DatasetPart=i.serialization.object({id:i.serialization.string(),name:i.serialization.string(),url:i.serialization.string().optional(),index:i.serialization.number().optional(),sizeBytes:i.serialization.property("size_bytes",i.serialization.number().optional()),numRows:i.serialization.property("num_rows",i.serialization.number().optional()),originalUrl:i.serialization.property("original_url",i.serialization.string().optional()),samples:i.serialization.list(i.serialization.string()).optional()}),Wu}var Ghe;function eH(){if(Ghe)return Vu;Ghe=1;var e=Vu&&Vu.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Vu&&Vu.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Vu&&Vu.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.Dataset=void 0;const i=r(Ie()),n=oPe(),a=sPe(),o=lPe();return Vu.Dataset=i.serialization.object({id:i.serialization.string(),name:i.serialization.string(),createdAt:i.serialization.property("created_at",i.serialization.date()),updatedAt:i.serialization.property("updated_at",i.serialization.date()),datasetType:i.serialization.property("dataset_type",n.DatasetType),validationStatus:i.serialization.property("validation_status",a.DatasetValidationStatus),validationError:i.serialization.property("validation_error",i.serialization.string().optional()),schema:i.serialization.string().optional(),requiredFields:i.serialization.property("required_fields",i.serialization.list(i.serialization.string()).optional()),preserveFields:i.serialization.property("preserve_fields",i.serialization.list(i.serialization.string()).optional()),datasetParts:i.serialization.property("dataset_parts",i.serialization.list(o.DatasetPart).optional()),validationWarnings:i.serialization.property("validation_warnings",i.serialization.list(i.serialization.string()).optional())}),Vu}var Hhe;function kOt(){if(Hhe)return Uu;Hhe=1;var e=Uu&&Uu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Uu&&Uu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Uu&&Uu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.DatasetsListResponse=void 0;const i=r(Ie()),n=eH();return Uu.DatasetsListResponse=i.serialization.object({datasets:i.serialization.list(n.Dataset).optional()}),Uu}var Gu={},$he;function qOt(){if($he)return Gu;$he=1;var e=Gu&&Gu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Gu&&Gu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Gu&&Gu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.DatasetsCreateResponseDatasetPartsItem=void 0;const i=r(Ie());return Gu.DatasetsCreateResponseDatasetPartsItem=i.serialization.object({name:i.serialization.string().optional(),numRows:i.serialization.property("num_rows",i.serialization.number().optional()),samples:i.serialization.list(i.serialization.string()).optional(),partKind:i.serialization.property("part_kind",i.serialization.string().optional())}),Gu}var Hu={},Xhe;function WOt(){if(Xhe)return Hu;Xhe=1;var e=Hu&&Hu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Hu&&Hu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Hu&&Hu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.DatasetsCreateResponse=void 0;const i=r(Ie());return Hu.DatasetsCreateResponse=i.serialization.object({id:i.serialization.string().optional()}),Hu}var $u={},Yhe;function GOt(){if(Yhe)return $u;Yhe=1;var e=$u&&$u.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=$u&&$u.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=$u&&$u.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty($u,"__esModule",{value:!0}),$u.DatasetsGetUsageResponse=void 0;const i=r(Ie());return $u.DatasetsGetUsageResponse=i.serialization.object({organizationUsage:i.serialization.property("organization_usage",i.serialization.number().optional())}),$u}var Xu={},Khe;function HOt(){if(Khe)return Xu;Khe=1;var e=Xu&&Xu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Xu&&Xu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Xu&&Xu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.DatasetsGetResponse=void 0;const i=r(Ie()),n=eH();return Xu.DatasetsGetResponse=i.serialization.object({dataset:n.Dataset}),Xu}var Qhe;function uPe(){return Qhe||(Qhe=1,function(e){var t=n0&&n0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=n0&&n0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(kOt(),e),r(qOt(),e),r(WOt(),e),r(GOt(),e),r(HOt(),e)}(n0)),n0}var Yu={},Ku={},Jhe;function $Ot(){if(Jhe)return Ku;Jhe=1;var e=Ku&&Ku.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ku&&Ku.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ku&&Ku.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.Response=void 0;const i=r(Ie());return Ku.Response=i.serialization.record(i.serialization.string(),i.serialization.unknown()),Ku}var Zhe;function XOt(){if(Zhe)return Yu;Zhe=1;var e=Yu&&Yu.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),t=Yu&&Yu.__setModuleDefault||(Object.create?function(i,n){Object.defineProperty(i,"default",{enumerable:!0,value:n})}:function(i,n){i.default=n}),r=Yu&&Yu.__importStar||function(i){if(i&&i.__esModule)return i;var n={};if(i!=null)for(var a in i)a!=="default"&&Object.prototype.hasOwnProperty.call(i,a)&&e(n,i,a);return t(n,i),n};return Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.delete=void 0,Yu.delete=r($Ot()),Yu}var efe;function YOt(){return efe||(efe=1,function(e){var t=i0&&i0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=i0&&i0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(uPe(),e),r(XOt(),e)}(i0)),i0}var a0={},Qu={},o0={},s0={},Ju={},tfe;function cPe(){if(tfe)return Ju;tfe=1;var e=Ju&&Ju.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ju&&Ju.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ju&&Ju.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.BaseType=void 0;const i=r(Ie());return Ju.BaseType=i.serialization.enum_(["BASE_TYPE_UNSPECIFIED","BASE_TYPE_GENERATIVE","BASE_TYPE_CLASSIFICATION","BASE_TYPE_RERANK","BASE_TYPE_CHAT"]),Ju}var Zu={},rfe;function dPe(){if(rfe)return Zu;rfe=1;var e=Zu&&Zu.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Zu&&Zu.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Zu&&Zu.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.Strategy=void 0;const i=r(Ie());return Zu.Strategy=i.serialization.enum_(["STRATEGY_UNSPECIFIED","STRATEGY_VANILLA","STRATEGY_TFEW"]),Zu}var ec={},ife;function hPe(){if(ife)return ec;ife=1;var e=ec&&ec.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=ec&&ec.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=ec&&ec.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(ec,"__esModule",{value:!0}),ec.BaseModel=void 0;const i=r(Ie()),n=cPe(),a=dPe();return ec.BaseModel=i.serialization.object({name:i.serialization.string().optional(),version:i.serialization.string().optional(),baseType:i.serialization.property("base_type",n.BaseType),strategy:a.Strategy.optional()}),ec}var tc={},nfe;function fPe(){if(nfe)return tc;nfe=1;var e=tc&&tc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=tc&&tc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=tc&&tc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(tc,"__esModule",{value:!0}),tc.LoraTargetModules=void 0;const i=r(Ie());return tc.LoraTargetModules=i.serialization.enum_(["LORA_TARGET_MODULES_UNSPECIFIED","LORA_TARGET_MODULES_QV","LORA_TARGET_MODULES_QKVO","LORA_TARGET_MODULES_QKVO_FFN"]),tc}var rc={},afe;function pPe(){if(afe)return rc;afe=1;var e=rc&&rc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=rc&&rc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=rc&&rc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(rc,"__esModule",{value:!0}),rc.Hyperparameters=void 0;const i=r(Ie()),n=fPe();return rc.Hyperparameters=i.serialization.object({earlyStoppingPatience:i.serialization.property("early_stopping_patience",i.serialization.number().optional()),earlyStoppingThreshold:i.serialization.property("early_stopping_threshold",i.serialization.number().optional()),trainBatchSize:i.serialization.property("train_batch_size",i.serialization.number().optional()),trainEpochs:i.serialization.property("train_epochs",i.serialization.number().optional()),learningRate:i.serialization.property("learning_rate",i.serialization.number().optional()),loraAlpha:i.serialization.property("lora_alpha",i.serialization.number().optional()),loraRank:i.serialization.property("lora_rank",i.serialization.number().optional()),loraTargetModules:i.serialization.property("lora_target_modules",n.LoraTargetModules.optional())}),rc}var ic={},ofe;function mPe(){if(ofe)return ic;ofe=1;var e=ic&&ic.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=ic&&ic.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=ic&&ic.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(ic,"__esModule",{value:!0}),ic.WandbConfig=void 0;const i=r(Ie());return ic.WandbConfig=i.serialization.object({project:i.serialization.string(),apiKey:i.serialization.property("api_key",i.serialization.string()),entity:i.serialization.string().optional()}),ic}var nc={},sfe;function tH(){if(sfe)return nc;sfe=1;var e=nc&&nc.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=nc&&nc.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=nc&&nc.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(nc,"__esModule",{value:!0}),nc.Settings=void 0;const i=r(Ie()),n=hPe(),a=pPe(),o=mPe();return nc.Settings=i.serialization.object({baseModel:i.serialization.property("base_model",n.BaseModel),datasetId:i.serialization.property("dataset_id",i.serialization.string()),hyperparameters:a.Hyperparameters.optional(),multiLabel:i.serialization.property("multi_label",i.serialization.boolean().optional()),wandb:o.WandbConfig.optional()}),nc}var ac={},lfe;function zI(){if(lfe)return ac;lfe=1;var e=ac&&ac.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=ac&&ac.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=ac&&ac.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(ac,"__esModule",{value:!0}),ac.Status=void 0;const i=r(Ie());return ac.Status=i.serialization.enum_(["STATUS_UNSPECIFIED","STATUS_FINETUNING","STATUS_DEPLOYING_API","STATUS_READY","STATUS_FAILED","STATUS_DELETED","STATUS_TEMPORARILY_OFFLINE","STATUS_PAUSED","STATUS_QUEUED"]),ac}var oc={},ufe;function IP(){if(ufe)return oc;ufe=1;var e=oc&&oc.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=oc&&oc.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=oc&&oc.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(oc,"__esModule",{value:!0}),oc.FinetunedModel=void 0;const i=r(Ie()),n=tH(),a=zI();return oc.FinetunedModel=i.serialization.object({id:i.serialization.string().optional(),name:i.serialization.string(),creatorId:i.serialization.property("creator_id",i.serialization.string().optional()),organizationId:i.serialization.property("organization_id",i.serialization.string().optional()),settings:n.Settings,status:a.Status.optional(),createdAt:i.serialization.property("created_at",i.serialization.date().optional()),updatedAt:i.serialization.property("updated_at",i.serialization.date().optional()),completedAt:i.serialization.property("completed_at",i.serialization.date().optional()),lastUsed:i.serialization.property("last_used",i.serialization.date().optional())}),oc}var sc={},cfe;function KOt(){if(cfe)return sc;cfe=1;var e=sc&&sc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=sc&&sc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=sc&&sc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(sc,"__esModule",{value:!0}),sc.ListFinetunedModelsResponse=void 0;const i=r(Ie()),n=IP();return sc.ListFinetunedModelsResponse=i.serialization.object({finetunedModels:i.serialization.property("finetuned_models",i.serialization.list(n.FinetunedModel).optional()),nextPageToken:i.serialization.property("next_page_token",i.serialization.string().optional()),totalSize:i.serialization.property("total_size",i.serialization.number().optional())}),sc}var lc={},dfe;function QOt(){if(dfe)return lc;dfe=1;var e=lc&&lc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=lc&&lc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=lc&&lc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(lc,"__esModule",{value:!0}),lc.CreateFinetunedModelResponse=void 0;const i=r(Ie()),n=IP();return lc.CreateFinetunedModelResponse=i.serialization.object({finetunedModel:i.serialization.property("finetuned_model",n.FinetunedModel.optional())}),lc}var uc={},hfe;function JOt(){if(hfe)return uc;hfe=1;var e=uc&&uc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=uc&&uc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=uc&&uc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(uc,"__esModule",{value:!0}),uc.GetFinetunedModelResponse=void 0;const i=r(Ie()),n=IP();return uc.GetFinetunedModelResponse=i.serialization.object({finetunedModel:i.serialization.property("finetuned_model",n.FinetunedModel.optional())}),uc}var cc={},ffe;function ZOt(){if(ffe)return cc;ffe=1;var e=cc&&cc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=cc&&cc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=cc&&cc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(cc,"__esModule",{value:!0}),cc.DeleteFinetunedModelResponse=void 0;const i=r(Ie());return cc.DeleteFinetunedModelResponse=i.serialization.record(i.serialization.string(),i.serialization.unknown()),cc}var dc={},pfe;function eRt(){if(pfe)return dc;pfe=1;var e=dc&&dc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=dc&&dc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=dc&&dc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(dc,"__esModule",{value:!0}),dc.UpdateFinetunedModelResponse=void 0;const i=r(Ie()),n=IP();return dc.UpdateFinetunedModelResponse=i.serialization.object({finetunedModel:i.serialization.property("finetuned_model",n.FinetunedModel.optional())}),dc}var hc={},mfe;function gPe(){if(mfe)return hc;mfe=1;var e=hc&&hc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=hc&&hc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=hc&&hc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(hc,"__esModule",{value:!0}),hc.Event=void 0;const i=r(Ie()),n=zI();return hc.Event=i.serialization.object({userId:i.serialization.property("user_id",i.serialization.string().optional()),status:n.Status.optional(),createdAt:i.serialization.property("created_at",i.serialization.date().optional())}),hc}var fc={},gfe;function tRt(){if(gfe)return fc;gfe=1;var e=fc&&fc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=fc&&fc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=fc&&fc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(fc,"__esModule",{value:!0}),fc.ListEventsResponse=void 0;const i=r(Ie()),n=gPe();return fc.ListEventsResponse=i.serialization.object({events:i.serialization.list(n.Event).optional(),nextPageToken:i.serialization.property("next_page_token",i.serialization.string().optional()),totalSize:i.serialization.property("total_size",i.serialization.number().optional())}),fc}var pc={},vfe;function vPe(){if(vfe)return pc;vfe=1;var e=pc&&pc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=pc&&pc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=pc&&pc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(pc,"__esModule",{value:!0}),pc.TrainingStepMetrics=void 0;const i=r(Ie());return pc.TrainingStepMetrics=i.serialization.object({createdAt:i.serialization.property("created_at",i.serialization.date().optional()),stepNumber:i.serialization.property("step_number",i.serialization.number().optional()),metrics:i.serialization.record(i.serialization.string(),i.serialization.number()).optional()}),pc}var mc={},yfe;function rRt(){if(yfe)return mc;yfe=1;var e=mc&&mc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=mc&&mc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=mc&&mc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(mc,"__esModule",{value:!0}),mc.ListTrainingStepMetricsResponse=void 0;const i=r(Ie()),n=vPe();return mc.ListTrainingStepMetricsResponse=i.serialization.object({stepMetrics:i.serialization.property("step_metrics",i.serialization.list(n.TrainingStepMetrics).optional()),nextPageToken:i.serialization.property("next_page_token",i.serialization.string().optional())}),mc}var bfe;function yPe(){return bfe||(bfe=1,function(e){var t=s0&&s0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=s0&&s0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(cPe(),e),r(dPe(),e),r(hPe(),e),r(fPe(),e),r(pPe(),e),r(mPe(),e),r(tH(),e),r(zI(),e),r(IP(),e),r(KOt(),e),r(QOt(),e),r(JOt(),e),r(ZOt(),e),r(eRt(),e),r(gPe(),e),r(tRt(),e),r(vPe(),e),r(rRt(),e)}(s0)),s0}var _fe;function iRt(){return _fe||(_fe=1,function(e){var t=o0&&o0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=o0&&o0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(yPe(),e)}(o0)),o0}var wfe;function nRt(){return wfe||(wfe=1,function(e){var t=Qu&&Qu.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),r=Qu&&Qu.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),i=Qu&&Qu.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&t(o,a,s);return r(o,a),o},n=Qu&&Qu.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,a,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.finetuning=void 0,e.finetuning=i(iRt()),n(yPe(),e)}(Qu)),Qu}var l0={},F5={},gc={},xfe;function aRt(){if(xfe)return gc;xfe=1;var e=gc&&gc.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=gc&&gc.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=gc&&gc.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(gc,"__esModule",{value:!0}),gc.FinetuningUpdateFinetunedModelRequest=void 0;const i=r(Ie()),n=tH(),a=zI();return gc.FinetuningUpdateFinetunedModelRequest=i.serialization.object({name:i.serialization.string(),creatorId:i.serialization.property("creator_id",i.serialization.string().optional()),organizationId:i.serialization.property("organization_id",i.serialization.string().optional()),settings:n.Settings,status:a.Status.optional(),createdAt:i.serialization.property("created_at",i.serialization.date().optional()),updatedAt:i.serialization.property("updated_at",i.serialization.date().optional()),completedAt:i.serialization.property("completed_at",i.serialization.date().optional()),lastUsed:i.serialization.property("last_used",i.serialization.date().optional())}),gc}var Sfe;function bPe(){return Sfe||(Sfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FinetuningUpdateFinetunedModelRequest=void 0;var t=aRt();Object.defineProperty(e,"FinetuningUpdateFinetunedModelRequest",{enumerable:!0,get:function(){return t.FinetuningUpdateFinetunedModelRequest}})}(F5)),F5}var Cfe;function oRt(){return Cfe||(Cfe=1,function(e){var t=l0&&l0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=l0&&l0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(bPe(),e)}(l0)),l0}var Efe;function sRt(){return Efe||(Efe=1,function(e){var t=a0&&a0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=a0&&a0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(nRt(),e),r(oRt(),e)}(a0)),a0}var u0={},c0={},N5={},vc={},yc={},Mfe;function rH(){if(Mfe)return yc;Mfe=1;var e=yc&&yc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=yc&&yc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=yc&&yc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(yc,"__esModule",{value:!0}),yc.CreateConnectorOAuth=void 0;const i=r(Ie());return yc.CreateConnectorOAuth=i.serialization.object({clientId:i.serialization.property("client_id",i.serialization.string().optional()),clientSecret:i.serialization.property("client_secret",i.serialization.string().optional()),authorizeUrl:i.serialization.property("authorize_url",i.serialization.string().optional()),tokenUrl:i.serialization.property("token_url",i.serialization.string().optional()),scope:i.serialization.string().optional()}),yc}var bc={},_c={},Pfe;function _Pe(){if(Pfe)return _c;Pfe=1;var e=_c&&_c.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=_c&&_c.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=_c&&_c.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(_c,"__esModule",{value:!0}),_c.AuthTokenType=void 0;const i=r(Ie());return _c.AuthTokenType=i.serialization.enum_(["bearer","basic","noscheme"]),_c}var Tfe;function iH(){if(Tfe)return bc;Tfe=1;var e=bc&&bc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=bc&&bc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=bc&&bc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(bc,"__esModule",{value:!0}),bc.CreateConnectorServiceAuth=void 0;const i=r(Ie()),n=_Pe();return bc.CreateConnectorServiceAuth=i.serialization.object({type:n.AuthTokenType,token:i.serialization.string()}),bc}var Afe;function lRt(){if(Afe)return vc;Afe=1;var e=vc&&vc.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=vc&&vc.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=vc&&vc.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(vc,"__esModule",{value:!0}),vc.CreateConnectorRequest=void 0;const i=r(Ie()),n=rH(),a=iH();return vc.CreateConnectorRequest=i.serialization.object({name:i.serialization.string(),description:i.serialization.string().optional(),url:i.serialization.string(),excludes:i.serialization.list(i.serialization.string()).optional(),oauth:n.CreateConnectorOAuth.optional(),active:i.serialization.boolean().optional(),continueOnFailure:i.serialization.property("continue_on_failure",i.serialization.boolean().optional()),serviceAuth:i.serialization.property("service_auth",a.CreateConnectorServiceAuth.optional())}),vc}var wc={},Ofe;function uRt(){if(Ofe)return wc;Ofe=1;var e=wc&&wc.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=wc&&wc.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=wc&&wc.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(wc,"__esModule",{value:!0}),wc.UpdateConnectorRequest=void 0;const i=r(Ie()),n=rH(),a=iH();return wc.UpdateConnectorRequest=i.serialization.object({name:i.serialization.string().optional(),url:i.serialization.string().optional(),excludes:i.serialization.list(i.serialization.string()).optional(),oauth:n.CreateConnectorOAuth.optional(),active:i.serialization.boolean().optional(),continueOnFailure:i.serialization.property("continue_on_failure",i.serialization.boolean().optional()),serviceAuth:i.serialization.property("service_auth",a.CreateConnectorServiceAuth.optional())}),wc}var Rfe;function wPe(){return Rfe||(Rfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateConnectorRequest=e.CreateConnectorRequest=void 0;var t=lRt();Object.defineProperty(e,"CreateConnectorRequest",{enumerable:!0,get:function(){return t.CreateConnectorRequest}});var r=uRt();Object.defineProperty(e,"UpdateConnectorRequest",{enumerable:!0,get:function(){return r.UpdateConnectorRequest}})}(N5)),N5}var Dfe;function cRt(){return Dfe||(Dfe=1,function(e){var t=c0&&c0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=c0&&c0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(wPe(),e)}(c0)),c0}var Ife;function dRt(){return Ife||(Ife=1,function(e){var t=u0&&u0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=u0&&u0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(cRt(),e)}(u0)),u0}var jfe;function hRt(){return jfe||(jfe=1,function(e){var t=Fl&&Fl.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),r=Fl&&Fl.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),i=Fl&&Fl.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&t(o,a,s);return r(o,a),o},n=Fl&&Fl.__exportStar||function(a,o){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,a,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.connectors=e.finetuning=e.datasets=e.embedJobs=e.v2=void 0,e.v2=i(FOt()),n(OMe(),e),e.embedJobs=i(VOt()),n(nPe(),e),e.datasets=i(YOt()),n(uPe(),e),e.finetuning=i(sRt()),n(rPe(),e),n(aPe(),e),e.connectors=i(dRt()),n(wPe(),e),n(bPe(),e)}(Fl)),Fl}var d0={},xc={},zfe;function xPe(){if(zfe)return xc;zfe=1;var e=xc&&xc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=xc&&xc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=xc&&xc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(xc,"__esModule",{value:!0}),xc.ChatStreamRequestPromptTruncation=void 0;const i=r(Ie());return xc.ChatStreamRequestPromptTruncation=i.serialization.enum_(["OFF","AUTO","AUTO_PRESERVE_ORDER"]),xc}var Sc={},Bfe;function SPe(){if(Bfe)return Sc;Bfe=1;var e=Sc&&Sc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Sc&&Sc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Sc&&Sc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.ChatStreamRequestCitationQuality=void 0;const i=r(Ie());return Sc.ChatStreamRequestCitationQuality=i.serialization.enum_(["fast","accurate","off"]),Sc}var Cc={},Lfe;function fRt(){if(Lfe)return Cc;Lfe=1;var e=Cc&&Cc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Cc&&Cc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Cc&&Cc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.ChatStreamRequestConnectorsSearchOptions=void 0;const i=r(Ie());return Cc.ChatStreamRequestConnectorsSearchOptions=i.serialization.object({seed:i.serialization.number().optional()}),Cc}var Ec={},Ffe;function CPe(){if(Ffe)return Ec;Ffe=1;var e=Ec&&Ec.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ec&&Ec.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ec&&Ec.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.ChatStreamRequestSafetyMode=void 0;const i=r(Ie());return Ec.ChatStreamRequestSafetyMode=i.serialization.enum_(["CONTEXTUAL","STRICT","NONE"]),Ec}var Mc={},Nfe;function EPe(){if(Nfe)return Mc;Nfe=1;var e=Mc&&Mc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Mc&&Mc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Mc&&Mc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.ChatRequestPromptTruncation=void 0;const i=r(Ie());return Mc.ChatRequestPromptTruncation=i.serialization.enum_(["OFF","AUTO","AUTO_PRESERVE_ORDER"]),Mc}var Pc={},Ufe;function MPe(){if(Ufe)return Pc;Ufe=1;var e=Pc&&Pc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Pc&&Pc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Pc&&Pc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.ChatRequestCitationQuality=void 0;const i=r(Ie());return Pc.ChatRequestCitationQuality=i.serialization.enum_(["fast","accurate","off"]),Pc}var Tc={},Vfe;function pRt(){if(Vfe)return Tc;Vfe=1;var e=Tc&&Tc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Tc&&Tc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Tc&&Tc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.ChatRequestConnectorsSearchOptions=void 0;const i=r(Ie());return Tc.ChatRequestConnectorsSearchOptions=i.serialization.object({seed:i.serialization.number().optional()}),Tc}var Ac={},kfe;function PPe(){if(kfe)return Ac;kfe=1;var e=Ac&&Ac.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ac&&Ac.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ac&&Ac.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.ChatRequestSafetyMode=void 0;const i=r(Ie());return Ac.ChatRequestSafetyMode=i.serialization.enum_(["CONTEXTUAL","STRICT","NONE"]),Ac}var Oc={},qfe;function TPe(){if(qfe)return Oc;qfe=1;var e=Oc&&Oc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Oc&&Oc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Oc&&Oc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.GenerateStreamRequestTruncate=void 0;const i=r(Ie());return Oc.GenerateStreamRequestTruncate=i.serialization.enum_(["NONE","START","END"]),Oc}var Rc={},Wfe;function APe(){if(Wfe)return Rc;Wfe=1;var e=Rc&&Rc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Rc&&Rc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Rc&&Rc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.GenerateStreamRequestReturnLikelihoods=void 0;const i=r(Ie());return Rc.GenerateStreamRequestReturnLikelihoods=i.serialization.enum_(["GENERATION","ALL","NONE"]),Rc}var Dc={},Gfe;function OPe(){if(Gfe)return Dc;Gfe=1;var e=Dc&&Dc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Dc&&Dc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Dc&&Dc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.GenerateRequestTruncate=void 0;const i=r(Ie());return Dc.GenerateRequestTruncate=i.serialization.enum_(["NONE","START","END"]),Dc}var Ic={},Hfe;function RPe(){if(Hfe)return Ic;Hfe=1;var e=Ic&&Ic.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ic&&Ic.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ic&&Ic.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.GenerateRequestReturnLikelihoods=void 0;const i=r(Ie());return Ic.GenerateRequestReturnLikelihoods=i.serialization.enum_(["GENERATION","ALL","NONE"]),Ic}var jc={},$fe;function DPe(){if($fe)return jc;$fe=1;var e=jc&&jc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=jc&&jc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=jc&&jc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(jc,"__esModule",{value:!0}),jc.EmbedRequestTruncate=void 0;const i=r(Ie());return jc.EmbedRequestTruncate=i.serialization.enum_(["NONE","START","END"]),jc}var zc={},Bc={},Lc={},Xfe;function nH(){if(Xfe)return Lc;Xfe=1;var e=Lc&&Lc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Lc&&Lc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Lc&&Lc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.Image=void 0;const i=r(Ie());return Lc.Image=i.serialization.object({width:i.serialization.number(),height:i.serialization.number(),format:i.serialization.string(),bitDepth:i.serialization.property("bit_depth",i.serialization.number())}),Lc}var Yfe;function IPe(){if(Yfe)return Bc;Yfe=1;var e=Bc&&Bc.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Bc&&Bc.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Bc&&Bc.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.EmbedFloatsResponse=void 0;const i=r(Ie()),n=nH(),a=hs();return Bc.EmbedFloatsResponse=i.serialization.object({id:i.serialization.string(),embeddings:i.serialization.list(i.serialization.list(i.serialization.number())),texts:i.serialization.list(i.serialization.string()),images:i.serialization.list(n.Image).optional(),meta:a.ApiMeta.optional()}),Bc}var Fc={},Nc={},Kfe;function jPe(){if(Kfe)return Nc;Kfe=1;var e=Nc&&Nc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Nc&&Nc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Nc&&Nc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.EmbedByTypeResponseEmbeddings=void 0;const i=r(Ie());return Nc.EmbedByTypeResponseEmbeddings=i.serialization.object({float:i.serialization.list(i.serialization.list(i.serialization.number())).optional(),int8:i.serialization.list(i.serialization.list(i.serialization.number())).optional(),uint8:i.serialization.list(i.serialization.list(i.serialization.number())).optional(),binary:i.serialization.list(i.serialization.list(i.serialization.number())).optional(),ubinary:i.serialization.list(i.serialization.list(i.serialization.number())).optional()}),Nc}var Qfe;function zPe(){if(Qfe)return Fc;Qfe=1;var e=Fc&&Fc.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Fc&&Fc.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Fc&&Fc.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.EmbedByTypeResponse=void 0;const i=r(Ie()),n=jPe(),a=nH(),o=hs();return Fc.EmbedByTypeResponse=i.serialization.object({id:i.serialization.string(),embeddings:n.EmbedByTypeResponseEmbeddings,texts:i.serialization.list(i.serialization.string()),images:i.serialization.list(a.Image).optional(),meta:o.ApiMeta.optional()}),Fc}var Jfe;function mRt(){if(Jfe)return zc;Jfe=1;var e=zc&&zc.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=zc&&zc.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=zc&&zc.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(zc,"__esModule",{value:!0}),zc.EmbedResponse=void 0;const i=r(Ie()),n=IPe(),a=zPe();return zc.EmbedResponse=i.serialization.union(i.serialization.discriminant("responseType","response_type"),{embeddings_floats:n.EmbedFloatsResponse,embeddings_by_type:a.EmbedByTypeResponse}).transform({transform:o=>o,untransform:o=>o}),zc}var Uc={},Vc={},Zfe;function BPe(){if(Zfe)return Vc;Zfe=1;var e=Vc&&Vc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Vc&&Vc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Vc&&Vc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.RerankDocument=void 0;const i=r(Ie());return Vc.RerankDocument=i.serialization.record(i.serialization.string(),i.serialization.string()),Vc}var epe;function LPe(){if(epe)return Uc;epe=1;var e=Uc&&Uc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Uc&&Uc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Uc&&Uc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.RerankRequestDocumentsItem=void 0;const i=r(Ie()),n=BPe();return Uc.RerankRequestDocumentsItem=i.serialization.undiscriminatedUnion([i.serialization.string(),n.RerankDocument]),Uc}var kc={},tpe;function FPe(){if(tpe)return kc;tpe=1;var e=kc&&kc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=kc&&kc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=kc&&kc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(kc,"__esModule",{value:!0}),kc.RerankResponseResultsItemDocument=void 0;const i=r(Ie());return kc.RerankResponseResultsItemDocument=i.serialization.object({text:i.serialization.string()}),kc}var qc={},rpe;function NPe(){if(rpe)return qc;rpe=1;var e=qc&&qc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=qc&&qc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=qc&&qc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(qc,"__esModule",{value:!0}),qc.RerankResponseResultsItem=void 0;const i=r(Ie()),n=FPe();return qc.RerankResponseResultsItem=i.serialization.object({document:n.RerankResponseResultsItemDocument.optional(),index:i.serialization.number(),relevanceScore:i.serialization.property("relevance_score",i.serialization.number())}),qc}var Wc={},ipe;function gRt(){if(ipe)return Wc;ipe=1;var e=Wc&&Wc.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Wc&&Wc.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Wc&&Wc.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.RerankResponse=void 0;const i=r(Ie()),n=NPe(),a=hs();return Wc.RerankResponse=i.serialization.object({id:i.serialization.string().optional(),results:i.serialization.list(n.RerankResponseResultsItem),meta:a.ApiMeta.optional()}),Wc}var Gc={},npe;function UPe(){if(npe)return Gc;npe=1;var e=Gc&&Gc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Gc&&Gc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Gc&&Gc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.ClassifyRequestTruncate=void 0;const i=r(Ie());return Gc.ClassifyRequestTruncate=i.serialization.enum_(["NONE","START","END"]),Gc}var Hc={},ape;function VPe(){if(ape)return Hc;ape=1;var e=Hc&&Hc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Hc&&Hc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Hc&&Hc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.ClassifyResponseClassificationsItemLabelsValue=void 0;const i=r(Ie());return Hc.ClassifyResponseClassificationsItemLabelsValue=i.serialization.object({confidence:i.serialization.number().optional()}),Hc}var $c={},ope;function kPe(){if(ope)return $c;ope=1;var e=$c&&$c.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=$c&&$c.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=$c&&$c.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty($c,"__esModule",{value:!0}),$c.ClassifyResponseClassificationsItemClassificationType=void 0;const i=r(Ie());return $c.ClassifyResponseClassificationsItemClassificationType=i.serialization.enum_(["single-label","multi-label"]),$c}var Xc={},spe;function qPe(){if(spe)return Xc;spe=1;var e=Xc&&Xc.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Xc&&Xc.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Xc&&Xc.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.ClassifyResponseClassificationsItem=void 0;const i=r(Ie()),n=VPe(),a=kPe();return Xc.ClassifyResponseClassificationsItem=i.serialization.object({id:i.serialization.string(),input:i.serialization.string().optional(),prediction:i.serialization.string().optional(),predictions:i.serialization.list(i.serialization.string()),confidence:i.serialization.number().optional(),confidences:i.serialization.list(i.serialization.number()),labels:i.serialization.record(i.serialization.string(),n.ClassifyResponseClassificationsItemLabelsValue),classificationType:i.serialization.property("classification_type",a.ClassifyResponseClassificationsItemClassificationType)}),Xc}var Yc={},lpe;function vRt(){if(lpe)return Yc;lpe=1;var e=Yc&&Yc.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Yc&&Yc.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Yc&&Yc.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.ClassifyResponse=void 0;const i=r(Ie()),n=qPe(),a=hs();return Yc.ClassifyResponse=i.serialization.object({id:i.serialization.string(),classifications:i.serialization.list(n.ClassifyResponseClassificationsItem),meta:a.ApiMeta.optional()}),Yc}var Kc={},upe;function WPe(){if(upe)return Kc;upe=1;var e=Kc&&Kc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Kc&&Kc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Kc&&Kc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.SummarizeRequestLength=void 0;const i=r(Ie());return Kc.SummarizeRequestLength=i.serialization.enum_(["short","medium","long"]),Kc}var Qc={},cpe;function GPe(){if(cpe)return Qc;cpe=1;var e=Qc&&Qc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Qc&&Qc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Qc&&Qc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.SummarizeRequestFormat=void 0;const i=r(Ie());return Qc.SummarizeRequestFormat=i.serialization.enum_(["paragraph","bullets"]),Qc}var Jc={},dpe;function HPe(){if(dpe)return Jc;dpe=1;var e=Jc&&Jc.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Jc&&Jc.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Jc&&Jc.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.SummarizeRequestExtractiveness=void 0;const i=r(Ie());return Jc.SummarizeRequestExtractiveness=i.serialization.enum_(["low","medium","high"]),Jc}var Zc={},hpe;function yRt(){if(hpe)return Zc;hpe=1;var e=Zc&&Zc.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Zc&&Zc.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Zc&&Zc.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.SummarizeResponse=void 0;const i=r(Ie()),n=hs();return Zc.SummarizeResponse=i.serialization.object({id:i.serialization.string().optional(),summary:i.serialization.string().optional(),meta:n.ApiMeta.optional()}),Zc}var ed={},fpe;function bRt(){if(fpe)return ed;fpe=1;var e=ed&&ed.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=ed&&ed.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=ed&&ed.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(ed,"__esModule",{value:!0}),ed.TokenizeResponse=void 0;const i=r(Ie()),n=hs();return ed.TokenizeResponse=i.serialization.object({tokens:i.serialization.list(i.serialization.number()),tokenStrings:i.serialization.property("token_strings",i.serialization.list(i.serialization.string())),meta:n.ApiMeta.optional()}),ed}var td={},ppe;function _Rt(){if(ppe)return td;ppe=1;var e=td&&td.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=td&&td.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=td&&td.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(td,"__esModule",{value:!0}),td.DetokenizeResponse=void 0;const i=r(Ie()),n=hs();return td.DetokenizeResponse=i.serialization.object({text:i.serialization.string(),meta:n.ApiMeta.optional()}),td}var rd={},mpe;function wRt(){if(mpe)return rd;mpe=1;var e=rd&&rd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=rd&&rd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=rd&&rd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(rd,"__esModule",{value:!0}),rd.CheckApiKeyResponse=void 0;const i=r(Ie());return rd.CheckApiKeyResponse=i.serialization.object({valid:i.serialization.boolean(),organizationId:i.serialization.property("organization_id",i.serialization.string().optional()),ownerId:i.serialization.property("owner_id",i.serialization.string().optional())}),rd}var id={},gpe;function jP(){if(gpe)return id;gpe=1;var e=id&&id.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=id&&id.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=id&&id.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(id,"__esModule",{value:!0}),id.ToolCall=void 0;const i=r(Ie());return id.ToolCall=i.serialization.object({name:i.serialization.string(),parameters:i.serialization.record(i.serialization.string(),i.serialization.unknown())}),id}var nd={},vpe;function $Pe(){if(vpe)return nd;vpe=1;var e=nd&&nd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=nd&&nd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=nd&&nd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(nd,"__esModule",{value:!0}),nd.ChatMessage=void 0;const i=r(Ie()),n=jP();return nd.ChatMessage=i.serialization.object({message:i.serialization.string(),toolCalls:i.serialization.property("tool_calls",i.serialization.list(n.ToolCall).optional())}),nd}var ad={},ype;function BI(){if(ype)return ad;ype=1;var e=ad&&ad.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=ad&&ad.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=ad&&ad.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(ad,"__esModule",{value:!0}),ad.ToolResult=void 0;const i=r(Ie()),n=jP();return ad.ToolResult=i.serialization.object({call:n.ToolCall,outputs:i.serialization.list(i.serialization.record(i.serialization.string(),i.serialization.unknown()))}),ad}var od={},bpe;function XPe(){if(bpe)return od;bpe=1;var e=od&&od.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=od&&od.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=od&&od.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(od,"__esModule",{value:!0}),od.ToolMessage=void 0;const i=r(Ie()),n=BI();return od.ToolMessage=i.serialization.object({toolResults:i.serialization.property("tool_results",i.serialization.list(n.ToolResult).optional())}),od}var sd={},_pe;function LI(){if(_pe)return sd;_pe=1;var e=sd&&sd.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=sd&&sd.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=sd&&sd.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(sd,"__esModule",{value:!0}),sd.Message=void 0;const i=r(Ie()),n=$Pe(),a=XPe();return sd.Message=i.serialization.union("role",{CHATBOT:n.ChatMessage,SYSTEM:n.ChatMessage,USER:n.ChatMessage,TOOL:a.ToolMessage}).transform({transform:o=>o,untransform:o=>o}),sd}var ld={},wpe;function aH(){if(wpe)return ld;wpe=1;var e=ld&&ld.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=ld&&ld.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=ld&&ld.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(ld,"__esModule",{value:!0}),ld.ChatConnector=void 0;const i=r(Ie());return ld.ChatConnector=i.serialization.object({id:i.serialization.string(),userAccessToken:i.serialization.property("user_access_token",i.serialization.string().optional()),continueOnFailure:i.serialization.property("continue_on_failure",i.serialization.boolean().optional()),options:i.serialization.record(i.serialization.string(),i.serialization.unknown()).optional()}),ld}var ud={},xpe;function zP(){if(xpe)return ud;xpe=1;var e=ud&&ud.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=ud&&ud.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=ud&&ud.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(ud,"__esModule",{value:!0}),ud.ChatDocument=void 0;const i=r(Ie());return ud.ChatDocument=i.serialization.record(i.serialization.string(),i.serialization.string()),ud}var cd={},Spe;function YPe(){if(Spe)return cd;Spe=1;var e=cd&&cd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=cd&&cd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=cd&&cd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(cd,"__esModule",{value:!0}),cd.ToolParameterDefinitionsValue=void 0;const i=r(Ie());return cd.ToolParameterDefinitionsValue=i.serialization.object({description:i.serialization.string().optional(),type:i.serialization.string(),required:i.serialization.boolean().optional()}),cd}var dd={},Cpe;function oH(){if(Cpe)return dd;Cpe=1;var e=dd&&dd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=dd&&dd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=dd&&dd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(dd,"__esModule",{value:!0}),dd.Tool=void 0;const i=r(Ie()),n=YPe();return dd.Tool=i.serialization.object({name:i.serialization.string(),description:i.serialization.string(),parameterDefinitions:i.serialization.property("parameter_definitions",i.serialization.record(i.serialization.string(),n.ToolParameterDefinitionsValue).optional())}),dd}var hd={},Epe;function KPe(){if(Epe)return hd;Epe=1;var e=hd&&hd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=hd&&hd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=hd&&hd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(hd,"__esModule",{value:!0}),hd.TextResponseFormat=void 0;const i=r(Ie());return hd.TextResponseFormat=i.serialization.object({}),hd}var fd={},Mpe;function QPe(){if(Mpe)return fd;Mpe=1;var e=fd&&fd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=fd&&fd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=fd&&fd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(fd,"__esModule",{value:!0}),fd.JsonResponseFormat=void 0;const i=r(Ie());return fd.JsonResponseFormat=i.serialization.object({schema:i.serialization.record(i.serialization.string(),i.serialization.unknown()).optional()}),fd}var pd={},Ppe;function sH(){if(Ppe)return pd;Ppe=1;var e=pd&&pd.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=pd&&pd.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=pd&&pd.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(pd,"__esModule",{value:!0}),pd.ResponseFormat=void 0;const i=r(Ie()),n=KPe(),a=QPe();return pd.ResponseFormat=i.serialization.union("type",{text:n.TextResponseFormat,json_object:a.JsonResponseFormat}).transform({transform:o=>o,untransform:o=>o}),pd}var md={},Tpe;function JPe(){if(Tpe)return md;Tpe=1;var e=md&&md.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=md&&md.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=md&&md.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(md,"__esModule",{value:!0}),md.ChatCitationType=void 0;const i=r(Ie());return md.ChatCitationType=i.serialization.enum_(["TEXT_CONTENT","PLAN"]),md}var gd={},Ape;function lH(){if(Ape)return gd;Ape=1;var e=gd&&gd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=gd&&gd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=gd&&gd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(gd,"__esModule",{value:!0}),gd.ChatCitation=void 0;const i=r(Ie()),n=JPe();return gd.ChatCitation=i.serialization.object({start:i.serialization.number(),end:i.serialization.number(),text:i.serialization.string(),documentIds:i.serialization.property("document_ids",i.serialization.list(i.serialization.string())),type:n.ChatCitationType.optional()}),gd}var vd={},Ope;function FI(){if(Ope)return vd;Ope=1;var e=vd&&vd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=vd&&vd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=vd&&vd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(vd,"__esModule",{value:!0}),vd.ChatSearchQuery=void 0;const i=r(Ie());return vd.ChatSearchQuery=i.serialization.object({text:i.serialization.string(),generationId:i.serialization.property("generation_id",i.serialization.string())}),vd}var yd={},Rpe;function ZPe(){if(Rpe)return yd;Rpe=1;var e=yd&&yd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=yd&&yd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=yd&&yd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(yd,"__esModule",{value:!0}),yd.ChatSearchResultConnector=void 0;const i=r(Ie());return yd.ChatSearchResultConnector=i.serialization.object({id:i.serialization.string()}),yd}var bd={},Dpe;function uH(){if(Dpe)return bd;Dpe=1;var e=bd&&bd.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=bd&&bd.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=bd&&bd.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(bd,"__esModule",{value:!0}),bd.ChatSearchResult=void 0;const i=r(Ie()),n=FI(),a=ZPe();return bd.ChatSearchResult=i.serialization.object({searchQuery:i.serialization.property("search_query",n.ChatSearchQuery.optional()),connector:a.ChatSearchResultConnector,documentIds:i.serialization.property("document_ids",i.serialization.list(i.serialization.string())),errorMessage:i.serialization.property("error_message",i.serialization.string().optional()),continueOnFailure:i.serialization.property("continue_on_failure",i.serialization.boolean().optional())}),bd}var _d={},Ipe;function BP(){if(Ipe)return _d;Ipe=1;var e=_d&&_d.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=_d&&_d.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=_d&&_d.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(_d,"__esModule",{value:!0}),_d.FinishReason=void 0;const i=r(Ie());return _d.FinishReason=i.serialization.enum_(["COMPLETE","STOP_SEQUENCE","ERROR","ERROR_TOXIC","ERROR_LIMIT","USER_CANCEL","MAX_TOKENS"]),_d}var wd={},jpe;function eTe(){if(jpe)return wd;jpe=1;var e=wd&&wd.__createBinding||(Object.create?function(h,f,g,p){p===void 0&&(p=g);var m=Object.getOwnPropertyDescriptor(f,g);(!m||("get"in m?!f.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return f[g]}}),Object.defineProperty(h,p,m)}:function(h,f,g,p){p===void 0&&(p=g),h[p]=f[g]}),t=wd&&wd.__setModuleDefault||(Object.create?function(h,f){Object.defineProperty(h,"default",{enumerable:!0,value:f})}:function(h,f){h.default=f}),r=wd&&wd.__importStar||function(h){if(h&&h.__esModule)return h;var f={};if(h!=null)for(var g in h)g!=="default"&&Object.prototype.hasOwnProperty.call(h,g)&&e(f,h,g);return t(f,h),f};Object.defineProperty(wd,"__esModule",{value:!0}),wd.NonStreamedChatResponse=void 0;const i=r(Ie()),n=lH(),a=zP(),o=FI(),s=uH(),l=BP(),u=jP(),c=LI(),d=hs();return wd.NonStreamedChatResponse=i.serialization.object({text:i.serialization.string(),generationId:i.serialization.property("generation_id",i.serialization.string().optional()),responseId:i.serialization.property("response_id",i.serialization.string().optional()),citations:i.serialization.list(n.ChatCitation).optional(),documents:i.serialization.list(a.ChatDocument).optional(),isSearchRequired:i.serialization.property("is_search_required",i.serialization.boolean().optional()),searchQueries:i.serialization.property("search_queries",i.serialization.list(o.ChatSearchQuery).optional()),searchResults:i.serialization.property("search_results",i.serialization.list(s.ChatSearchResult).optional()),finishReason:i.serialization.property("finish_reason",l.FinishReason.optional()),toolCalls:i.serialization.property("tool_calls",i.serialization.list(u.ToolCall).optional()),chatHistory:i.serialization.property("chat_history",i.serialization.list(c.Message).optional()),prompt:i.serialization.string().optional(),meta:d.ApiMeta.optional()}),wd}var xd={},zpe;function Vp(){if(zpe)return xd;zpe=1;var e=xd&&xd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=xd&&xd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=xd&&xd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(xd,"__esModule",{value:!0}),xd.ChatStreamEvent=void 0;const i=r(Ie());return xd.ChatStreamEvent=i.serialization.object({}),xd}var Sd={},Bpe;function tTe(){if(Bpe)return Sd;Bpe=1;var e=Sd&&Sd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Sd&&Sd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Sd&&Sd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.ChatStreamStartEvent=void 0;const i=r(Ie()),n=Vp();return Sd.ChatStreamStartEvent=i.serialization.object({generationId:i.serialization.property("generation_id",i.serialization.string())}).extend(n.ChatStreamEvent),Sd}var Cd={},Lpe;function rTe(){if(Lpe)return Cd;Lpe=1;var e=Cd&&Cd.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Cd&&Cd.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Cd&&Cd.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.ChatSearchQueriesGenerationEvent=void 0;const i=r(Ie()),n=FI(),a=Vp();return Cd.ChatSearchQueriesGenerationEvent=i.serialization.object({searchQueries:i.serialization.property("search_queries",i.serialization.list(n.ChatSearchQuery))}).extend(a.ChatStreamEvent),Cd}var Ed={},Fpe;function iTe(){if(Fpe)return Ed;Fpe=1;var e=Ed&&Ed.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Ed&&Ed.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Ed&&Ed.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.ChatSearchResultsEvent=void 0;const i=r(Ie()),n=uH(),a=zP(),o=Vp();return Ed.ChatSearchResultsEvent=i.serialization.object({searchResults:i.serialization.property("search_results",i.serialization.list(n.ChatSearchResult).optional()),documents:i.serialization.list(a.ChatDocument).optional()}).extend(o.ChatStreamEvent),Ed}var Md={},Npe;function nTe(){if(Npe)return Md;Npe=1;var e=Md&&Md.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Md&&Md.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Md&&Md.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Md,"__esModule",{value:!0}),Md.ChatTextGenerationEvent=void 0;const i=r(Ie()),n=Vp();return Md.ChatTextGenerationEvent=i.serialization.object({text:i.serialization.string()}).extend(n.ChatStreamEvent),Md}var Pd={},Upe;function aTe(){if(Upe)return Pd;Upe=1;var e=Pd&&Pd.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Pd&&Pd.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Pd&&Pd.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.ChatCitationGenerationEvent=void 0;const i=r(Ie()),n=lH(),a=Vp();return Pd.ChatCitationGenerationEvent=i.serialization.object({citations:i.serialization.list(n.ChatCitation)}).extend(a.ChatStreamEvent),Pd}var Td={},Vpe;function oTe(){if(Vpe)return Td;Vpe=1;var e=Td&&Td.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Td&&Td.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Td&&Td.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Td,"__esModule",{value:!0}),Td.ChatToolCallsGenerationEvent=void 0;const i=r(Ie()),n=jP(),a=Vp();return Td.ChatToolCallsGenerationEvent=i.serialization.object({text:i.serialization.string().optional(),toolCalls:i.serialization.property("tool_calls",i.serialization.list(n.ToolCall))}).extend(a.ChatStreamEvent),Td}var Ad={},kpe;function sTe(){if(kpe)return Ad;kpe=1;var e=Ad&&Ad.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ad&&Ad.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ad&&Ad.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.ChatStreamEndEventFinishReason=void 0;const i=r(Ie());return Ad.ChatStreamEndEventFinishReason=i.serialization.enum_(["COMPLETE","ERROR_LIMIT","MAX_TOKENS","ERROR","ERROR_TOXIC"]),Ad}var Od={},qpe;function lTe(){if(qpe)return Od;qpe=1;var e=Od&&Od.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Od&&Od.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Od&&Od.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Od,"__esModule",{value:!0}),Od.ChatStreamEndEvent=void 0;const i=r(Ie()),n=sTe(),a=eTe(),o=Vp();return Od.ChatStreamEndEvent=i.serialization.object({finishReason:i.serialization.property("finish_reason",n.ChatStreamEndEventFinishReason),response:a.NonStreamedChatResponse}).extend(o.ChatStreamEvent),Od}var Rd={},Wpe;function uTe(){if(Wpe)return Rd;Wpe=1;var e=Rd&&Rd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Rd&&Rd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Rd&&Rd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.ToolCallDelta=void 0;const i=r(Ie());return Rd.ToolCallDelta=i.serialization.object({name:i.serialization.string().optional(),index:i.serialization.number().optional(),parameters:i.serialization.string().optional(),text:i.serialization.string().optional()}),Rd}var Dd={},Gpe;function cTe(){if(Gpe)return Dd;Gpe=1;var e=Dd&&Dd.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Dd&&Dd.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Dd&&Dd.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.ChatToolCallsChunkEvent=void 0;const i=r(Ie()),n=uTe(),a=Vp();return Dd.ChatToolCallsChunkEvent=i.serialization.object({toolCallDelta:i.serialization.property("tool_call_delta",n.ToolCallDelta),text:i.serialization.string().optional()}).extend(a.ChatStreamEvent),Dd}var Id={},Hpe;function cH(){if(Hpe)return Id;Hpe=1;var e=Id&&Id.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Id&&Id.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Id&&Id.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Id,"__esModule",{value:!0}),Id.ChatDebugEvent=void 0;const i=r(Ie()),n=Vp();return Id.ChatDebugEvent=i.serialization.object({prompt:i.serialization.string().optional()}).extend(n.ChatStreamEvent),Id}var jd={},$pe;function xRt(){if($pe)return jd;$pe=1;var e=jd&&jd.__createBinding||(Object.create?function(f,g,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(g,p);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,m,y)}:function(f,g,p,m){m===void 0&&(m=p),f[m]=g[p]}),t=jd&&jd.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),r=jd&&jd.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(g,f,p);return t(g,f),g};Object.defineProperty(jd,"__esModule",{value:!0}),jd.StreamedChatResponse=void 0;const i=r(Ie()),n=tTe(),a=rTe(),o=iTe(),s=nTe(),l=aTe(),u=oTe(),c=lTe(),d=cTe(),h=cH();return jd.StreamedChatResponse=i.serialization.union(i.serialization.discriminant("eventType","event_type"),{"stream-start":n.ChatStreamStartEvent,"search-queries-generation":a.ChatSearchQueriesGenerationEvent,"search-results":o.ChatSearchResultsEvent,"text-generation":s.ChatTextGenerationEvent,"citation-generation":l.ChatCitationGenerationEvent,"tool-calls-generation":u.ChatToolCallsGenerationEvent,"stream-end":c.ChatStreamEndEvent,"tool-calls-chunk":d.ChatToolCallsChunkEvent,debug:h.ChatDebugEvent}).transform({transform:f=>f,untransform:f=>f}),jd}var zd={},Xpe;function dH(){if(Xpe)return zd;Xpe=1;var e=zd&&zd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=zd&&zd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=zd&&zd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(zd,"__esModule",{value:!0}),zd.ChatFinishReason=void 0;const i=r(Ie());return zd.ChatFinishReason=i.serialization.enum_(["COMPLETE","STOP_SEQUENCE","MAX_TOKENS","TOOL_CALL","ERROR"]),zd}var Bd={},Ype;function dTe(){if(Ype)return Bd;Ype=1;var e=Bd&&Bd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Bd&&Bd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Bd&&Bd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.AssistantMessageResponseContentItem=void 0;const i=r(Ie()),n=Nw();return Bd.AssistantMessageResponseContentItem=i.serialization.union("type",{text:n.TextContent}).transform({transform:a=>a,untransform:a=>a}),Bd}var Ld={},Kpe;function hTe(){if(Kpe)return Ld;Kpe=1;var e=Ld&&Ld.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Ld&&Ld.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Ld&&Ld.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.AssistantMessageResponse=void 0;const i=r(Ie()),n=RI(),a=dTe(),o=DI();return Ld.AssistantMessageResponse=i.serialization.object({role:i.serialization.stringLiteral("assistant"),toolCalls:i.serialization.property("tool_calls",i.serialization.list(n.ToolCallV2).optional()),toolPlan:i.serialization.property("tool_plan",i.serialization.string().optional()),content:i.serialization.list(a.AssistantMessageResponseContentItem).optional(),citations:i.serialization.list(o.Citation).optional()}),Ld}var Fd={},Qpe;function fTe(){if(Qpe)return Fd;Qpe=1;var e=Fd&&Fd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Fd&&Fd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Fd&&Fd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.UsageBilledUnits=void 0;const i=r(Ie());return Fd.UsageBilledUnits=i.serialization.object({inputTokens:i.serialization.property("input_tokens",i.serialization.number().optional()),outputTokens:i.serialization.property("output_tokens",i.serialization.number().optional()),searchUnits:i.serialization.property("search_units",i.serialization.number().optional()),classifications:i.serialization.number().optional()}),Fd}var Nd={},Jpe;function pTe(){if(Jpe)return Nd;Jpe=1;var e=Nd&&Nd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Nd&&Nd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Nd&&Nd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.UsageTokens=void 0;const i=r(Ie());return Nd.UsageTokens=i.serialization.object({inputTokens:i.serialization.property("input_tokens",i.serialization.number().optional()),outputTokens:i.serialization.property("output_tokens",i.serialization.number().optional())}),Nd}var Ud={},Zpe;function hH(){if(Zpe)return Ud;Zpe=1;var e=Ud&&Ud.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Ud&&Ud.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Ud&&Ud.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.Usage=void 0;const i=r(Ie()),n=fTe(),a=pTe();return Ud.Usage=i.serialization.object({billedUnits:i.serialization.property("billed_units",n.UsageBilledUnits.optional()),tokens:a.UsageTokens.optional()}),Ud}var Vd={},eme;function fH(){if(eme)return Vd;eme=1;var e=Vd&&Vd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Vd&&Vd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Vd&&Vd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.LogprobItem=void 0;const i=r(Ie());return Vd.LogprobItem=i.serialization.object({text:i.serialization.string().optional(),tokenIds:i.serialization.property("token_ids",i.serialization.list(i.serialization.number())),logprobs:i.serialization.list(i.serialization.number()).optional()}),Vd}var kd={},tme;function SRt(){if(tme)return kd;tme=1;var e=kd&&kd.__createBinding||(Object.create?function(l,u,c,d){d===void 0&&(d=c);var h=Object.getOwnPropertyDescriptor(u,c);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(l,d,h)}:function(l,u,c,d){d===void 0&&(d=c),l[d]=u[c]}),t=kd&&kd.__setModuleDefault||(Object.create?function(l,u){Object.defineProperty(l,"default",{enumerable:!0,value:u})}:function(l,u){l.default=u}),r=kd&&kd.__importStar||function(l){if(l&&l.__esModule)return l;var u={};if(l!=null)for(var c in l)c!=="default"&&Object.prototype.hasOwnProperty.call(l,c)&&e(u,l,c);return t(u,l),u};Object.defineProperty(kd,"__esModule",{value:!0}),kd.ChatResponse=void 0;const i=r(Ie()),n=dH(),a=hTe(),o=hH(),s=fH();return kd.ChatResponse=i.serialization.object({id:i.serialization.string(),finishReason:i.serialization.property("finish_reason",n.ChatFinishReason),prompt:i.serialization.string().optional(),message:a.AssistantMessageResponse,usage:o.Usage.optional(),logprobs:i.serialization.list(s.LogprobItem).optional()}),kd}var qd={},rme;function rl(){if(rme)return qd;rme=1;var e=qd&&qd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=qd&&qd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=qd&&qd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(qd,"__esModule",{value:!0}),qd.ChatStreamEventType=void 0;const i=r(Ie());return qd.ChatStreamEventType=i.serialization.object({}),qd}var Wd={},ime;function mTe(){if(ime)return Wd;ime=1;var e=Wd&&Wd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Wd&&Wd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Wd&&Wd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.ChatMessageStartEventDeltaMessage=void 0;const i=r(Ie());return Wd.ChatMessageStartEventDeltaMessage=i.serialization.object({role:i.serialization.stringLiteral("assistant").optional()}),Wd}var Gd={},nme;function gTe(){if(nme)return Gd;nme=1;var e=Gd&&Gd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Gd&&Gd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Gd&&Gd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.ChatMessageStartEventDelta=void 0;const i=r(Ie()),n=mTe();return Gd.ChatMessageStartEventDelta=i.serialization.object({message:n.ChatMessageStartEventDeltaMessage.optional()}),Gd}var Hd={},ame;function vTe(){if(ame)return Hd;ame=1;var e=Hd&&Hd.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Hd&&Hd.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Hd&&Hd.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.ChatMessageStartEvent=void 0;const i=r(Ie()),n=gTe(),a=rl();return Hd.ChatMessageStartEvent=i.serialization.object({id:i.serialization.string().optional(),delta:n.ChatMessageStartEventDelta.optional()}).extend(a.ChatStreamEventType),Hd}var $d={},ome;function yTe(){if(ome)return $d;ome=1;var e=$d&&$d.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=$d&&$d.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=$d&&$d.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty($d,"__esModule",{value:!0}),$d.ChatContentStartEventDeltaMessageContent=void 0;const i=r(Ie());return $d.ChatContentStartEventDeltaMessageContent=i.serialization.object({text:i.serialization.string().optional(),type:i.serialization.stringLiteral("text").optional()}),$d}var Xd={},sme;function bTe(){if(sme)return Xd;sme=1;var e=Xd&&Xd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Xd&&Xd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Xd&&Xd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.ChatContentStartEventDeltaMessage=void 0;const i=r(Ie()),n=yTe();return Xd.ChatContentStartEventDeltaMessage=i.serialization.object({content:n.ChatContentStartEventDeltaMessageContent.optional()}),Xd}var Yd={},lme;function _Te(){if(lme)return Yd;lme=1;var e=Yd&&Yd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Yd&&Yd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Yd&&Yd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.ChatContentStartEventDelta=void 0;const i=r(Ie()),n=bTe();return Yd.ChatContentStartEventDelta=i.serialization.object({message:n.ChatContentStartEventDeltaMessage.optional()}),Yd}var Kd={},ume;function wTe(){if(ume)return Kd;ume=1;var e=Kd&&Kd.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Kd&&Kd.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Kd&&Kd.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.ChatContentStartEvent=void 0;const i=r(Ie()),n=_Te(),a=rl();return Kd.ChatContentStartEvent=i.serialization.object({index:i.serialization.number().optional(),delta:n.ChatContentStartEventDelta.optional()}).extend(a.ChatStreamEventType),Kd}var Qd={},cme;function xTe(){if(cme)return Qd;cme=1;var e=Qd&&Qd.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Qd&&Qd.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Qd&&Qd.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.ChatContentDeltaEventDeltaMessageContent=void 0;const i=r(Ie());return Qd.ChatContentDeltaEventDeltaMessageContent=i.serialization.object({text:i.serialization.string().optional()}),Qd}var Jd={},dme;function STe(){if(dme)return Jd;dme=1;var e=Jd&&Jd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Jd&&Jd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Jd&&Jd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.ChatContentDeltaEventDeltaMessage=void 0;const i=r(Ie()),n=xTe();return Jd.ChatContentDeltaEventDeltaMessage=i.serialization.object({content:n.ChatContentDeltaEventDeltaMessageContent.optional()}),Jd}var Zd={},hme;function CTe(){if(hme)return Zd;hme=1;var e=Zd&&Zd.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Zd&&Zd.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Zd&&Zd.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.ChatContentDeltaEventDelta=void 0;const i=r(Ie()),n=STe();return Zd.ChatContentDeltaEventDelta=i.serialization.object({message:n.ChatContentDeltaEventDeltaMessage.optional()}),Zd}var eh={},fme;function ETe(){if(fme)return eh;fme=1;var e=eh&&eh.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=eh&&eh.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=eh&&eh.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(eh,"__esModule",{value:!0}),eh.ChatContentDeltaEvent=void 0;const i=r(Ie()),n=CTe(),a=fH(),o=rl();return eh.ChatContentDeltaEvent=i.serialization.object({index:i.serialization.number().optional(),delta:n.ChatContentDeltaEventDelta.optional(),logprobs:a.LogprobItem.optional()}).extend(o.ChatStreamEventType),eh}var th={},pme;function MTe(){if(pme)return th;pme=1;var e=th&&th.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=th&&th.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=th&&th.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(th,"__esModule",{value:!0}),th.ChatContentEndEvent=void 0;const i=r(Ie()),n=rl();return th.ChatContentEndEvent=i.serialization.object({index:i.serialization.number().optional()}).extend(n.ChatStreamEventType),th}var rh={},mme;function PTe(){if(mme)return rh;mme=1;var e=rh&&rh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=rh&&rh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=rh&&rh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(rh,"__esModule",{value:!0}),rh.ChatToolPlanDeltaEventDeltaMessage=void 0;const i=r(Ie());return rh.ChatToolPlanDeltaEventDeltaMessage=i.serialization.object({toolPlan:i.serialization.property("tool_plan",i.serialization.string().optional())}),rh}var ih={},gme;function TTe(){if(gme)return ih;gme=1;var e=ih&&ih.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=ih&&ih.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=ih&&ih.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(ih,"__esModule",{value:!0}),ih.ChatToolPlanDeltaEventDelta=void 0;const i=r(Ie()),n=PTe();return ih.ChatToolPlanDeltaEventDelta=i.serialization.object({message:n.ChatToolPlanDeltaEventDeltaMessage.optional()}),ih}var nh={},vme;function ATe(){if(vme)return nh;vme=1;var e=nh&&nh.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=nh&&nh.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=nh&&nh.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(nh,"__esModule",{value:!0}),nh.ChatToolPlanDeltaEvent=void 0;const i=r(Ie()),n=TTe(),a=rl();return nh.ChatToolPlanDeltaEvent=i.serialization.object({delta:n.ChatToolPlanDeltaEventDelta.optional()}).extend(a.ChatStreamEventType),nh}var ah={},yme;function OTe(){if(yme)return ah;yme=1;var e=ah&&ah.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=ah&&ah.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=ah&&ah.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(ah,"__esModule",{value:!0}),ah.ChatToolCallStartEventDeltaMessage=void 0;const i=r(Ie()),n=RI();return ah.ChatToolCallStartEventDeltaMessage=i.serialization.object({toolCalls:i.serialization.property("tool_calls",n.ToolCallV2.optional())}),ah}var oh={},bme;function RTe(){if(bme)return oh;bme=1;var e=oh&&oh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=oh&&oh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=oh&&oh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(oh,"__esModule",{value:!0}),oh.ChatToolCallStartEventDelta=void 0;const i=r(Ie()),n=OTe();return oh.ChatToolCallStartEventDelta=i.serialization.object({message:n.ChatToolCallStartEventDeltaMessage.optional()}),oh}var sh={},_me;function DTe(){if(_me)return sh;_me=1;var e=sh&&sh.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=sh&&sh.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=sh&&sh.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(sh,"__esModule",{value:!0}),sh.ChatToolCallStartEvent=void 0;const i=r(Ie()),n=RTe(),a=rl();return sh.ChatToolCallStartEvent=i.serialization.object({index:i.serialization.number().optional(),delta:n.ChatToolCallStartEventDelta.optional()}).extend(a.ChatStreamEventType),sh}var lh={},wme;function ITe(){if(wme)return lh;wme=1;var e=lh&&lh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=lh&&lh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=lh&&lh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(lh,"__esModule",{value:!0}),lh.ChatToolCallDeltaEventDeltaMessageToolCallsFunction=void 0;const i=r(Ie());return lh.ChatToolCallDeltaEventDeltaMessageToolCallsFunction=i.serialization.object({arguments:i.serialization.string().optional()}),lh}var uh={},xme;function jTe(){if(xme)return uh;xme=1;var e=uh&&uh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=uh&&uh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=uh&&uh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(uh,"__esModule",{value:!0}),uh.ChatToolCallDeltaEventDeltaMessageToolCalls=void 0;const i=r(Ie()),n=ITe();return uh.ChatToolCallDeltaEventDeltaMessageToolCalls=i.serialization.object({function:n.ChatToolCallDeltaEventDeltaMessageToolCallsFunction.optional()}),uh}var ch={},Sme;function zTe(){if(Sme)return ch;Sme=1;var e=ch&&ch.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=ch&&ch.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=ch&&ch.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(ch,"__esModule",{value:!0}),ch.ChatToolCallDeltaEventDeltaMessage=void 0;const i=r(Ie()),n=jTe();return ch.ChatToolCallDeltaEventDeltaMessage=i.serialization.object({toolCalls:i.serialization.property("tool_calls",n.ChatToolCallDeltaEventDeltaMessageToolCalls.optional())}),ch}var dh={},Cme;function BTe(){if(Cme)return dh;Cme=1;var e=dh&&dh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=dh&&dh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=dh&&dh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(dh,"__esModule",{value:!0}),dh.ChatToolCallDeltaEventDelta=void 0;const i=r(Ie()),n=zTe();return dh.ChatToolCallDeltaEventDelta=i.serialization.object({message:n.ChatToolCallDeltaEventDeltaMessage.optional()}),dh}var hh={},Eme;function LTe(){if(Eme)return hh;Eme=1;var e=hh&&hh.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=hh&&hh.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=hh&&hh.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(hh,"__esModule",{value:!0}),hh.ChatToolCallDeltaEvent=void 0;const i=r(Ie()),n=BTe(),a=rl();return hh.ChatToolCallDeltaEvent=i.serialization.object({index:i.serialization.number().optional(),delta:n.ChatToolCallDeltaEventDelta.optional()}).extend(a.ChatStreamEventType),hh}var fh={},Mme;function FTe(){if(Mme)return fh;Mme=1;var e=fh&&fh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=fh&&fh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=fh&&fh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(fh,"__esModule",{value:!0}),fh.ChatToolCallEndEvent=void 0;const i=r(Ie()),n=rl();return fh.ChatToolCallEndEvent=i.serialization.object({index:i.serialization.number().optional()}).extend(n.ChatStreamEventType),fh}var ph={},Pme;function NTe(){if(Pme)return ph;Pme=1;var e=ph&&ph.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=ph&&ph.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=ph&&ph.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(ph,"__esModule",{value:!0}),ph.CitationStartEventDeltaMessage=void 0;const i=r(Ie()),n=DI();return ph.CitationStartEventDeltaMessage=i.serialization.object({citations:n.Citation.optional()}),ph}var mh={},Tme;function UTe(){if(Tme)return mh;Tme=1;var e=mh&&mh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=mh&&mh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=mh&&mh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(mh,"__esModule",{value:!0}),mh.CitationStartEventDelta=void 0;const i=r(Ie()),n=NTe();return mh.CitationStartEventDelta=i.serialization.object({message:n.CitationStartEventDeltaMessage.optional()}),mh}var gh={},Ame;function VTe(){if(Ame)return gh;Ame=1;var e=gh&&gh.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=gh&&gh.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=gh&&gh.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(gh,"__esModule",{value:!0}),gh.CitationStartEvent=void 0;const i=r(Ie()),n=UTe(),a=rl();return gh.CitationStartEvent=i.serialization.object({index:i.serialization.number().optional(),delta:n.CitationStartEventDelta.optional()}).extend(a.ChatStreamEventType),gh}var vh={},Ome;function kTe(){if(Ome)return vh;Ome=1;var e=vh&&vh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=vh&&vh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=vh&&vh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(vh,"__esModule",{value:!0}),vh.CitationEndEvent=void 0;const i=r(Ie()),n=rl();return vh.CitationEndEvent=i.serialization.object({index:i.serialization.number().optional()}).extend(n.ChatStreamEventType),vh}var yh={},Rme;function qTe(){if(Rme)return yh;Rme=1;var e=yh&&yh.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=yh&&yh.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=yh&&yh.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(yh,"__esModule",{value:!0}),yh.ChatMessageEndEventDelta=void 0;const i=r(Ie()),n=dH(),a=hH();return yh.ChatMessageEndEventDelta=i.serialization.object({finishReason:i.serialization.property("finish_reason",n.ChatFinishReason.optional()),usage:a.Usage.optional()}),yh}var bh={},Dme;function WTe(){if(Dme)return bh;Dme=1;var e=bh&&bh.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=bh&&bh.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=bh&&bh.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(bh,"__esModule",{value:!0}),bh.ChatMessageEndEvent=void 0;const i=r(Ie()),n=qTe(),a=rl();return bh.ChatMessageEndEvent=i.serialization.object({id:i.serialization.string().optional(),delta:n.ChatMessageEndEventDelta.optional()}).extend(a.ChatStreamEventType),bh}var _h={},Ime;function CRt(){if(Ime)return _h;Ime=1;var e=_h&&_h.__createBinding||(Object.create?function(m,y,b,w){w===void 0&&(w=b);var x=Object.getOwnPropertyDescriptor(y,b);(!x||("get"in x?!y.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(m,w,x)}:function(m,y,b,w){w===void 0&&(w=b),m[w]=y[b]}),t=_h&&_h.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),r=_h&&_h.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var b in m)b!=="default"&&Object.prototype.hasOwnProperty.call(m,b)&&e(y,m,b);return t(y,m),y};Object.defineProperty(_h,"__esModule",{value:!0}),_h.StreamedChatResponseV2=void 0;const i=r(Ie()),n=vTe(),a=wTe(),o=ETe(),s=MTe(),l=ATe(),u=DTe(),c=LTe(),d=FTe(),h=VTe(),f=kTe(),g=WTe(),p=cH();return _h.StreamedChatResponseV2=i.serialization.union("type",{"message-start":n.ChatMessageStartEvent,"content-start":a.ChatContentStartEvent,"content-delta":o.ChatContentDeltaEvent,"content-end":s.ChatContentEndEvent,"tool-plan-delta":l.ChatToolPlanDeltaEvent,"tool-call-start":u.ChatToolCallStartEvent,"tool-call-delta":c.ChatToolCallDeltaEvent,"tool-call-end":d.ChatToolCallEndEvent,"citation-start":h.CitationStartEvent,"citation-end":f.CitationEndEvent,"message-end":g.ChatMessageEndEvent,debug:p.ChatDebugEvent}).transform({transform:m=>m,untransform:m=>m}),_h}var wh={},jme;function GTe(){if(jme)return wh;jme=1;var e=wh&&wh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=wh&&wh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=wh&&wh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(wh,"__esModule",{value:!0}),wh.SingleGenerationTokenLikelihoodsItem=void 0;const i=r(Ie());return wh.SingleGenerationTokenLikelihoodsItem=i.serialization.object({token:i.serialization.string(),likelihood:i.serialization.number()}),wh}var xh={},zme;function HTe(){if(zme)return xh;zme=1;var e=xh&&xh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=xh&&xh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=xh&&xh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(xh,"__esModule",{value:!0}),xh.SingleGeneration=void 0;const i=r(Ie()),n=GTe();return xh.SingleGeneration=i.serialization.object({id:i.serialization.string(),text:i.serialization.string(),index:i.serialization.number().optional(),likelihood:i.serialization.number().optional(),tokenLikelihoods:i.serialization.property("token_likelihoods",i.serialization.list(n.SingleGenerationTokenLikelihoodsItem).optional())}),xh}var Sh={},Bme;function ERt(){if(Bme)return Sh;Bme=1;var e=Sh&&Sh.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Sh&&Sh.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Sh&&Sh.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.Generation=void 0;const i=r(Ie()),n=HTe(),a=hs();return Sh.Generation=i.serialization.object({id:i.serialization.string(),prompt:i.serialization.string().optional(),generations:i.serialization.list(n.SingleGeneration),meta:a.ApiMeta.optional()}),Sh}var Ch={},Lme;function NI(){if(Lme)return Ch;Lme=1;var e=Ch&&Ch.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Ch&&Ch.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Ch&&Ch.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.GenerateStreamEvent=void 0;const i=r(Ie());return Ch.GenerateStreamEvent=i.serialization.object({}),Ch}var Eh={},Fme;function $Te(){if(Fme)return Eh;Fme=1;var e=Eh&&Eh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Eh&&Eh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Eh&&Eh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.GenerateStreamText=void 0;const i=r(Ie()),n=NI();return Eh.GenerateStreamText=i.serialization.object({text:i.serialization.string(),index:i.serialization.number().optional(),isFinished:i.serialization.property("is_finished",i.serialization.boolean())}).extend(n.GenerateStreamEvent),Eh}var Mh={},Nme;function XTe(){if(Nme)return Mh;Nme=1;var e=Mh&&Mh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Mh&&Mh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Mh&&Mh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.SingleGenerationInStream=void 0;const i=r(Ie()),n=BP();return Mh.SingleGenerationInStream=i.serialization.object({id:i.serialization.string(),text:i.serialization.string(),index:i.serialization.number().optional(),finishReason:i.serialization.property("finish_reason",n.FinishReason)}),Mh}var Ph={},Ume;function YTe(){if(Ume)return Ph;Ume=1;var e=Ph&&Ph.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Ph&&Ph.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Ph&&Ph.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.GenerateStreamEndResponse=void 0;const i=r(Ie()),n=XTe();return Ph.GenerateStreamEndResponse=i.serialization.object({id:i.serialization.string(),prompt:i.serialization.string().optional(),generations:i.serialization.list(n.SingleGenerationInStream).optional()}),Ph}var Th={},Vme;function KTe(){if(Vme)return Th;Vme=1;var e=Th&&Th.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Th&&Th.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Th&&Th.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Th,"__esModule",{value:!0}),Th.GenerateStreamEnd=void 0;const i=r(Ie()),n=BP(),a=YTe(),o=NI();return Th.GenerateStreamEnd=i.serialization.object({isFinished:i.serialization.property("is_finished",i.serialization.boolean()),finishReason:i.serialization.property("finish_reason",n.FinishReason.optional()),response:a.GenerateStreamEndResponse}).extend(o.GenerateStreamEvent),Th}var Ah={},kme;function QTe(){if(kme)return Ah;kme=1;var e=Ah&&Ah.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Ah&&Ah.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Ah&&Ah.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.GenerateStreamError=void 0;const i=r(Ie()),n=BP(),a=NI();return Ah.GenerateStreamError=i.serialization.object({index:i.serialization.number().optional(),isFinished:i.serialization.property("is_finished",i.serialization.boolean()),finishReason:i.serialization.property("finish_reason",n.FinishReason),err:i.serialization.string()}).extend(a.GenerateStreamEvent),Ah}var Oh={},qme;function MRt(){if(qme)return Oh;qme=1;var e=Oh&&Oh.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Oh&&Oh.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Oh&&Oh.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.GenerateStreamedResponse=void 0;const i=r(Ie()),n=$Te(),a=KTe(),o=QTe();return Oh.GenerateStreamedResponse=i.serialization.union(i.serialization.discriminant("eventType","event_type"),{"text-generation":n.GenerateStreamText,"stream-end":a.GenerateStreamEnd,"stream-error":o.GenerateStreamError}).transform({transform:s=>s,untransform:s=>s}),Oh}var Rh={},Wme;function JTe(){if(Wme)return Rh;Wme=1;var e=Rh&&Rh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Rh&&Rh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Rh&&Rh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.EmbedJobStatus=void 0;const i=r(Ie());return Rh.EmbedJobStatus=i.serialization.enum_(["processing","complete","cancelling","cancelled","failed"]),Rh}var Dh={},Gme;function ZTe(){if(Gme)return Dh;Gme=1;var e=Dh&&Dh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Dh&&Dh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Dh&&Dh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.EmbedJobTruncate=void 0;const i=r(Ie());return Dh.EmbedJobTruncate=i.serialization.enum_(["START","END"]),Dh}var Ih={},Hme;function eAe(){if(Hme)return Ih;Hme=1;var e=Ih&&Ih.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=Ih&&Ih.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=Ih&&Ih.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.EmbedJob=void 0;const i=r(Ie()),n=JTe(),a=ZTe(),o=hs();return Ih.EmbedJob=i.serialization.object({jobId:i.serialization.property("job_id",i.serialization.string()),name:i.serialization.string().optional(),status:n.EmbedJobStatus,createdAt:i.serialization.property("created_at",i.serialization.date()),inputDatasetId:i.serialization.property("input_dataset_id",i.serialization.string()),outputDatasetId:i.serialization.property("output_dataset_id",i.serialization.string().optional()),model:i.serialization.string(),truncate:a.EmbedJobTruncate,meta:o.ApiMeta.optional()}),Ih}var jh={},$me;function PRt(){if($me)return jh;$me=1;var e=jh&&jh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=jh&&jh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=jh&&jh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(jh,"__esModule",{value:!0}),jh.ListEmbedJobResponse=void 0;const i=r(Ie()),n=eAe();return jh.ListEmbedJobResponse=i.serialization.object({embedJobs:i.serialization.property("embed_jobs",i.serialization.list(n.EmbedJob).optional())}),jh}var zh={},Xme;function TRt(){if(Xme)return zh;Xme=1;var e=zh&&zh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=zh&&zh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=zh&&zh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(zh,"__esModule",{value:!0}),zh.CreateEmbedJobResponse=void 0;const i=r(Ie()),n=hs();return zh.CreateEmbedJobResponse=i.serialization.object({jobId:i.serialization.property("job_id",i.serialization.string()),meta:n.ApiMeta.optional()}),zh}var Bh={},Yme;function tAe(){if(Yme)return Bh;Yme=1;var e=Bh&&Bh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Bh&&Bh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Bh&&Bh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.ClassifyExample=void 0;const i=r(Ie());return Bh.ClassifyExample=i.serialization.object({text:i.serialization.string().optional(),label:i.serialization.string().optional()}),Bh}var Lh={},Kme;function ARt(){if(Kme)return Lh;Kme=1;var e=Lh&&Lh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Lh&&Lh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Lh&&Lh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.ParseInfo=void 0;const i=r(Ie());return Lh.ParseInfo=i.serialization.object({separator:i.serialization.string().optional(),delimiter:i.serialization.string().optional()}),Lh}var Fh={},Qme;function ORt(){if(Qme)return Fh;Qme=1;var e=Fh&&Fh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Fh&&Fh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Fh&&Fh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.RerankerDataMetrics=void 0;const i=r(Ie());return Fh.RerankerDataMetrics=i.serialization.object({numTrainQueries:i.serialization.property("num_train_queries",i.serialization.number().optional()),numTrainRelevantPassages:i.serialization.property("num_train_relevant_passages",i.serialization.number().optional()),numTrainHardNegatives:i.serialization.property("num_train_hard_negatives",i.serialization.number().optional()),numEvalQueries:i.serialization.property("num_eval_queries",i.serialization.number().optional()),numEvalRelevantPassages:i.serialization.property("num_eval_relevant_passages",i.serialization.number().optional()),numEvalHardNegatives:i.serialization.property("num_eval_hard_negatives",i.serialization.number().optional())}),Fh}var Nh={},Jme;function RRt(){if(Jme)return Nh;Jme=1;var e=Nh&&Nh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Nh&&Nh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Nh&&Nh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.ChatDataMetrics=void 0;const i=r(Ie());return Nh.ChatDataMetrics=i.serialization.object({numTrainTurns:i.serialization.property("num_train_turns",i.serialization.number().optional()),numEvalTurns:i.serialization.property("num_eval_turns",i.serialization.number().optional()),preamble:i.serialization.string().optional()}),Nh}var Uh={},Zme;function rAe(){if(Zme)return Uh;Zme=1;var e=Uh&&Uh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Uh&&Uh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Uh&&Uh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.LabelMetric=void 0;const i=r(Ie());return Uh.LabelMetric=i.serialization.object({totalExamples:i.serialization.property("total_examples",i.serialization.number().optional()),label:i.serialization.string().optional(),samples:i.serialization.list(i.serialization.string()).optional()}),Uh}var Vh={},ege;function DRt(){if(ege)return Vh;ege=1;var e=Vh&&Vh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Vh&&Vh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Vh&&Vh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.ClassifyDataMetrics=void 0;const i=r(Ie()),n=rAe();return Vh.ClassifyDataMetrics=i.serialization.object({labelMetrics:i.serialization.property("label_metrics",i.serialization.list(n.LabelMetric).optional())}),Vh}var kh={},tge;function iAe(){if(tge)return kh;tge=1;var e=kh&&kh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=kh&&kh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=kh&&kh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(kh,"__esModule",{value:!0}),kh.FinetuneDatasetMetrics=void 0;const i=r(Ie());return kh.FinetuneDatasetMetrics=i.serialization.object({trainableTokenCount:i.serialization.property("trainable_token_count",i.serialization.number().optional()),totalExamples:i.serialization.property("total_examples",i.serialization.number().optional()),trainExamples:i.serialization.property("train_examples",i.serialization.number().optional()),trainSizeBytes:i.serialization.property("train_size_bytes",i.serialization.number().optional()),evalExamples:i.serialization.property("eval_examples",i.serialization.number().optional()),evalSizeBytes:i.serialization.property("eval_size_bytes",i.serialization.number().optional())}),kh}var qh={},rge;function nAe(){if(rge)return qh;rge=1;var e=qh&&qh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=qh&&qh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=qh&&qh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(qh,"__esModule",{value:!0}),qh.MetricsEmbedDataFieldsItem=void 0;const i=r(Ie());return qh.MetricsEmbedDataFieldsItem=i.serialization.object({name:i.serialization.string().optional(),count:i.serialization.number().optional()}),qh}var Wh={},ige;function aAe(){if(ige)return Wh;ige=1;var e=Wh&&Wh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Wh&&Wh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Wh&&Wh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.MetricsEmbedData=void 0;const i=r(Ie()),n=nAe();return Wh.MetricsEmbedData=i.serialization.object({fields:i.serialization.list(n.MetricsEmbedDataFieldsItem).optional()}),Wh}var Gh={},nge;function IRt(){if(nge)return Gh;nge=1;var e=Gh&&Gh.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Gh&&Gh.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Gh&&Gh.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.Metrics=void 0;const i=r(Ie()),n=iAe(),a=aAe();return Gh.Metrics=i.serialization.object({finetuneDatasetMetrics:i.serialization.property("finetune_dataset_metrics",n.FinetuneDatasetMetrics.optional()),embedData:i.serialization.property("embed_data",a.MetricsEmbedData.optional())}),Gh}var Hh={},age;function oAe(){if(age)return Hh;age=1;var e=Hh&&Hh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Hh&&Hh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Hh&&Hh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.ConnectorOAuth=void 0;const i=r(Ie());return Hh.ConnectorOAuth=i.serialization.object({clientId:i.serialization.property("client_id",i.serialization.string().optional()),clientSecret:i.serialization.property("client_secret",i.serialization.string().optional()),authorizeUrl:i.serialization.property("authorize_url",i.serialization.string()),tokenUrl:i.serialization.property("token_url",i.serialization.string()),scope:i.serialization.string().optional()}),Hh}var $h={},oge;function sAe(){if(oge)return $h;oge=1;var e=$h&&$h.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=$h&&$h.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=$h&&$h.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty($h,"__esModule",{value:!0}),$h.ConnectorAuthStatus=void 0;const i=r(Ie());return $h.ConnectorAuthStatus=i.serialization.enum_(["valid","expired"]),$h}var Xh={},sge;function LP(){if(sge)return Xh;sge=1;var e=Xh&&Xh.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=Xh&&Xh.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=Xh&&Xh.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.Connector=void 0;const i=r(Ie()),n=oAe(),a=sAe();return Xh.Connector=i.serialization.object({id:i.serialization.string(),organizationId:i.serialization.property("organization_id",i.serialization.string().optional()),name:i.serialization.string(),description:i.serialization.string().optional(),url:i.serialization.string().optional(),createdAt:i.serialization.property("created_at",i.serialization.date()),updatedAt:i.serialization.property("updated_at",i.serialization.date()),excludes:i.serialization.list(i.serialization.string()).optional(),authType:i.serialization.property("auth_type",i.serialization.string().optional()),oauth:n.ConnectorOAuth.optional(),authStatus:i.serialization.property("auth_status",a.ConnectorAuthStatus.optional()),active:i.serialization.boolean().optional(),continueOnFailure:i.serialization.property("continue_on_failure",i.serialization.boolean().optional())}),Xh}var Yh={},lge;function jRt(){if(lge)return Yh;lge=1;var e=Yh&&Yh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Yh&&Yh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Yh&&Yh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.ListConnectorsResponse=void 0;const i=r(Ie()),n=LP();return Yh.ListConnectorsResponse=i.serialization.object({connectors:i.serialization.list(n.Connector),totalCount:i.serialization.property("total_count",i.serialization.number().optional())}),Yh}var Kh={},uge;function zRt(){if(uge)return Kh;uge=1;var e=Kh&&Kh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Kh&&Kh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Kh&&Kh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.CreateConnectorResponse=void 0;const i=r(Ie()),n=LP();return Kh.CreateConnectorResponse=i.serialization.object({connector:n.Connector}),Kh}var Qh={},cge;function BRt(){if(cge)return Qh;cge=1;var e=Qh&&Qh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Qh&&Qh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Qh&&Qh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Qh,"__esModule",{value:!0}),Qh.GetConnectorResponse=void 0;const i=r(Ie()),n=LP();return Qh.GetConnectorResponse=i.serialization.object({connector:n.Connector}),Qh}var Jh={},dge;function LRt(){if(dge)return Jh;dge=1;var e=Jh&&Jh.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=Jh&&Jh.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=Jh&&Jh.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.DeleteConnectorResponse=void 0;const i=r(Ie());return Jh.DeleteConnectorResponse=i.serialization.record(i.serialization.string(),i.serialization.unknown()),Jh}var Zh={},hge;function FRt(){if(hge)return Zh;hge=1;var e=Zh&&Zh.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=Zh&&Zh.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=Zh&&Zh.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.UpdateConnectorResponse=void 0;const i=r(Ie()),n=LP();return Zh.UpdateConnectorResponse=i.serialization.object({connector:n.Connector}),Zh}var ef={},fge;function NRt(){if(fge)return ef;fge=1;var e=ef&&ef.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=ef&&ef.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=ef&&ef.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(ef,"__esModule",{value:!0}),ef.OAuthAuthorizeResponse=void 0;const i=r(Ie());return ef.OAuthAuthorizeResponse=i.serialization.object({redirectUrl:i.serialization.property("redirect_url",i.serialization.string().optional())}),ef}var tf={},pge;function lAe(){if(pge)return tf;pge=1;var e=tf&&tf.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=tf&&tf.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=tf&&tf.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(tf,"__esModule",{value:!0}),tf.CompatibleEndpoint=void 0;const i=r(Ie());return tf.CompatibleEndpoint=i.serialization.enum_(["chat","embed","classify","summarize","rerank","rate","generate"]),tf}var rf={},mge;function uAe(){if(mge)return rf;mge=1;var e=rf&&rf.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=rf&&rf.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=rf&&rf.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(rf,"__esModule",{value:!0}),rf.GetModelResponse=void 0;const i=r(Ie()),n=lAe();return rf.GetModelResponse=i.serialization.object({name:i.serialization.string().optional(),endpoints:i.serialization.list(n.CompatibleEndpoint).optional(),finetuned:i.serialization.boolean().optional(),contextLength:i.serialization.property("context_length",i.serialization.number().optional()),tokenizerUrl:i.serialization.property("tokenizer_url",i.serialization.string().optional()),supportsVision:i.serialization.property("supports_vision",i.serialization.boolean().optional()),defaultEndpoints:i.serialization.property("default_endpoints",i.serialization.list(n.CompatibleEndpoint).optional())}),rf}var nf={},gge;function URt(){if(gge)return nf;gge=1;var e=nf&&nf.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=nf&&nf.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=nf&&nf.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(nf,"__esModule",{value:!0}),nf.ListModelsResponse=void 0;const i=r(Ie()),n=uAe();return nf.ListModelsResponse=i.serialization.object({models:i.serialization.list(n.GetModelResponse),nextPageToken:i.serialization.property("next_page_token",i.serialization.string().optional())}),nf}var vge;function VRt(){return vge||(vge=1,function(e){var t=d0&&d0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=d0&&d0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(xPe(),e),r(SPe(),e),r(fRt(),e),r(CPe(),e),r(EPe(),e),r(MPe(),e),r(pRt(),e),r(PPe(),e),r(TPe(),e),r(APe(),e),r(OPe(),e),r(RPe(),e),r(DPe(),e),r(mRt(),e),r(LPe(),e),r(FPe(),e),r(NPe(),e),r(gRt(),e),r(UPe(),e),r(VPe(),e),r(kPe(),e),r(qPe(),e),r(vRt(),e),r(WPe(),e),r(GPe(),e),r(HPe(),e),r(yRt(),e),r(bRt(),e),r(_Rt(),e),r(wRt(),e),r(jP(),e),r($Pe(),e),r(BI(),e),r(XPe(),e),r(LI(),e),r(aH(),e),r(zP(),e),r(YPe(),e),r(oH(),e),r(KPe(),e),r(QPe(),e),r(sH(),e),r(JPe(),e),r(lH(),e),r(FI(),e),r(ZPe(),e),r(uH(),e),r(BP(),e),r(PMe(),e),r(TMe(),e),r(AMe(),e),r(hs(),e),r(eTe(),e),r(Vp(),e),r(tTe(),e),r(rTe(),e),r(iTe(),e),r(nTe(),e),r(aTe(),e),r(oTe(),e),r(sTe(),e),r(lTe(),e),r(uTe(),e),r(cTe(),e),r(cH(),e),r(xRt(),e),r(Nw(),e),r(RMe(),e),r(DMe(),e),r(IMe(),e),r(jMe(),e),r(zMe(),e),r(BMe(),e),r(RI(),e),r(NMe(),e),r(UMe(),e),r(VMe(),e),r(kMe(),e),r(DI(),e),r(LMe(),e),r(FMe(),e),r(qMe(),e),r(WMe(),e),r(GMe(),e),r(HMe(),e),r(OI(),e),r($Me(),e),r(XMe(),e),r(YMe(),e),r(KMe(),e),r(QMe(),e),r(KG(),e),r(JMe(),e),r(QG(),e),r(ZMe(),e),r(JG(),e),r(ePe(),e),r(tPe(),e),r(ZG(),e),r(dH(),e),r(dTe(),e),r(hTe(),e),r(fTe(),e),r(pTe(),e),r(hH(),e),r(fH(),e),r(SRt(),e),r(rl(),e),r(mTe(),e),r(gTe(),e),r(vTe(),e),r(yTe(),e),r(bTe(),e),r(_Te(),e),r(wTe(),e),r(xTe(),e),r(STe(),e),r(CTe(),e),r(ETe(),e),r(MTe(),e),r(PTe(),e),r(TTe(),e),r(ATe(),e),r(OTe(),e),r(RTe(),e),r(DTe(),e),r(ITe(),e),r(jTe(),e),r(zTe(),e),r(BTe(),e),r(LTe(),e),r(FTe(),e),r(NTe(),e),r(UTe(),e),r(VTe(),e),r(kTe(),e),r(qTe(),e),r(WTe(),e),r(CRt(),e),r(GTe(),e),r(HTe(),e),r(ERt(),e),r(NI(),e),r($Te(),e),r(XTe(),e),r(YTe(),e),r(KTe(),e),r(QTe(),e),r(MRt(),e),r(II(),e),r(jI(),e),r(nH(),e),r(IPe(),e),r(jPe(),e),r(zPe(),e),r(JTe(),e),r(ZTe(),e),r(eAe(),e),r(PRt(),e),r(TRt(),e),r(BPe(),e),r(tAe(),e),r(sPe(),e),r(oPe(),e),r(lPe(),e),r(ARt(),e),r(ORt(),e),r(RRt(),e),r(rAe(),e),r(DRt(),e),r(iAe(),e),r(nAe(),e),r(aAe(),e),r(IRt(),e),r(eH(),e),r(oAe(),e),r(sAe(),e),r(LP(),e),r(jRt(),e),r(rH(),e),r(_Pe(),e),r(iH(),e),r(zRt(),e),r(BRt(),e),r(LRt(),e),r(FRt(),e),r(NRt(),e),r(lAe(),e),r(uAe(),e),r(URt(),e)}(d0)),d0}var h0={},U5={},af={},yge;function kRt(){if(yge)return af;yge=1;var e=af&&af.__createBinding||(Object.create?function(f,g,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(g,p);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,m,y)}:function(f,g,p,m){m===void 0&&(m=p),f[m]=g[p]}),t=af&&af.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),r=af&&af.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(g,f,p);return t(g,f),g};Object.defineProperty(af,"__esModule",{value:!0}),af.ChatStreamRequest=void 0;const i=r(Ie()),n=LI(),a=xPe(),o=aH(),s=zP(),l=SPe(),u=oH(),c=BI(),d=sH(),h=CPe();return af.ChatStreamRequest=i.serialization.object({message:i.serialization.string(),model:i.serialization.string().optional(),preamble:i.serialization.string().optional(),chatHistory:i.serialization.property("chat_history",i.serialization.list(n.Message).optional()),conversationId:i.serialization.property("conversation_id",i.serialization.string().optional()),promptTruncation:i.serialization.property("prompt_truncation",a.ChatStreamRequestPromptTruncation.optional()),connectors:i.serialization.list(o.ChatConnector).optional(),searchQueriesOnly:i.serialization.property("search_queries_only",i.serialization.boolean().optional()),documents:i.serialization.list(s.ChatDocument).optional(),citationQuality:i.serialization.property("citation_quality",l.ChatStreamRequestCitationQuality.optional()),temperature:i.serialization.number().optional(),maxTokens:i.serialization.property("max_tokens",i.serialization.number().optional()),maxInputTokens:i.serialization.property("max_input_tokens",i.serialization.number().optional()),k:i.serialization.number().optional(),p:i.serialization.number().optional(),seed:i.serialization.number().optional(),stopSequences:i.serialization.property("stop_sequences",i.serialization.list(i.serialization.string()).optional()),frequencyPenalty:i.serialization.property("frequency_penalty",i.serialization.number().optional()),presencePenalty:i.serialization.property("presence_penalty",i.serialization.number().optional()),rawPrompting:i.serialization.property("raw_prompting",i.serialization.boolean().optional()),returnPrompt:i.serialization.property("return_prompt",i.serialization.boolean().optional()),tools:i.serialization.list(u.Tool).optional(),toolResults:i.serialization.property("tool_results",i.serialization.list(c.ToolResult).optional()),forceSingleStep:i.serialization.property("force_single_step",i.serialization.boolean().optional()),responseFormat:i.serialization.property("response_format",d.ResponseFormat.optional()),safetyMode:i.serialization.property("safety_mode",h.ChatStreamRequestSafetyMode.optional())}),af}var of={},bge;function qRt(){if(bge)return of;bge=1;var e=of&&of.__createBinding||(Object.create?function(f,g,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(g,p);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,m,y)}:function(f,g,p,m){m===void 0&&(m=p),f[m]=g[p]}),t=of&&of.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),r=of&&of.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(g,f,p);return t(g,f),g};Object.defineProperty(of,"__esModule",{value:!0}),of.ChatRequest=void 0;const i=r(Ie()),n=LI(),a=EPe(),o=aH(),s=zP(),l=MPe(),u=oH(),c=BI(),d=sH(),h=PPe();return of.ChatRequest=i.serialization.object({message:i.serialization.string(),model:i.serialization.string().optional(),preamble:i.serialization.string().optional(),chatHistory:i.serialization.property("chat_history",i.serialization.list(n.Message).optional()),conversationId:i.serialization.property("conversation_id",i.serialization.string().optional()),promptTruncation:i.serialization.property("prompt_truncation",a.ChatRequestPromptTruncation.optional()),connectors:i.serialization.list(o.ChatConnector).optional(),searchQueriesOnly:i.serialization.property("search_queries_only",i.serialization.boolean().optional()),documents:i.serialization.list(s.ChatDocument).optional(),citationQuality:i.serialization.property("citation_quality",l.ChatRequestCitationQuality.optional()),temperature:i.serialization.number().optional(),maxTokens:i.serialization.property("max_tokens",i.serialization.number().optional()),maxInputTokens:i.serialization.property("max_input_tokens",i.serialization.number().optional()),k:i.serialization.number().optional(),p:i.serialization.number().optional(),seed:i.serialization.number().optional(),stopSequences:i.serialization.property("stop_sequences",i.serialization.list(i.serialization.string()).optional()),frequencyPenalty:i.serialization.property("frequency_penalty",i.serialization.number().optional()),presencePenalty:i.serialization.property("presence_penalty",i.serialization.number().optional()),rawPrompting:i.serialization.property("raw_prompting",i.serialization.boolean().optional()),returnPrompt:i.serialization.property("return_prompt",i.serialization.boolean().optional()),tools:i.serialization.list(u.Tool).optional(),toolResults:i.serialization.property("tool_results",i.serialization.list(c.ToolResult).optional()),forceSingleStep:i.serialization.property("force_single_step",i.serialization.boolean().optional()),responseFormat:i.serialization.property("response_format",d.ResponseFormat.optional()),safetyMode:i.serialization.property("safety_mode",h.ChatRequestSafetyMode.optional())}),of}var sf={},_ge;function WRt(){if(_ge)return sf;_ge=1;var e=sf&&sf.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=sf&&sf.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=sf&&sf.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(sf,"__esModule",{value:!0}),sf.GenerateStreamRequest=void 0;const i=r(Ie()),n=TPe(),a=APe();return sf.GenerateStreamRequest=i.serialization.object({prompt:i.serialization.string(),model:i.serialization.string().optional(),numGenerations:i.serialization.property("num_generations",i.serialization.number().optional()),maxTokens:i.serialization.property("max_tokens",i.serialization.number().optional()),truncate:n.GenerateStreamRequestTruncate.optional(),temperature:i.serialization.number().optional(),seed:i.serialization.number().optional(),preset:i.serialization.string().optional(),endSequences:i.serialization.property("end_sequences",i.serialization.list(i.serialization.string()).optional()),stopSequences:i.serialization.property("stop_sequences",i.serialization.list(i.serialization.string()).optional()),k:i.serialization.number().optional(),p:i.serialization.number().optional(),frequencyPenalty:i.serialization.property("frequency_penalty",i.serialization.number().optional()),presencePenalty:i.serialization.property("presence_penalty",i.serialization.number().optional()),returnLikelihoods:i.serialization.property("return_likelihoods",a.GenerateStreamRequestReturnLikelihoods.optional()),rawPrompting:i.serialization.property("raw_prompting",i.serialization.boolean().optional())}),sf}var lf={},wge;function GRt(){if(wge)return lf;wge=1;var e=lf&&lf.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=lf&&lf.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=lf&&lf.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(lf,"__esModule",{value:!0}),lf.GenerateRequest=void 0;const i=r(Ie()),n=OPe(),a=RPe();return lf.GenerateRequest=i.serialization.object({prompt:i.serialization.string(),model:i.serialization.string().optional(),numGenerations:i.serialization.property("num_generations",i.serialization.number().optional()),maxTokens:i.serialization.property("max_tokens",i.serialization.number().optional()),truncate:n.GenerateRequestTruncate.optional(),temperature:i.serialization.number().optional(),seed:i.serialization.number().optional(),preset:i.serialization.string().optional(),endSequences:i.serialization.property("end_sequences",i.serialization.list(i.serialization.string()).optional()),stopSequences:i.serialization.property("stop_sequences",i.serialization.list(i.serialization.string()).optional()),k:i.serialization.number().optional(),p:i.serialization.number().optional(),frequencyPenalty:i.serialization.property("frequency_penalty",i.serialization.number().optional()),presencePenalty:i.serialization.property("presence_penalty",i.serialization.number().optional()),returnLikelihoods:i.serialization.property("return_likelihoods",a.GenerateRequestReturnLikelihoods.optional()),rawPrompting:i.serialization.property("raw_prompting",i.serialization.boolean().optional())}),lf}var uf={},xge;function HRt(){if(xge)return uf;xge=1;var e=uf&&uf.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=uf&&uf.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=uf&&uf.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(uf,"__esModule",{value:!0}),uf.EmbedRequest=void 0;const i=r(Ie()),n=II(),a=jI(),o=DPe();return uf.EmbedRequest=i.serialization.object({texts:i.serialization.list(i.serialization.string()).optional(),images:i.serialization.list(i.serialization.string()).optional(),model:i.serialization.string().optional(),inputType:i.serialization.property("input_type",n.EmbedInputType.optional()),embeddingTypes:i.serialization.property("embedding_types",i.serialization.list(a.EmbeddingType).optional()),truncate:o.EmbedRequestTruncate.optional()}),uf}var cf={},Sge;function $Rt(){if(Sge)return cf;Sge=1;var e=cf&&cf.__createBinding||(Object.create?function(a,o,s,l){l===void 0&&(l=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,l,u)}:function(a,o,s,l){l===void 0&&(l=s),a[l]=o[s]}),t=cf&&cf.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),r=cf&&cf.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(o,a,s);return t(o,a),o};Object.defineProperty(cf,"__esModule",{value:!0}),cf.RerankRequest=void 0;const i=r(Ie()),n=LPe();return cf.RerankRequest=i.serialization.object({model:i.serialization.string().optional(),query:i.serialization.string(),documents:i.serialization.list(n.RerankRequestDocumentsItem),topN:i.serialization.property("top_n",i.serialization.number().optional()),rankFields:i.serialization.property("rank_fields",i.serialization.list(i.serialization.string()).optional()),returnDocuments:i.serialization.property("return_documents",i.serialization.boolean().optional()),maxChunksPerDoc:i.serialization.property("max_chunks_per_doc",i.serialization.number().optional())}),cf}var df={},Cge;function XRt(){if(Cge)return df;Cge=1;var e=df&&df.__createBinding||(Object.create?function(o,s,l,u){u===void 0&&(u=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(o,u,c)}:function(o,s,l,u){u===void 0&&(u=l),o[u]=s[l]}),t=df&&df.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=df&&df.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var l in o)l!=="default"&&Object.prototype.hasOwnProperty.call(o,l)&&e(s,o,l);return t(s,o),s};Object.defineProperty(df,"__esModule",{value:!0}),df.ClassifyRequest=void 0;const i=r(Ie()),n=tAe(),a=UPe();return df.ClassifyRequest=i.serialization.object({inputs:i.serialization.list(i.serialization.string()),examples:i.serialization.list(n.ClassifyExample).optional(),model:i.serialization.string().optional(),preset:i.serialization.string().optional(),truncate:a.ClassifyRequestTruncate.optional()}),df}var hf={},Ege;function YRt(){if(Ege)return hf;Ege=1;var e=hf&&hf.__createBinding||(Object.create?function(s,l,u,c){c===void 0&&(c=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,c,d)}:function(s,l,u,c){c===void 0&&(c=u),s[c]=l[u]}),t=hf&&hf.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),r=hf&&hf.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&e(l,s,u);return t(l,s),l};Object.defineProperty(hf,"__esModule",{value:!0}),hf.SummarizeRequest=void 0;const i=r(Ie()),n=WPe(),a=GPe(),o=HPe();return hf.SummarizeRequest=i.serialization.object({text:i.serialization.string(),length:n.SummarizeRequestLength.optional(),format:a.SummarizeRequestFormat.optional(),model:i.serialization.string().optional(),extractiveness:o.SummarizeRequestExtractiveness.optional(),temperature:i.serialization.number().optional(),additionalCommand:i.serialization.property("additional_command",i.serialization.string().optional())}),hf}var ff={},Mge;function KRt(){if(Mge)return ff;Mge=1;var e=ff&&ff.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=ff&&ff.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=ff&&ff.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(ff,"__esModule",{value:!0}),ff.TokenizeRequest=void 0;const i=r(Ie());return ff.TokenizeRequest=i.serialization.object({text:i.serialization.string(),model:i.serialization.string()}),ff}var pf={},Pge;function QRt(){if(Pge)return pf;Pge=1;var e=pf&&pf.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var l=Object.getOwnPropertyDescriptor(a,o);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,l)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),t=pf&&pf.__setModuleDefault||(Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a}),r=pf&&pf.__importStar||function(n){if(n&&n.__esModule)return n;var a={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(a,n,o);return t(a,n),a};Object.defineProperty(pf,"__esModule",{value:!0}),pf.DetokenizeRequest=void 0;const i=r(Ie());return pf.DetokenizeRequest=i.serialization.object({tokens:i.serialization.list(i.serialization.number()),model:i.serialization.string()}),pf}var Tge;function JRt(){return Tge||(Tge=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DetokenizeRequest=e.TokenizeRequest=e.SummarizeRequest=e.ClassifyRequest=e.RerankRequest=e.EmbedRequest=e.GenerateRequest=e.GenerateStreamRequest=e.ChatRequest=e.ChatStreamRequest=void 0;var t=kRt();Object.defineProperty(e,"ChatStreamRequest",{enumerable:!0,get:function(){return t.ChatStreamRequest}});var r=qRt();Object.defineProperty(e,"ChatRequest",{enumerable:!0,get:function(){return r.ChatRequest}});var i=WRt();Object.defineProperty(e,"GenerateStreamRequest",{enumerable:!0,get:function(){return i.GenerateStreamRequest}});var n=GRt();Object.defineProperty(e,"GenerateRequest",{enumerable:!0,get:function(){return n.GenerateRequest}});var a=HRt();Object.defineProperty(e,"EmbedRequest",{enumerable:!0,get:function(){return a.EmbedRequest}});var o=$Rt();Object.defineProperty(e,"RerankRequest",{enumerable:!0,get:function(){return o.RerankRequest}});var s=XRt();Object.defineProperty(e,"ClassifyRequest",{enumerable:!0,get:function(){return s.ClassifyRequest}});var l=YRt();Object.defineProperty(e,"SummarizeRequest",{enumerable:!0,get:function(){return l.SummarizeRequest}});var u=KRt();Object.defineProperty(e,"TokenizeRequest",{enumerable:!0,get:function(){return u.TokenizeRequest}});var c=QRt();Object.defineProperty(e,"DetokenizeRequest",{enumerable:!0,get:function(){return c.DetokenizeRequest}})}(U5)),U5}var Age;function ZRt(){return Age||(Age=1,function(e){var t=h0&&h0.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=h0&&h0.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(JRt(),e)}(h0)),h0}var Oge;function Lv(){return Oge||(Oge=1,function(e){var t=Ky&&Ky.__createBinding||(Object.create?function(i,n,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(n,a);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,o,s)}:function(i,n,a,o){o===void 0&&(o=a),i[o]=n[a]}),r=Ky&&Ky.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&t(n,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(hRt(),e),r(VRt(),e),r(ZRt(),e)}(Ky)),Ky}var Rge;function cAe(){return Rge||(Rge=1,function(e){var t={},r=Yo&&Yo.__createBinding||(Object.create?function(A,P,O,j){j===void 0&&(j=O);var D=Object.getOwnPropertyDescriptor(P,O);(!D||("get"in D?!P.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return P[O]}}),Object.defineProperty(A,j,D)}:function(A,P,O,j){j===void 0&&(j=O),A[j]=P[O]}),i=Yo&&Yo.__setModuleDefault||(Object.create?function(A,P){Object.defineProperty(A,"default",{enumerable:!0,value:P})}:function(A,P){A.default=P}),n=Yo&&Yo.__importStar||function(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var O in A)O!=="default"&&Object.prototype.hasOwnProperty.call(A,O)&&r(P,A,O);return i(P,A),P},a=Yo&&Yo.__awaiter||function(A,P,O,j){function D(I){return I instanceof O?I:new O(function(q){q(I)})}return new(O||(O=Promise))(function(I,q){function $(Q){try{N(j.next(Q))}catch(F){q(F)}}function X(Q){try{N(j.throw(Q))}catch(F){q(F)}}function N(Q){Q.done?I(Q.value):D(Q.value).then($,X)}N((j=j.apply(A,P||[])).next())})},o=Yo&&Yo.__asyncValues||function(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=A[Symbol.asyncIterator],O;return P?P.call(A):(A=typeof __values=="function"?__values(A):A[Symbol.iterator](),O={},j("next"),j("throw"),j("return"),O[Symbol.asyncIterator]=function(){return this},O);function j(I){O[I]=A[I]&&function(q){return new Promise(function($,X){q=A[I](q),D($,X,q.done,q.value)})}}function D(I,q,$,X){Promise.resolve(X).then(function(N){I({value:N,done:$})},q)}};Object.defineProperty(e,"__esModule",{value:!0}),e.fetchOverride=e.parseAWSEvent=e.getAuthHeaders=e.getUrl=e.mapResponseFromBedrock=void 0;const s=uMt,l=yPt,u=EPt,c=VTt,d=ER(),h=Ie(),f=iMe(),g=ROt(),p=n(Lv()),m=(A,P)=>a(void 0,void 0,void 0,function*(){const O=Object.assign({},t);try{return A(),yield P()}finally{t=O}}),y={1:{chat:p.StreamedChatResponse,generate:p.GenerateStreamedResponse},2:{chat:p.StreamedChatResponseV2,generate:p.GenerateStreamedResponse}},b={1:{chat:p.NonStreamedChatResponse,embed:p.EmbedResponse,generate:p.Generation,rerank:p.RerankResponse},2:{chat:p.ChatResponse,embed:p.EmbedByTypeResponse,generate:p.Generation,rerank:p.V2RerankResponse}},w=(A,P,O,j)=>a(void 0,void 0,void 0,function*(){const D=A?y[O][P]:b[O][P],I={unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]},q=yield D.parseOrThrow(j,I);return D.jsonOrThrow(q,I)});e.mapResponseFromBedrock=w;const x=(A,P,O,j)=>{const D={bedrock:j?"invoke-with-response-stream":"invoke",sagemaker:j?"invocations-response-stream":"invocations"}[A];return{bedrock:`https://${A}-runtime.${P}.amazonaws.com/model/${O}/${D}`,sagemaker:`https://runtime.sagemaker.${P}.amazonaws.com/endpoints/${O}/${D}`}[A]};e.getUrl=x;const S=(A,P,O,j,D,I)=>a(void 0,void 0,void 0,function*(){const q=(0,l.fromNodeProviderChain)(),$=yield m(()=>{I.awsAccessKey&&(t.AWS_ACCESS_KEY_ID=I.awsAccessKey),I.awsSecretKey&&(t.AWS_SECRET_ACCESS_KEY=I.awsSecretKey),I.awsSessionToken&&(t.AWS_SESSION_TOKEN=I.awsSessionToken)},()=>q()),X=new c.SignatureV4({service:D,region:I.awsRegion,credentials:$,sha256:s.Sha256});delete O.connection,O.host=A.hostname;const N=new u.HttpRequest({method:P.toUpperCase(),protocol:A.protocol,path:A.pathname,headers:O,body:j});return(yield X.sign(N)).headers});e.getAuthHeaders=S;const C=A=>{const P=/{[^\}]*}/,O=A.match(P);if(O!=null&&O[0]){const j=JSON.parse(O[0]);if(j.bytes){const D=Buffer.from(j.bytes,"base64").toString("utf-8"),I=JSON.parse(D);if(I.event_type)return I}}};e.parseAWSEvent=C;const T=A=>({v1:1,v2:2})[A]||1,M=(A,{awsRegion:P,awsAccessKey:O,awsSecretKey:j,awsSessionToken:D})=>I=>a(void 0,void 0,void 0,function*(){var q,$;const X=I.url.split("/"),N=X.pop(),Q=T(X.pop()),F=I.body;console.assert(F.model,"model is required");const L=!!F.stream,Y=(0,e.getUrl)(A,P,F.model,L);N==="rerank"&&(F.api_version=Q),delete F.stream,delete F.model,delete I.headers.Authorization,I.headers.Host=new URL(Y).hostname;const ae=yield(0,e.getAuthHeaders)(new URL(Y),I.method,I.headers,JSON.stringify(F),A,{awsRegion:P,awsAccessKey:O,awsSecretKey:j,awsSessionToken:D});I.url=Y,I.headers=ae;const re=yield(0,h.fetcher)(I);if(!re.ok)return re;try{if(L){const le=(0,f.readableStreamAsyncIterable)(re.body),ee=new g.LineDecoder,J=new d.PassThrough;try{for(var H=o(le),se;se=yield H.next(),!se.done;){const oe=se.value;for(const me of ee.decode(oe)){const be=(0,e.parseAWSEvent)(me);if(be){const de=yield(0,e.mapResponseFromBedrock)(L,N,Q,be);J.push(JSON.stringify(de)+`
`)}}}}catch(oe){q={error:oe}}finally{try{se&&!se.done&&($=H.return)&&(yield $.call(H))}finally{if(q)throw q.error}}for(const oe of ee.flush()){const me=(0,e.parseAWSEvent)(oe);if(me){const be=yield(0,e.mapResponseFromBedrock)(L,N,Q,me);J.push(JSON.stringify(be)+`
`)}}return J.end(),{ok:!0,body:J}}else{const le=yield re.body;return{ok:!0,body:yield(0,e.mapResponseFromBedrock)(L,N,Q,le)}}}catch(le){throw le}});e.fetchOverride=M}(Yo)),Yo}var FC={},ca={},NC={},Dge;function Fv(){return Dge||(Dge=1,Object.defineProperty(NC,"__esModule",{value:!0}),NC.CohereEnvironment=void 0,NC.CohereEnvironment={Production:"https://api.cohere.com"}),NC}var PR={exports:{}},eDt=PR.exports,Ige;function Tb(){return Ige||(Ige=1,function(e){(function(t,r,i){e.exports?e.exports=i():r[t]=i()})("urljoin",eDt,function(){function t(r){var i=[];if(r.length===0)return"";if(typeof r[0]!="string")throw new TypeError("Url must be a string. Received "+r[0]);if(r[0].match(/^[^/:]+:\/*$/)&&r.length>1){var n=r.shift();r[0]=n+r[0]}r[0].match(/^file:\/\/\//)?r[0]=r[0].replace(/^([^/:]+):\/*/,"$1:///"):r[0]=r[0].replace(/^([^/:]+):\/*/,"$1://");for(var a=0;a<r.length;a++){var o=r[a];if(typeof o!="string")throw new TypeError("Url must be a string. Received "+o);o!==""&&(a>0&&(o=o.replace(/^[\/]+/,"")),a<r.length-1?o=o.replace(/[\/]+$/,""):o=o.replace(/[\/]+$/,"/"),i.push(o))}var s=i.join("/");s=s.replace(/\/(\?|&|#[^!])/g,"$1");var l=s.split("?");return s=l.shift()+(l.length>0?"?":"")+l.join("&"),s}return function(){var r;return typeof arguments[0]=="object"?r=arguments[0]:r=[].slice.call(arguments),t(r)}})}(PR)),PR.exports}var Ka={},jge;function dAe(){if(jge)return Ka;jge=1;var e={},t=Ka&&Ka.__createBinding||(Object.create?function(f,g,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(g,p);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,m,y)}:function(f,g,p,m){m===void 0&&(m=p),f[m]=g[p]}),r=Ka&&Ka.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),i=Ka&&Ka.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&t(g,f,p);return r(g,f),g},n=Ka&&Ka.__awaiter||function(f,g,p,m){function y(b){return b instanceof p?b:new p(function(w){w(b)})}return new(p||(p=Promise))(function(b,w){function x(T){try{C(m.next(T))}catch(M){w(M)}}function S(T){try{C(m.throw(T))}catch(M){w(M)}}function C(T){T.done?b(T.value):y(T.value).then(x,S)}C((m=m.apply(f,g||[])).next())})},a=Ka&&Ka.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.V2=void 0;const o=i(Fv()),s=i(Ie()),l=i(Iv()),u=i(Lv()),c=a(Tb()),d=i(pn());class h{constructor(g={}){this._options=g}chatStream(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,c.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v2/chat"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},u.V2ChatStreamRequest.jsonOrThrow(g,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!0}),responseType:"sse",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return new s.Stream({stream:b.body,parse:w=>n(this,void 0,void 0,function*(){return u.StreamedChatResponseV2.parseOrThrow(w,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]})}),signal:p==null?void 0:p.abortSignal,eventShape:{type:"sse",streamTerminator:"[DONE]"}});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v2/chat.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}chat(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,c.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v2/chat"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},u.V2ChatRequest.jsonOrThrow(g,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!1}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return u.ChatResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v2/chat.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}embed(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,c.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v2/embed"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:u.V2EmbedRequest.jsonOrThrow(g,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return u.EmbedByTypeResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v2/embed.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}rerank(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,c.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v2/rerank"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:u.V2RerankRequest.jsonOrThrow(g,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return u.V2RerankResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v2/rerank.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}_getAuthorizationHeader(){var g;return n(this,void 0,void 0,function*(){const p=(g=yield s.Supplier.get(this._options.token))!==null&&g!==void 0?g:process==null?void 0:e.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return Ka.V2=h,Ka}var Qa={},zge;function tDt(){if(zge)return Qa;zge=1;var e={},t=Qa&&Qa.__createBinding||(Object.create?function(f,g,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(g,p);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,m,y)}:function(f,g,p,m){m===void 0&&(m=p),f[m]=g[p]}),r=Qa&&Qa.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),i=Qa&&Qa.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&t(g,f,p);return r(g,f),g},n=Qa&&Qa.__awaiter||function(f,g,p,m){function y(b){return b instanceof p?b:new p(function(w){w(b)})}return new(p||(p=Promise))(function(b,w){function x(T){try{C(m.next(T))}catch(M){w(M)}}function S(T){try{C(m.throw(T))}catch(M){w(M)}}function C(T){T.done?b(T.value):y(T.value).then(x,S)}C((m=m.apply(f,g||[])).next())})},a=Qa&&Qa.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.EmbedJobs=void 0;const o=i(Fv()),s=i(Ie()),l=i(Iv()),u=a(Tb()),c=i(Lv()),d=i(pn());class h{constructor(g={}){this._options=g}list(g){var p,m;return n(this,void 0,void 0,function*(){const y=yield((p=this._options.fetcher)!==null&&p!==void 0?p:s.fetcher)({url:(0,u.default)((m=yield s.Supplier.get(this._options.environment))!==null&&m!==void 0?m:o.CohereEnvironment.Production,"v1/embed-jobs"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},g==null?void 0:g.headers),contentType:"application/json",requestType:"json",timeoutMs:(g==null?void 0:g.timeoutInSeconds)!=null?g.timeoutInSeconds*1e3:3e5,maxRetries:g==null?void 0:g.maxRetries,abortSignal:g==null?void 0:g.abortSignal});if(y.ok)return c.ListEmbedJobResponse.parseOrThrow(y.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(y.error.reason==="status-code")switch(y.error.statusCode){case 400:throw new l.BadRequestError(y.error.body);case 401:throw new l.UnauthorizedError(y.error.body);case 403:throw new l.ForbiddenError(y.error.body);case 404:throw new l.NotFoundError(y.error.body);case 422:throw new l.UnprocessableEntityError(y.error.body);case 429:throw new l.TooManyRequestsError(y.error.body);case 498:throw new l.InvalidTokenError(y.error.body);case 499:throw new l.ClientClosedRequestError(y.error.body);case 500:throw new l.InternalServerError(y.error.body);case 501:throw new l.NotImplementedError(y.error.body);case 503:throw new l.ServiceUnavailableError(y.error.body);case 504:throw new l.GatewayTimeoutError(y.error.body);default:throw new d.CohereError({statusCode:y.error.statusCode,body:y.error.body})}switch(y.error.reason){case"non-json":throw new d.CohereError({statusCode:y.error.statusCode,body:y.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/embed-jobs.");case"unknown":throw new d.CohereError({message:y.error.errorMessage})}})}create(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v1/embed-jobs"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:c.CreateEmbedJobRequest.jsonOrThrow(g,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.CreateEmbedJobResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/embed-jobs.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}get(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,`v1/embed-jobs/${encodeURIComponent(g)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.EmbedJob.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/embed-jobs/{id}.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}cancel(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,`v1/embed-jobs/${encodeURIComponent(g)}/cancel`),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(!b.ok){if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/embed-jobs/{id}/cancel.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}}})}_getAuthorizationHeader(){var g;return n(this,void 0,void 0,function*(){const p=(g=yield s.Supplier.get(this._options.token))!==null&&g!==void 0?g:process==null?void 0:e.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return Qa.EmbedJobs=h,Qa}var Ja={},Bge;function rDt(){if(Bge)return Ja;Bge=1;var e={},t=Ja&&Ja.__createBinding||(Object.create?function(f,g,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(g,p);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,m,y)}:function(f,g,p,m){m===void 0&&(m=p),f[m]=g[p]}),r=Ja&&Ja.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),i=Ja&&Ja.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&t(g,f,p);return r(g,f),g},n=Ja&&Ja.__awaiter||function(f,g,p,m){function y(b){return b instanceof p?b:new p(function(w){w(b)})}return new(p||(p=Promise))(function(b,w){function x(T){try{C(m.next(T))}catch(M){w(M)}}function S(T){try{C(m.throw(T))}catch(M){w(M)}}function C(T){T.done?b(T.value):y(T.value).then(x,S)}C((m=m.apply(f,g||[])).next())})},a=Ja&&Ja.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.Datasets=void 0;const o=i(Fv()),s=i(Ie()),l=i(Iv()),u=a(Tb()),c=i(Lv()),d=i(pn());class h{constructor(g={}){this._options=g}list(g={},p){var m,y;return n(this,void 0,void 0,function*(){const{datasetType:b,before:w,after:x,limit:S,offset:C,validationStatus:T}=g,M={};b!=null&&(M.datasetType=b),w!=null&&(M.before=w.toISOString()),x!=null&&(M.after=x.toISOString()),S!=null&&(M.limit=S.toString()),C!=null&&(M.offset=C.toString()),T!=null&&(M.validationStatus=T);const A=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v1/datasets"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",queryParameters:M,requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(A.ok)return c.DatasetsListResponse.parseOrThrow(A.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(A.error.reason==="status-code")switch(A.error.statusCode){case 400:throw new l.BadRequestError(A.error.body);case 401:throw new l.UnauthorizedError(A.error.body);case 403:throw new l.ForbiddenError(A.error.body);case 404:throw new l.NotFoundError(A.error.body);case 422:throw new l.UnprocessableEntityError(A.error.body);case 429:throw new l.TooManyRequestsError(A.error.body);case 498:throw new l.InvalidTokenError(A.error.body);case 499:throw new l.ClientClosedRequestError(A.error.body);case 500:throw new l.InternalServerError(A.error.body);case 501:throw new l.NotImplementedError(A.error.body);case 503:throw new l.ServiceUnavailableError(A.error.body);case 504:throw new l.GatewayTimeoutError(A.error.body);default:throw new d.CohereError({statusCode:A.error.statusCode,body:A.error.body})}switch(A.error.reason){case"non-json":throw new d.CohereError({statusCode:A.error.statusCode,body:A.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/datasets.");case"unknown":throw new d.CohereError({message:A.error.errorMessage})}})}create(g,p,m,y){var b,w;return n(this,void 0,void 0,function*(){const x={};x.name=m.name,x.type=m.type,m.keepOriginalFile!=null&&(x.keep_original_file=m.keepOriginalFile.toString()),m.skipMalformedInput!=null&&(x.skip_malformed_input=m.skipMalformedInput.toString()),m.keepFields!=null&&(Array.isArray(m.keepFields)?x.keep_fields=m.keepFields.map(M=>M):x.keep_fields=m.keepFields),m.optionalFields!=null&&(Array.isArray(m.optionalFields)?x.optional_fields=m.optionalFields.map(M=>M):x.optional_fields=m.optionalFields),m.textSeparator!=null&&(x.text_separator=m.textSeparator),m.csvDelimiter!=null&&(x.csv_delimiter=m.csvDelimiter),m.dryRun!=null&&(x.dry_run=m.dryRun.toString());const S=yield s.newFormData();yield S.appendFile("data",g),p!=null&&(yield S.appendFile("eval_data",p));const C=yield S.getRequest(),T=yield((b=this._options.fetcher)!==null&&b!==void 0?b:s.fetcher)({url:(0,u.default)((w=yield s.Supplier.get(this._options.environment))!==null&&w!==void 0?w:o.CohereEnvironment.Production,"v1/datasets"),method:"POST",headers:Object.assign(Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},C.headers),y==null?void 0:y.headers),queryParameters:x,requestType:"file",duplex:C.duplex,body:C.body,timeoutMs:(y==null?void 0:y.timeoutInSeconds)!=null?y.timeoutInSeconds*1e3:3e5,maxRetries:y==null?void 0:y.maxRetries,abortSignal:y==null?void 0:y.abortSignal});if(T.ok)return c.DatasetsCreateResponse.parseOrThrow(T.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(T.error.reason==="status-code")switch(T.error.statusCode){case 400:throw new l.BadRequestError(T.error.body);case 401:throw new l.UnauthorizedError(T.error.body);case 403:throw new l.ForbiddenError(T.error.body);case 404:throw new l.NotFoundError(T.error.body);case 422:throw new l.UnprocessableEntityError(T.error.body);case 429:throw new l.TooManyRequestsError(T.error.body);case 498:throw new l.InvalidTokenError(T.error.body);case 499:throw new l.ClientClosedRequestError(T.error.body);case 500:throw new l.InternalServerError(T.error.body);case 501:throw new l.NotImplementedError(T.error.body);case 503:throw new l.ServiceUnavailableError(T.error.body);case 504:throw new l.GatewayTimeoutError(T.error.body);default:throw new d.CohereError({statusCode:T.error.statusCode,body:T.error.body})}switch(T.error.reason){case"non-json":throw new d.CohereError({statusCode:T.error.statusCode,body:T.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/datasets.");case"unknown":throw new d.CohereError({message:T.error.errorMessage})}})}getUsage(g){var p,m;return n(this,void 0,void 0,function*(){const y=yield((p=this._options.fetcher)!==null&&p!==void 0?p:s.fetcher)({url:(0,u.default)((m=yield s.Supplier.get(this._options.environment))!==null&&m!==void 0?m:o.CohereEnvironment.Production,"v1/datasets/usage"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},g==null?void 0:g.headers),contentType:"application/json",requestType:"json",timeoutMs:(g==null?void 0:g.timeoutInSeconds)!=null?g.timeoutInSeconds*1e3:3e5,maxRetries:g==null?void 0:g.maxRetries,abortSignal:g==null?void 0:g.abortSignal});if(y.ok)return c.DatasetsGetUsageResponse.parseOrThrow(y.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(y.error.reason==="status-code")switch(y.error.statusCode){case 400:throw new l.BadRequestError(y.error.body);case 401:throw new l.UnauthorizedError(y.error.body);case 403:throw new l.ForbiddenError(y.error.body);case 404:throw new l.NotFoundError(y.error.body);case 422:throw new l.UnprocessableEntityError(y.error.body);case 429:throw new l.TooManyRequestsError(y.error.body);case 498:throw new l.InvalidTokenError(y.error.body);case 499:throw new l.ClientClosedRequestError(y.error.body);case 500:throw new l.InternalServerError(y.error.body);case 501:throw new l.NotImplementedError(y.error.body);case 503:throw new l.ServiceUnavailableError(y.error.body);case 504:throw new l.GatewayTimeoutError(y.error.body);default:throw new d.CohereError({statusCode:y.error.statusCode,body:y.error.body})}switch(y.error.reason){case"non-json":throw new d.CohereError({statusCode:y.error.statusCode,body:y.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/datasets/usage.");case"unknown":throw new d.CohereError({message:y.error.errorMessage})}})}get(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,`v1/datasets/${encodeURIComponent(g)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.DatasetsGetResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/datasets/{id}.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}delete(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,`v1/datasets/${encodeURIComponent(g)}`),method:"DELETE",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.datasets.delete.Response.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling DELETE /v1/datasets/{id}.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}_getAuthorizationHeader(){var g;return n(this,void 0,void 0,function*(){const p=(g=yield s.Supplier.get(this._options.token))!==null&&g!==void 0?g:process==null?void 0:e.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return Ja.Datasets=h,Ja}var Za={},Lge;function iDt(){if(Lge)return Za;Lge=1;var e={},t=Za&&Za.__createBinding||(Object.create?function(f,g,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(g,p);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,m,y)}:function(f,g,p,m){m===void 0&&(m=p),f[m]=g[p]}),r=Za&&Za.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),i=Za&&Za.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&t(g,f,p);return r(g,f),g},n=Za&&Za.__awaiter||function(f,g,p,m){function y(b){return b instanceof p?b:new p(function(w){w(b)})}return new(p||(p=Promise))(function(b,w){function x(T){try{C(m.next(T))}catch(M){w(M)}}function S(T){try{C(m.throw(T))}catch(M){w(M)}}function C(T){T.done?b(T.value):y(T.value).then(x,S)}C((m=m.apply(f,g||[])).next())})},a=Za&&Za.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Za,"__esModule",{value:!0}),Za.Connectors=void 0;const o=i(Fv()),s=i(Ie()),l=i(Iv()),u=a(Tb()),c=i(Lv()),d=i(pn());class h{constructor(g={}){this._options=g}list(g={},p){var m,y;return n(this,void 0,void 0,function*(){const{limit:b,offset:w}=g,x={};b!=null&&(x.limit=b.toString()),w!=null&&(x.offset=w.toString());const S=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v1/connectors"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",queryParameters:x,requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(S.ok)return c.ListConnectorsResponse.parseOrThrow(S.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(S.error.reason==="status-code")switch(S.error.statusCode){case 400:throw new l.BadRequestError(S.error.body);case 401:throw new l.UnauthorizedError(S.error.body);case 403:throw new l.ForbiddenError(S.error.body);case 404:throw new l.NotFoundError(S.error.body);case 422:throw new l.UnprocessableEntityError(S.error.body);case 429:throw new l.TooManyRequestsError(S.error.body);case 498:throw new l.InvalidTokenError(S.error.body);case 499:throw new l.ClientClosedRequestError(S.error.body);case 500:throw new l.InternalServerError(S.error.body);case 501:throw new l.NotImplementedError(S.error.body);case 503:throw new l.ServiceUnavailableError(S.error.body);case 504:throw new l.GatewayTimeoutError(S.error.body);default:throw new d.CohereError({statusCode:S.error.statusCode,body:S.error.body})}switch(S.error.reason){case"non-json":throw new d.CohereError({statusCode:S.error.statusCode,body:S.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/connectors.");case"unknown":throw new d.CohereError({message:S.error.errorMessage})}})}create(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v1/connectors"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:c.CreateConnectorRequest.jsonOrThrow(g,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.CreateConnectorResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/connectors.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}get(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(g)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.GetConnectorResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/connectors/{id}.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}delete(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(g)}`),method:"DELETE",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.DeleteConnectorResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling DELETE /v1/connectors/{id}.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}update(g,p={},m){var y,b;return n(this,void 0,void 0,function*(){const w=yield((y=this._options.fetcher)!==null&&y!==void 0?y:s.fetcher)({url:(0,u.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(g)}`),method:"PATCH",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},m==null?void 0:m.headers),contentType:"application/json",requestType:"json",body:c.UpdateConnectorRequest.jsonOrThrow(p,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(m==null?void 0:m.timeoutInSeconds)!=null?m.timeoutInSeconds*1e3:3e5,maxRetries:m==null?void 0:m.maxRetries,abortSignal:m==null?void 0:m.abortSignal});if(w.ok)return c.UpdateConnectorResponse.parseOrThrow(w.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(w.error.reason==="status-code")switch(w.error.statusCode){case 400:throw new l.BadRequestError(w.error.body);case 401:throw new l.UnauthorizedError(w.error.body);case 403:throw new l.ForbiddenError(w.error.body);case 404:throw new l.NotFoundError(w.error.body);case 422:throw new l.UnprocessableEntityError(w.error.body);case 429:throw new l.TooManyRequestsError(w.error.body);case 498:throw new l.InvalidTokenError(w.error.body);case 499:throw new l.ClientClosedRequestError(w.error.body);case 500:throw new l.InternalServerError(w.error.body);case 501:throw new l.NotImplementedError(w.error.body);case 503:throw new l.ServiceUnavailableError(w.error.body);case 504:throw new l.GatewayTimeoutError(w.error.body);default:throw new d.CohereError({statusCode:w.error.statusCode,body:w.error.body})}switch(w.error.reason){case"non-json":throw new d.CohereError({statusCode:w.error.statusCode,body:w.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling PATCH /v1/connectors/{id}.");case"unknown":throw new d.CohereError({message:w.error.errorMessage})}})}oAuthAuthorize(g,p={},m){var y,b;return n(this,void 0,void 0,function*(){const{afterTokenRedirect:w}=p,x={};w!=null&&(x.after_token_redirect=w);const S=yield((y=this._options.fetcher)!==null&&y!==void 0?y:s.fetcher)({url:(0,u.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/connectors/${encodeURIComponent(g)}/oauth/authorize`),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},m==null?void 0:m.headers),contentType:"application/json",queryParameters:x,requestType:"json",timeoutMs:(m==null?void 0:m.timeoutInSeconds)!=null?m.timeoutInSeconds*1e3:3e5,maxRetries:m==null?void 0:m.maxRetries,abortSignal:m==null?void 0:m.abortSignal});if(S.ok)return c.OAuthAuthorizeResponse.parseOrThrow(S.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(S.error.reason==="status-code")switch(S.error.statusCode){case 400:throw new l.BadRequestError(S.error.body);case 401:throw new l.UnauthorizedError(S.error.body);case 403:throw new l.ForbiddenError(S.error.body);case 404:throw new l.NotFoundError(S.error.body);case 422:throw new l.UnprocessableEntityError(S.error.body);case 429:throw new l.TooManyRequestsError(S.error.body);case 498:throw new l.InvalidTokenError(S.error.body);case 499:throw new l.ClientClosedRequestError(S.error.body);case 500:throw new l.InternalServerError(S.error.body);case 501:throw new l.NotImplementedError(S.error.body);case 503:throw new l.ServiceUnavailableError(S.error.body);case 504:throw new l.GatewayTimeoutError(S.error.body);default:throw new d.CohereError({statusCode:S.error.statusCode,body:S.error.body})}switch(S.error.reason){case"non-json":throw new d.CohereError({statusCode:S.error.statusCode,body:S.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/connectors/{id}/oauth/authorize.");case"unknown":throw new d.CohereError({message:S.error.errorMessage})}})}_getAuthorizationHeader(){var g;return n(this,void 0,void 0,function*(){const p=(g=yield s.Supplier.get(this._options.token))!==null&&g!==void 0?g:process==null?void 0:e.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return Za.Connectors=h,Za}var eo={},Fge;function nDt(){if(Fge)return eo;Fge=1;var e={},t=eo&&eo.__createBinding||(Object.create?function(f,g,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(g,p);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,m,y)}:function(f,g,p,m){m===void 0&&(m=p),f[m]=g[p]}),r=eo&&eo.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),i=eo&&eo.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&t(g,f,p);return r(g,f),g},n=eo&&eo.__awaiter||function(f,g,p,m){function y(b){return b instanceof p?b:new p(function(w){w(b)})}return new(p||(p=Promise))(function(b,w){function x(T){try{C(m.next(T))}catch(M){w(M)}}function S(T){try{C(m.throw(T))}catch(M){w(M)}}function C(T){T.done?b(T.value):y(T.value).then(x,S)}C((m=m.apply(f,g||[])).next())})},a=eo&&eo.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(eo,"__esModule",{value:!0}),eo.Models=void 0;const o=i(Fv()),s=i(Ie()),l=i(Iv()),u=a(Tb()),c=i(Lv()),d=i(pn());class h{constructor(g={}){this._options=g}get(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,`v1/models/${encodeURIComponent(g)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.GetModelResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 422:throw new l.UnprocessableEntityError(b.error.body);case 429:throw new l.TooManyRequestsError(b.error.body);case 498:throw new l.InvalidTokenError(b.error.body);case 499:throw new l.ClientClosedRequestError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 501:throw new l.NotImplementedError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);case 504:throw new l.GatewayTimeoutError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/models/{model}.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}list(g={},p){var m,y;return n(this,void 0,void 0,function*(){const{pageSize:b,pageToken:w,endpoint:x,defaultOnly:S}=g,C={};b!=null&&(C.page_size=b.toString()),w!=null&&(C.page_token=w),x!=null&&(C.endpoint=x),S!=null&&(C.default_only=S.toString());const T=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v1/models"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",queryParameters:C,requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(T.ok)return c.ListModelsResponse.parseOrThrow(T.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(T.error.reason==="status-code")switch(T.error.statusCode){case 400:throw new l.BadRequestError(T.error.body);case 401:throw new l.UnauthorizedError(T.error.body);case 403:throw new l.ForbiddenError(T.error.body);case 404:throw new l.NotFoundError(T.error.body);case 422:throw new l.UnprocessableEntityError(T.error.body);case 429:throw new l.TooManyRequestsError(T.error.body);case 498:throw new l.InvalidTokenError(T.error.body);case 499:throw new l.ClientClosedRequestError(T.error.body);case 500:throw new l.InternalServerError(T.error.body);case 501:throw new l.NotImplementedError(T.error.body);case 503:throw new l.ServiceUnavailableError(T.error.body);case 504:throw new l.GatewayTimeoutError(T.error.body);default:throw new d.CohereError({statusCode:T.error.statusCode,body:T.error.body})}switch(T.error.reason){case"non-json":throw new d.CohereError({statusCode:T.error.statusCode,body:T.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/models.");case"unknown":throw new d.CohereError({message:T.error.errorMessage})}})}_getAuthorizationHeader(){var g;return n(this,void 0,void 0,function*(){const p=(g=yield s.Supplier.get(this._options.token))!==null&&g!==void 0?g:process==null?void 0:e.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return eo.Models=h,eo}var to={},Nge;function aDt(){if(Nge)return to;Nge=1;var e={},t=to&&to.__createBinding||(Object.create?function(f,g,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(g,p);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[p]}}),Object.defineProperty(f,m,y)}:function(f,g,p,m){m===void 0&&(m=p),f[m]=g[p]}),r=to&&to.__setModuleDefault||(Object.create?function(f,g){Object.defineProperty(f,"default",{enumerable:!0,value:g})}:function(f,g){f.default=g}),i=to&&to.__importStar||function(f){if(f&&f.__esModule)return f;var g={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&t(g,f,p);return r(g,f),g},n=to&&to.__awaiter||function(f,g,p,m){function y(b){return b instanceof p?b:new p(function(w){w(b)})}return new(p||(p=Promise))(function(b,w){function x(T){try{C(m.next(T))}catch(M){w(M)}}function S(T){try{C(m.throw(T))}catch(M){w(M)}}function C(T){T.done?b(T.value):y(T.value).then(x,S)}C((m=m.apply(f,g||[])).next())})},a=to&&to.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(to,"__esModule",{value:!0}),to.Finetuning=void 0;const o=i(Fv()),s=i(Ie()),l=i(Iv()),u=a(Tb()),c=i(Lv()),d=i(pn());class h{constructor(g={}){this._options=g}listFinetunedModels(g={},p){var m,y;return n(this,void 0,void 0,function*(){const{pageSize:b,pageToken:w,orderBy:x}=g,S={};b!=null&&(S.page_size=b.toString()),w!=null&&(S.page_token=w),x!=null&&(S.order_by=x);const C=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v1/finetuning/finetuned-models"),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",queryParameters:S,requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(C.ok)return c.finetuning.ListFinetunedModelsResponse.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);default:throw new d.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new d.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/finetuning/finetuned-models.");case"unknown":throw new d.CohereError({message:C.error.errorMessage})}})}createFinetunedModel(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,"v1/finetuning/finetuned-models"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",body:c.finetuning.FinetunedModel.jsonOrThrow(g,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.finetuning.CreateFinetunedModelResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling POST /v1/finetuning/finetuned-models.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}getFinetunedModel(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(g)}`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.finetuning.GetFinetunedModelResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/finetuning/finetuned-models/{id}.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}deleteFinetunedModel(g,p){var m,y;return n(this,void 0,void 0,function*(){const b=yield((m=this._options.fetcher)!==null&&m!==void 0?m:s.fetcher)({url:(0,u.default)((y=yield s.Supplier.get(this._options.environment))!==null&&y!==void 0?y:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(g)}`),method:"DELETE",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},p==null?void 0:p.headers),contentType:"application/json",requestType:"json",timeoutMs:(p==null?void 0:p.timeoutInSeconds)!=null?p.timeoutInSeconds*1e3:3e5,maxRetries:p==null?void 0:p.maxRetries,abortSignal:p==null?void 0:p.abortSignal});if(b.ok)return c.finetuning.DeleteFinetunedModelResponse.parseOrThrow(b.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(b.error.reason==="status-code")switch(b.error.statusCode){case 400:throw new l.BadRequestError(b.error.body);case 401:throw new l.UnauthorizedError(b.error.body);case 403:throw new l.ForbiddenError(b.error.body);case 404:throw new l.NotFoundError(b.error.body);case 500:throw new l.InternalServerError(b.error.body);case 503:throw new l.ServiceUnavailableError(b.error.body);default:throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.body})}switch(b.error.reason){case"non-json":throw new d.CohereError({statusCode:b.error.statusCode,body:b.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling DELETE /v1/finetuning/finetuned-models/{id}.");case"unknown":throw new d.CohereError({message:b.error.errorMessage})}})}updateFinetunedModel(g,p,m){var y,b;return n(this,void 0,void 0,function*(){const w=yield((y=this._options.fetcher)!==null&&y!==void 0?y:s.fetcher)({url:(0,u.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(g)}`),method:"PATCH",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},m==null?void 0:m.headers),contentType:"application/json",requestType:"json",body:c.FinetuningUpdateFinetunedModelRequest.jsonOrThrow(p,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(m==null?void 0:m.timeoutInSeconds)!=null?m.timeoutInSeconds*1e3:3e5,maxRetries:m==null?void 0:m.maxRetries,abortSignal:m==null?void 0:m.abortSignal});if(w.ok)return c.finetuning.UpdateFinetunedModelResponse.parseOrThrow(w.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(w.error.reason==="status-code")switch(w.error.statusCode){case 400:throw new l.BadRequestError(w.error.body);case 401:throw new l.UnauthorizedError(w.error.body);case 403:throw new l.ForbiddenError(w.error.body);case 404:throw new l.NotFoundError(w.error.body);case 500:throw new l.InternalServerError(w.error.body);case 503:throw new l.ServiceUnavailableError(w.error.body);default:throw new d.CohereError({statusCode:w.error.statusCode,body:w.error.body})}switch(w.error.reason){case"non-json":throw new d.CohereError({statusCode:w.error.statusCode,body:w.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling PATCH /v1/finetuning/finetuned-models/{id}.");case"unknown":throw new d.CohereError({message:w.error.errorMessage})}})}listEvents(g,p={},m){var y,b;return n(this,void 0,void 0,function*(){const{pageSize:w,pageToken:x,orderBy:S}=p,C={};w!=null&&(C.page_size=w.toString()),x!=null&&(C.page_token=x),S!=null&&(C.order_by=S);const T=yield((y=this._options.fetcher)!==null&&y!==void 0?y:s.fetcher)({url:(0,u.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(g)}/events`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},m==null?void 0:m.headers),contentType:"application/json",queryParameters:C,requestType:"json",timeoutMs:(m==null?void 0:m.timeoutInSeconds)!=null?m.timeoutInSeconds*1e3:3e5,maxRetries:m==null?void 0:m.maxRetries,abortSignal:m==null?void 0:m.abortSignal});if(T.ok)return c.finetuning.ListEventsResponse.parseOrThrow(T.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(T.error.reason==="status-code")switch(T.error.statusCode){case 400:throw new l.BadRequestError(T.error.body);case 401:throw new l.UnauthorizedError(T.error.body);case 403:throw new l.ForbiddenError(T.error.body);case 404:throw new l.NotFoundError(T.error.body);case 500:throw new l.InternalServerError(T.error.body);case 503:throw new l.ServiceUnavailableError(T.error.body);default:throw new d.CohereError({statusCode:T.error.statusCode,body:T.error.body})}switch(T.error.reason){case"non-json":throw new d.CohereError({statusCode:T.error.statusCode,body:T.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/finetuning/finetuned-models/{finetuned_model_id}/events.");case"unknown":throw new d.CohereError({message:T.error.errorMessage})}})}listTrainingStepMetrics(g,p={},m){var y,b;return n(this,void 0,void 0,function*(){const{pageSize:w,pageToken:x}=p,S={};w!=null&&(S.page_size=w.toString()),x!=null&&(S.page_token=x);const C=yield((y=this._options.fetcher)!==null&&y!==void 0?y:s.fetcher)({url:(0,u.default)((b=yield s.Supplier.get(this._options.environment))!==null&&b!==void 0?b:o.CohereEnvironment.Production,`v1/finetuning/finetuned-models/${encodeURIComponent(g)}/training-step-metrics`),method:"GET",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield s.Supplier.get(this._options.clientName))!=null?yield s.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":s.RUNTIME.type,"X-Fern-Runtime-Version":s.RUNTIME.version},m==null?void 0:m.headers),contentType:"application/json",queryParameters:S,requestType:"json",timeoutMs:(m==null?void 0:m.timeoutInSeconds)!=null?m.timeoutInSeconds*1e3:3e5,maxRetries:m==null?void 0:m.maxRetries,abortSignal:m==null?void 0:m.abortSignal});if(C.ok)return c.finetuning.ListTrainingStepMetricsResponse.parseOrThrow(C.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(C.error.reason==="status-code")switch(C.error.statusCode){case 400:throw new l.BadRequestError(C.error.body);case 401:throw new l.UnauthorizedError(C.error.body);case 403:throw new l.ForbiddenError(C.error.body);case 404:throw new l.NotFoundError(C.error.body);case 500:throw new l.InternalServerError(C.error.body);case 503:throw new l.ServiceUnavailableError(C.error.body);default:throw new d.CohereError({statusCode:C.error.statusCode,body:C.error.body})}switch(C.error.reason){case"non-json":throw new d.CohereError({statusCode:C.error.statusCode,body:C.error.rawBody});case"timeout":throw new d.CohereTimeoutError("Timeout exceeded when calling GET /v1/finetuning/finetuned-models/{finetuned_model_id}/training-step-metrics.");case"unknown":throw new d.CohereError({message:C.error.errorMessage})}})}_getAuthorizationHeader(){var g;return n(this,void 0,void 0,function*(){const p=(g=yield s.Supplier.get(this._options.token))!==null&&g!==void 0?g:process==null?void 0:e.CO_API_KEY;if(p==null)throw new d.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${p}`})}}return to.Finetuning=h,to}var Uge;function pH(){if(Uge)return ca;Uge=1;var e={},t=ca&&ca.__createBinding||(Object.create?function(x,S,C,T){T===void 0&&(T=C);var M=Object.getOwnPropertyDescriptor(S,C);(!M||("get"in M?!S.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(x,T,M)}:function(x,S,C,T){T===void 0&&(T=C),x[T]=S[C]}),r=ca&&ca.__setModuleDefault||(Object.create?function(x,S){Object.defineProperty(x,"default",{enumerable:!0,value:S})}:function(x,S){x.default=S}),i=ca&&ca.__importStar||function(x){if(x&&x.__esModule)return x;var S={};if(x!=null)for(var C in x)C!=="default"&&Object.prototype.hasOwnProperty.call(x,C)&&t(S,x,C);return r(S,x),S},n=ca&&ca.__awaiter||function(x,S,C,T){function M(A){return A instanceof C?A:new C(function(P){P(A)})}return new(C||(C=Promise))(function(A,P){function O(I){try{D(T.next(I))}catch(q){P(q)}}function j(I){try{D(T.throw(I))}catch(q){P(q)}}function D(I){I.done?A(I.value):M(I.value).then(O,j)}D((T=T.apply(x,S||[])).next())})},a=ca&&ca.__rest||function(x,S){var C={};for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&S.indexOf(T)<0&&(C[T]=x[T]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,T=Object.getOwnPropertySymbols(x);M<T.length;M++)S.indexOf(T[M])<0&&Object.prototype.propertyIsEnumerable.call(x,T[M])&&(C[T[M]]=x[T[M]]);return C},o=ca&&ca.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(ca,"__esModule",{value:!0}),ca.CohereClient=void 0;const s=i(Fv()),l=i(Ie()),u=i(Iv()),c=i(Lv()),d=o(Tb()),h=i(pn()),f=dAe(),g=tDt(),p=rDt(),m=iDt(),y=nDt(),b=aDt();class w{constructor(S={}){this._options=S}get v2(){var S;return(S=this._v2)!==null&&S!==void 0?S:this._v2=new f.V2(this._options)}get embedJobs(){var S;return(S=this._embedJobs)!==null&&S!==void 0?S:this._embedJobs=new g.EmbedJobs(this._options)}get datasets(){var S;return(S=this._datasets)!==null&&S!==void 0?S:this._datasets=new p.Datasets(this._options)}get connectors(){var S;return(S=this._connectors)!==null&&S!==void 0?S:this._connectors=new m.Connectors(this._options)}get models(){var S;return(S=this._models)!==null&&S!==void 0?S:this._models=new y.Models(this._options)}get finetuning(){var S;return(S=this._finetuning)!==null&&S!==void 0?S:this._finetuning=new b.Finetuning(this._options)}chatStream(S,C){var T,M;return n(this,void 0,void 0,function*(){const{accepts:A}=S,P=a(S,["accepts"]),O=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/chat"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version,Accepts:A??void 0},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},c.ChatStreamRequest.jsonOrThrow(P,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!0}),responseType:"sse",timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(O.ok)return new l.Stream({stream:O.body,parse:j=>n(this,void 0,void 0,function*(){return c.StreamedChatResponse.parseOrThrow(j,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]})}),signal:C==null?void 0:C.abortSignal,eventShape:{type:"json",messageTerminator:`
`}});if(O.error.reason==="status-code")switch(O.error.statusCode){case 400:throw new u.BadRequestError(O.error.body);case 401:throw new u.UnauthorizedError(O.error.body);case 403:throw new u.ForbiddenError(O.error.body);case 404:throw new u.NotFoundError(O.error.body);case 422:throw new u.UnprocessableEntityError(O.error.body);case 429:throw new u.TooManyRequestsError(O.error.body);case 498:throw new u.InvalidTokenError(O.error.body);case 499:throw new u.ClientClosedRequestError(O.error.body);case 500:throw new u.InternalServerError(O.error.body);case 501:throw new u.NotImplementedError(O.error.body);case 503:throw new u.ServiceUnavailableError(O.error.body);case 504:throw new u.GatewayTimeoutError(O.error.body);default:throw new h.CohereError({statusCode:O.error.statusCode,body:O.error.body})}switch(O.error.reason){case"non-json":throw new h.CohereError({statusCode:O.error.statusCode,body:O.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/chat.");case"unknown":throw new h.CohereError({message:O.error.errorMessage})}})}chat(S,C){var T,M;return n(this,void 0,void 0,function*(){const{accepts:A}=S,P=a(S,["accepts"]),O=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/chat"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version,Accepts:A??void 0},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},c.ChatRequest.jsonOrThrow(P,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!1}),timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(O.ok)return c.NonStreamedChatResponse.parseOrThrow(O.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(O.error.reason==="status-code")switch(O.error.statusCode){case 400:throw new u.BadRequestError(O.error.body);case 401:throw new u.UnauthorizedError(O.error.body);case 403:throw new u.ForbiddenError(O.error.body);case 404:throw new u.NotFoundError(O.error.body);case 422:throw new u.UnprocessableEntityError(O.error.body);case 429:throw new u.TooManyRequestsError(O.error.body);case 498:throw new u.InvalidTokenError(O.error.body);case 499:throw new u.ClientClosedRequestError(O.error.body);case 500:throw new u.InternalServerError(O.error.body);case 501:throw new u.NotImplementedError(O.error.body);case 503:throw new u.ServiceUnavailableError(O.error.body);case 504:throw new u.GatewayTimeoutError(O.error.body);default:throw new h.CohereError({statusCode:O.error.statusCode,body:O.error.body})}switch(O.error.reason){case"non-json":throw new h.CohereError({statusCode:O.error.statusCode,body:O.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/chat.");case"unknown":throw new h.CohereError({message:O.error.errorMessage})}})}generateStream(S,C){var T,M;return n(this,void 0,void 0,function*(){const A=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/generate"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},c.GenerateStreamRequest.jsonOrThrow(S,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!0}),responseType:"sse",timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(A.ok)return new l.Stream({stream:A.body,parse:P=>n(this,void 0,void 0,function*(){return c.GenerateStreamedResponse.parseOrThrow(P,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]})}),signal:C==null?void 0:C.abortSignal,eventShape:{type:"json",messageTerminator:`
`}});if(A.error.reason==="status-code")switch(A.error.statusCode){case 400:throw new u.BadRequestError(A.error.body);case 401:throw new u.UnauthorizedError(A.error.body);case 403:throw new u.ForbiddenError(A.error.body);case 404:throw new u.NotFoundError(A.error.body);case 422:throw new u.UnprocessableEntityError(A.error.body);case 429:throw new u.TooManyRequestsError(A.error.body);case 498:throw new u.InvalidTokenError(A.error.body);case 499:throw new u.ClientClosedRequestError(A.error.body);case 500:throw new u.InternalServerError(A.error.body);case 501:throw new u.NotImplementedError(A.error.body);case 503:throw new u.ServiceUnavailableError(A.error.body);case 504:throw new u.GatewayTimeoutError(A.error.body);default:throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.body})}switch(A.error.reason){case"non-json":throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/generate.");case"unknown":throw new h.CohereError({message:A.error.errorMessage})}})}generate(S,C){var T,M;return n(this,void 0,void 0,function*(){const A=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/generate"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:Object.assign(Object.assign({},c.GenerateRequest.jsonOrThrow(S,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0})),{stream:!1}),timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(A.ok)return c.Generation.parseOrThrow(A.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(A.error.reason==="status-code")switch(A.error.statusCode){case 400:throw new u.BadRequestError(A.error.body);case 401:throw new u.UnauthorizedError(A.error.body);case 403:throw new u.ForbiddenError(A.error.body);case 404:throw new u.NotFoundError(A.error.body);case 422:throw new u.UnprocessableEntityError(A.error.body);case 429:throw new u.TooManyRequestsError(A.error.body);case 498:throw new u.InvalidTokenError(A.error.body);case 499:throw new u.ClientClosedRequestError(A.error.body);case 500:throw new u.InternalServerError(A.error.body);case 501:throw new u.NotImplementedError(A.error.body);case 503:throw new u.ServiceUnavailableError(A.error.body);case 504:throw new u.GatewayTimeoutError(A.error.body);default:throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.body})}switch(A.error.reason){case"non-json":throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/generate.");case"unknown":throw new h.CohereError({message:A.error.errorMessage})}})}embed(S={},C){var T,M;return n(this,void 0,void 0,function*(){const A=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/embed"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:c.EmbedRequest.jsonOrThrow(S,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(A.ok)return c.EmbedResponse.parseOrThrow(A.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(A.error.reason==="status-code")switch(A.error.statusCode){case 400:throw new u.BadRequestError(A.error.body);case 401:throw new u.UnauthorizedError(A.error.body);case 403:throw new u.ForbiddenError(A.error.body);case 404:throw new u.NotFoundError(A.error.body);case 422:throw new u.UnprocessableEntityError(A.error.body);case 429:throw new u.TooManyRequestsError(A.error.body);case 498:throw new u.InvalidTokenError(A.error.body);case 499:throw new u.ClientClosedRequestError(A.error.body);case 500:throw new u.InternalServerError(A.error.body);case 501:throw new u.NotImplementedError(A.error.body);case 503:throw new u.ServiceUnavailableError(A.error.body);case 504:throw new u.GatewayTimeoutError(A.error.body);default:throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.body})}switch(A.error.reason){case"non-json":throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/embed.");case"unknown":throw new h.CohereError({message:A.error.errorMessage})}})}rerank(S,C){var T,M;return n(this,void 0,void 0,function*(){const A=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/rerank"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:c.RerankRequest.jsonOrThrow(S,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(A.ok)return c.RerankResponse.parseOrThrow(A.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(A.error.reason==="status-code")switch(A.error.statusCode){case 400:throw new u.BadRequestError(A.error.body);case 401:throw new u.UnauthorizedError(A.error.body);case 403:throw new u.ForbiddenError(A.error.body);case 404:throw new u.NotFoundError(A.error.body);case 422:throw new u.UnprocessableEntityError(A.error.body);case 429:throw new u.TooManyRequestsError(A.error.body);case 498:throw new u.InvalidTokenError(A.error.body);case 499:throw new u.ClientClosedRequestError(A.error.body);case 500:throw new u.InternalServerError(A.error.body);case 501:throw new u.NotImplementedError(A.error.body);case 503:throw new u.ServiceUnavailableError(A.error.body);case 504:throw new u.GatewayTimeoutError(A.error.body);default:throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.body})}switch(A.error.reason){case"non-json":throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/rerank.");case"unknown":throw new h.CohereError({message:A.error.errorMessage})}})}classify(S,C){var T,M;return n(this,void 0,void 0,function*(){const A=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/classify"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:c.ClassifyRequest.jsonOrThrow(S,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(A.ok)return c.ClassifyResponse.parseOrThrow(A.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(A.error.reason==="status-code")switch(A.error.statusCode){case 400:throw new u.BadRequestError(A.error.body);case 401:throw new u.UnauthorizedError(A.error.body);case 403:throw new u.ForbiddenError(A.error.body);case 404:throw new u.NotFoundError(A.error.body);case 422:throw new u.UnprocessableEntityError(A.error.body);case 429:throw new u.TooManyRequestsError(A.error.body);case 498:throw new u.InvalidTokenError(A.error.body);case 499:throw new u.ClientClosedRequestError(A.error.body);case 500:throw new u.InternalServerError(A.error.body);case 501:throw new u.NotImplementedError(A.error.body);case 503:throw new u.ServiceUnavailableError(A.error.body);case 504:throw new u.GatewayTimeoutError(A.error.body);default:throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.body})}switch(A.error.reason){case"non-json":throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/classify.");case"unknown":throw new h.CohereError({message:A.error.errorMessage})}})}summarize(S,C){var T,M;return n(this,void 0,void 0,function*(){const A=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/summarize"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:c.SummarizeRequest.jsonOrThrow(S,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(A.ok)return c.SummarizeResponse.parseOrThrow(A.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(A.error.reason==="status-code")switch(A.error.statusCode){case 400:throw new u.BadRequestError(A.error.body);case 401:throw new u.UnauthorizedError(A.error.body);case 403:throw new u.ForbiddenError(A.error.body);case 404:throw new u.NotFoundError(A.error.body);case 422:throw new u.UnprocessableEntityError(A.error.body);case 429:throw new u.TooManyRequestsError(A.error.body);case 498:throw new u.InvalidTokenError(A.error.body);case 499:throw new u.ClientClosedRequestError(A.error.body);case 500:throw new u.InternalServerError(A.error.body);case 501:throw new u.NotImplementedError(A.error.body);case 503:throw new u.ServiceUnavailableError(A.error.body);case 504:throw new u.GatewayTimeoutError(A.error.body);default:throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.body})}switch(A.error.reason){case"non-json":throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/summarize.");case"unknown":throw new h.CohereError({message:A.error.errorMessage})}})}tokenize(S,C){var T,M;return n(this,void 0,void 0,function*(){const A=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/tokenize"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:c.TokenizeRequest.jsonOrThrow(S,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(A.ok)return c.TokenizeResponse.parseOrThrow(A.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(A.error.reason==="status-code")switch(A.error.statusCode){case 400:throw new u.BadRequestError(A.error.body);case 401:throw new u.UnauthorizedError(A.error.body);case 403:throw new u.ForbiddenError(A.error.body);case 404:throw new u.NotFoundError(A.error.body);case 422:throw new u.UnprocessableEntityError(A.error.body);case 429:throw new u.TooManyRequestsError(A.error.body);case 498:throw new u.InvalidTokenError(A.error.body);case 499:throw new u.ClientClosedRequestError(A.error.body);case 500:throw new u.InternalServerError(A.error.body);case 501:throw new u.NotImplementedError(A.error.body);case 503:throw new u.ServiceUnavailableError(A.error.body);case 504:throw new u.GatewayTimeoutError(A.error.body);default:throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.body})}switch(A.error.reason){case"non-json":throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/tokenize.");case"unknown":throw new h.CohereError({message:A.error.errorMessage})}})}detokenize(S,C){var T,M;return n(this,void 0,void 0,function*(){const A=yield((T=this._options.fetcher)!==null&&T!==void 0?T:l.fetcher)({url:(0,d.default)((M=yield l.Supplier.get(this._options.environment))!==null&&M!==void 0?M:s.CohereEnvironment.Production,"v1/detokenize"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version},C==null?void 0:C.headers),contentType:"application/json",requestType:"json",body:c.DetokenizeRequest.jsonOrThrow(S,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0}),timeoutMs:(C==null?void 0:C.timeoutInSeconds)!=null?C.timeoutInSeconds*1e3:3e5,maxRetries:C==null?void 0:C.maxRetries,abortSignal:C==null?void 0:C.abortSignal});if(A.ok)return c.DetokenizeResponse.parseOrThrow(A.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(A.error.reason==="status-code")switch(A.error.statusCode){case 400:throw new u.BadRequestError(A.error.body);case 401:throw new u.UnauthorizedError(A.error.body);case 403:throw new u.ForbiddenError(A.error.body);case 404:throw new u.NotFoundError(A.error.body);case 422:throw new u.UnprocessableEntityError(A.error.body);case 429:throw new u.TooManyRequestsError(A.error.body);case 498:throw new u.InvalidTokenError(A.error.body);case 499:throw new u.ClientClosedRequestError(A.error.body);case 500:throw new u.InternalServerError(A.error.body);case 501:throw new u.NotImplementedError(A.error.body);case 503:throw new u.ServiceUnavailableError(A.error.body);case 504:throw new u.GatewayTimeoutError(A.error.body);default:throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.body})}switch(A.error.reason){case"non-json":throw new h.CohereError({statusCode:A.error.statusCode,body:A.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/detokenize.");case"unknown":throw new h.CohereError({message:A.error.errorMessage})}})}checkApiKey(S){var C,T;return n(this,void 0,void 0,function*(){const M=yield((C=this._options.fetcher)!==null&&C!==void 0?C:l.fetcher)({url:(0,d.default)((T=yield l.Supplier.get(this._options.environment))!==null&&T!==void 0?T:s.CohereEnvironment.Production,"v1/check-api-key"),method:"POST",headers:Object.assign({Authorization:yield this._getAuthorizationHeader(),"X-Client-Name":(yield l.Supplier.get(this._options.clientName))!=null?yield l.Supplier.get(this._options.clientName):void 0,"X-Fern-Language":"JavaScript","X-Fern-SDK-Name":"cohere-ai","X-Fern-SDK-Version":"7.16.0","User-Agent":"cohere-ai/7.16.0","X-Fern-Runtime":l.RUNTIME.type,"X-Fern-Runtime-Version":l.RUNTIME.version},S==null?void 0:S.headers),contentType:"application/json",requestType:"json",timeoutMs:(S==null?void 0:S.timeoutInSeconds)!=null?S.timeoutInSeconds*1e3:3e5,maxRetries:S==null?void 0:S.maxRetries,abortSignal:S==null?void 0:S.abortSignal});if(M.ok)return c.CheckApiKeyResponse.parseOrThrow(M.body,{unrecognizedObjectKeys:"passthrough",allowUnrecognizedUnionMembers:!0,allowUnrecognizedEnumValues:!0,skipValidation:!0,breadcrumbsPrefix:["response"]});if(M.error.reason==="status-code")switch(M.error.statusCode){case 400:throw new u.BadRequestError(M.error.body);case 401:throw new u.UnauthorizedError(M.error.body);case 403:throw new u.ForbiddenError(M.error.body);case 404:throw new u.NotFoundError(M.error.body);case 422:throw new u.UnprocessableEntityError(M.error.body);case 429:throw new u.TooManyRequestsError(M.error.body);case 498:throw new u.InvalidTokenError(M.error.body);case 499:throw new u.ClientClosedRequestError(M.error.body);case 500:throw new u.InternalServerError(M.error.body);case 501:throw new u.NotImplementedError(M.error.body);case 503:throw new u.ServiceUnavailableError(M.error.body);case 504:throw new u.GatewayTimeoutError(M.error.body);default:throw new h.CohereError({statusCode:M.error.statusCode,body:M.error.body})}switch(M.error.reason){case"non-json":throw new h.CohereError({statusCode:M.error.statusCode,body:M.error.rawBody});case"timeout":throw new h.CohereTimeoutError("Timeout exceeded when calling POST /v1/check-api-key.");case"unknown":throw new h.CohereError({message:M.error.errorMessage})}})}_getAuthorizationHeader(){var S;return n(this,void 0,void 0,function*(){const C=(S=yield l.Supplier.get(this._options.token))!==null&&S!==void 0?S:process==null?void 0:e.CO_API_KEY;if(C==null)throw new h.CohereError({message:"Please specify CO_API_KEY when instantiating the client."});return`Bearer ${C}`})}}return ca.CohereClient=w,ca}var Vge;function hAe(){if(Vge)return FC;Vge=1,Object.defineProperty(FC,"__esModule",{value:!0}),FC.AwsClient=void 0;const e=pH();let t=class extends e.CohereClient{constructor(i){i.token="n/a",super(i)}};return FC.AwsClient=t,FC}var kge;function oDt(){if(kge)return QS;kge=1,Object.defineProperty(QS,"__esModule",{value:!0}),QS.BedrockClient=void 0;const e=cAe(),t=hAe();let r=class extends t.AwsClient{constructor(n){super(Object.assign(Object.assign({},n),{fetcher:(0,e.fetchOverride)("bedrock",n)}))}};return QS.BedrockClient=r,QS}var UC={},qge;function sDt(){if(qge)return UC;qge=1,Object.defineProperty(UC,"__esModule",{value:!0}),UC.CohereClientV2=void 0;const e=dAe(),t=pH();class r{constructor(n){this._options=n,this.client=new t.CohereClient(this._options),this.clientV2=new e.V2(this._options),this.chat=this.clientV2.chat.bind(this.clientV2),this.chatStream=this.clientV2.chatStream.bind(this.clientV2),this.embed=this.clientV2.embed.bind(this.clientV2),this.rerank=this.clientV2.rerank.bind(this.clientV2),this.generateStream=this.client.generateStream.bind(this.clientV2),this.generate=this.client.generate.bind(this.clientV2),this.classify=this.client.classify.bind(this.clientV2),this.summarize=this.client.summarize.bind(this.clientV2),this.tokenize=this.client.tokenize.bind(this.clientV2),this.detokenize=this.client.detokenize.bind(this.clientV2),this.checkApiKey=this.client.checkApiKey.bind(this.clientV2),this.embedJobs=this.client.embedJobs,this.datasets=this.client.datasets,this.connectors=this.client.connectors,this.models=this.client.models,this.finetuning=this.client.finetuning}}return UC.CohereClientV2=r,UC}var VC={},Wge;function lDt(){if(Wge)return VC;Wge=1,Object.defineProperty(VC,"__esModule",{value:!0}),VC.CustomClient=void 0;const e=pH();let t=class extends e.CohereClient{constructor(i={}){var n,a;try{const o=/\/v1\/?$/,s=(n=i.environment)===null||n===void 0?void 0:n.toString().replace(o,"");s!==((a=i.environment)===null||a===void 0?void 0:a.toString())&&(i.environment=s)}catch{}super(i),this._options=i}};return VC.CustomClient=t,VC}var kC={},Gge;function uDt(){if(Gge)return kC;Gge=1,Object.defineProperty(kC,"__esModule",{value:!0}),kC.SagemakerClient=void 0;const e=hAe(),t=cAe();let r=class extends e.AwsClient{constructor(n){super(Object.assign(Object.assign({},n),{fetcher:(0,t.fetchOverride)("sagemaker",n)}))}};return kC.SagemakerClient=r,kC}var Hge;function cDt(){return Hge||(Hge=1,function(e){var t=dm&&dm.__createBinding||(Object.create?function(c,d,h,f){f===void 0&&(f=h);var g=Object.getOwnPropertyDescriptor(d,h);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(c,f,g)}:function(c,d,h,f){f===void 0&&(f=h),c[f]=d[h]}),r=dm&&dm.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),i=dm&&dm.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&t(d,c,h);return r(d,c),d};Object.defineProperty(e,"__esModule",{value:!0}),e.SagemakerClient=e.CohereTimeoutError=e.CohereError=e.CohereEnvironment=e.CohereClient=e.CohereClientV2=e.BedrockClient=e.Cohere=void 0,e.Cohere=i(Iv());var n=oDt();Object.defineProperty(e,"BedrockClient",{enumerable:!0,get:function(){return n.BedrockClient}});var a=sDt();Object.defineProperty(e,"CohereClientV2",{enumerable:!0,get:function(){return a.CohereClientV2}});var o=lDt();Object.defineProperty(e,"CohereClient",{enumerable:!0,get:function(){return o.CustomClient}});var s=Fv();Object.defineProperty(e,"CohereEnvironment",{enumerable:!0,get:function(){return s.CohereEnvironment}});var l=pn();Object.defineProperty(e,"CohereError",{enumerable:!0,get:function(){return l.CohereError}}),Object.defineProperty(e,"CohereTimeoutError",{enumerable:!0,get:function(){return l.CohereTimeoutError}});var u=uDt();Object.defineProperty(e,"SagemakerClient",{enumerable:!0,get:function(){return u.SagemakerClient}})}(dm)),dm}var dDt=cDt();const hDt="https://prod.spline.design/s-j5jNSd8tcMVAPo/scene.splinecode",fDt=new dDt.CohereClient({token:"WFaYZ1K81v33CYmnXrAqJhtrgII8BYNp1DZ9VM09"}),pDt=()=>{tn.defaults.baseURL="http://localhost:5000",aa();const{currentUser:e}=FG(),t=qM(),[r,i]=G.useState([]),[n,a]=G.useState(!0),[o,s]=G.useState(!1),[l,u]=G.useState(!1),[c,d]=G.useState(!1),h=G.useRef();G.useEffect(()=>{!e&&!(e!=null&&e.isGuest)&&t("/login")},[e,t]),G.useEffect(()=>{e||t("/login")},[e,t]),G.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[r]);const f=()=>{d(!0)},g=["Use unique passwords for each account","Enable two-factor authentication where possible","Regularly update your software and operating systems","Be careful with email attachments and links","Back up your data regularly"],p=async(m,y="text",b=null)=>{if(e){i(w=>[...w,{content:m,isUser:!0,type:y}]);try{const w=await fDt.generate({model:"command",prompt:`You are CyberGuard, a specialized cybersecurity AI assistant. Your core directives:
  
        STRICT RULES:
        1. ONLY respond to questions about:
           - Cybersecurity
           - Information security
           - Digital safety
           - Network security
           - Data protection
           - Privacy measures
           - Security best practices
           - Cyber threats and defenses
  
        2. For ANY off-topic questions (entertainment, homework, general chat, etc.):
           Response: "I am a specialized cybersecurity assistant. I can only help with cybersecurity-related questions. Please ask me about digital security, cyber threats, or data protection instead."
  
        3. For greetings: Respond professionally while immediately steering the conversation toward security topics.
  
        Current user message: ${m}
  
        Respond as a cybersecurity expert (maintain professional tone):`,max_tokens:300,temperature:.7,stop_sequences:["User:","Human:"]});i(x=>[...x,{content:w.generations[0].text.trim(),isUser:!1,type:"text",severity:"info"}])}catch(w){console.error("Error:",w),i(x=>[...x,{content:"I apologize, but I encountered an error. Please try again with your cybersecurity question.",isUser:!1,type:"text",severity:"error"}])}}};return V.jsxs(qs,{maxWidth:"xl",sx:{py:4,display:"flex",flexDirection:"column",minHeight:"calc(100vh - 64px)",position:"relative"},children:[V.jsxs(Rt,{sx:{display:"flex",gap:4,height:"calc(100vh - 200px)",mb:8},children:[V.jsx(Rt,{sx:{width:{xs:"0%",lg:"35%"},display:{xs:"none",lg:"flex"},flexDirection:"column",position:"relative"},children:V.jsxs(Rt,{sx:{position:"relative",height:"60%",minHeight:"400px",display:"flex",justifyContent:"center",alignItems:"center"},children:[V.jsx(Rt,{sx:{width:"100%",height:"100%",position:"relative"},children:V.jsx(VCe,{scene:hDt,onLoad:f,style:{width:"100%",height:"100%",opacity:c?1:0,transition:"opacity 0.5s ease"}})}),V.jsxs(Na,{elevation:6,sx:{position:"absolute",bottom:"10%",left:"50%",transform:"translateX(-50%)",width:"80%",p:3,bgcolor:"rgba(20, 30, 48, 0.8)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:2,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",zIndex:2},children:[V.jsx(Qt,{variant:"h6",sx:{color:"#fff",mb:1,fontSize:"1rem",background:"linear-gradient(45deg, #fff, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"CyberGuard Tips"}),V.jsx(Qt,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)"},children:g[Math.floor(Math.random()*g.length)]})]})]})}),V.jsx(Rt,{sx:{width:{xs:"100%",lg:"65%"},display:"flex",flexDirection:"column"},children:V.jsxs(Na,{elevation:24,sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"rgba(20, 30, 48, 0.7)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:2,overflow:"hidden"},children:[V.jsxs(Rt,{sx:{p:2,display:"flex",justifyContent:"space-between",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",bgcolor:"rgba(20, 30, 48, 0.9)"},children:[V.jsx(Qt,{variant:"h6",sx:{color:"#fff"},children:"CyberGuard Assistant"}),V.jsx(fp,{onClick:()=>u(!l),sx:{color:"#fff"},children:V.jsx(U8e,{})})]}),V.jsx(Rt,{sx:{flex:1,overflowY:"auto",p:2,display:"flex",flexDirection:"column",gap:2},children:r.map((m,y)=>V.jsx(Q_t,{message:m},y))}),V.jsx(Rt,{sx:{p:2,borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:V.jsx(twt,{onSend:p})})]})}),V.jsx(Pye,{anchor:"right",open:l,onClose:()=>u(!1),sx:{"& .MuiDrawer-paper":{width:300,bgcolor:"rgba(20, 30, 48, 0.95)",backdropFilter:"blur(20px)",border:"none"}},children:V.jsx(uwt,{})})]}),V.jsx(Rt,{component:"footer",sx:{position:"fixed",bottom:0,left:0,right:0,py:2,bgcolor:"rgba(20, 30, 48, 0.8)",backdropFilter:"blur(10px)",borderTop:"1px solid rgba(255, 255, 255, 0.1)",zIndex:10},children:V.jsx(qs,{children:V.jsx(Qt,{variant:"body2",align:"center",sx:{color:"rgba(255, 255, 255, 0.7)"},children:" 2024 CyberGuard AI Assistant. All rights reserved."})})})]})},mDt=pr(V.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"})),gDt=()=>{const e=aa(),[t,r]=G.useState(0),[i,n]=G.useState(null),a=(c,d)=>{r(d)},o=c=>{n(c.target.files[0])},s=()=>{console.log("File to upload:",i)},l={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},u=[V.jsxs(Rt,{sx:{py:3},children:[V.jsx(Qt,{variant:"h6",gutterBottom:!0,children:"Upload your code for security analysis"}),V.jsx(Qt,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Our AI will scan your code for potential security vulnerabilities, bad practices, and suggest improvements based on industry standards."}),V.jsxs(Na,{variant:"outlined",sx:{mt:3,p:3,border:"2px dashed rgba(148, 163, 184, 0.3)",borderRadius:2,textAlign:"center",bgcolor:"rgba(15, 23, 42, 0.2)"},children:[V.jsx("input",{type:"file",id:"code-upload",hidden:!0,onChange:o,accept:".js,.py,.java,.cpp,.c,.php,.html,.css"}),V.jsx("label",{htmlFor:"code-upload",children:V.jsx(ja,{variant:"contained",component:"span",startIcon:V.jsx(mDt,{}),sx:{mb:2,background:"linear-gradient(45deg, #8B5CF6, #3B82F6)"},children:"Choose File"})}),V.jsx(Qt,{variant:"body2",color:"text.secondary",children:i?`Selected file: ${i.name}`:"Supported formats: JS, Python, Java, C++, PHP, HTML, CSS"}),i&&V.jsx(ja,{variant:"contained",onClick:s,sx:{mt:2},children:"Analyze Code"})]})]},"code-scanner"),V.jsxs(Rt,{sx:{py:3},children:[V.jsx(Qt,{variant:"h6",gutterBottom:!0,children:"Scan for Vulnerabilities"}),V.jsx(Qt,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Enter a domain or IP address to scan for common security vulnerabilities and open ports."}),V.jsxs(Rt,{sx:{mt:3},children:[V.jsx(G0,{fullWidth:!0,label:"Domain or IP Address",placeholder:"example.com or 192.168.1.1",variant:"outlined",sx:{mb:3,"& .MuiOutlinedInput-root":{bgcolor:"rgba(15, 23, 42, 0.2)"}}}),V.jsx(ja,{variant:"contained",startIcon:V.jsx(Zk,{}),sx:{background:"linear-gradient(45deg, #8B5CF6, #3B82F6)"},children:"Start Scan"})]})]},"vulnerability-scanner"),V.jsxs(Rt,{sx:{py:3},children:[V.jsx(Qt,{variant:"h6",gutterBottom:!0,children:"Password Strength Checker"}),V.jsx(Qt,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Check if your password is strong enough against common attacks. Your password is not stored or transmitted anywhere."}),V.jsxs(Rt,{sx:{mt:3},children:[V.jsx(G0,{fullWidth:!0,type:"password",label:"Enter Password",variant:"outlined",sx:{mb:3,"& .MuiOutlinedInput-root":{bgcolor:"rgba(15, 23, 42, 0.2)"}}}),V.jsx(ja,{variant:"contained",startIcon:V.jsx(FM,{}),sx:{background:"linear-gradient(45deg, #8B5CF6, #3B82F6)"},children:"Check Strength"})]})]},"password-checker"),V.jsxs(Rt,{sx:{py:3},children:[V.jsx(Qt,{variant:"h6",gutterBottom:!0,children:"Security Best Practices"}),V.jsx(Qt,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Generate customized security recommendations for your organization or personal use."}),V.jsxs(Rt,{sx:{mt:3},children:[V.jsx(G0,{fullWidth:!0,multiline:!0,rows:4,label:"Describe your security needs",placeholder:"e.g., I run a small e-commerce business with 5 employees...",variant:"outlined",sx:{mb:3,"& .MuiOutlinedInput-root":{bgcolor:"rgba(15, 23, 42, 0.2)"}}}),V.jsx(ja,{variant:"contained",startIcon:V.jsx(Jk,{}),sx:{background:"linear-gradient(45deg, #8B5CF6, #3B82F6)"},children:"Get Recommendations"})]})]},"security-advisor")];return V.jsxs(qs,{maxWidth:"lg",children:[V.jsxs(Rt,{sx:{mb:6,textAlign:"center"},children:[V.jsx(Fr.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},children:V.jsx(Qt,{variant:"h3",gutterBottom:!0,sx:{fontWeight:700,background:"linear-gradient(45deg, #fff, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Security Tools"})}),V.jsx(Fr.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},children:V.jsx(Qt,{variant:"subtitle1",color:"text.secondary",sx:{maxWidth:700,mx:"auto"},children:"Powerful tools to help you identify vulnerabilities, strengthen your security posture, and protect your digital assets."})})]}),V.jsxs(Da,{container:!0,spacing:4,children:[V.jsx(Da,{item:!0,xs:12,md:4,children:V.jsx(Fr.div,{initial:"hidden",animate:"visible",variants:l,children:V.jsx(Na,{elevation:5,sx:{p:3,height:"100%",bgcolor:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(10px)",border:"1px solid rgba(148, 163, 184, 0.1)"},children:V.jsxs(zye,{orientation:"vertical",value:t,onChange:a,sx:{borderRight:1,borderColor:"divider","& .MuiTab-root":{alignItems:"flex-start",textAlign:"left",py:2},"& .Mui-selected":{color:e.palette.primary.main}},children:[V.jsx(G1,{icon:V.jsx(LG,{}),iconPosition:"start",label:"Code Scanner",sx:{minHeight:64}}),V.jsx(G1,{icon:V.jsx(Zk,{}),iconPosition:"start",label:"Vulnerability Scanner",sx:{minHeight:64}}),V.jsx(G1,{icon:V.jsx(FM,{}),iconPosition:"start",label:"Password Checker",sx:{minHeight:64}}),V.jsx(G1,{icon:V.jsx(Jk,{}),iconPosition:"start",label:"Security Advisor",sx:{minHeight:64}})]})})})}),V.jsx(Da,{item:!0,xs:12,md:8,children:V.jsx(Fr.div,{initial:"hidden",animate:"visible",variants:l,children:V.jsx(Na,{elevation:5,sx:{p:3,height:"100%",bgcolor:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(10px)",border:"1px solid rgba(148, 163, 184, 0.1)"},children:u[t]})})})]})]})},vDt=pr(V.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),yDt=pr(V.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"})),$ge=pr([V.jsx("path",{d:"M13 8.57c-.79 0-1.43.64-1.43 1.43s.64 1.43 1.43 1.43 1.43-.64 1.43-1.43-.64-1.43-1.43-1.43"},"0"),V.jsx("path",{d:"M13 3C9.25 3 6.2 5.94 6.02 9.64L4.1 12.2c-.25.33-.01.8.4.8H6v3c0 1.1.9 2 2 2h1v3h7v-4.68c2.36-1.12 4-3.53 4-6.32 0-3.87-3.13-7-7-7m3 7c0 .13-.01.26-.02.39l.83.66c.08.06.1.16.05.25l-.8 1.39c-.05.09-.16.12-.24.09l-.99-.4c-.21.16-.43.29-.67.39L14 13.83c-.01.1-.1.17-.2.17h-1.6c-.1 0-.18-.07-.2-.17l-.15-1.06c-.25-.1-.47-.23-.68-.39l-.99.4c-.09.03-.2 0-.25-.09l-.8-1.39c-.05-.08-.03-.19.05-.25l.84-.66c-.01-.13-.02-.26-.02-.39s.02-.27.04-.39l-.85-.66c-.08-.06-.1-.16-.05-.26l.8-1.38c.05-.09.15-.12.24-.09l1 .4c.2-.15.43-.29.67-.39L12 6.17c.02-.1.1-.17.2-.17h1.6c.1 0 .18.07.2.17l.15 1.06c.24.1.46.23.67.39l1-.4c.09-.03.2 0 .24.09l.8 1.38c.05.09.03.2-.05.26l-.85.66c.03.12.04.25.04.39"},"1")]),bDt=pr(V.jsx("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.996.996 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"})),_Dt=pr(V.jsx("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67M11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8"})),wDt=pr(V.jsx("path",{d:"M4 7v2c0 .55-.45 1-1 1H2v4h1c.55 0 1 .45 1 1v2c0 1.65 1.35 3 3 3h3v-2H7c-.55 0-1-.45-1-1v-2c0-1.3-.84-2.42-2-2.83v-.34C5.16 11.42 6 10.3 6 9V7c0-.55.45-1 1-1h3V4H7C5.35 4 4 5.35 4 7m17 3c-.55 0-1-.45-1-1V7c0-1.65-1.35-3-3-3h-3v2h3c.55 0 1 .45 1 1v2c0 1.3.84 2.42 2 2.83v.34c-1.16.41-2 1.52-2 2.83v2c0 .55-.45 1-1 1h-3v2h3c1.65 0 3-1.35 3-3v-2c0-.55.45-1 1-1h1v-4z"})),xDt=()=>{const e=aa(),t={hidden:{opacity:0,y:40},visible:a=>({opacity:1,y:0,transition:{delay:a*.1,duration:.8,ease:[.22,1,.36,1]}})},r={hidden:{opacity:0,x:-40},visible:{opacity:1,x:0,transition:{delay:.2,duration:.8}}},i={hidden:{opacity:0,x:40},visible:{opacity:1,x:0,transition:{delay:.2,duration:.8}}},n=[{icon:V.jsx(LM,{color:"primary"}),title:"Advanced Security Analysis",description:"Our AI-powered security analysis provides comprehensive threat detection and prevention strategies."},{icon:V.jsx($ge,{color:"primary"}),title:"Intelligent Assistant",description:"The cybersecurity assistant leverages machine learning to understand complex security issues."},{icon:V.jsx(FM,{color:"primary"}),title:"Privacy Protection",description:"Your data privacy is our top priority. All conversations and uploads are securely processed."},{icon:V.jsx(wDt,{color:"primary"}),title:"Code Security Analysis",description:"Upload your code for detailed security analysis to identify vulnerabilities before deployment."}];return V.jsxs(qs,{maxWidth:"lg",children:[V.jsxs(Rt,{sx:{mb:10,mt:5},children:[V.jsx(Fr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:V.jsx(Qt,{variant:"h2",align:"center",sx:{mb:3,fontWeight:700,background:"linear-gradient(45deg, #fff, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"About CyberGuard"})}),V.jsx(Fr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:V.jsx(Qt,{variant:"h6",align:"center",color:"text.secondary",sx:{maxWidth:800,mx:"auto",mb:5},children:"Providing advanced cybersecurity solutions through artificial intelligence to protect individuals and organizations from evolving digital threats."})}),V.jsxs(Rt,{sx:{width:120,height:120,mx:"auto",mb:5,position:"relative"},children:[V.jsx(Fr.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20,delay:.4},children:V.jsx(hE,{sx:{width:120,height:120,bgcolor:"rgba(139, 92, 246, 0.1)",border:"3px solid",borderColor:e.palette.primary.main,boxShadow:"0 0 30px rgba(139, 92, 246, 0.4)"},children:V.jsx(LM,{sx:{fontSize:60,color:e.palette.primary.main}})})}),[...Array(3)].map((a,o)=>V.jsx(Rt,{component:Fr.div,initial:{rotate:o*120},animate:{rotate:o*120+360},transition:{duration:20,repeat:1/0,ease:"linear"},sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",border:"1px dashed",borderColor:`rgba(139, 92, 246, ${.3-o*.1})`,transformOrigin:"center"},children:V.jsx(Rt,{component:Fr.div,sx:{position:"absolute",top:-5,left:55,width:10,height:10,borderRadius:"50%",bgcolor:e.palette.primary.main,boxShadow:`0 0 10px ${e.palette.primary.main}`}})},o))]})]}),V.jsxs(Da,{container:!0,spacing:6,sx:{mb:10},children:[V.jsx(Da,{item:!0,xs:12,md:6,children:V.jsxs(Fr.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:r,children:[V.jsx(Qt,{variant:"h4",gutterBottom:!0,children:"Our Mission"}),V.jsx(Qt,{variant:"body1",paragraph:!0,children:"At CyberGuard, we believe that cybersecurity should be accessible to everyone. Our mission is to democratize advanced security tools and knowledge through an intuitive AI-powered platform that anyone can use, regardless of their technical expertise."}),V.jsx(Qt,{variant:"body1",children:"We're committed to staying ahead of emerging threats, continuously improving our AI models, and providing actionable security insights that help our users protect their digital lives and businesses."})]})}),V.jsx(Da,{item:!0,xs:12,md:6,children:V.jsx(Fr.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:i,children:V.jsxs(Na,{elevation:4,sx:{p:3,height:"100%",bgcolor:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(10px)",border:"1px solid rgba(148, 163, 184, 0.1)"},children:[V.jsxs(Qt,{variant:"h5",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[V.jsx(yDt,{sx:{mr:1,color:e.palette.success.main}}),"Our Core Values"]}),V.jsx(eM,{children:["Security Excellence","Privacy Protection","User Empowerment","Continuous Innovation","Ethical AI Development"].map((a,o)=>V.jsxs(pV,{sx:{py:1},children:[V.jsx(VR,{sx:{minWidth:36},children:V.jsx(vDt,{color:"success",fontSize:"small"})}),V.jsx(tM,{primary:a})]},o))})]})})})]}),V.jsxs(Rt,{sx:{mb:10},children:[V.jsx(Qt,{variant:"h4",align:"center",sx:{mb:6},children:"Key Features"}),V.jsx(Da,{container:!0,spacing:4,children:n.map((a,o)=>V.jsx(Da,{item:!0,xs:12,sm:6,children:V.jsx(Fr.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:t,custom:o,children:V.jsxs(Na,{elevation:4,sx:{p:3,height:"100%",bgcolor:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(10px)",border:"1px solid rgba(148, 163, 184, 0.1)",transition:"transform 0.3s ease","&:hover":{transform:"translateY(-5px)"}},children:[V.jsxs(Rt,{sx:{display:"flex",alignItems:"center",mb:2},children:[V.jsx(hE,{sx:{bgcolor:"rgba(139, 92, 246, 0.1)",color:e.palette.primary.main,mr:2},children:a.icon}),V.jsx(Qt,{variant:"h6",children:a.title})]}),V.jsx(Qt,{variant:"body2",color:"text.secondary",children:a.description})]})})},o))})]}),V.jsxs(Rt,{sx:{mb:10},children:[V.jsx(Qt,{variant:"h4",align:"center",sx:{mb:4},children:"Our Technology"}),V.jsx(Fr.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:t,custom:0,children:V.jsx(Na,{elevation:4,sx:{p:4,bgcolor:"rgba(30, 41, 59, 0.5)",backdropFilter:"blur(10px)",border:"1px solid rgba(148, 163, 184, 0.1)"},children:V.jsx(Da,{container:!0,spacing:4,children:[{icon:V.jsx(bDt,{fontSize:"large"}),title:"Advanced Machine Learning",description:"Our security analysis engine uses state-of-the-art machine learning algorithms to detect patterns and anomalies in code and network behavior."},{icon:V.jsx($ge,{fontSize:"large"}),title:"Natural Language Processing",description:"The chatbot interface is built on sophisticated NLP models that understand security contexts and provide relevant responses."},{icon:V.jsx(_Dt,{fontSize:"large"}),title:"Real-time Threat Intelligence",description:"We maintain connections to global threat intelligence databases to provide up-to-date information on emerging security risks."}].map((a,o)=>V.jsx(Da,{item:!0,xs:12,md:4,children:V.jsxs(Rt,{sx:{textAlign:"center"},children:[V.jsx(hE,{sx:{width:60,height:60,mx:"auto",mb:2,bgcolor:"rgba(139, 92, 246, 0.1)",color:e.palette.primary.main},children:a.icon}),V.jsx(Qt,{variant:"h6",gutterBottom:!0,children:a.title}),V.jsx(Qt,{variant:"body2",color:"text.secondary",children:a.description})]})},o))})})})]}),V.jsxs(Rt,{component:Fr.div,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},sx:{textAlign:"center",mb:4},children:[V.jsx(NR,{sx:{mb:4}}),V.jsx(Qt,{variant:"h6",gutterBottom:!0,children:"Join us in creating a more secure digital world"}),V.jsx(Qt,{variant:"body2",color:"text.secondary",children:"CyberGuard is committed to advancing cybersecurity through innovation, education, and accessible tools."})]})]})},SDt=pr(V.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),CDt=pr(V.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),EDt=()=>{const e=aa(),[t,r]=G.useState(10);return G.useEffect(()=>{const i=setInterval(()=>{r(n=>n<=1?(clearInterval(i),window.location.href="/",0):n-1)},1e3);return()=>clearInterval(i)},[]),V.jsx(qs,{maxWidth:"md",sx:{height:"calc(100vh - 200px)",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},children:V.jsxs(Rt,{children:[V.jsxs(Rt,{sx:{mb:4,position:"relative"},children:[V.jsx(Fr.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},children:V.jsx(SDt,{sx:{fontSize:120,color:e.palette.primary.main,opacity:.8}})}),V.jsx(Fr.div,{animate:{rotate:[0,5,0,-5,0]},transition:{repeat:1/0,duration:5},style:{position:"absolute",top:5,right:"50%",marginRight:-95,zIndex:2},children:V.jsx(LM,{sx:{fontSize:40,color:e.palette.error.main,filter:"drop-shadow(0 0 10px rgba(239, 68, 68, 0.5))"}})}),[...Array(5)].map((i,n)=>V.jsx(Fr.div,{initial:{x:0,y:0,opacity:.8,scale:.5+Math.random()*.5},animate:{x:(Math.random()-.5)*200,y:(Math.random()-.5)*200,opacity:0,rotate:Math.random()*360},transition:{duration:2+Math.random()*2,repeat:1/0,repeatType:"loop",delay:n*.2,ease:"easeOut"},style:{position:"absolute",top:"50%",left:"50%",width:8,height:8,borderRadius:"50%",backgroundColor:e.palette.primary.main,boxShadow:`0 0 10px ${e.palette.primary.main}`,zIndex:1}},n))]}),V.jsx(Fr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},children:V.jsx(Qt,{variant:"h2",gutterBottom:!0,sx:{background:"linear-gradient(45deg, #fff, #A78BFA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:700},children:"404"})}),V.jsx(Fr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},children:V.jsx(Qt,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600},children:"Security Breach Detected"})}),V.jsx(Fr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},children:V.jsxs(Qt,{variant:"body1",color:"text.secondary",paragraph:!0,sx:{maxWidth:500,mx:"auto",mb:4},children:["The page you're looking for doesn't exist or has been moved to a secure location. Our security protocols will redirect you to safety in ",t," seconds."]})}),V.jsx(Fr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.6},children:V.jsx(ja,{variant:"contained",component:A0,to:"/",startIcon:V.jsx(CDt,{}),sx:{py:1.5,px:3,background:"linear-gradient(45deg, #8B5CF6, #3B82F6)",boxShadow:"0 10px 25px rgba(139, 92, 246, 0.3)",mr:2},children:"Return to Safety"})})]})})},MDt=pr(V.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),PDt=pr(V.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})),TDt=pr(V.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})),ADt=pr(V.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"})),ODt=()=>{var f;const e=aa();$4e(e.breakpoints.down("md"));const[t,r]=G.useState(!1),{currentUser:i,signOut:n}=FG(),a=qM(),o=Jm(),s=[{name:"Home",path:"/",icon:V.jsx(PDt,{})},{name:"Chat",path:"/chat",icon:V.jsx(TDt,{})},{name:"Security Tools",path:"/tools",icon:V.jsx(LM,{})},{name:"About",path:"/about",icon:V.jsx(kCe,{})},{name:"Dashboard",path:"/dashboard",icon:V.jsx(ADt,{})}],l=()=>{r(!t)},u=async()=>{await n()&&a("/")},c={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,duration:.3}}},d={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},h=V.jsx(Rt,{sx:{width:250,mt:2},children:V.jsx(Fr.div,{initial:"hidden",animate:"visible",variants:c,children:V.jsxs(eM,{children:[s.map(g=>V.jsx(Fr.div,{variants:d,children:V.jsxs(pV,{button:!0,component:A0,to:g.path,selected:o.pathname===g.path,onClick:l,sx:{borderRadius:2,my:.5,mx:1,backgroundColor:o.pathname===g.path?"rgba(139, 92, 246, 0.15)":"transparent","&:hover":{backgroundColor:"rgba(139, 92, 246, 0.1)"}},children:[V.jsx(VR,{sx:{color:o.pathname===g.path?e.palette.primary.main:"inherit"},children:g.icon}),V.jsx(tM,{primary:g.name,primaryTypographyProps:{fontWeight:o.pathname===g.path?600:400}})]})},g.path)),i&&V.jsx(Fr.div,{variants:d,children:V.jsxs(pV,{button:!0,onClick:u,sx:{borderRadius:2,my:.5,mx:1,"&:hover":{backgroundColor:"rgba(239, 68, 68, 0.1)"}},children:[V.jsx(VR,{sx:{color:e.palette.error.main},children:V.jsx(uY,{})}),V.jsx(tM,{primary:"Logout"})]})})]})})});return V.jsxs(Rt,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",background:"url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ3Lg8SCZWtKE2FAON1sT3uLQfjHP_zKBF-Ug&s') no-repeat center center fixed",backgroundSize:"cover","&::before":{content:'""',position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(15, 23, 42, 0.85)",backdropFilter:"blur(5px)",zIndex:0}},children:[V.jsx(Nze,{position:"static",sx:{position:"relative",zIndex:1},children:V.jsx(qs,{maxWidth:"xl",children:V.jsxs(C4e,{disableGutters:!0,children:[V.jsx(Rt,{sx:{display:{xs:"flex",md:"none"}},children:V.jsx(fp,{size:"large","aria-label":"menu",onClick:l,sx:{color:"white"},children:V.jsx(MDt,{})})}),V.jsx(Qt,{variant:"h5",component:A0,to:"/",sx:{mr:2,flexGrow:{xs:1,md:0},fontFamily:'"Orbitron", sans-serif',fontWeight:700,letterSpacing:".2rem",color:"white",textDecoration:"none",display:"flex",alignItems:"center"},children:"CYBERGUARD"}),V.jsx(Rt,{sx:{flexGrow:1,display:{xs:"none",md:"flex"},ml:4},children:s.map(g=>V.jsxs(ja,{component:A0,to:g.path,sx:{my:2,mx:1.5,color:"white",display:"flex",alignItems:"center",position:"relative","&::after":{content:'""',position:"absolute",width:o.pathname===g.path?"100%":"0%",height:"3px",bottom:0,left:0,backgroundColor:e.palette.primary.main,transition:"width 0.3s ease"},"&:hover":{backgroundColor:"transparent","&::after":{width:"100%"}}},children:[g.icon,V.jsx(Rt,{component:"span",sx:{ml:1},children:g.name})]},g.path))}),V.jsx(Rt,{sx:{display:"flex",alignItems:"center"},children:i?V.jsxs(V.Fragment,{children:[V.jsx(mE,{title:i.isGuest?"Guest User":i.email||"User",children:V.jsx(hE,{sx:{bgcolor:e.palette.primary.main,boxShadow:"0 0 10px rgba(139, 92, 246, 0.3)"},children:i.isGuest?"G":((f=i.email)==null?void 0:f[0].toUpperCase())||"U"})}),V.jsx(fp,{onClick:u,sx:{ml:2,color:"white","&:hover":{color:e.palette.error.main}},children:V.jsx(uY,{})})]}):V.jsx(ja,{variant:"contained",component:A0,to:"/login",sx:{background:"linear-gradient(45deg, #8B5CF6, #3B82F6)",boxShadow:"0 4px 20px rgba(139, 92, 246, 0.3)",fontWeight:600,"&:hover":{background:"linear-gradient(45deg, #7C3AED, #2563EB)",boxShadow:"0 6px 24px rgba(139, 92, 246, 0.4)"}},children:"Login"})})]})})}),V.jsx(Pye,{anchor:"left",open:t,onClose:l,ModalProps:{keepMounted:!0},PaperProps:{sx:{backdropFilter:"blur(20px)",backgroundColor:"rgba(15, 23, 42, 0.85)",borderRight:"1px solid rgba(148, 163, 184, 0.1)"}},children:h}),V.jsx(Rt,{component:"main",sx:{flexGrow:1,position:"relative",zIndex:1},children:V.jsx(qs,{maxWidth:"xl",sx:{py:4},children:V.jsx(HRe,{})})}),V.jsx(Rt,{component:"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(10px)",position:"relative",zIndex:1},children:V.jsx(qs,{maxWidth:"lg",children:V.jsx(Qt,{variant:"body1",color:"white",align:"center",children:" 2024 CyberGuard. All rights reserved."})})})]})},RDt=()=>{const[e,t]=G.useState(null),[r,i]=G.useState(!0),[n,a]=G.useState(!0),[o,s]=G.useState([]),l=Jm();return G.useEffect(()=>{const u=Jg.onAuthStateChanged(c=>{t(c),i(!1)});return()=>u()},[]),G.useEffect(()=>{l.pathname==="/"&&n&&(localStorage.getItem("hasSeenWelcome")?a(!1):(a(!0),localStorage.setItem("hasSeenWelcome","true")))},[l,n]),V.jsx(cwt,{children:V.jsxs(C3e,{theme:q8e,children:[V.jsx(QLe,{}),V.jsx(XRe,{children:V.jsxs(Fg,{element:V.jsx(ODt,{}),children:[V.jsx(Fg,{index:!0,element:V.jsx(G_t,{})}),V.jsx(Fg,{path:"login",element:V.jsx(dwt,{})}),V.jsx(Fg,{path:"about",element:V.jsx(xDt,{})}),V.jsx(Fg,{path:"tools",element:V.jsx(gDt,{})}),V.jsx(Fg,{path:"chat",element:V.jsx(pDt,{})}),V.jsx(Fg,{path:"*",element:V.jsx(EDt,{})})]})})]})})};tRe.createRoot(document.getElementById("root")).render(V.jsx(G.StrictMode,{children:V.jsx(vDe,{children:V.jsx(RDt,{})})}));export{nle as A,ile as E,UG as F,wMt as H,oMt as S,OMt as a,PMt as b,T_ as c,p2t as d,m2t as e,TMt as f,d8 as g,r8 as h,b2t as i,lle as j,NMt as k,$4 as l,f2t as m,cPt as n,SEe as o,y2t as p,aMt as q,mEe as r,RMt as s,AMt as t,g2t as u,v2t as v};
